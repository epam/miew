{"version":3,"file":"Miew.module.js","sources":["../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../node_modules/spin.js/spin.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../src/Timer.js","../../src/gfx/Stats.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/inherits.js","../../node_modules/@babel/runtime/helpers/isNativeFunction.js","../../node_modules/@babel/runtime/helpers/construct.js","../../node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../../src/utils/EventDispatcher.js","../../src/utils/logger.js","../../src/utils.js","../../src/utils/JobHandle.js","../../src/settings.js","../../src/options.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../src/chem/Atom.js","../../src/chem/Element.js","../../src/chem/Bond.js","../../src/chem/Residue.js","../../src/chem/ResidueType.js","../../src/chem/Chain.js","../../src/chem/StructuralElement.js","../../src/chem/Helix.js","../../node_modules/@babel/runtime/helpers/superPropBase.js","../../node_modules/@babel/runtime/helpers/get.js","../../src/chem/Strand.js","../../src/chem/Sheet.js","../../src/chem/SGroup.js","../../src/utils/SelectionParser.js","../../src/chem/selectors/selectArgs.js","../../src/chem/selectors/selectorsBase.js","../../src/chem/selectors/selectOps.js","../../src/chem/selectors.js","../../src/chem/BiologicalUnit.js","../../src/chem/Assembly.js","../../src/chem/Component.js","../../src/chem/AtomPairs.js","../../src/chem/AutoBond.js","../../src/chem/AromaticLoopsMarker.js","../../src/chem/VoxelWorld.js","../../src/chem/HBondInfo.js","../../src/chem/SecondaryStructureMap.js","../../src/chem/Complex.js","../../src/chem/Volume.js","../../src/chem/Molecule.js","../../src/chem.js","../../src/gfx/CSS2DObject.js","../../src/gfx/RCGroup.js","../../src/gfx/capabilities.js","../../src/gfx/noiseTexture.js","../../src/gfx/shaders/UberMaterial.js","../../src/gfx/gfxutils.js","../../src/Visual.js","../../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArray.js","../../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/toConsumableArray.js","../../src/utils/EntityList.js","../../src/utils/makeContextDependent.js","../../src/gfx/geometries/SphereCollisionGeo.js","../../src/gfx/geometries/InstancedSpheresGeometry.js","../../src/gfx/geometries/RaycastableBufferGeometry.js","../../src/gfx/geometries/ChunkedObjectsGeometry.js","../../src/gfx/geometries/SimpleSpheresGeometry.js","../../src/gfx/geometries/Simple2CCylindersGeometry.js","../../src/gfx/geometries/CylinderBufferGeometry.js","../../src/gfx/geometries/Instanced2CCylindersGeometry.js","../../src/gfx/geometries/ExtrudedObjectsGeometry.js","../../src/gfx/geometries/ThickLinesGeometry.js","../../src/gfx/geometries/LinesGeometry.js","../../src/gfx/geometries/CylinderCollisionGeo.js","../../src/gfx/geometries/ChunkedLinesGeometry.js","../../src/gfx/geometries/TwoColorLinesGeometry.js","../../src/gfx/geometries/CrossGeometry.js","../../src/gfx/geometries/IsoSurfaceGeometry.js","../../src/gfx/geometries/IsoSurfaceMarchCube.js","../../src/gfx/geometries/IsoSurface.js","../../src/gfx/geometries/VolumeSurfaceGeometry.js","../../src/gfx/geometries/QuickSurfGeometry.js","../../src/gfx/geometries/ContactSurface.js","../../src/gfx/geometries/ContactSurfaceGeometry.js","../../src/gfx/geometries/IsoSurfaceAtomColored.js","../../src/gfx/geometries/IsosurfaceBuildNormals.js","../../src/gfx/geometries/IsoSurfaceGeo.js","../../src/gfx/geometries/SSIsosurfaceGeometry.js","../../src/gfx/geometries/LabelsGeometry.js","../../src/gfx/geometries/geometries.js","../../src/gfx/meshes/UberObject.js","../../src/gfx/meshes/ZSpriteMesh.js","../../src/gfx/meshes/ZClippedMesh.js","../../src/gfx/meshes/TextMesh.js","../../src/gfx/meshes/SimpleMesh.js","../../src/gfx/meshes/ThickLineMesh.js","../../src/gfx/meshes/InstancedMesh.js","../../src/gfx/meshes/meshes.js","../../src/gfx/meshes/MeshCreator.js","../../src/gfx/meshes/TransformGroup.js","../../src/gfx/modes/groups/ChemGroup.js","../../src/gfx/modes/groups/AtomsGroup.js","../../src/gfx/modes/groups/AtomsSphereGroup.js","../../src/gfx/modes/groups/AtomsSurfaceGroup.js","../../src/gfx/modes/groups/AtomsSASSESGroupStub.js","../../src/gfx/modes/groups/AtomsTextGroup.js","../../src/gfx/modes/groups/AromaticGroup.js","../../src/gfx/modes/groups/AromaticTorusGroup.js","../../src/gfx/modes/groups/AromaticLinesGroup.js","../../src/gfx/modes/groups/ResiduesGroup.js","../../src/gfx/modes/groups/NucleicItemGroup.js","../../src/gfx/modes/groups/NucleicCylindersGroup.js","../../src/gfx/modes/groups/NucleicSpheresGroup.js","../../vendor/js/Smooth.js","../../src/gfx/modes/groups/CartoonHelper.js","../../src/gfx/modes/groups/ResiduesSubseqGroup.js","../../src/gfx/modes/groups/ResiduesTraceGroup.js","../../src/gfx/modes/groups/BondsGroup.js","../../src/gfx/modes/groups/BondsCylinderGroup.js","../../src/gfx/modes/groups/BondsLinesGroup.js","../../src/gfx/modes/groups/groups.js","../../src/gfx/modes/processors/AtomsProcessor.js","../../src/gfx/modes/processors/OrphanAtomsProcessor.js","../../src/gfx/modes/processors/ResiduesProcessor.js","../../src/gfx/modes/processors/NucleicProcessor.js","../../src/gfx/modes/processors/SubseqsProcessor.js","../../src/gfx/modes/processors/BondsProcessor.js","../../src/gfx/modes/processors/AromaticProcessor.js","../../src/gfx/modes/processors/processors.js","../../src/gfx/modes/groups/GroupsFactory.js","../../src/gfx/modes/Mode.js","../../src/gfx/modes/LinesMode.js","../../src/gfx/modes/LicoriceMode.js","../../src/gfx/modes/BallsAndSticksMode.js","../../src/gfx/modes/VanDerWaalsMode.js","../../src/gfx/modes/TraceMode.js","../../src/gfx/modes/TubeMode.js","../../src/gfx/modes/CartoonMode.js","../../src/gfx/modes/SurfaceMode.js","../../src/gfx/modes/QuickSurfaceMode.js","../../src/gfx/modes/IsoSurfaceMode.js","../../src/gfx/modes/IsoSurfaceSASMode.js","../../src/gfx/modes/IsoSurfaceSESMode.js","../../src/gfx/modes/ContactSurfaceMode.js","../../src/gfx/modes/TextMode.js","../../src/gfx/modes.js","../../src/gfx/palettes/Palette.js","../../src/gfx/palettes/cpkPalette.js","../../src/gfx/palettes/jmolPalette.js","../../src/gfx/palettes/vmdPalette.js","../../src/gfx/palettes.js","../../src/gfx/colorers/Colorer.js","../../src/gfx/colorers/ElementColorer.js","../../src/gfx/colorers/ResidueTypeColorer.js","../../src/gfx/colorers/SequenceColorer.js","../../src/gfx/colorers/ChainColorer.js","../../src/gfx/colorers/SecondaryStructureColorer.js","../../src/gfx/colorers/UniformColorer.js","../../src/gfx/colorers/ConditionalColorer.js","../../src/gfx/colorers/ConformationColorer.js","../../src/gfx/colorers/TemperatureColorer.js","../../src/gfx/colorers/OccupancyColorer.js","../../src/gfx/colorers/HydrophobicityColorer.js","../../src/gfx/colorers/MoleculeColorer.js","../../src/gfx/colorers/CarbonColorer.js","../../src/gfx/colorers.js","../../src/gfx/materials.js","../../src/gfx/Representation.js","../../src/ComplexVisualEdit.js","../../src/ComplexVisual.js","../../src/gfx/shaders/VolumeMaterial.js","../../src/gfx/VolumeMesh.js","../../src/gfx/VolumeBounds.js","../../src/gfx/VolumeFarPlane.js","../../src/VolumeVisual.js","../../src/io/loaders/LoaderList.js","../../src/io/loaders/Loader.js","../../src/io/loaders/FileLoader.js","../../src/io/loaders/XHRLoader.js","../../src/io/loaders/ImmediateLoader.js","../../src/io/loaders.js","../../src/io/parsers/ParserList.js","../../src/io/parsers/Parser.js","../../src/io/parsers/pdb/Remark290.js","../../src/io/parsers/pdb/Remark350.js","../../src/io/parsers/PDBStream.js","../../src/io/parsers/PDBParser.js","../../src/io/parsers/CMLParser.js","../../vendor/js/mmtf.js","../../src/io/parsers/MMTFParser.js","../../src/io/parsers/ParsingError.js","../../src/io/parsers/readCIF.js","../../src/io/parsers/CIFParser.js","../../src/io/parsers/VolumeModel.js","../../src/io/parsers/CCP4Parser.js","../../src/io/parsers/XYZParser.js","../../src/io/parsers/PubChemParser.js","../../src/io/parsers/SDFStream.js","../../src/io/parsers/SDFParser.js","../../src/io/parsers/DSN6Parser.js","../../src/io/parsers/GROReader.js","../../src/io/parsers/GROParser.js","../../src/io/parsers/MOL2Parser.js","../../src/io/parsers.js","../../src/io/exporters/ExporterList.js","../../src/io/exporters/Exporter.js","../../src/io/exporters/PDBResult.js","../../src/io/exporters/PDBExporter.js","../../src/io/exporters/fbx/FBXModel.js","../../src/io/exporters/fbx/FBXGeometry.js","../../src/io/exporters/fbx/FBX1CGeometry.js","../../src/io/exporters/fbx/FBX2CCylinder.js","../../src/io/exporters/fbx/FBXInfoExtractor.js","../../src/io/exporters/fbx/FBXResult.js","../../src/io/exporters/FBXExporter.js","../../src/io/exporters.js","../../src/io/io.js","../../src/gfx/CSS2DRenderer.js","../../src/ui/ObjectControls.js","../../src/ui/Picker.js","../../src/gfx/Axes.js","../../src/gfx/FrameInfo.js","../../src/gfx/objects/SceneObject.js","../../src/gfx/objects/LinesObj.js","../../src/gfx/shaders/OutlineMaterial.js","../../src/gfx/shaders/FXAAMaterial.js","../../src/gfx/shaders/AOMaterial.js","../../src/gfx/shaders/AOHorBlurMaterial.js","../../src/gfx/shaders/AOVertBlurWithBlendMaterial.js","../../src/gfx/shaders/AnaglyphMaterial.js","../../src/gfx/ViewInterpolator.js","../../src/utils/Cookies.js","../../src/gfx/vr/createWebVRButton.js","../../src/gfx/vr/WebVRPoC.js","../../src/Miew.js","../../src/utils/MiewCLIParser.js","../../src/utils/MiewCLIHelp.js","../../src/Miew-cli.js"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","//----------------------------------------------------------------------------\r\n// Timer\r\n\r\nclass Timer {\r\n  constructor() {\r\n    this.startTime = 0;\r\n    this.oldTime = 0;\r\n    this.elapsedTime = 0;\r\n    this.running = false;\r\n  }\r\n\r\n  start() {\r\n    this.startTime = Timer.now();\r\n    this.oldTime = this.startTime;\r\n    this.running = true;\r\n  }\r\n\r\n  stop() {\r\n    this.getElapsedTime();\r\n    this.running = false;\r\n  }\r\n\r\n  getElapsedTime() {\r\n    this.update();\r\n    return this.elapsedTime;\r\n  }\r\n\r\n  update() {\r\n    let delta = 0;\r\n    if (this.running) {\r\n      const newTime = Timer.now();\r\n      delta = 0.001 * (newTime - this.oldTime);\r\n      this.oldTime = newTime;\r\n      this.elapsedTime += delta;\r\n    }\r\n\r\n    return delta;\r\n  }\r\n}\r\n\r\nTimer.now = (function () {\r\n  const p = typeof window !== 'undefined' && window.performance;\r\n  return (p && p.now) ? p.now.bind(p) : Date.now;\r\n}());\r\n\r\nexport default Timer;\r\n","import Timer from '../Timer';\r\n\r\nconst { now } = Timer;\r\n\r\nfunction createElement(tag, id, css) {\r\n  const element = document.createElement(tag);\r\n  element.id = id;\r\n  element.style.cssText = css;\r\n  return element;\r\n}\r\n\r\nclass Stats {\r\n  constructor() {\r\n    this.domElement = createElement('div', 'stats', 'padding:8px');\r\n    this._text = createElement('p', 'fps', 'margin:0;color:silver;font-size:large');\r\n    this.domElement.appendChild(this._text);\r\n\r\n    this._startTime = now();\r\n    this._prevTime = this._startTime;\r\n\r\n    this._deltas = new Array(20);\r\n    this._index = 0;\r\n    this._total = 0.0;\r\n    this._count = 0;\r\n  }\r\n\r\n  end() {\r\n    const time = now();\r\n    const delta = time - this._startTime;\r\n\r\n    if (this._count < this._deltas.length) {\r\n      this._count++;\r\n    } else {\r\n      this._total -= this._deltas[this._index];\r\n    }\r\n    this._total += delta;\r\n    this._deltas[this._index] = delta;\r\n    this._index = (this._index + 1) % this._deltas.length;\r\n\r\n    this.ms = this._total / this._count;\r\n    this.fps = 1000 / this.ms;\r\n\r\n    if (time > this._prevTime + 1000) {\r\n      this._text.textContent = this.fps.toPrecision(2);\r\n      this._prevTime = time;\r\n    }\r\n\r\n    return time;\r\n  }\r\n\r\n  update() {\r\n    this._startTime = this.end();\r\n  }\r\n\r\n  show(on) {\r\n    if (on === undefined) {\r\n      on = true;\r\n    }\r\n    this.domElement.style.display = on ? 'block' : 'none';\r\n  }\r\n}\r\n\r\nexport default Stats;\r\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","/**\r\n * This class introduces the simplest event system.\r\n */\r\n\r\nimport _ from 'lodash';\r\n\r\nfunction isUndefOrEqual(param, value) {\r\n  return !param || param === value;\r\n}\r\n\r\n/**\r\n * Creates empty dispatcher.\r\n *\r\n * @exports EventDispatcher\r\n * @constructor\r\n */\r\nfunction EventDispatcher() {\r\n  this._handlers = {};\r\n}\r\n\r\n/**\r\n * Binds callback on specific event type. Optional `context` parameter\r\n * could be used as 'this' for the `callback`.\r\n * @param {string}   type       Event name.\r\n * @param {function} callback   Callback function.\r\n * @param {Object}   [context] 'This' object for the callback.\r\n */\r\nEventDispatcher.prototype.addEventListener = function (type, callback, context) {\r\n  let handlers = this._handlers[type];\r\n\r\n  if (!handlers) {\r\n    this._handlers[type] = [];\r\n    handlers = this._handlers[type];\r\n  }\r\n\r\n  const params = [callback, context];\r\n  function _checkPar(par) {\r\n    return par[0] === params[0] && par[1] === params[1];\r\n  }\r\n\r\n  if (_.find(handlers, _checkPar) === undefined) {\r\n    handlers.push(params);\r\n  }\r\n};\r\n\r\n/**\r\n * Removes a previously-bound callback function from an object.\r\n * If no `context` is specified, all versions of the `callback` with different\r\n * contexts will be removed.\r\n * If no `callback` is specified, all callbacks of the `type` will be removed.\r\n * If no `type` is specified, callbacks for all events will be removed.\r\n * @param {?string}  [type]      Event type.\r\n * @param {function} [callback]  Callback function.\r\n * @param {Object}   [context]  'This' object for the callback.\r\n */\r\nEventDispatcher.prototype.removeEventListener = function (type, callback, context) {\r\n  const self = this;\r\n  _.forEach(self._handlers, (handler, ev) => {\r\n    _.remove(handler, (values) => isUndefOrEqual(type, ev)\r\n          && isUndefOrEqual(callback, values[0])\r\n          && isUndefOrEqual(context, values[1] || self));\r\n  });\r\n\r\n  this._handlers = _.omitBy(self._handlers, (handler) => handler.length === 0);\r\n};\r\n\r\n/**\r\n * Makes all the callbacks for the specific `event` to trigger.\r\n * @param {Object} event      Event.\r\n * @param {string} event.type Type of the event.\r\n */\r\nEventDispatcher.prototype.dispatchEvent = function (event) {\r\n  const self = this;\r\n\r\n  _.forEach(this._handlers[event.type], (callback) => {\r\n    const context = callback[1] || self;\r\n    callback[0].apply(context, [event]);\r\n  });\r\n};\r\n\r\nexport default EventDispatcher;\r\n","/**\r\n * This module contains class for logging.\r\n * Returns an instance of a logger that have already been created.\r\n * Allows users to log messages for five different levels,\r\n * enable console output and catch signal on each message.\r\n */\r\nimport _ from 'lodash';\r\nimport EventDispatcher from './EventDispatcher';\r\n\r\nconst priorities = {\r\n  debug: 0,\r\n  info: 1,\r\n  report: 2,\r\n  warn: 3,\r\n  error: 4,\r\n};\r\n\r\n/**\r\n * Create new Logger.\r\n *\r\n * @exports Logger\r\n * @extends EventDispatcher\r\n * @constructor\r\n */\r\nfunction Logger() {\r\n  EventDispatcher.call(this);\r\n  /** Boolean flag that toggles output to browser console.\r\n   * @type {boolean}\r\n   */\r\n  this.console = false;\r\n  this._priority = priorities.warn;\r\n}\r\n\r\nLogger.prototype = Object.create(EventDispatcher.prototype);\r\nLogger.prototype.constructor = Logger;\r\n\r\n/**\r\n * Create new clean instance of the logger.\r\n * @returns {Logger}\r\n */\r\nLogger.prototype.instantiate = function () {\r\n  return new Logger();\r\n};\r\n\r\nfunction verify(number) {\r\n  if (!_.isNumber(number)) {\r\n    throw new Error('Wrong log level specified!');\r\n  }\r\n  return number;\r\n}\r\n\r\n/**\r\n * @property {string} current threshold for signals and console output.\r\n * @name Logger#level\r\n */\r\nObject.defineProperty(Logger.prototype, 'level', {\r\n  get() {\r\n    return _.findKey(priorities, (value) => value === this._priority);\r\n  },\r\n  set(level) {\r\n    this._priority = verify(priorities[level]);\r\n  },\r\n});\r\n\r\n/**\r\n * Returns the list of all possible level values.\r\n * @returns {Array}\r\n */\r\nLogger.prototype.levels = function () {\r\n  return Object.keys(priorities);\r\n};\r\n\r\n/**\r\n * Add new message with specified level.\r\n * @param {string} level - level of the message, must be one of the\r\n * {'debug' | 'info' | 'report' | 'warn' | 'error'}\r\n * @param {string} message\r\n */\r\nLogger.prototype.message = function (level, message) {\r\n  const priority = verify(priorities[level]);\r\n  this._message(priority, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('debug', ...);\r\n * @param message\r\n */\r\nLogger.prototype.debug = function (message) {\r\n  this._message(priorities.debug, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('info', ...);\r\n * @param message\r\n */\r\nLogger.prototype.info = function (message) {\r\n  this._message(priorities.info, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('report', ...);\r\n * @param message\r\n */\r\nLogger.prototype.report = function (message) {\r\n  this._message(priorities.report, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('warn', ...);\r\n * @param message\r\n */\r\nLogger.prototype.warn = function (message) {\r\n  this._message(priorities.warn, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('error', ...);\r\n * @param message\r\n */\r\nLogger.prototype.error = function (message) {\r\n  this._message(priorities.error, message);\r\n};\r\n\r\n/**\r\n * Add new message with specified priority.\r\n * @param {number} priority - priority of the message\r\n * @param {string} message\r\n * @private\r\n */\r\nLogger.prototype._message = function (priority, message) {\r\n  if (priority < this._priority) {\r\n    return;\r\n  }\r\n  const level = _.findKey(priorities, (value) => value === priority);\r\n  message = String(message);\r\n  if (this.console) {\r\n    const output = `miew:${level}: ${message}`;\r\n    if (level === 'error') {\r\n      console.error(output); // NOSONAR\r\n    } else if (level === 'warn') {\r\n      console.warn(output); // NOSONAR\r\n    } else {\r\n      console.log(output); // NOSONAR\r\n    }\r\n  }\r\n  this.dispatchEvent({ type: 'message', level, message });\r\n};\r\n\r\nexport default new Logger();\r\n","import _ from 'lodash';\r\nimport logger from './utils/logger';\r\n\r\n\r\nconst browserType = {\r\n  DEFAULT: 0,\r\n  SAFARI: 1,\r\n};\r\n//----------------------------------------------------------------------------\r\n// Query string\r\n\r\n/**\r\n * Escape only dangerous chars in a query string component, use a plus instead of a space.\r\n *\r\n * [RFC 3986](https://tools.ietf.org/html/rfc3986) allows the following chars in the query (see 3.4):\r\n *\r\n *       A-Z a-z 0-9 - _ . ~ ! $ & ' ( ) * + , ; = : @ / ?\r\n *\r\n * For query string elements we need to escape ampersand, equal sign, and plus,\r\n * but encodeURIComponent() function encodes anything except for the following:\r\n *\r\n *       A-Z a-z 0-9 - _ . ~ ! ' ( ) *\r\n *\r\n * @param {string} text - key or value to encode\r\n * @param {string} excludeExp - regexp for symbols to exclude from encoding\r\n * @returns {string} encoded string\r\n */\r\nfunction encodeQueryComponent(text, excludeExp) {\r\n  const encode = (code) => String.fromCharCode(parseInt(code.substr(1), 16));\r\n  return encodeURIComponent(text).replace(excludeExp, encode).replace(/%20/g, '+');\r\n}\r\n\r\n/**\r\n * Unescape dangerous chars in a query string component.\r\n *\r\n * @param {string} text - encoded key or value\r\n * @returns {string} decoded string\r\n * @see {@link encodeQueryComponent}\r\n */\r\nfunction decodeQueryComponent(text) {\r\n  return decodeURIComponent(text.replace(/\\+/g, ' '));\r\n}\r\n\r\n/**\r\n * Parse URL and extract an array of parameters.\r\n * @param {string?} url - URL or query string to parse\r\n * @returns {Array} array of (key, value) pairs.\r\n */\r\nfunction getUrlParameters(url) {\r\n  url = url || window.location.search;\r\n\r\n  const query = url.substring(url.indexOf('?') + 1);\r\n  const search = /([^&=]+)=?([^&]*)/g;\r\n  const result = [];\r\n  let match;\r\n\r\n  while ((match = search.exec(query)) !== null) { // eslint-disable-line no-cond-assign\r\n    result.push([decodeQueryComponent(match[1]), decodeQueryComponent(match[2])]);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Parse URL and extract an array of parameters as a hash.\r\n * @param {string?} url - URL or query string to parse\r\n * @returns {Object}\r\n */\r\nfunction getUrlParametersAsDict(url) {\r\n  const result = {};\r\n  const a = getUrlParameters(url);\r\n  for (let i = 0; i < a.length; ++i) {\r\n    const [key, value] = a[i];\r\n    result[key] = value;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction resolveURL(str) {\r\n  if (typeof URL !== 'undefined') {\r\n    try {\r\n      if (typeof window !== 'undefined') {\r\n        return new URL(str, window.location).href;\r\n      }\r\n      return new URL(str).href;\r\n    } catch (error) {\r\n      // IE 11 has a URL object with no constructor available so just try a different approach instead\r\n    }\r\n  }\r\n  if (typeof document !== 'undefined') {\r\n    const anchor = document.createElement('a');\r\n    anchor.href = str;\r\n    return anchor.href;\r\n  }\r\n  return str;\r\n}\r\n\r\n/**\r\n * Generates regular expression object that includes all symbols\r\n * listed in the argument\r\n * @param symbolStr {string} - String containing characters list.\r\n * @returns {RegExp} - Regular expression.\r\n */\r\nfunction generateRegExp(symbolStr) {\r\n  const symbolList = [];\r\n\r\n  for (let i = 0, n = symbolStr.length; i < n; ++i) {\r\n    symbolList[symbolList.length] = symbolStr[i].charCodeAt(0).toString(16);\r\n  }\r\n\r\n  const listStr = symbolList.join('|');\r\n\r\n  return new RegExp(`%(?:${listStr})`, 'gi');\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Create HTML element\r\n\r\nfunction createElement(tag, attrs, content) {\r\n  const element = document.createElement(tag);\r\n  let i;\r\n  let n;\r\n  if (attrs) {\r\n    const keys = Object.keys(attrs);\r\n    for (i = 0, n = keys.length; i < n; ++i) {\r\n      const key = keys[i];\r\n      element.setAttribute(key, attrs[key]);\r\n    }\r\n  }\r\n  if (content) {\r\n    if (!(content instanceof Array)) {\r\n      content = [content];\r\n    }\r\n    for (i = 0, n = content.length; i < n; ++i) {\r\n      const child = content[i];\r\n      if (typeof child === 'string') {\r\n        element.appendChild(document.createTextNode(child));\r\n      } else if (child instanceof HTMLElement) {\r\n        element.appendChild(child);\r\n      }\r\n    }\r\n  }\r\n  return element;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Easy inheritance\r\n\r\n/**\r\n * Derive the class from the base.\r\n * @param cls {function} - Class (constructor) to derive.\r\n * @param base {function} - Class (constructor) to derive from.\r\n * @param members {object=} - Optional instance members to add.\r\n * @param statics {object=} - Optional static class members to add.\r\n * @returns {function} Original class.\r\n */\r\nfunction deriveClass(cls, base, members, statics) {\r\n  cls.prototype = _.assign(Object.create(base.prototype), { constructor: cls }, members);\r\n  if (statics) {\r\n    _.assign(cls, statics);\r\n  }\r\n  return cls;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Deep prototyping\r\n\r\nfunction deriveDeep(obj, needZeroOwnProperties) {\r\n  let res = obj;\r\n  let i;\r\n  let n;\r\n  if (obj instanceof Array) {\r\n    res = new Array(obj.length);\r\n    for (i = 0, n = obj.length; i < n; ++i) {\r\n      res[i] = deriveDeep(obj[i]);\r\n    }\r\n  } else if (obj instanceof Object) {\r\n    res = Object.create(obj);\r\n    const keys = Object.keys(obj);\r\n    for (i = 0, n = keys.length; i < n; ++i) {\r\n      const key = keys[i];\r\n      const value = obj[key];\r\n      const copy = deriveDeep(value);\r\n      if (copy !== value) {\r\n        res[key] = copy;\r\n      }\r\n    }\r\n    if (needZeroOwnProperties && Object.keys(res).length > 0) {\r\n      res = Object.create(res);\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Colors\r\n\r\nfunction hexColor(color) {\r\n  const hex = (`0000000${color.toString(16)}`).substr(-6);\r\n  return `#${hex}`;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Debug tracing\r\n\r\nfunction DebugTracer(namespace) {\r\n  let enabled = false;\r\n\r\n  this.enable = function (on) {\r\n    enabled = on;\r\n  };\r\n\r\n  let indent = 0;\r\n  const methods = Object.keys(namespace);\r\n\r\n  function wrap(method_, name_) {\r\n    return function (...args) {\r\n      const spaces = DebugTracer.spaces.substr(0, indent * 2);\r\n      if (enabled) {\r\n        logger.debug(`${spaces + name_} {`);\r\n      }\r\n      indent++;\r\n      const result = method_.apply(this, args); // eslint-disable-line no-invalid-this\r\n      indent--;\r\n      if (enabled) {\r\n        logger.debug(`${spaces}} // ${name_}`);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  for (let i = 0, n = methods.length; i < n; ++i) {\r\n    const name = methods[i];\r\n    const method = namespace[name];\r\n    if (method instanceof Function && name !== 'constructor') {\r\n      namespace[name] = wrap(method, name);\r\n    }\r\n  }\r\n}\r\n\r\nDebugTracer.spaces = '                                                                                          ';\r\n\r\nclass OutOfMemoryError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'OutOfMemoryError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction allocateTyped(TypedArrayName, size) {\r\n  let result = null;\r\n  try {\r\n    result = new TypedArrayName(size);\r\n  } catch (e) {\r\n    if (e instanceof RangeError) {\r\n      throw new OutOfMemoryError(e.message);\r\n    } else {\r\n      throw e;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Float array conversion\r\n\r\nfunction bytesToBase64(/** ArrayBuffer */ buffer) {\r\n  const bytes = new Uint8Array(buffer);\r\n  let binary = '';\r\n  for (let i = 0; i < bytes.byteLength; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return window.btoa(binary);\r\n}\r\n\r\nfunction bytesFromBase64(/** string */ str) {\r\n  const binary = window.atob(str);\r\n  const bytes = new Uint8Array(binary.length);\r\n  for (let i = 0; i < bytes.length; ++i) {\r\n    bytes[i] = binary[i].charCodeAt(0);\r\n  }\r\n  return bytes.buffer;\r\n}\r\n\r\nfunction arrayToBase64(/** number[] */ array, /** function */ TypedArrayClass) {\r\n  return bytesToBase64(new TypedArrayClass(array).buffer);\r\n}\r\n\r\nfunction arrayFromBase64(/** string */ str, /** function */ TypedArrayClass) {\r\n  return Array.prototype.slice.call(new TypedArrayClass(bytesFromBase64(str)));\r\n}\r\n\r\n// NOTE: this is 1-level comparison\r\nfunction compareOptionsWithDefaults(opts, defOpts) {\r\n  const optsStr = [];\r\n  if (defOpts && opts) {\r\n    const keys = Object.keys(opts);\r\n    for (let p = 0; p < keys.length; ++p) {\r\n      const key = keys[p];\r\n      const value = opts[key];\r\n      // TODO add processing for tree structure\r\n      if (!(value instanceof Object) && typeof defOpts[key] !== 'undefined' && defOpts[key] !== value) {\r\n        optsStr.push(`${key}:${value}`);\r\n      }\r\n    }\r\n    if (optsStr.length > 0) {\r\n      return `!${optsStr.join()}`;\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction isAlmostPlainObject(o) {\r\n  if (_.isPlainObject(o)) {\r\n    return true;\r\n  }\r\n  const proto = o && Object.getPrototypeOf(o);\r\n  return !!proto && !proto.hasOwnProperty('constructor') && isAlmostPlainObject(proto);\r\n}\r\n\r\n/**\r\n * Build an object that contains properties (and subproperties) of `src` different from those\r\n * in `dst`. Objects are parsed recursively, other values (including arrays) are compared for\r\n * equality using `_.isEqual()`.\r\n * @param {!object} src - a new object to compare, may contain changed or new properties\r\n * @param {!object} dst - an old reference object\r\n */\r\nfunction objectsDiff(src, dst) {\r\n  const diff = {};\r\n  _.forIn(src, (srcValue, key) => {\r\n    const dstValue = dst[key];\r\n    if (isAlmostPlainObject(srcValue) && isAlmostPlainObject(dstValue)) {\r\n      const deepDiff = objectsDiff(srcValue, dstValue);\r\n      if (!_.isEmpty(deepDiff)) {\r\n        diff[key] = deepDiff;\r\n      }\r\n    } else if (!_.isEqual(srcValue, dstValue)) {\r\n      diff[key] = srcValue;\r\n    }\r\n  });\r\n  return diff;\r\n}\r\n\r\nfunction forInRecursive(object, callback) {\r\n  function iterateThrough(obj, prefix) {\r\n    _.forIn(obj, (value, key) => {\r\n      const newPref = prefix + (prefix.length > 0 ? '.' : '');\r\n      if (value instanceof Object) {\r\n        iterateThrough(value, newPref + key);\r\n      } else if (value !== undefined) {\r\n        callback(value, newPref + key);\r\n      }\r\n    });\r\n  }\r\n  iterateThrough(object, '');\r\n}\r\n\r\nfunction enquoteString(value) {\r\n  if (_.isString(value)) {\r\n    return `\"${value.replace(/\"/g, '\\\\\"')}\"`;\r\n  }\r\n  return value;\r\n}\r\n\r\nfunction unquoteString(value) {\r\n  if (!_.isString(value)) {\r\n    return value;\r\n  }\r\n  if (value[0] === '\"' && value[value.length - 1] === '\"') {\r\n    value = value.slice(1, value.length - 1);\r\n    return value.replace(/\\\\\"/g, '\"');\r\n  }\r\n  if (value[0] === \"'\" && value[value.length - 1] === \"'\") {\r\n    value = value.slice(1, value.length - 1);\r\n    return value.replace(/\\\\'/g, \"'\");\r\n  }\r\n  throw new SyntaxError('Incorrect string format, can\\'t unqute it');\r\n}\r\n\r\nfunction getFileExtension(fileName) {\r\n  return fileName.slice((Math.max(0, fileName.lastIndexOf('.')) || Infinity));\r\n}\r\n\r\nfunction splitFileName(fileName) {\r\n  const ext = getFileExtension(fileName);\r\n  const name = fileName.slice(0, fileName.length - ext.length);\r\n  return [name, ext];\r\n}\r\n\r\nfunction dataUrlToBlob(url) {\r\n  const parts = url.split(/[:;,]/);\r\n  const partsCount = parts.length;\r\n  if (partsCount >= 3 && parts[partsCount - 2] === 'base64') {\r\n    return new Blob([bytesFromBase64(parts[partsCount - 1])]);\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction getBrowser() {\r\n  if (navigator.vendor && navigator.vendor.indexOf('Apple') > -1\r\n    && navigator.userAgent\r\n    && navigator.userAgent.indexOf('CriOS') === -1\r\n    && navigator.userAgent.indexOf('FxiOS') === -1) {\r\n    return browserType.SAFARI;\r\n  }\r\n  return browserType.DEFAULT;\r\n}\r\n\r\nfunction shotOpen(url) {\r\n  if (typeof window !== 'undefined') {\r\n    window.open().document.write(`<body style=\"margin:0\"><img src=\"${url}\" /></body>`);\r\n  }\r\n}\r\n\r\nfunction shotDownload(dataUrl, filename) {\r\n  if (!dataUrl || dataUrl.substr(0, 5) !== 'data:') {\r\n    return;\r\n  }\r\n  if (!filename) {\r\n    filename = ['screenshot-', +new Date(), '.png'].join('');\r\n  }\r\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.msSaveBlob) {\r\n    window.navigator.msSaveBlob(dataUrlToBlob(dataUrl), filename);\r\n  } else if (typeof document !== 'undefined') {\r\n    const link = document.createElement('a');\r\n    link.download = filename;\r\n    link.innerHTML = 'download';\r\n    link.href = window.URL.createObjectURL(dataUrlToBlob(dataUrl));\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n  const blobData = new Blob([data]);\r\n\r\n  if (!filename) {\r\n    filename = ['data', +new Date()].join('');\r\n  }\r\n\r\n  if (!type) {\r\n    filename += blobData.type || '.bin';\r\n  } else {\r\n    filename += `.${type}`;\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.msSaveBlob) {\r\n    window.navigator.msSaveBlob(blobData, filename);\r\n  } else if (typeof document !== 'undefined') {\r\n    const link = document.createElement('a');\r\n    link.download = filename;\r\n    link.innerHTML = 'download';\r\n    link.href = window.URL.createObjectURL(blobData);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n}\r\n\r\nfunction copySubArrays(src, dst, indices, itemSize) {\r\n  for (let i = 0, n = indices.length; i < n; ++i) {\r\n    for (let j = 0; j < itemSize; ++j) {\r\n      dst[i * itemSize + j] = src[indices[i] * itemSize + j];\r\n    }\r\n  }\r\n}\r\n\r\nfunction shallowCloneNode(node) {\r\n  const newNode = node.cloneNode(true);\r\n  newNode.worldPos = node.worldPos;\r\n  // .style property is readonly, so \"newNode.style = node.style;\" won't work (and we don't need it, right?)\r\n  return newNode;\r\n}\r\n\r\nconst unquotedStringRE = /^[a-zA-Z0-9_]*$/;\r\nconst enquoteHelper = ['\"', '', '\"'];\r\n\r\n// verify and correct if needed selctor identifier\r\nfunction correctSelectorIdentifier(value) {\r\n  if (unquotedStringRE.test(value)) {\r\n    return value;\r\n  }\r\n  // quote incorrect identifier\r\n  enquoteHelper[1] = value;\r\n  return enquoteHelper.join('');\r\n}\r\n\r\n/**\r\n * Concatenates two TypedArray. Doesn't check null refs o type equality\r\n * Attention! It must be use very rarely because requires memory reallocation every time. Use MergeTypedArraysUnsafe to\r\n * unite array of subarrays.\r\n * @param{TypedArray} first  - destination array\r\n * @param{TypedArray} second - source array\r\n * @returns{TypedArray} resulting concatenated array\r\n */\r\nfunction concatTypedArraysUnsafe(first, second) {\r\n  const result = new first.constructor(first.length + second.length);\r\n  result.set(first);\r\n  result.set(second, first.length);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Merges array of TypedArray into TypedArray. Doesn't check null refs o type equality\r\n * @param{array} array  - source array of subarrays\r\n * @returns{TypedArray} resulting merged array\r\n */\r\nfunction mergeTypedArraysUnsafe(array) {\r\n  if (array.length <= 0) {\r\n    return null;\r\n  }\r\n  // count the size\r\n  const size = array.reduce((acc, cur) => acc + cur.length, 0);\r\n  // create combined array\r\n  const result = new array[0].constructor(size);\r\n  for (let i = 0, start = 0; i < array.length; i++) {\r\n    const count = array[i].length;\r\n    result.set(array[i], start);\r\n    start += count;\r\n  }\r\n  return result;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Exports\r\n\r\nexport default {\r\n  browserType,\r\n  encodeQueryComponent,\r\n  decodeQueryComponent,\r\n  getUrlParameters,\r\n  getUrlParametersAsDict,\r\n  resolveURL,\r\n  generateRegExp,\r\n  createElement,\r\n  deriveClass,\r\n  deriveDeep,\r\n  hexColor,\r\n  DebugTracer,\r\n  OutOfMemoryError,\r\n  allocateTyped,\r\n  bytesFromBase64,\r\n  bytesToBase64,\r\n  arrayFromBase64,\r\n  arrayToBase64,\r\n  compareOptionsWithDefaults,\r\n  objectsDiff,\r\n  forInRecursive,\r\n  enquoteString,\r\n  unquoteString,\r\n  getBrowser,\r\n  shotOpen,\r\n  shotDownload,\r\n  copySubArrays,\r\n  shallowCloneNode,\r\n  correctSelectorIdentifier,\r\n  getFileExtension,\r\n  splitFileName,\r\n  download,\r\n  concatTypedArraysUnsafe,\r\n  mergeTypedArraysUnsafe,\r\n};\r\n","import EventDispatcher from './EventDispatcher';\r\n\r\nexport default class JobHandle extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this._shouldCancel = false;\r\n  }\r\n\r\n  cancel() {\r\n    this._shouldCancel = true;\r\n    this.dispatchEvent({ type: 'cancel' });\r\n  }\r\n\r\n  shouldCancel() {\r\n    return this._shouldCancel;\r\n  }\r\n\r\n  // slaves use this to notify master about their events\r\n  // master routes these notifications to a single event slot\r\n  notify(event) {\r\n    this.dispatchEvent({ type: 'notification', slaveEvent: event });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport utils from './utils';\r\nimport EventDispatcher from './utils/EventDispatcher';\r\n\r\nconst VERSION = 0;\r\n\r\n//----------------------------------------------------------------------------\r\n// DEFAULT SETTINGS\r\n//----------------------------------------------------------------------------\r\n\r\n/**\r\n * Polygonal complexity settings.\r\n *\r\n * @typedef PolyComplexity\r\n * @property {number} poor\r\n * @property {number} low\r\n * @property {number} medium\r\n * @property {number} high\r\n * @property {number} ultra\r\n */\r\n\r\n/**\r\n * @alias SettingsObject\r\n * @namespace\r\n */\r\nconst defaults = {\r\n  /**\r\n   * Default options for all available modes.\r\n   * Use {@link Mode.id} as a dictionary key to access mode options.\r\n   *\r\n   * Usually you don't need to override these settings. You may specify mode options as a parameter during\r\n   * {@link Mode} construction.\r\n   *\r\n   * @memberof SettingsObject#\r\n   * @type {Object.<string, object>}\r\n   *\r\n   * @property {LinesModeOptions} LN - Lines mode options.\r\n   * @property {LicoriceModeOptions} LC - Licorice mode options.\r\n   * @property {BallsAndSticksModeOptions} BS - Balls and Sticks mode options.\r\n   * @property {VanDerWaalsModeOptions} VW - Van der Waals mode options.\r\n   * @property {TraceModeOptions} TR - Trace mode options.\r\n   * @property {TubeModeOptions} TU - Tube mode options.\r\n   * @property {CartoonModeOptions} CA - Cartoon mode options.\r\n   * @property {QuickSurfaceModeOptions} QS - Contact Surface mode options.\r\n   * @property {IsoSurfaceSASModeOptions} SA - Solvent Accessible Surface mode options.\r\n   * @property {IsoSurfaceSESModeOptions} SE - Solvent Excluded Surface mode options.\r\n   * @property {ContactSurfaceModeOptions} CS - Contact Surface mode options.\r\n   * @property {TextModeOptions} TX - Text mode options.\r\n   * @property {VolumeDensityModeOptions} VD - Volume Density mode options.\r\n   */\r\n  modes: {\r\n    //----------------------------------------------------------------------------\r\n    // BALLS AND STICKS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Balls and Sticks mode options.\r\n     *\r\n     * @typedef BallsAndSticksModeOptions\r\n     *\r\n     * @property {number} atom - Sphere radius as a fraction of Van der Waals atom radius.\r\n     * @property {number} bond - Cylinder radius in angstroms.\r\n     * @property {number} space - Fraction of the space around one cylinder. Zero means that cylinder fills all\r\n     *   available space.\r\n     * @property {boolean} multibond - Toggles rendering of multiple ordered bonds.\r\n     * @property {number} aromrad - Minor radius of a torus for aromatic loops.\r\n     * @property {boolean} showarom - Toggles rendering of aromatic loops.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    BS: {\r\n      atom: 0.23,\r\n      bond: 0.15,\r\n      space: 0.5,\r\n      multibond: true,\r\n      aromrad: 0.1,\r\n      showarom: true,\r\n      polyComplexity: {\r\n        poor: 3,\r\n        low: 4,\r\n        medium: 6,\r\n        high: 12,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // VAN DER WAALS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Van der Waals mode options.\r\n     *\r\n     * @typedef VanDerWaalsModeOptions\r\n     *\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    VW: {\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 8,\r\n        high: 16,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // LINES\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Lines mode options.\r\n     *\r\n     * @typedef LinesModeOptions\r\n     *\r\n     * @property {boolean} multibond - Flag, that toggles rendering of multiple ordered bonds.\r\n     * @property {boolean} showarom - Flag, that toggles rendering of aromatic loops.\r\n     * @property {number} offsarom - Offset between bonds and aromatic cycle.\r\n     * @property {number} chunkarom - Number of pieces in a-loop arc, corresponding to atom.\r\n     * @property {number} atom - Collision radius for atoms picking.\r\n     * @property {number} lineWidth - Line width in pixels (not used in thin lines).\r\n     */\r\n    LN: {\r\n      multibond: true,\r\n      showarom: true,\r\n      offsarom: 0.2,\r\n      chunkarom: 10,\r\n      atom: 0.23,\r\n      lineWidth: 2,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // LICORICE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Licorice mode options.\r\n     *\r\n     * @typedef LicoriceModeOptions\r\n     *\r\n     * @property {number} bond - Bond cylinder radius.\r\n     * @property {number} space - Fraction of the space around one cylinder. Zero means that cylinder fills all\r\n     *   available space.\r\n     * @property {boolean} multibond - Flag, that toggles rendering of multiple ordered bonds.\r\n     * @property {number} aromrad - Minor radius of a torus for aromatic loops.\r\n     * @property {boolean} showarom - Flag, that toggles rendering of aromatic loops.\r\n     * @property {PolyComplexity} polyComplexity - Poly complexity values for render modes.\r\n     */\r\n    LC: {\r\n      bond: 0.20,\r\n      space: 0.0,\r\n      multibond: true,\r\n      aromrad: 0.1,\r\n      showarom: true,\r\n      polyComplexity: {\r\n        poor: 3,\r\n        low: 4,\r\n        medium: 6,\r\n        high: 12,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // SURFACE SAS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Solvent Accessible Surface mode options.\r\n     *\r\n     * @typedef IsoSurfaceSASModeOptions\r\n     *\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {number} probeRadius - Radius of the probe.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    SA: {\r\n      zClip: false,\r\n      probeRadius: 1.5,\r\n      subset: '',\r\n      wireframe: false,\r\n      polyComplexity: {\r\n        poor: 6,\r\n        low: 8,\r\n        medium: 16,\r\n        high: 30,\r\n        ultra: 60,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // SURFACE SES\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Solvent Excluded Surface mode options.\r\n     *\r\n     * @typedef IsoSurfaceSESModeOptions\r\n     *\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {number} probeRadius - Radius of the probe.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    SE: {\r\n      zClip: false,\r\n      probeRadius: 1.5,\r\n      subset: '',\r\n      wireframe: false,\r\n      polyComplexity: {\r\n        poor: 6,\r\n        low: 8,\r\n        medium: 16,\r\n        high: 30,\r\n        ultra: 60,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // QUICK SURFACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Quick Surface mode options.\r\n     *\r\n     * @typedef QuickSurfaceModeOptions\r\n     *\r\n     * @property {number} isoValue - Isovalue of the surface to extract.\r\n     * @property {number} scale - Radius scale for the surface being built.\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} gaussLim - Gauss lim for coloring the bigger the value, the smoother our colors are.\r\n     * @property {PolyComplexity} gridSpacing - Poly complexity values for render modes. In this case the value\r\n     *   corresponds to the grid density.\r\n     */\r\n    QS: {\r\n      isoValue: 0.5,\r\n      gaussLim: {\r\n        poor: 1.5,\r\n        low: 2.0,\r\n        medium: 2.5,\r\n        high: 3.0,\r\n        ultra: 4.0,\r\n      },\r\n      scale: 1.0,\r\n      wireframe: false,\r\n      gridSpacing: {\r\n        poor: 2,\r\n        low: 1.5,\r\n        medium: 1,\r\n        high: 0.5,\r\n        ultra: 0.25,\r\n      },\r\n      subset: '',\r\n      zClip: false,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // CONTACT SURFACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Contact Surface mode options.\r\n     *\r\n     * @typedef ContactSurfaceModeOptions\r\n     *\r\n     * @property {number} isoValue - Isovalue of the surface to extract.\r\n     * @property {number} probeRadius - Probe radius.\r\n     * @property {number} probePositions\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Radius scale for the surface being built.\r\n     *   Poly complexity values for render modes. In this case the value corresponds to the grid density.\r\n     */\r\n    CS: {\r\n      probeRadius: 1.4,\r\n      isoValue: 1.5,\r\n      wireframe: false,\r\n      probePositions: 30,\r\n      polyComplexity: {\r\n        poor: 0.5,\r\n        low: 1.0,\r\n        medium: 1.5,\r\n        high: 1.75,\r\n        ultra: 2.0,\r\n      },\r\n      subset: '',\r\n      zClip: false,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TRACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Trace mode options.\r\n     *\r\n     * @typedef TraceModeOptions\r\n     *\r\n     * @property {number} radius - Cylinder radius.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    TR: {\r\n      radius: 0.30,\r\n      polyComplexity: {\r\n        poor: 12,\r\n        low: 16,\r\n        medium: 32,\r\n        high: 64,\r\n        ultra: 64,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TUBE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Tube mode options.\r\n     *\r\n     * @typedef TubeModeOptions\r\n     *\r\n     * @property {number} radius - Cylinder radius.\r\n     * @property {number} tension - Tension for interpolation.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     * @property {number} heightSegmentsRatio - Poly complexity multiplier for height segments.\r\n     */\r\n    TU: {\r\n      radius: 0.30,\r\n      heightSegmentsRatio: 1.5,\r\n      tension: -0.7,\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 10,\r\n        high: 18,\r\n        ultra: 34,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // CARTOON\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Cartoon mode options.\r\n     *\r\n     * @typedef CartoonModeOptions\r\n     *\r\n     * @property {number} radius - Standard tube radius.\r\n     * @property {number} depth - Height of the secondary structure ribbon.\r\n     * @property {number} tension - Tension for interpolation.\r\n     * @proprety {object} ss - Secondary structure parameters.\r\n     * @proprety {object} ss.helix - Options for helices render.\r\n     * @proprety {number} ss.helix.width - Width of the secondary structure ribbon.\r\n     * @proprety {number} ss.helix.arrow - Secondary structure's arrow width.\r\n     * @proprety {object} ss.strand - Options for strands render.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     * polyComplexity must be even for producing symmetric arrows.\r\n     * @property {number} heightSegmentsRatio - Poly complexity multiplier for height segments.\r\n     */\r\n    CA: {\r\n      radius: 0.30,\r\n      depth: 0.25,\r\n      ss: {\r\n        helix: {\r\n          width: 1.0,\r\n          arrow: 2.0,\r\n        },\r\n        strand: {\r\n          width: 1.0,\r\n          arrow: 2.0,\r\n        },\r\n      },\r\n      heightSegmentsRatio: 1.5,\r\n      tension: -0.7,\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 10,\r\n        high: 18,\r\n        ultra: 34,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TEXT\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Text mode options.\r\n     *\r\n     * @typedef TextModeOptions\r\n     *\r\n     * @property {string} template - Format string for building output text.\r\n     * @property {string} horizontalAlign - Text alignment ('left', 'right', 'center').\r\n     * @property {string} verticalAlign - Vertical text box alignment ('top', 'bottom', 'middle').\r\n     * @property {number} dx - Text offset x in angstroms.\r\n     * @property {number} dy - Text offset y in angstroms.\r\n     * @property {number} dz - Text offset z in angstroms.\r\n     * @property {string} fg - Color rule for foreground.\r\n     * @property {string} bg - Color rule for background.\r\n     * @property {boolean} showBg - Flag, that toggles background rendering.\r\n     *\r\n     */\r\n    TX: {\r\n      template: '{{Chain}}.{{Residue}}{{Sequence}}.{{Name}}',\r\n      horizontalAlign: 'center',\r\n      verticalAlign: 'middle',\r\n      dx: 0,\r\n      dy: 0,\r\n      dz: 1,\r\n      fg: 'none',\r\n      bg: '0x202020',\r\n      showBg: true,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // VOLUME DENSITY\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Volume density mode options.\r\n     *\r\n     * @typedef VolumeDensityModeOptions\r\n     *\r\n     * @property {number} kSigma - Noise threshold coefficient.\r\n     * @property {boolean} frame - flag, that turns on box frame painting.\r\n     * @property {boolean} isoMode - flag, that turns on IsoSurface mode instead of Volume Rendering.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    VD: {\r\n      kSigma: 1.0,\r\n      kSigmaMed: 2.0,\r\n      kSigmaMax: 4.0,\r\n      frame: true,\r\n      isoMode: false,\r\n      polyComplexity: {\r\n        poor: 2,\r\n        low: 3,\r\n        medium: 4,\r\n        high: 8,\r\n        ultra: 10,\r\n      },\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Default options for all available colorers.\r\n   * Use {@link Colorer.id} as a dictionary key to access colorer options.\r\n   *\r\n   * Usually you don't need to override these settings. You may specify colorer options as a parameter during\r\n   * {@link Colorer} construction.\r\n   *\r\n   * Not all colorers have options.\r\n   *\r\n   * @memberof SettingsObject#\r\n   * @type {Object.<string, object>}\r\n   *\r\n   * @property {ElementColorerOptions} EL - Element colorer options.\r\n   * @property {SequenceColorerOptions} SQ - Sequence colorer options.\r\n   * @property {MoleculeColorerOptions} MO - Molecule colorer options.\r\n   * @property {UniformColorerOptions} UN - Uniform colorer options.\r\n   * @property {ConditionalColorerOptions} CO - Conditional colorer options.\r\n   * @property {TemperatureColorerOptions} TM - Temperature colorer options.\r\n   * @property {OccupancyColorerOptions} OC - Occupancy colorer options.\r\n   * @property {HydrophobicityColorerOptions} HY - Hydrophobicity colorer options.\r\n   */\r\n  colorers: {\r\n    /**\r\n     * Element colorer options.\r\n     *\r\n     * @typedef ElementColorerOptions\r\n     *\r\n     * @property {number} carbon - Carbon color or -1 to use default.\r\n     */\r\n    EL: {\r\n      carbon: -1,\r\n    },\r\n\r\n    /**\r\n     * Uniform colorer options.\r\n     *\r\n     * @typedef UniformColorerOptions\r\n     *\r\n     * @property {number} color - Single color to paint with.\r\n     */\r\n    UN: {\r\n      color: 0xFFFFFF,\r\n    },\r\n\r\n    /**\r\n     * Conditional colorer options.\r\n     *\r\n     * @typedef ConditionalColorerOptions\r\n     *\r\n     * @property {string} subset - Selector string.\r\n     * @property {number} color - Color of selected atoms.\r\n     * @property {number} baseColor - Color of other atoms.\r\n     */\r\n    CO: {\r\n      subset: 'charged',\r\n      color: 0xFF0000,\r\n      baseColor: 0xFFFFFF,\r\n    },\r\n\r\n    /**\r\n     * Carbon colorer options.\r\n     *\r\n     * @typedef CarbonColorerOptions\r\n     *\r\n     * @property {number} color - Single color to paint carbons\r\n     * @property {number} factor - Color factor for not carbon atoms.\r\n     */\r\n    CB: {\r\n      color: 0x909090,\r\n      factor: 0.6,\r\n    },\r\n\r\n    /**\r\n     * Sequence colorer options.\r\n     *\r\n     * @typedef SequenceColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    SQ: {\r\n      gradient: 'rainbow',\r\n    },\r\n\r\n    /**\r\n     * Temperature colorer options.\r\n     *\r\n     * @typedef TemperatureColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     * @property {number} min - Minimal temperature.\r\n     * @property {number} max - Maximal temperature.\r\n     */\r\n    TM: {\r\n      gradient: 'temp',\r\n      min: 5,\r\n      max: 40,\r\n    },\r\n\r\n    /**\r\n     * Occupancy colorer options.\r\n     *\r\n     * @typedef OccupancyColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    OC: {\r\n      gradient: 'reds',\r\n    },\r\n\r\n    /**\r\n     * Hydrophobicity colorer options.\r\n     *\r\n     * @typedef HydrophobicityColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    HY: {\r\n      gradient: 'blue-red',\r\n    },\r\n\r\n    /**\r\n     * Molecule colorer options.\r\n     *\r\n     * @typedef MoleculeColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    MO: {\r\n      gradient: 'rainbow',\r\n    },\r\n  },\r\n\r\n  /*\r\n   * Use antialiasing in WebGL.\r\n   * @type {boolean}\r\n   */\r\n  antialias: true,\r\n\r\n  /*\r\n   * Camera field of view in degrees.\r\n   * @type {number}\r\n   */\r\n  camFov: 45.0,\r\n\r\n  /*\r\n   * Camera near plane distance.\r\n   * @type {number}\r\n   */\r\n  camNear: 0.5,\r\n\r\n  /*\r\n   * Camera far plane distance.\r\n   * @type {number}\r\n   */\r\n  camFar: 100.0,\r\n\r\n  camDistance: 2.5,\r\n\r\n  radiusToFit: 1.0,\r\n\r\n  /**\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fogNearFactor: 0.5, // [0, 1]\r\n\r\n  /**\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fogFarFactor: 1, // [0, 1]\r\n  fogAlpha: 1.0,\r\n  fogColor: 0x000000,\r\n  fogColorEnable: false,\r\n\r\n  /**\r\n   * Palette used for molecule coloring.\r\n   * @type {string}\r\n   */\r\n  palette: 'JM',\r\n\r\n  /*\r\n   * Geometry resolution.\r\n   * @type {string}\r\n   */\r\n  resolution: 'medium',\r\n\r\n  autoResolution: false/* true */,\r\n\r\n  autoPreset: true,\r\n\r\n  preset: 'default', // TODO: remove 'preset' from settings, implement autodetection\r\n\r\n  presets: {\r\n    // Default\r\n    default: [{\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    empty: [],\r\n\r\n    // Wireframe\r\n    wire: [{\r\n      mode: 'LN',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    // Small molecules\r\n    small: [{\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    // Proteins, nucleic acids etc.\r\n    macro: [{\r\n      mode: 'CA',\r\n      colorer: 'SS',\r\n      selector: 'not hetatm',\r\n      material: 'SF',\r\n    }, {\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'hetatm and not water',\r\n      material: 'SF',\r\n    }],\r\n  },\r\n\r\n  objects: {\r\n    line: {\r\n      color: 0xFFFFFFFF,\r\n      dashSize: 0.3,\r\n      gapSize: 0.05,\r\n    },\r\n  },\r\n\r\n  //----------------------------------------------------------------------------\r\n\r\n  bg: {\r\n    color: 0x202020,\r\n    transparent: false,\r\n  },\r\n\r\n  draft: {\r\n    clipPlane: false,\r\n    clipPlaneFactor: 0.5,\r\n    clipPlaneSpeed: 0.00003,\r\n  },\r\n\r\n  /*\r\n     * Separate group for plugins.\r\n     * Each plugin handles its field by itself.\r\n     */\r\n  plugins: {\r\n\r\n  },\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  axes: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fog: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fps: true,\r\n\r\n  /**\r\n   * Switch using of z-sprites for sphere and cylinder geometry\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  zSprites: true,\r\n\r\n  isoSurfaceFakeOpacity: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  suspendRender: true,\r\n\r\n  nowater: false,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  autobuild: true,\r\n\r\n  /**\r\n   * Anti-aliasing.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fxaa: true,\r\n  /**\r\n   * Outline depths\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  outline: {\r\n    on: false,\r\n    color: 0x000000,\r\n    threshold: 0.1,\r\n    thickness: 1,\r\n  },\r\n\r\n  /**\r\n   * Ambient Occlusion special effect.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  ao: false,\r\n\r\n  /**\r\n   * Shadows options.\r\n   *\r\n   * @property {boolean} shadowMap - enable/disable.\r\n   * @property {string} basic/percentage-closer filtering/non-uniform randomizing pcf.\r\n   * @property {number} radius for percentage-closer filtering.\r\n   */\r\n  shadow: {\r\n    on: false,\r\n    type: 'random'/* basic, pcf, random */,\r\n    radius: 1.0,\r\n  },\r\n\r\n  /**\r\n   * Auto-rotation with constant speed.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  autoRotation: 0.0,\r\n\r\n  /**\r\n   * Set maximum fps for animation.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  maxfps: 30,\r\n\r\n  /**\r\n   * Set fbx output precision.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fbxprec: 4,\r\n\r\n  /**\r\n   * Auto-rotation axis.\r\n   *\r\n   * - true:  complex auto-rotation is about vertical axis\r\n   * - false: rotation axis is defined by last user rotation\r\n   *\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  autoRotationAxisFixed: true,\r\n\r\n  /**\r\n   * Enable zooming with mouse wheel or pinch gesture.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  zooming: true,\r\n\r\n  /**\r\n   * Enable picking atoms & residues with left mouse button or touch.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  picking: true,\r\n\r\n  /**\r\n   * Set picking mode ('atom', 'residue', 'chain', 'molecule').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  pick: 'atom',\r\n\r\n  /**\r\n   * Make \"component\" and \"fragment\" editing modes available.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  editing: false,\r\n\r\n  /**\r\n   * Detect aromatic loops.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  aromatic: false,\r\n\r\n  /**\r\n   * Load only one biological unit from all those described in PDB file.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  singleUnit: true,\r\n\r\n  /**\r\n   * Set stereo mode ('NONE', 'SIMPLE', 'DISTORTED', 'ANAGLYPH', 'WEBVR').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  stereo: 'NONE',\r\n\r\n  /**\r\n   * Enable smooth transition between views\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  interpolateViews: true,\r\n\r\n  /**\r\n   * Set transparency mode ('standard', 'prepass').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  transparency: 'prepass',\r\n\r\n  /**\r\n   * Mouse translation speed.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  translationSpeed: 2,\r\n\r\n  debug: {\r\n    example: 3.5,\r\n    text: 'hello!',\r\n    good: true,\r\n    ssaoKernelRadius: 0.7,\r\n    ssaoFactor: 0.7,\r\n    stereoBarrel: 0.25,\r\n  },\r\n  use: {\r\n    multiFile: false,\r\n  },\r\n};\r\n\r\n//----------------------------------------------------------------------------\r\n// SETTINGS CLASS\r\n//----------------------------------------------------------------------------\r\n\r\nfunction Settings() {\r\n  EventDispatcher.call(this);\r\n\r\n  this.old = null;\r\n  this.now = {};\r\n  this._changed = {};\r\n\r\n  this.reset();\r\n}\r\n\r\nutils.deriveClass(Settings, EventDispatcher, {\r\n  defaults,\r\n\r\n  set(path, value) {\r\n    if (_.isString(path)) {\r\n      const oldValue = _.get(this.now, path);\r\n      if (oldValue !== value) {\r\n        _.set(this.now, path, value);\r\n        this._notifyChange(path, value);\r\n      }\r\n    } else {\r\n      const diff = utils.objectsDiff(path, this.now);\r\n      if (!_.isEmpty(diff)) {\r\n        _.merge(this.now, diff);\r\n        this._notifyChanges(diff);\r\n      }\r\n    }\r\n  },\r\n\r\n  get(path, defaultValue) {\r\n    return _.get(this.now, path, defaultValue);\r\n  },\r\n\r\n  reset() {\r\n    const diff = utils.objectsDiff(defaults, this.now);\r\n    this.now = _.cloneDeep(defaults);\r\n    this.old = null;\r\n    this._notifyChanges(diff);\r\n    this._changed = {};\r\n  },\r\n\r\n  checkpoint() {\r\n    this.old = _.cloneDeep(this.now);\r\n    this._changed = {};\r\n  },\r\n\r\n  _notifyChange(path, value) {\r\n    this._changed[path] = true;\r\n    this.dispatchEvent({ type: `change:${path}`, value });\r\n  },\r\n\r\n  _notifyChanges(diff) {\r\n    utils.forInRecursive(diff, (deepValue, deepPath) => {\r\n      this._notifyChange(deepPath, deepValue);\r\n    });\r\n  },\r\n\r\n  changed() {\r\n    if (!this.old) {\r\n      return [];\r\n    }\r\n    const { old, now } = this;\r\n    const keys = _.filter(Object.keys(this._changed), (key) => _.get(old, key) !== _.get(now, key));\r\n    return keys;\r\n  },\r\n\r\n  applyDiffs(diffs) {\r\n    if (diffs.hasOwnProperty('VERSION') && diffs.VERSION !== VERSION) {\r\n      throw new Error('Settings version does not match!');\r\n    }\r\n    // VERSION shouldn't be presented inside settings structure\r\n    delete diffs.VERSION;\r\n    this.reset();\r\n    this.set(diffs);\r\n  },\r\n\r\n  getDiffs(versioned) {\r\n    const diffs = utils.objectsDiff(this.now, defaults);\r\n    if (versioned) {\r\n      diffs.VERSION = VERSION;\r\n    }\r\n    return diffs;\r\n  },\r\n\r\n  setPluginOpts(plugin, opts) {\r\n    defaults.plugins[plugin] = _.cloneDeep(opts);\r\n    this.now.plugins[plugin] = _.cloneDeep(opts);\r\n  },\r\n});\r\n\r\n\r\nexport default new Settings();\r\n","import _ from 'lodash';\r\nimport settings from './settings';\r\nimport utils from './utils';\r\nimport logger from './utils/logger';\r\n\r\nlet repIndex = 0;\r\n\r\nfunction asBoolean(value) {\r\n  return !(!value || value === '0' || (_.isString(value) && value.toLowerCase() === 'false'));\r\n}\r\n\r\nconst adapters = {\r\n  string: String,\r\n  number: Number,\r\n  boolean: asBoolean,\r\n};\r\n\r\n// Level 1 assignment symbol\r\nconst cL1Ass = '=';\r\n\r\nconst cOptsSep = '!';\r\n// Level 2 (options) assignment symbol\r\nconst cL2Ass = ':';\r\n// Level 2 (options) separator symbol\r\nconst cLSep = ',';\r\n\r\nconst cCommonIgnoreSymbols = '$;@/?';\r\n/**\r\n * We may (and should) leave as is for better readability:\r\n *\r\n *        $ , ; : @ / ?\r\n */\r\n/**\r\n * Generate regular expression for symbols excluded for first level encryption\r\n */\r\nfunction getLevel1ExcludedExpr() {\r\n  const cLevel1Ignores = ':,';\r\n  return utils.generateRegExp(cCommonIgnoreSymbols + cLevel1Ignores);\r\n}\r\n\r\n/**\r\n * Generate regular expression for symbols excluded for first level encryption\r\n * (options, etc, ..)\r\n */\r\nfunction getLevel2ExcludedExpr() {\r\n  const cLevel2Ignores = ' ';\r\n  return utils.generateRegExp(cCommonIgnoreSymbols + cLevel2Ignores);\r\n}\r\n\r\nconst cL1ExclExpr = getLevel1ExcludedExpr();\r\nfunction encodeQueryComponentL1(value) {\r\n  return utils.encodeQueryComponent(value, cL1ExclExpr);\r\n}\r\n\r\nconst cL2ExclExpr = getLevel2ExcludedExpr();\r\nfunction encodeQueryComponentL2(value) {\r\n  return utils.encodeQueryComponent(value, cL2ExclExpr);\r\n}\r\n\r\nfunction ensureRepList(opts) {\r\n  let { reps } = opts;\r\n  if (!reps) {\r\n    const { presets } = settings.now;\r\n    let preset = opts.preset || settings.now.preset;\r\n    reps = presets[preset];\r\n    if (!reps) {\r\n      logger.warn(`Unknown preset \"${preset}\"`);\r\n      [preset] = Object.keys(presets);\r\n      reps = presets[preset]; // fall back to any preset\r\n    }\r\n    opts.preset = preset;\r\n    opts.reps = utils.deriveDeep(reps, true);\r\n  }\r\n}\r\n\r\nfunction ensureRepAssign(opts, prop, value) {\r\n  ensureRepList(opts);\r\n  const rep = opts.reps[repIndex];\r\n  // prop specified twice therefore start new rep by cloning the current\r\n  if (rep.hasOwnProperty(prop)) {\r\n    repIndex = opts.reps.length;\r\n    opts.reps[repIndex] = utils.deriveDeep(rep, true);\r\n  }\r\n  if (value !== undefined) {\r\n    opts.reps[repIndex][prop] = value;\r\n  }\r\n}\r\n\r\nfunction addObject(opts, params, options) {\r\n  if (opts._objects === undefined) {\r\n    opts._objects = [];\r\n  }\r\n\r\n  const [type, newOpts] = options;\r\n  const newObj = {\r\n    type,\r\n    params,\r\n  };\r\n\r\n  if (newOpts !== undefined) {\r\n    newObj.opts = newOpts;\r\n  }\r\n\r\n  opts._objects[opts._objects.length] = newObj;\r\n}\r\n\r\nfunction parseParams(str, params) {\r\n  const sep = str.indexOf(',');\r\n  if (sep >= 0) {\r\n    params.push(str.substr(sep + 1).split(','));\r\n    return str.substr(0, sep);\r\n  }\r\n  // keep this untouched if no params were extracted\r\n  return str;\r\n}\r\n\r\nfunction extractArgs(input, defaultsDict, params) {\r\n  if (input) {\r\n    const bang = input.indexOf(cOptsSep);\r\n    const inputVal = parseParams(input.substr(0, bang >= 0 ? bang : undefined), params);\r\n    if (bang >= 0) {\r\n      const args = input.substr(bang + 1).split(cLSep);\r\n      input = inputVal;\r\n      if (defaultsDict) {\r\n        const defaults = defaultsDict[input];\r\n        const opts = utils.deriveDeep(defaults, true);\r\n        args.forEach((arg) => {\r\n          const pair = arg.split(cL2Ass, 2);\r\n          const key = decodeURIComponent(pair[0]);\r\n          const value = decodeURIComponent(pair[1]);\r\n          const adapter = adapters[typeof _.get(defaults, key)];\r\n          if (adapter) {\r\n            _.set(opts, key, adapter(value));\r\n          } else {\r\n            logger.warn(`Unknown argument \"${key}\" for option \"${input}\"`);\r\n          }\r\n        });\r\n        if (Object.keys(opts).length > 0) {\r\n          input = [input, opts];\r\n        }\r\n      }\r\n    } else {\r\n      input = inputVal;\r\n    }\r\n  }\r\n  return input;\r\n}\r\n\r\nconst actions = {\r\n\r\n  l: 'load',\r\n  load: String,\r\n  t: 'type',\r\n  type: String,\r\n  v: 'view',\r\n  view: String,\r\n  u: 'unit',\r\n  unit: Number,\r\n  menu: asBoolean,\r\n\r\n  // Commands\r\n\r\n  o: 'object',\r\n  object(value, opts) {\r\n    const params = [];\r\n    let options = extractArgs(value, settings.defaults.objects, params);\r\n    if (!Array.isArray(options)) {\r\n      options = [options];\r\n    }\r\n    addObject(opts, params[0], options);\r\n  },\r\n\r\n  p: 'preset',\r\n  preset(value, opts) {\r\n    opts.preset = value;\r\n    opts.reps = null;\r\n    ensureRepList(opts);\r\n  },\r\n\r\n  r: 'rep',\r\n  rep(value, opts) {\r\n    ensureRepList(opts);\r\n    repIndex = Number(value);\r\n    // clamp the index to one greater than the last\r\n    repIndex = repIndex <= opts.reps.length ? (repIndex < 0 ? 0 : repIndex) : opts.reps.length;\r\n    // create a new rep if it is adjacent to the existing ones\r\n    if (repIndex === opts.reps.length) {\r\n      // if there is no rep to derive from, derive from the first rep of the default\r\n      opts.reps[repIndex] = repIndex > 0 ? utils.deriveDeep(opts.reps[repIndex - 1], true)\r\n        : utils.deriveDeep(settings.defaults.presets.default[0], true);\r\n    }\r\n  },\r\n\r\n  s: 'select',\r\n  select(value, opts) {\r\n    ensureRepAssign(opts, 'selector', value);\r\n  },\r\n\r\n  m: 'mode',\r\n  mode(value, opts) {\r\n    ensureRepAssign(opts, 'mode', extractArgs(value, settings.defaults.modes));\r\n  },\r\n\r\n  c: 'color',\r\n  color(value, opts) {\r\n    ensureRepAssign(opts, 'colorer', extractArgs(value, settings.defaults.colorers));\r\n  },\r\n\r\n  mt: 'material',\r\n  material(value, opts) {\r\n    ensureRepAssign(opts, 'material', extractArgs(value, settings.defaults.materials));\r\n  },\r\n\r\n  dup(value, opts) {\r\n    ensureRepList(opts);\r\n    const { reps } = opts;\r\n    const rep = reps[repIndex];\r\n    repIndex = reps.length;\r\n    reps[repIndex] = utils.deriveDeep(rep, true);\r\n  },\r\n\r\n  // Settings shortcuts\r\n\r\n  ar: 'autoResolution',\r\n};\r\n\r\nfunction _fromArray(entries) {\r\n  repIndex = 0;\r\n\r\n  const opts = {};\r\n  for (let i = 0, n = entries.length; i < n; ++i) {\r\n    const /** string[] */ entry = entries[i];\r\n    let /** string? */ key = entry[0];\r\n    const /** string? */ value = entry[1];\r\n    let /** function|string? */ action = actions[key];\r\n\r\n    // unwind shortcuts and aliases\r\n    while (_.isString(action)) {\r\n      key = action;\r\n      action = actions[key];\r\n    }\r\n\r\n    // either set a property or use specialized parser\r\n    if (!action) {\r\n      const adapter = adapters[typeof _.get(settings.defaults, key)];\r\n      if (adapter) {\r\n        _.set(opts, `settings.${key}`, adapter(value));\r\n      } else {\r\n        logger.warn(`Unknown option \"${key}\"`);\r\n      }\r\n    } else if (_.isFunction(action)) {\r\n      const result = action(value, opts);\r\n      if (result !== undefined) {\r\n        opts[key] = result;\r\n      }\r\n    }\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction fromAttr(attr) {\r\n  return _fromArray(utils.getUrlParameters(`?${attr || ''}`));\r\n}\r\n\r\nfunction fromURL(url) {\r\n  return _fromArray(utils.getUrlParameters(url));\r\n}\r\n\r\nfunction _processOptsForURL(opts) {\r\n  const str = [];\r\n  let i = 0;\r\n  utils.forInRecursive(opts, (value, key) => {\r\n    str[i++] = encodeQueryComponentL2(key) + cL2Ass + encodeQueryComponentL2(value);\r\n  });\r\n  return str.join(cLSep);\r\n}\r\n\r\nfunction _processArgsForURL(args) {\r\n  if (!_.isArray(args)) {\r\n    return args;\r\n  }\r\n  if (args.length < 2) {\r\n    return args[0];\r\n  }\r\n  return `${args[0]}${cOptsSep}${_processOptsForURL(args[1])}`;\r\n}\r\n\r\nfunction _processObjForURL(objOpts) {\r\n  if (!objOpts || !objOpts.type) {\r\n    return undefined;\r\n  }\r\n  let res = objOpts.type;\r\n  if (_.isArray(objOpts.params) && objOpts.params.length > 0) {\r\n    res += `,${objOpts.params.join(',')}`;\r\n  }\r\n  if (objOpts.opts) {\r\n    res += cOptsSep + _processOptsForURL(objOpts.opts);\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction toURL(opts) {\r\n  const stringList = [];\r\n  let idx = 0;\r\n\r\n  function checkAndAdd(prefix, value) {\r\n    if (value !== null && value !== undefined) {\r\n      stringList[idx++] = encodeQueryComponentL1(prefix)\r\n                            + cL1Ass + encodeQueryComponentL1(value);\r\n    }\r\n  }\r\n\r\n  function addReps(repList) {\r\n    if (!repList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = repList.length; i < n; ++i) {\r\n      if (_.isEmpty(repList[i])) {\r\n        continue;\r\n      }\r\n      checkAndAdd('r', i);\r\n      checkAndAdd('s', repList[i].selector);\r\n      checkAndAdd('m', _processArgsForURL(repList[i].mode));\r\n      checkAndAdd('c', _processArgsForURL(repList[i].colorer));\r\n      checkAndAdd('mt', _processArgsForURL(repList[i].material));\r\n    }\r\n  }\r\n\r\n  function addObjects(objList) {\r\n    if (!objList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = objList.length; i < n; ++i) {\r\n      checkAndAdd('o', _processObjForURL(objList[i]));\r\n    }\r\n  }\r\n\r\n  checkAndAdd('l', opts.load);\r\n  checkAndAdd('u', opts.unit);\r\n  checkAndAdd('p', opts.preset);\r\n  addReps(opts.reps);\r\n  addObjects(opts._objects);\r\n\r\n  checkAndAdd('v', opts.view);\r\n\r\n  utils.forInRecursive(opts.settings, (value, key) => {\r\n    // I heard these lines in the whispers of the Gods\r\n    // Handle preset setting in reps\r\n    if (key === 'preset') {\r\n      return;\r\n    }\r\n    checkAndAdd(key, value);\r\n  });\r\n\r\n  let url = '';\r\n  if (typeof window !== 'undefined') {\r\n    const { location } = window;\r\n    url = `${location.protocol}//${location.host}${location.pathname}`;\r\n  }\r\n  if (stringList.length > 0) {\r\n    url += `?${stringList.join('&')}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nfunction _processOptsForScript(opts) {\r\n  const str = [];\r\n  let i = 0;\r\n  utils.forInRecursive(opts, (value, key) => {\r\n    str[i++] = `${key}=${utils.enquoteString(value)}`;\r\n  });\r\n  return str.join(' ');\r\n}\r\n\r\nfunction _processArgsForScript(args) {\r\n  if (!_.isArray(args)) {\r\n    return args;\r\n  }\r\n  if (args.length < 2) {\r\n    return args[0];\r\n  }\r\n  return `${args[0]} ${_processOptsForScript(args[1])}`;\r\n}\r\n\r\nfunction _processObjForScript(objOpts) {\r\n  if (!objOpts || !objOpts.type) {\r\n    return undefined;\r\n  }\r\n  let res = objOpts.type;\r\n  if (_.isArray(objOpts.params) && objOpts.params.length > 0) {\r\n    res += ` ${objOpts.params.map(utils.enquoteString).join(' ')}`;\r\n  }\r\n  if (objOpts.opts) {\r\n    res += ` ${_processOptsForScript(objOpts.opts)}`;\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction _processRepsForScript(rep, index) {\r\n  const repString = [];\r\n  let strIdx = 0;\r\n  function localAdd(prefix, value) {\r\n    if (value !== null && value !== undefined) {\r\n      repString[strIdx++] = prefix + value;\r\n    }\r\n  }\r\n  if (_.isEmpty(rep)) {\r\n    return null;\r\n  }\r\n  localAdd('', index);\r\n  localAdd('s=', utils.enquoteString(rep.selector));\r\n  localAdd('m=', _processArgsForScript(rep.mode));\r\n  localAdd('c=', _processArgsForScript(rep.colorer));\r\n  localAdd('mt=', _processArgsForScript(rep.material));\r\n  return repString.join(' ');\r\n}\r\n\r\nfunction toScript(opts) {\r\n  const commandsList = [];\r\n  let idx = 0;\r\n  function checkAndAdd(command, value, saveQuotes) {\r\n    if (value !== null && value !== undefined) {\r\n      const quote = (typeof value === 'string' && saveQuotes) ? '\"' : '';\r\n      commandsList[idx++] = `${command} ${quote}${value}${quote}`.trim();\r\n    }\r\n  }\r\n\r\n  function addReps(repList) {\r\n    if (!repList) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0, n = repList.length; i < n; ++i) {\r\n      checkAndAdd('rep', _processRepsForScript(repList[i], i));\r\n    }\r\n  }\r\n\r\n  function addObjects(objList) {\r\n    if (!objList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = objList.length; i < n; ++i) {\r\n      checkAndAdd('', _processObjForScript(objList[i]));\r\n    }\r\n  }\r\n\r\n  checkAndAdd('set', 'autobuild false');\r\n  checkAndAdd('load', opts.load, true);\r\n  checkAndAdd('unit', opts.unit);\r\n  checkAndAdd('preset', opts.preset);\r\n  addReps(opts.reps);\r\n  addObjects(opts._objects);\r\n\r\n  utils.forInRecursive(opts.settings, (value, key) => {\r\n    // I heard these lines in the whispers of the Gods\r\n    // Handle preset setting in reps\r\n    if (key === 'preset') {\r\n      return;\r\n    }\r\n    checkAndAdd(`set ${key}`, value, true);\r\n  });\r\n  checkAndAdd('view', opts.view);\r\n  checkAndAdd('set', 'autobuild true');\r\n  return commandsList.join('\\n');\r\n}\r\n\r\nexport default {\r\n  fromURL,\r\n  fromAttr,\r\n  adapters,\r\n  toURL,\r\n  toScript,\r\n};\r\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\r\n * Atom measurements.\r\n *\r\n * @param {Residue} residue    - (required) Residue containing the atom\r\n * @param {string} name        - (required) Name, unique in the residue\r\n * @param {Element} type       - (required) Chemical element reference\r\n * @param {THREE.Vector3} position - Registered coordinates\r\n *\r\n * @param {number} role        - Role of atom inside monomer: Lead and wing are particularity interesting\r\n * @param {boolean} het        - Non-standard residue indicator\r\n *\r\n * @param {number} serial      - Serial number, unique in the model\r\n * @param {string} location    - Alternative location indicator (usually space or A-Z)\r\n * @param {number} occupancy   - Occupancy percentage, from 0 to 1\r\n * @param {number} temperature - Temperature\r\n * @param {number} charge      - Charge\r\n *\r\n * @exports Atom\r\n * @constructor\r\n */\r\n\r\nclass Atom {\r\n  constructor(residue, name, type, position, role, het, serial, location, occupancy, temperature, charge) {\r\n    this.index = -1;\r\n    this.residue = residue;\r\n    this.name = name;\r\n    this.element = type;\r\n    this.position = position;\r\n    this.role = role;\r\n    this.mask = 1 | 0;\r\n\r\n    this.het = het;\r\n\r\n    this.serial = serial;\r\n    this.location = (location || ' ').charCodeAt(0);\r\n    this.occupancy = occupancy || 1;\r\n    this.temperature = temperature;\r\n    this.charge = charge;\r\n    this.hydrogenCount = -1; // explicitly invalid\r\n    this.radicalCount = 0;\r\n    this.valence = -1; // explicitly invalid\r\n\r\n    this.bonds = [];\r\n\r\n    this.flags = 0x0000;\r\n    if (type.name === 'H') {\r\n      this.flags |= Atom.Flags.HYDROGEN;\r\n    } else if (type.name === 'C') {\r\n      this.flags |= Atom.Flags.CARBON;\r\n    }\r\n  }\r\n\r\n  isHet() {\r\n    return this.het;\r\n  }\r\n\r\n  isHydrogen() {\r\n    return this.element.number === 1;\r\n  }\r\n\r\n  getVisualName() {\r\n    const { name } = this;\r\n    if (name.length > 0) {\r\n      return name;\r\n    }\r\n    return this.element.name.trim();\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const { bonds } = this;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]);\r\n    }\r\n  }\r\n\r\n  getFullName() {\r\n    let name = '';\r\n    if (this.residue !== null) {\r\n      if (this.residue._chain !== null) {\r\n        name += `${this.residue._chain.getName()}.`;\r\n      }\r\n      name += `${this.residue._sequence}.`;\r\n    }\r\n    name += this.name;\r\n    return name;\r\n  }\r\n\r\n  /**\r\n   * Enumeration of atom flag values.\r\n   *\r\n   * @enum {number}\r\n   * @readonly\r\n   */\r\n  static Flags = {\r\n    CARBON: 0x0001,\r\n    // OXYGEN: 0x0002,\r\n    // NITROGEN: 0x0004,\r\n    HYDROGEN: 0x0008,\r\n    /** Non-polar hydrogen (it is also a HYDROGEN) */\r\n    NONPOLARH: 0x1008,\r\n  };\r\n}\r\n\r\nexport default Atom;\r\n","class Element {\r\n  constructor(number, name, fullName, weight, radius, radiusBonding, hValency) {\r\n    this.number = number;\r\n    this.name = name;\r\n    this.fullName = fullName;\r\n    this.weight = weight;\r\n    this.radius = radius;\r\n    this.radiusBonding = radiusBonding;\r\n    this.hydrogenValency = hValency;\r\n  }\r\n\r\n  static Constants = {\r\n    /* eslint-disable no-magic-numbers */\r\n    U1: 1,\r\n    Lead: 2,\r\n    U2: 3,\r\n    Wing: 4,\r\n    U18: 18,\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  static Role = {\r\n    /* eslint-disable no-magic-numbers */\r\n    N: Element.Constants.U1,\r\n    CA: Element.Constants.Lead,\r\n    C: Element.Constants.U2,\r\n    O: Element.Constants.Wing,\r\n    SG: Element.Constants.U18,\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\n  static ByAtomicNumber = [\r\n    /* eslint-disable no-magic-numbers */\r\n    null,\r\n    new Element(1, 'H', 'Hydrogen', 1.008, 1.2, 0.23, [1]),\r\n    new Element(2, 'HE', 'Helium', 4.003, 1.4, 0.93, [0]),\r\n    new Element(3, 'LI', 'Lithium', 6.941, 1.82, 0.68, [1]),\r\n    new Element(4, 'BE', 'Beryllium', 9.012, 1.7, 0.35, [2]),\r\n    new Element(5, 'B', 'Boron', 10.81, 2.08, 0.83, [3]),\r\n    new Element(6, 'C', 'Carbon', 12.011, 1.95, 0.68, [4]),\r\n    new Element(7, 'N', 'Nitrogen', 14.007, 1.85, 0.68, [3, 5]),\r\n    new Element(8, 'O', 'Oxygen', 15.999, 1.7, 0.68, [2, 4]),\r\n    new Element(9, 'F', 'Fluorine', 18.998, 1.73, 0.64, [1]),\r\n    new Element(10, 'NE', 'Neon', 20.18, 1.54, 1.12, [0]),\r\n    new Element(11, 'NA', 'Sodium', 22.99, 2.27, 0.97, [1]),\r\n    new Element(12, 'MG', 'Magnesium', 24.305, 1.73, 1.1, [2]),\r\n    new Element(13, 'AL', 'Aluminum', 26.981, 2.05, 1.35, [3]),\r\n    new Element(14, 'SI', 'Silicon', 28.086, 2.1, 1.2, [4]),\r\n    new Element(15, 'P', 'Phosphorus', 30.974, 2.08, 0.75, [3, 5]),\r\n    new Element(16, 'S', 'Sulfur', 32.07, 2, 1.02, [2, 4, 6]),\r\n    new Element(17, 'CL', 'Chlorine', 35.453, 1.97, 0.99, [1, 3, 5, 7]),\r\n    new Element(18, 'AR', 'Argon', 39.948, 1.88, 1.57, [0]),\r\n    new Element(19, 'K', 'Potassium', 39.1, 2.75, 1.33, [1]),\r\n    new Element(20, 'CA', 'Calcium', 40.08, 1.973, 0.99, [2]),\r\n    new Element(21, 'SC', 'Scandium', 44.956, 1.7, 1.44, [0]),\r\n    new Element(22, 'TI', 'Titanium', 47.88, 1.7, 1.47, [0]),\r\n    new Element(23, 'V', 'Vanadium', 50.941, 1.7, 1.33, [0]),\r\n    new Element(24, 'CR', 'Chromium', 52, 1.7, 1.35, [0]),\r\n    new Element(25, 'MN', 'Manganese', 54.938, 1.7, 1.35, [0]),\r\n    new Element(26, 'FE', 'Iron', 55.847, 1.7, 1.34, [0]),\r\n    new Element(27, 'CO', 'Cobalt', 58.93, 1.7, 1.33, [0]),\r\n    new Element(28, 'NI', 'Nickel', 58.69, 1.63, 1.5, [0]),\r\n    new Element(29, 'CU', 'Copper', 63.55, 1.4, 1.52, [0]),\r\n    new Element(30, 'ZN', 'Zinc', 65.39, 1.39, 1.45, [0]),\r\n    new Element(31, 'GA', 'Gallium', 69.72, 1.87, 1.22, [3]),\r\n    new Element(32, 'GE', 'Germanium', 72.61, 1.7, 1.17, [4]),\r\n    new Element(33, 'AS', 'Arsenic', 74.92, 1.85, 1.21, [3, 5]),\r\n    new Element(34, 'SE', 'Selenium', 78.96, 1.9, 1.22, [2, 4, 6]),\r\n    new Element(35, 'BR', 'Bromine', 79.9, 2.1, 1.21, [1, 3, 5, 7]),\r\n    new Element(36, 'KR', 'Krypton', 83.8, 2.02, 1.91, [0]),\r\n    new Element(37, 'RB', 'Rubidium', 85.47, 1.7, 1.47, [1]),\r\n    new Element(38, 'SR', 'Strontium', 87.62, 1.7, 1.12, [2]),\r\n    new Element(39, 'Y', 'Yttrium', 88.91, 1.7, 1.78, [0]),\r\n    new Element(40, 'ZR', 'Zirconium', 91.22, 1.7, 1.56, [0]),\r\n    new Element(41, 'NB', 'Niobium', 92.91, 1.7, 1.48, [0]),\r\n    new Element(42, 'MO', 'Molybdenum', 95.94, 1.7, 1.47, [0]),\r\n    new Element(43, 'TC', 'Technetium', 98.91, 1.7, 1.35, [0]),\r\n    new Element(44, 'RU', 'Ruthenium', 101.07, 1.7, 1.4, [0]),\r\n    new Element(45, 'RH', 'Rhodium', 102.91, 1.7, 1.45, [0]),\r\n    new Element(46, 'PD', 'Palladium', 106.42, 1.63, 1.5, [0]),\r\n    new Element(47, 'AG', 'Silver', 107.87, 1.72, 1.59, [0]),\r\n    new Element(48, 'CD', 'Cadmium', 112.41, 1.58, 1.69, [0]),\r\n    new Element(49, 'IN', 'Indium', 114.82, 1.93, 1.63, [3]),\r\n    new Element(50, 'SN', 'Tin', 118.71, 2.17, 1.46, [2, 4]),\r\n    new Element(51, 'SB', 'Antimony', 121.75, 2.2, 1.46, [3, 5]),\r\n    new Element(52, 'TE', 'Tellurium', 127.6, 2.06, 1.47, [2, 4, 6]),\r\n    new Element(53, 'I', 'Iodine', 126.91, 2.15, 1.4, [1, 3, 5, 7]),\r\n    new Element(54, 'XE', 'Xenon', 131.29, 2.16, 1.98, [0]),\r\n    new Element(55, 'CS', 'Cesium', 132.91, 1.7, 1.67, [1]),\r\n    new Element(56, 'BA', 'Barium', 137.33, 1.7, 1.34, [2]),\r\n    new Element(57, 'LA', 'Lanthanum', 138.91, 1.7, 1.87, [0]),\r\n    new Element(58, 'CE', 'Cerium', 140.12, 1.7, 1.83, [0]),\r\n    new Element(59, 'PR', 'Praseodymium', 140.91, 1.7, 1.82, [0]),\r\n    new Element(60, 'ND', 'Neodymium', 144.24, 1.7, 1.81, [0]),\r\n    new Element(61, 'PM', 'Promethium', 144.9, 1.7, 1.8, [0]),\r\n    new Element(62, 'SM', 'Samarium', 150.36, 1.7, 1.8, [0]),\r\n    new Element(63, 'EU', 'Europium', 151.96, 1.7, 1.99, [0]),\r\n    new Element(64, 'GD', 'Gadolinium', 157.25, 1.7, 1.79, [0]),\r\n    new Element(65, 'TB', 'Terbium', 158.93, 1.7, 1.76, [0]),\r\n    new Element(66, 'DY', 'Dysprosium', 162.5, 1.7, 1.75, [0]),\r\n    new Element(67, 'HO', 'Holmium', 164.93, 1.7, 1.74, [0]),\r\n    new Element(68, 'ER', 'Erbium', 167.26, 1.7, 1.73, [0]),\r\n    new Element(69, 'TM', 'Thulium', 168.93, 1.7, 1.72, [0]),\r\n    new Element(70, 'YB', 'Ytterbium', 173.04, 1.7, 1.94, [0]),\r\n    new Element(71, 'LU', 'Lutetium', 174.97, 1.7, 1.72, [0]),\r\n    new Element(72, 'HF', 'Hafnium', 178.49, 1.7, 1.57, [0]),\r\n    new Element(73, 'TA', 'Tantalum', 180.95, 1.7, 1.43, [0]),\r\n    new Element(74, 'W', 'Tungsten', 183.85, 1.7, 1.37, [0]),\r\n    new Element(75, 'RE', 'Rhenium', 186.21, 1.7, 1.35, [0]),\r\n    new Element(76, 'OS', 'Osmium', 190.2, 1.7, 1.37, [0]),\r\n    new Element(77, 'IR', 'Iridium', 192.22, 1.7, 1.32, [0]),\r\n    new Element(78, 'PT', 'Platinum', 195.08, 1.72, 1.5, [0]),\r\n    new Element(79, 'AU', 'Gold', 196.97, 1.66, 1.5, [0]),\r\n    new Element(80, 'HG', 'Mercury', 200.59, 1.55, 1.7, [0]),\r\n    new Element(81, 'TL', 'Thallium', 204.38, 1.96, 1.55, [1, 3]),\r\n    new Element(82, 'PB', 'Lead', 207.2, 2.02, 1.54, [2, 4]),\r\n    new Element(83, 'BI', 'Bismuth', 208.98, 1.7, 1.54, [3, 5]),\r\n    new Element(84, 'PO', 'Polonium', 210, 1.7, 1.68, [2, 4, 6]),\r\n    new Element(85, 'AT', 'Astatine', 210, 1.7, 1.7, [1, 3, 5, 7]),\r\n    new Element(86, 'RN', 'Radon', 222, 1.7, 2.4, [0]),\r\n    new Element(87, 'FR', 'Francium', 223, 1.7, 2, [1]),\r\n    new Element(88, 'RA', 'Radium', 226.03, 1.7, 1.9, [2]),\r\n    new Element(89, 'AC', 'Actinium', 227.03, 1.7, 1.88, [0]),\r\n    new Element(90, 'TH', 'Thorium', 232.04, 1.7, 1.79, [0]),\r\n    new Element(91, 'PA', 'Protactinium', 231.04, 1.7, 1.61, [0]),\r\n    new Element(92, 'U', 'Uranium', 238.03, 1.86, 1.58, [0]),\r\n    new Element(93, 'NP', 'Neptunium', 237.05, 1.7, 1.55, [0]),\r\n    new Element(94, 'PU', 'Plutonium', 239.1, 1.7, 1.53, [0]),\r\n    new Element(95, 'AM', 'Americium', 243.1, 1.7, 1.51, [0]),\r\n    new Element(96, 'CM', 'Curium', 247.1, 1.7, 1.5, [0]),\r\n    new Element(97, 'BK', 'Berkelium', 247.1, 1.7, 1.5, [0]),\r\n    new Element(98, 'CF', 'Californium', 252.1, 1.7, 1.5, [0]),\r\n    new Element(99, 'ES', 'Einsteinium', 252.1, 1.7, 1.5, [0]),\r\n    new Element(100, 'FM', 'Fermium', 257.1, 1.7, 1.5, [0]),\r\n    new Element(101, 'MD', 'Mendelevium', 256.1, 1.7, 1.5, [0]),\r\n    new Element(102, 'NO', 'Nobelium', 259.1, 1.7, 1.5, [0]),\r\n    new Element(103, 'LR', 'Lawrencium', 260.1, 1.7, 1.5, [0]),\r\n    new Element(104, 'RF', 'Rutherfordium', 261, 1.7, 1.6, [0]),\r\n    new Element(105, 'DB', 'Dubnium', 262, 1.7, 1.6, [0]),\r\n    new Element(106, 'SG', 'Seaborgium', 263, 1.7, 1.6, [0]),\r\n    new Element(107, 'BH', 'Bohrium', 262, 1.7, 1.6, [0]),\r\n    new Element(108, 'HS', 'Hassium', 265, 1.7, 1.6, [0]),\r\n    new Element(109, 'MT', 'Meitnerium', 268, 1.7, 1.6, [0]),\r\n    /* eslint-enable no-magic-numbers */\r\n  ];\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\n  static ByName = {\r\n    // Duplicate atomic numbers (isotopes)\r\n    /* eslint-disable no-magic-numbers */\r\n    D: new Element(1, 'D', 'Deuterium', 2.014, 1.2, 0.23, [1]),\r\n    T: new Element(1, 'T', 'Tritium', 3.016, 1.2, 0.23, [1]),\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // All regular elements will be added later, automatically\r\n  };\r\n}\r\n\r\n(function () {\r\n  const byAtomicNumber = Element.ByAtomicNumber;\r\n  const byName = Element.ByName;\r\n  for (let i = 0, n = byAtomicNumber.length; i < n; ++i) {\r\n    const element = byAtomicNumber[i];\r\n    if (element) {\r\n      byName[element.name] = element;\r\n    }\r\n  }\r\n}());\r\n\r\n// find atom type by chemical element (or create if missing)\r\nElement.getByName = function (element) {\r\n  let type = Element.ByName[element];\r\n  if (!type) {\r\n    type = Element.ByName[element] = new Element(0, element, 'Unknown', 0, 1.0, 0.01, [0]);\r\n  }\r\n  return type;\r\n};\r\n\r\nexport default Element;\r\n","const cBondTypes = {\r\n  /** Was generated manually */\r\n  UNKNOWN: 0,\r\n  /** Simple covalent bond */\r\n  COVALENT: 1,\r\n  /** Aromatic bond */\r\n  AROMATIC: 2,\r\n};\r\n\r\nfunction getAtomPos(atom) {\r\n  return atom.position;\r\n}\r\n\r\n/**\r\n * Bond between atoms.\r\n *\r\n * @param {Atom} left     - The first atom.\r\n * @param {Atom} right    - The second atom.\r\n * @param {number} order - Order of current bond.\r\n * @param {number} type - Bond type.\r\n * @param {boolean} fixed - Indicator of a pre-specified connection (in contrast with guessed one).\r\n *\r\n * @exports Bond\r\n * @constructor\r\n */\r\nclass Bond {\r\n  constructor(left, right, order, type, fixed) {\r\n    this._left = left;\r\n    this._right = right;\r\n    this._fixed = fixed;\r\n    this._index = -1;\r\n    if (left > right) {\r\n      throw new Error('In a bond atom indices must be in increasing order');\r\n    }\r\n    this._order = order;\r\n    this._type = type;\r\n  }\r\n\r\n  getLeft() {\r\n    return this._left;\r\n  }\r\n\r\n  getRight() {\r\n    return this._right;\r\n  }\r\n\r\n  getOrder() {\r\n    return this._order;\r\n  }\r\n\r\n  calcLength() {\r\n    return this._left.position.distanceTo(this._right.position);\r\n  }\r\n\r\n  _forEachNeighbour(currAtom, process) {\r\n    const { bonds } = currAtom;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]._left !== currAtom ? bonds[i]._left : bonds[i]._right);\r\n    }\r\n  }\r\n\r\n  forEachLevelOne(process) {\r\n    const left = this._left;\r\n    const right = this._right;\r\n    this._forEachNeighbour(left, (atom) => {\r\n      if (atom === right) {\r\n        return;\r\n      }\r\n      process(atom);\r\n    });\r\n    this._forEachNeighbour(right, (atom) => {\r\n      if (atom === left) {\r\n        return;\r\n      }\r\n      process(atom);\r\n    });\r\n  }\r\n\r\n  forEachLevelTwo(process) {\r\n    // TODO refactor this piece of an art?\r\n    const left = this._left;\r\n    const right = this._right;\r\n    const self = this;\r\n    self._forEachNeighbour(left, (atom) => {\r\n      if (atom === right) {\r\n        return;\r\n      }\r\n      self._forEachNeighbour(atom, (l2Atom) => {\r\n        if (l2Atom === left) {\r\n          return;\r\n        }\r\n        process(l2Atom);\r\n      });\r\n    });\r\n    self._forEachNeighbour(right, (atom) => {\r\n      if (atom === left) {\r\n        return;\r\n      }\r\n      self._forEachNeighbour(atom, (l2Atom) => {\r\n        if (l2Atom === right) {\r\n          return;\r\n        }\r\n        process(l2Atom);\r\n      });\r\n    });\r\n  }\r\n\r\n  _fixDir(refPoint, currDir, posGetter) {\r\n    // count atoms to the right and to the left of the current plane\r\n    let rightCount = 0;\r\n    let leftCount = 0;\r\n    const tmpVec = refPoint.clone();\r\n    function checkDir(atom) {\r\n      tmpVec.copy(posGetter(atom));\r\n      tmpVec.sub(refPoint);\r\n      const dotProd = currDir.dot(tmpVec);\r\n      if (dotProd > 0) {\r\n        ++rightCount;\r\n      } else {\r\n        ++leftCount;\r\n      }\r\n    }\r\n    function checkCarbon(atom) {\r\n      if (atom.element.name === 'C') {\r\n        checkDir(atom);\r\n      }\r\n    }\r\n    // count all atoms to the left and right of our plane, start from level 1 and carbons\r\n    const stages = [\r\n      [this.forEachLevelOne, checkCarbon],\r\n      [this.forEachLevelOne, checkDir],\r\n      [this.forEachLevelTwo, checkCarbon],\r\n      [this.forEachLevelTwo, checkDir],\r\n    ];\r\n\r\n    for (let stageId = 0; stageId < stages.length; ++stageId) {\r\n      stages[stageId][0].call(this, stages[stageId][1]);\r\n      if (leftCount > rightCount) {\r\n        return currDir.multiplyScalar(-1);\r\n      }\r\n      if (leftCount < rightCount) {\r\n        return currDir;\r\n      }\r\n    }\r\n    return currDir;\r\n  }\r\n\r\n  calcNormalDir(posGetter) {\r\n    const left = this._left;\r\n    const right = this._right;\r\n    let first = left;\r\n    let second = right;\r\n    posGetter = posGetter === undefined ? getAtomPos : posGetter;\r\n    if (left.bonds.length > right.bonds.length) {\r\n      first = right;\r\n      second = left;\r\n    }\r\n    let third = first;\r\n    let maxNeibs = 0;\r\n    const { bonds } = second;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      let another = bonds[i]._left;\r\n      if (bonds[i]._left === second) {\r\n        another = bonds[i]._right;\r\n      }\r\n      if (another.bonds.length > maxNeibs && another !== first) {\r\n        third = another;\r\n        maxNeibs = another.bonds.length;\r\n      }\r\n    }\r\n    const secondPos = posGetter(second);\r\n    const firstV = posGetter(first).clone().sub(secondPos);\r\n    const secondV = posGetter(third).clone().sub(secondPos);\r\n    secondV.crossVectors(firstV, secondV);\r\n    if (secondV.lengthSq() < 0.0001) {\r\n      secondV.set(0, 1, 0);\r\n    }\r\n    firstV.normalize();\r\n    secondV.normalize();\r\n    firstV.crossVectors(secondV, firstV);\r\n    if (firstV.lengthSq() < 0.0001) {\r\n      firstV.set(0, 1, 0);\r\n    }\r\n    firstV.normalize();\r\n    return this._fixDir(secondPos, firstV, posGetter);\r\n  }\r\n\r\n  static BondType = cBondTypes;\r\n}\r\n\r\nBond.prototype.BondType = cBondTypes;\r\n\r\nexport default Bond;\r\n","import * as THREE from 'three';\r\nimport Atom from './Atom';\r\nimport Element from './Element';\r\n\r\nconst cNucleicControlNames = ['C3\\'', 'C3*', 'P', 'H5T', 'H3T'];\r\nconst cNucleicWing1Names = ['OP1', 'O1P'];\r\nconst cNucleicWing2Names = ['OP2', 'O2P'];\r\n\r\nconst cCylinderSource = ['C3\\'', 'C3*', 'C1', 'C1\\'', 'C1*', 'P'];\r\nconst cCylinderTarget = [{\r\n  types: ['A', 'DA', 'G', 'DG'],\r\n  atoms: ['N1'],\r\n}, {\r\n  types: ['C', 'DC'],\r\n  atoms: ['N3'],\r\n}, {\r\n  types: ['T', 'DT', 'U', 'DU'],\r\n  atoms: ['O4'],\r\n}];\r\n\r\n/**\r\n * Residue instance.\r\n *\r\n * @param {Chain} chain      - Chain this residue belongs to.\r\n * @param {ResidueType} type - Generic residue instance type.\r\n * @param {number} sequence  - Sequence ID.\r\n * @param {string} icode     - One character insertion code (usually space or A-Z).\r\n *\r\n * @exports Residue\r\n * @constructor\r\n */\r\nclass Residue {\r\n  constructor(chain, type, sequence, icode) {\r\n    this._chain = chain;\r\n    this._component = null;\r\n    this._type = type;\r\n    this._sequence = sequence;\r\n    this._icode = icode;\r\n    this._mask = 1 | 0;\r\n    this._index = -1;\r\n\r\n    this._atoms = [];\r\n    this._secondary = null;\r\n    this._firstAtom = null;\r\n    this._leadAtom = null;\r\n    this._wingAtom = null;\r\n    this._lastAtom = null;\r\n    this._controlPoint = null;\r\n    this._midPoint = null;\r\n    this._wingVector = null;\r\n    this._cylinders = null;\r\n    this._isValid = true;\r\n    this._het = false;\r\n    this._molecule = null;\r\n    this.temperature = null;\r\n    this.occupancy = null;\r\n  }\r\n\r\n  // Getters and setters\r\n  getChain() {\r\n    return this._chain;\r\n  }\r\n\r\n  getMolecule() {\r\n    return this._molecule;\r\n  }\r\n\r\n  getType() {\r\n    return this._type;\r\n  }\r\n\r\n  getSequence() {\r\n    return this._sequence;\r\n  }\r\n\r\n  getSecondary() {\r\n    return this._secondary;\r\n  }\r\n\r\n  getICode() {\r\n    return this._icode;\r\n  }\r\n\r\n  // Other methods\r\n\r\n  addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge) {\r\n    const atom = new Atom(this, name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n    const complex = this._chain.getComplex();\r\n    complex.addAtom(atom);\r\n    this._atoms.push(atom);\r\n    this._het = this._het || het;\r\n    return atom;\r\n  }\r\n\r\n  getAtomCount() {\r\n    return this._atoms.length;\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      if (process(atoms[i])) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  _findAtomByName(name) {\r\n    let res = null;\r\n    this.forEachAtom((atom) => {\r\n      if (atom.name === name) {\r\n        res = atom;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return res;\r\n  }\r\n\r\n  _findFirstAtomInList(names) {\r\n    let res = null;\r\n    for (let i = 0; i < names.length; ++i) {\r\n      res = this._findAtomByName(names[i]);\r\n      if (res !== null) {\r\n        return res;\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      mask &= atoms[i].mask;\r\n    }\r\n    this._mask = mask;\r\n  }\r\n\r\n  getCylinderTargetList() {\r\n    const type = this._type._name;\r\n    for (let i = 0, n = cCylinderTarget.length; i < n; ++i) {\r\n      for (let j = 0, m = cCylinderTarget[i].types.length; j < m; ++j) {\r\n        if (type === cCylinderTarget[i].types[j]) {\r\n          return cCylinderTarget[i].atoms;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _detectLeadWing(dst, next, getAtomPosition) {\r\n    const leadAtom = this._findFirstAtomInList(cNucleicControlNames);\r\n    let wingStart = this._findFirstAtomInList(cNucleicWing1Names);\r\n    let wingEnd = this._findFirstAtomInList(cNucleicWing2Names);\r\n\r\n    if (wingStart === null && next !== null) {\r\n      wingStart = next._findFirstAtomInList(cNucleicWing1Names);\r\n    }\r\n\r\n    if (wingEnd === null && next !== null) {\r\n      wingEnd = next._findFirstAtomInList(cNucleicWing2Names);\r\n    }\r\n\r\n    if (leadAtom === null || wingStart === null || wingEnd === null) {\r\n      return;\r\n    }\r\n\r\n    dst._leadAtom = leadAtom;\r\n    dst._controlPoint = getAtomPosition(leadAtom);\r\n    dst._wingVector = getAtomPosition(wingEnd).clone().sub(getAtomPosition(wingStart));\r\n    dst._isValid = true;\r\n\r\n    const cylSource = this._findFirstAtomInList(cCylinderSource);\r\n    const targetList = this.getCylinderTargetList();\r\n    const cylTarget = targetList !== null ? this._findFirstAtomInList(targetList) : null;\r\n    if (cylSource === null || cylTarget === null) {\r\n      return;\r\n    }\r\n    dst._cylinders = [getAtomPosition(cylSource), getAtomPosition(cylTarget)];\r\n  }\r\n\r\n  calcWing(prevLeadPos, currLeadPos, prevWingPos, prevWing) {\r\n    const vectorA = currLeadPos.clone().sub(prevLeadPos);\r\n    const vectorB = prevLeadPos.clone().sub(prevWingPos);\r\n    vectorB.crossVectors(vectorA, vectorB);\r\n    vectorB.crossVectors(vectorA, vectorB).normalize();\r\n    if (prevWing !== null && prevWing.length() > 0.0001) {\r\n      const needToNegate = vectorB.length() > 0.0001 && Math.abs(prevWing.angleTo(vectorB)) > Math.PI / 2;\r\n      if (needToNegate) {\r\n        vectorB.negate();\r\n      }\r\n    }\r\n    return vectorB;\r\n  }\r\n\r\n  _innerFinalize(prevRes, prev, nextRes, dst, chainAsNucleic, getAtomPosition) {\r\n    const bFirstInChain = prev === null;\r\n\r\n    const lp = getAtomPosition(this._leadAtom);\r\n    const currLeadPos = new THREE.Vector3(lp.x, lp.y, lp.z);\r\n    if (chainAsNucleic) {\r\n      this._detectLeadWing(dst, nextRes, getAtomPosition);\r\n      return;\r\n    }\r\n\r\n    if (bFirstInChain) { // for first one in chain\r\n      dst._midPoint = getAtomPosition(this._firstAtom).clone();\r\n    } else {\r\n      const prevLeadPos = prev._controlPoint; // lead point of previous monomer\r\n      dst._midPoint = prevLeadPos.clone().lerp(currLeadPos, 0.5);\r\n      dst._wingVector = this.calcWing(prevLeadPos, currLeadPos, getAtomPosition(prevRes._wingAtom), prev._wingVector);\r\n    }\r\n    dst._controlPoint = currLeadPos;\r\n  }\r\n\r\n  _finalize2(prev, next, asNucleic) {\r\n    // Should be called AFTER first finalize\r\n    this._innerFinalize(prev, prev, next, this, asNucleic, (atom) => atom.position);\r\n  }\r\n\r\n  isConnected(anotherResidue) {\r\n    if (this._chain !== anotherResidue._chain) {\r\n      return false;\r\n    }\r\n    if (this === anotherResidue) {\r\n      return true;\r\n    }\r\n    let res = false;\r\n    this.forEachAtom((atom) => {\r\n      const { bonds } = atom;\r\n      for (let i = 0, n = bonds.length; i < n; ++i) {\r\n        const bond = bonds[i];\r\n        if (bond._left.residue === anotherResidue || bond._right.residue === anotherResidue) {\r\n          res = true;\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    });\r\n    return res;\r\n  }\r\n\r\n  _finalize() {\r\n    const self = this;\r\n    [this._firstAtom] = this._atoms;\r\n    this._lastAtom = this._atoms[this._atoms.length - 1];\r\n\r\n    this._leadAtom = null;\r\n    this._wingAtom = null;\r\n\r\n    let tempCount = 0;\r\n    let temperature = 0; // average temperature\r\n    let occupCount = 0;\r\n    let occupancy = 0; // average occupancy\r\n    this.forEachAtom((a) => {\r\n      if (self._leadAtom === null) {\r\n        if (a.role === Element.Constants.Lead) {\r\n          self._leadAtom = a;\r\n        }\r\n      }\r\n      if (self._wingAtom === null) {\r\n        if (a.role === Element.Constants.Wing) {\r\n          self._wingAtom = a;\r\n        }\r\n      }\r\n      if (a.temperature) {\r\n        temperature += a.temperature;\r\n        tempCount++;\r\n      }\r\n      if (a.occupancy) {\r\n        occupancy += a.occupancy;\r\n        occupCount++;\r\n      }\r\n      return (self._leadAtom !== null && self._wingAtom !== null);\r\n    });\r\n\r\n    if (tempCount > 0) {\r\n      this.temperature = temperature / tempCount;\r\n    }\r\n    if (occupCount > 0) {\r\n      this.occupancy = occupancy / occupCount;\r\n    }\r\n\r\n    // Still try to make monomer look valid\r\n    if (this._leadAtom === null || this._wingAtom === null) {\r\n      this._isValid = false;\r\n    }\r\n    if (this._leadAtom === null) {\r\n      this._leadAtom = this._firstAtom;\r\n    }\r\n    if (this._wingAtom === null) {\r\n      this._wingAtom = this._lastAtom;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Residue;\r\n","/**\r\n * Residue type.\r\n *\r\n * Predefined acid or created with HET, HETNAM, etc.\r\n *\r\n * @param {string} name            - Short name, either standard (ALA, MET, etc.) or non-standard one.\r\n * @param {string} fullName        - Full residue name.\r\n * @param {string} letterCode      - 1-letter symbol.\r\n *\r\n * @exports ResidueType\r\n * @constructor\r\n */\r\nclass ResidueType {\r\n  constructor(name, fullName, letterCode) {\r\n    this._name = name;\r\n    this._fullName = fullName;\r\n    this.letterCode = letterCode;\r\n    this.flags = 0x0000;\r\n  }\r\n\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\n  static StandardTypes = {\r\n    /* eslint-disable no-magic-numbers */\r\n    ALA: new ResidueType('ALA', 'Alanine', 'A'),\r\n    ARG: new ResidueType('ARG', 'Arginine', 'R'),\r\n    ASN: new ResidueType('ASN', 'Asparagine', 'N'),\r\n    ASP: new ResidueType('ASP', 'Aspartic Acid', 'D'),\r\n    CYS: new ResidueType('CYS', 'Cysteine', 'C'),\r\n    GLN: new ResidueType('GLN', 'Glutamine', 'Q'),\r\n    GLU: new ResidueType('GLU', 'Glutamic Acid', 'E'),\r\n    GLY: new ResidueType('GLY', 'Glycine', 'G'),\r\n    HIS: new ResidueType('HIS', 'Histidine', 'H'),\r\n    ILE: new ResidueType('ILE', 'Isoleucine', 'I'),\r\n    LEU: new ResidueType('LEU', 'Leucine', 'L'),\r\n    LYS: new ResidueType('LYS', 'Lysine', 'K'),\r\n    MET: new ResidueType('MET', 'Methionine', 'M'),\r\n    PHE: new ResidueType('PHE', 'Phenylalanine', 'F'),\r\n    PRO: new ResidueType('PRO', 'Proline', 'P'),\r\n    PYL: new ResidueType('PYL', 'Pyrrolysine', 'O'),\r\n    SEC: new ResidueType('SEC', 'Selenocysteine', 'U'),\r\n    SER: new ResidueType('SER', 'Serine', 'S'),\r\n    THR: new ResidueType('THR', 'Threonine', 'T'),\r\n    TRP: new ResidueType('TRP', 'Tryptophan', 'W'),\r\n    TYR: new ResidueType('TYR', 'Tyrosine', 'Y'),\r\n    VAL: new ResidueType('VAL', 'Valine', 'V'),\r\n    A: new ResidueType('A', 'Adenine', 'A'),\r\n    C: new ResidueType('C', 'Cytosine', 'C'),\r\n    G: new ResidueType('G', 'Guanine', 'G'),\r\n    I: new ResidueType('I', 'Inosine', 'I'),\r\n    T: new ResidueType('T', 'Thymine', 'T'),\r\n    U: new ResidueType('U', 'Uracil', 'U'),\r\n    DA: new ResidueType('DA', 'Adenine', 'A'),\r\n    DC: new ResidueType('DC', 'Cytosine', 'C'),\r\n    DG: new ResidueType('DG', 'Guanine', 'G'),\r\n    DI: new ResidueType('DI', 'Inosine', 'I'),\r\n    DT: new ResidueType('DT', 'Thymine', 'T'),\r\n    DU: new ResidueType('DU', 'Uracil', 'U'),\r\n    '+A': new ResidueType('+A', 'Adenine', 'A'),\r\n    '+C': new ResidueType('+C', 'Cytosine', 'C'),\r\n    '+G': new ResidueType('+G', 'Guanine', 'G'),\r\n    '+I': new ResidueType('+I', 'Inosine', 'I'),\r\n    '+T': new ResidueType('+T', 'Thymine', 'T'),\r\n    '+U': new ResidueType('+U', 'Uracil', 'U'),\r\n    WAT: new ResidueType('WAT', 'Water', ''),\r\n    H2O: new ResidueType('H2O', 'Water', ''),\r\n    HOH: new ResidueType('HOH', 'Water', ''),\r\n    DOD: new ResidueType('DOD', 'Water', ''),\r\n    UNK: new ResidueType('UNK', 'Unknown', ''),\r\n    UNL: new ResidueType('UNL', 'Unknown Ligand', ''),\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  /**\r\n   * Enumeration of residue flag values.\r\n   *\r\n   * @enum {number}\r\n   * @readonly\r\n   */\r\n  static Flags = {\r\n    // Amino acids\r\n    /** Amino acid residue */\r\n    PROTEIN: 0x0001,\r\n    /** Basic amino acid residue */\r\n    BASIC: 0x0002,\r\n    /** Acidic amino acid residue */\r\n    ACIDIC: 0x0004,\r\n    /** Polar uncharged side chain amino acid residue */\r\n    POLAR: 0x0008,\r\n    /** Non-polar hydrophobic side chain amino acid residue */\r\n    NONPOLAR: 0x0010,\r\n    /** Aromatic amino acid residue */\r\n    AROMATIC: 0x0020,\r\n\r\n    // Nucleic acids\r\n\r\n    /** Nucleic residue */\r\n    NUCLEIC: 0x0100,\r\n    /** Purine nucleic residue */\r\n    PURINE: 0x0200,\r\n    /** Pyrimidine nucleic residue */\r\n    PYRIMIDINE: 0x0400,\r\n    /** DNA */\r\n    DNA: 0x0800,\r\n    /** RNA */\r\n    RNA: 0x1000,\r\n\r\n    /** Water */\r\n    WATER: 0x10000,\r\n  };\r\n}\r\n\r\n// Flag combinations\r\nfunction _addFlag(flag, list) {\r\n  for (let i = 0, n = list.length; i < n; ++i) {\r\n    const res = ResidueType.StandardTypes[list[i]];\r\n    if (res) {\r\n      res.flags |= flag;\r\n    }\r\n  }\r\n}\r\n\r\nconst { Flags } = ResidueType;\r\n_addFlag(Flags.WATER, ['WAT', 'H2O', 'HOH', 'DOD']);\r\n\r\n_addFlag(Flags.PROTEIN, [\r\n  'ALA', 'ARG', 'ASN', 'ASP', 'CYS', 'GLY', 'GLU', 'GLN', 'HIS', 'ILE',\r\n  'LEU', 'LYS', 'MET', 'PHE', 'PRO', 'PYL', 'SEC', 'SER', 'THR', 'TRP',\r\n  'TYR', 'VAL',\r\n]);\r\n_addFlag(Flags.BASIC, ['ARG', 'HIS', 'LYS']);\r\n_addFlag(Flags.ACIDIC, ['ASP', 'GLU']);\r\n_addFlag(Flags.POLAR, ['ASN', 'CYS', 'GLN', 'SER', 'THR', 'TYR']);\r\n_addFlag(Flags.NONPOLAR, ['ALA', 'ILE', 'LEU', 'MET', 'PHE', 'PRO', 'TRP', 'VAL', 'GLY']);\r\n_addFlag(Flags.AROMATIC, ['PHE', 'TRP', 'TYR']);\r\n\r\n_addFlag(Flags.NUCLEIC, [\r\n  'A', 'G', 'I', 'DA', 'DG', 'DI', '+A', '+G', '+I',\r\n  'C', 'T', 'U', 'DC', 'DT', 'DU', '+C', '+T', '+U',\r\n]);\r\n_addFlag(Flags.PURINE, ['A', 'G', 'I', 'DA', 'DG', 'DI', '+A', '+G', '+I']);\r\n_addFlag(Flags.PYRIMIDINE, ['C', 'T', 'U', 'DC', 'DT', 'DU', '+C', '+T', '+U']);\r\n_addFlag(Flags.DNA, ['DA', 'DG', 'DI', 'DC', 'DT', 'DU']);\r\n_addFlag(Flags.RNA, ['A', 'G', 'I', 'C', 'T', 'U']);\r\n// Table of kdHydrophobicity\r\nconst hydro = {\r\n  ILE: 4.5,\r\n  VAL: 4.2,\r\n  LEU: 3.8,\r\n  PHE: 2.8,\r\n  CYS: 2.5,\r\n  MET: 1.9,\r\n  ALA: 1.8,\r\n  GLY: -0.4,\r\n  THR: -0.7,\r\n  SER: -0.8,\r\n  TRP: -0.9,\r\n  TYR: -1.3,\r\n  PRO: -1.6,\r\n  HIS: -3.2,\r\n  GLU: -3.5,\r\n  GLN: -3.5,\r\n  ASP: -3.5,\r\n  ASN: -3.5,\r\n  LYS: -3.9,\r\n  ARG: -4.5,\r\n};\r\n\r\nfunction _addParam(param, list) {\r\n  const keys = Object.keys(list);\r\n  for (let i = 0, n = keys.length; i < n; ++i) {\r\n    const key = keys[i];\r\n    const value = list[key];\r\n    ResidueType.StandardTypes[key][param] = value;\r\n  }\r\n}\r\n\r\n_addParam('hydrophobicity', hydro);\r\n\r\nexport default ResidueType;\r\n","import * as THREE from 'three';\r\nimport Residue from './Residue';\r\nimport ResidueType from './ResidueType';\r\n\r\n/**\r\n * Residues in chain are either amino acid either nucleic acid (and water)\r\n * There might be some modified/mutated residues, which type could not be determined by their name (nucleic or amino); In this\r\n * case firstly program definites the chain type (by well-known residues) and then definites modified/mutated residues\r\n */\r\nconst ChainType = {\r\n  UNKNOWN: 0,\r\n  PROTEIN: 1,\r\n  NUCLEIC: 2,\r\n};\r\n\r\n/**\r\n * Residue chain.\r\n *\r\n * @param {Complex} complex - Molecular complex this chain belongs to.\r\n * @param {string} name - One character identifier (usually space, A-Z, 0-9, or a-z).\r\n *\r\n * @exports Chain\r\n * @constructor\r\n */\r\nclass Chain {\r\n  constructor(complex, name) {\r\n    this._complex = complex;\r\n    this._name = name;\r\n    this._mask = 1 | 0;\r\n    this._index = -1;\r\n    this._residues = [];\r\n\r\n    this.minSequence = Number.POSITIVE_INFINITY;\r\n    this.maxSequence = Number.NEGATIVE_INFINITY;\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._residues;\r\n  }\r\n\r\n  _determineType() {\r\n    const residues = this._residues;\r\n\r\n    const { PROTEIN, NUCLEIC } = ResidueType.Flags;\r\n\r\n    this.type = ChainType.UNKNOWN;\r\n\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const { flags } = residues[i]._type;\r\n\r\n      if ((flags & NUCLEIC) !== 0) {\r\n        this.type = ChainType.NUCLEIC;\r\n        break;\r\n      } else if ((flags & PROTEIN) !== 0) {\r\n        this.type = ChainType.PROTEIN;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finds thre residue with specified sequence number and inserion code\r\n   * @param {Number} seqNum sequence number\r\n   * @param {string} iCode insertion code\r\n   * @returns {*} Residue or null if not found\r\n   */\r\n  findResidue(seqNum, iCode) {\r\n    const residues = this._residues;\r\n\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const res = residues[i];\r\n      if (res._sequence === seqNum && res._icode === iCode) {\r\n        return [res, i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _finalize() {\r\n    this._determineType();\r\n\r\n    const residues = this._residues;\r\n\r\n    let prev = null;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const next = (i + 1 < n) ? residues[i + 1] : null;\r\n      const curr = residues[i];\r\n      // TODO: skip invalid residues\r\n      if (1 /* curr._isValid */) { // eslint-disable-line no-constant-condition\r\n        curr._finalize2(prev, next, this.type === ChainType.NUCLEIC);\r\n        prev = curr;\r\n      }\r\n    }\r\n\r\n    // fix very first wing\r\n    if (residues.length > 1 && residues[1]._wingVector) {\r\n      const p = residues[1]._wingVector;\r\n      residues[0]._wingVector = new THREE.Vector3(p.x, p.y, p.z);\r\n    } else if (residues.length > 0) {\r\n      residues[0]._wingVector = new THREE.Vector3(1, 0, 0);\r\n    }\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const residues = this._residues;\r\n    let prev = null;\r\n    let prevData = null;\r\n    const frameRes = frameData._residues;\r\n    const n = residues.length;\r\n    function getAtomPos(atom) {\r\n      return frameData.getAtomPos(atom.index);\r\n    }\r\n\r\n    for (let i = 0; i < n; ++i) {\r\n      const curr = residues[i];\r\n      const currData = frameRes[curr._index];\r\n      const nextRes = (i + 1 < n) ? residues[i + 1] : null;\r\n      curr._innerFinalize(prev, prevData, nextRes, currData, this.type === ChainType.NUCLEIC, getAtomPos);\r\n      prev = curr;\r\n      prevData = currData;\r\n    }\r\n\r\n    frameRes[residues[0]._index]._wingVector = n > 1\r\n      ? frameRes[residues[1]._index]._wingVector\r\n      : new THREE.Vector3(1, 0, 0);\r\n  }\r\n\r\n  /**\r\n   * Create a new residue.\r\n   *\r\n   * @param {string} name - Residue name.\r\n   * @param {number} sequence - Residue sequence number.\r\n   * @param {string} iCode - Insertion code.\r\n   * @returns {Residue} - Newly created residue instance.\r\n   */\r\n  addResidue(name, sequence, iCode) {\r\n    let type = this._complex.getResidueType(name);\r\n    if (type === null) {\r\n      type = this._complex.addResidueType(name);\r\n    }\r\n    const residue = new Residue(this, type, sequence, iCode);\r\n    this._complex.addResidue(residue);\r\n    this._residues.push(residue);\r\n\r\n    if (type.flags & (ResidueType.Flags.NUCLEIC | ResidueType.Flags.PROTEIN)) {\r\n      if (this.maxSequence < sequence) {\r\n        this.maxSequence = sequence;\r\n      }\r\n      if (this.minSequence > sequence) {\r\n        this.minSequence = sequence;\r\n      }\r\n    }\r\n\r\n    return residue;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residues.length;\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      mask &= residues[i]._mask;\r\n    }\r\n    this._mask = mask;\r\n  }\r\n}\r\n\r\nexport default Chain;\r\n","import Residue from './Residue';\r\n\r\n/** An element of protein secondary structure. */\r\nclass StructuralElement {\r\n  /**\r\n   * Create a secondary structural element of the specified type.\r\n   *\r\n   * @param {StructuralElement.Type} type Secondary structure type.\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   */\r\n  constructor(type, init, term) {\r\n    /**\r\n     * Secondary structure type.\r\n     * @type {StructuralElement.Type}\r\n     */\r\n    this.type = type;\r\n    /**\r\n     * Generic secondary structure type.\r\n     * @type {StructuralElement.Generic}\r\n     */\r\n    this.generic = StructuralElement.genericByType[this.type] || 'loop';\r\n    /**\r\n     * Initial residue.\r\n     * @type Residue\r\n     */\r\n    this.init = init;\r\n    /**\r\n     * Terminal residue.\r\n     * @type Residue\r\n     */\r\n    this.term = term;\r\n  }\r\n\r\n  /**\r\n   * An internal method for making a final pass over the complex to set all required references.\r\n   *\r\n   * **NOTE:** I'm sorry. It's a legacy code waiting for refactoring.\r\n   * Just copying it as-is right now and hoping for the best.\r\n   *\r\n   * @param {object} serialAtomMap A dictionary of atoms\r\n   * @param {object} residueHash A dictionary of hashed residues to check.\r\n   * @param {Complex} complex The molecular complex this element belongs to.\r\n   */\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    if (this.init instanceof Residue && this.term instanceof Residue) {\r\n      return;\r\n    }\r\n\r\n    // Link all intermediate residues to this structural element\r\n    const start = complex.splitUnifiedSerial(this.init);\r\n    const end = complex.splitUnifiedSerial(this.term);\r\n    for (let chainId = start.chain; chainId <= end.chain; chainId++) {\r\n      for (let serialId = start.serial; serialId <= end.serial; serialId++) {\r\n        for (let { iCode } = start; iCode <= end.iCode; iCode++) {\r\n          const hashCode = complex.getUnifiedSerial(chainId, serialId, iCode);\r\n          if (residueHash[hashCode]) {\r\n            residueHash[hashCode]._secondary = this;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Replace unfined serials by objects\r\n    this.init = residueHash[this.init];\r\n    this.term = residueHash[this.term];\r\n  }\r\n}\r\n\r\n/**\r\n * Specific type of a secondary structural element.\r\n * @enum {string}\r\n * @see StructuralElement.Generic\r\n */\r\nStructuralElement.Type = {\r\n  /** A strand of a [beta-sheet](https://en.wikipedia.org/wiki/Beta_sheet). */\r\n  STRAND: 'E',\r\n  /** An isolated beta-bridge (too small for a beta-sheet). */\r\n  BRIDGE: 'B',\r\n\r\n  /** A [3/10 helix](https://en.wikipedia.org/wiki/310_helix) (hydrogen bonding is 3 residues apart). */\r\n  HELIX_310: 'G',\r\n  /** An [alpha-helix](https://en.wikipedia.org/wiki/Alpha_helix) (hydrogen bonding is 4 residues apart). */\r\n  HELIX_ALPHA: 'H',\r\n  /** A [pi-helix](https://en.wikipedia.org/wiki/Pi_helix) (hydrogen bonding is 5 residues apart). */\r\n  HELIX_PI: 'I',\r\n  /** A generic helix of unspecified bonding distance. */\r\n  HELIX: 'X',\r\n\r\n  /** An isolated 3/10-like helical turn. */\r\n  TURN_310: '3',\r\n  /** An isolated alpha-like helical turn. */\r\n  TURN_ALPHA: '4',\r\n  /** An isolated pi-like helical turn. */\r\n  TURN_PI: '5',\r\n  /** An isolated helical [turn](https://en.wikipedia.org/wiki/Turn_(biochemistry)) of unspecified bonding distance. */\r\n  TURN: 'T',\r\n\r\n  /** A bend (a region of high curvature). */\r\n  BEND: 'S',\r\n  /** Just a protein section with no particular conformation. */\r\n  COIL: 'C',\r\n};\r\n\r\n/**\r\n * Generic type of a secondary structural element.\r\n * @enum {string}\r\n * @see StructuralElement.Type\r\n */\r\nStructuralElement.Generic = {\r\n  /** A strand of a sheet. */\r\n  STRAND: 'strand',\r\n  /** A helix. */\r\n  HELIX: 'helix',\r\n  /** Just a protein section with no particular conformation. */\r\n  LOOP: 'loop',\r\n};\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\nconst StructuralElementGeneric = StructuralElement.Generic;\r\n\r\n/**\r\n * A mapping from specific types to generic ones.\r\n * @type {Object<StructuralElement.Type, StructuralElement.Generic>}\r\n */\r\nStructuralElement.genericByType = {\r\n  [StructuralElementType.STRAND]: StructuralElementGeneric.STRAND,\r\n  [StructuralElementType.HELIX_310]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX_ALPHA]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX_PI]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX]: StructuralElementGeneric.HELIX,\r\n};\r\n\r\nexport default StructuralElement;\r\n","import StructuralElement from './StructuralElement';\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\nexport const typeByPDBHelixClass = {\r\n  1: StructuralElementType.HELIX_ALPHA,\r\n  3: StructuralElementType.HELIX_PI,\r\n  5: StructuralElementType.HELIX_310,\r\n};\r\n\r\n/**\r\n * Helical secondary structure of a protein.\r\n * @extends StructuralElement\r\n */\r\nclass Helix extends StructuralElement {\r\n  /**\r\n   * Create a helix.\r\n   *\r\n   * @param {number} helixClass A helix class according to the\r\n   *   [PDB Format](http://www.wwpdb.org/documentation/file-format-content/format33/sect5.html#HELIX).\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   * @param {number} serial Serial number of the helix (see PDB Format).\r\n   * @param {string} name Helix identifier (see PDB Format).\r\n   * @param {string} comment Comment about this helix (see PDB Format).\r\n   * @param {number} length Length of this helix, in residues (see PDB Format).\r\n   */\r\n  constructor(helixClass, init, term, serial, name, comment, length) {\r\n    super(typeByPDBHelixClass[helixClass] || StructuralElement.Type.HELIX, init, term);\r\n\r\n    /**\r\n     * Serial number of the helix (see PDB Format).\r\n     * @type {number}\r\n     */\r\n    this.serial = serial;\r\n    /**\r\n     * Helix identifier (see PDB Format).\r\n     * @type {string}\r\n     */\r\n    this.name = name;\r\n    /**\r\n     * Comment about this helix (see PDB Format).\r\n     * @type {string}\r\n     */\r\n    this.comment = comment;\r\n    /**\r\n     * Length of this helix, in residues (see PDB Format).\r\n     * @type {number}\r\n     */\r\n    this.length = length;\r\n  }\r\n}\r\n\r\nexport default Helix;\r\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","import StructuralElement from './StructuralElement';\r\n\r\n/**\r\n * A single strand of a sheet in a protein secondary structure.\r\n * @extends StructuralElement\r\n */\r\nclass Strand extends StructuralElement {\r\n  /**\r\n   * Create a strand.\r\n   *\r\n   * @param {Sheet} sheet Parent sheet this strand belongs to.\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   * @param {number} sense Sense of strand with respect to previous strand in the sheet.\r\n   *   - 0 if the first strand,\r\n   *   - 1 if parallel, and\r\n   *   - -1 if anti-parallel.\r\n   * @param {Atom} atomCur Atom in current strand (see PDB Format).\r\n   * @param {Atom} atomPrev Atom in previous strand (see PDB Format).\r\n   */\r\n  constructor(sheet, init, term, sense, atomCur, atomPrev) {\r\n    super(StructuralElement.Type.STRAND, init, term);\r\n\r\n    /**\r\n     * Parent sheet this strand belongs to.\r\n     * @type {Sheet}\r\n     */\r\n    this.sheet = sheet;\r\n    /**\r\n     * Sense of strand with respect to previous strand in the sheet.\r\n     * - 0 if the first strand,\r\n     * - 1 if parallel, and\r\n     * - -1 if anti-parallel.\r\n     * @type {number}\r\n     */\r\n    this.sense = sense;\r\n    /**\r\n     * Atom in current strand (see PDB Format).\r\n     * @type {Atom}\r\n     */\r\n    this.atomCur = atomCur;\r\n    /**\r\n     * Atom in previous strand (see PDB Format).\r\n     * @type {Atom}\r\n     */\r\n    this.atomPrev = atomPrev;\r\n  }\r\n\r\n  /**\r\n   * An internal method for making a final pass over the complex to set all required references.\r\n   *\r\n   * **NOTE:** I'm sorry. It's a legacy code waiting for refactoring.\r\n   * Just copying it as-is right now and hoping for the best.\r\n   *\r\n   * @param {object} serialAtomMap A dictionary of atoms\r\n   * @param {object} residueHash A dictionary of hashed residues to check.\r\n   * @param {Complex} complex The molecular complex this element belongs to.\r\n   *\r\n   * @override\r\n   */\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    super._finalize(serialAtomMap, residueHash, complex);\r\n\r\n    let as = this.atomCur;\r\n    if (as !== null && !Number.isNaN(as)) {\r\n      this.atomCur = serialAtomMap[as];\r\n    }\r\n    as = this.atomPrev;\r\n    if (as !== null && !Number.isNaN(as)) {\r\n      this.atomPrev = serialAtomMap[as];\r\n    }\r\n  }\r\n}\r\n\r\nexport default Strand;\r\n","import Strand from './Strand';\r\n\r\n/**\r\n * Sheet secondary structure of a protein.\r\n *\r\n * @param {string} name -\r\n * @param {number} width -\r\n *\r\n * @exports Sheet\r\n * @constructor\r\n */\r\nclass Sheet {\r\n  constructor(name, width) {\r\n    this._name = name;\r\n    this._width = width;\r\n\r\n    this._strands = [];\r\n  }\r\n\r\n  // Getters and setters\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getWidth() {\r\n    return this._width;\r\n  }\r\n\r\n  addStrand(strand) {\r\n    this._strands.push(strand);\r\n    this._width = this._strands.length;\r\n  }\r\n\r\n  addEmptyStrand() {\r\n    this._strands.push(new Strand(null, null, null, null, null, null));\r\n  }\r\n\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    const s = this._strands;\r\n    for (let i = 0, n = s.length; i < n; ++i) {\r\n      s[i]._finalize(serialAtomMap, residueHash, complex);\r\n    }\r\n    if (!this._width) {\r\n      this._width = s.length;\r\n    }\r\n    if (s.length !== this._width) {\r\n      throw new Error(`Sheet ${this._name} is inconsistent.`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Sheet;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Atom measurements.\r\n *\r\n * @param {string} id              - SGroup id\r\n * @param {string} name            - Name of the group\r\n * @param {THREE.Vector3} position - Registered coordinates\r\n * @param {array} atoms            - Atoms group consists of\r\n * @param {object} saveNode        - XML node from file for saving\r\n *\r\n * @exports SGroup\r\n * @constructor\r\n */\r\nclass SGroup {\r\n  constructor(id, name, position, atoms, saveNode) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._position = position || new THREE.Vector3();\r\n    this._atoms = atoms || [];\r\n    this._charge = 0; // default group charge\r\n    this._repeat = 1; // how many times group repeated: always > 0\r\n    this._center = null;\r\n    this.xmlNodeRef = saveNode || null;\r\n  }\r\n\r\n  /**\r\n   * Get atom full name.\r\n   * @returns {string} Atom full name.\r\n   */\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getPosition() {\r\n    return this._position;\r\n  }\r\n\r\n  getCentralPoint() {\r\n    return this._center;\r\n  }\r\n\r\n  _rebuildSGroupOnAtomChange() {\r\n    const nLimon = 100000000;\r\n    if (this._center === null) {\r\n      return; // nothing to do if we are not relative\r\n    }\r\n\r\n    const bLow = new THREE.Vector3(nLimon, nLimon, nLimon);\r\n    const bHight = new THREE.Vector3(-nLimon, -nLimon, -nLimon);\r\n    for (let j = 0, n = this._atoms.length; j < n; j++) {\r\n      const aPos = this._atoms[j].position;\r\n      bLow.set(Math.min(bLow.x, aPos.x), Math.min(bLow.y, aPos.y), Math.min(bLow.z, aPos.z));\r\n      bHight.set(Math.max(bHight.x, aPos.x), Math.max(bHight.y, aPos.y), Math.max(bHight.z, aPos.z));\r\n    }\r\n    this._center.addVectors(bLow, bHight);\r\n    this._center.multiplyScalar(0.5);\r\n  }\r\n}\r\n\r\nexport default SGroup;\r\n","/* eslint-disable */\r\n// DO NOT EDIT! Automatically generated from .jison\r\n/* parser generated by jison 0.4.18 */\r\n/*\r\n  Returns a Parser object of the following structure:\r\n\r\n  Parser: {\r\n    yy: {}\r\n  }\r\n\r\n  Parser.prototype: {\r\n    yy: {},\r\n    trace: function(),\r\n    symbols_: {associative list: name ==> number},\r\n    terminals_: {associative list: number ==> name},\r\n    productions_: [...],\r\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\r\n    table: [...],\r\n    defaultActions: {...},\r\n    parseError: function(str, hash),\r\n    parse: function(input),\r\n\r\n    lexer: {\r\n        EOF: 1,\r\n        parseError: function(str, hash),\r\n        setInput: function(input),\r\n        input: function(),\r\n        unput: function(str),\r\n        more: function(),\r\n        less: function(n),\r\n        pastInput: function(),\r\n        upcomingInput: function(),\r\n        showPosition: function(),\r\n        test_match: function(regex_match_array, rule_index),\r\n        next: function(),\r\n        lex: function(),\r\n        begin: function(condition),\r\n        popState: function(),\r\n        _currentRules: function(),\r\n        topState: function(),\r\n        pushState: function(condition),\r\n\r\n        options: {\r\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\r\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\r\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\r\n        },\r\n\r\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\r\n        rules: [...],\r\n        conditions: {associative list: name ==> set},\r\n    }\r\n  }\r\n\r\n\r\n  token location info (@$, _$, etc.): {\r\n    first_line: n,\r\n    last_line: n,\r\n    first_column: n,\r\n    last_column: n,\r\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\r\n  }\r\n\r\n\r\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\r\n    text:        (matched text)\r\n    token:       (the produced terminal token, if any)\r\n    line:        (yylineno)\r\n  }\r\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\r\n    loc:         (yylloc)\r\n    expected:    (string describing the set of expected tokens)\r\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\r\n  }\r\n*/\r\nvar parser = (function(){\r\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,5],$V2=[1,6],$V3=[1,7],$V4=[1,8],$V5=[1,9],$V6=[1,11],$V7=[1,12],$V8=[5,7,8,11],$V9=[1,17],$Va=[1,22],$Vb=[1,20],$Vc=[1,21],$Vd=[5,7,8,11,19];\r\nvar parser = {trace: function trace() { },\r\nyy: {},\r\nsymbols_: {\"error\":2,\"Program\":3,\"Expression\":4,\"EOF\":5,\"Selector\":6,\"OR\":7,\"AND\":8,\"NOT\":9,\"(\":10,\")\":11,\"SELECTOR\":12,\"NAMED_SELECTOR\":13,\"SELECTOR_RANGED\":14,\"RangeList\":15,\"SELECTOR_NAMED\":16,\"NameList\":17,\"Range\":18,\",\":19,\"NUMBER\":20,\":\":21,\"Name\":22,\"IDENTIFIER\":23,\"STRING\":24,\"$accept\":0,\"$end\":1},\r\nterminals_: {2:\"error\",5:\"EOF\",7:\"OR\",8:\"AND\",9:\"NOT\",10:\"(\",11:\")\",12:\"SELECTOR\",13:\"NAMED_SELECTOR\",14:\"SELECTOR_RANGED\",16:\"SELECTOR_NAMED\",19:\",\",20:\"NUMBER\",21:\":\",23:\"IDENTIFIER\",24:\"STRING\"},\r\nproductions_: [0,[3,2],[4,1],[4,3],[4,3],[4,2],[4,3],[6,1],[6,1],[6,2],[6,2],[15,1],[15,3],[18,1],[18,3],[17,1],[17,3],[22,1],[22,1],[22,1]],\r\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\r\n/* this == yyval */\r\n\r\nvar $0 = $$.length - 1;\r\nswitch (yystate) {\r\ncase 1:\r\n return $$[$0-1]; \r\nbreak;\r\ncase 3:\r\nthis.$ = yy.keyword('or')($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 4:\r\nthis.$ = yy.keyword('and')($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 5:\r\nthis.$ = yy.keyword('not')($$[$0]);\r\nbreak;\r\ncase 6:\r\nthis.$ = $$[$0-1];\r\nbreak;\r\ncase 7:\r\nthis.$ = yy.keyword($$[$0])();\r\nbreak;\r\ncase 8:\r\nthis.$ = yy.GetSelector($$[$0].toLowerCase().slice(1, $$[$0].length));\r\nbreak;\r\ncase 9: case 10:\r\nthis.$ = yy.keyword($$[$0-1])($$[$0]);\r\nbreak;\r\ncase 11:\r\nthis.$ = new yy.RangeList($$[$0]);\r\nbreak;\r\ncase 12: case 16:\r\nthis.$ = $$[$0-2].append($$[$0]);\r\nbreak;\r\ncase 13:\r\nthis.$ = new yy.Range(Number($$[$0]));\r\nbreak;\r\ncase 14:\r\nthis.$ = new yy.Range(Number($$[$0-2]), Number($$[$0]));\r\nbreak;\r\ncase 15:\r\nthis.$ = new yy.ValueList($$[$0]);\r\nbreak;\r\n}\r\n},\r\ntable: [{3:1,4:2,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{1:[3]},{5:[1,10],7:$V6,8:$V7},o($V8,[2,2]),{4:13,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{4:14,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},o($V8,[2,7]),o($V8,[2,8]),{15:15,18:16,20:$V9},{17:18,20:$Va,22:19,23:$Vb,24:$Vc},{1:[2,1]},{4:23,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{4:24,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},o($V8,[2,5]),{7:$V6,8:$V7,11:[1,25]},o($V8,[2,9],{19:[1,26]}),o($Vd,[2,11]),o($Vd,[2,13],{21:[1,27]}),o($V8,[2,10],{19:[1,28]}),o($Vd,[2,15]),o($Vd,[2,17]),o($Vd,[2,18]),o($Vd,[2,19]),o([5,7,11],[2,3],{8:$V7}),o($V8,[2,4]),o($V8,[2,6]),{18:29,20:$V9},{20:[1,30]},{20:$Va,22:31,23:$Vb,24:$Vc},o($Vd,[2,12]),o($Vd,[2,14]),o($Vd,[2,16])],\r\ndefaultActions: {10:[2,1]},\r\nparseError: function parseError(str, hash) {\r\n    if (hash.recoverable) {\r\n        this.trace(str);\r\n    } else {\r\n        var error = new Error(str);\r\n        error.hash = hash;\r\n        throw error;\r\n    }\r\n},\r\nparse: function parse(input) {\r\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\r\n    var args = lstack.slice.call(arguments, 1);\r\n    var lexer = Object.create(this.lexer);\r\n    var sharedState = { yy: {} };\r\n    for (var k in this.yy) {\r\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\r\n            sharedState.yy[k] = this.yy[k];\r\n        }\r\n    }\r\n    lexer.setInput(input, sharedState.yy);\r\n    sharedState.yy.lexer = lexer;\r\n    sharedState.yy.parser = this;\r\n    if (typeof lexer.yylloc == 'undefined') {\r\n        lexer.yylloc = {};\r\n    }\r\n    var yyloc = lexer.yylloc;\r\n    lstack.push(yyloc);\r\n    var ranges = lexer.options && lexer.options.ranges;\r\n    if (typeof sharedState.yy.parseError === 'function') {\r\n        this.parseError = sharedState.yy.parseError;\r\n    } else {\r\n        this.parseError = Object.getPrototypeOf(this).parseError;\r\n    }\r\n    function popStack(n) {\r\n        stack.length = stack.length - 2 * n;\r\n        vstack.length = vstack.length - n;\r\n        lstack.length = lstack.length - n;\r\n    }\r\n            function lex() {\r\n            var token;\r\n            token = tstack.pop() || lexer.lex() || EOF;\r\n            if (typeof token !== 'number') {\r\n                if (token instanceof Array) {\r\n                    tstack = token;\r\n                    token = tstack.pop();\r\n                }\r\n                token = self.symbols_[token] || token;\r\n            }\r\n            return token;\r\n        }\r\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\r\n    while (true) {\r\n        state = stack[stack.length - 1];\r\n        if (this.defaultActions[state]) {\r\n            action = this.defaultActions[state];\r\n        } else {\r\n            if (symbol === null || typeof symbol == 'undefined') {\r\n                symbol = lex();\r\n            }\r\n            action = table[state] && table[state][symbol];\r\n        }\r\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\r\n            var errStr = '';\r\n            expected = [];\r\n            for (p in table[state]) {\r\n                if (this.terminals_[p] && p > TERROR) {\r\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\r\n                }\r\n            }\r\n            if (lexer.showPosition) {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\r\n            } else {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\r\n            }\r\n            this.parseError(errStr, {\r\n                text: lexer.match,\r\n                token: this.terminals_[symbol] || symbol,\r\n                line: lexer.yylineno,\r\n                loc: yyloc,\r\n                expected: expected\r\n            });\r\n        }\r\n        if (action[0] instanceof Array && action.length > 1) {\r\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\r\n        }\r\n        switch (action[0]) {\r\n        case 1:\r\n            stack.push(symbol);\r\n            vstack.push(lexer.yytext);\r\n            lstack.push(lexer.yylloc);\r\n            stack.push(action[1]);\r\n            symbol = null;\r\n            if (!preErrorSymbol) {\r\n                yyleng = lexer.yyleng;\r\n                yytext = lexer.yytext;\r\n                yylineno = lexer.yylineno;\r\n                yyloc = lexer.yylloc;\r\n                if (recovering > 0) {\r\n                    recovering--;\r\n                }\r\n            } else {\r\n                symbol = preErrorSymbol;\r\n                preErrorSymbol = null;\r\n            }\r\n            break;\r\n        case 2:\r\n            len = this.productions_[action[1]][1];\r\n            yyval.$ = vstack[vstack.length - len];\r\n            yyval._$ = {\r\n                first_line: lstack[lstack.length - (len || 1)].first_line,\r\n                last_line: lstack[lstack.length - 1].last_line,\r\n                first_column: lstack[lstack.length - (len || 1)].first_column,\r\n                last_column: lstack[lstack.length - 1].last_column\r\n            };\r\n            if (ranges) {\r\n                yyval._$.range = [\r\n                    lstack[lstack.length - (len || 1)].range[0],\r\n                    lstack[lstack.length - 1].range[1]\r\n                ];\r\n            }\r\n            r = this.performAction.apply(yyval, [\r\n                yytext,\r\n                yyleng,\r\n                yylineno,\r\n                sharedState.yy,\r\n                action[1],\r\n                vstack,\r\n                lstack\r\n            ].concat(args));\r\n            if (typeof r !== 'undefined') {\r\n                return r;\r\n            }\r\n            if (len) {\r\n                stack = stack.slice(0, -1 * len * 2);\r\n                vstack = vstack.slice(0, -1 * len);\r\n                lstack = lstack.slice(0, -1 * len);\r\n            }\r\n            stack.push(this.productions_[action[1]][0]);\r\n            vstack.push(yyval.$);\r\n            lstack.push(yyval._$);\r\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\r\n            stack.push(newState);\r\n            break;\r\n        case 3:\r\n            return true;\r\n        }\r\n    }\r\n    return true;\r\n}};\r\n\r\n\r\n/* generated by jison-lex 0.3.4 */\r\nvar lexer = (function(){\r\nvar lexer = ({\r\n\r\nEOF:1,\r\n\r\nparseError:function parseError(str, hash) {\r\n        if (this.yy.parser) {\r\n            this.yy.parser.parseError(str, hash);\r\n        } else {\r\n            throw new Error(str);\r\n        }\r\n    },\r\n\r\n// resets the lexer, sets new input\r\nsetInput:function (input, yy) {\r\n        this.yy = yy || this.yy || {};\r\n        this._input = input;\r\n        this._more = this._backtrack = this.done = false;\r\n        this.yylineno = this.yyleng = 0;\r\n        this.yytext = this.matched = this.match = '';\r\n        this.conditionStack = ['INITIAL'];\r\n        this.yylloc = {\r\n            first_line: 1,\r\n            first_column: 0,\r\n            last_line: 1,\r\n            last_column: 0\r\n        };\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [0,0];\r\n        }\r\n        this.offset = 0;\r\n        return this;\r\n    },\r\n\r\n// consumes and returns one char from the input\r\ninput:function () {\r\n        var ch = this._input[0];\r\n        this.yytext += ch;\r\n        this.yyleng++;\r\n        this.offset++;\r\n        this.match += ch;\r\n        this.matched += ch;\r\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno++;\r\n            this.yylloc.last_line++;\r\n        } else {\r\n            this.yylloc.last_column++;\r\n        }\r\n        if (this.options.ranges) {\r\n            this.yylloc.range[1]++;\r\n        }\r\n\r\n        this._input = this._input.slice(1);\r\n        return ch;\r\n    },\r\n\r\n// unshifts one char (or a string) into the input\r\nunput:function (ch) {\r\n        var len = ch.length;\r\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\r\n\r\n        this._input = ch + this._input;\r\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\r\n        //this.yyleng -= len;\r\n        this.offset -= len;\r\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\r\n        this.match = this.match.substr(0, this.match.length - 1);\r\n        this.matched = this.matched.substr(0, this.matched.length - 1);\r\n\r\n        if (lines.length - 1) {\r\n            this.yylineno -= lines.length - 1;\r\n        }\r\n        var r = this.yylloc.range;\r\n\r\n        this.yylloc = {\r\n            first_line: this.yylloc.first_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.first_column,\r\n            last_column: lines ?\r\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\r\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\r\n              this.yylloc.first_column - len\r\n        };\r\n\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\r\n        }\r\n        this.yyleng = this.yytext.length;\r\n        return this;\r\n    },\r\n\r\n// When called from action, caches matched text and appends it on next action\r\nmore:function () {\r\n        this._more = true;\r\n        return this;\r\n    },\r\n\r\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\r\nreject:function () {\r\n        if (this.options.backtrack_lexer) {\r\n            this._backtrack = true;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n\r\n        }\r\n        return this;\r\n    },\r\n\r\n// retain first n characters of the match\r\nless:function (n) {\r\n        this.unput(this.match.slice(n));\r\n    },\r\n\r\n// displays already matched input, i.e. for error messages\r\npastInput:function () {\r\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\r\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays upcoming input, i.e. for error messages\r\nupcomingInput:function () {\r\n        var next = this.match;\r\n        if (next.length < 20) {\r\n            next += this._input.substr(0, 20-next.length);\r\n        }\r\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays the character position where the lexing error occurred, i.e. for error messages\r\nshowPosition:function () {\r\n        var pre = this.pastInput();\r\n        var c = new Array(pre.length + 1).join(\"-\");\r\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\r\n    },\r\n\r\n// test the lexed token: return FALSE when not a match, otherwise return token\r\ntest_match:function (match, indexed_rule) {\r\n        var token,\r\n            lines,\r\n            backup;\r\n\r\n        if (this.options.backtrack_lexer) {\r\n            // save context\r\n            backup = {\r\n                yylineno: this.yylineno,\r\n                yylloc: {\r\n                    first_line: this.yylloc.first_line,\r\n                    last_line: this.last_line,\r\n                    first_column: this.yylloc.first_column,\r\n                    last_column: this.yylloc.last_column\r\n                },\r\n                yytext: this.yytext,\r\n                match: this.match,\r\n                matches: this.matches,\r\n                matched: this.matched,\r\n                yyleng: this.yyleng,\r\n                offset: this.offset,\r\n                _more: this._more,\r\n                _input: this._input,\r\n                yy: this.yy,\r\n                conditionStack: this.conditionStack.slice(0),\r\n                done: this.done\r\n            };\r\n            if (this.options.ranges) {\r\n                backup.yylloc.range = this.yylloc.range.slice(0);\r\n            }\r\n        }\r\n\r\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno += lines.length;\r\n        }\r\n        this.yylloc = {\r\n            first_line: this.yylloc.last_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.last_column,\r\n            last_column: lines ?\r\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\r\n                         this.yylloc.last_column + match[0].length\r\n        };\r\n        this.yytext += match[0];\r\n        this.match += match[0];\r\n        this.matches = match;\r\n        this.yyleng = this.yytext.length;\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\r\n        }\r\n        this._more = false;\r\n        this._backtrack = false;\r\n        this._input = this._input.slice(match[0].length);\r\n        this.matched += match[0];\r\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\r\n        if (this.done && this._input) {\r\n            this.done = false;\r\n        }\r\n        if (token) {\r\n            return token;\r\n        } else if (this._backtrack) {\r\n            // recover context\r\n            for (var k in backup) {\r\n                this[k] = backup[k];\r\n            }\r\n            return false; // rule action called reject() implying the next rule should be tested instead.\r\n        }\r\n        return false;\r\n    },\r\n\r\n// return next match in input\r\nnext:function () {\r\n        if (this.done) {\r\n            return this.EOF;\r\n        }\r\n        if (!this._input) {\r\n            this.done = true;\r\n        }\r\n\r\n        var token,\r\n            match,\r\n            tempMatch,\r\n            index;\r\n        if (!this._more) {\r\n            this.yytext = '';\r\n            this.match = '';\r\n        }\r\n        var rules = this._currentRules();\r\n        for (var i = 0; i < rules.length; i++) {\r\n            tempMatch = this._input.match(this.rules[rules[i]]);\r\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\r\n                match = tempMatch;\r\n                index = i;\r\n                if (this.options.backtrack_lexer) {\r\n                    token = this.test_match(tempMatch, rules[i]);\r\n                    if (token !== false) {\r\n                        return token;\r\n                    } else if (this._backtrack) {\r\n                        match = false;\r\n                        continue; // rule action called reject() implying a rule MISmatch.\r\n                    } else {\r\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n                        return false;\r\n                    }\r\n                } else if (!this.options.flex) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (match) {\r\n            token = this.test_match(match, rules[index]);\r\n            if (token !== false) {\r\n                return token;\r\n            }\r\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n            return false;\r\n        }\r\n        if (this._input === \"\") {\r\n            return this.EOF;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n        }\r\n    },\r\n\r\n// return next match that has a token\r\nlex:function lex() {\r\n        var r = this.next();\r\n        if (r) {\r\n            return r;\r\n        } else {\r\n            return this.lex();\r\n        }\r\n    },\r\n\r\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\r\nbegin:function begin(condition) {\r\n        this.conditionStack.push(condition);\r\n    },\r\n\r\n// pop the previously active lexer condition state off the condition stack\r\npopState:function popState() {\r\n        var n = this.conditionStack.length - 1;\r\n        if (n > 0) {\r\n            return this.conditionStack.pop();\r\n        } else {\r\n            return this.conditionStack[0];\r\n        }\r\n    },\r\n\r\n// produce the lexer rule set which is active for the currently active lexer condition state\r\n_currentRules:function _currentRules() {\r\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\r\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\r\n        } else {\r\n            return this.conditions[\"INITIAL\"].rules;\r\n        }\r\n    },\r\n\r\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\r\ntopState:function topState(n) {\r\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\r\n        if (n >= 0) {\r\n            return this.conditionStack[n];\r\n        } else {\r\n            return \"INITIAL\";\r\n        }\r\n    },\r\n\r\n// alias for begin(condition)\r\npushState:function pushState(condition) {\r\n        this.begin(condition);\r\n    },\r\n\r\n// return the number of states currently on the stack\r\nstateStackSize:function stateStackSize() {\r\n        return this.conditionStack.length;\r\n    },\r\noptions: {\"case-insensitive\":true},\r\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\nvar YYSTATE=YY_START;\r\nswitch($avoiding_name_collisions) {\r\ncase 0:/* skip whitespace */\r\nbreak;\r\ncase 1:return 20;\r\nbreak;\r\ncase 2:return 7;\r\nbreak;\r\ncase 3:return 8;\r\nbreak;\r\ncase 4:return 9;\r\nbreak;\r\ncase 5:return 12;\r\nbreak;\r\ncase 6:return 16;\r\nbreak;\r\ncase 7:return 14;\r\nbreak;\r\ncase 8:return 10;\r\nbreak;\r\ncase 9:return 11;\r\nbreak;\r\ncase 10:return 19;\r\nbreak;\r\ncase 11:return 21;\r\nbreak;\r\ncase 12:return '<=';\r\nbreak;\r\ncase 13:return '>=';\r\nbreak;\r\ncase 14:return '<';\r\nbreak;\r\ncase 15:return '>';\r\nbreak;\r\ncase 16:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 24;\r\nbreak;\r\ncase 17:return 13;\r\nbreak;\r\ncase 18:return 23;\r\nbreak;\r\ncase 19:return 5;\r\nbreak;\r\ncase 20:return 'INVALID';\r\nbreak;\r\n}\r\n},\r\nrules: [/^(?:\\s+)/i,/^(?:(-?(?:[1-9][0-9]+|[0-9]))\\b)/i,/^(?:OR\\b)/i,/^(?:AND\\b)/i,/^(?:NOT\\b)/i,/^(?:((ALL|NONE|HETATM|PROTEIN|BASIC|ACIDIC|CHARGED|POLAR|NONPOLAR|AROMATIC|NUCLEIC|PURINE|PYRIMIDINE|WATER|POLARH|NONPOLARH))\\b)/i,/^(?:((NAME|ELEM|TYPE|RESIDUE|ICODE|CHAIN|ALTLOC))\\b)/i,/^(?:((SERIAL|SEQUENCE|RESIDX))\\b)/i,/^(?:\\()/i,/^(?:\\))/i,/^(?:,)/i,/^(?::)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:((?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*')))/i,/^(?:(@[_A-Z0-9]+))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:.)/i],\r\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],\"inclusive\":true}}\r\n});\r\nreturn lexer;\r\n})();\r\nparser.lexer = lexer;\r\nfunction Parser () {\r\n  this.yy = {};\r\n}\r\nParser.prototype = parser;parser.Parser = Parser;\r\nreturn new Parser;\r\n})();\r\n\r\nmodule.exports = {parser: parser};\r\n","import utils from '../../utils';\r\n\r\n//----------------------------------------------------------------------------\r\nclass Range {\r\n  constructor(min, max) {\r\n    this.min = min;\r\n    this.max = typeof max === 'undefined' ? min : max;\r\n  }\r\n\r\n  includes(value) {\r\n    return this.min <= value && value <= this.max;\r\n  }\r\n\r\n  toString() {\r\n    const { min, max } = this;\r\n    return min === max ? String(min) : [min, max].join(':');\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.min, this.max];\r\n  }\r\n}\r\n\r\n// ////////////////////////////////////////////////////////////////////////////\r\n\r\nclass List {\r\n  constructor(arg) {\r\n    if (arg instanceof this.constructor) {\r\n      return arg;\r\n    }\r\n    if (arg instanceof Array) {\r\n      this._values = arg.slice(0);\r\n    } else if (arg) {\r\n      this._values = [arg];\r\n    } else {\r\n      this._values = [];\r\n    }\r\n  }\r\n\r\n  append(value) {\r\n    const values = this._values;\r\n    values[values.length] = value;\r\n    return this;\r\n  }\r\n\r\n  remove(value) {\r\n    const values = this._values;\r\n    const index = values.indexOf(value);\r\n    if (index >= 0) {\r\n      values.splice(index, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  toString() {\r\n    return this._values.join(',');\r\n  }\r\n\r\n  toJSON() {\r\n    const values = this._values;\r\n    const result = [];\r\n    for (let i = 0, n = values.length; i < n; ++i) {\r\n      const value = values[i];\r\n      result[i] = value.toJSON ? value.toJSON() : value;\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n\r\nclass RangeList extends List {\r\n  includes(value) {\r\n    const list = this._values;\r\n    for (let i = 0, n = list.length; i < n; ++i) {\r\n      if (list[i].includes(value)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n\r\nconst valuesArray = [];\r\n\r\nclass ValueList extends List {\r\n  constructor(arg, upperOnly) {\r\n    const list = super(arg);\r\n    if (upperOnly) {\r\n      this.upperOnly = true;\r\n      const values = list._values;\r\n      for (let i = 0, n = values.length; i < n; ++i) {\r\n        const value = values[i];\r\n        if (typeof value === 'string') {\r\n          values[i] = value.toUpperCase();\r\n        }\r\n      }\r\n    } else {\r\n      this.upperOnly = false;\r\n    }\r\n    return list;\r\n  }\r\n\r\n  includes(value) {\r\n    // we do not convert to upper case here for perfomance reasons\r\n    // if list is upper case only, value must be converted before it is sent up to  here\r\n    return this._values.indexOf(value) !== -1;\r\n  }\r\n\r\n  toString() {\r\n    // Quote values that are not correct identifiers\r\n    const values = this._values;\r\n    valuesArray.length = 0;\r\n    for (let i = 0, n = values.length; i < n; ++i) {\r\n      valuesArray[i] = utils.correctSelectorIdentifier(String(values[i]));\r\n    }\r\n    return valuesArray.join(',');\r\n  }\r\n\r\n  _validate(value) {\r\n    return (this.upperOnly && typeof value === 'string') ? value.toUpperCase() : value;\r\n  }\r\n\r\n  append(value) {\r\n    super.append(this._validate(value));\r\n    return this;\r\n  }\r\n\r\n  remove(value) {\r\n    super.remove(this._validate(value));\r\n    return this;\r\n  }\r\n}\r\n\r\nexport {\r\n  Range,\r\n  List,\r\n  RangeList,\r\n  ValueList,\r\n};\r\n","import { RangeList, ValueList } from './selectArgs';\r\n\r\n/** Base class for atom selectors. */\r\nclass Selector {\r\n  toString() {\r\n    return this.keyword;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name];\r\n  }\r\n}\r\n\r\nSelector.prototype.name = 'Error';\r\nSelector.prototype.keyword = 'error';\r\n\r\n/** Base class for list-based atom selectors. */\r\nclass ListSelector extends Selector {\r\n  constructor(list) {\r\n    super();\r\n    this.list = list;\r\n  }\r\n\r\n  toString() {\r\n    return `${this.keyword} ${this.list}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.list.toJSON()];\r\n  }\r\n}\r\n\r\nclass RangeListSelector extends ListSelector {\r\n  constructor(arg) {\r\n    super(new RangeList(arg));\r\n  }\r\n}\r\n\r\nclass ValueListSelector extends ListSelector {\r\n  constructor(arg, caseSensitive) {\r\n    super(new ValueList(arg, !caseSensitive));\r\n  }\r\n}\r\n\r\nclass NoneSelector extends Selector {\r\n  includesAtom(_atom) {\r\n    return false;\r\n  }\r\n}\r\n\r\nNoneSelector.prototype.name = 'None';\r\nNoneSelector.prototype.keyword = 'none';\r\n\r\nclass AllSelector extends Selector {\r\n  includesAtom(_atom) {\r\n    return true;\r\n  }\r\n}\r\n\r\nAllSelector.prototype.name = 'All';\r\nAllSelector.prototype.keyword = 'all';\r\n\r\nexport {\r\n  Selector,\r\n  ListSelector,\r\n  RangeListSelector,\r\n  ValueListSelector,\r\n  NoneSelector,\r\n  AllSelector,\r\n};\r\n","import { Selector, NoneSelector } from './selectorsBase';\r\n\r\n//----------------------------------------------------------------------------\r\n// Operators\r\n//----------------------------------------------------------------------------\r\nconst none = new NoneSelector();\r\n\r\nclass PrefixOperator extends Selector {\r\n  constructor(rhs) {\r\n    super();\r\n    this.rhs = rhs || none;\r\n  }\r\n\r\n  toString() {\r\n    const rhs = this.rhs.priority && this.rhs.priority > this.priority ? `(${this.rhs})` : this.rhs;\r\n    return `${this.keyword} ${rhs}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.rhs.toJSON()];\r\n  }\r\n}\r\n\r\nPrefixOperator.prototype.priority = 1;\r\n\r\nclass InfixOperator extends Selector {\r\n  constructor(lhs, rhs) {\r\n    super();\r\n    this.lhs = lhs || none;\r\n    this.rhs = rhs || none;\r\n  }\r\n\r\n  toString() {\r\n    const lhs = this.lhs.priority && this.lhs.priority > this.priority ? `(${this.lhs})` : this.lhs;\r\n    const rhs = this.rhs.priority && this.rhs.priority > this.priority ? `(${this.rhs})` : this.rhs;\r\n    return `${lhs} ${this.keyword} ${rhs}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.lhs.toJSON(), this.rhs.toJSON()];\r\n  }\r\n}\r\n\r\nInfixOperator.prototype.priority = 1000;\r\n\r\nexport { PrefixOperator, InfixOperator };\r\n","import Atom from './Atom';\r\nimport ResidueType from './ResidueType';\r\nimport { parser } from '../utils/SelectionParser';\r\nimport { Range, RangeList, ValueList } from './selectors/selectArgs';\r\nimport { PrefixOperator, InfixOperator } from './selectors/selectOps';\r\nimport {\r\n  Selector,\r\n  RangeListSelector,\r\n  ValueListSelector,\r\n  NoneSelector,\r\n  AllSelector,\r\n} from './selectors/selectorsBase';\r\n\r\nconst keywords = {};\r\n\r\n//----------------------------------------------------------------------------\r\n// Named selectors\r\n//----------------------------------------------------------------------------\r\n\r\nfunction defineSelector(name, SelectorClass) {\r\n  const keyword = name.toLowerCase();\r\n  SelectorClass.prototype.keyword = keyword;\r\n  SelectorClass.prototype.name = name;\r\n\r\n  const factory = ((...args) => new SelectorClass(...args));\r\n  factory.SelectorClass = SelectorClass;\r\n  keywords[keyword] = factory;\r\n\r\n  return SelectorClass;\r\n}\r\n\r\ndefineSelector('Serial', class SerialSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.serial);\r\n  }\r\n});\r\n\r\ndefineSelector('Name', class NameSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.name);\r\n  }\r\n});\r\n\r\ndefineSelector('AltLoc', class AltLocSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(String.fromCharCode(atom.location));\r\n  }\r\n});\r\n\r\ndefineSelector('Elem', class ElemSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.element.name);\r\n  }\r\n});\r\n\r\ndefineSelector('Residue', class ResidueSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._type._name);\r\n  }\r\n});\r\n\r\ndefineSelector('Sequence', class SequenceSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._sequence);\r\n  }\r\n});\r\n\r\ndefineSelector('ICode', class ICodeSelector extends ValueListSelector {\r\n  constructor(arg) {\r\n    super(arg, true);\r\n  }\r\n\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._icode);\r\n  }\r\n});\r\n\r\ndefineSelector('ResIdx', class ResIdxSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._index);\r\n  }\r\n});\r\n\r\ndefineSelector('Chain', class ChainSelector extends ValueListSelector {\r\n  constructor(arg) {\r\n    super(arg, true);\r\n  }\r\n\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._chain._name);\r\n  }\r\n});\r\n\r\ndefineSelector('Hetatm', class HetatmSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return atom.het;\r\n  }\r\n});\r\n\r\ndefineSelector('PolarH', class PolarHSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return (atom.flags & Atom.Flags.NONPOLARH) === Atom.Flags.HYDROGEN;\r\n  }\r\n});\r\n\r\ndefineSelector('NonPolarH', class NonPolarHSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return (atom.flags & Atom.Flags.NONPOLARH) === Atom.Flags.NONPOLARH;\r\n  }\r\n});\r\n\r\ndefineSelector('All', AllSelector);\r\n\r\ndefineSelector('None', NoneSelector);\r\n\r\nconst NULL_SELECTOR = keywords.none();\r\n\r\n//----------------------------------------------------------------------------\r\n// Named operators\r\n//----------------------------------------------------------------------------\r\n\r\nfunction defineOperator(name, priority, OperatorClass) {\r\n  OperatorClass.prototype.priority = priority;\r\n  return defineSelector(name, OperatorClass);\r\n}\r\ndefineOperator('Not', 1, class NotOperator extends PrefixOperator {\r\n  includesAtom(atom) {\r\n    return !this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\ndefineOperator('And', 2, class AndOperator extends InfixOperator {\r\n  includesAtom(atom) {\r\n    return this.lhs.includesAtom(atom) && this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\ndefineOperator('Or', 3, class OrOperator extends InfixOperator {\r\n  includesAtom(atom) {\r\n    return this.lhs.includesAtom(atom) || this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\n//----------------------------------------------------------------------------\r\n// Flag selectors\r\n//----------------------------------------------------------------------------\r\n\r\nfunction byResidueTypeFlag(flag, name) {\r\n  return defineSelector(name, class extends Selector {\r\n    includesAtom(atom) {\r\n      return (atom.residue._type.flags & flag) !== 0;\r\n    }\r\n  });\r\n}\r\n\r\nbyResidueTypeFlag(ResidueType.Flags.PROTEIN, 'Protein');\r\nbyResidueTypeFlag(ResidueType.Flags.BASIC, 'Basic');\r\nbyResidueTypeFlag(ResidueType.Flags.ACIDIC, 'Acidic');\r\nbyResidueTypeFlag(ResidueType.Flags.BASIC | ResidueType.Flags.ACIDIC, 'Charged');\r\nbyResidueTypeFlag(ResidueType.Flags.POLAR, 'Polar');\r\nbyResidueTypeFlag(ResidueType.Flags.NONPOLAR, 'NonPolar');\r\nbyResidueTypeFlag(ResidueType.Flags.AROMATIC, 'Aromatic');\r\nbyResidueTypeFlag(ResidueType.Flags.NUCLEIC, 'Nucleic');\r\nbyResidueTypeFlag(ResidueType.Flags.PURINE, 'Purine');\r\nbyResidueTypeFlag(ResidueType.Flags.PYRIMIDINE, 'Pyrimidine');\r\nbyResidueTypeFlag(ResidueType.Flags.WATER, 'Water');\r\n\r\n//----------------------------------------------------------------------------\r\nconst selectors = Object.create(keywords);\r\n\r\nselectors.Selector = Selector;\r\nselectors.RangeListSelector = RangeListSelector;\r\nselectors.ValueListSelector = ValueListSelector;\r\nselectors.Range = Range;\r\nselectors.RangeList = RangeList;\r\nselectors.ValueList = ValueList;\r\nselectors.PrefixOperator = PrefixOperator;\r\nselectors.InfixOperator = InfixOperator;\r\nselectors.Context = Object.create({});\r\n\r\nselectors.GetSelector = function (key) {\r\n  if (!selectors.Context.hasOwnProperty(key)) {\r\n    const exc = { message: `selector ${key} is not registered` };\r\n    throw exc;\r\n  }\r\n  return selectors.Context[key] || NULL_SELECTOR;\r\n};\r\n\r\nselectors.ClearContext = function () {\r\n  Object.keys(selectors.Context).forEach((k) => { delete selectors.Context[k]; });\r\n};\r\n\r\nselectors.keyword = function (key) {\r\n  return keywords[key.toLowerCase()] || keywords.none;\r\n};\r\n\r\nselectors.parse = function (str) {\r\n  const res = {};\r\n  try {\r\n    res.selector = parser.parse(str);\r\n  } catch (e) {\r\n    res.selector = NULL_SELECTOR;\r\n    res.error = e.message;\r\n  }\r\n  return res;\r\n};\r\n\r\nparser.yy = selectors;\r\nparser.yy.parseError = parser.parseError; // workaround for incorrect JISON parser generator for AMD module\r\n\r\nexport default selectors;\r\n","import * as THREE from 'three';\r\nimport selectors from './selectors';\r\n\r\n/**\r\n * Basic biological unit class.\r\n *\r\n * @exports BiologicalUnit\r\n * @constructor\r\n */\r\nclass BiologicalUnit {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._selector = selectors.keyword('All')();\r\n    this._boundaries = {\r\n      boundingBox: new THREE.Box3(),\r\n      boundingSphere: new THREE.Sphere(),\r\n    };\r\n  }\r\n\r\n  computeBoundaries() {\r\n    const atoms = this._complex._atoms;\r\n    const n = atoms.length;\r\n    const selector = this._selector;\r\n\r\n    const { boundingBox } = this._boundaries;\r\n    boundingBox.makeEmpty();\r\n    if (n === 1) {\r\n      boundingBox.expandByPoint(atoms[0].position);\r\n      const bbc = new THREE.Vector3();\r\n      boundingBox.getCenter(bbc);\r\n      const s = 2 * atoms[0].element.radius;\r\n      boundingBox.setFromCenterAndSize(bbc, new THREE.Vector3(s, s, s));\r\n    } else {\r\n      for (let i = 0; i < n; ++i) {\r\n        if (selector.includesAtom(atoms[i])) {\r\n          boundingBox.expandByPoint(atoms[i].position);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    if (n === 1) {\r\n      this._boundaries.boundingSphere.set(center, atoms[0].element.radius);\r\n    } else {\r\n      for (let i = 0; i < n; ++i) {\r\n        if (!selector.includesAtom(atoms[i])) {\r\n          continue;\r\n        }\r\n        const pos = atoms[i].position;\r\n        const lengthSquared = center.distanceToSquared(pos);\r\n        if (radiusSquared < lengthSquared) {\r\n          radiusSquared = lengthSquared;\r\n        }\r\n      }\r\n      this._boundaries.boundingSphere.set(center, Math.sqrt(radiusSquared));\r\n    }\r\n  }\r\n\r\n  getTransforms() {\r\n    return [];\r\n  }\r\n\r\n  getSelector() {\r\n    return this._selector;\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this._boundaries;\r\n  }\r\n\r\n  finalize() {\r\n  }\r\n}\r\n\r\nexport default BiologicalUnit;\r\n","import * as THREE from 'three';\r\nimport selectors from './selectors';\r\nimport BiologicalUnit from './BiologicalUnit';\r\n\r\n/**\r\n * Biological assembly.\r\n *\r\n * @exports Assembly\r\n * @constructor\r\n */\r\n\r\nclass Assembly extends BiologicalUnit {\r\n  constructor(complex) {\r\n    super(complex);\r\n    this.chains = [];\r\n    this.matrices = [];\r\n  }\r\n\r\n  computeBoundaries() {\r\n    super.computeBoundaries();\r\n    // fix up the boundaries\r\n    const { matrices } = this;\r\n    const oldCenter = this._boundaries.boundingSphere.center;\r\n    const oldRad = this._boundaries.boundingSphere.radius;\r\n    const boundingBox = this._boundaries.boundingBox = new THREE.Box3();\r\n    boundingBox.makeEmpty();\r\n    for (let i = 0, n = matrices.length; i < n; ++i) {\r\n      boundingBox.expandByPoint(oldCenter.clone().applyMatrix4(matrices[i]));\r\n    }\r\n\r\n    const newRad = boundingBox.max.distanceTo(boundingBox.min) / 2 + oldRad;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    this._boundaries.boundingSphere = new THREE.Sphere().set(center, newRad);\r\n    boundingBox.max.addScalar(oldRad);\r\n    boundingBox.min.subScalar(oldRad);\r\n  }\r\n\r\n  /**\r\n   * Mark a chain as belonging to this biological assembly.\r\n   * @param {string} chain - chain identifier, usually a single letter\r\n   */\r\n  addChain(chain) {\r\n    this.chains[this.chains.length] = chain;\r\n  }\r\n\r\n  /**\r\n   * Add a transformation matrix.\r\n   * @param {THREE.Matrix4} matrix - transformation matrix\r\n   */\r\n  addMatrix(matrix) {\r\n    this.matrices[this.matrices.length] = matrix;\r\n  }\r\n\r\n  getTransforms() {\r\n    return this.matrices;\r\n  }\r\n\r\n  finalize() {\r\n    if (this.chains.length > 0) {\r\n      this._selector = selectors.keyword('Chain')(this.chains);\r\n    } else {\r\n      this._selector = selectors.keyword('None')();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Assembly;\r\n","/**\r\n * This class represents connected component as a part of a complex.\r\n * WARNING! The whole component entity is build under the assumption that residues\r\n * are placed in the chains and complex in ascending order of indices\r\n *\r\n * @param {Complex} complex - Molecular complex this chain belongs to.\r\n *\r\n * @exports Component\r\n * @constructor\r\n */\r\nclass Component {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._index = -1;\r\n    this._residueIndices = [];\r\n    this._cycles = [];\r\n    this._subDivs = [];\r\n    this._residueCount = 0;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._complex._residues;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residueCount;\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._complex._residues;\r\n    const resIdc = this._residueIndices;\r\n    for (let idIdc = 0, idCount = resIdc.length; idIdc < idCount; ++idIdc) {\r\n      for (let idx = resIdc[idIdc].start, last = resIdc[idIdc].end; idx <= last; ++idx) {\r\n        process(residues[idx]);\r\n      }\r\n    }\r\n  }\r\n\r\n  setSubDivs(subDivs) {\r\n    this._subDivs = subDivs;\r\n    let curr = 0;\r\n    const resIdc = [];\r\n    let resCnt = 0;\r\n    for (let i = 0, n = subDivs.length; i < n; ++i) {\r\n      if (i === n - 1 || subDivs[i].end + 1 !== subDivs[i + 1].start) {\r\n        const { start } = subDivs[curr];\r\n        const { end } = subDivs[i];\r\n        resIdc[resIdc.length] = {\r\n          start,\r\n          end,\r\n        };\r\n        resCnt += end - start + 1;\r\n        curr = i + 1;\r\n      }\r\n    }\r\n\r\n    this._residueIndices = resIdc;\r\n    this._residueCount = resCnt;\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const bonds = this._complex._bonds;\r\n\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      const bond = bonds[i];\r\n      if (bond._left.residue._component === this) {\r\n        process(bond);\r\n      }\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.forEachCycle((cycle) => {\r\n      cycle.update();\r\n    });\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    this.forEachResidue((residue) => {\r\n      residue.forEachAtom(process);\r\n    });\r\n  }\r\n\r\n  addCycle(cycle) {\r\n    this._cycles.push(cycle);\r\n  }\r\n\r\n  forEachCycle(process) {\r\n    const cycles = this._cycles;\r\n    for (let i = 0, n = cycles.length; i < n; ++i) {\r\n      process(cycles[i]);\r\n    }\r\n  }\r\n\r\n  markResidues() {\r\n    const self = this;\r\n    self.forEachResidue((residue) => {\r\n      residue._component = self;\r\n    });\r\n  }\r\n\r\n  _forEachSubChain(mask, process) {\r\n    const residues = this._complex._residues;\r\n    const subs = this._subDivs;\r\n    for (let i = 0, n = subs.length; i < n; ++i) {\r\n      for (let idx = subs[i].start, last = subs[i].end; idx <= last; ++idx) {\r\n        const currRes = residues[idx];\r\n        if (mask & currRes._mask && currRes._isValid) {\r\n          let end = idx + 1;\r\n          for (; end <= last; ++end) {\r\n            const endRes = residues[end];\r\n            if (!(mask & endRes._mask && endRes._isValid)) {\r\n              break;\r\n            }\r\n          }\r\n          process(i, idx, end - 1);\r\n          idx = end;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getMaskedSequences(mask) {\r\n    const subs = [];\r\n    let idx = 0;\r\n    this._forEachSubChain(mask, (_subIdx, start, end) => {\r\n      subs[idx++] = { start, end };\r\n    });\r\n\r\n    return subs;\r\n  }\r\n\r\n  getMaskedSubdivSequences(mask) {\r\n    const subs = [];\r\n    let currIdx = -1;\r\n    let lastSubIdx = -1;\r\n    const subDivs = this._subDivs;\r\n\r\n    this._forEachSubChain(mask, (subIdx, start, end) => {\r\n      if (lastSubIdx !== subIdx) {\r\n        ++currIdx;\r\n        subs[currIdx] = {\r\n          arr: [],\r\n          boundaries: subDivs[subIdx],\r\n        };\r\n        lastSubIdx = subIdx;\r\n      }\r\n      subs[currIdx].arr[subs[currIdx].arr.length] = { start, end };\r\n    });\r\n\r\n    return subs;\r\n  }\r\n}\r\n\r\nexport default Component;\r\n","import utils from '../utils';\r\n\r\nconst cMaxPairsForHashCode = 32;\r\nconst cHashTableSize = 1024 * 1024;\r\nconst cNumbersPerPair = 4;\r\nconst cMaxNeighbours = 14;\r\nconst cInvalidVal = -1;\r\n// 89237 is a large simple number, can be used for pseudo random hash code create\r\nconst cBigPrime = 89237;\r\n\r\nclass AtomPairs {\r\n  constructor(maxPairsEstimate) {\r\n    this.numPairs = 0;\r\n    this.numMaxPairs = maxPairsEstimate;\r\n    this.intBuffer = utils.allocateTyped(Int32Array, maxPairsEstimate * cNumbersPerPair);\r\n    for (let i = 0; i < maxPairsEstimate * cNumbersPerPair; i++) {\r\n      this.intBuffer[i] = cInvalidVal;\r\n    }\r\n    this.hashBuffer = utils.allocateTyped(Int32Array, cHashTableSize * cMaxPairsForHashCode);\r\n    for (let i = 0; i < cHashTableSize * cMaxPairsForHashCode; i++) {\r\n      this.hashBuffer[i] = cInvalidVal;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy all pairs memory\r\n   */\r\n  destroy() {\r\n    this.intBuffer = null;\r\n    this.hashBuffer = null;\r\n  }\r\n\r\n  /**\r\n   * Add pair of atoms to collection\r\n   * @param {number} indexA - Index of the 1st vertex.\r\n   * @param {number} indexB - Index of the 2nd vertex.\r\n   */\r\n  addPair(indexA, indexB) {\r\n    const ia = (indexA < indexB) ? indexA : indexB;\r\n    const ib = (indexA > indexB) ? indexA : indexB;\r\n    const codeToAdd = ia + (ib << cMaxNeighbours);\r\n\r\n    const hashCode = (ia + (ib * cBigPrime)) & (cHashTableSize - 1);\r\n    let j = hashCode * cMaxPairsForHashCode;\r\n    let apI = 0;\r\n    for (; apI < cMaxPairsForHashCode; apI++) {\r\n      const code = this.hashBuffer[j + apI];\r\n      if (code === cInvalidVal) {\r\n        break;\r\n      }\r\n      if (code === codeToAdd) {\r\n        return false;\r\n      }\r\n    }\r\n    // add this new hash code\r\n    if (apI >= cMaxPairsForHashCode) {\r\n      throw new Error('addPair: increase cMaxPairsForHashCode');\r\n    }\r\n    this.hashBuffer[j + apI] = codeToAdd;\r\n\r\n    // actually add\r\n    if (this.numPairs >= this.numMaxPairs) {\r\n      throw new Error('addPair: increase num pairs');\r\n    }\r\n    j = this.numPairs * cNumbersPerPair;\r\n    this.intBuffer[j] = ia;\r\n    this.intBuffer[j + 1] = ib;\r\n    this.intBuffer[j + 2] = codeToAdd;\r\n    this.numPairs++;\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default AtomPairs;\r\n","import AtomPairs from './AtomPairs';\r\nimport Bond from './Bond';\r\n\r\nconst cProfileBondBuilder = false;\r\nconst cEstBondsMultiplier = 4;\r\nconst cSpaceCode = 32;\r\nconst cBondTolerance = 0.45;\r\nconst cVMDTolerance = 0.6;\r\nconst cBondRadInJMOL = true;\r\nconst cEpsilon = 0.001;\r\n\r\n/**\r\n * Get radius used for building bonds.\r\n *\r\n * @param {Atom} atom - Atom object.\r\n * @returns {number} special value for bonding radius for this atom\r\n */\r\nfunction _getBondingRadius(atom) {\r\n  const { element } = atom;\r\n  if (element) {\r\n    return element.radiusBonding;\r\n  }\r\n  throw new Error('_getBondingRadius: Logic error.');\r\n}\r\n\r\nfunction _isAtomEligible(atom) {\r\n  // build for all non-hetatm and for hetatm without bonds\r\n  return !atom.isHet() || (atom.bonds && atom.bonds.length === 0);\r\n}\r\n\r\n/**\r\n * Bond between atoms.\r\n *\r\n * @param {Complex} complex molecular complex\r\n\r\n * @exports AutoBond\r\n * @constructor\r\n */\r\nclass AutoBond {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._maxRad = 1.8;\r\n    const bBox = this._complex.getDefaultBoundaries().boundingBox;\r\n    this._vBoxMin = bBox.min.clone();\r\n    this._vBoxMax = bBox.max.clone();\r\n\r\n    this._pairCollection = null;\r\n  }\r\n\r\n  /**\r\n   * Add existing pairs of connectors (from pdb file after its reading)\r\n   * @returns {number} 0\r\n   */\r\n  _addExistingPairs() {\r\n    const atoms = this._complex.getAtoms();\r\n    const numAtoms = atoms.length;\r\n    let aInd = 0;\r\n    const collection = this._pairCollection;\r\n\r\n    for (; aInd < numAtoms; aInd++) {\r\n      const { bonds } = atoms[aInd];\r\n      const numBondsForAtom = bonds.length;\r\n      for (let bInd = 0; bInd < numBondsForAtom; bInd++) {\r\n        const bond = bonds[bInd];\r\n        const indTo = bond._left.index;\r\n        if (indTo === aInd) {\r\n          collection.addPair(aInd, bond._right.index);\r\n        }\r\n      } // for (b) all bonds in atom\r\n    } // for (a)\r\n    return 0;\r\n  }\r\n\r\n  _findPairs() {\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return;\r\n    }\r\n\r\n    const atoms = this._complex._atoms;\r\n    const atomsNum = atoms.length;\r\n    const self = this;\r\n\r\n    let rA;\r\n    let isHydrogenA;\r\n    let posA;\r\n    let locationA;\r\n    let atomA;\r\n\r\n    const processAtom = function (atomB) {\r\n      if (isHydrogenA && atomB.isHydrogen()) {\r\n        return;\r\n      }\r\n\r\n      const locationB = atomB.location;\r\n      if ((locationA !== cSpaceCode)\r\n        && (locationB !== cSpaceCode)\r\n        && (locationA !== locationB)) {\r\n        return;\r\n      }\r\n\r\n      const dist2 = posA.distanceToSquared(atomB.position);\r\n      const rB = atomB.element.radiusBonding;\r\n      const maxAcceptable = cBondRadInJMOL ? rA + rB + cBondTolerance : cVMDTolerance * (rA + rB);\r\n\r\n      if (dist2 > (maxAcceptable * maxAcceptable)) {\r\n        return;\r\n      }\r\n\r\n      if (dist2 < cEpsilon) {\r\n        return;\r\n      }\r\n\r\n      self._pairCollection.addPair(atomA.index, atomB.index);\r\n    };\r\n\r\n    for (let i = 0; i < atomsNum; ++i) {\r\n      atomA = atoms[i];\r\n      if (!_isAtomEligible(atomA)) {\r\n        continue;\r\n      }\r\n\r\n      rA = atomA.element.radiusBonding;\r\n      isHydrogenA = atomA.isHydrogen();\r\n      posA = atomA.position;\r\n      locationA = atomA.location;\r\n\r\n      vw.forEachAtomWithinRadius(posA, 2 * this._maxRad + cBondTolerance, processAtom);\r\n    }\r\n  }\r\n\r\n  _addPairs() {\r\n    const atoms = this._complex._atoms;\r\n\r\n    for (let i = 0, k = 0; i < this._pairCollection.numPairs; i++, k += 4) {\r\n      const iA = this._pairCollection.intBuffer[k];\r\n      const iB = this._pairCollection.intBuffer[k + 1];\r\n      this._addPair(atoms[iA], atoms[iB]);\r\n    }\r\n  }\r\n\r\n  _addPair(atomA, atomB) {\r\n    const bondsA = atomA.bonds;\r\n    const indexA = atomA.index;\r\n    const indexB = atomB.index;\r\n    for (let j = 0, numBonds = bondsA.length; j < numBonds; ++j) {\r\n      const bond = bondsA[j];\r\n      if (bond._left.index === indexB || bond._right.index === indexB) {\r\n        return;\r\n      }\r\n    }\r\n    const left = indexA < indexB ? atomA : atomB;\r\n    const right = indexA < indexB ? atomB : atomA;\r\n    const newBond = this._complex.addBond(left, right, 0, Bond.BondType.UNKNOWN, false);\r\n    bondsA.push(newBond);\r\n    atomB.bonds.push(newBond);\r\n  }\r\n\r\n  build() {\r\n    if (cProfileBondBuilder) {\r\n      console.time('Bonds Builder');\r\n    }\r\n    this._buildInner();\r\n\r\n    if (cProfileBondBuilder) {\r\n      console.timeEnd('Bonds Builder');\r\n    }\r\n  }\r\n\r\n  _buildInner() {\r\n    const atoms = this._complex._atoms;\r\n    if (atoms.length < 2) {\r\n      return;\r\n    }\r\n    if (atoms[0].index < 0) {\r\n      throw new Error('AutoBond: Atoms in complex were not indexed.');\r\n    }\r\n\r\n    this._calcBoundingBox();\r\n    this._pairCollection = new AtomPairs(atoms.length * cEstBondsMultiplier);\r\n    this._addExistingPairs();\r\n    this._findPairs();\r\n    this._addPairs();\r\n  }\r\n\r\n  _calcBoundingBox() {\r\n    const atoms = this._complex._atoms;\r\n    const nAtoms = atoms.length;\r\n    let maxRad = _getBondingRadius(atoms[0]);\r\n    for (let i = 1; i < nAtoms; ++i) {\r\n      maxRad = Math.max(maxRad, _getBondingRadius(atoms[i]));\r\n    }\r\n    this._vBoxMax.addScalar(maxRad);\r\n    this._vBoxMin.addScalar(-maxRad);\r\n    this._maxRad = maxRad * 1.2;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._pairCollection) {\r\n      this._pairCollection.destroy();\r\n    }\r\n  }\r\n}\r\n\r\nexport default AutoBond;\r\n","import * as THREE from 'three';\r\nimport Bond from './Bond';\r\nimport Element from './Element';\r\n\r\nconst cCrossThresh = 0.1;\r\nconst cAromaticType = Bond.BondType.AROMATIC;\r\nconst cAromaticAtoms = [\r\n  Element.ByName.C.number,\r\n  Element.ByName.N.number,\r\n  // Element.ByName.O.number,\r\n  // Element.ByName.S.number,\r\n];\r\n\r\n\r\n/** Conditions for bonds:\r\n   *   - Cross product with each subsequent bond to add is collinear and point to the same direction\r\n   *   - Each pair of a adjacent bonds belong to not more than one cycle\r\n   *   - If there is more than one candidates we try them in ascending order of angle values\r\n   */\r\n\r\nconst _coDirVectors = (function () {\r\n  const v1Tmp = new THREE.Vector3();\r\n  const v2Tmp = new THREE.Vector3();\r\n  const cp = new THREE.Vector3();\r\n  return function (v1, v2) {\r\n    v1Tmp.copy(v1).normalize();\r\n    v2Tmp.copy(v2).normalize();\r\n    cp.crossVectors(v1Tmp, v2Tmp);\r\n    if (cp.length() > cCrossThresh) {\r\n      return false;\r\n    }\r\n    // zero vector in out terms must be collinear to any\r\n    return v1Tmp.dot(v2Tmp) >= 0;\r\n  };\r\n}());\r\n\r\nfunction _insertAscending(arr, val) {\r\n  let idx = 0;\r\n  while (idx < arr.length && arr[idx] < val) {\r\n    ++idx;\r\n  }\r\n  arr.splice(idx, 0, val);\r\n}\r\n\r\nfunction _anotherAtom(bond, currAtom) {\r\n  return bond._left === currAtom ? bond._right : bond._left;\r\n}\r\n\r\nfunction _cosBetween(v1, v2) {\r\n  const theta = v1.dot(v2) / (Math.sqrt(v1.lengthSq() * v2.lengthSq()));\r\n  return THREE.Math.clamp(theta, -1, 1);\r\n}\r\n\r\nfunction _markAromatic(bond) {\r\n  bond._type = cAromaticType;\r\n}\r\n\r\nclass Cycle {\r\n  constructor(atomsList) {\r\n    this.atoms = atomsList;\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    const { atoms } = this;\r\n    const center = new THREE.Vector3();\r\n    const nA = atoms.length;\r\n    for (let j = 0; j < nA; ++j) {\r\n      center.add(atoms[j].position);\r\n    }\r\n    center.multiplyScalar(1.0 / nA);\r\n    this.center = center;\r\n    this.radius = center.distanceTo(atoms[0].position.clone().lerp(atoms[1].position, 0.5));\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const { atoms } = this;\r\n    const nA = atoms.length;\r\n    let currAtom = atoms[0];\r\n    let nextAtom;\r\n\r\n    function checkBond(bond) {\r\n      if (bond._left === nextAtom || bond._right === nextAtom) {\r\n        process(bond);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < nA; ++i) {\r\n      nextAtom = atoms[(i + 1) % nA];\r\n      currAtom.forEachBond(checkBond);\r\n      currAtom = nextAtom;\r\n    }\r\n  }\r\n}\r\n\r\nfunction _isAromatic(bond) {\r\n  return bond._type === cAromaticType;\r\n}\r\n\r\nfunction _isPossibleAromatic(bond) {\r\n  if (bond.type === cAromaticType) {\r\n    return true;\r\n  }\r\n  const rightIdx = cAromaticAtoms.indexOf(bond._right.element.number);\r\n  const leftIdx = cAromaticAtoms.indexOf(bond._left.element.number);\r\n  return rightIdx !== -1 && leftIdx !== -1;\r\n}\r\n\r\nfunction _checkCycleSimple(cycle) {\r\n  return cycle.length > 3;\r\n}\r\n\r\nfunction _checkCycleComplex(cycle) {\r\n  console.assert(cycle.length > 2);\r\n  return true;\r\n}\r\n\r\nclass AromaticLoopsMarker {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    const bondsData = new Array(complex._bonds.length);\r\n    const bondMarks = new Array(complex._bonds.length);\r\n    for (let i = 0, n = bondsData.length; i < n; ++i) {\r\n      bondsData[i] = [];\r\n      bondMarks[i] = false;\r\n    }\r\n    this._bondsData = bondsData;\r\n    this._bondMarks = bondMarks;\r\n    this._resetCycles();\r\n  }\r\n\r\n  _resetCycles() {\r\n    this._cycles = [];\r\n    this._currIdx = -1;\r\n  }\r\n\r\n  _haveSameCycle(bondsData, bond1, bond2) {\r\n    const arr1 = bondsData[bond1._index];\r\n    const arr2 = bondsData[bond2._index];\r\n    const n1 = arr1.length;\r\n    const n2 = arr2.length;\r\n    let i1 = 0;\r\n    let i2 = 0;\r\n    while (i1 < n1 && i2 < n2) {\r\n      if (arr1[i1] === arr2[i2]) {\r\n        return true;\r\n      }\r\n      if (arr1[i1] > arr2[i2]) {\r\n        ++i2;\r\n      } else {\r\n        ++i1;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _tryBond(prevBond, currRight, currDir) {\r\n    const bondsOrder = [];\r\n    const bondsData = this._bondsData;\r\n    const currLeft = _anotherAtom(prevBond, currRight);\r\n    const currVec = currRight.position.clone().sub(currLeft.position);\r\n    const startAtomRef = this._currStart;\r\n    const self = this;\r\n    const bondMarks = this._bondMarks;\r\n    let checkAromatic = this._checkBond;\r\n    bondMarks[prevBond._index] = true;\r\n    checkAromatic = checkAromatic === undefined ? _isAromatic : checkAromatic;\r\n    currRight.forEachBond((newBond) => {\r\n      if (!checkAromatic(newBond)\r\n        || newBond === prevBond\r\n        || bondMarks[newBond._index]\r\n        || self._haveSameCycle(bondsData, prevBond, newBond)) {\r\n        return;\r\n      }\r\n      const anotherAtom = _anotherAtom(newBond, currRight);\r\n      const anotherVec = anotherAtom.position.clone().sub(currRight.position);\r\n      const val = anotherAtom === startAtomRef ? -2.0 : 1 - _cosBetween(currVec, anotherVec);\r\n      const newDir = anotherVec.cross(currVec);\r\n      if (!_coDirVectors(newDir, currDir)) {\r\n        return;\r\n      }\r\n      let idx = 0;\r\n      while (idx < bondsOrder.length && bondsOrder[idx].val < val) {\r\n        ++idx;\r\n      }\r\n      bondsOrder.splice(idx, 0, { bond: newBond, val, dir: newDir });\r\n    });\r\n\r\n    for (let i = 0, n = bondsOrder.length; i < n; ++i) {\r\n      const { bond } = bondsOrder[i];\r\n      const newRight = bond._left === currRight ? bond._right : bond._left;\r\n      if (newRight === startAtomRef) {\r\n        ++this._currIdx;\r\n        this._cycles.push([currRight]);\r\n        bondMarks[prevBond._index] = false;\r\n        return true;\r\n      }\r\n      if (this._tryBond(bond, newRight, bondsOrder[i].dir)) {\r\n        _insertAscending(bondsData[bond._index], this._currIdx);\r\n        this._cycles[this._currIdx].push(currRight);\r\n        bondMarks[prevBond._index] = false;\r\n        return true;\r\n      }\r\n    }\r\n    bondMarks[prevBond._index] = false;\r\n    return false;\r\n  }\r\n\r\n  _startCycle(bond) {\r\n    // start from left to right\r\n    this._currStart = bond._left;\r\n    if (this._tryBond(bond, bond._right, new THREE.Vector3())) {\r\n      _insertAscending(this._bondsData[bond._index], this._currIdx);\r\n      this._cycles[this._currIdx].push(bond._left);\r\n    }\r\n  }\r\n\r\n  _findLoops(checkBond, checkCycle) {\r\n    this._checkBond = checkBond;\r\n    const complex = this._complex;\r\n    const self = this;\r\n\r\n    complex.forEachComponent((component) => {\r\n      self._resetCycles();\r\n      component.forEachBond((bond) => {\r\n        if (checkBond(bond)) {\r\n          self._startCycle(bond);\r\n        }\r\n      });\r\n      const cycles = self._cycles;\r\n      for (let i = 0, n = cycles.length; i < n; ++i) {\r\n        const cycle = cycles[i];\r\n        if (!checkCycle(cycle)) {\r\n          continue;\r\n        }\r\n        const newCycle = new Cycle(cycle);\r\n        newCycle.forEachBond(_markAromatic);\r\n        component.addCycle(newCycle);\r\n      }\r\n    });\r\n  }\r\n\r\n  markCycles() {\r\n    this._findLoops(_isAromatic, _checkCycleSimple);\r\n  }\r\n\r\n  detectCycles() {\r\n    this._findLoops(_isPossibleAromatic, _checkCycleComplex);\r\n  }\r\n}\r\n\r\nexport default AromaticLoopsMarker;\r\n","import * as THREE from 'three';\r\nimport utils from '../utils';\r\n\r\n/**\r\n * Calculate min & max radius of a sphere slice between zMin & zMax\r\n *\r\n * @param {Vector3} center - center of the sphere\r\n * @param {number} radius  - sphere radius\r\n * @param {number} zMin - lower bound of the slice\r\n * @param {number} zMax - upper bound of the slice\r\n */\r\nfunction _getSphereSliceRadiusRange(center, radius, zMin, zMax) {\r\n  const dzMin = zMin - center.z;\r\n  const dzMax = zMax - center.z;\r\n  const rzMin = Math.sqrt(Math.max(radius * radius - dzMin * dzMin, 0.0));\r\n  const rzMax = Math.sqrt(Math.max(radius * radius - dzMax * dzMax, 0.0));\r\n\r\n  const rMin = Math.min(rzMin, rzMax);\r\n  let rMax;\r\n\r\n  if (zMin <= center.z && zMax >= center.z) {\r\n    // sphere's main diameter is inside slice\r\n    rMax = radius;\r\n  } else {\r\n    rMax = Math.max(rzMin, rzMax);\r\n  }\r\n\r\n  return [rMin, rMax];\r\n}\r\n\r\n/**\r\n * Calculate min & max radius of a circle slice between yMin & yMax.\r\n *\r\n * To maintain analogy with _getSphereSliceRadiusRange we call radius what in fact is\r\n * half-width (along X axis) of the slice, i.e. 1D-sphere radius.\r\n *\r\n * @param {Vector3} center - center of the circle (z can be ignored)\r\n * @param {number} radius  - circle radius\r\n * @param {number} yMin - lower bound of the slice\r\n * @param {number} yMax - upper bound of the slice\r\n * @returns {Array} - array of two numbers (min & max radius, or half-width)\r\n */\r\nfunction _getCircleSliceRadiusRange(center, radius, yMin, yMax) {\r\n  const dyMin = yMin - center.y;\r\n  const dyMax = yMax - center.y;\r\n  const ryMin = Math.sqrt(Math.max(radius * radius - dyMin * dyMin, 0.0));\r\n  const ryMax = Math.sqrt(Math.max(radius * radius - dyMax * dyMax, 0.0));\r\n\r\n  const rMin = Math.min(ryMin, ryMax);\r\n  let rMax;\r\n\r\n  if (yMin <= center.y && yMax >= center.y) {\r\n    // slice's main diameter is inside slice\r\n    rMax = radius;\r\n  } else {\r\n    rMax = Math.max(ryMin, ryMax);\r\n  }\r\n\r\n  return [rMin, rMax];\r\n}\r\n\r\n/**\r\n * VoxelWorld constructor\r\n *\r\n * @param {Box3} box - bounding box of the volume to be partitioned\r\n * @param {Vector3} vCellSizeHint - target voxel size (actual voxel size may differ from this)\r\n */\r\nclass VoxelWorld {\r\n  constructor(box, vCellSizeHint) {\r\n    this._box = box.clone();\r\n    const size = new THREE.Vector3();\r\n    box.getSize(size);\r\n    this._count = size.clone().divide(vCellSizeHint).floor().max(new THREE.Vector3(1, 1, 1));\r\n    this._last = this._count.clone().subScalar(1);\r\n    this._cellSize = size.clone().divide(this._count);\r\n    this._cellInnerR = 0.5 * Math.min(Math.min(this._cellSize.x, this._cellSize.y), this._cellSize.z);\r\n    this._cellOuterR = 0.5 * Math.sqrt(this._cellSize.dot(this._cellSize));\r\n\r\n    // array of voxels, each element contains index of first atom in voxel\r\n    const numVoxels = this._count.x * this._count.y * this._count.z;\r\n    this._voxels = utils.allocateTyped(Int32Array, numVoxels);\r\n    for (let i = 0; i < numVoxels; ++i) {\r\n      this._voxels[i] = -1;\r\n    }\r\n\r\n    // array of atoms that stores multiple single-linked lists\r\n    // two elements for each atom: Atom ref, index of next atom (in this array\r\n    this._atoms = [];\r\n  }\r\n\r\n  /**\r\n   * Add all atoms from a complex to voxel world\r\n   *\r\n   * @param {Complex} complex - complex\r\n   */\r\n  addAtoms(complex) {\r\n    const self = this;\r\n\r\n    let idx = this._atoms.length;\r\n\r\n    // resize array of atoms\r\n    this._atoms.length += 2 * complex.getAtomCount();\r\n\r\n    complex.forEachAtom((atom) => {\r\n      // find which voxel contains this atom\r\n      const voxelIdx = self._findVoxel(atom.position);\r\n\r\n      // push current atom to the head of voxel's atom list\r\n      self._atoms[idx] = atom;\r\n      self._atoms[idx + 1] = self._voxels[voxelIdx];\r\n      self._voxels[voxelIdx] = idx;\r\n\r\n      idx += 2;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get voxel that contains specified 3D point (we use clamp at the edges)\r\n   *\r\n   * @param {Vector3} point - a point in 3D\r\n   * @returns {number} - index of voxel\r\n   */\r\n  static _zero = new THREE.Vector3(0, 0, 0);\r\n\r\n  static _voxel = new THREE.Vector3();\r\n\r\n  _findVoxel(point) {\r\n    const zero = VoxelWorld._zero;\r\n    const voxel = VoxelWorld._voxel;\r\n    voxel.copy(point)\r\n      .sub(this._box.min)\r\n      .divide(this._cellSize)\r\n      .floor()\r\n      .clamp(zero, this._last);\r\n    return voxel.x + this._count.x * (voxel.y + this._count.y * voxel.z);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom in voxel\r\n   *\r\n   * @param {number} voxel - index of voxel\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  _forEachAtomInVoxel(voxel, process) {\r\n    for (let i = this._voxels[voxel]; i >= 0; i = this._atoms[i + 1]) {\r\n      process(this._atoms[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each voxel that is touched by given sphere. Callback also takes flag\r\n   * isInside specifying whether voxel lies inside the sphere entirely.\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(number,bool)} process - function to call that takes voxel index and boolean isInside\r\n   */\r\n\r\n  static _xRange = new THREE.Vector2();\r\n\r\n  static _yRange = new THREE.Vector2();\r\n\r\n  static _zRange = new THREE.Vector2();\r\n\r\n  _forEachVoxelWithinRadius(center, radius, process) {\r\n    const xRange = VoxelWorld._xRange;\r\n    const yRange = VoxelWorld._yRange;\r\n    const zRange = VoxelWorld._zRange;\r\n\r\n    // switch to a faster method unless cell size is much smaller than sphere radius\r\n    if (radius / this._cellInnerR < 10) {\r\n      this._forEachVoxelWithinRadiusSimple(center, radius, process);\r\n      return;\r\n    }\r\n\r\n    let rRangeXY;\r\n    let rRangeX;\r\n    let xVal;\r\n    let yVal;\r\n    let zVal;\r\n    let isInsideX;\r\n    let isInsideY;\r\n    let isInsideZ;\r\n\r\n    zRange.set(center.z - radius, center.z + radius);\r\n    zRange.subScalar(this._box.min.z)\r\n      .divideScalar(this._cellSize.z)\r\n      .floor()\r\n      .clampScalar(0, this._count.z - 1);\r\n\r\n    for (let z = zRange.x; z <= zRange.y; ++z) {\r\n      zVal = [this._box.min.z + z * this._cellSize.z,\r\n        this._box.min.z + (z + 1) * this._cellSize.z];\r\n\r\n      isInsideZ = (center.z - radius <= zVal[0]) && (zVal[1] <= center.z + radius);\r\n\r\n      rRangeXY = _getSphereSliceRadiusRange(center, radius, zVal[0], zVal[1]);\r\n\r\n      yRange.set(center.y - rRangeXY[1], center.y + rRangeXY[1]);\r\n      yRange.subScalar(this._box.min.y)\r\n        .divideScalar(this._cellSize.y)\r\n        .floor()\r\n        .clampScalar(0, this._count.y - 1);\r\n\r\n      for (let y = yRange.x; y <= yRange.y; ++y) {\r\n        yVal = [this._box.min.y + y * this._cellSize.y,\r\n          this._box.min.y + (y + 1) * this._cellSize.y];\r\n\r\n        isInsideY = (center.y - rRangeXY[0] <= yVal[0]) && (yVal[1] <= center.y + rRangeXY[0]);\r\n\r\n        rRangeX = _getCircleSliceRadiusRange(center, rRangeXY[1], yVal[0], yVal[1]);\r\n\r\n        xRange.set(center.x - rRangeX[1], center.x + rRangeX[1]);\r\n        xRange.subScalar(this._box.min.x)\r\n          .divideScalar(this._cellSize.x)\r\n          .floor()\r\n          .clampScalar(0, this._count.x - 1);\r\n\r\n        for (let { x } = xRange; x <= xRange.y; ++x) {\r\n          xVal = [this._box.min.x + x * this._cellSize.x,\r\n            this._box.min.x + (x + 1) * this._cellSize.x];\r\n          isInsideX = (center.x - rRangeX[0] <= xVal[0]) && (xVal[1] <= center.x + rRangeX[0]);\r\n\r\n          process(x + this._count.x * (y + this._count.y * z), isInsideX && isInsideY && isInsideZ);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each voxel that is touched by given sphere. Callback also takes flag\r\n   * isInside specifying whether voxel lies inside the sphere entirely.\r\n   * This is a version of method that doesn't try to \"calculate\" what voxels fall inside radius\r\n   * but instead just checks all voxels inside sphere's bounding box. This should be faster\r\n   * unless cell size is much smaller than sphere radius.\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(number,bool)} process - function to call that takes voxel index and boolean isInside\r\n   */\r\n\r\n  static _vCenter = new THREE.Vector3();\r\n\r\n  _forEachVoxelWithinRadiusSimple(center, radius, process) {\r\n    const xRange = VoxelWorld._xRange;\r\n    const yRange = VoxelWorld._yRange;\r\n    const zRange = VoxelWorld._zRange;\r\n    const vCenter = VoxelWorld._vCenter;\r\n\r\n    const distTouch2 = (radius + this._cellOuterR) * (radius + this._cellOuterR);\r\n    let distInside2 = -1.0;\r\n    if (radius > this._cellOuterR) {\r\n      distInside2 = (radius - this._cellOuterR) * (radius - this._cellOuterR);\r\n    }\r\n\r\n    // calculate bounding box for the sphere\r\n    xRange.set(center.x - radius, center.x + radius);\r\n    xRange.subScalar(this._box.min.x)\r\n      .divideScalar(this._cellSize.x)\r\n      .floor();\r\n    xRange.x = Math.min(Math.max(xRange.x, 0), this._count.x - 1);\r\n    xRange.y = Math.min(Math.max(xRange.y, 0), this._count.x - 1);\r\n\r\n    yRange.set(center.y - radius, center.y + radius);\r\n    yRange.subScalar(this._box.min.y)\r\n      .divideScalar(this._cellSize.y)\r\n      .floor();\r\n    yRange.x = Math.min(Math.max(yRange.x, 0), this._count.y - 1);\r\n    yRange.y = Math.min(Math.max(yRange.y, 0), this._count.y - 1);\r\n\r\n    zRange.set(center.z - radius, center.z + radius);\r\n    zRange.subScalar(this._box.min.z)\r\n      .divideScalar(this._cellSize.z)\r\n      .floor();\r\n    zRange.x = Math.min(Math.max(zRange.x, 0), this._count.z - 1);\r\n    zRange.y = Math.min(Math.max(zRange.y, 0), this._count.z - 1);\r\n\r\n    for (let z = zRange.x; z <= zRange.y; ++z) {\r\n      const zVal = [this._box.min.z + z * this._cellSize.z,\r\n        this._box.min.z + (z + 1) * this._cellSize.z];\r\n      vCenter.z = 0.5 * (zVal[0] + zVal[1]);\r\n\r\n      for (let y = yRange.x; y <= yRange.y; ++y) {\r\n        const yVal = [this._box.min.y + y * this._cellSize.y,\r\n          this._box.min.y + (y + 1) * this._cellSize.y];\r\n        vCenter.y = 0.5 * (yVal[0] + yVal[1]);\r\n\r\n        for (let { x } = xRange; x <= xRange.y; ++x) {\r\n          const xVal = [this._box.min.x + x * this._cellSize.x,\r\n            this._box.min.x + (x + 1) * this._cellSize.x];\r\n          vCenter.x = 0.5 * (xVal[0] + xVal[1]);\r\n\r\n          const d2 = center.distanceToSquared(vCenter);\r\n          if (d2 <= distTouch2) {\r\n            process(x + this._count.x * (y + this._count.y * z), d2 <= distInside2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom within given sphere\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinRadius(center, radius, process) {\r\n    const self = this;\r\n    const r2 = radius * radius;\r\n\r\n    self._forEachVoxelWithinRadius(center, radius, (voxel, isInside) => {\r\n      if (isInside) {\r\n        self._forEachAtomInVoxel(voxel, process);\r\n      } else {\r\n        self._forEachAtomInVoxel(voxel, (atom) => {\r\n          if (center.distanceToSquared(atom.position) <= r2) {\r\n            process(atom);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms defined by mask\r\n   *\r\n   * @param {Complex} complex - complex\r\n   * @param {number} mask - bit mask\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinDistFromMasked(complex, mask, dist, process) {\r\n    this._forEachAtomWithinDistFromGroup((atomProc) => {\r\n      complex.forEachAtom((atom) => {\r\n        if ((atom.mask & mask) !== 0) {\r\n          atomProc(atom);\r\n        }\r\n      });\r\n    }, dist, process);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms defined by selector\r\n   *\r\n   * @param {Complex} complex - complex\r\n   * @param {number} selector - selector\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinDistFromSelected(complex, selector, dist, process) {\r\n    this._forEachAtomWithinDistFromGroup((atomProc) => {\r\n      complex.forEachAtom((atom) => {\r\n        if (selector.includesAtom(atom)) {\r\n          atomProc(atom);\r\n        }\r\n      });\r\n    }, dist, process);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms\r\n   *\r\n   * @param {function} forEachAtom - enumerator of atoms in the group\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  _forEachAtomWithinDistFromGroup(forEachAtom, dist, process) {\r\n    const self = this;\r\n    const r2 = dist * dist;\r\n\r\n    const voxels = [];\r\n    const atoms = [];\r\n    let idx = 0;\r\n\r\n    // build \"within radius\" atom list for each voxel\r\n    forEachAtom((atom) => {\r\n      self._forEachVoxelWithinRadius(atom.position, dist, (voxel, isInside) => {\r\n        if (isInside) {\r\n          // this voxel is inside circle -- no check will be required\r\n          voxels[voxel] = -1;\r\n        } else if (typeof voxels[voxel] === 'undefined') {\r\n          // this voxel isn't covered yet -- start building list of atoms\r\n          atoms.push(atom);\r\n          atoms.push(-1);\r\n          voxels[voxel] = idx;\r\n          idx += 2;\r\n        } else if (voxels[voxel] !== -1) {\r\n          // this voxel has a list of atoms required for distance check -- add atom to the list\r\n          atoms.push(atom);\r\n          atoms.push(voxels[voxel]);\r\n          voxels[voxel] = idx;\r\n          idx += 2;\r\n        }\r\n      });\r\n    });\r\n\r\n    let voxel;\r\n\r\n    const processIfWithin = function (atom) {\r\n      if (typeof voxels[voxel] === 'undefined') {\r\n        return;\r\n      }\r\n\r\n      idx = voxels[voxel];\r\n      if (idx === -1) {\r\n        // this voxel is fully covered\r\n        process(atom);\r\n        return;\r\n      }\r\n\r\n      // check distance to each atom within radius from this voxel\r\n      for (; idx >= 0; idx = atoms[idx + 1]) {\r\n        if (atom.position.distanceToSquared(atoms[idx].position) < r2) {\r\n          process(atom);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    // for each marked voxel\r\n    for (voxel in voxels) {\r\n      if (voxels.hasOwnProperty(voxel)) {\r\n        self._forEachAtomInVoxel(voxel, processIfWithin);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default VoxelWorld;\r\n","import ResidueType from './ResidueType';\r\nimport PairCollection from './AtomPairs';\r\n\r\nconst MINIMAL_DISTANCE = 0.5;\r\nconst MIN_HBOND_ENERGY = -9.9;\r\nconst MAX_HBOND_ENERGY = -0.5;\r\nconst COUPLING_CONSTANT = -27.888; // = -332 * 0.42 * 0.2\r\nconst MAX_COUPLING_DISTANCE = 5.0; // how far is the closest atom of a potential partner residue from CA atom\r\nconst MAX_RESIDUES_THRESHOLD = 1000;\r\n\r\nexport default class HBondInfo {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._hbonds = []; // array of bond info for each residue\r\n    if (this._complex._residues.length > MAX_RESIDUES_THRESHOLD) {\r\n      this._buildVW(); // optimized version using voxel grid\r\n    } else {\r\n      this._build(); // test all pairs of residues\r\n    }\r\n  }\r\n\r\n  isBond(from, to) {\r\n    if (this._hbonds[from]) {\r\n      const [acc0, acc1] = this._hbonds[from].acceptor;\r\n      if (acc0 && acc0.residue === to && acc0.energy < MAX_HBOND_ENERGY) {\r\n        return true;\r\n      }\r\n      if (acc1 && acc1.residue === to && acc1.energy < MAX_HBOND_ENERGY) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _build() {\r\n    const self = this;\r\n\r\n    for (let i = 0; i < this._complex._residues.length - 1; ++i) {\r\n      const ri = this._complex._residues[i];\r\n      if ((ri.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        continue;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      let preri = null;\r\n      if (i > 0 && (this._complex._residues[i - 1].getType().flags & ResidueType.Flags.PROTEIN)\r\n        && ri._sequence === this._complex._residues[i - 1]._sequence + 1) {\r\n        preri = this._complex._residues[i - 1];\r\n      }\r\n\r\n      for (let j = i + 1; j < this._complex._residues.length; ++j) {\r\n        const rj = this._complex._residues[j];\r\n        if ((rj.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n          continue;\r\n        }\r\n\r\n        // get predecessor in chain\r\n        let prerj = null;\r\n        if ((this._complex._residues[j - 1].getType().flags & ResidueType.Flags.PROTEIN)\r\n          && rj._sequence === this._complex._residues[j - 1]._sequence + 1) {\r\n          prerj = this._complex._residues[j - 1];\r\n        }\r\n\r\n        self._calcHBondEnergy(preri, ri, rj);\r\n        if (j !== i + 1) {\r\n          self._calcHBondEnergy(prerj, rj, ri);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _buildVW() {\r\n    const self = this;\r\n    const residues = this._complex._residues;\r\n    let ri;\r\n    let preri;\r\n\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return;\r\n    }\r\n\r\n    const pairs = new PairCollection(this._complex._residues.length * this._complex._residues.length / 2);\r\n\r\n    function processAtom(atom) {\r\n      const rj = atom.residue;\r\n\r\n      if (rj._index === ri._index) {\r\n        return;\r\n      }\r\n\r\n      if ((rj.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        return;\r\n      }\r\n\r\n      if (!pairs.addPair(ri._index, rj._index)) {\r\n        // we've seen this pair\r\n        return;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      let prerj = rj._index > 0 ? residues[rj._index - 1] : null;\r\n      if (prerj\r\n        && ((prerj.getType().flags & ResidueType.Flags.PROTEIN) === 0 || rj._sequence !== prerj._sequence + 1)) {\r\n        prerj = null;\r\n      }\r\n\r\n      self._calcHBondEnergy(preri, ri, rj);\r\n      if (rj._index !== ri._index + 1) {\r\n        self._calcHBondEnergy(prerj, rj, ri);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < residues.length - 1; ++i) {\r\n      ri = residues[i];\r\n      if ((ri.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        continue;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      preri = i > 0 ? residues[i - 1] : null;\r\n      if (preri\r\n        && ((preri.getType().flags & ResidueType.Flags.PROTEIN) === 0 || ri._sequence !== preri._sequence + 1)) {\r\n        preri = null;\r\n      }\r\n\r\n      vw.forEachAtomWithinRadius(this._residueGetCAlpha(ri), MAX_COUPLING_DISTANCE, processAtom);\r\n    }\r\n  }\r\n\r\n  _residueGetCAlpha(res) {\r\n    for (let i = 0; i < res._atoms.length; ++i) {\r\n      const { name } = res._atoms[i];\r\n      if (name === 'CA'\r\n        || name === 'C1') {\r\n        return res._atoms[i].position;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _residueGetCO(res) {\r\n    let c = null;\r\n    let o = null;\r\n\r\n    res.forEachAtom((a) => {\r\n      if (a.name === 'C') {\r\n        c = a.position;\r\n      } else if (a.name === 'O') {\r\n        o = a.position;\r\n      }\r\n    });\r\n\r\n    return [c, o];\r\n  }\r\n\r\n  // TODO Support hydrogen defined in complex\r\n  _residueGetNH(prev, res) {\r\n    const [c, o] = this._residueGetCO(prev);\r\n\r\n    let n;\r\n    res.forEachAtom((a) => {\r\n      if (a.name === 'N') {\r\n        n = a.position;\r\n      }\r\n    });\r\n\r\n    if (c && o && n) {\r\n      // calculate hydrogen position\r\n      const h = c.clone();\r\n      h.sub(o);\r\n      h.multiplyScalar(1.0 / h.length());\r\n      h.add(n);\r\n\r\n      return [n, h];\r\n    }\r\n\r\n    return [null, null];\r\n  }\r\n\r\n  _calcHBondEnergy(predonor, donor, acceptor) {\r\n    let result = 0;\r\n\r\n    if (predonor === null) {\r\n      return result;\r\n    }\r\n\r\n    if (donor.getType().getName() !== 'PRO') {\r\n      const [n, h] = this._residueGetNH(predonor, donor);\r\n      const [c, o] = this._residueGetCO(acceptor);\r\n\r\n      if (n === null || h === null || c === null || o === null) {\r\n        return result;\r\n      }\r\n\r\n      const distanceHO = h.distanceTo(o);\r\n      const distanceHC = h.distanceTo(c);\r\n      const distanceNC = n.distanceTo(c);\r\n      const distanceNO = n.distanceTo(o);\r\n\r\n      if (distanceHO < MINIMAL_DISTANCE || distanceHC < MINIMAL_DISTANCE\r\n          || distanceNC < MINIMAL_DISTANCE || distanceNO < MINIMAL_DISTANCE) {\r\n        result = MIN_HBOND_ENERGY;\r\n      } else {\r\n        result = COUPLING_CONSTANT / distanceHO - COUPLING_CONSTANT / distanceHC\r\n                 + COUPLING_CONSTANT / distanceNC - COUPLING_CONSTANT / distanceNO;\r\n      }\r\n\r\n      // DSSP compatibility mode:\r\n      result = Math.round(result * 1000) / 1000;\r\n\r\n      if (result < MIN_HBOND_ENERGY) {\r\n        result = MIN_HBOND_ENERGY;\r\n      }\r\n    }\r\n\r\n    // update donor\r\n    if (typeof this._hbonds[donor._index] === 'undefined') {\r\n      this._hbonds[donor._index] = {\r\n        donor: [],\r\n        acceptor: [],\r\n      };\r\n    }\r\n    const donorInfo = this._hbonds[donor._index];\r\n\r\n    if (donorInfo.acceptor.length < 2) {\r\n      donorInfo.acceptor.push({\r\n        residue: acceptor._index,\r\n        energy: result,\r\n      });\r\n    }\r\n\r\n    if (donorInfo.acceptor.length > 1) {\r\n      if (result < donorInfo.acceptor[0].energy) {\r\n        donorInfo.acceptor[1].residue = donorInfo.acceptor[0].residue;\r\n        donorInfo.acceptor[1].energy = donorInfo.acceptor[0].energy;\r\n        donorInfo.acceptor[0].residue = acceptor._index;\r\n        donorInfo.acceptor[0].energy = result;\r\n      } else if (result < donorInfo.acceptor[1].energy) {\r\n        donorInfo.acceptor[1].residue = acceptor._index;\r\n        donorInfo.acceptor[1].energy = result;\r\n      }\r\n    }\r\n\r\n    // update acceptor\r\n    if (typeof this._hbonds[acceptor._index] === 'undefined') {\r\n      this._hbonds[acceptor._index] = {\r\n        donor: [],\r\n        acceptor: [],\r\n      };\r\n    }\r\n    const accInfo = this._hbonds[acceptor._index];\r\n\r\n    if (accInfo.donor.length < 2) {\r\n      accInfo.donor.push({\r\n        residue: donor._index,\r\n        energy: result,\r\n      });\r\n    }\r\n\r\n    if (accInfo.donor.length > 1) {\r\n      if (result < accInfo.donor[0].energy) {\r\n        accInfo.donor[1].residue = accInfo.donor[0].residue;\r\n        accInfo.donor[1].energy = accInfo.donor[0].energy;\r\n        accInfo.donor[0].residue = donor._index;\r\n        accInfo.donor[0].energy = result;\r\n      } else if (result < accInfo.donor[1].energy) {\r\n        accInfo.donor[1].residue = donor._index;\r\n        accInfo.donor[1].energy = result;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","import HBondInfo from './HBondInfo';\r\nimport ResidueType from './ResidueType';\r\n\r\nconst BridgeType = Object.freeze({\r\n  NO_BRIDGE: 0,\r\n  PARALLEL: 1,\r\n  ANTI_PARALLEL: 2,\r\n});\r\n\r\nconst HelixFlag = Object.freeze({\r\n  START: 1,\r\n  MIDDLE: 2,\r\n  END: 3,\r\n  START_AND_END: 4,\r\n});\r\n\r\nconst StructureType = Object.freeze({\r\n  STRAND: 'E',\r\n  BRIDGE: 'B',\r\n  HELIX_310: 'G',\r\n  HELIX_ALPHA: 'H',\r\n  HELIX_PI: 'I',\r\n  TURN: 'T',\r\n  BEND: 'S',\r\n  LOOP: ' ',\r\n});\r\n\r\nexport default class SecondaryStructureMap {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._build();\r\n  }\r\n\r\n  _build() {\r\n    const self = this;\r\n    this._hbonds = new HBondInfo(this._complex);\r\n    this._ss = []; // DSSP map by residue\r\n\r\n    // auxilliary data\r\n    this._sheet = [];\r\n    this._betaPartners = [];\r\n    this._bend = [];\r\n    for (let i = 0; i < this._complex.getResidues().length; ++i) {\r\n      this._betaPartners[i] = [];\r\n    }\r\n    this._helixFlags = [];\r\n    this._helixFlags[3] = [];\r\n    this._helixFlags[4] = [];\r\n    this._helixFlags[5] = [];\r\n\r\n    // calculate peptide chain lengths\r\n    this._chainLengths = [];\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i].getResidues();\r\n      let len = 0;\r\n      for (; len < chain.length; ++len) {\r\n        if ((chain[len].getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n          break;\r\n        }\r\n      }\r\n      this._chainLengths[i] = len;\r\n    }\r\n\r\n    this._buildBetaSheets();\r\n\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      self._buildAlphaHelices(this._complex._chains[i].getResidues(), this._chainLengths[i], false);\r\n    }\r\n  }\r\n\r\n  _buildAlphaHelices(inResidues, chainLength, inPreferPiHelices) {\r\n    // Helix and Turn\r\n    for (let stride = 3; stride <= 5; ++stride) {\r\n      if (inResidues.length < stride) {\r\n        break;\r\n      }\r\n\r\n      for (let i = 0; i + stride < chainLength; ++i) {\r\n        if (this._hbonds.isBond(inResidues[i + stride]._index, inResidues[i]._index)\r\n        /* && NoChainBreak(res[i], res[i + stride]) */) {\r\n          this._helixFlags[stride][inResidues[i + stride]._index] = HelixFlag.END;\r\n          for (let j = i + 1; j < i + stride; ++j) {\r\n            if (typeof this._helixFlags[stride][inResidues[j]._index] === 'undefined') {\r\n              this._helixFlags[stride][inResidues[j]._index] = HelixFlag.MIDDLE;\r\n            }\r\n          }\r\n\r\n          if (this._helixFlags[stride][inResidues[i]._index] === HelixFlag.END) {\r\n            this._helixFlags[stride][inResidues[i]._index] = HelixFlag.START_AND_END;\r\n          } else {\r\n            this._helixFlags[stride][inResidues[i]._index] = HelixFlag.START;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 2; i < chainLength - 2; ++i) {\r\n      const kappa = this._kappa(inResidues[i - 2], inResidues[i], inResidues[i + 2]);\r\n      this._bend[inResidues[i]._index] = (kappa !== 360 && kappa > 70);\r\n    }\r\n\r\n    for (let i = 1; i + 4 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 4) && this._isHelixStart(inResidues[i - 1]._index, 4)) {\r\n        for (let j = i; j <= i + 3; ++j) {\r\n          this._ss[inResidues[j]._index] = StructureType.HELIX_ALPHA;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 3 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 3) && this._isHelixStart(inResidues[i - 1]._index, 3)) {\r\n        let empty = true;\r\n        for (let j = i; empty && j <= i + 2; ++j) {\r\n          empty = typeof this._ss[inResidues[j]._index] === 'undefined'\r\n                  || this._ss[inResidues[j]._index] === StructureType.HELIX_310;\r\n        }\r\n        if (empty) {\r\n          for (let j = i; j <= i + 2; ++j) {\r\n            this._ss[inResidues[j]._index] = StructureType.HELIX_310;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 5 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 5) && this._isHelixStart(inResidues[i - 1]._index, 5)) {\r\n        let empty = true;\r\n        for (let j = i; empty && j <= i + 4; ++j) {\r\n          empty = typeof this._ss[inResidues[j]._index] === 'undefined'\r\n                  || this._ss[inResidues[j]._index] === StructureType.HELIX_PI\r\n                  || (inPreferPiHelices && this._ss[inResidues[j]._index] === StructureType.HELIX_ALPHA);\r\n        }\r\n        if (empty) {\r\n          for (let j = i; j <= i + 4; ++j) {\r\n            this._ss[inResidues[j]._index] = StructureType.HELIX_PI;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 1 < chainLength; ++i) {\r\n      if (typeof this._ss[inResidues[i]._index] === 'undefined') {\r\n        let isTurn = false;\r\n        for (let stride = 3; stride <= 5 && !isTurn; ++stride) {\r\n          for (let k = 1; k < stride && !isTurn; ++k) {\r\n            isTurn = (i >= k) && this._isHelixStart(inResidues[i - k]._index, stride);\r\n          }\r\n        }\r\n\r\n        if (isTurn) {\r\n          this._ss[inResidues[i]._index] = StructureType.TURN;\r\n        } else if (this._bend[inResidues[i]._index]) {\r\n          this._ss[inResidues[i]._index] = StructureType.BEND;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _residueGetCAlpha(res) {\r\n    for (let i = 0; i < res._atoms.length; ++i) {\r\n      const { name } = res._atoms[i];\r\n      if (name === 'CA'\r\n          || name === 'C1') {\r\n        return res._atoms[i].position;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _cosinusAngle(p1, p2, p3, p4) {\r\n    const v12 = p1.clone().sub(p2);\r\n    const v34 = p3.clone().sub(p4);\r\n\r\n    let result = 0;\r\n\r\n    const x = v12.dot(v12) * v34.dot(v34);\r\n    if (x > 0) {\r\n      result = v12.dot(v34) / Math.sqrt(x);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  _kappa(prevPrev, res, nextNext) {\r\n    const curCA = this._residueGetCAlpha(res);\r\n    const ppCA = this._residueGetCAlpha(prevPrev);\r\n    const nnCA = this._residueGetCAlpha(nextNext);\r\n    if (curCA === null || ppCA === null || nnCA === null) {\r\n      return 180;\r\n    }\r\n\r\n    const ckap = this._cosinusAngle(curCA, ppCA, nnCA, curCA);\r\n    const skap = Math.sqrt(1 - ckap * ckap);\r\n    return Math.atan2(skap, ckap) * 180 / Math.PI;\r\n  }\r\n\r\n  _isHelixStart(res, stride) {\r\n    return (this._helixFlags[stride][res] === HelixFlag.START\r\n      || this._helixFlags[stride][res] === HelixFlag.START_AND_END);\r\n  }\r\n\r\n  _buildBetaSheets() {\r\n    // find bridges\r\n    // check each chain against each other chain, and against itself\r\n    const bridges = [];\r\n    for (let a = 0; a < this._complex._chains.length; ++a) {\r\n      const lenA = this._chainLengths[a];\r\n      if (lenA <= 4) {\r\n        continue;\r\n      }\r\n\r\n      const chainA = this._complex._chains[a].getResidues();\r\n\r\n      for (let b = a; b < this._complex._chains.length; ++b) {\r\n        const lenB = this._chainLengths[b];\r\n        if (lenB <= 4) {\r\n          continue;\r\n        }\r\n\r\n        const chainB = this._complex._chains[b].getResidues();\r\n\r\n        for (let i = 1; i + 1 < lenA; ++i) {\r\n          const ri = chainA[i];\r\n\r\n          let j = 1;\r\n          if (b === a) {\r\n            j = i + 3; // check for self-bridges forward down the chain\r\n          }\r\n\r\n          for (; j + 1 < lenB; ++j) {\r\n            const rj = chainB[j];\r\n\r\n            const type = this._testBridge(chainA, i, chainB, j);\r\n            if (type === BridgeType.NO_BRIDGE) {\r\n              continue;\r\n            }\r\n\r\n            // there is a bridge, try to attach it to previously found sequence\r\n            let found = false;\r\n            for (const bridge of bridges) {\r\n              if (type !== bridge.type || ri._index !== bridge.i[bridge.i.length - 1] + 1) {\r\n                continue;\r\n              }\r\n\r\n              if (type === BridgeType.PARALLEL && bridge.j[bridge.j.length - 1] + 1 === rj._index) {\r\n                bridge.i.push(ri._index);\r\n                bridge.j.push(rj._index);\r\n                found = true;\r\n                break;\r\n              }\r\n\r\n              if (type === BridgeType.ANTI_PARALLEL && bridge.j[0] - 1 === rj._index) {\r\n                bridge.i.push(ri._index);\r\n                bridge.j.unshift(rj._index);\r\n                found = true;\r\n                break;\r\n              }\r\n            }\r\n\r\n            // this bridge cannot be attached anywhere, start a new sequence\r\n            if (!found) {\r\n              bridges.push({\r\n                type,\r\n                i: [ri._index],\r\n                chainI: ri.getChain()._index,\r\n                j: [rj._index],\r\n                chainJ: rj.getChain()._index,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // extend ladders\r\n    bridges.sort((a, b) => {\r\n      if (a.chainI < b.chainI || (a.chainI === b.chainI && a.i[0] < b.i[0])) {\r\n        return -1;\r\n      }\r\n      return 1;\r\n    });\r\n\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      for (let j = i + 1; j < bridges.length; ++j) {\r\n        const ibi = bridges[i].i[0];\r\n        const iei = bridges[i].i[bridges[i].i.length - 1];\r\n        const jbi = bridges[i].j[0];\r\n        const jei = bridges[i].j[bridges[i].j.length - 1];\r\n        const ibj = bridges[j].i[0];\r\n        const iej = bridges[j].i[bridges[j].i.length - 1];\r\n        const jbj = bridges[j].j[0];\r\n        const jej = bridges[j].j[bridges[j].j.length - 1];\r\n\r\n        if (bridges[i].type !== bridges[j].type\r\n          || this._hasChainBreak(Math.min(ibi, ibj), Math.max(iei, iej))\r\n          || this._hasChainBreak(Math.min(jbi, jbj), Math.max(jei, jej))\r\n          || ibj - iei >= 6 || (iei >= ibj && ibi <= iej)) {\r\n          continue;\r\n        }\r\n\r\n        let bulge = false;\r\n        if (bridges[i].type === BridgeType.PARALLEL) {\r\n          bulge = ((jbj - jei < 6 && ibj - iei < 3) || (jbj - jei < 3));\r\n        } else {\r\n          bulge = ((jbi - jej < 6 && ibj - iei < 3) || (jbi - jej < 3));\r\n        }\r\n\r\n        if (bulge) {\r\n          bridges[i].i = bridges[i].i.concat(bridges[j].i);\r\n          if (bridges[i].type === BridgeType.PARALLEL) {\r\n            bridges[i].j = bridges[i].j.concat(bridges[j].j);\r\n          } else {\r\n            bridges[i].j = bridges[j].j.concat(bridges[i].j);\r\n          }\r\n          bridges.splice(j--, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Sheet\r\n    const ladderset = new Set();\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      ladderset.add(bridges[i]);\r\n    }\r\n\r\n    let sheet = 1;\r\n    let ladder = 0;\r\n    while (ladderset.size > 0) {\r\n      let bridge = ladderset.values().next().value;\r\n      ladderset.delete(bridge);\r\n\r\n      const sheetset = new Set();\r\n      sheetset.add(bridge);\r\n\r\n      let toMove;\r\n      do {\r\n        toMove = new Set();\r\n        for (const a of sheetset.values()) {\r\n          for (const b of ladderset.values()) {\r\n            if (this._areBridgesLinked(a, b)) {\r\n              toMove.add(b);\r\n            }\r\n          }\r\n        }\r\n        for (bridge of toMove.values()) {\r\n          sheetset.add(bridge);\r\n          ladderset.delete(bridge);\r\n        }\r\n      } while (toMove.size > 0);\r\n\r\n      for (bridge of sheetset.values()) {\r\n        bridge.ladder = ladder;\r\n        bridge.sheet = sheet;\r\n        bridge.link = sheetset;\r\n        ++ladder;\r\n      }\r\n\r\n      ++sheet;\r\n    }\r\n\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      const bridge = bridges[i];\r\n\r\n      // find out if any of the i and j set members already have\r\n      // a bridge assigned, if so, we're assigning bridge 2\r\n\r\n      let betai = 0;\r\n      let betaj = 0;\r\n\r\n      for (let l = 0; l < bridge.i.length; ++l) {\r\n        if (this._betaPartners[bridge.i[l]][0]) {\r\n          betai = 1;\r\n          break;\r\n        }\r\n      }\r\n\r\n      for (let l = 0; l < bridge.j.length; ++l) {\r\n        if (this._betaPartners[bridge.j[l]][0]) {\r\n          betaj = 1;\r\n          break;\r\n        }\r\n      }\r\n\r\n      let ss = StructureType.BRIDGE;\r\n      if (bridge.i.length > 1) {\r\n        ss = StructureType.STRAND;\r\n      }\r\n\r\n      if (bridge.type === BridgeType.PARALLEL) {\r\n        let j = 0;\r\n        for (let k = 0; k < bridge.i.length; ++k) {\r\n          this._betaPartners[bridge.i[k]][betai] = {\r\n            residue: bridge.j[j++],\r\n            ladder: bridge.ladder,\r\n            parallel: true,\r\n          };\r\n        }\r\n\r\n        j = 0;\r\n        for (let k = 0; k < bridge.j.length; ++k) {\r\n          this._betaPartners[bridge.j[k]][betaj] = {\r\n            residue: bridge.i[j++],\r\n            ladder: bridge.ladder,\r\n            parallel: true,\r\n          };\r\n        }\r\n      } else {\r\n        let j = bridge.j.length - 1;\r\n        for (let k = 0; k < bridge.i.length; ++k) {\r\n          this._betaPartners[bridge.i[k]][betai] = {\r\n            residue: bridge.j[j--],\r\n            ladder: bridge.ladder,\r\n            parallel: false,\r\n          };\r\n        }\r\n\r\n        j = bridge.i.length - 1;\r\n        for (let k = 0; k < bridge.j.length; ++k) {\r\n          this._betaPartners[bridge.j[k]][betaj] = {\r\n            residue: bridge.i[j--],\r\n            ladder: bridge.ladder,\r\n            parallel: false,\r\n          };\r\n        }\r\n      }\r\n\r\n      for (let k = bridge.i[0]; k <= bridge.i[bridge.i.length - 1]; ++k) {\r\n        if (this._ss[k] !== StructureType.STRAND) {\r\n          this._ss[k] = ss;\r\n          this._sheet[k] = bridge.sheet;\r\n        }\r\n      }\r\n\r\n      for (let k = bridge.j[0]; k <= bridge.j[bridge.j.length - 1]; ++k) {\r\n        if (this._ss[k] !== StructureType.STRAND) {\r\n          this._ss[k] = ss;\r\n          this._sheet[k] = bridge.sheet;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _testBridge(chainA, from, chainB, to) {\r\n    let result = BridgeType.NO_BRIDGE;\r\n\r\n    const a = chainA[from - 1]._index;\r\n    const b = chainA[from]._index;\r\n    const c = chainA[from + 1]._index;\r\n    const d = chainB[to - 1]._index;\r\n    const e = chainB[to]._index;\r\n    const f = chainB[to + 1]._index;\r\n\r\n    const isBond = this._hbonds.isBond.bind(this._hbonds);\r\n    if ((isBond(c, e) && isBond(e, a)) || (isBond(f, b) && isBond(b, d))) {\r\n      result = BridgeType.PARALLEL;\r\n    } else if ((isBond(c, d) && isBond(f, a)) || (isBond(e, b) && isBond(b, e))) {\r\n      result = BridgeType.ANTI_PARALLEL;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // return true if any of the residues in bridge a is identical to any of the residues in bridge b\r\n  _areBridgesLinked(a, b) {\r\n    const ai = new Set(a.i);\r\n    const aj = new Set(a.j);\r\n\r\n    for (const i of b.i) {\r\n      if (ai.has(i) || aj.has(i)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    for (const i of b.j) {\r\n      if (ai.has(i) || aj.has(i)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  _hasChainBreak(from, to) {\r\n    for (let i = from + 1; i <= to; ++i) {\r\n      if (this._complex._residues[i]._sequence !== this._complex._residues[i - 1]._sequence + 1) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nSecondaryStructureMap.StructureType = StructureType;\r\n","import * as THREE from 'three';\r\nimport logger from '../utils/logger';\r\nimport Atom from './Atom';\r\nimport Chain from './Chain';\r\nimport Helix from './Helix';\r\nimport Strand from './Strand';\r\nimport Sheet from './Sheet';\r\nimport Component from './Component';\r\nimport ResidueType from './ResidueType';\r\nimport Bond from './Bond';\r\nimport AutoBond from './AutoBond';\r\nimport AromaticLoopsMarker from './AromaticLoopsMarker';\r\nimport BiologicalUnit from './BiologicalUnit';\r\nimport selectors from './selectors';\r\nimport VoxelWorld from './VoxelWorld';\r\nimport SecondaryStructureMap from './SecondaryStructureMap';\r\nimport StructuralElement from './StructuralElement';\r\n\r\nconst VOXEL_SIZE = 5.0;\r\n\r\nconst { StructureType } = SecondaryStructureMap;\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\n// see http://www.wwpdb.org/documentation/file-format-content/format33/sect5.html#HELIX\r\nconst helixClassMap = {\r\n  [StructureType.HELIX_ALPHA]: 1,\r\n  [StructureType.HELIX_PI]: 3,\r\n  [StructureType.HELIX_310]: 5,\r\n};\r\n\r\nconst loopMap = {\r\n  [StructureType.BRIDGE]: StructuralElementType.BRIDGE,\r\n  [StructureType.TURN]: StructuralElementType.TURN,\r\n  [StructureType.BEND]: StructuralElementType.BEND,\r\n  [StructureType.LOOP]: StructuralElementType.COIL,\r\n};\r\n\r\n/**\r\n * The entire complex of the molecules under study.\r\n *\r\n * @exports Complex\r\n * @constructor\r\n */\r\nclass Complex {\r\n  constructor() {\r\n    this._chains = [];\r\n    this._components = [];\r\n    this._helices = [];\r\n    this._sheets = [];\r\n    this.structures = [];\r\n\r\n    this._residueTypes = Object.create(ResidueType.StandardTypes);\r\n    this._atoms = [];\r\n    this._residues = [];\r\n    this._bonds = [];\r\n    this._sgroups = [];\r\n    this._molecules = [];\r\n    this._maskNeedsUpdate = false;\r\n\r\n    this.metadata = {};\r\n\r\n    this.symmetry = [];\r\n    this.units = [new BiologicalUnit(this)];\r\n    this._currentUnit = 0; // default biological unit is the asymmetric unit\r\n  }\r\n\r\n  addAtom(atom) {\r\n    const index = this._atoms.length;\r\n    this._atoms.push(atom);\r\n    return index;\r\n  }\r\n\r\n  addSheet(sheet) {\r\n    const index = this._sheets.length;\r\n    this._sheets.push(sheet);\r\n    return index;\r\n  }\r\n\r\n  addHelix(helix) {\r\n    const index = this._helices.length;\r\n    this._helices.push(helix);\r\n    return index;\r\n  }\r\n\r\n  getAtoms() {\r\n    return this._atoms;\r\n  }\r\n\r\n  getBonds() {\r\n    return this._bonds;\r\n  }\r\n\r\n  getAtomCount() {\r\n    return this._atoms.length;\r\n  }\r\n\r\n  addResidue(residue) {\r\n    const index = this._residues.length;\r\n    this._residues.push(residue);\r\n    return index;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    this.forEachChain((chain) => {\r\n      chain.updateToFrame(frameData);\r\n    });\r\n  }\r\n\r\n  addResidueType(resName) {\r\n    const rt = this._residueTypes[resName] = new ResidueType(resName, 'Unknown', '');\r\n    return rt;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residues.length;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._residues;\r\n  }\r\n\r\n  getSGroupCount() {\r\n    return this._sgroups.length;\r\n  }\r\n\r\n  getSGroups() {\r\n    return this._sgroups;\r\n  }\r\n\r\n  /*\r\n     Extract atom by its fullname: #chainName#.#residueId#.#atomName#\r\n     */\r\n  getAtomByFullname(fullName) {\r\n    const parts = fullName.split('.');\r\n    if (parts.length !== 3) {\r\n      return null;\r\n    }\r\n\r\n    const chainName = parts[0];\r\n    const resId = parseInt(parts[1], 10);\r\n    if (Number.isNaN(resId)) {\r\n      return null;\r\n    }\r\n    const atomName = parts[2].toUpperCase();\r\n\r\n    let currAtom = null;\r\n    this.forEachChain((chain) => {\r\n      if (currAtom) {\r\n        return;\r\n      }\r\n      if (chain._name.localeCompare(chainName) === 0) {\r\n        chain.forEachResidue((residue) => {\r\n          if (currAtom) {\r\n            return;\r\n          }\r\n          if (residue._sequence === resId) {\r\n            residue.forEachAtom((atom) => {\r\n              if (currAtom) {\r\n                return;\r\n              }\r\n              if (atomName.localeCompare(atom.name) === 0) {\r\n                currAtom = atom;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return currAtom;\r\n  }\r\n\r\n  /**\r\n   * Create a new chain.\r\n   *\r\n   * @param {string} name - Chain name.\r\n   * @returns {Chain} - Newly created chain.\r\n   */\r\n  addChain(name) {\r\n    const result = new Chain(this, name);\r\n    this._chains.push(result);\r\n    return result;\r\n  }\r\n\r\n  getChain(name) {\r\n    for (let i = 0, n = this._chains.length; i < n; ++i) {\r\n      const chain = this._chains[i];\r\n      if (chain.getName() === name) {\r\n        return chain;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getChainCount() {\r\n    return this._chains.length;\r\n  }\r\n\r\n  getMolecules() {\r\n    return this._molecules;\r\n  }\r\n\r\n  getMoleculeCount() {\r\n    return this._molecules.length;\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      process(atoms[i]);\r\n    }\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const bonds = this._bonds;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]);\r\n    }\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  forEachChain(process) {\r\n    const chains = this._chains;\r\n    for (let i = 0, n = chains.length; i < n; ++i) {\r\n      process(chains[i]);\r\n    }\r\n  }\r\n\r\n  forEachMolecule(process) {\r\n    const molecules = this._molecules;\r\n    const n = molecules.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      process(molecules[i]);\r\n    }\r\n  }\r\n\r\n  forEachSGroup(process) {\r\n    const groups = this._sgroups;\r\n    for (let i = 0, n = groups.length; i < n; ++i) {\r\n      process(groups[i]);\r\n    }\r\n  }\r\n\r\n  forEachComponent(process) {\r\n    const components = this._components;\r\n    for (let i = 0, n = components.length; i < n; ++i) {\r\n      process(components[i]);\r\n    }\r\n  }\r\n\r\n  forEachVisibleComponent(process) {\r\n    const components = this._components;\r\n    for (let i = 0, n = components.length; i < n; ++i) {\r\n      process(components[i]);\r\n    }\r\n  }\r\n\r\n  addBond(left, right, order, type, fixed) {\r\n    const bond = new Bond(left, right, order, type, fixed);\r\n    this._bonds.push(bond);\r\n    return bond;\r\n  }\r\n\r\n  getBondCount() {\r\n    return this._bonds.length;\r\n  }\r\n\r\n  getResidueType(name) {\r\n    return this._residueTypes[name] || null;\r\n  }\r\n\r\n  getUnifiedSerial(chain, serial, iCode) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const maxSerial = 65536;\r\n    const chainShift = maxSerial * 256;\r\n    /* eslint-enable no-magic-numbers */\r\n    return serial + iCode * maxSerial + chain * chainShift;\r\n  }\r\n\r\n  splitUnifiedSerial(uniSerial) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const maxSerial = 65536;\r\n    const chainShift = maxSerial * 256;\r\n    /* eslint-enable no-magic-numbers */\r\n    const chainId = Math.floor(uniSerial / chainShift);\r\n    const remnant = uniSerial - chainId * chainShift;\r\n    const insCode = Math.floor(remnant / maxSerial);\r\n    const ser = remnant - insCode * maxSerial;\r\n    return { chain: chainId, serial: ser, iCode: insCode };\r\n  }\r\n\r\n  _fillCmpEdit() {\r\n    const self = this;\r\n    const components = this._components;\r\n\r\n    function addComp() {\r\n      const comp = new Component(self);\r\n      comp._index = components.length;\r\n      components[comp._index] = comp;\r\n      return comp;\r\n    }\r\n\r\n    this.forEachChain((chain) => {\r\n      const residues = chain._residues;\r\n      const resCount = residues.length;\r\n      if (resCount < 1) {\r\n        return;\r\n      }\r\n      let comp = addComp();\r\n      let currStart = residues[0]._index;\r\n\r\n      for (let i = 0; i < resCount; ++i) {\r\n        const currRes = residues[i];\r\n        currRes._component = comp;\r\n\r\n        const nextRes = i === resCount - 1 ? null : residues[i + 1];\r\n        if (!nextRes\r\n          || !currRes.isConnected(nextRes)\r\n          || currRes._index !== nextRes._index - 1) {\r\n          // the last condition is broken and incorrect\r\n          // the refactoring of the Component is required in order to fix this issue\r\n          comp.setSubDivs([{\r\n            start: currStart,\r\n            end: currRes._index,\r\n          }]);\r\n          if (nextRes) {\r\n            currStart = nextRes._index;\r\n            comp = addComp();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // This function was added in the moment of despair\r\n  // It was the dark times for miew\r\n  _fillCmpNoedit() {\r\n    const comp = new Component(this);\r\n    comp._index = 0;\r\n\r\n    const residues = this._residues;\r\n    const resCount = residues.length;\r\n    if (resCount === 0) {\r\n      return;\r\n    }\r\n\r\n    const currSubDivs = [];\r\n    let currStart = 0;\r\n    for (let i = 0; i < resCount; ++i) {\r\n      const currRes = residues[i];\r\n      currRes._component = comp;\r\n\r\n      const nextRes = i === resCount - 1 ? null : residues[i + 1];\r\n      if (!nextRes\r\n        || !currRes.isConnected(nextRes)) {\r\n        // wrap up this interval\r\n        currSubDivs[currSubDivs.length] = {\r\n          start: currStart,\r\n          end: i,\r\n        };\r\n        if (nextRes) {\r\n          currStart = i + 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    comp.setSubDivs(currSubDivs);\r\n    this._components[comp._index] = comp;\r\n  }\r\n\r\n  /**\r\n   * Fill components information.\r\n   * @param {boolean} enableEditing - Restructure Complex to enable per-component editing.\r\n   */\r\n  _fillComponents(enableEditing) {\r\n    if (enableEditing) {\r\n      this._fillCmpEdit();\r\n    } else {\r\n      this._fillCmpNoedit();\r\n    }\r\n  }\r\n\r\n  getCurrentUnit() {\r\n    return this._currentUnit;\r\n  }\r\n\r\n  getDefaultBoundaries() {\r\n    return this.units[0].getBoundaries();\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this.units[this._currentUnit].getBoundaries();\r\n  }\r\n\r\n  getTransforms() {\r\n    return this.units[this._currentUnit].getTransforms();\r\n  }\r\n\r\n  getSelector() {\r\n    return this.units[this._currentUnit].getSelector();\r\n  }\r\n\r\n  resetCurrentUnit() {\r\n    this._currentUnit = 0;\r\n    this.setCurrentUnit(1);\r\n  }\r\n\r\n  setCurrentUnit(newUnit) {\r\n    if (newUnit !== null && newUnit !== undefined\r\n      && newUnit !== this._currentUnit\r\n      && newUnit >= 0\r\n      && newUnit < this.units.length) {\r\n      this._currentUnit = newUnit;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _computeBounds() {\r\n    const { units } = this;\r\n    for (let i = 0, n = units.length; i < n; ++i) {\r\n      units[i].computeBoundaries();\r\n    }\r\n  }\r\n\r\n  onAtomPositionChanged() {\r\n    this.forEachChain((a) => {\r\n      a._finalize();\r\n    });\r\n    this.forEachComponent((c) => {\r\n      c.update();\r\n    });\r\n    // Update bounding sphere and box\r\n    this._computeBounds();\r\n    this._finalizeBonds();\r\n    this.forEachSGroup((s) => {\r\n      s._rebuildSGroupOnAtomChange();\r\n    });\r\n  }\r\n\r\n  update() {\r\n    if (this._maskNeedsUpdate) {\r\n      this.updateStructuresMask();\r\n      this._maskNeedsUpdate = false;\r\n    }\r\n  }\r\n\r\n  _finalizeBonds() {\r\n    const bonds = this.getBonds();\r\n    const n = bonds.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      bonds[i]._index = i;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finalizes complex's inner data(i.e. after parsing).\r\n   * @param {objects} opts - Build bonds automatically.\r\n   * @param {boolean} opts.needAutoBonding     - Build bonds automatically.\r\n   * @param {boolean} opts.detectAromaticLoops - Find/mark aromatic loops.\r\n   * @param {boolean} opts.enableEditing       - Restructure Complex to enable per-component editing.\r\n   * @param {Array<Atom>} [opts.serialAtomMap] - Array of atoms ordered by their serials.\r\n   */\r\n  finalize(opts) {\r\n    opts = opts || {};\r\n    // Put bonds into atoms\r\n    const bonds = this._bonds;\r\n    let i;\r\n    let n;\r\n    // remove invalid bonds\r\n    for (i = bonds.length - 1; i >= 0; i--) {\r\n      const bond = bonds[i];\r\n      if (bond._left === null || bond._right === null) {\r\n        bonds.splice(i, 1);\r\n      } else {\r\n        bond._left.bonds.push(bond);\r\n        bond._right.bonds.push(bond);\r\n      }\r\n    }\r\n\r\n    const residues = this._residues;\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      residues[i]._finalize();\r\n    }\r\n\r\n    this.forEachChain((a) => {\r\n      a._finalize();\r\n    });\r\n\r\n    // WARNING! this MUST be done BEFORE computeBounds is called\r\n    const { units } = this;\r\n    for (i = 0, n = units.length; i < n; ++i) {\r\n      units[i].finalize();\r\n    }\r\n    // try setting first biomolecule by defaults\r\n    this.setCurrentUnit(1);\r\n\r\n    const residueHash = {};\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      const res = residues[i];\r\n      // This code is extremely dangerous for non-PDB formats\r\n      residueHash[this.getUnifiedSerial(\r\n        res.getChain().getName().charCodeAt(0),\r\n        res.getSequence(), res.getICode().charCodeAt(0),\r\n      )] = res;\r\n    }\r\n\r\n    const { structures } = this;\r\n    for (i = 0, n = structures.length; i < n; ++i) {\r\n      structures[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    const helices = this._helices;\r\n    for (i = 0, n = helices.length; i < n; ++i) {\r\n      helices[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    const sheets = this._sheets;\r\n    for (i = 0, n = sheets.length; i < n; ++i) {\r\n      sheets[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    // Update bounding sphere and box\r\n    this._computeBounds();\r\n\r\n    const atoms = this._atoms;\r\n    for (i = 0, n = atoms.length; i < n; ++i) {\r\n      const currAtom = atoms[i];\r\n      currAtom.index = i;\r\n    }\r\n\r\n    if (opts.needAutoBonding) {\r\n      const autoConnector = new AutoBond(this);\r\n      autoConnector.build();\r\n      autoConnector.destroy();\r\n    }\r\n\r\n    const chains = this._chains;\r\n    for (i = 0, n = chains.length; i < n; ++i) {\r\n      chains[i]._index = i;\r\n    }\r\n\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      residues[i]._index = i;\r\n    }\r\n\r\n    // mark non-polar hydrogens\r\n    for (i = 0, n = atoms.length; i < n; ++i) {\r\n      const atom = atoms[i];\r\n      if (atom.flags & Atom.Flags.HYDROGEN && atom.bonds.length === 1) {\r\n        const bond = atom.bonds[0];\r\n        const other = (bond._left !== atom && bond._left) || bond._right;\r\n        if (other.flags & Atom.Flags.CARBON) {\r\n          atom.flags |= Atom.Flags.NONPOLARH;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._finalizeBonds();\r\n    this._fillComponents(opts.enableEditing);\r\n\r\n    const marker = new AromaticLoopsMarker(this);\r\n    marker.markCycles();\r\n    if (opts.detectAromaticLoops) { // TODO remove this condition clause, it is for debug purposes only!\r\n      marker.detectCycles(); // TODO add conditional detection\r\n    }\r\n\r\n    this._finalizeMolecules();\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // add reference to molecule into residue\r\n    for (let i = 0; i < this._molecules.length; i++) {\r\n      const molecule = this._molecules[i];\r\n      const count = molecule.residues.length;\r\n      for (let j = 0; j < count; j++) {\r\n        const residue = molecule.residues[j];\r\n        residue._molecule = molecule;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateStructuresMask() {\r\n    const updater = (structure) => structure.collectMask();\r\n    this.forEachResidue(updater);\r\n    this.forEachChain(updater);\r\n    this.forEachMolecule(updater);\r\n  }\r\n\r\n  countAtomsByMask(mask) {\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if ((atom.mask & mask) !== 0) {\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  getNumAtomsBySelector(selector) {\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (selector.includesAtom(atom)) {\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  resetAtomMask(mask) {\r\n    this.forEachAtom((atom) => {\r\n      atom.mask = mask;\r\n    });\r\n  }\r\n\r\n  markAtoms(selector, mask) {\r\n    const setMask = mask;\r\n    const clearMask = ~setMask;\r\n    let count = 0;\r\n    const totalSelector = selectors.keyword('And')(selector, this.getSelector());\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (totalSelector.includesAtom(atom)) {\r\n        atom.mask |= setMask;\r\n        count++;\r\n      } else {\r\n        atom.mask &= clearMask;\r\n      }\r\n    });\r\n    this._maskNeedsUpdate = true;\r\n\r\n    return count;\r\n  }\r\n\r\n  markAtomsAdditionally(selector, mask) {\r\n    const setMask = mask;\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (selector.includesAtom(atom) && (atom.mask & mask) !== mask) {\r\n        atom.mask |= setMask;\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  clearAtomBits(mask) {\r\n    const clearMask = ~mask;\r\n    this.forEachAtom((atom) => {\r\n      atom.mask &= clearMask;\r\n    });\r\n    const reseter = (a) => {\r\n      a._mask &= clearMask;\r\n    };\r\n    this.forEachAtom(reseter);\r\n    this.forEachResidue(reseter);\r\n    this.forEachChain(reseter);\r\n    this.forEachMolecule(reseter);\r\n  }\r\n\r\n  getAtomNames() {\r\n    if (this.hasOwnProperty('_atomNames')) {\r\n      return this._atomNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[atom.name] = 1;\r\n    });\r\n    this._atomNames = Object.keys(dict);\r\n\r\n    return this._atomNames;\r\n  }\r\n\r\n  getElements() {\r\n    if (this.hasOwnProperty('_elements')) {\r\n      return this._elements;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[atom.element.name] = 1;\r\n    });\r\n    this._elements = Object.keys(dict);\r\n\r\n    return this._elements;\r\n  }\r\n\r\n  getResidueNames() {\r\n    if (this.hasOwnProperty('_residueNames')) {\r\n      return this._residueNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachResidue((res) => {\r\n      dict[res._type._name] = 1;\r\n    });\r\n    this._residueNames = Object.keys(dict);\r\n\r\n    return this._residueNames;\r\n  }\r\n\r\n  getChainNames() {\r\n    if (this.hasOwnProperty('_chainNames')) {\r\n      return this._chainNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachChain((chain) => {\r\n      dict[chain._name] = 1;\r\n    });\r\n    this._chainNames = Object.keys(dict);\r\n\r\n    return this._chainNames;\r\n  }\r\n\r\n  getAltLocNames() {\r\n    if (this.hasOwnProperty('_altlocNames')) {\r\n      return this._altlocNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[String.fromCharCode(atom.location)] = 1;\r\n    });\r\n    this._altlocNames = Object.keys(dict);\r\n\r\n    return this._altlocNames;\r\n  }\r\n\r\n  getVoxelWorld() {\r\n    if (!this.hasOwnProperty('_voxelWorld')) {\r\n      try {\r\n        this._voxelWorld = new VoxelWorld(\r\n          this.getDefaultBoundaries().boundingBox,\r\n          new THREE.Vector3(VOXEL_SIZE, VOXEL_SIZE, VOXEL_SIZE),\r\n        );\r\n        this._voxelWorld.addAtoms(this);\r\n      } catch (e) {\r\n        logger.warn('Unable to create voxel world');\r\n        this._voxelWorld = null;\r\n      }\r\n    }\r\n\r\n    return this._voxelWorld;\r\n  }\r\n\r\n  /**\r\n   * Simple function to make unified routine procedure without code duplication.\r\n   * @param {Array} srcArray   - Source chemical structure array (will be part of resulting chemical structure array).\r\n   * @param {Array} dstArray   - Resulting chemical structure array.\r\n   * @param {number} param     - Parameter for processor.\r\n   * @param {function} functor - Processor for every element in array.\r\n   */\r\n  addElement(srcArray, dstArray, param, functor) {\r\n    const { length } = srcArray;\r\n    for (let i = 0; i < length; ++i) {\r\n      const elem = srcArray[i];\r\n      functor(elem, param);\r\n      dstArray.push(elem);\r\n    }\r\n  }\r\n\r\n  // this function joins multiple complexes into one (this)\r\n  // atom, bond, ... objects are reused -- so input complexes are no longer valid\r\n  joinComplexes(complexes) {\r\n    // clear target complex\r\n    this._chains = [];\r\n    this._components = [];\r\n    this._helices = [];\r\n    this._sheets = [];\r\n    this.structures = [];\r\n    this._atoms = [];\r\n    this._residues = [];\r\n    this._bonds = [];\r\n    this._sgroups = [];\r\n\r\n    const self = this;\r\n    let atomBias = 0;\r\n    let bondBias = 0;\r\n    let residueBias = 0;\r\n    let chainBias = 0;\r\n    let componentBias = 0;\r\n\r\n    function processAtom(atom, bias) {\r\n      atom.serial += bias;\r\n      atom.index += bias;\r\n    }\r\n\r\n    function processBond(bond, bias) {\r\n      bond._index += bias;\r\n    }\r\n\r\n    function processResidue(residue, bias) {\r\n      residue._index += bias;\r\n    }\r\n\r\n    function processChain(chain, bias) {\r\n      chain._complex = self;\r\n      chain._index += bias;\r\n    }\r\n\r\n    function processComponent(component, bias) {\r\n      component._complex = self;\r\n      component._index += bias;\r\n    }\r\n\r\n    /**\r\n     * Simple function to do nothing.\r\n     */\r\n    function doNothing() {\r\n    }\r\n\r\n    for (let i = 0; i < complexes.length; ++i) {\r\n      const c = complexes[i];\r\n      this.addElement(c._atoms, this._atoms, atomBias, processAtom);\r\n      this.addElement(c._bonds, this._bonds, bondBias, processBond);\r\n      this.addElement(c._residues, this._residues, residueBias, processResidue);\r\n      this.addElement(c._chains, this._chains, chainBias, processChain);\r\n      this.addElement(c._sheets, this._sheets, 0, doNothing);\r\n      this.addElement(c._helices, this._helices, 0, doNothing);\r\n      this.addElement(c._sgroups, this._sgroups, 0, doNothing);\r\n      this.addElement(c._components, this._components, componentBias, processComponent);\r\n      this.addElement(c.structures, this.structures, 0, doNothing);\r\n      // merge residue types\r\n      for (const rt in c._residueTypes) {\r\n        if (c._residueTypes.hasOwnProperty(rt)) {\r\n          this._residueTypes[rt] = c._residueTypes[rt];\r\n        }\r\n      }\r\n\r\n      atomBias += c._atoms.length;\r\n      bondBias += c._bonds.length;\r\n      residueBias += c._residues.length;\r\n      chainBias += c._chains.length;\r\n      componentBias += c._components.length;\r\n    }\r\n\r\n    this._computeBounds();\r\n  }\r\n\r\n  /**\r\n   * Replace secondary structure with calculated one.\r\n   *\r\n   * DSSP algorithm implementation is used.\r\n   *\r\n   * Kabsch W, Sander C. 1983. Dictionary of protein secondary structure: pattern recognition of hydrogen-bonded and\r\n   * geometrical features. Biopolymers. 22(12):2577-2637. doi:10.1002/bip.360221211.\r\n   */\r\n  dssp() {\r\n    const ssMap = new SecondaryStructureMap(this);\r\n\r\n    const structures = this.structures = [];\r\n    const helices = this._helices = [];\r\n    const sheets = this._sheets = [];\r\n\r\n    const getSheet = (index) => {\r\n      let item = sheets[index];\r\n      if (!item) {\r\n        item = sheets[index] = new Sheet(String(index), 0);\r\n      }\r\n      return item;\r\n    };\r\n\r\n    let lastCode;\r\n    let lastSheetIndex;\r\n    let lastHelixIndex = 0;\r\n    let curStructure = null;\r\n    for (let i = 0, n = this._residues.length; i < n; ++i) {\r\n      const curCode = ssMap._ss[i];\r\n      const curResidue = this._residues[i];\r\n      const curSheetIndex = ssMap._sheet[i];\r\n\r\n      // expand the last structure\r\n      if (curCode === lastCode && curSheetIndex === lastSheetIndex) {\r\n        curResidue._secondary = curStructure;\r\n        if (curStructure) {\r\n          curStructure.term = curResidue;\r\n        }\r\n        if (curStructure instanceof Helix) {\r\n          curStructure.length++;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      // create a new structure\r\n      const helixClass = helixClassMap[curCode];\r\n      const loopType = loopMap[curCode];\r\n      if (curCode === StructureType.STRAND) {\r\n        const curSheet = getSheet(curSheetIndex);\r\n        curStructure = new Strand(curSheet, curResidue, curResidue, 0, null, null);\r\n        curSheet.addStrand(curStructure);\r\n      } else if (helixClass !== undefined) {\r\n        lastHelixIndex++;\r\n        curStructure = new Helix(helixClass, curResidue, curResidue, lastHelixIndex, String(lastHelixIndex), '', 1);\r\n        helices.push(curStructure);\r\n      } else if (loopType !== undefined) {\r\n        curStructure = new StructuralElement(loopType, curResidue, curResidue);\r\n      } else {\r\n        curStructure = null;\r\n      }\r\n\r\n      if (curStructure) {\r\n        structures.push(curStructure);\r\n      }\r\n\r\n      curResidue._secondary = curStructure;\r\n\r\n      lastCode = curCode;\r\n      lastSheetIndex = curSheetIndex;\r\n    }\r\n\r\n    this._sheets = sheets.filter((_sheet) => true); // squeeze sheets array\r\n  }\r\n}\r\n\r\nComplex.prototype.id = 'Complex';\r\nComplex.prototype.name = '';\r\n\r\nexport default Complex;\r\n","import * as THREE from 'three';\r\nimport utils from '../utils';\r\n\r\nfunction pow2ceil(v) {\r\n  let p = 2;\r\n  v = (v - 1) >> 1;\r\n  while (v) {\r\n    p <<= 1;\r\n    v >>= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\n/**\r\n * Volume constructor\r\n *\r\n * @param {Object} type - Float32Array, Int8Array, etc...\r\n * @param {Object|Array} dimensions - number of data points on each axis (x, y, z)\r\n * @param {Box3} box - bounding box defining data place in metric space,\r\n *                     it's corners correspond to extreme data points\r\n * @param {Number} vecSize - dimension of the field data point (1 = scalar, 3 = 3D vector)\r\n * @param {Object} data - typed array of the same type as specified by the 1st parameter,\r\n *                        layout: point by point along X,\r\n *                                row by row along Y,\r\n *                                plane by plane along Z\r\n * @param {Number} volumeInfo - volume info values to define threshold to filter the noise\r\n */\r\n\r\nclass Volume {\r\n  constructor(type, dimensions, box, vecSize, data, volumeInfo) {\r\n    this._box = box.clone();\r\n    this._dimVec = Math.max(Math.floor(vecSize || 1), 1);\r\n    this._volumeInfo = volumeInfo;\r\n\r\n    if (dimensions instanceof Array) {\r\n      [this._dimX, this._dimY, this._dimZ] = dimensions;\r\n    } else {\r\n      this._dimX = dimensions.x;\r\n      this._dimY = dimensions.y;\r\n      this._dimZ = dimensions.z;\r\n    }\r\n    this._dimX = Math.max(Math.floor(this._dimX), 1);\r\n    this._dimY = Math.max(Math.floor(this._dimY), 1);\r\n    this._dimZ = Math.max(Math.floor(this._dimZ), 1);\r\n\r\n    this._rowElements = this._dimVec * this._dimX;\r\n    this._planeElements = this._rowElements * this._dimY;\r\n    this._totalElements = this._planeElements * this._dimZ;\r\n\r\n    this._data = data || utils.allocateTyped(type, this._totalElements);\r\n\r\n    // override getter/setter for vector fields\r\n    switch (this._dimVec) {\r\n      case 1:\r\n        break;\r\n\r\n      case 2:\r\n        this.getValue = function (x, y, z) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          return [this._data[idx], this._data[idx + 1]];\r\n        };\r\n\r\n        this.setValue = function (x, y, z, a, b) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] = a;\r\n          this._data[idx + 1] = b;\r\n        };\r\n\r\n        this.addValue = function (x, y, z, a, b) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] += a;\r\n          this._data[idx + 1] += b;\r\n        };\r\n        break;\r\n\r\n      case 3:\r\n        this.getValue = function (x, y, z) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          return [this._data[idx], this._data[idx + 1], this._data[idx + 2]];\r\n        };\r\n\r\n        this.setValue = function (x, y, z, a, b, c) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] = a;\r\n          this._data[idx + 1] = b;\r\n          this._data[idx + 2] = c;\r\n        };\r\n\r\n        this.addValue = function (x, y, z, a, b, c) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] += a;\r\n          this._data[idx + 1] += b;\r\n          this._data[idx + 2] += c;\r\n        };\r\n        break;\r\n\r\n      default:\r\n        throw new Error('Volume: invalid vector dimension');\r\n    }\r\n  }\r\n\r\n  // default getter assumes it's a scalar field\r\n  getValue(x, y, z) {\r\n    return this._data[x + y * this._rowElements + z * this._planeElements];\r\n  }\r\n\r\n  // default setter assumes it's a scalar field\r\n  setValue(x, y, z, val) {\r\n    this._data[x + y * this._rowElements + z * this._planeElements] = val;\r\n  }\r\n\r\n  // default adder assumes it's a scalar field\r\n  addValue(x, y, z, val) {\r\n    this._data[x + y * this._rowElements + z * this._planeElements] += val;\r\n  }\r\n\r\n  getDimensions() {\r\n    return [this._dimX, this._dimY, this._dimZ];\r\n  }\r\n\r\n  getBox() {\r\n    return this._box;\r\n  }\r\n\r\n  getVolumeInfo() {\r\n    return this._volumeInfo;\r\n  }\r\n\r\n  getCellSize() {\r\n    const boxSize = new THREE.Vector3();\r\n    this._box.getSize(boxSize);\r\n    const res = new THREE.Vector3();\r\n    res.x = this._dimX > 1 ? boxSize.x / (this._dimX - 1) : 0;\r\n    res.y = this._dimY > 1 ? boxSize.y / (this._dimY - 1) : 0;\r\n    res.z = this._dimZ > 1 ? boxSize.z / (this._dimZ - 1) : 0;\r\n    return res;\r\n  }\r\n\r\n  computeGradient() {\r\n    if (this._dimVec !== 1) {\r\n      // gradient can only be computed for scalar fields\r\n      return null;\r\n    }\r\n\r\n    // create a 3D vector field of gradients\r\n    const gradient = new Volume(Float32Array, [this._dimX, this._dimY, this._dimZ], this._box, 3);\r\n\r\n    // calculate cell side lengths\r\n    const vl = this.getCellSize();\r\n\r\n    // gradient axis scaling values and averaging factors, to correctly\r\n    // calculate the gradient for volumes with irregular cell spacing\r\n    const vs = new THREE.Vector3(-0.5 / vl.x, -0.5 / vl.y, -0.5 / vl.z);\r\n\r\n    // TODO Check for intended bug in VMD (min is zero)\r\n    function clamp(val, min, max) {\r\n      return Math.min(max, Math.max(min, val));\r\n    }\r\n\r\n    const xSize = this._dimX;\r\n    const ySize = this._dimY;\r\n    const zSize = this._dimZ;\r\n    const volMap = this._data;\r\n\r\n    function _voxelValue(x, y, z) {\r\n      return volMap[z * xSize * ySize + y * xSize + x];\r\n    }\r\n\r\n    for (let zi = 0; zi < zSize; ++zi) {\r\n      const zm = clamp(zi - 1, 0, zSize - 1);\r\n      const zp = clamp(zi + 1, 0, zSize - 1);\r\n\r\n      for (let yi = 0; yi < ySize; ++yi) {\r\n        const ym = clamp(yi - 1, 0, ySize - 1);\r\n        const yp = clamp(yi + 1, 0, ySize - 1);\r\n\r\n        for (let xi = 0; xi < xSize; ++xi) {\r\n          const xm = clamp(xi - 1, 0, xSize - 1);\r\n          const xp = clamp(xi + 1, 0, xSize - 1);\r\n\r\n          // Calculate the volume gradient at each grid cell.\r\n          // Gradients are now stored unnormalized, since we need them in pure\r\n          // form in order to draw field lines etc.  Shading code will now have\r\n          // to do renormalization for itself on-the-fly.\r\n\r\n          // XXX this gradient is only correct for orthogonal grids, since\r\n          // we're using the array index offsets rather to calculate the gradient\r\n          // rather than voxel coordinate offsets.  This will have to be\r\n          // re-worked for non-orthogonal datasets.\r\n\r\n          gradient.setValue(\r\n            xi, yi, zi,\r\n            (_voxelValue(xp, yi, zi) - _voxelValue(xm, yi, zi)) * vs.x,\r\n            (_voxelValue(xi, yp, zi) - _voxelValue(xi, ym, zi)) * vs.y,\r\n            (_voxelValue(xi, yi, zp) - _voxelValue(xi, yi, zm)) * vs.z,\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    return gradient;\r\n  }\r\n\r\n  normalize() {\r\n    const data = this._data;\r\n\r\n    // get min/max\r\n    let min = data[0];\r\n    let max = data[0];\r\n    for (let i = 1; i < data.length; ++i) {\r\n      min = Math.min(min, data[i]);\r\n      max = Math.max(max, data[i]);\r\n    }\r\n\r\n    const d = 1.0 / (max - min);\r\n    if (d === 0) {\r\n      return;\r\n    }\r\n\r\n    // normalize\r\n    for (let i = 0; i < data.length; ++i) {\r\n      data[i] = d * (data[i] - min);\r\n    }\r\n  }\r\n\r\n  getTiledTextureStride() {\r\n    return [this._dimX + 2, this._dimY + 2];\r\n  }\r\n\r\n  buildTiledTexture() {\r\n    let tilesX = Math.ceil(Math.sqrt(this._dimZ * this._dimY / this._dimX));\r\n\r\n    let width = tilesX * (this._dimX + 2) - 1;\r\n    width = pow2ceil(width);\r\n    tilesX = Math.floor(width / (this._dimX + 2));\r\n\r\n    const tilesY = Math.ceil(this._dimZ / tilesX);\r\n    let height = tilesY * (this._dimY + 2) - 1;\r\n    height = pow2ceil(height);\r\n\r\n    const data = new Uint8Array(width * height);\r\n\r\n    let src;\r\n    let dst;\r\n    for (let tileRow = 0; tileRow < tilesY; ++tileRow) {\r\n      // process each pixel row of this tile row\r\n      for (let row = 0; row < this._dimY; ++row) {\r\n        src = tileRow * tilesX * this._planeElements + row * this._rowElements;\r\n        dst = width * (tileRow * (this._dimY + 2) + row);\r\n        // copy a series of rows through several XY planes\r\n        for (let t = 0; t < tilesX; ++t) {\r\n          // copy one row of one XY plane\r\n          for (let x = 0; x < this._dimX; ++x) {\r\n            data[dst++] = 255.0 * this._data[src++];\r\n          }\r\n\r\n          // repeat last pixel of previous tile\r\n          data[dst++] = 255.0 * this._data[src - 1];\r\n\r\n          if (t < tilesX - 1) {\r\n            // skip to the same row of next XY plane\r\n            src += this._planeElements - this._rowElements;\r\n            // repeat first pixel of next tile\r\n            data[dst++] = 255.0 * this._data[src];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // fill pixels between tile rows with copy of edge pixels\r\n    for (let tileRow = 0; tileRow < tilesY; ++tileRow) {\r\n      // copy last pixel row of this tile row to the following pixel row of the texture\r\n      src = width * (tileRow * (this._dimY + 2) + this._dimY - 1);\r\n      dst = src + width;\r\n      for (let x = 0; x < width; ++x) {\r\n        data[dst++] = data[src++];\r\n      }\r\n      if (tileRow < tilesY - 1) {\r\n        // copy first pixel row of next tile row to the preceding pixel row of the texture\r\n        src = width * (tileRow + 1) * (this._dimY + 2);\r\n        dst = src - width;\r\n        for (let x = 0; x < width; ++x) {\r\n          data[dst++] = data[src++];\r\n        }\r\n      }\r\n    }\r\n\r\n    const texture = new THREE.DataTexture(\r\n      data, width, height, THREE.LuminanceFormat, THREE.UnsignedByteType,\r\n      THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping, THREE.LinearFilter, THREE.LinearFilter,\r\n    );\r\n    texture.needsUpdate = true;\r\n    return texture;\r\n  }\r\n\r\n  /* ********************************************************************************\r\n   *\r\n   * Methods that provide direct access to internal array (for better performance)\r\n   *\r\n   ******************************************************************************** */\r\n\r\n  getData() {\r\n    return this._data;\r\n  }\r\n\r\n  getDirectIdx(x, y, z) {\r\n    return x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n  }\r\n\r\n  getStrideX() {\r\n    return this._dimVec;\r\n  }\r\n\r\n  getStrideY() {\r\n    return this._rowElements;\r\n  }\r\n\r\n  getStrideZ() {\r\n    return this._planeElements;\r\n  }\r\n}\r\n\r\nVolume.prototype.id = 'Volume';\r\n\r\nexport default Volume;\r\n","/**\r\n * Residue Molecule.\r\n *\r\n * @param {Complex} complex - Molecular complex this Molecule belongs to.\r\n * @param {String} name - Molecule's name.\r\n * @param {Integer} index - Molecule's index in file.\r\n *\r\n * @exports Molecule\r\n * @constructor\r\n */\r\nclass Molecule {\r\n  constructor(complex, name, index) {\r\n    this.complex = complex;\r\n    this.name = name || '';\r\n    this.residues = [];\r\n    this.mask = 1 | 0;\r\n    this.index = index || -1; // start with 1\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const { residues } = this;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const { residues } = this;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      mask &= residues[i]._mask;\r\n    }\r\n    this.mask = mask;\r\n  }\r\n}\r\n\r\nexport default Molecule;\r\n","import Atom from './chem/Atom';\r\nimport Element from './chem/Element';\r\nimport Bond from './chem/Bond';\r\nimport Residue from './chem/Residue';\r\nimport ResidueType from './chem/ResidueType';\r\nimport Chain from './chem/Chain';\r\nimport Helix from './chem/Helix';\r\nimport Strand from './chem/Strand';\r\nimport Sheet from './chem/Sheet';\r\nimport SGroup from './chem/SGroup';\r\nimport Assembly from './chem/Assembly';\r\nimport Complex from './chem/Complex';\r\nimport Volume from './chem/Volume';\r\nimport VoxelWorld from './chem/VoxelWorld';\r\nimport selectors from './chem/selectors';\r\nimport Molecule from './chem/Molecule';\r\n\r\nexport default {\r\n  Atom,\r\n  Element,\r\n  Bond,\r\n  Residue,\r\n  ResidueType,\r\n  Chain,\r\n  Helix,\r\n  Strand,\r\n  Sheet,\r\n  SGroup,\r\n  Assembly,\r\n  Complex,\r\n  Volume,\r\n  VoxelWorld,\r\n  selectors,\r\n  Molecule,\r\n};\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\n\r\nclass CSS2DObject extends THREE.Object3D {\r\n  constructor(element) {\r\n    super();\r\n    const self = this;\r\n    this._element = element;\r\n    this._element.style.position = 'absolute';\r\n    this.addEventListener('removed', () => {\r\n      if (self._element.parentNode !== null) {\r\n        self._element.parentNode.removeChild(self._element);\r\n      }\r\n    });\r\n  }\r\n\r\n  getElement() {\r\n    return this._element;\r\n  }\r\n\r\n  /**\r\n   * Sets label transparency.\r\n   *\r\n   * @param {number} transp    - in [0; 1] 1 means fully transparent\r\n   */\r\n  setTransparency(transp) {\r\n    const el = this.getElement();\r\n    if (el === null) {\r\n      return;\r\n    }\r\n    if (transp === 1.0) {\r\n      el.style.display = 'none';\r\n      return;\r\n    }\r\n    el.style.display = 'inline';\r\n    const op = 1.0 - transp;\r\n    const top = op.toString();\r\n    const op100 = op * 100;\r\n    el.style.opacity = top;\r\n    el.style.filter = `alpha(opacity=${op100})`; // IE fallback\r\n  }\r\n\r\n  clone() {\r\n    const obj = new CSS2DObject(this._element);\r\n    obj.copy(this);\r\n    return obj;\r\n  }\r\n}\r\n\r\n\r\nexport default CSS2DObject;\r\n","import * as THREE from 'three';\r\n\r\nclass RCGroup extends THREE.Group {\r\n  raycast(raycaster, intersects) {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      children[i].raycast(raycaster, intersects);\r\n    }\r\n  }\r\n\r\n  enableSubset(mask, innerOnly) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].enableSubset) {\r\n        children[i].enableSubset(mask, innerOnly);\r\n      }\r\n    }\r\n  }\r\n\r\n  disableSubset(mask, innerOnly) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].disableSubset) {\r\n        children[i].disableSubset(mask, innerOnly);\r\n      }\r\n    }\r\n  }\r\n\r\n  isEmpty() {\r\n    return this.children.length === 0;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].updateToFrame) {\r\n        children[i].updateToFrame(frameData);\r\n      }\r\n    }\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        Array.prototype.push.apply(totalSubset, children[i].getSubset(mask, innerOnly));\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default RCGroup;\r\n","export default {\r\n\r\n  precision: 'mediump',\r\n\r\n  /**\r\n   *\r\n   * @param {THREE.WebGLRenderer} renderer\r\n   */\r\n  init(renderer) {\r\n    this.precision = renderer.capabilities.getMaxPrecision('highp');\r\n  },\r\n};\r\n","import * as THREE from 'three';\r\n\r\nconst noiseWidth = 4;\r\nconst noiseHeight = 4;\r\nconst _noiseData = new Uint8Array([\r\n  24, 52, 0, 254, 145, 0, 122, 0, 0, 7, 170, 0,\r\n  34, 214, 0, 173, 8, 0, 86, 249, 0, 160, 4, 0,\r\n  226, 46, 0, 224, 211, 0, 3, 157, 0, 174, 247, 0,\r\n  12, 182, 0, 220, 216, 0, 1, 109, 0, 253, 154, 0,\r\n]);\r\nconst _noiseWrapS = THREE.RepeatWrapping;\r\nconst _noiseWrapT = THREE.RepeatWrapping;\r\nconst _noiseMinFilter = THREE.NearestFilter;\r\nconst _noiseMagFilter = THREE.NearestFilter;\r\nconst _noiseMapping = THREE.UVMapping;\r\nconst noiseTexture = new THREE.DataTexture(\r\n  _noiseData, noiseWidth, noiseHeight, THREE.RGBFormat,\r\n  THREE.UnsignedByteType, _noiseMapping, _noiseWrapS, _noiseWrapT, _noiseMagFilter, _noiseMinFilter, 1,\r\n);\r\nnoiseTexture.needsUpdate = true;\r\n\r\nexport default {\r\n  noiseWidth,\r\n  noiseHeight,\r\n  noiseTexture,\r\n};\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './Uber.vert';\r\nimport fragmentShader from './Uber.frag';\r\nimport capabilities from '../capabilities';\r\nimport noise from '../noiseTexture';\r\n\r\n// Length of _samplesKernel is used in Uber.frag\r\n// If you want to change length of _samplesKernel, please, remember change it in Uber.frag too.\r\n// You can easy find places for replace using word:_samplesKernel\r\nconst _samplesKernel = [\r\n  new THREE.Vector2(-0.541978, 0.840393),\r\n  new THREE.Vector2(0.125533, -0.992089),\r\n  new THREE.Vector2(0.374329, 0.927296),\r\n  new THREE.Vector2(-0.105475, 0.994422),\r\n];\r\n\r\nconst defaultUniforms = THREE.UniformsUtils.merge([\r\n\r\n  THREE.UniformsLib.fog,\r\n  THREE.UniformsLib.lights,\r\n\r\n  {\r\n    // are updated automatically by three.js (see THREE.ShaderLib.common)\r\n    diffuse: { value: new THREE.Color(0xeeeeee) },\r\n    opacity: { value: 1.0 },\r\n\r\n    specular: { type: 'c', value: new THREE.Color(0x111111) },\r\n    shininess: { type: 'f', value: 30 },\r\n    fixedColor: { type: 'c', value: new THREE.Color(0xffffff) },\r\n    zOffset: { type: 'f', value: 0.0 },\r\n    zClipValue: { type: 'f', value: 0.0 },\r\n    clipPlaneValue: { type: 'f', value: 0.0 },\r\n    invModelViewMatrix: { type: '4fv', value: new THREE.Matrix4() },\r\n    world2colorMatrix: { type: '4fv', value: new THREE.Matrix4() },\r\n    dashedLineSize: { type: 'f', value: 0.1 },\r\n    dashedLinePeriod: { type: 'f', value: 0.2 },\r\n    projMatrixInv: { type: '4fv', value: new THREE.Matrix4() },\r\n    viewport: { type: 'v2', value: new THREE.Vector2() },\r\n    lineWidth: { type: 'f', value: 2.0 },\r\n    // default value must be the same as settings\r\n    fogAlpha: { type: 'f', value: 1.0 },\r\n    samplesKernel: { type: 'v2v', value: null },\r\n    noiseTex: { type: 't', value: null },\r\n    noiseTexelSize: { type: 'v2', value: null },\r\n    srcTexelSize: { type: 'v2', value: null },\r\n  },\r\n\r\n]);\r\n\r\nconst uberOptionNames = [\r\n  'shininess',\r\n  'opacity',\r\n  'zOffset',\r\n  'diffuse',\r\n  'specular',\r\n  'fixedColor',\r\n  'zClipCoef',\r\n  'zClipValue',\r\n  'clipPlaneValue',\r\n  'world2colorMatrix',\r\n  'dashedLineSize',\r\n  'dashedLinePeriod',\r\n  'projMatrixInv',\r\n  'viewport',\r\n  'lineWidth',\r\n  'fogAlpha',\r\n  'samplesKernel',\r\n  'noiseTex',\r\n  'noiseTexelSize',\r\n  'srcTexelSize',\r\n];\r\n\r\nfunction UberMaterial(params) {\r\n  THREE.RawShaderMaterial.call(this);\r\n\r\n  // add fog\r\n  this.fog = true;\r\n  // used for instanced geometry\r\n  this.instancedPos = false;\r\n  this.instancedMatrix = false;\r\n  // atoms and links color\r\n  this.attrColor = false;\r\n  // second link color for cylinders\r\n  this.attrColor2 = false;\r\n  //\r\n  this.attrAlphaColor = false;\r\n  // overrides color for all vertices (used in selection)\r\n  this.overrideColor = false;\r\n  // zsrpites\r\n  this.sphereSprite = false;\r\n  this.cylinderSprite = false;\r\n  // clip Surfs individually\r\n  this.zClip = false;\r\n  // clip scene with global clip plane\r\n  this.clipPlane = false;\r\n  // enable fake (chess-like) opacity\r\n  this.fakeOpacity = false;\r\n  // render only depth, don't take care about the pixel color (used for transparency depth prepass)\r\n  this.prepassTransparancy = false;\r\n  // used to render pixel positions\r\n  this.colorFromPos = false;\r\n  // used to render shadowmap\r\n  this.shadowmap = false;\r\n  // used to describe shadowmap type\r\n  this.shadowmapType = 'random';\r\n  // used to render pixel view deph\r\n  this.colorFromDepth = false;\r\n  // used to render dashed line\r\n  this.dashedLine = false;\r\n  // mark as transparent\r\n  this.transparent = true;\r\n  // mark as thick lines\r\n  this.thickLine = false;\r\n  // makes fog begin transparency (required for transparent background)\r\n  this.fogTransparent = false;\r\n  // used to render surface normals to G buffer for ssao effect\r\n  this.normalsToGBuffer = false;\r\n  // used for toon material\r\n  this.toonShading = false;\r\n\r\n  // uber options of \"root\" materials are inherited from single uber-options object that resides in prototype\r\n  this.uberOptions = Object.create(UberMaterial.prototype.uberOptions);\r\n\r\n  // set default values\r\n  THREE.RawShaderMaterial.prototype.setValues.call(this, {\r\n    uniforms: THREE.UniformsUtils.clone(defaultUniforms),\r\n    vertexShader: this.precisionString() + vertexShader,\r\n    fragmentShader: this.precisionString() + fragmentShader,\r\n    lights: true,\r\n    fog: true,\r\n    side: THREE.DoubleSide,\r\n  });\r\n\r\n  this.setValues(params);\r\n}\r\n\r\nUberMaterial.prototype = Object.create(THREE.RawShaderMaterial.prototype);\r\nUberMaterial.prototype.constructor = UberMaterial;\r\n\r\nUberMaterial.prototype.precisionString = function () {\r\n  const { precision } = capabilities;\r\n  const str = `precision ${precision} float;\\n`\r\n    + `precision ${precision} int;\\n\\n`;\r\n  return str;\r\n};\r\n\r\n// properties that convert to uniforms\r\nUberMaterial.prototype.uberOptions = {\r\n  diffuse: new THREE.Color(0xffffff), // used in phong lighting\r\n  specular: new THREE.Color(0x111111), // used in phong lighting\r\n  shininess: 30, // used in phong lighting\r\n  opacity: 1, // set mesh opacity\r\n  fixedColor: new THREE.Color(0xffffff), // color to override (see OVERRIDE_COLOR)\r\n  zOffset: 0.0, // used fo zsprites (see SPHERE_SPRITE CYLINDER_SPRITE)\r\n  zClipCoef: 2.0, // use for Surfs clipping (mesh param, isn't used in shader)  FIXME move to representation param\r\n  zClipValue: 0.0, //  value to clip Surfs in shader  (see ZCLIP)\r\n  clipPlaneValue: 0.0, // value to clip scene globally (see CLIPPLANE)\r\n  world2colorMatrix: new THREE.Matrix4(),\r\n  dashedLineSize: 0.1,\r\n  dashedLinePeriod: 0.3,\r\n  projMatrixInv: new THREE.Matrix4(),\r\n  viewport: new THREE.Vector2(800, 600),\r\n  lineWidth: 2.0,\r\n  fogAlpha: 1.0,\r\n  samplesKernel: _samplesKernel,\r\n  noiseTex: noise.noiseTexture,\r\n  noiseTexelSize: new THREE.Vector2(1.0 / noise.noiseWidth, 1.0 / noise.noiseHeight),\r\n  srcTexelSize: new THREE.Vector2(1.0 / 800.0, 1.0 / 600.0),\r\n\r\n  copy(source) {\r\n    this.diffuse.copy(source.diffuse);\r\n    this.specular.copy(source.specular);\r\n    this.shininess = source.shininess;\r\n    this.opacity = source.opacity;\r\n    this.fixedColor.copy(source.fixedColor);\r\n    this.zOffset = source.zOffset;\r\n    this.zClipCoef = source.zClipCoef;\r\n    this.zClipValue = source.zClipValue;\r\n    this.clipPlaneValue = source.clipPlaneValue;\r\n    this.world2colorMatrix.copy(source.world2colorMatrix);\r\n    this.dashedLineSize = source.dashedLineSize;\r\n    this.dashedLinePeriod = source.dashedLinePeriod;\r\n    this.projMatrixInv = source.projMatrixInv;\r\n    this.viewport = source.viewport;\r\n    this.lineWidth = source.lineWidth; // used for thick lines only\r\n    this.toonShading = source.toonShading;\r\n    this.fogAlpha = source.fogAlpha;\r\n    this.samplesKernel = source.samplesKernel;\r\n    this.noiseTex = source.noiseTex;\r\n    this.noiseTexelSize = source.noiseTexelSize;\r\n    this.srcTexelSize = source.srcTexelSize;\r\n  },\r\n};\r\n\r\nUberMaterial.prototype.copy = function (source) {\r\n  THREE.RawShaderMaterial.prototype.copy.call(this, source);\r\n\r\n  this.fragmentShader = source.fragmentShader;\r\n  this.vertexShader = source.vertexShader;\r\n\r\n  this.uniforms = THREE.UniformsUtils.clone(source.uniforms);\r\n  this.defines = { ...source.defines };\r\n  this.extensions = source.extensions;\r\n\r\n  this.fog = source.fog;\r\n  this.instancedPos = source.instancedPos;\r\n  this.instancedMatrix = source.instancedMatrix;\r\n  this.attrColor = source.attrColor;\r\n  this.attrColor2 = source.attrColor2;\r\n  this.attrAlphaColor = source.attrAlphaColor;\r\n  this.overrideColor = source.overrideColor;\r\n  this.sphereSprite = source.sphereSprite;\r\n  this.cylinderSprite = source.cylinderSprite;\r\n  this.zClip = source.zClip;\r\n  this.clipPlane = source.clipPlane;\r\n  this.fakeOpacity = source.fakeOpacity;\r\n  this.colorFromPos = source.colorFromPos;\r\n  this.shadowmap = source.shadowmap;\r\n  this.shadowmapType = source.shadowmapType;\r\n  this.colorFromDepth = source.colorFromDepth;\r\n  this.prepassTransparancy = source.prepassTransparancy;\r\n  this.dashedLine = source.dashedLine;\r\n  this.thickLine = source.thickLine;\r\n  this.fogTransparent = source.fogTransparent;\r\n  this.normalsToGBuffer = source.normalsToGBuffer;\r\n  this.toonShading = source.toonShading;\r\n\r\n  this.uberOptions.copy(source.uberOptions);\r\n\r\n  return this;\r\n};\r\n\r\n// create copy of this material\r\n// its options are prototyped after this material's options\r\nUberMaterial.prototype.createInstance = function () {\r\n  const inst = new UberMaterial();\r\n  inst.copy(this);\r\n  inst.uberOptions = Object.create(this.uberOptions);\r\n  return inst;\r\n};\r\n\r\nUberMaterial.prototype.setValues = function (values) {\r\n  if (typeof values === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  // set direct values\r\n  THREE.RawShaderMaterial.prototype.setValues.call(this, values);\r\n\r\n  const defines = {};\r\n  const extensions = {};\r\n\r\n  if (this.fog) {\r\n    defines.USE_FOG = 1;\r\n  }\r\n  if (this.instancedPos) {\r\n    defines.INSTANCED_POS = 1;\r\n  }\r\n  if (this.instancedMatrix) {\r\n    defines.INSTANCED_MATRIX = 1;\r\n  }\r\n  if (this.attrColor) {\r\n    defines.ATTR_COLOR = 1;\r\n  }\r\n  if (this.attrColor2) {\r\n    defines.ATTR_COLOR2 = 1;\r\n  }\r\n  if (this.attrAlphaColor) {\r\n    defines.ATTR_ALPHA_COLOR = 1;\r\n  }\r\n  if (this.overrideColor) {\r\n    defines.OVERRIDE_COLOR = 1;\r\n  }\r\n  if (this.sphereSprite) {\r\n    defines.SPHERE_SPRITE = 1;\r\n    extensions.fragDepth = 1;\r\n  }\r\n  if (this.cylinderSprite) {\r\n    defines.CYLINDER_SPRITE = 1;\r\n    extensions.fragDepth = 1;\r\n  }\r\n  if (this.zClip) {\r\n    defines.ZCLIP = 1;\r\n  }\r\n  if (this.clipPlane) {\r\n    defines.CLIP_PLANE = 1;\r\n  }\r\n  if (this.fakeOpacity) {\r\n    defines.FAKE_OPACITY = 1;\r\n  }\r\n  if (this.lights) {\r\n    defines.USE_LIGHTS = 1;\r\n  }\r\n  if (this.colorFromPos) {\r\n    defines.COLOR_FROM_POS = 1;\r\n  }\r\n  if (this.shadowmap) {\r\n    defines.SHADOWMAP = 1;\r\n    if (this.shadowmapType === 'pcf') {\r\n      defines.SHADOWMAP_PCF_SHARP = 1;\r\n    } else if (this.shadowmapType === 'random') {\r\n      defines.SHADOWMAP_PCF_RAND = 1;\r\n    } else {\r\n      defines.SHADOWMAP_BASIC = 1;\r\n    }\r\n  }\r\n  if (this.colorFromDepth) {\r\n    defines.COLOR_FROM_DEPTH = 1;\r\n  }\r\n  if (this.prepassTransparancy) {\r\n    defines.PREPASS_TRANSP = 1;\r\n  }\r\n  if (this.dashedLine) {\r\n    defines.DASHED_LINE = 1;\r\n  }\r\n  if (this.thickLine) {\r\n    defines.THICK_LINE = 1;\r\n  }\r\n  if (this.fogTransparent) {\r\n    defines.FOG_TRANSPARENT = 1;\r\n  }\r\n  if (this.normalsToGBuffer) {\r\n    extensions.drawBuffers = 1;\r\n    defines.NORMALS_TO_G_BUFFER = 1;\r\n  }\r\n  if (this.toonShading) {\r\n    defines.TOON_SHADING = 1;\r\n  }\r\n  // set dependent values\r\n  this.defines = defines;\r\n  this.extensions = extensions;\r\n};\r\n\r\nUberMaterial.prototype.setUberOptions = function (values) {\r\n  if (typeof values === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  for (const key in values) {\r\n    if (!values.hasOwnProperty(key)) {\r\n      continue;\r\n    }\r\n\r\n    if (this.uberOptions[key] instanceof THREE.Color) {\r\n      this.uberOptions[key] = values[key].clone();\r\n    } else {\r\n      this.uberOptions[key] = values[key];\r\n    }\r\n  }\r\n};\r\n\r\nUberMaterial.prototype.clone = function (shallow) {\r\n  if (!shallow) {\r\n    return THREE.Material.prototype.clone.call(this);\r\n  }\r\n  return this.createInstance();\r\n};\r\n\r\nUberMaterial.prototype.updateUniforms = function () {\r\n  const self = this;\r\n\r\n  uberOptionNames.forEach((p) => {\r\n    if (self.uniforms.hasOwnProperty(p)) {\r\n      if (self.uberOptions[p] instanceof THREE.Color\r\n            || self.uberOptions[p] instanceof THREE.Matrix4) {\r\n        self.uniforms[p].value = self.uberOptions[p].clone();\r\n      } else {\r\n        self.uniforms[p].value = self.uberOptions[p];\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nexport default UberMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\nimport * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport logger from '../utils/logger';\r\nimport CSS2DObject from './CSS2DObject';\r\nimport RCGroup from './RCGroup';\r\nimport vertexScreenQuadShader from './shaders/ScreenQuad.vert';\r\nimport fragmentScreenQuadFromTex from './shaders/ScreenQuadFromTex.frag';\r\nimport fragmentScreenQuadFromTexWithDistortion from './shaders/ScreenQuadFromTexWithDistortion.frag';\r\nimport UberMaterial from './shaders/UberMaterial';\r\n\r\nconst LAYERS = {\r\n  DEFAULT: 0, VOLUME: 1, TRANSPARENT: 2, PREPASS_TRANSPARENT: 3, VOLUME_BFPLANE: 4, COLOR_FROM_POSITION: 5, SHADOWMAP: 6,\r\n};\r\n\r\nconst SELECTION_LAYERS = [ // These layers, that are used in the selection by ray casting\r\n  LAYERS.DEFAULT, LAYERS.TRANSPARENT,\r\n];\r\n\r\nTHREE.Object3D.prototype.resetTransform = function () {\r\n  this.position.set(0, 0, 0);\r\n  this.quaternion.set(0, 0, 0, 1);\r\n  this.scale.set(1, 1, 1);\r\n};\r\n\r\n// update world matrix of this object and all its ancestors\r\nTHREE.Object3D.prototype.updateMatrixWorldRecursive = function () {\r\n  if (this.parent != null) {\r\n    this.parent.updateMatrixWorldRecursive();\r\n  }\r\n  this.updateMatrixWorld();\r\n};\r\n// add object to parent, saving objects' world transform\r\nTHREE.Object3D.prototype.addSavingWorldTransform = (function () {\r\n  const _worldMatrixInverse = new THREE.Matrix4();\r\n\r\n  return function (object) {\r\n    if (object instanceof THREE.Object3D) {\r\n      _worldMatrixInverse.getInverse(this.matrixWorld);\r\n      _worldMatrixInverse.multiply(object.matrixWorld);\r\n      object.matrix.copy(_worldMatrixInverse);\r\n      object.matrix.decompose(object.position, object.quaternion, object.scale);\r\n      this.add(object);\r\n    }\r\n  };\r\n}());\r\n\r\n// render a tiny transparent quad in the center of the screen\r\nTHREE.WebGLRenderer.prototype.renderDummyQuad = (function () {\r\n  const _material = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0.0, depthWrite: false });\r\n\r\n  const _scene = new THREE.Scene();\r\n  const _quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(0.01, 0.01), _material);\r\n  _scene.add(_quad);\r\n\r\n  const _camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -10000, 10000);\r\n  _camera.position.z = 100;\r\n\r\n  return function () {\r\n    this.render(_scene, _camera);\r\n  };\r\n}());\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuad = (function () {\r\n  const _scene = new THREE.Scene();\r\n  const _quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(1.0, 1.0));\r\n  _scene.add(_quad);\r\n\r\n  const _camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -10000, 10000);\r\n  _camera.position.z = 100;\r\n\r\n\r\n  return function (material) {\r\n    _quad.material = material;\r\n    this.render(_scene, _camera);\r\n  };\r\n}());\r\n\r\nTHREE.Matrix4.prototype.isIdentity = (function () {\r\n  const identity = new THREE.Matrix4();\r\n  return function () {\r\n    return identity.equals(this);\r\n  };\r\n}());\r\n\r\nTHREE.Matrix4.prototype.applyToPointsArray = function (array, stride, w) {\r\n  if (!array || !stride || stride < 3) {\r\n    return array;\r\n  }\r\n  w = w || 0; // use point as normal by default\r\n  const e = this.elements;\r\n  for (let i = 0; i < array.length; i += stride) {\r\n    const x = array[i];\r\n    const y = array[i + 1];\r\n    const z = array[i + 2];\r\n\r\n    const persp = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\r\n\r\n    array[i] = (e[0] * x + e[4] * y + e[8] * z + e[12] * w) * persp;\r\n    array[i + 1] = (e[1] * x + e[5] * y + e[9] * z + e[13] * w) * persp;\r\n    array[i + 2] = (e[2] * x + e[6] * y + e[10] * z + e[14] * w) * persp;\r\n  }\r\n  return array;\r\n};\r\n\r\nclass ScreenQuadMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    if (params.uniforms === undefined) {\r\n      params.uniforms = {};\r\n    }\r\n    params.uniforms.srcTex = { type: 't', value: null };\r\n    params.vertexShader = vertexScreenQuadShader;\r\n    params.transparent = false;\r\n    params.depthTest = false;\r\n    params.depthWrite = false;\r\n    super(params);\r\n  }\r\n}\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuadFromTex = (function () {\r\n  const _material = new ScreenQuadMaterial({\r\n    uniforms: { opacity: { type: 'f', value: 1.0 } },\r\n    fragmentShader: fragmentScreenQuadFromTex,\r\n    transparent: true,\r\n  });\r\n\r\n\r\n  return function (srcTex, opacity) {\r\n    _material.uniforms.srcTex.value = srcTex;\r\n    _material.transparent = (opacity < 1.0);\r\n    _material.uniforms.opacity.value = opacity;\r\n    this.renderScreenQuad(_material);\r\n  };\r\n}());\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuadFromTexWithDistortion = (function () {\r\n  const _material = new ScreenQuadMaterial({\r\n    uniforms: { coef: { type: 'f', value: 1.0 } },\r\n    fragmentShader: fragmentScreenQuadFromTexWithDistortion,\r\n  });\r\n\r\n\r\n  return function (srcTex, coef) {\r\n    _material.uniforms.srcTex.value = srcTex;\r\n    _material.uniforms.coef.value = coef;\r\n    this.renderScreenQuad(_material);\r\n  };\r\n}());\r\n\r\n/**\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.PerspectiveCamera.prototype.setMinimalFov = function (angle) {\r\n  if (this.aspect >= 1.0) {\r\n    this.fov = angle;\r\n  } else {\r\n    this.fov = THREE.Math.radToDeg(2 * Math.atan(Math.tan(THREE.Math.degToRad(angle) * 0.5) / this.aspect));\r\n  }\r\n};\r\n\r\n/**\r\n * @param {THREE.PerspectiveCamera} camera - Base camera for this stereo camera.\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.StereoCamera.prototype.updateHalfSized = function (camera, angle) {\r\n  const originalAspect = camera.aspect;\r\n  const originalFov = camera.fov;\r\n\r\n  camera.aspect = originalAspect / 2.0;\r\n  camera.setMinimalFov(angle);\r\n  camera.updateProjectionMatrix();\r\n\r\n  this.update(camera);\r\n\r\n  camera.aspect = originalAspect;\r\n  camera.fov = originalFov;\r\n  camera.updateProjectionMatrix();\r\n};\r\n\r\n/**\r\n * @param {number} radius - Radius of bounding sphere in angstroms to fit on screen.\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.PerspectiveCamera.prototype.setDistanceToFit = function (radius, angle) {\r\n  this.position.z = radius / Math.sin(0.5 * THREE.Math.degToRad(angle));\r\n};\r\n\r\n/**\r\n * @param {RCGroup} gfxObj - All objects on scene.\r\n * @param {THREE.PerspectiveCamera} camera - Camera used for rendering.\r\n * @param {number} clipPlane - Distance to clip plane.\r\n * @param {number} fogFarPlane - Distance to fog far plane.\r\n */\r\nTHREE.Raycaster.prototype.intersectVisibleObject = function (gfxObj, camera, clipPlane, fogFarPlane) {\r\n  const intersects = this.intersectObject(gfxObj, false);\r\n  if (intersects.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // find point closest to camera that doesn't get clipped by camera near plane or clipPlane (if it exists)\r\n  const nearPlane = Math.min(camera.near, clipPlane);\r\n  let i;\r\n  let p = intersects[0];\r\n  const v = new THREE.Vector3();\r\n  for (i = 0; i < intersects.length; ++i) {\r\n    p = intersects[i];\r\n    v.copy(p.point);\r\n    v.applyMatrix4(camera.matrixWorldInverse);\r\n    if (v.z <= -nearPlane) {\r\n      break;\r\n    }\r\n  }\r\n  if (i === intersects.length) {\r\n    return null;\r\n  }\r\n\r\n  // check that selected intersection point is not clipped by camera far plane or occluded by fog (if it exists)\r\n  const farPlane = Math.min(camera.far, fogFarPlane);\r\n  v.copy(p.point);\r\n  v.applyMatrix4(camera.matrixWorldInverse);\r\n  if (v.z <= -farPlane) {\r\n    return null;\r\n  }\r\n  return p;\r\n};\r\n\r\nTHREE.Matrix4.prototype.extractScale = (function () {\r\n  const _v = new THREE.Vector3();\r\n\r\n  return function (scale) {\r\n    if (scale === undefined) {\r\n      logger.debug('extractScale(): new is too expensive operation to do it on-the-fly');\r\n      scale = _v.clone();\r\n    }\r\n\r\n    const te = this.elements;\r\n    scale.x = _v.set(te[0], te[1], te[2]).length();\r\n    scale.y = _v.set(te[4], te[5], te[6]).length();\r\n    scale.z = _v.set(te[8], te[9], te[10]).length();\r\n\r\n    // if determine is negative, we need to invert one scale\r\n    const det = this.determinant();\r\n    if (det < 0) {\r\n      scale.x = -scale.x;\r\n    }\r\n    return scale;\r\n  };\r\n}());\r\n\r\nfunction _calcCylinderMatrix(posBegin, posEnd, radius) {\r\n  const posCenter = posBegin.clone().lerp(posEnd, 0.5);\r\n  const matScale = new THREE.Matrix4();\r\n  matScale.makeScale(radius, posBegin.distanceTo(posEnd), radius);\r\n\r\n  const matRotHalf = new THREE.Matrix4();\r\n  matRotHalf.makeRotationX(Math.PI / 2);\r\n\r\n  const matRotLook = new THREE.Matrix4();\r\n  const vUp = new THREE.Vector3(0, 1, 0);\r\n  matRotLook.lookAt(posCenter, posEnd, vUp);\r\n\r\n  matRotLook.multiply(matRotHalf);\r\n  matRotLook.multiply(matScale);\r\n  matRotLook.setPosition(posCenter);\r\n  return matRotLook;\r\n}\r\n\r\nfunction _calcChunkMatrix(eye, target, up, rad) {\r\n  const matScale = new THREE.Matrix4();\r\n  matScale.makeScale(rad.x, rad.y, 0);\r\n\r\n  const matRotLook = new THREE.Matrix4();\r\n  matRotLook.lookAt(eye, target, up);\r\n  matRotLook.multiply(matScale);\r\n  matRotLook.setPosition(eye);\r\n\r\n  return matRotLook;\r\n}\r\n\r\nfunction _forEachMeshInGroup(group, process) {\r\n  function processObj(object) {\r\n    if (object instanceof THREE.Mesh) {\r\n      process(object);\r\n    }\r\n    for (let i = 0, l = object.children.length; i < l; i++) {\r\n      processObj(object.children[i]);\r\n    }\r\n  }\r\n  processObj(group);\r\n}\r\n\r\nfunction _countMeshTriangles(mesh) {\r\n  const geom = mesh.geometry;\r\n  if (geom instanceof THREE.InstancedBufferGeometry) {\r\n    const attribs = geom.attributes;\r\n    for (const property in attribs) {\r\n      if (attribs.hasOwnProperty(property) && attribs[property] instanceof THREE.InstancedBufferAttribute) {\r\n        const currAttr = attribs[property];\r\n        const indexSize = geom.index ? geom.index.array.length / 3 : 0;\r\n        return indexSize * currAttr.array.length / currAttr.itemSize;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n  if (geom instanceof THREE.BufferGeometry) {\r\n    return geom.index ? geom.index.array.length / 3 : 0;\r\n  }\r\n  return geom.faces ? geom.faces.length : 0;\r\n}\r\n\r\nfunction _countTriangles(group) {\r\n  let totalCount = 0;\r\n  _forEachMeshInGroup(group, (mesh) => {\r\n    totalCount += _countMeshTriangles(mesh);\r\n  });\r\n  return totalCount;\r\n}\r\n\r\nfunction _groupHasGeometryToRender(group) {\r\n  let hasGeoms = false;\r\n  group.traverse((node) => {\r\n    if (node.hasOwnProperty('geometry') || node instanceof CSS2DObject) {\r\n      hasGeoms = true;\r\n    }\r\n  });\r\n  return hasGeoms;\r\n}\r\n\r\nfunction _buildDistorionMesh(widthSegments, heightSegements, coef) {\r\n  // solve equation r_u = r_d * (1 + k * r_d^2)\r\n  // for r_d using iterations\r\n  // takes: r_u^2\r\n  // returns: r_d / r_u  factor that can be used to distort point coords\r\n  function calcInverseBarrel(r2) {\r\n    const epsilon = 1e-5;\r\n    let prevR2 = 0.0;\r\n    let curR2 = r2;\r\n    let dr = 1.0;\r\n    while (Math.abs(curR2 - prevR2) > epsilon) {\r\n      dr = 1.0 + coef * curR2;\r\n      prevR2 = curR2;\r\n      curR2 = r2 / (dr * dr);\r\n    }\r\n\r\n    return 1.0 / dr;\r\n  }\r\n\r\n  const geo = new THREE.PlaneBufferGeometry(2.0, 2.0, widthSegments, heightSegements);\r\n\r\n  const pos = geo.getAttribute('position');\r\n  for (let i = 0; i < pos.count; ++i) {\r\n    const x = pos.array[3 * i];\r\n    const y = pos.array[3 * i + 1];\r\n    const c = calcInverseBarrel(x * x + y * y);\r\n    pos.setXY(i, c * x, c * y);\r\n  }\r\n\r\n  return geo;\r\n}\r\n\r\nTHREE.BufferAttribute.prototype.copyAtList = function (attribute, indexList) {\r\n  console.assert(\r\n    this.itemSize === attribute.itemSize,\r\n    'DEBUG: BufferAttribute.copyAtList buffers have different item size.',\r\n  );\r\n  const { itemSize } = this;\r\n  for (let i = 0, n = indexList.length; i < n; ++i) {\r\n    for (let j = 0; j < itemSize; ++j) {\r\n      this.array[i * itemSize + j] = attribute.array[indexList[i] * itemSize + j];\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction fillArray(array, value, startIndex, endIndex) {\r\n  startIndex = (typeof startIndex !== 'undefined') ? startIndex : 0;\r\n  endIndex = (typeof endIndex !== 'undefined') ? endIndex : array.length;\r\n  for (let i = startIndex; i < endIndex; ++i) {\r\n    array[i] = value;\r\n  }\r\n}\r\n\r\n/** @param {THREE.Object3D} object - Parent object. */\r\nfunction removeChildren(object) {\r\n  const { children } = object;\r\n  for (let i = 0, n = children.length; i < n; ++i) {\r\n    const child = children[i];\r\n    child.parent = null;\r\n    child.dispatchEvent({ type: 'removed' });\r\n  }\r\n  object.children = [];\r\n}\r\n\r\nfunction clearTree(object) {\r\n  object.traverse((obj) => {\r\n    if (obj instanceof THREE.Mesh || obj instanceof THREE.LineSegments || obj instanceof THREE.Line) {\r\n      obj.geometry.dispose();\r\n    }\r\n  });\r\n  removeChildren(object);\r\n}\r\n\r\nfunction destroyObject(object) {\r\n  clearTree(object);\r\n  if (object.parent) {\r\n    object.parent.remove(object);\r\n  } else {\r\n    object.dispatchEvent({ type: 'removed' });\r\n  }\r\n}\r\n\r\nfunction belongToSelectLayers(object) {\r\n  for (let i = 0; i < SELECTION_LAYERS.length; i++) {\r\n    if (((object.layers.mask >> SELECTION_LAYERS[i]) & 1) === 1) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction _getMeshesArr(root, meshTypes) {\r\n  const meshes = [];\r\n  root.traverse((object) => {\r\n    for (let i = 0; i < meshTypes.length; i++) {\r\n      if (object instanceof meshTypes[i]) {\r\n        meshes[meshes.length] = object;\r\n        break;\r\n      }\r\n    }\r\n  });\r\n  return meshes;\r\n}\r\n\r\nfunction applyTransformsToMeshes(root, mtc) {\r\n  const mtcCount = mtc.length;\r\n  if (mtcCount < 1) {\r\n    return;\r\n  }\r\n\r\n  const meshes = _getMeshesArr(root, [THREE.Mesh, THREE.LineSegments, THREE.Line]);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    const { parent } = mesh;\r\n    if (!parent) {\r\n      continue;\r\n    }\r\n    mesh.applyMatrix(mtc[0]);\r\n    for (let j = 1; j < mtcCount; ++j) {\r\n      const newMesh = new mesh.constructor(mesh.geometry, mesh.material);\r\n      parent.add(newMesh);\r\n      newMesh.applyMatrix(mtc[j]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction processTransparentMaterial(root, material) {\r\n  if (!(material instanceof UberMaterial)) {\r\n    return;\r\n  }\r\n\r\n  const meshes = _getMeshesArr(root, [THREE.Mesh, THREE.LineSegments]);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    const { parent } = mesh;\r\n    if (!parent) {\r\n      continue;\r\n    }\r\n    mesh.material.setValues({ prepassTransparancy: false, fakeOpacity: false });\r\n    mesh.material.needsUpdate = true;\r\n    mesh.layers.set(LAYERS.TRANSPARENT);\r\n\r\n    // copy of geometry with prepass material\r\n    const prepassMat = mesh.material.createInstance();\r\n    prepassMat.setValues({ prepassTransparancy: true, fakeOpacity: false });\r\n    const prepassMesh = new mesh.constructor(mesh.geometry, prepassMat);\r\n    _.forEach(['transparent', 'colorFromDepth', 'lights', 'shadowmap', 'fog'],\r\n      (value) => {\r\n        prepassMesh.material[value] = false;\r\n      });\r\n    prepassMesh.material.needsUpdate = true;\r\n    prepassMesh.applyMatrix(mesh.matrix);\r\n    prepassMesh.layers.set(LAYERS.PREPASS_TRANSPARENT);\r\n    parent.add(prepassMesh);\r\n  }\r\n}\r\n\r\nfunction processColFromPosMaterial(root, material) {\r\n  if (!(material instanceof UberMaterial)) {\r\n    return;\r\n  }\r\n\r\n  const meshes = _getMeshesArr(root, [THREE.Mesh, THREE.LineSegments]);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    const { parent } = mesh;\r\n    if (!parent) {\r\n      continue;\r\n    }\r\n\r\n    // copy of geometry with colFromPosMat material\r\n    const colFromPosMat = mesh.material.createInstance();\r\n    colFromPosMat.setValues({ colorFromPos: true });\r\n    const colFromPosMesh = new mesh.constructor(mesh.geometry, colFromPosMat);\r\n    _.forEach(['transparent', 'colorFromDepth', 'lights', 'shadowmap', 'fog', 'overrideColor', 'fogTransparent',\r\n      'attrColor', 'attrColor2', 'attrAlphaColor', 'fakeOpacity'],\r\n    (value) => {\r\n      colFromPosMesh.material[value] = false;\r\n    });\r\n\r\n    colFromPosMesh.material.needsUpdate = true;\r\n    colFromPosMesh.applyMatrix(mesh.matrix);\r\n    colFromPosMesh.layers.set(LAYERS.COLOR_FROM_POSITION);\r\n    parent.add(colFromPosMesh);\r\n  }\r\n}\r\n\r\nfunction createShadowmapMaterial(root, material) {\r\n  if (!(material instanceof UberMaterial)) {\r\n    return;\r\n  }\r\n\r\n  const meshes = _getMeshesArr(root, [THREE.Mesh, THREE.LineSegments]);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    if (!mesh.receiveShadow && mesh.material.shadowmap) { // remove shadow from non-receivers\r\n      mesh.material.setValues({ shadowmap: false });\r\n    }\r\n    if (!mesh.castShadow) { // skip creating shadowmap meshes for non-casters\r\n      continue;\r\n    }\r\n\r\n    // create special mesh for shadowmap\r\n    const { parent } = mesh;\r\n    if (!parent) {\r\n      continue;\r\n    }\r\n\r\n    // copy of geometry with shadowmap material\r\n    const shadowmapMat = mesh.material.createInstance();\r\n    shadowmapMat.setValues({ colorFromDepth: true });\r\n    const shadowmapMesh = new mesh.constructor(mesh.geometry, shadowmapMat);\r\n    _.forEach(['lights', 'shadowmap', 'fog'],\r\n      (value) => {\r\n        shadowmapMesh.material[value] = false;\r\n      });\r\n    shadowmapMesh.isShadowmapMesh = true;\r\n    shadowmapMesh.material.needsUpdate = true;\r\n    shadowmapMesh.applyMatrix(mesh.matrix);\r\n    shadowmapMesh.layers.set(LAYERS.SHADOWMAP);\r\n    parent.add(shadowmapMesh);\r\n  }\r\n}\r\n\r\nfunction removeShadowmapMaterial(root, material) {\r\n  if (!(material instanceof UberMaterial)) {\r\n    return;\r\n  }\r\n\r\n  const meshes = _getMeshesArr(root, [THREE.Mesh, THREE.LineSegments]);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    if (mesh.isShadowmapMesh && mesh.parent) {\r\n      mesh.parent.remove(mesh);\r\n    }\r\n  }\r\n}\r\n\r\nfunction processObjRenderOrder(root, idMaterial) {\r\n  // set renderOrder to 0 for Backdrop and to 1 in other cases to render Backdrop earlier all other materials\r\n  const renderOrder = +(idMaterial !== 'BA');\r\n  root.traverse((object) => {\r\n    if (object.isGroup) {\r\n      object.renderOrder = renderOrder;\r\n    }\r\n  });\r\n}\r\n\r\n/** Traverse tree and make visible only needed meshes */\r\nfunction makeVisibleMeshes(object, checker) {\r\n  if (object && object.traverse) {\r\n    object.traverse((obj) => {\r\n      if (obj instanceof THREE.Mesh) {\r\n        obj.visible = checker(obj);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction applySelectionMaterial(geo) {\r\n  geo.traverse((node) => {\r\n    if ('material' in node) {\r\n      node.material = node.material.clone(true);\r\n      // using z-offset to magically fix selection rendering artifact (on z-sprites)\r\n      node.material.setValues({ depthFunc: THREE.LessEqualDepth, overrideColor: true, fog: false });\r\n      node.material.setUberOptions({ fixedColor: new THREE.Color(0xFFFF00), zOffset: -1e-6 });\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMiddlePoint(point1, point2, optionalTarget) {\r\n  const result = optionalTarget || new THREE.Vector3();\r\n\r\n  result.set(0, 0, 0);\r\n  result.addScaledVector(point1, 0.5);\r\n  result.addScaledVector(point2, 0.5);\r\n\r\n  return result;\r\n}\r\n\r\n\r\nexport default {\r\n  calcCylinderMatrix: _calcCylinderMatrix,\r\n  calcChunkMatrix: _calcChunkMatrix,\r\n  forEachMeshInGroup: _forEachMeshInGroup,\r\n  countTriangles: _countTriangles,\r\n  groupHasGeometryToRender: _groupHasGeometryToRender,\r\n  buildDistorionMesh: _buildDistorionMesh,\r\n  RCGroup,\r\n  fillArray,\r\n  clearTree,\r\n  destroyObject,\r\n  belongToSelectLayers,\r\n  applyTransformsToMeshes,\r\n  processTransparentMaterial,\r\n  processColFromPosMaterial,\r\n  createShadowmapMaterial,\r\n  removeShadowmapMaterial,\r\n  processObjRenderOrder,\r\n  makeVisibleMeshes,\r\n  applySelectionMaterial,\r\n  getMiddlePoint,\r\n  LAYERS,\r\n};\r\n","import * as THREE from 'three';\r\nimport utils from './utils';\r\nimport gfxutils from './gfx/gfxutils';\r\n\r\nconst _defaultBoundaries = {\r\n  boundingBox: new THREE.Box3(new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, 1, 1)),\r\n  boundingSphere: new THREE.Sphere(new THREE.Vector3(0, 0, 0), 1),\r\n};\r\n\r\nfunction Visual(name, dataSource) {\r\n  gfxutils.RCGroup.call(this);\r\n\r\n  this.name = name;\r\n\r\n  this._dataSource = dataSource;\r\n}\r\n\r\nutils.deriveClass(Visual, gfxutils.RCGroup);\r\n\r\nVisual.prototype.release = function () {\r\n  if (this.parent) {\r\n    this.parent.remove(this);\r\n  }\r\n};\r\n\r\nVisual.prototype.getDataSource = function () {\r\n  return this._dataSource;\r\n};\r\n\r\nVisual.prototype.getBoundaries = function () {\r\n  return _defaultBoundaries;\r\n};\r\n\r\nexport default Visual;\r\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _ensureArray(x) {\r\n  if (x === null || x === undefined || Array.isArray(x)) {\r\n    return x;\r\n  }\r\n  return [x];\r\n}\r\n\r\n/** An indexed list of objects or classes. */\r\nclass EntityList {\r\n  /**\r\n   * Create a list of objects.\r\n   * The objects can be indexed by one or more properties for the later retrieval.\r\n   *\r\n   * @param {!Array<Object>=} entities A list of objects to automatically register at creation time.\r\n   * @param {!Array<string>=} indices A list of property names to use for case-insensitive indexing.\r\n   *   By default, a single `.id` property is used.\r\n   * @see EntityList#register\r\n   */\r\n  constructor(entities = [], indices = ['id']) {\r\n    this._list = [];\r\n    this._dict = {};\r\n    this._indices = [...indices];\r\n    this._indices.forEach((index) => {\r\n      this._dict[index] = {};\r\n    });\r\n\r\n    entities.forEach((entity) => this.register(entity));\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of a list.\r\n   * The list will contain only one copy of the value.\r\n   *\r\n   * @param {!Array} list An array.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.unregisterFromList\r\n   * @see EntityList.registerInDict\r\n   */\r\n  static registerInList(list, value) {\r\n    if (!list.includes(value)) {\r\n      list.push(value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a value from a list if it is there.\r\n   *\r\n   * @param {!Array} list An array.\r\n   * @param {*} value A value to remove.\r\n   * @see EntityList.registerInList\r\n   */\r\n  static unregisterFromList(list, value) {\r\n    const pos = list.indexOf(value);\r\n    if (pos !== -1) {\r\n      list.splice(pos, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a value to a dictionary.\r\n   * The value may be stored under multiple different keys (aliases).\r\n   * There might be multiples values stored under the same key.\r\n   *\r\n   * @param {!Object<string,*>} dict A dictionary.\r\n   * @param {!Array<string>} keys An array of keys.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.unregisterFromDict\r\n   * @see EntityList.registerInList\r\n   */\r\n  static registerInDict(dict, keys, value) {\r\n    keys.forEach((key) => {\r\n      key = key.toLowerCase();\r\n      const list = dict[key] = dict[key] || [];\r\n      if (!list.includes(value)) {\r\n        list.push(value);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove a value from a dictionary.\r\n   * The value may be stored under multiple different keys (aliases).\r\n   * There might be multiples values stored under the same key.\r\n   *\r\n   * @param {!Object<string,*>} dict A dictionary.\r\n   * @param {!Array<string>} keys An array of keys.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.registerInDict\r\n   */\r\n  static unregisterFromDict(dict, keys, value) {\r\n    keys.forEach((key) => {\r\n      key = key.toLowerCase();\r\n      const list = dict[key];\r\n      if (list) {\r\n        const pos = list.indexOf(value);\r\n        if (pos !== -1) {\r\n          list.splice(pos, 1);\r\n        }\r\n        if (list.length === 0) {\r\n          delete dict[key];\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add an entity to this list.\r\n   *\r\n   * @param {!Object} entity An object or a class to register. The object must include all\r\n   *   properties specified as indices on construction.\r\n   * @see EntityList#unregister\r\n   */\r\n  register(entity) {\r\n    EntityList.registerInList(this._list, entity);\r\n    this._indices.forEach((index) => {\r\n      EntityList.registerInDict(this._dict[index], _ensureArray(entity[index]), entity);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove an entity from this list.\r\n   *\r\n   * @param {!Object} entity An object or a class to unregister. The object may be\r\n   *   missing from the list but it must include all properties specified as indices\r\n   *   on construction.\r\n   * @see EntityList#register\r\n   */\r\n  unregister(entity) {\r\n    EntityList.unregisterFromList(this._list, entity);\r\n    this._indices.forEach((index) => {\r\n      EntityList.unregisterFromDict(this._dict[index], _ensureArray(entity[index]), entity);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * An ordered list of all registered entities.\r\n   * It is a read-only copy, use {@link EntityList#register} and {@link EntityList#unregister}\r\n   * to modify it.\r\n   *\r\n   * @type {!Array<Object>}\r\n   */\r\n  get all() {\r\n    return [...this._list];\r\n  }\r\n\r\n  /**\r\n   * The first registered entity.\r\n   * Use it if you do not care which entity you are referring to.\r\n   *\r\n   * @type {Object=}\r\n   */\r\n  get first() {\r\n    return this._list[0];\r\n  }\r\n\r\n  /**\r\n   * Retrieve a list of keys for the index.\r\n   *\r\n   * @param {string=} index One of the indices specified during the list construction. If omitted,\r\n   *   the first of the indices is used.\r\n   * @returns {!Array<string>} An unordered list of keys in the index, i.e. particular property\r\n   *   values for all registered entities.\r\n   */\r\n  keys(index) {\r\n    return Object.keys(this._dict[index || this._indices[0]]);\r\n  }\r\n\r\n  /**\r\n   * Retrieve an entity by its key.\r\n   *\r\n   * @param {string} key A case-insensitive property value to look-up.\r\n   * @param {string=} index One of the indices specified during the list construction. If omitted,\r\n   *   the first of the indices is used.\r\n   * @returns {Object=} An object registered in the index under the key. If there are multiple\r\n   *   objects under the same key, the first one is returned.\r\n   */\r\n  get(key, index) {\r\n    const dict = this._dict[index || this._indices[0]];\r\n    if (dict) {\r\n      const values = dict[key && key.toLowerCase()];\r\n      return values && values.length > 0 ? values[0] : undefined;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default EntityList;\r\n","import settings from '../settings';\r\nimport logger from './logger';\r\n\r\nfunction makeContextDependent(prototype) {\r\n  Object.defineProperties(prototype, {\r\n    logger: {\r\n      get() {\r\n        return this.context && this.context.logger ? this.context.logger : logger;\r\n      },\r\n    },\r\n    settings: {\r\n      get() {\r\n        return this.context && this.context.settings ? this.context.settings : settings;\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\nexport default makeContextDependent;\r\n","import * as THREE from 'three';\r\n\r\nclass CollisionSphere {\r\n  constructor(position, radius) {\r\n    this._position = position;\r\n    this._radius = radius;\r\n  }\r\n\r\n  static _sphere = new THREE.Sphere();\r\n\r\n  raycast(raycaster) {\r\n    const sphere = CollisionSphere._sphere;\r\n    sphere.set(this._position, this._radius);\r\n\r\n    const p = new THREE.Vector3();\r\n    if (raycaster.ray.intersectSphere(sphere, p)) {\r\n      return {\r\n        distance: raycaster.ray.origin.distanceTo(p),\r\n        point: p,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nconst SphereCollisionGeo = (base) => class extends base {\r\n  constructor(count, ...args) {\r\n    super(...args);\r\n    this._objects = new Array(count);\r\n    this.boundingSphere = null;\r\n    this.boundingBox = null;\r\n  }\r\n\r\n  setSphere(idx, position, radius) {\r\n    this._objects[idx] = new CollisionSphere(position, radius);\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    // TODO raycast with bounding sphere? How to deal with updates?\r\n    for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n      const inters = this._objects[i].raycast(raycaster);\r\n      if (inters) {\r\n        inters.chunkIdx = i;\r\n        intersects.push(inters);\r\n      }\r\n    }\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const objects = this._objects;\r\n    let { boundingBox } = this;\r\n    if (boundingBox === null) {\r\n      this.boundingBox = boundingBox = new THREE.Box3();\r\n    }\r\n    boundingBox.makeEmpty();\r\n    for (let i = 0, n = objects.length; i < n; ++i) {\r\n      boundingBox.expandByPoint(objects[i]._position);\r\n    }\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    this.computeBoundingBox();\r\n    const objects = this._objects;\r\n    const { boundingBox } = this;\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    for (let i = 0, n = objects.length; i < n; ++i) {\r\n      const pos = objects[i]._position;\r\n      const lengthSquared = center.distanceToSquared(pos);\r\n      if (radiusSquared < lengthSquared) {\r\n        radiusSquared = lengthSquared;\r\n      }\r\n    }\r\n    if (this.boundingSphere === null) {\r\n      this.boundingSphere = new THREE.Sphere();\r\n    }\r\n    this.boundingSphere.set(center, Math.sqrt(radiusSquared));\r\n  }\r\n};\r\nexport default SphereCollisionGeo;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst tmpColor = new THREE.Color();\r\n\r\nconst OFFSET_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst { copySubArrays } = utils;\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\nclass InstancedSpheresGeometry extends SphereCollisionGeo(THREE.InstancedBufferGeometry) {\r\n  constructor(spheresCount, sphereComplexity, useZSprites) {\r\n    super(spheresCount);\r\n    this._sphGeometry = useZSprites ? new THREE.PlaneBufferGeometry(2, 2, 1, 1)\r\n      : new THREE.SphereBufferGeometry(1, sphereComplexity * 2, sphereComplexity, 0, Math.PI * 2, 0, Math.PI);\r\n    this._init(spheresCount, this._sphGeometry);\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    setArrayXYZW(this._offsets, itemIdx * OFFSET_SIZE, itemPos.x, itemPos.y, itemPos.z, itemRad);\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n  }\r\n\r\n  setColor(itemIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    setArrayXYZ(this._colors, itemIdx * COLOR_SIZE, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('offset').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      alphaArr[chunkIndices[i]] = value;\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const geom = new THREE.InstancedBufferGeometry();\r\n    this._init.call(geom, instanceCount, this._sphGeometry);\r\n\r\n    copySubArrays(this._offsets, geom._offsets, chunkIndices, OFFSET_SIZE);\r\n    copySubArrays(this._colors, geom._colors, chunkIndices, COLOR_SIZE);\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  _init(spheresCount, sphereGeo) {\r\n    this.copy(sphereGeo);\r\n\r\n    this._offsets = utils.allocateTyped(Float32Array, spheresCount * OFFSET_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, spheresCount * COLOR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, spheresCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    this.setAttribute('offset', new THREE.InstancedBufferAttribute(this._offsets, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('color', new THREE.InstancedBufferAttribute(this._colors, COLOR_SIZE, false, 1));\r\n    this.setAttribute('alphaColor', new THREE.InstancedBufferAttribute(alpha, 1, false, 1));\r\n  }\r\n}\r\nexport default InstancedSpheresGeometry;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * This class adds raycasting interface to indexed\r\n * THREE.BufferGeometry.\r\n * @constructor\r\n */\r\n\r\nclass RaycastableBufferGeometry extends THREE.BufferGeometry {\r\n  // This method was copied from three.js\r\n\r\n  static _vA = new THREE.Vector3();\r\n\r\n  static _vB = new THREE.Vector3();\r\n\r\n  static _vC = new THREE.Vector3();\r\n\r\n\r\n  static _uvA = new THREE.Vector2();\r\n\r\n  static _uvB = new THREE.Vector2();\r\n\r\n  static _uvC = new THREE.Vector2();\r\n\r\n\r\n  static _barycoord = new THREE.Vector3();\r\n\r\n\r\n  static _intersectionPoint = new THREE.Vector3();\r\n\r\n  uvIntersection(point, p1, p2, p3, uv1, uv2, uv3) {\r\n    const barycoord = RaycastableBufferGeometry._barycoord;\r\n    THREE.Triangle.barycoordFromPoint(point, p1, p2, p3, barycoord);\r\n\r\n    uv1.multiplyScalar(barycoord.x);\r\n    uv2.multiplyScalar(barycoord.y);\r\n    uv3.multiplyScalar(barycoord.z);\r\n\r\n    uv1.add(uv2).add(uv3);\r\n    return uv1.clone();\r\n  }\r\n\r\n  checkIntersection(object, raycaster, ray, pA, pB, pC, point) {\r\n    const intersect = ray.intersectTriangle(pA, pB, pC, false, point);\r\n\r\n    if (intersect === null) {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      point: point.clone(),\r\n    };\r\n  }\r\n\r\n  checkBufferGeometryIntersection(object, raycaster, ray, position, uv, a, b, c) {\r\n    const vA = RaycastableBufferGeometry._vA;\r\n    const vB = RaycastableBufferGeometry._vB;\r\n    const vC = RaycastableBufferGeometry._vC;\r\n    const intersectionPoint = RaycastableBufferGeometry._intersectionPoint;\r\n\r\n    vA.fromBufferAttribute(position, a);\r\n    vB.fromBufferAttribute(position, b);\r\n    vC.fromBufferAttribute(position, c);\r\n\r\n    const intersection = this.checkIntersection(\r\n      object, raycaster, ray, vA, vB, vC, intersectionPoint,\r\n    );\r\n    if (intersection) {\r\n      if (uv) {\r\n        const uvA = RaycastableBufferGeometry._uvA;\r\n        const uvB = RaycastableBufferGeometry._uvB;\r\n        const uvC = RaycastableBufferGeometry._uvC;\r\n\r\n        uvA.fromBufferAttribute(uv, a);\r\n        uvB.fromBufferAttribute(uv, b);\r\n        uvC.fromBufferAttribute(uv, c);\r\n        intersection.uv = this.uvIntersection(\r\n          intersectionPoint, vA, vB, vC, uvA, uvB, uvC,\r\n        );\r\n      }\r\n      const normal = new THREE.Vector3();\r\n      THREE.Triangle.getNormal(vA, vB, vC, normal);\r\n      intersection.face = new THREE.Face3(a, b, c, normal);\r\n      intersection.faceIndex = a;\r\n    }\r\n\r\n    return intersection;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const { ray } = raycaster;\r\n    if (this.boundingSphere === null) {\r\n      this.computeBoundingSphere();\r\n    }\r\n\r\n    if (raycaster.ray.intersectsSphere(this.boundingSphere) === false) {\r\n      return;\r\n    }\r\n\r\n    if (this.boundingBox !== null) {\r\n      if (ray.intersectsBox(this.boundingBox) === false) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    let a;\r\n    let b;\r\n    let c;\r\n    const {\r\n      index,\r\n      attributes: { position, uv },\r\n    } = this;\r\n\r\n    if (index === null) {\r\n      return;\r\n    }\r\n    // indexed buffer geometry\r\n    for (let i = 0, l = index.count; i < l; i += 3) {\r\n      a = index.getX(i);\r\n      b = index.getX(i + 1);\r\n      c = index.getX(i + 2);\r\n\r\n      const intersection = this.checkBufferGeometryIntersection(this, raycaster, ray, position, uv, a, b, c);\r\n\r\n      if (intersection) {\r\n        intersection.faceIndex = Math.floor(i / 3); // triangle number in indices buffer semantics\r\n        intersects.push(intersection);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default RaycastableBufferGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport RaycastableBufferGeometry from './RaycastableBufferGeometry';\r\n\r\nconst MAX_IDC_16BIT = 65535;\r\nconst VEC_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\n\r\n/**\r\n * This class represents geometry which consists of separate chunks.\r\n * Each chunk has same index and similar geometry with equal points and faces count.\r\n * Each chunk has by default only one color.\r\n * @constructor\r\n */\r\n\r\nclass ChunkedObjectsGeometry extends RaycastableBufferGeometry {\r\n  constructor(chunkGeo, chunksCount) {\r\n    super();\r\n\r\n    if (this.constructor === ChunkedObjectsGeometry) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n\r\n    this._chunkGeo = chunkGeo;\r\n\r\n    this._init(chunkGeo, chunksCount);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('position').needsUpdate = true;\r\n    this.getAttribute('normal').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    const colors = this._colors;\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = chunkIdx * chunkSize, end = i + chunkSize; i < end; ++i) {\r\n      const idx = i * VEC_SIZE;\r\n      colors[idx] = tmpColor.r;\r\n      colors[idx + 1] = tmpColor.g;\r\n      colors[idx + 2] = tmpColor.b;\r\n    }\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const left = chunkIndices[i] * chunkSize;\r\n      _.fill(alphaArr, value, left, left + chunkSize);\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const inters = [];\r\n    super.raycast(raycaster, inters);\r\n    const facesPerChunk = this._chunkGeo.index.count / 3;\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('faceIndex')) {\r\n        continue;\r\n      }\r\n      inters[i].chunkIdx = Math.floor(inters[i].faceIndex / facesPerChunk);\r\n      intersects.push(inters[i]);\r\n    }\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const geom = new THREE.BufferGeometry();\r\n    this._init.call(geom, this._chunkGeo, instanceCount);\r\n\r\n    const srcPos = this._positions;\r\n    const srcNorm = this._normals;\r\n    const srcColor = this._colors;\r\n\r\n    const dstPos = geom._positions;\r\n    const dstNorm = geom._normals;\r\n    const dstColor = geom._colors;\r\n\r\n    const chunkSize = this._chunkSize * VEC_SIZE;\r\n\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const dstPtOffset = i * chunkSize;\r\n      const ptIdxBegin = chunkIndices[i] * chunkSize;\r\n      const ptIdxEnd = ptIdxBegin + chunkSize;\r\n      dstPos.set(srcPos.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n      dstNorm.set(srcNorm.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n      dstColor.set(srcColor.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n    }\r\n\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  _init(chunkGeo, chunksCount) {\r\n    const chunkSize = this._chunkSize = chunkGeo.attributes.position.count;\r\n    const chunkIndex = chunkGeo.index.array;\r\n    const chunkIndexSize = chunkIndex.length;\r\n    const pointsCount = this._chunkSize * chunksCount;\r\n    const use32bitIndex = pointsCount > MAX_IDC_16BIT;\r\n    const indexSize = chunkIndexSize * chunksCount;\r\n    const index = this._index = utils.allocateTyped(use32bitIndex ? Uint32Array : Uint16Array, indexSize);\r\n    this._positions = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    this._normals = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, pointsCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    for (let i = 0; i < chunksCount; ++i) {\r\n      const offset = i * chunkIndexSize;\r\n      const posOffset = i * chunkSize;\r\n      index.set(chunkIndex, offset);\r\n      for (let j = 0; j < chunkIndexSize; ++j) {\r\n        index[offset + j] += posOffset;\r\n      }\r\n    }\r\n\r\n    this.setIndex(new THREE.BufferAttribute(this._index, 1));\r\n    this.setAttribute('position', new THREE.BufferAttribute(this._positions, VEC_SIZE));\r\n    this.setAttribute('normal', new THREE.BufferAttribute(this._normals, VEC_SIZE));\r\n    this.setAttribute('color', new THREE.BufferAttribute(this._colors, VEC_SIZE));\r\n    this.setAttribute('alphaColor', new THREE.BufferAttribute(alpha, 1));\r\n  }\r\n}\r\nexport default ChunkedObjectsGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst VEC_SIZE = 3;\r\n\r\nclass SimpleSpheresGeometry extends SphereCollisionGeo(ChunkedObjectsGeometry) {\r\n  constructor(spheresCount, sphereComplexity) {\r\n    const sphGeometry = new THREE.SphereBufferGeometry(\r\n      1, sphereComplexity * 2, sphereComplexity,\r\n      0, Math.PI * 2, 0, Math.PI,\r\n    );\r\n    super(spheresCount, sphGeometry, spheresCount);\r\n\r\n    const normals = this._normals;\r\n    const geoNormals = sphGeometry.attributes.normal.array;\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._tmpPositions = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n    for (let i = 0; i < spheresCount; ++i) {\r\n      normals.set(geoNormals, chunkSize * VEC_SIZE * i);\r\n    }\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    const tmpPos = this._tmpPositions;\r\n    const chunkSize = this._chunkSize;\r\n    const geoPos = this._chunkPos;\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      const idx = i * 3;\r\n      tmpPos[idx] = itemPos.x + geoPos[idx] * itemRad;\r\n      tmpPos[idx + 1] = itemPos.y + geoPos[idx + 1] * itemRad;\r\n      tmpPos[idx + 2] = itemPos.z + geoPos[idx + 2] * itemRad;\r\n    }\r\n\r\n    this._positions.set(tmpPos, chunkSize * itemIdx * VEC_SIZE);\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n  }\r\n}\r\nexport default SimpleSpheresGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst centerPos = new THREE.Vector3();\r\nconst tmpVector = new THREE.Vector3();\r\nconst normMtx = new THREE.Matrix3();\r\n\r\n\r\nclass Simple2CCylindersGeometry extends ChunkedObjectsGeometry {\r\n  constructor(instanceCount, polyComplexity) {\r\n    const cylGeometry = new THREE.CylinderBufferGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, true);\r\n    super(cylGeometry, 2 * instanceCount);\r\n\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._chunkNorms = this._chunkGeo.attributes.normal.array;\r\n    this._tmpVector = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n  }\r\n\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const chunkSize = this._chunkSize;\r\n    const firstOffset = chunkSize * 2 * itemIdx * VEC_SIZE;\r\n    const secondOffset = firstOffset + chunkSize * VEC_SIZE;\r\n\r\n    const tmpArray = this._tmpVector;\r\n    const geoPos = this._chunkPos;\r\n    const geoNorm = this._chunkNorms;\r\n\r\n    centerPos.lerpVectors(botPos, topPos, 0.5);\r\n    const mtx1 = gfxutils.calcCylinderMatrix(botPos, centerPos, itemRad);\r\n    normMtx.getNormalMatrix(mtx1);\r\n\r\n    let idx;\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoPos, idx);\r\n      tmpVector.applyMatrix4(mtx1);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._positions.set(tmpArray, firstOffset);\r\n\r\n    // now shift center to get another part of the cylinder\r\n    centerPos.sub(botPos);\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpArray[idx] += centerPos.x;\r\n      tmpArray[idx + 1] += centerPos.y;\r\n      tmpArray[idx + 2] += centerPos.z;\r\n    }\r\n    this._positions.set(tmpArray, secondOffset);\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoNorm, idx);\r\n      tmpVector.applyMatrix3(normMtx);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._normals.set(tmpArray, firstOffset);\r\n    this._normals.set(tmpArray, secondOffset);\r\n  }\r\n\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const first = 2 * itemIdx;\r\n    super.setColor(first, colorVal1);\r\n\r\n    const second = first + 1;\r\n    super.setColor(second, colorVal2);\r\n  }\r\n}\r\n\r\nexport default Simple2CCylindersGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst MAX_POINTS_COUNT_16BIT = 65536;\r\nconst PTS_PER_TRIANGLE = 3;\r\n\r\nclass CylinderBufferGeometry extends THREE.BufferGeometry {\r\n  constructor(\r\n    radiusTop,\r\n    radiusBottom,\r\n    height,\r\n    radialSegments,\r\n    heightSegments,\r\n    openEnded,\r\n  ) {\r\n    super();\r\n\r\n    const thetaStart = 0;\r\n    const thetaLength = 2 * Math.PI;\r\n\r\n\r\n    this.type = 'CylinderBufferGeometry';\r\n\r\n    this.parameters = {\r\n      radiusTop,\r\n      radiusBottom,\r\n      height,\r\n      radialSegments,\r\n      heightSegments,\r\n      openEnded,\r\n    };\r\n\r\n    const hasTop = openEnded === false && radiusTop > 0;\r\n    const hasBottom = openEnded === false && radiusBottom > 0;\r\n    const vertexCount = (heightSegments + 1) * radialSegments\r\n      + hasTop * (radialSegments + 1)\r\n      + hasBottom * (radialSegments + 1);\r\n    const facesCount = (2 * heightSegments + hasTop + hasBottom) * radialSegments;\r\n\r\n    const heightHalf = height / 2;\r\n\r\n    /* eslint-disable no-magic-numbers */\r\n    const positions = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 3), 3);\r\n    const normals = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 3), 3);\r\n    const indices = new THREE.Uint16BufferAttribute(utils.allocateTyped(Uint16Array, facesCount * PTS_PER_TRIANGLE), 1);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    const uvs = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 2), 2);\r\n    console.assert(vertexCount < MAX_POINTS_COUNT_16BIT, 'DEBUG: Cylinder Geometry has too many vertices (65536 max).');\r\n\r\n    let currVtxIdx = 0;\r\n    let currFaceIdx = 0;\r\n    const tanTheta = -(radiusBottom - radiusTop) / height;\r\n\r\n    // setup cylinder data\r\n    for (let y = 0; y <= heightSegments; y++) {\r\n      // faces\r\n      if (y !== heightSegments) {\r\n        for (let i = 0; i < radialSegments; i++) {\r\n          const v1 = currVtxIdx + i;\r\n          const v2 = currVtxIdx + radialSegments + i;\r\n          const v3 = currVtxIdx + radialSegments + ((i + 1) % radialSegments);\r\n          const v4 = currVtxIdx + ((i + 1) % radialSegments);\r\n\r\n          indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, v1, v4, v2);\r\n          currFaceIdx++;\r\n          indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, v2, v4, v3);\r\n          currFaceIdx++;\r\n        }\r\n      }\r\n\r\n      // vertices\r\n      const v = y / heightSegments;\r\n      const radius = v * (radiusBottom - radiusTop) + radiusTop;\r\n\r\n      for (let x = 0; x < radialSegments; x++) {\r\n        const u = x / radialSegments;\r\n\r\n        const vx = radius * Math.sin(u * thetaLength + thetaStart);\r\n        const vy = v * height - heightHalf;\r\n        const vz = radius * Math.cos(u * thetaLength + thetaStart);\r\n\r\n        const normal = new THREE.Vector3(\r\n          vx,\r\n          Math.sqrt(vx * vx + vz * vz) * tanTheta,\r\n          vz,\r\n        ).normalize();\r\n\r\n        positions.setXYZ(currVtxIdx, vx, vy, vz);\r\n        normals.setXYZ(currVtxIdx, normal.x, normal.y, normal.z);\r\n        uvs.setXY(currVtxIdx, u, v);\r\n        ++currVtxIdx;\r\n      }\r\n    }\r\n\r\n    // top cap\r\n    if (hasTop) {\r\n      const startTIdx = currVtxIdx;\r\n      const lastIdx = currVtxIdx + radialSegments;\r\n      for (let fTIdx = 0; fTIdx < radialSegments; ++fTIdx) {\r\n        const currSrcIdx = currVtxIdx - radialSegments;\r\n        positions.setXYZ(\r\n          currVtxIdx,\r\n          positions.getX(currSrcIdx),\r\n          positions.getY(currSrcIdx),\r\n          positions.getZ(currSrcIdx),\r\n        );\r\n        normals.setXYZ(currVtxIdx, 0, 1, 0);\r\n        uvs.setXY(currVtxIdx, 1, 1);\r\n\r\n\r\n        const nextTVtx = startTIdx + ((fTIdx + 1) % radialSegments);\r\n        indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, currVtxIdx, nextTVtx, lastIdx);\r\n        currFaceIdx++;\r\n        currVtxIdx++;\r\n      }\r\n\r\n      positions.setXYZ(currVtxIdx, 0, heightHalf, 0);\r\n      normals.setXYZ(currVtxIdx, 0, 1, 0);\r\n      uvs.setXY(currVtxIdx, 1, 1);\r\n      ++currVtxIdx;\r\n    }\r\n\r\n    // bottom cap\r\n    if (hasBottom) {\r\n      const startBIdx = currVtxIdx;\r\n      const lastBIdx = currVtxIdx + radialSegments;\r\n      for (let fBIdx = 0; fBIdx < radialSegments; ++fBIdx) {\r\n        const currSrcBIdx = fBIdx;\r\n        positions.setXYZ(\r\n          currVtxIdx,\r\n          positions.getX(currSrcBIdx), positions.getY(currSrcBIdx), positions.getZ(currSrcBIdx),\r\n        );\r\n        normals.setXYZ(currVtxIdx, 0, -1, 0);\r\n        uvs.setXY(currVtxIdx, 0, 0);\r\n\r\n\r\n        const nextBVtx = startBIdx + ((fBIdx + 1) % radialSegments);\r\n        indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, nextBVtx, currVtxIdx, lastBIdx);\r\n        currFaceIdx++;\r\n        currVtxIdx++;\r\n      }\r\n\r\n      positions.setXYZ(currVtxIdx, 0, -heightHalf, 0);\r\n      normals.setXYZ(currVtxIdx, 0, -1, 0);\r\n      uvs.setXY(currVtxIdx, 0, 0);\r\n    }\r\n\r\n    this.setIndex(indices);\r\n    this.setAttribute('position', positions);\r\n    this.setAttribute('normal', normals);\r\n    this.setAttribute('uv', uvs);\r\n  }\r\n\r\n  clone() {\r\n    const { parameters } = this;\r\n\r\n    return new CylinderBufferGeometry(\r\n      parameters.radiusTop,\r\n      parameters.radiusBottom,\r\n      parameters.height,\r\n      parameters.radialSegments,\r\n      parameters.heightSegments,\r\n      parameters.openEnded,\r\n    );\r\n  }\r\n}\r\n\r\nexport default CylinderBufferGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\nimport CylinderBufferGeometry from './CylinderBufferGeometry';\r\n\r\nconst tmpColor = new THREE.Color();\r\nconst invMatrix = new THREE.Matrix4();\r\n\r\nconst OFFSET_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst { copySubArrays } = utils;\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\n\r\nfunction sortNumber(a, b) {\r\n  return a - b;\r\n}\r\n\r\nfunction _prepareCylinderInfo(chunkIndices) {\r\n  chunkIndices.sort(sortNumber);\r\n  const chunksIdx = [];\r\n  const cylinderInfo = [];\r\n  for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n    const val = chunkIndices[i];\r\n    const even = (val | 0) % 2 === 0;\r\n    const newPar = {\r\n      first: false,\r\n      second: false,\r\n    };\r\n    if (even) {\r\n      newPar.first = true;\r\n      newPar.second = i + 1 < n && chunkIndices[i + 1] === chunkIndices[i] + 1;\r\n      if (newPar.second) {\r\n        ++i;\r\n      }\r\n    } else {\r\n      newPar.second = true;\r\n    }\r\n    chunksIdx.push(Math.floor(val / 2));\r\n    cylinderInfo.push(newPar);\r\n  }\r\n  return { indices: chunksIdx, cylinderInfo };\r\n}\r\n\r\nfunction _assignOpacity(cylinderInfo, color1, color2) {\r\n  for (let i = 0, n = cylinderInfo.length; i < n; ++i) {\r\n    const info = cylinderInfo[i];\r\n    if (!info.first) {\r\n      color1[COLOR_SIZE * i] = -0.5;\r\n    }\r\n    if (!info.second) {\r\n      color2[COLOR_SIZE * i] = -0.5;\r\n    }\r\n  }\r\n}\r\nclass Instanced2CCylindersGeometry extends THREE.InstancedBufferGeometry {\r\n  constructor(instanceCount, polyComplexity, useZSprites, openEnded) {\r\n    super();\r\n    this._useZSprites = useZSprites;\r\n    this._cylGeometry = useZSprites ? new THREE.PlaneBufferGeometry(2, 2, 1, 1)\r\n      : new CylinderBufferGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, openEnded);\r\n    this._init(instanceCount, this._cylGeometry, this._useZSprites);\r\n\r\n    this._collisionGeo = new Simple2CCylindersGeometry(instanceCount, 3);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const matrix = gfxutils.calcCylinderMatrix(botPos, topPos, itemRad);\r\n    let me = matrix.elements;\r\n    const mtxOffset = itemIdx * OFFSET_SIZE;\r\n\r\n    this._collisionGeo.setItem(itemIdx, botPos, topPos, itemRad);\r\n    setArrayXYZW(this._matVector1, mtxOffset, me[0], me[4], me[8], me[12]);\r\n    setArrayXYZW(this._matVector2, mtxOffset, me[1], me[5], me[9], me[13]);\r\n    setArrayXYZW(this._matVector3, mtxOffset, me[2], me[6], me[10], me[14]);\r\n\r\n    if (this._useZSprites) {\r\n      invMatrix.getInverse(matrix);\r\n      me = invMatrix.elements;\r\n      setArrayXYZW(this._invmatVector1, mtxOffset, me[0], me[4], me[8], me[12]);\r\n      setArrayXYZW(this._invmatVector2, mtxOffset, me[1], me[5], me[9], me[13]);\r\n      setArrayXYZW(this._invmatVector3, mtxOffset, me[2], me[6], me[10], me[14]);\r\n    }\r\n  }\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const colorIdx = itemIdx * COLOR_SIZE;\r\n    tmpColor.set(colorVal1);\r\n    setArrayXYZ(this._color1, colorIdx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    tmpColor.set(colorVal2);\r\n    setArrayXYZ(this._color2, colorIdx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    this._collisionGeo.computeBoundingSphere();\r\n    this.boundingSphere = this._collisionGeo.boundingSphere;\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    this._collisionGeo.computeBoundingBox();\r\n    this.boundingBox = this._collisionGeo.boundingBox;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    this._collisionGeo.raycast(raycaster, intersects);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('matVector1').needsUpdate = true;\r\n    this.getAttribute('matVector2').needsUpdate = true;\r\n    this.getAttribute('matVector3').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n    this.getAttribute('color2').needsUpdate = true;\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n    if (this._useZSprites) {\r\n      this.getAttribute('invmatVector1').needsUpdate = true;\r\n      this.getAttribute('invmatVector2').needsUpdate = true;\r\n      this.getAttribute('invmatVector3').needsUpdate = true;\r\n    }\r\n\r\n    this._collisionGeo.finishUpdate();\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      alphaArr[Math.floor(chunkIndices[i] / 2)] = value;\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const info = _prepareCylinderInfo(chunkIndices);\r\n    const cylinderIndices = info.indices;\r\n    const instanceCount = cylinderIndices.length;\r\n    const geom = new THREE.InstancedBufferGeometry();\r\n    this._init.call(geom, instanceCount, this._cylGeometry, this._useZSprites);\r\n\r\n    copySubArrays(this._matVector1, geom._matVector1, cylinderIndices, OFFSET_SIZE);\r\n    copySubArrays(this._matVector2, geom._matVector2, cylinderIndices, OFFSET_SIZE);\r\n    copySubArrays(this._matVector3, geom._matVector3, cylinderIndices, OFFSET_SIZE);\r\n\r\n    if (this._useZSprites) {\r\n      copySubArrays(this._invmatVector1, geom._invmatVector1, cylinderIndices, OFFSET_SIZE);\r\n      copySubArrays(this._invmatVector2, geom._invmatVector2, cylinderIndices, OFFSET_SIZE);\r\n      copySubArrays(this._invmatVector3, geom._invmatVector3, cylinderIndices, OFFSET_SIZE);\r\n    }\r\n\r\n    copySubArrays(this._color1, geom._color1, cylinderIndices, COLOR_SIZE);\r\n    copySubArrays(this._color2, geom._color2, cylinderIndices, COLOR_SIZE);\r\n    _assignOpacity(info.cylinderInfo, geom._color1, geom._color2);\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  getGeoParams() {\r\n    return this._cylGeometry.parameters;\r\n  }\r\n\r\n  _init(instanceCount, cylinderGeo, useZSprites) {\r\n    this.copy(cylinderGeo);\r\n    this._matVector1 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._matVector2 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._matVector3 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._color1 = utils.allocateTyped(Float32Array, instanceCount * COLOR_SIZE);\r\n    this._color2 = utils.allocateTyped(Float32Array, instanceCount * COLOR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, instanceCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    this.setAttribute('matVector1', new THREE.InstancedBufferAttribute(this._matVector1, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('matVector2', new THREE.InstancedBufferAttribute(this._matVector2, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('matVector3', new THREE.InstancedBufferAttribute(this._matVector3, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('color', new THREE.InstancedBufferAttribute(this._color1, COLOR_SIZE, false, 1));\r\n    this.setAttribute('color2', new THREE.InstancedBufferAttribute(this._color2, COLOR_SIZE, false, 1));\r\n\r\n    this.setAttribute('alphaColor', new THREE.InstancedBufferAttribute(this._alpha, 1, false, 1));\r\n\r\n    if (useZSprites) {\r\n      this._invmatVector1 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n      this._invmatVector2 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n      this._invmatVector3 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n\r\n      this.setAttribute(\r\n        'invmatVector1',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector1, OFFSET_SIZE, false, 1),\r\n      );\r\n      this.setAttribute(\r\n        'invmatVector2',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector2, OFFSET_SIZE, false, 1),\r\n      );\r\n      this.setAttribute(\r\n        'invmatVector3',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector3, OFFSET_SIZE, false, 1),\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Instanced2CCylindersGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst TRI_SIZE = 3;\r\nconst tmpPrev = new THREE.Vector3();\r\nconst tmpNext = new THREE.Vector3();\r\nconst tmpRes = new THREE.Vector3();\r\nconst simpleNormal = new THREE.Vector3(1.0, 0.0, 0.0);\r\nconst normalOnCut = new THREE.Vector3();\r\nconst nearRingPt = new THREE.Vector3();\r\n\r\nfunction _createExtrudedChunkGeometry(shape, ringsCount) {\r\n  const geo = new THREE.BufferGeometry();\r\n  const ptsCount = shape.length;\r\n  const totalPts = ptsCount * ringsCount;\r\n  const type = totalPts <= 65536 ? Uint16Array : Uint32Array;\r\n  const facesPerChunk = (ringsCount - 1) * ptsCount * 2;\r\n  const indices = new THREE.BufferAttribute(utils.allocateTyped(type, facesPerChunk * TRI_SIZE), 1);\r\n\r\n  let currVtxIdx = 0;\r\n  let currFaceIdx = 0;\r\n  for (let y = 0; y < ringsCount; y++) {\r\n    // faces\r\n    if (y !== ringsCount - 1) {\r\n      for (let i = 0; i < ptsCount; i++) {\r\n        const v1 = currVtxIdx + i;\r\n        const v2 = currVtxIdx + ptsCount + i;\r\n        const v3 = currVtxIdx + ptsCount + ((i + 1) % ptsCount);\r\n        const v4 = currVtxIdx + ((i + 1) % ptsCount);\r\n\r\n        indices.setXYZ(currFaceIdx * TRI_SIZE, v1, v4, v2);\r\n        currFaceIdx++;\r\n        indices.setXYZ(currFaceIdx * TRI_SIZE, v2, v4, v3);\r\n        currFaceIdx++;\r\n      }\r\n    }\r\n\r\n    currVtxIdx += ptsCount;\r\n  }\r\n\r\n  geo.setIndex(indices);\r\n  const pos = utils.allocateTyped(Float32Array, totalPts * VEC_SIZE);\r\n  geo.setAttribute('position', new THREE.BufferAttribute(pos, VEC_SIZE));\r\n\r\n  geo._positions = shape;\r\n\r\n  return geo;\r\n}\r\n\r\nclass ExtrudedObjectsGeometry extends ChunkedObjectsGeometry {\r\n  constructor(shape, ringsCount, chunksCount) {\r\n    const chunkGeo = _createExtrudedChunkGeometry(shape, ringsCount);\r\n    super(chunkGeo, chunksCount);\r\n    this._ringsCount = ringsCount;\r\n\r\n    const tmpShape = this._tmpShape = [];\r\n    for (let i = 0; i < shape.length; ++i) {\r\n      tmpShape[i] = new THREE.Vector3();\r\n    }\r\n  }\r\n\r\n  setItem(itemIdx, matrices, hasSlope = false, hasCut = false) {\r\n    const ptsCount = this._chunkGeo._positions.length;\r\n    const ringsCount = this._ringsCount;\r\n    const chunkStartIdx = ptsCount * this._ringsCount * itemIdx * VEC_SIZE;\r\n\r\n    this._setPoints(matrices, ptsCount, ringsCount, chunkStartIdx);\r\n\r\n    if (hasSlope) {\r\n      this._setSlopeNormals(ptsCount, ringsCount, chunkStartIdx);\r\n    } else {\r\n      this._setBaseNormals(ptsCount, ringsCount, chunkStartIdx);\r\n    }\r\n\r\n    if (hasCut) {\r\n      this._addCut(ptsCount, ringsCount, chunkStartIdx);\r\n    }\r\n  }\r\n\r\n  _setPoints(matrices, ptsCount, ringsCount, chunkStartIdx) {\r\n    const tmpShape = this._tmpShape;\r\n    const positions = this._positions;\r\n    const shape = this._chunkGeo._positions;\r\n\r\n    for (let i = 0, vtxIdx = chunkStartIdx; i < ringsCount; ++i) {\r\n      const mtx = matrices[i];\r\n\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpShape[j].copy(shape[j]).applyMatrix4(mtx).toArray(positions, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  _setBaseNormals(ptsCount, ringsCount, chunkStartIdx) {\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    for (let i = 0, vtxIdx = chunkStartIdx; i < ringsCount; ++i, vtxIdx += nPtsInRing) {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, false);\r\n    }\r\n  }\r\n\r\n  _setSlopeNormals(ptsCount, ringsCount, chunkStartIdx) {\r\n    const normals = this._normals;\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    let vtxIdx = chunkStartIdx;\r\n    // First ring\r\n    // In all cases, besides cut, second ring is coincident to first. So values of first ring's normals doesn't\r\n    // matter (In the cut case special handler will be applied later and will set them to correct values)\r\n    for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n      simpleNormal.toArray(normals, vtxIdx);\r\n    }\r\n    // second ring\r\n    // If it isn't first Item we take normals' values from the last ring of the previous item (these rings are coincident)\r\n    // else we count normals' values based on next ring information\r\n    if (vtxIdx - 2 * nPtsInRing > 0) {\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpRes.fromArray(normals, vtxIdx - 2 * nPtsInRing).toArray(normals, vtxIdx);\r\n      }\r\n    } else {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, true, +nPtsInRing);\r\n      vtxIdx += nPtsInRing;\r\n    }\r\n    // other rings\r\n    // we count normals' values based on previous ring information\r\n    for (let i = 2; i < ringsCount; ++i, vtxIdx += nPtsInRing) {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, true, -nPtsInRing);\r\n    }\r\n  }\r\n\r\n  // Counting normals:\r\n  // - Slope\r\n  //   Radius changes throught part => normals aren't parallel with the plane contains section points\r\n  //   normal = vTangentInSectionPlane x vToSuchPointInPrevSection (all vectors are scaled for being 1 in length)\r\n  // - No slope\r\n  //   Radius doesn't change throught part => normals are parallel with the plane contains section points\r\n  //   normal = vToPrevPointInSection + vToNextPointInSection (all vectors are scaled for being 1 in length)\r\n  _countNormalsInRing(ptsCount, vtxIdx, isSlope, shiftToExtraPt) {\r\n    const tmpShape = this._tmpShape;\r\n    const normals = this._normals;\r\n\r\n    tmpShape[0].fromArray(this._positions, vtxIdx);\r\n    tmpShape[ptsCount - 1].fromArray(this._positions, vtxIdx + (ptsCount - 1) * VEC_SIZE);\r\n\r\n    for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n      if (j < ptsCount - 1) {\r\n        tmpShape[j + 1].fromArray(this._positions, vtxIdx + VEC_SIZE);\r\n      }\r\n\r\n      if (isSlope) {\r\n        nearRingPt.fromArray(this._positions, vtxIdx + shiftToExtraPt);\r\n\r\n        tmpPrev.subVectors(tmpShape[(j + ptsCount - 1) % ptsCount], tmpShape[(j + 1) % ptsCount]).normalize();\r\n        tmpNext.subVectors(tmpShape[j], nearRingPt).normalize();\r\n        tmpRes.crossVectors(tmpNext, tmpPrev).normalize().toArray(normals, vtxIdx);\r\n      } else {\r\n        tmpPrev.subVectors(tmpShape[j], tmpShape[(j + ptsCount - 1) % ptsCount]).normalize();\r\n        tmpNext.subVectors(tmpShape[j], tmpShape[(j + 1) % ptsCount]).normalize();\r\n        tmpRes.addVectors(tmpPrev, tmpNext).normalize().toArray(normals, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  _addCut(ptsCount, ringsCount, chunkStartIdx) {\r\n    // Nothing to do if item is flat or only line\r\n    if (ptsCount < 3 || ringsCount < 2) {\r\n      return;\r\n    }\r\n    const positions = this._positions;\r\n    const normals = this._normals;\r\n    const tmpShape = this._tmpShape;\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    // Normal to the cut plane is equal to cross product of two vectors which are lying in it\r\n    tmpShape[0].fromArray(positions, chunkStartIdx);\r\n    tmpShape[1].fromArray(positions, chunkStartIdx + VEC_SIZE);\r\n    tmpShape[2].fromArray(positions, chunkStartIdx + 2 * VEC_SIZE);\r\n\r\n    tmpPrev.subVectors(tmpShape[1], tmpShape[0]).normalize();\r\n    tmpNext.subVectors(tmpShape[1], tmpShape[2]).normalize();\r\n    normalOnCut.crossVectors(tmpPrev, tmpNext).normalize();\r\n\r\n    let vtxIdx = chunkStartIdx;\r\n    // First and second rings normals' values are equal to value of normal to the cutting plane\r\n    for (let j = 0; j < ptsCount * 2; ++j, vtxIdx += VEC_SIZE) {\r\n      normalOnCut.toArray(normals, vtxIdx);\r\n    }\r\n    if (ringsCount > 2) {\r\n      // Third ring points are coincident to first ring points, but have different normals. It makes sharp angle near cut\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpRes.fromArray(positions, vtxIdx - nPtsInRing).toArray(positions, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ExtrudedObjectsGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst MAX_IDC_16BIT = 65535;\r\nconst VERTEX_PER_SEGMENT = 4;\r\nconst POS_SIZE = 4;\r\nconst DIR_SIZE = 3;\r\nconst COL_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\nconst direction = new THREE.Vector3();\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\n\r\nfunction getSubset(arr, startSegmentIdx, segmentsCount, elemSize) {\r\n  const start = startSegmentIdx * VERTEX_PER_SEGMENT;\r\n  const end = start + segmentsCount * VERTEX_PER_SEGMENT;\r\n  return arr.subarray(start * elemSize, end * elemSize);\r\n}\r\n\r\n/**\r\n * This class represents lines geometry which consists of screen-aligned narrow quad of variable width.\r\n *\r\n * @constructor\r\n *\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n * collision geometry.\r\n */\r\n\r\nclass ThickLinesGeometry extends THREE.BufferGeometry {\r\n  constructor(segmentsCount) {\r\n    super();\r\n    this._initVertices(segmentsCount);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('position').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n    this.getAttribute('direction').needsUpdate = true;\r\n  }\r\n\r\n  setColor(segmentIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    let idx = segmentIdx * VERTEX_PER_SEGMENT * COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  setSegment(segmentIdx, pos1, pos2) {\r\n    direction.subVectors(pos1, pos2);\r\n    direction.normalize();\r\n    const positions = this._positions;\r\n    const directions = this._directions;\r\n    let idx = segmentIdx * VERTEX_PER_SEGMENT * POS_SIZE;\r\n    let dirIdx = segmentIdx * VERTEX_PER_SEGMENT * DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos1.x, pos1.y, pos1.z, 0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos1.x, pos1.y, pos1.z, -0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos2.x, pos2.y, pos2.z, 0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos2.x, pos2.y, pos2.z, -0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n  }\r\n\r\n  setOpacity(startSegIdx, endSegIdx, value) {\r\n    const start = startSegIdx * VERTEX_PER_SEGMENT;\r\n    const end = endSegIdx * VERTEX_PER_SEGMENT;\r\n    _.fill(this.alpha, value, end, start);\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubsetSegments(startSegmentIdx, segmentsCount) {\r\n    return [\r\n      getSubset(this._positions, startSegmentIdx, segmentsCount, POS_SIZE),\r\n      getSubset(this._directions, startSegmentIdx, segmentsCount, DIR_SIZE),\r\n    ];\r\n  }\r\n\r\n  getSubsetColors(startSegmentIdx, segmentsCount) {\r\n    return getSubset(this._colors, startSegmentIdx, segmentsCount, COL_SIZE);\r\n  }\r\n\r\n  getSubsetOpacities(startSegmentIdx, segmentsCount) {\r\n    return getSubset(this._alpha, startSegmentIdx, segmentsCount, 1);\r\n  }\r\n\r\n  getNumVertexPerSegment() {\r\n    return VERTEX_PER_SEGMENT;\r\n  }\r\n\r\n  getPositionSize() {\r\n    return POS_SIZE;\r\n  }\r\n\r\n  setSegments(startSegmentIdx, positions) {\r\n    const startPos = startSegmentIdx * VERTEX_PER_SEGMENT * POS_SIZE;\r\n    if (positions instanceof Array && positions.length === 2) {\r\n      this._positions.set(positions[0], startPos);\r\n      const startDir = startSegmentIdx * VERTEX_PER_SEGMENT * DIR_SIZE;\r\n      this._directions.set(positions[1], startDir); // dirs are geo part of vertex\r\n    } else {\r\n      this._positions.set(positions, startPos);\r\n    }\r\n  }\r\n\r\n  setColors(startSegmentIdx, colors) {\r\n    const start = startSegmentIdx * VERTEX_PER_SEGMENT * COL_SIZE;\r\n    this._colors.set(colors, start);\r\n  }\r\n\r\n  _initVertices(segmentsCount) {\r\n    this._buffersSize = segmentsCount * VERTEX_PER_SEGMENT;\r\n    const pointsCount = this._buffersSize;\r\n    const use32bitIndex = pointsCount > MAX_IDC_16BIT;\r\n    this._index = utils.allocateTyped(use32bitIndex ? Uint32Array : Uint16Array, segmentsCount * 6);\r\n    this._positions = utils.allocateTyped(Float32Array, pointsCount * POS_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, pointsCount * COL_SIZE);\r\n    this._directions = utils.allocateTyped(Float32Array, pointsCount * DIR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, pointsCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    const index = this._index;\r\n    let indexOffset = 0;\r\n    let pointOffset = 0;\r\n    for (let j = 0; j < segmentsCount; j++, indexOffset += 6, pointOffset += VERTEX_PER_SEGMENT) {\r\n      index[indexOffset] = pointOffset;\r\n      index[indexOffset + 1] = pointOffset + 1;\r\n      index[indexOffset + 2] = pointOffset + 3;\r\n      index[indexOffset + 3] = pointOffset;\r\n      index[indexOffset + 4] = pointOffset + 2;\r\n      index[indexOffset + 5] = pointOffset + 3;\r\n    }\r\n    this.setIndex(new THREE.BufferAttribute(this._index, 1));\r\n\r\n    this.setAttribute('position', new THREE.BufferAttribute(this._positions, POS_SIZE));\r\n    this.setAttribute('color', new THREE.BufferAttribute(this._colors, COL_SIZE));\r\n    this.setAttribute('alphaColor', new THREE.BufferAttribute(alpha, 1));\r\n    this.setAttribute('direction', new THREE.BufferAttribute(this._directions, DIR_SIZE));\r\n  }\r\n}\r\n\r\n\r\nexport default ThickLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport BaseLinesGeometry from './ThickLinesGeometry';\r\n\r\n/**\r\n * This class represents geometry which consists lines. This can build bounding volumes\r\n * @constructor\r\n *\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n */\r\nclass LinesGeometry extends BaseLinesGeometry {\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    const { boundingBox } = this;\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    if (boundingBox) {\r\n      boundingBox.getCenter(center);\r\n    }\r\n    const positions = this._positions;\r\n    const sphere = this.boundingSphere || new THREE.Sphere();\r\n    const size = this._positions.length;\r\n    const pos = new THREE.Vector3();\r\n    const posSize = this.getPositionSize();\r\n    for (let i = 0; i < size; i += posSize) {\r\n      pos.set(positions[i], positions[i + 1], positions[i + 2]);\r\n      const lengthSquared = center.distanceToSquared(pos);\r\n      if (radiusSquared < lengthSquared) {\r\n        radiusSquared = lengthSquared;\r\n      }\r\n    }\r\n    sphere.set(center, Math.sqrt(radiusSquared));\r\n    this.boundingSphere = sphere;\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const positions = this._positions;\r\n    const box = new THREE.Box3();\r\n    const size = this._positions.length;\r\n    const tmpVec = new THREE.Vector3();\r\n    const posSize = this.getPositionSize();\r\n    for (let i = 0; i < size; i += posSize) {\r\n      tmpVec.set(positions[i], positions[i + 1], positions[i + 2]);\r\n      box.expandByPoint(tmpVec);\r\n    }\r\n    this.boundingBox = box;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n}\r\n\r\nexport default LinesGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst tmpVector = new THREE.Vector3();\r\nconst normMtx = new THREE.Matrix3();\r\n\r\nclass CylinderCollisionGeo extends ChunkedObjectsGeometry {\r\n  constructor(instanceCount, polyComplexity) {\r\n    const cylGeometry = new THREE.CylinderBufferGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, true);\r\n    super(cylGeometry, instanceCount);\r\n\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._chunkNorms = this._chunkGeo.attributes.normal.array;\r\n    this._tmpVector = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const chunkSize = this._chunkSize;\r\n    const itemOffset = chunkSize * itemIdx * VEC_SIZE;\r\n\r\n    const tmpArray = this._tmpVector;\r\n    const geoPos = this._chunkPos;\r\n    const geoNorm = this._chunkNorms;\r\n\r\n    const mtx1 = gfxutils.calcCylinderMatrix(botPos, topPos, itemRad);\r\n    normMtx.getNormalMatrix(mtx1);\r\n    let idx;\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoPos, idx);\r\n      tmpVector.applyMatrix4(mtx1);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._positions.set(tmpArray, itemOffset);\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoNorm, idx);\r\n      tmpVector.applyMatrix3(normMtx);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._normals.set(tmpArray, itemOffset);\r\n  }\r\n}\r\nexport default CylinderCollisionGeo;\r\n","import LinesGeometry from './LinesGeometry';\r\nimport CylinderCollisionGeo from './CylinderCollisionGeo';\r\n\r\nconst COLLISION_RAD = 0.1;\r\n\r\n/**\r\n * This class represents geometry which consists of separate chunks.\r\n * Each chunk has same index and similar geometry with equal points and faces count.\r\n * Each chunk has by default only one color.\r\n * @constructor\r\n *\r\n * @param {number}  chunksCount     Total chunks count.\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n * @param {boolean} enableCollision Enable or disable collision where each segment is\r\n *                                  a collidable cylinder.\r\n * collision geometry.\r\n */\r\nclass ChunkedLinesGeometry extends LinesGeometry {\r\n  constructor(chunksCount, segmentsCount, enableCollision) {\r\n    super(chunksCount * segmentsCount);\r\n    this._init(segmentsCount);\r\n    this._collisionGeo = enableCollision ? new CylinderCollisionGeo(chunksCount * segmentsCount, 3) : null;\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (collisionGeo) {\r\n      collisionGeo.computeBoundingSphere();\r\n      this.boundingSphere = collisionGeo.boundingSphere;\r\n      return;\r\n    }\r\n    super.computeBoundingSphere();\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (collisionGeo) {\r\n      collisionGeo.computeBoundingBox();\r\n      this.boundingBox = collisionGeo.boundingBox;\r\n      return;\r\n    }\r\n    super.computeBoundingBox();\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (!collisionGeo) {\r\n      return;\r\n    }\r\n    const segCount = this._chunkSize;\r\n    this._collisionGeo.raycast(raycaster, intersects);\r\n    for (let i = 0, n = intersects.length; i < n; ++i) {\r\n      let { chunkIdx } = intersects[i];\r\n      if (chunkIdx === undefined) {\r\n        continue;\r\n      }\r\n      chunkIdx = (chunkIdx / segCount) | 0;\r\n      intersects[i].chunkIdx = chunkIdx;\r\n    }\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = chunkIdx * chunkSize, end = i + chunkSize; i < end; ++i) {\r\n      super.setColor(i, colorVal);\r\n    }\r\n  }\r\n\r\n  setSegment(chunkIdx, segIdx, pos1, pos2) {\r\n    const chunkSize = this._chunkSize;\r\n    const idx = chunkIdx * chunkSize + segIdx;\r\n    super.setSegment(idx, pos1, pos2);\r\n    if (this._collisionGeo) {\r\n      this._collisionGeo.setItem(chunkIdx * chunkSize + segIdx, pos1, pos2, COLLISION_RAD);\r\n    }\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const left = chunkIndices[i] * chunkSize;\r\n      super.setOpacity(left, left + chunkSize - 1, value);\r\n    }\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const chunkSize = this._chunkSize;\r\n    const subset = new ChunkedLinesGeometry(instanceCount, chunkSize, false);\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const dstPtOffset = i * chunkSize;\r\n      const startSegIdx = chunkIndices[i] * chunkSize;\r\n      subset.setSegments(dstPtOffset, this.getSubsetSegments(startSegIdx, chunkSize));\r\n      subset.setColors(dstPtOffset, this.getSubsetColors(startSegIdx, chunkSize));\r\n    }\r\n\r\n    subset.boundingSphere = this.boundingSphere;\r\n    subset.boundingBox = this.boundingBox;\r\n    return [subset];\r\n  }\r\n\r\n  _init(chunkSize) {\r\n    this._chunkSize = chunkSize;\r\n  }\r\n}\r\n\r\nexport default ChunkedLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport LinesGeometry from './LinesGeometry';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\n\r\nconst COLLISION_RAD = 0.3;\r\nconst tmpVector = new THREE.Vector3();\r\n\r\n\r\nclass TwoColorLinesGeometry extends LinesGeometry {\r\n  constructor(segmentsCount) {\r\n    super(segmentsCount * 2);\r\n    this._init(segmentsCount);\r\n    this._collisionGeo = new Simple2CCylindersGeometry(segmentsCount, 3);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos) {\r\n    this._collisionGeo.setItem(itemIdx, botPos, topPos, COLLISION_RAD);\r\n    const offset = 2 * itemIdx;// there are two points per segment\r\n    tmpVector.lerpVectors(botPos, topPos, 0.5);\r\n    super.setSegment(offset, botPos, tmpVector);\r\n    super.setSegment(offset + 1, tmpVector, topPos);\r\n  }\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const offset = 2 * itemIdx;// there are two points per segment\r\n    super.setColor(offset, colorVal1);\r\n    super.setColor(offset + 1, colorVal2);\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    if (this._collisionGeo) {\r\n      this._collisionGeo.raycast(raycaster, intersects);\r\n    }\r\n  }\r\n\r\n  getSubset(segmentIndices) {\r\n    const instanceCount = segmentIndices.length;\r\n    const subset = new TwoColorLinesGeometry(instanceCount, false);\r\n    for (let i = 0, n = instanceCount; i < n; ++i) {\r\n      const startSegIdx = segmentIndices[i];\r\n      subset.setSegments(i, this.getSubsetSegments(startSegIdx, 1));\r\n      subset.setColors(i, this.getSubsetColors(startSegIdx, 1));\r\n    }\r\n\r\n    subset.boundingSphere = this.boundingSphere;\r\n    subset.boundingBox = this.boundingBox;\r\n    return [subset];\r\n  }\r\n\r\n  _init(segmentsCount) {\r\n    this._segCounts = segmentsCount * 2;\r\n  }\r\n}\r\n// (???)parent = LinesGeometry.prototype;\r\n\r\nexport default TwoColorLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport ChunkedLinesGeometry from './ChunkedLinesGeometry';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst vectors = [\r\n  new THREE.Vector3(1, 0, 0),\r\n  new THREE.Vector3(-1, 0, 0),\r\n  new THREE.Vector3(0, 1, 0),\r\n  new THREE.Vector3(0, -1, 0),\r\n  new THREE.Vector3(0, 0, 1),\r\n  new THREE.Vector3(0, 0, -1),\r\n];\r\nconst vecCount = vectors.length;\r\nconst tempPos1 = new THREE.Vector3();\r\nconst tempPos2 = new THREE.Vector3();\r\n\r\nclass CrossGeometry extends SphereCollisionGeo(ChunkedLinesGeometry) {\r\n  constructor(chunksCount) {\r\n    super(chunksCount, chunksCount, (vecCount / 2) | 0, false);\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n\r\n    for (let i = 0; i < vecCount / 2; ++i) {\r\n      const first = i * 2;\r\n      tempPos1.x = itemPos.x + vectors[first].x * itemRad;\r\n      tempPos1.y = itemPos.y + vectors[first].y * itemRad;\r\n      tempPos1.z = itemPos.z + vectors[first].z * itemRad;\r\n      const second = first + 1;\r\n      tempPos2.x = itemPos.x + vectors[second].x * itemRad;\r\n      tempPos2.y = itemPos.y + vectors[second].y * itemRad;\r\n      tempPos2.z = itemPos.z + vectors[second].z * itemRad;\r\n      this.setSegment(itemIdx, i, tempPos1, tempPos2);\r\n    }\r\n  }\r\n}\r\nexport default CrossGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport RaycastableBufferGeometry from './RaycastableBufferGeometry';\r\n\r\nconst POS_RAD_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\n\r\n/**\r\n * This is a base class for isosurface algorithms.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\nclass IsoSurfaceGeometry extends RaycastableBufferGeometry {\r\n  constructor(spheresCount, opts) {\r\n    super();\r\n\r\n    this._opts = opts;\r\n    this.zClip = this._opts.zClip;\r\n    this._posRad = utils.allocateTyped(Float32Array, spheresCount * POS_RAD_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, spheresCount * COLOR_SIZE);\r\n  }\r\n\r\n  setItem(chunkIdx, pos, radius) {\r\n    const posRad = this._posRad;\r\n    let idx = POS_RAD_SIZE * chunkIdx;\r\n    posRad[idx++] = pos.x;\r\n    posRad[idx++] = pos.y;\r\n    posRad[idx++] = pos.z;\r\n    posRad[idx] = radius;\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    const colors = this._colors;\r\n    let idx = COLOR_SIZE * chunkIdx;\r\n    colors[idx++] = tmpColor.r;\r\n    colors[idx++] = tmpColor.g;\r\n    colors[idx] = tmpColor.b;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  finishUpdate() {\r\n    this._build();\r\n  }\r\n\r\n  setOpacity() {\r\n    // not implemented\r\n  }\r\n\r\n  raycast() {\r\n  }\r\n\r\n  getSubset() {\r\n    return [];\r\n  }\r\n}\r\nexport default IsoSurfaceGeometry;\r\n","import utils from '../../utils';\r\n\r\n/**\r\n * Class for marching cube\r\n * Stores 8 points and 8 float values are stored together in linear array\r\n * Int values for has intersection or not - in integer32 linear array\r\n * Int values for bits flags - in integer32 linear array\r\n *\r\n */\r\nclass IsoSurfaceMarchCube {\r\n  constructor() {\r\n    this.pointsValuesLinear = null;\r\n    this.hasIntersection = null;\r\n    this.bitsInside = null;\r\n  }\r\n\r\n  create(numCellsPerSide) {\r\n    const vx7000000 = 0x7000000;\r\n    const n3 = numCellsPerSide * numCellsPerSide * numCellsPerSide;\r\n    if (n3 > vx7000000) {\r\n      throw new Error('Too large cube dimension: lead to memory huge uasge');\r\n    }\r\n    this.pointsValuesLinear = utils.allocateTyped(Float32Array, (2 << (2 + 2)) * n3);\r\n    this.hasIntersection = utils.allocateTyped(Int32Array, n3);\r\n    this.bitsInside = utils.allocateTyped(Int32Array, n3);\r\n    return 0;\r\n  }\r\n\r\n  destroy() {\r\n    this.bitsInside = null;\r\n    this.hasIntersection = null;\r\n    this.pointsValuesLinear = null;\r\n  }\r\n}\r\n\r\n/* eslint-disable no-magic-numbers */\r\nIsoSurfaceMarchCube.prototype.striIndicesMarchCube = [\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 8, 3, 9, 8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 2, 10, 0, 2, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 8, 3, 2, 10, 8, 10, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 11, 2, 8, 11, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 11, 2, 1, 9, 11, 9, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 10, 1, 11, 10, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 10, 1, 0, 8, 10, 8, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 9, 0, 3, 11, 9, 11, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 3, 0, 7, 3, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 1, 9, 4, 7, 1, 7, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 4, 7, 3, 0, 4, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 2, 10, 9, 0, 2, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 10, 9, 2, 9, 7, 2, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n  8, 4, 7, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 4, 7, 11, 2, 4, 2, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 1, 8, 4, 7, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 7, 11, 9, 4, 11, 9, 11, 2, 9, 2, 1, -1, -1, -1, -1,\r\n  3, 10, 1, 3, 11, 10, 7, 8, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 11, 10, 1, 4, 11, 1, 0, 4, 7, 11, 4, -1, -1, -1, -1,\r\n  4, 7, 8, 9, 0, 11, 9, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n  4, 7, 11, 4, 11, 9, 9, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 5, 4, 1, 5, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 5, 4, 8, 3, 5, 3, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 1, 2, 10, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 2, 10, 5, 4, 2, 4, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 10, 5, 3, 2, 5, 3, 5, 4, 3, 4, 8, -1, -1, -1, -1,\r\n  9, 5, 4, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 11, 2, 0, 8, 11, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 5, 4, 0, 1, 5, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 1, 5, 2, 5, 8, 2, 8, 11, 4, 8, 5, -1, -1, -1, -1,\r\n  10, 3, 11, 10, 1, 3, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 5, 0, 8, 1, 8, 10, 1, 8, 11, 10, -1, -1, -1, -1,\r\n  5, 4, 0, 5, 0, 11, 5, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n  5, 4, 8, 5, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 7, 8, 5, 7, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 3, 0, 9, 5, 3, 5, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 7, 8, 0, 1, 7, 1, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 7, 8, 9, 5, 7, 10, 1, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 1, 2, 9, 5, 0, 5, 3, 0, 5, 7, 3, -1, -1, -1, -1,\r\n  8, 0, 2, 8, 2, 5, 8, 5, 7, 10, 5, 2, -1, -1, -1, -1,\r\n  2, 10, 5, 2, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 9, 5, 7, 8, 9, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 7, 9, 7, 2, 9, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n  2, 3, 11, 0, 1, 8, 1, 7, 8, 1, 5, 7, -1, -1, -1, -1,\r\n  11, 2, 1, 11, 1, 7, 7, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 8, 8, 5, 7, 10, 1, 3, 10, 3, 11, -1, -1, -1, -1,\r\n  5, 7, 0, 5, 0, 9, 7, 11, 0, 1, 0, 10, 11, 10, 0, -1,\r\n  11, 10, 0, 11, 0, 3, 10, 5, 0, 8, 0, 7, 5, 7, 0, -1,\r\n  11, 10, 5, 7, 11, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 1, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 8, 3, 1, 9, 8, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 5, 2, 6, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 5, 1, 2, 6, 3, 0, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 6, 5, 9, 0, 6, 0, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 9, 8, 5, 8, 2, 5, 2, 6, 3, 2, 8, -1, -1, -1, -1,\r\n  2, 3, 11, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 0, 8, 11, 2, 0, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 1, 9, 2, 9, 11, 2, 9, 8, 11, -1, -1, -1, -1,\r\n  6, 3, 11, 6, 5, 3, 5, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 11, 0, 11, 5, 0, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n  3, 11, 6, 0, 3, 6, 0, 6, 5, 0, 5, 9, -1, -1, -1, -1,\r\n  6, 5, 9, 6, 9, 11, 11, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 3, 0, 4, 7, 3, 6, 5, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 5, 10, 6, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 6, 5, 1, 9, 7, 1, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n  6, 1, 2, 6, 5, 1, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 5, 5, 2, 6, 3, 0, 4, 3, 4, 7, -1, -1, -1, -1,\r\n  8, 4, 7, 9, 0, 5, 0, 6, 5, 0, 2, 6, -1, -1, -1, -1,\r\n  7, 3, 9, 7, 9, 4, 3, 2, 9, 5, 9, 6, 2, 6, 9, -1,\r\n  3, 11, 2, 7, 8, 4, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 4, 7, 2, 4, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n  0, 1, 9, 4, 7, 8, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1,\r\n  9, 2, 1, 9, 11, 2, 9, 4, 11, 7, 11, 4, 5, 10, 6, -1,\r\n  8, 4, 7, 3, 11, 5, 3, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n  5, 1, 11, 5, 11, 6, 1, 0, 11, 7, 11, 4, 0, 4, 11, -1,\r\n  0, 5, 9, 0, 6, 5, 0, 3, 6, 11, 6, 3, 8, 4, 7, -1,\r\n  6, 5, 9, 6, 9, 11, 4, 7, 9, 7, 11, 9, -1, -1, -1, -1,\r\n  10, 4, 9, 6, 4, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 10, 6, 4, 9, 10, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 0, 1, 10, 6, 0, 6, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 3, 1, 8, 1, 6, 8, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n  1, 4, 9, 1, 2, 4, 2, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 1, 2, 9, 2, 4, 9, 2, 6, 4, -1, -1, -1, -1,\r\n  0, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 3, 2, 8, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 4, 9, 10, 6, 4, 11, 2, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 2, 2, 8, 11, 4, 9, 10, 4, 10, 6, -1, -1, -1, -1,\r\n  3, 11, 2, 0, 1, 6, 0, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n  6, 4, 1, 6, 1, 10, 4, 8, 1, 2, 1, 11, 8, 11, 1, -1,\r\n  9, 6, 4, 9, 3, 6, 9, 1, 3, 11, 6, 3, -1, -1, -1, -1,\r\n  8, 11, 1, 8, 1, 0, 11, 6, 1, 9, 1, 4, 6, 4, 1, -1,\r\n  3, 11, 6, 3, 6, 0, 0, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 4, 8, 11, 6, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 10, 6, 7, 8, 10, 8, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 7, 3, 0, 10, 7, 0, 9, 10, 6, 7, 10, -1, -1, -1, -1,\r\n  10, 6, 7, 1, 10, 7, 1, 7, 8, 1, 8, 0, -1, -1, -1, -1,\r\n  10, 6, 7, 10, 7, 1, 1, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 6, 1, 6, 8, 1, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n  2, 6, 9, 2, 9, 1, 6, 7, 9, 0, 9, 3, 7, 3, 9, -1,\r\n  7, 8, 0, 7, 0, 6, 6, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 3, 2, 6, 7, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 11, 10, 6, 8, 10, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n  2, 0, 7, 2, 7, 11, 0, 9, 7, 6, 7, 10, 9, 10, 7, -1,\r\n  1, 8, 0, 1, 7, 8, 1, 10, 7, 6, 7, 10, 2, 3, 11, -1,\r\n  11, 2, 1, 11, 1, 7, 10, 6, 1, 6, 7, 1, -1, -1, -1, -1,\r\n  8, 9, 6, 8, 6, 7, 9, 1, 6, 11, 6, 3, 1, 3, 6, -1,\r\n  0, 9, 1, 11, 6, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 8, 0, 7, 0, 6, 3, 11, 0, 11, 6, 0, -1, -1, -1, -1,\r\n  7, 11, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 1, 9, 8, 3, 1, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 1, 2, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 3, 0, 8, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 9, 0, 2, 10, 9, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 11, 7, 2, 10, 3, 10, 8, 3, 10, 9, 8, -1, -1, -1, -1,\r\n  7, 2, 3, 6, 2, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 0, 8, 7, 6, 0, 6, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 7, 6, 2, 3, 7, 0, 1, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 2, 1, 8, 6, 1, 9, 8, 8, 7, 6, -1, -1, -1, -1,\r\n  10, 7, 6, 10, 1, 7, 1, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 7, 6, 1, 7, 10, 1, 8, 7, 1, 0, 8, -1, -1, -1, -1,\r\n  0, 3, 7, 0, 7, 10, 0, 10, 9, 6, 10, 7, -1, -1, -1, -1,\r\n  7, 6, 10, 7, 10, 8, 8, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 8, 4, 11, 8, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 6, 11, 3, 0, 6, 0, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 6, 11, 8, 4, 6, 9, 0, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 4, 6, 9, 6, 3, 9, 3, 1, 11, 3, 6, -1, -1, -1, -1,\r\n  6, 8, 4, 6, 11, 8, 2, 10, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 3, 0, 11, 0, 6, 11, 0, 4, 6, -1, -1, -1, -1,\r\n  4, 11, 8, 4, 6, 11, 0, 2, 9, 2, 10, 9, -1, -1, -1, -1,\r\n  10, 9, 3, 10, 3, 2, 9, 4, 3, 11, 3, 6, 4, 6, 3, -1,\r\n  8, 2, 3, 8, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 2, 3, 4, 2, 4, 6, 4, 3, 8, -1, -1, -1, -1,\r\n  1, 9, 4, 1, 4, 2, 2, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 1, 3, 8, 6, 1, 8, 4, 6, 6, 10, 1, -1, -1, -1, -1,\r\n  10, 1, 0, 10, 0, 6, 6, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 6, 3, 4, 3, 8, 6, 10, 3, 0, 3, 9, 10, 9, 3, -1,\r\n  10, 9, 4, 6, 10, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 5, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 4, 9, 5, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 0, 1, 5, 4, 0, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 7, 6, 8, 3, 4, 3, 5, 4, 3, 1, 5, -1, -1, -1, -1,\r\n  9, 5, 4, 10, 1, 2, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 11, 7, 1, 2, 10, 0, 8, 3, 4, 9, 5, -1, -1, -1, -1,\r\n  7, 6, 11, 5, 4, 10, 4, 2, 10, 4, 0, 2, -1, -1, -1, -1,\r\n  3, 4, 8, 3, 5, 4, 3, 2, 5, 10, 5, 2, 11, 7, 6, -1,\r\n  7, 2, 3, 7, 6, 2, 5, 4, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, 0, 8, 6, 0, 6, 2, 6, 8, 7, -1, -1, -1, -1,\r\n  3, 6, 2, 3, 7, 6, 1, 5, 0, 5, 4, 0, -1, -1, -1, -1,\r\n  6, 2, 8, 6, 8, 7, 2, 1, 8, 4, 8, 5, 1, 5, 8, -1,\r\n  9, 5, 4, 10, 1, 6, 1, 7, 6, 1, 3, 7, -1, -1, -1, -1,\r\n  1, 6, 10, 1, 7, 6, 1, 0, 7, 8, 7, 0, 9, 5, 4, -1,\r\n  4, 0, 10, 4, 10, 5, 0, 3, 10, 6, 10, 7, 3, 7, 10, -1,\r\n  7, 6, 10, 7, 10, 8, 5, 4, 10, 4, 8, 10, -1, -1, -1, -1,\r\n  6, 9, 5, 6, 11, 9, 11, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 6, 11, 0, 6, 3, 0, 5, 6, 0, 9, 5, -1, -1, -1, -1,\r\n  0, 11, 8, 0, 5, 11, 0, 1, 5, 5, 6, 11, -1, -1, -1, -1,\r\n  6, 11, 3, 6, 3, 5, 5, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 9, 5, 11, 9, 11, 8, 11, 5, 6, -1, -1, -1, -1,\r\n  0, 11, 3, 0, 6, 11, 0, 9, 6, 5, 6, 9, 1, 2, 10, -1,\r\n  11, 8, 5, 11, 5, 6, 8, 0, 5, 10, 5, 2, 0, 2, 5, -1,\r\n  6, 11, 3, 6, 3, 5, 2, 10, 3, 10, 5, 3, -1, -1, -1, -1,\r\n  5, 8, 9, 5, 2, 8, 5, 6, 2, 3, 8, 2, -1, -1, -1, -1,\r\n  9, 5, 6, 9, 6, 0, 0, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 5, 8, 1, 8, 0, 5, 6, 8, 3, 8, 2, 6, 2, 8, -1,\r\n  1, 5, 6, 2, 1, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 3, 6, 1, 6, 10, 3, 8, 6, 5, 6, 9, 8, 9, 6, -1,\r\n  10, 1, 0, 10, 0, 6, 9, 5, 0, 5, 6, 0, -1, -1, -1, -1,\r\n  0, 3, 8, 5, 6, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 5, 10, 7, 5, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 5, 10, 11, 7, 5, 8, 3, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 11, 7, 5, 10, 11, 1, 9, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 7, 5, 10, 11, 7, 9, 8, 1, 8, 3, 1, -1, -1, -1, -1,\r\n  11, 1, 2, 11, 7, 1, 7, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 1, 2, 7, 1, 7, 5, 7, 2, 11, -1, -1, -1, -1,\r\n  9, 7, 5, 9, 2, 7, 9, 0, 2, 2, 11, 7, -1, -1, -1, -1,\r\n  7, 5, 2, 7, 2, 11, 5, 9, 2, 3, 2, 8, 9, 8, 2, -1,\r\n  2, 5, 10, 2, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 2, 0, 8, 5, 2, 8, 7, 5, 10, 2, 5, -1, -1, -1, -1,\r\n  9, 0, 1, 5, 10, 3, 5, 3, 7, 3, 10, 2, -1, -1, -1, -1,\r\n  9, 8, 2, 9, 2, 1, 8, 7, 2, 10, 2, 5, 7, 5, 2, -1,\r\n  1, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 7, 0, 7, 1, 1, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 3, 9, 3, 5, 5, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 8, 7, 5, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 8, 4, 5, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 0, 4, 5, 11, 0, 5, 10, 11, 11, 3, 0, -1, -1, -1, -1,\r\n  0, 1, 9, 8, 4, 10, 8, 10, 11, 10, 4, 5, -1, -1, -1, -1,\r\n  10, 11, 4, 10, 4, 5, 11, 3, 4, 9, 4, 1, 3, 1, 4, -1,\r\n  2, 5, 1, 2, 8, 5, 2, 11, 8, 4, 5, 8, -1, -1, -1, -1,\r\n  0, 4, 11, 0, 11, 3, 4, 5, 11, 2, 11, 1, 5, 1, 11, -1,\r\n  0, 2, 5, 0, 5, 9, 2, 11, 5, 4, 5, 8, 11, 8, 5, -1,\r\n  9, 4, 5, 2, 11, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 5, 10, 3, 5, 2, 3, 4, 5, 3, 8, 4, -1, -1, -1, -1,\r\n  5, 10, 2, 5, 2, 4, 4, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 10, 2, 3, 5, 10, 3, 8, 5, 4, 5, 8, 0, 1, 9, -1,\r\n  5, 10, 2, 5, 2, 4, 1, 9, 2, 9, 4, 2, -1, -1, -1, -1,\r\n  8, 4, 5, 8, 5, 3, 3, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 4, 5, 1, 0, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 4, 5, 8, 5, 3, 9, 0, 5, 0, 3, 5, -1, -1, -1, -1,\r\n  9, 4, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 11, 7, 4, 9, 11, 9, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 4, 9, 7, 9, 11, 7, 9, 10, 11, -1, -1, -1, -1,\r\n  1, 10, 11, 1, 11, 4, 1, 4, 0, 7, 4, 11, -1, -1, -1, -1,\r\n  3, 1, 4, 3, 4, 8, 1, 10, 4, 7, 4, 11, 10, 11, 4, -1,\r\n  4, 11, 7, 9, 11, 4, 9, 2, 11, 9, 1, 2, -1, -1, -1, -1,\r\n  9, 7, 4, 9, 11, 7, 9, 1, 11, 2, 11, 1, 0, 8, 3, -1,\r\n  11, 7, 4, 11, 4, 2, 2, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 7, 4, 11, 4, 2, 8, 3, 4, 3, 2, 4, -1, -1, -1, -1,\r\n  2, 9, 10, 2, 7, 9, 2, 3, 7, 7, 4, 9, -1, -1, -1, -1,\r\n  9, 10, 7, 9, 7, 4, 10, 2, 7, 8, 7, 0, 2, 0, 7, -1,\r\n  3, 7, 10, 3, 10, 2, 7, 4, 10, 1, 10, 0, 4, 0, 10, -1,\r\n  1, 10, 2, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 1, 4, 1, 7, 7, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 1, 4, 1, 7, 0, 8, 1, 8, 7, 1, -1, -1, -1, -1,\r\n  4, 0, 3, 7, 4, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 8, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 9, 3, 9, 11, 11, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 10, 0, 10, 8, 8, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 1, 10, 11, 3, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 11, 1, 11, 9, 9, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 9, 3, 9, 11, 1, 2, 9, 2, 11, 9, -1, -1, -1, -1,\r\n  0, 2, 11, 8, 0, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 2, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 8, 2, 8, 10, 10, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 10, 2, 0, 9, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 8, 2, 8, 10, 0, 1, 8, 1, 10, 8, -1, -1, -1, -1,\r\n  1, 10, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 3, 8, 9, 1, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 9, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 3, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n];\r\n/* eslint-enable no-magic-numbers */\r\n\r\nexport default IsoSurfaceMarchCube;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceMarchCube from './IsoSurfaceMarchCube';\r\nimport utils from '../../utils';\r\n\r\nconst edgeTable = [\r\n  0x0, 0x109, 0x203, 0x30a, 0x406, 0x50f, 0x605, 0x70c,\r\n  0x80c, 0x905, 0xa0f, 0xb06, 0xc0a, 0xd03, 0xe09, 0xf00,\r\n  0x190, 0x99, 0x393, 0x29a, 0x596, 0x49f, 0x795, 0x69c,\r\n  0x99c, 0x895, 0xb9f, 0xa96, 0xd9a, 0xc93, 0xf99, 0xe90,\r\n  0x230, 0x339, 0x33, 0x13a, 0x636, 0x73f, 0x435, 0x53c,\r\n  0xa3c, 0xb35, 0x83f, 0x936, 0xe3a, 0xf33, 0xc39, 0xd30,\r\n  0x3a0, 0x2a9, 0x1a3, 0xaa, 0x7a6, 0x6af, 0x5a5, 0x4ac,\r\n  0xbac, 0xaa5, 0x9af, 0x8a6, 0xfaa, 0xea3, 0xda9, 0xca0,\r\n  0x460, 0x569, 0x663, 0x76a, 0x66, 0x16f, 0x265, 0x36c,\r\n  0xc6c, 0xd65, 0xe6f, 0xf66, 0x86a, 0x963, 0xa69, 0xb60,\r\n  0x5f0, 0x4f9, 0x7f3, 0x6fa, 0x1f6, 0xff, 0x3f5, 0x2fc,\r\n  0xdfc, 0xcf5, 0xfff, 0xef6, 0x9fa, 0x8f3, 0xbf9, 0xaf0,\r\n  0x650, 0x759, 0x453, 0x55a, 0x256, 0x35f, 0x55, 0x15c,\r\n  0xe5c, 0xf55, 0xc5f, 0xd56, 0xa5a, 0xb53, 0x859, 0x950,\r\n  0x7c0, 0x6c9, 0x5c3, 0x4ca, 0x3c6, 0x2cf, 0x1c5, 0xcc,\r\n  0xfcc, 0xec5, 0xdcf, 0xcc6, 0xbca, 0xac3, 0x9c9, 0x8c0,\r\n  0x8c0, 0x9c9, 0xac3, 0xbca, 0xcc6, 0xdcf, 0xec5, 0xfcc,\r\n  0xcc, 0x1c5, 0x2cf, 0x3c6, 0x4ca, 0x5c3, 0x6c9, 0x7c0,\r\n  0x950, 0x859, 0xb53, 0xa5a, 0xd56, 0xc5f, 0xf55, 0xe5c,\r\n  0x15c, 0x55, 0x35f, 0x256, 0x55a, 0x453, 0x759, 0x650,\r\n  0xaf0, 0xbf9, 0x8f3, 0x9fa, 0xef6, 0xfff, 0xcf5, 0xdfc,\r\n  0x2fc, 0x3f5, 0xff, 0x1f6, 0x6fa, 0x7f3, 0x4f9, 0x5f0,\r\n  0xb60, 0xa69, 0x963, 0x86a, 0xf66, 0xe6f, 0xd65, 0xc6c,\r\n  0x36c, 0x265, 0x16f, 0x66, 0x76a, 0x663, 0x569, 0x460,\r\n  0xca0, 0xda9, 0xea3, 0xfaa, 0x8a6, 0x9af, 0xaa5, 0xbac,\r\n  0x4ac, 0x5a5, 0x6af, 0x7a6, 0xaa, 0x1a3, 0x2a9, 0x3a0,\r\n  0xd30, 0xc39, 0xf33, 0xe3a, 0x936, 0x83f, 0xb35, 0xa3c,\r\n  0x53c, 0x435, 0x73f, 0x636, 0x13a, 0x33, 0x339, 0x230,\r\n  0xe90, 0xf99, 0xc93, 0xd9a, 0xa96, 0xb9f, 0x895, 0x99c,\r\n  0x69c, 0x795, 0x49f, 0x596, 0x29a, 0x393, 0x99, 0x190,\r\n  0xf00, 0xe09, 0xd03, 0xc0a, 0xb06, 0xa0f, 0x905, 0x80c,\r\n  0x70c, 0x605, 0x50f, 0x406, 0x30a, 0x203, 0x109, 0x0];\r\n\r\nfunction _voxelGradientFast(v, point, grad) {\r\n  const g = v.getValue(point.x, point.y, point.z);\r\n  grad.set(g[0], g[1], g[2]);\r\n}\r\n\r\n// Helper class GridCell\r\nclass GridCell {\r\n  constructor() {\r\n    this._arrSize = 8;\r\n    this.p = new Array(this._arrSize);\r\n    this.g = new Array(this._arrSize);\r\n    this.val = new Array(this._arrSize);\r\n    for (let i = 0; i < this._arrSize; ++i) {\r\n      this.p[i] = new THREE.Vector3();\r\n      this.g[i] = new THREE.Vector3();\r\n    }\r\n    this.cubeIndex = 0;\r\n  }\r\n}\r\n\r\n// Helper class Triangle\r\nclass Triangle {\r\n  constructor() {\r\n    this.a = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n\r\n    this.b = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n\r\n    this.c = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n  }\r\n}\r\n\r\nfunction createArray(arrSize) {\r\n  const arr = new Array(arrSize);\r\n  for (let i = 0; i < arrSize; ++i) {\r\n    arr[i] = new THREE.Vector3();\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nclass IsoSurface {\r\n  constructor() {\r\n    this._numTriangles = 0;\r\n    this._numVertices = 0;\r\n    this._position = [];\r\n    this._normals = [];\r\n    this._colors = null;\r\n    this._indices = [];\r\n    this._volumetricData = null;\r\n    this._xAxis = new THREE.Vector3();\r\n    this._yAxis = new THREE.Vector3();\r\n    this._zAxis = new THREE.Vector3();\r\n    this._xDir = new THREE.Vector3();\r\n    this._yDir = new THREE.Vector3();\r\n    this._zDir = new THREE.Vector3();\r\n  }\r\n\r\n  _prepareAxesAndDirs() {\r\n    const volData = this._volumetricData;\r\n\r\n    const cellSize = volData.getCellSize();\r\n\r\n    // calculate cell axes\r\n    const xAxis = this._xAxis;\r\n    const yAxis = this._yAxis;\r\n    const zAxis = this._zAxis;\r\n    const xDir = this._xDir;\r\n    const yDir = this._yDir;\r\n    const zDir = this._zDir;\r\n\r\n    xAxis.set(cellSize.x, 0, 0);\r\n    yAxis.set(0, cellSize.y, 0);\r\n    zAxis.set(0, 0, cellSize.z);\r\n\r\n    xDir.set(1, 0, 0);\r\n    yDir.set(0, 1, 0);\r\n    zDir.set(0, 0, 1);\r\n\r\n    // flip normals if coordinate system is in the wrong handedness\r\n    const tmp = new THREE.Vector3();\r\n    tmp.crossVectors(xDir, yDir);\r\n    if (tmp.dot(zDir) < 0) {\r\n      xDir.negate();\r\n      yDir.negate();\r\n      zDir.negate();\r\n    }\r\n\r\n    // check that the grid is in the all-positive octant of the coordinate system\r\n    if (xDir.x < 0 || xDir.y < 0 || xDir.z < 0\r\n      || yDir.x < 0 || yDir.y < 0 || yDir.z < 0\r\n      || zDir.x < 0 || zDir.y < 0 || zDir.z < 0) {\r\n      return false;\r\n    }\r\n\r\n    // check that the grid is axis-aligned\r\n    const notZero = (axe) => Math.abs(axe) > Number.EPSILON;\r\n    return !(notZero(xAxis.y) || notZero(xAxis.z)\r\n          || notZero(yAxis.x) || notZero(yAxis.z)\r\n          || notZero(zAxis.x) || notZero(zAxis.y));\r\n  }\r\n\r\n  _vertexInterp(isoLevel, grid, ind1, ind2, vertex, normal) {\r\n    const p1 = grid.p[ind1];\r\n    const p2 = grid.p[ind2];\r\n    const n1 = grid.g[ind1];\r\n    const n2 = grid.g[ind2];\r\n    const valP1 = grid.val[ind1];\r\n    const valP2 = grid.val[ind2];\r\n    const isoDiffP1 = isoLevel - valP1;\r\n    const diffValP2P1 = valP2 - valP1;\r\n\r\n    let mu = 0.0;\r\n\r\n    if (Math.abs(diffValP2P1) > 0.0) {\r\n      mu = isoDiffP1 / diffValP2P1;\r\n    }\r\n    mu = mu > 1.0 ? 1.0 : mu;\r\n    vertex.lerpVectors(p1, p2, mu);\r\n    normal.lerpVectors(n1, n2, mu);\r\n  }\r\n\r\n  static _triTable = IsoSurfaceMarchCube.prototype.striIndicesMarchCube;\r\n\r\n  static _arrSize = 12;\r\n\r\n  static _firstIndices = [0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2, 3];\r\n\r\n  static _secondIndices = [1, 2, 3, 0, 5, 6, 7, 4, 4, 5, 6, 7];\r\n\r\n  static _vertexList = createArray(IsoSurface._arrSize);\r\n\r\n  static _normalList = createArray(IsoSurface._arrSize);\r\n\r\n  _polygonize(grid, isoLevel, triangles) {\r\n    const { cubeIndex } = grid;\r\n    let i = 0;\r\n    const arrSize = IsoSurface._arrSize;\r\n    const firstIndices = IsoSurface._firstIndices;\r\n    const secondIndices = IsoSurface._secondIndices;\r\n    const vertexList = IsoSurface._vertexList;\r\n    const normalList = IsoSurface._normalList;\r\n\r\n    for (; i < arrSize; ++i) {\r\n      if (edgeTable[cubeIndex] & (1 << i)) {\r\n        this._vertexInterp(\r\n          isoLevel, grid,\r\n          firstIndices[i],\r\n          secondIndices[i],\r\n          vertexList[i],\r\n          normalList[i],\r\n        );\r\n      }\r\n    }\r\n\r\n    let triCount = 0;\r\n    const triTblIdx = cubeIndex * 16;\r\n    const triTable = IsoSurface._triTable;\r\n\r\n    for (i = 0; triTable[triTblIdx + i] !== -1; i += 3) {\r\n      triangles[triCount].a.p.copy(vertexList[triTable[triTblIdx + i]]);\r\n      triangles[triCount].a.n.copy(normalList[triTable[triTblIdx + i]]);\r\n\r\n      triangles[triCount].b.p.copy(vertexList[triTable[triTblIdx + i + 1]]);\r\n      triangles[triCount].b.n.copy(normalList[triTable[triTblIdx + i + 1]]);\r\n\r\n      triangles[triCount].c.p.copy(vertexList[triTable[triTblIdx + i + 2]]);\r\n      triangles[triCount].c.n.copy(normalList[triTable[triTblIdx + i + 2]]);\r\n      ++triCount;\r\n    }\r\n\r\n    return triCount;\r\n  }\r\n\r\n  _doGridPosNorms(isoValue, step, appendSimple) {\r\n    const vol = this._volumetricData;\r\n    const volData = this._volumetricData.getData();\r\n    const dim = vol.getDimensions();\r\n    const xSize = dim[0];\r\n    const ySize = dim[1];\r\n    const zSize = dim[2];\r\n    const stepX = step * vol.getStrideX();\r\n    const stepY = step * vol.getStrideY();\r\n    const stepZ = step * vol.getStrideZ();\r\n\r\n    const gc = new GridCell();\r\n    const gcVal = gc.val;\r\n    const gcValSize = gc.val.length;\r\n    const additions = [\r\n      new THREE.Vector3(0, 0, 0), // 0\r\n      new THREE.Vector3(step, 0, 0), // 1\r\n      new THREE.Vector3(step, step, 0), // 2\r\n      new THREE.Vector3(0, step, 0), // 3\r\n      new THREE.Vector3(0, 0, step), // 4\r\n      new THREE.Vector3(step, 0, step), // 5\r\n      new THREE.Vector3(step, step, step), // 6\r\n      new THREE.Vector3(0, step, step), // 7\r\n    ];\r\n\r\n    const tmpTriCount = 5;\r\n    const triangles = new Array(tmpTriCount);\r\n    for (let j = 0; j < tmpTriCount; ++j) {\r\n      triangles[j] = new Triangle();\r\n    }\r\n\r\n\r\n    let appendVertex;\r\n    const self = this;\r\n    const positions = this._position;\r\n    const normals = this._normals;\r\n    if (appendSimple) {\r\n      // Special case for axis-aligned grid with positive unit vector normals\r\n      appendVertex = (function () {\r\n        const axis = new THREE.Vector3(self._xAxis.x, self._yAxis.y, self._zAxis.z);\r\n        return function (triVertex) {\r\n          const vertex = triVertex.p.clone();\r\n          vertex.multiply(axis);\r\n          positions.push(vertex.add(self._origin));\r\n          normals.push(triVertex.n.clone());\r\n        };\r\n      }());\r\n    } else {\r\n      appendVertex = (function () {\r\n        const posMtx = new THREE.Matrix3();\r\n        posMtx.set(\r\n          self._xAxis.x, self._yAxis.x, self._zAxis.x,\r\n          self._xAxis.y, self._yAxis.y, self._zAxis.y,\r\n          self._xAxis.z, self._yAxis.z, self._zAxis.z,\r\n        );\r\n        const normMtx = new THREE.Matrix3();\r\n        normMtx.set(\r\n          self._xDir.x, self._yDir.x, self._zDir.x,\r\n          self._xDir.y, self._yDir.y, self._zDir.y,\r\n          self._xDir.z, self._yDir.z, self._zDir.z,\r\n        );\r\n\r\n        return function (triVertex) {\r\n          positions.push(triVertex.p.clone().applyMatrix3(posMtx).add(self._origin));\r\n          normals.push(triVertex.n.clone().applyMatrix3(normMtx));\r\n        };\r\n      }());\r\n    }\r\n    const indices = this._indices;\r\n\r\n    let globTriCount = 0;\r\n\r\n    for (let z = 0; z < (zSize - step); z += step) {\r\n      for (let y = 0; y < (ySize - step); y += step) {\r\n        let idx = vol.getDirectIdx(0, y, z);\r\n        for (let x = 0; x < (xSize - step); x += step, idx += stepX) {\r\n          /* eslint-disable no-multi-spaces */\r\n          /* eslint-disable computed-property-spacing */\r\n          gcVal[0] = volData[idx];\r\n          gcVal[1] = volData[idx + stepX];\r\n          gcVal[3] = volData[idx + stepY];\r\n          gcVal[2] = volData[idx + stepX + stepY];\r\n          gcVal[4] = volData[idx + stepZ];\r\n          gcVal[5] = volData[idx + stepX + stepZ];\r\n          gcVal[7] = volData[idx + stepY + stepZ];\r\n          gcVal[6] = volData[idx + stepX + stepY + stepZ];\r\n          /* eslint-enable no-multi-spaces */\r\n          /* eslint-enable computed-property-spacing */\r\n\r\n          // Determine the index into the edge table which\r\n          // tells us which vertices are inside of the surface\r\n          let cubeIndex = 0;\r\n          let i = 0;\r\n          for (; i < gcValSize; ++i) {\r\n            if (gcVal[i] < isoValue) {\r\n              cubeIndex |= (1 << i);\r\n            }\r\n          }\r\n\r\n          if (edgeTable[cubeIndex] === 0) {\r\n            continue;\r\n          }\r\n\r\n          gc.cubeIndex = cubeIndex;\r\n          for (i = 0; i < gcValSize; ++i) {\r\n            gc.p[i].set(x + additions[i].x, y + additions[i].y, z + additions[i].z);\r\n            _voxelGradientFast(this._gradient, gc.p[i], gc.g[i]);\r\n          }\r\n\r\n          // calculate vertices and facets for this cube,\r\n          // calculate normals by interpolating between the negated\r\n          // normalized volume gradients for the 8 reference voxels\r\n          const triCount = this._polygonize(gc, isoValue, triangles);\r\n          globTriCount += triCount;\r\n\r\n          // append triangles using different techniques\r\n          for (i = 0; i < triCount; ++i) {\r\n            indices.push(this._numTriangles * 3);\r\n            indices.push(this._numTriangles * 3 + 1);\r\n            indices.push(this._numTriangles * 3 + 2);\r\n            ++this._numTriangles;\r\n\r\n            appendVertex(triangles[i].a);\r\n            appendVertex(triangles[i].b);\r\n            appendVertex(triangles[i].c);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return globTriCount;\r\n  }\r\n\r\n  compute(volData, origin, isoValue, step) {\r\n    this._volumetricData = volData;\r\n    this._origin = origin;\r\n\r\n    this._gradient = volData.computeGradient();\r\n\r\n    this._doGridPosNorms(isoValue, step, this._prepareAxesAndDirs());\r\n  }\r\n\r\n  _remapIndices(vertexMap, idcCount) {\r\n    const indices = this._indices;\r\n    const newIndices = utils.allocateTyped(Uint32Array, idcCount);\r\n    for (let i = 0; i < idcCount; ++i) {\r\n      indices[i] = vertexMap[indices[i]];\r\n      newIndices[i] = indices[i];\r\n    }\r\n    this._indices = newIndices;\r\n  }\r\n\r\n  _remapVertices(vertices, normals, count) {\r\n    const newPositions = utils.allocateTyped(Float32Array, count * 3);\r\n    const newNormals = utils.allocateTyped(Float32Array, count * 3);\r\n    for (let i = 0; i < count; ++i) {\r\n      const pos = vertices[i];\r\n      newPositions[i * 3] = pos.x;\r\n      newPositions[i * 3 + 1] = pos.y;\r\n      newPositions[i * 3 + 2] = pos.z;\r\n      const norm = normals[i].normalize();\r\n      newNormals[i * 3] = norm.x;\r\n      newNormals[i * 3 + 1] = norm.y;\r\n      newNormals[i * 3 + 2] = norm.z;\r\n    }\r\n    this._position = newPositions;\r\n    this._normals = newNormals;\r\n  }\r\n\r\n  vertexFusion(offset, len) {\r\n    const faceVer = this._indices.length;\r\n    const vertices = this._position;\r\n    const normals = this._normals;\r\n    const oldVerCount = vertices.length | 0;\r\n    if (faceVer === 0 || oldVerCount === 0) {\r\n      return;\r\n    }\r\n    const vMap = utils.allocateTyped(Uint32Array, oldVerCount);\r\n    vMap[0] = 0;\r\n    let newVer = 1;\r\n\r\n    let i = 1;\r\n    for (; i < oldVerCount; ++i) {\r\n      const start = newVer - offset < 0 ? 0 : newVer - offset;\r\n      const end = start + len > newVer ? newVer : start + len;\r\n      let matchedIndex = -1;\r\n\r\n      for (let j = start; j < end; ++j) {\r\n        if (Math.abs(vertices[i] - vertices[j]) < Number.EPSILON) {\r\n          matchedIndex = j;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (matchedIndex !== -1) {\r\n        vMap[i] = matchedIndex;\r\n      } else {\r\n        vertices[newVer].copy(vertices[i]);\r\n        normals[newVer].copy(normals[i]);\r\n        vMap[i] = newVer;\r\n        ++newVer;\r\n      }\r\n    }\r\n\r\n    this._remapIndices(vMap, faceVer);\r\n    this._remapVertices(vertices, normals, newVer);\r\n  }\r\n\r\n  // Assign per-vertex colors from a volumetric texture map (same dimensions as the original volumetric data).\r\n  // Along with color dominating atom is determined for each vertex\r\n  // and vertices with atom out of \"visible\" subset get filtered out.\r\n  // XXX only handles orthogonal volumes currently\r\n  setColorVolTex(colorMap, atomMap, atomWeightMap, visibilitySelector) {\r\n    let i;\r\n    let idx;\r\n    const numVerts = this._position.length / 3;\r\n    const vertices = this._position;\r\n    const origin = this._origin;\r\n    const dim = this._volumetricData.getDimensions();\r\n    const xs = dim[0] - 1;\r\n    const ys = dim[1] - 1;\r\n    const zs = dim[2] - 1;\r\n\r\n    const colorData = colorMap.getData();\r\n    const strideX = colorMap.getStrideX();\r\n    const strideY = colorMap.getStrideY();\r\n    const strideZ = colorMap.getStrideZ();\r\n\r\n    let atomWeightData;\r\n    let atomStrideX;\r\n    let atomStrideY;\r\n    let atomStrideZ;\r\n\r\n    if (visibilitySelector !== null) {\r\n      atomWeightData = atomWeightMap.getData();\r\n      atomStrideX = atomWeightMap.getStrideX();\r\n      atomStrideY = atomWeightMap.getStrideY();\r\n      atomStrideZ = atomWeightMap.getStrideZ();\r\n    }\r\n\r\n    const xInv = 1.0 / this._xAxis.x;\r\n    const yInv = 1.0 / this._yAxis.y;\r\n    const zInv = 1.0 / this._zAxis.z;\r\n\r\n    let atomLookup = [];\r\n    let atomWeights = [];\r\n    const colors = utils.allocateTyped(Float32Array, numVerts * 3);\r\n\r\n    function interp(mu, idx1, idx2, c) {\r\n      c[0] = (1 - mu) * colorData[idx1] + mu * colorData[idx2];\r\n      c[1] = (1 - mu) * colorData[idx1 + 1] + mu * colorData[idx2 + 1];\r\n      c[2] = (1 - mu) * colorData[idx1 + 2] + mu * colorData[idx2 + 2];\r\n    }\r\n\r\n    function collectWeight(ai, coefX, coefY, coefZ) {\r\n      const a = atomMap[ai]; // atomWeightMap is a scalar field, so index into atom map should be the same\r\n      if (a != null) {\r\n        atomLookup[a.index] = a;\r\n        const w = coefX * coefY * coefZ * atomWeightData[ai];\r\n        if (typeof atomWeights[a.index] === 'undefined') {\r\n          atomWeights[a.index] = w;\r\n        } else {\r\n          atomWeights[a.index] += w;\r\n        }\r\n      }\r\n    }\r\n\r\n    const vMap = utils.allocateTyped(Int32Array, numVerts);\r\n    let newVerCount = 0;\r\n\r\n    for (i = 0; i < numVerts; i++) {\r\n      const ind = i * 3;\r\n      const vx = (vertices[ind] - origin.x) * xInv;\r\n      const vy = (vertices[ind + 1] - origin.y) * yInv;\r\n      const vz = (vertices[ind + 2] - origin.z) * zInv;\r\n      const x = Math.min(Math.max(vx, 0), xs) | 0;\r\n      const y = Math.min(Math.max(vy, 0), ys) | 0;\r\n      const z = Math.min(Math.max(vz, 0), zs) | 0;\r\n\r\n      const mux = (vx - x);\r\n      const muy = (vy - y);\r\n      const muz = (vz - z);\r\n\r\n      if (visibilitySelector != null) {\r\n        // collect atom weights\r\n        atomLookup = [];\r\n        atomWeights = [];\r\n        idx = atomWeightMap.getDirectIdx(x, y, z);\r\n        collectWeight(idx, 1 - mux, 1 - muy, 1 - muz);\r\n        collectWeight(idx + atomStrideX, mux, 1 - muy, 1 - muz);\r\n        collectWeight(idx + atomStrideY, 1 - mux, muy, 1 - muz);\r\n        collectWeight(idx + atomStrideX + atomStrideY, mux, muy, 1 - muz);\r\n        collectWeight(idx + atomStrideZ, 1 - mux, 1 - muy, muz);\r\n        collectWeight(idx + atomStrideX + atomStrideZ, mux, 1 - muy, muz);\r\n        collectWeight(idx + atomStrideY + atomStrideZ, 1 - mux, muy, muz);\r\n        collectWeight(idx + atomStrideX + atomStrideY + atomStrideZ, mux, muy, muz);\r\n\r\n        // find dominant atom\r\n        let maxWeight = 0.0;\r\n        let dominantIdx = -1;\r\n        for (const atomIdx in atomWeights) {\r\n          if (atomWeights[atomIdx] > maxWeight) {\r\n            dominantIdx = atomIdx;\r\n            maxWeight = atomWeights[atomIdx];\r\n          }\r\n        }\r\n\r\n        if (dominantIdx < 0 || !visibilitySelector.includesAtom(atomLookup[dominantIdx])) {\r\n          // this vertex doesn't belong to visible subset and will be skipped\r\n          vMap[i] = -1;\r\n          continue;\r\n        }\r\n      }\r\n\r\n      vMap[i] = newVerCount++;\r\n\r\n      // color tri-linear interpolation\r\n      const dx = (x < xs) ? strideX : 0;\r\n      const dy = (y < ys) ? strideY : 0;\r\n      const dz = (z < zs) ? strideZ : 0;\r\n\r\n      const c0 = [0, 0, 0];\r\n      const c1 = [0, 0, 0];\r\n      const c2 = [0, 0, 0];\r\n      const c3 = [0, 0, 0];\r\n\r\n      idx = colorMap.getDirectIdx(x, y, z);\r\n      interp(mux, idx, idx + dx, c0);\r\n      interp(mux, idx + dy, idx + dx + dy, c1);\r\n      interp(mux, idx + dz, idx + dx + dz, c2);\r\n      interp(mux, idx + dy + dz, idx + dx + dy + dz, c3);\r\n\r\n      const cz0 = [0, 0, 0];\r\n      cz0[0] = (1 - muy) * c0[0] + muy * c1[0];\r\n      cz0[1] = (1 - muy) * c0[1] + muy * c1[1];\r\n      cz0[2] = (1 - muy) * c0[2] + muy * c1[2];\r\n\r\n      const cz1 = [0, 0, 0];\r\n      cz1[0] = (1 - muy) * c2[0] + muy * c3[0];\r\n      cz1[1] = (1 - muy) * c2[1] + muy * c3[1];\r\n      cz1[2] = (1 - muy) * c2[2] + muy * c3[2];\r\n\r\n      colors[ind] = (1 - muz) * cz0[0] + muz * cz1[0];\r\n      colors[ind + 1] = (1 - muz) * cz0[1] + muz * cz1[1];\r\n      colors[ind + 2] = (1 - muz) * cz0[2] + muz * cz1[2];\r\n    }\r\n    this._colors = colors;\r\n\r\n    if (visibilitySelector != null) {\r\n      // shift visible vertices towards beginning of array\r\n      for (i = 0; i < numVerts; ++i) {\r\n        const j = vMap[i];\r\n        if (j < 0) {\r\n          continue;\r\n        }\r\n\r\n        // assert: j <= i\r\n        this._position[j * 3] = this._position[i * 3];\r\n        this._position[j * 3 + 1] = this._position[i * 3 + 1];\r\n        this._position[j * 3 + 2] = this._position[i * 3 + 2];\r\n        this._normals[j * 3] = this._normals[i * 3];\r\n        this._normals[j * 3 + 1] = this._normals[i * 3 + 1];\r\n        this._normals[j * 3 + 2] = this._normals[i * 3 + 2];\r\n        this._colors[j * 3] = this._colors[i * 3];\r\n        this._colors[j * 3 + 1] = this._colors[i * 3 + 1];\r\n        this._colors[j * 3 + 2] = this._colors[i * 3 + 2];\r\n      }\r\n\r\n      // rebuild index list\r\n      const numTriangles = this._indices.length / 3;\r\n      let newTriCount = 0;\r\n      for (i = 0; i < numTriangles; ++i) {\r\n        const i0 = vMap[this._indices[3 * i]];\r\n        const i1 = vMap[this._indices[3 * i + 1]];\r\n        const i2 = vMap[this._indices[3 * i + 2]];\r\n        if (i0 >= 0 && i1 >= 0 && i2 >= 0) {\r\n          this._indices[3 * newTriCount] = i0;\r\n          this._indices[3 * newTriCount + 1] = i1;\r\n          this._indices[3 * newTriCount + 2] = i2;\r\n          ++newTriCount;\r\n        }\r\n      }\r\n\r\n      // shrink arrays to data size\r\n      this._position = new Float32Array(this._position.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._normals = new Float32Array(this._normals.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._colors = new Float32Array(this._colors.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._indices = new Uint32Array(this._indices.buffer.slice(0, newTriCount * 3 * 4));\r\n    }\r\n  }\r\n\r\n  toMesh() {\r\n    const geo = new THREE.BufferGeometry();\r\n    geo.setIndex(new THREE.BufferAttribute(this._indices, 1));\r\n    geo.setAttribute('position', new THREE.BufferAttribute(this._position, 3));\r\n    geo.setAttribute('normal', new THREE.BufferAttribute(this._normals, 3));\r\n    geo.setAttribute('color', new THREE.BufferAttribute(this._colors, 3));\r\n    geo.computeBoundingSphere();\r\n    return geo;\r\n  }\r\n}\r\nexport default IsoSurface;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceGeometry from './IsoSurfaceGeometry';\r\nimport IsoSurface from './IsoSurface';\r\nimport utils from '../../utils';\r\n\r\n/**\r\n * This is a base class for volumetric maps based isosurface algorithms.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass VolumeSurfaceGeometry extends IsoSurfaceGeometry {\r\n  _build() {\r\n    const params = this._opts;\r\n    this.numVoxels = [128, 128, 128];\r\n    this.xAxis = new THREE.Vector3(1.0, 0.0, 0.0);\r\n    this.yAxis = new THREE.Vector3(0.0, 1.0, 0.0);\r\n    this.zAxis = new THREE.Vector3(0.0, 0.0, 1.0);\r\n\r\n    this.origin = new THREE.Vector3(0.0, 0.0, 0.0);\r\n    this._visibilitySelector = params.visibilitySelector;\r\n\r\n    this._calcSurface(params);\r\n  }\r\n\r\n  _findMinMax(posRadArray) {\r\n    const itemSize = 4;\r\n    const itemsCount = posRadArray.length / itemSize;\r\n    const maxPosRad = [posRadArray[0], posRadArray[1], posRadArray[2], posRadArray[3]];\r\n    const minPosRad = [posRadArray[0], posRadArray[1], posRadArray[2], posRadArray[3]];\r\n    for (let i = 1; i < itemsCount; ++i) {\r\n      const ind = i * itemSize;\r\n\r\n      for (let itemIdx = 0; itemIdx < itemSize; ++itemIdx) {\r\n        const tmpVal = posRadArray[ind + itemIdx];\r\n        maxPosRad[itemIdx] = Math.max(tmpVal, maxPosRad[itemIdx]);\r\n        minPosRad[itemIdx] = Math.min(tmpVal, minPosRad[itemIdx]);\r\n      }\r\n    }\r\n    return { maxPosRad, minPosRad };\r\n  }\r\n\r\n  _findNumVoxels(posRadArray, params) {\r\n    const { numVoxels } = this;\r\n    const minMaxValues = this._findMinMax(posRadArray);\r\n    const minCoordRad = minMaxValues.minPosRad;\r\n    const maxCoordRad = minMaxValues.maxPosRad;\r\n\r\n    // minrad\r\n    if (minCoordRad[3] > 4.0) {\r\n      params.gridSpacing *= minCoordRad[3];\r\n    }\r\n\r\n    let gridPadding = params.radScale * maxCoordRad[3] * 1.7;\r\n    let padRad = gridPadding;\r\n    padRad = 0.65 * Math.sqrt(4.0 / 3.0 * Math.PI * padRad * padRad * padRad);\r\n    gridPadding = Math.max(gridPadding, padRad);\r\n\r\n    let i = 0;\r\n    for (; i < 3; ++i) {\r\n      minCoordRad[i] -= gridPadding;\r\n      maxCoordRad[i] += gridPadding;\r\n    }\r\n\r\n    for (i = 0; i < 3; ++i) {\r\n      numVoxels[i] = Math.ceil((maxCoordRad[i] - minCoordRad[i]) / params.gridSpacing);\r\n    }\r\n    this.xAxis.x = (numVoxels[0] - 1) * params.gridSpacing;\r\n    this.yAxis.y = (numVoxels[1] - 1) * params.gridSpacing;\r\n    this.zAxis.z = (numVoxels[2] - 1) * params.gridSpacing;\r\n\r\n    [this.origin.x, this.origin.y, this.origin.z] = minCoordRad;\r\n\r\n    return { bbox: minMaxValues, dim: numVoxels };\r\n  }\r\n\r\n  _makeSurface(surface, params) {\r\n    const isoSurf = new IsoSurface();\r\n    isoSurf.compute(surface.volMap, this.origin, params.isoValue, 1);\r\n    isoSurf.vertexFusion(9, 9);// normalization is included\r\n\r\n    if (isoSurf._numTriangles > 0) {\r\n      isoSurf.setColorVolTex(surface.volTexMap, surface.atomMap, surface.atomWeightMap, this._visibilitySelector);\r\n      this.setIndex(new THREE.BufferAttribute(isoSurf._indices, 1));\r\n      this.setAttribute('position', new THREE.BufferAttribute(isoSurf._position, 3));\r\n      this.setAttribute('normal', new THREE.BufferAttribute(isoSurf._normals, 3));\r\n      this.setAttribute('color', new THREE.BufferAttribute(isoSurf._colors, 3));\r\n    } else { // geometry should have at least empty position attributes to be processed in wireframe mode by three.js\r\n      this.setAttribute('position', new THREE.BufferAttribute(utils.allocateTyped(Float32Array, 0), 3));\r\n    }\r\n  }\r\n\r\n  _calcSurface(params) {\r\n    const packedArrays = {\r\n      posRad: this._posRad,\r\n      colors: this._colors,\r\n      atoms: this._opts.atoms,\r\n    };\r\n\r\n    if (packedArrays.posRad.length === 0) {\r\n      return;\r\n    }\r\n    const boundaries = this._findNumVoxels(packedArrays.posRad, params);\r\n\r\n    const box = new THREE.Box3(\r\n      this.origin,\r\n      new THREE.Vector3(this.xAxis.x, this.yAxis.y, this.zAxis.z).add(this.origin),\r\n    );\r\n    const surface = this._computeSurface(packedArrays, box, boundaries, params);\r\n\r\n    this._makeSurface(surface, params);\r\n  }\r\n}\r\n\r\nexport default VolumeSurfaceGeometry;\r\n","import VolumeSurfaceGeometry from './VolumeSurfaceGeometry';\r\nimport chem from '../../chem';\r\n\r\nconst { Volume } = chem;\r\n\r\n/**\r\n * This class implements 'quick' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass QuickSurfGeometry extends VolumeSurfaceGeometry {\r\n  _computeSurface(packedArrays, box, boundaries, params) {\r\n    // beware of shifting this multiple times!\r\n    this._shiftByOrigin(packedArrays.posRad);\r\n\r\n    const surface = {\r\n      volMap: new Volume(Float32Array, this.numVoxels, box),\r\n      volTexMap: new Volume(Float32Array, this.numVoxels, box, 3),\r\n    };\r\n\r\n    if (this._visibilitySelector != null) {\r\n      surface.atomMap = [];\r\n      surface.atomWeightMap = new Volume(Float32Array, this.numVoxels, box);\r\n    }\r\n\r\n    this.gaussdensity(surface, packedArrays, null, params);\r\n    return surface;\r\n  }\r\n\r\n  gaussdensity(surface, packedArrays, atomicNum, params) {\r\n    const numAtoms = packedArrays.posRad.length / 4;\r\n    const { posRad, colors } = packedArrays;\r\n    const { numVoxels } = this;\r\n    const { radScale, gaussLim, gridSpacing } = params;\r\n    const invIsoValue = 1.0 / params.isoValue;\r\n    const invGridSpacing = 1.0 / gridSpacing;\r\n    const maxVoxelX = numVoxels[0] - 1;\r\n    const maxVoxelY = numVoxels[1] - 1;\r\n    const maxVoxelZ = numVoxels[2] - 1;\r\n    // TODO is densityMap and volTexMap initialized?\r\n\r\n    const { volMap, volTexMap } = surface;\r\n    const volData = volMap.getData();\r\n    const strideX = volMap.getStrideX();\r\n\r\n    const volTexData = volTexMap.getData();\r\n    const texStrideX = volTexMap.getStrideX();\r\n\r\n    let atomWeightData;\r\n    if (this._visibilitySelector != null) {\r\n      atomWeightData = surface.atomWeightMap.getData();\r\n    }\r\n\r\n    const { atomMap } = surface;\r\n\r\n    for (let i = 0; i < numAtoms; ++i) {\r\n      const ind = i * 4;\r\n      const scaledRad = posRad[ind + 3] * radScale;\r\n      const atomicNumFactor = atomicNum === null ? 1.0 : atomicNum[i];\r\n      const radInv = 1 / (2 * scaledRad * scaledRad);\r\n      let radLim = gaussLim * scaledRad;\r\n      const radLim2 = radLim * radLim;\r\n      radLim *= invGridSpacing;\r\n\r\n      let tmp = posRad[ind] * invGridSpacing;\r\n      const xMin = Math.max((tmp - radLim) | 0, 0);\r\n      const xMax = Math.min((tmp + radLim) | 0, maxVoxelX);\r\n      tmp = posRad[ind + 1] * invGridSpacing;\r\n      const yMin = Math.max((tmp - radLim) | 0, 0);\r\n      const yMax = Math.min((tmp + radLim) | 0, maxVoxelY);\r\n      tmp = posRad[ind + 2] * invGridSpacing;\r\n      const zMin = Math.max((tmp - radLim) | 0, 0);\r\n      const zMax = Math.min((tmp + radLim) | 0, maxVoxelZ);\r\n\r\n      let dz = zMin * gridSpacing - posRad[ind + 2];\r\n      for (let z = zMin; z <= zMax; ++z, dz += gridSpacing) {\r\n        let dy = yMin * gridSpacing - posRad[ind + 1];\r\n        for (let y = yMin; y <= yMax; ++y, dy += gridSpacing) {\r\n          const dy2dz2 = dy * dy + dz * dz;\r\n\r\n          if (dy2dz2 >= radLim2) {\r\n            continue;\r\n          }\r\n\r\n          let addr = volMap.getDirectIdx(xMin, y, z);\r\n          let texAddr = volTexMap.getDirectIdx(xMin, y, z);\r\n          let dx = xMin * gridSpacing - posRad[ind];\r\n          for (let x = xMin; x <= xMax; ++x, dx += gridSpacing, addr += strideX, texAddr += texStrideX) {\r\n            const r2 = dx * dx + dy2dz2;\r\n            const expVal = -r2 * radInv;\r\n\r\n            let density = Math.exp(expVal) * atomicNumFactor;\r\n\r\n            // store most relevant atom (with highest density)\r\n            if (this._visibilitySelector != null\r\n              && density > atomWeightData[addr]) { // NOSONAR\r\n              atomWeightData[addr] = density;\r\n              // we use same index into atom map and atomWeightMap\r\n              atomMap[addr] = packedArrays.atoms[i];\r\n            }\r\n\r\n            volData[addr] += density;\r\n\r\n            // TODO check for volTexMap routine?\r\n            density *= invIsoValue;\r\n            const colInd = i * 3;\r\n            volTexData[texAddr] += density * colors[colInd];\r\n            volTexData[texAddr + 1] += density * colors[colInd + 1];\r\n            volTexData[texAddr + 2] += density * colors[colInd + 2];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _shiftByOrigin(posRadArray) {\r\n    const originX = this.origin.x;\r\n    const originY = this.origin.y;\r\n    const originZ = this.origin.z;\r\n\r\n    const itemSize = 4;\r\n    const itemsCount = posRadArray.length / itemSize;\r\n    for (let i = 0; i < itemsCount; ++i) {\r\n      const ind = i * itemSize;\r\n\r\n      posRadArray[ind] -= originX;\r\n      posRadArray[ind + 1] -= originY;\r\n      posRadArray[ind + 2] -= originZ;\r\n    }\r\n  }\r\n}\r\n\r\nexport default QuickSurfGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\n/**\r\n * Modifed from SpatialHash\r\n *\r\n * Main differences are:\r\n * - Optimized grid size to ensure we only ever need to look +/-1 cell\r\n * - Aware of atomic radii and will only output atoms within rAtom + rExtra\r\n *   (see withinRadii method)\r\n *\r\n * (Uses rounding rather than bitshifting as consequence of arbitrary grid size)\r\n * @class\r\n * @param {Float32Array} posRad - x, y, z coordinates and radiuses\r\n * @param {Float32Array} min - xyz min coordinates\r\n * @param {Float32Array} max - xyz max coordinates\r\n * @param {number} maxDistance - max distance\r\n */\r\nfunction AVHash(posRad, min, max, maxDistance) {\r\n  const itemSize = 4;\r\n  const nAtoms = posRad.length / itemSize;\r\n\r\n  const minX = min[0];\r\n  const minY = min[1];\r\n  const minZ = min[2];\r\n\r\n  const maxX = max[0];\r\n  const maxY = max[1];\r\n  const maxZ = max[2];\r\n\r\n  function hashFunc(w, minW) {\r\n    return Math.floor((w - minW) / maxDistance);\r\n  }\r\n\r\n  const iDim = hashFunc(maxX, minX) + 1;\r\n  const jDim = hashFunc(maxY, minY) + 1;\r\n  const kDim = hashFunc(maxZ, minZ) + 1;\r\n\r\n  const nCells = iDim * jDim * kDim;\r\n\r\n  const jkDim = jDim * kDim;\r\n\r\n\r\n  /* Get cellID for cartesian x,y,z */\r\n  const cellID = function (x, y, z) {\r\n    return (((hashFunc(x, minX) * jDim) + hashFunc(y, minY)) * kDim) + hashFunc(z, minZ);\r\n  };\r\n\r\n\r\n  /* Initial building, could probably be optimized further */\r\n  const preHash = [];\r\n  let i;\r\n  let cid;\r\n  for (i = 0; i < nAtoms; i++) {\r\n    const iIdx = itemSize * i;\r\n    cid = cellID(posRad[iIdx], posRad[iIdx + 1], posRad[iIdx + 2]);\r\n\r\n    if (preHash[cid] === undefined) {\r\n      preHash[cid] = [i];\r\n    } else {\r\n      preHash[cid].push(i);\r\n    }\r\n  }\r\n\r\n  const cellOffsets = utils.allocateTyped(Uint32Array, nCells);\r\n  const cellLengths = utils.allocateTyped(Uint16Array, nCells);\r\n  const data = utils.allocateTyped(Uint32Array, nAtoms);\r\n\r\n  let offset = 0;\r\n  let maxCellLength = 0;\r\n  let j;\r\n  for (i = 0; i < nCells; i++) {\r\n    const start = cellOffsets[i] = offset;\r\n\r\n    const subArray = preHash[i];\r\n\r\n    if (subArray !== undefined) {\r\n      for (j = 0; j < subArray.length; j++) {\r\n        data[offset] = subArray[j];\r\n        offset++;\r\n      }\r\n    }\r\n\r\n    const cellLength = offset - start;\r\n    cellLengths[i] = cellLength;\r\n\r\n    if (cellLength > maxCellLength) {\r\n      maxCellLength = cellLength;\r\n    }\r\n  }\r\n\r\n  // Maximum number of neighbours we could ever produce (27 adjacent cells of equal population)\r\n  this.neighbourListLength = (27 * maxCellLength) + 1;\r\n\r\n  /**\r\n   * Populate the supplied out array with atom indices that are within rAtom + rExtra\r\n   * of x,y,z\r\n   *\r\n   * -1 in out array indicates the end of the list\r\n   *\r\n   * @param  {number} x - x coordinate\r\n   * @param  {number} y - y coordinate\r\n   * @param  {number} z - z coordinate\r\n   * @param  {number} rExtra - additional radius\r\n   * @param  {Float32Array} out - pre-allocated output array\r\n   * @return {undefined}\r\n   */\r\n  this.withinRadii = function (x, y, z, rExtra, out) {\r\n    let outIdx = 0;\r\n\r\n    const nearI = hashFunc(x, minX);\r\n    const nearJ = hashFunc(y, minY);\r\n    const nearK = hashFunc(z, minZ);\r\n\r\n    const loI = Math.max(0, nearI - 1);\r\n    const loJ = Math.max(0, nearJ - 1);\r\n    const loK = Math.max(0, nearK - 1);\r\n\r\n    const hiI = Math.min(iDim - 1, nearI + 1);\r\n    const hiJ = Math.min(jDim - 1, nearJ + 1);\r\n    const hiK = Math.min(kDim - 1, nearK + 1);\r\n\r\n    for (i = loI; i <= hiI; ++i) {\r\n      const iOffset = i * jkDim;\r\n\r\n      for (j = loJ; j <= hiJ; ++j) {\r\n        const jOffset = j * kDim;\r\n\r\n        for (let k = loK; k <= hiK; ++k) {\r\n          cid = iOffset + jOffset + k;\r\n\r\n          const cellStart = cellOffsets[cid];\r\n          const cellEnd = cellStart + cellLengths[cid];\r\n\r\n          for (let dataIndex = cellStart; dataIndex < cellEnd; dataIndex++) {\r\n            const atomIndex = data[dataIndex];\r\n            const baseIndex = itemSize * atomIndex;\r\n            const dx = posRad[baseIndex] - x;\r\n            const dy = posRad[baseIndex + 1] - y;\r\n            const dz = posRad[baseIndex + 2] - z;\r\n            const rSum = posRad[baseIndex + 3] + rExtra;\r\n\r\n            if ((dx * dx + dy * dy + dz * dz) <= (rSum * rSum)) {\r\n              out[outIdx++] = data[dataIndex];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Add terminator\r\n    out[outIdx] = -1;\r\n  };\r\n}\r\nfunction ContactSurface(packedArrays, boundaries, params, _indexList) {\r\n  // Field generation method adapted from AstexViewer (Mike Hartshorn)\r\n  // by Fred Ludlow.\r\n  // Other parts based heavily on NGL (Alexander Rose) EDT Surface class\r\n  //\r\n  // Should work as a drop-in alternative to EDTSurface (though some of\r\n  // the EDT paramters are not relevant in this method).\r\n\r\n  const itemSize = 4;\r\n  const { posRad, colors, atoms } = packedArrays;\r\n  const nAtoms = posRad.length / itemSize;\r\n\r\n  const { bbox } = boundaries;\r\n\r\n  const min = bbox.minPosRad;\r\n  const max = bbox.maxPosRad;\r\n\r\n  let r2; // Atom positions, expanded radii (squared)\r\n  let maxRadius;\r\n\r\n  // Parameters\r\n  let probeRadius;\r\n  let scaleFactor;\r\n  let probePositions;\r\n\r\n  // Cache last value for obscured test\r\n  let lastClip = -1;\r\n\r\n  // Grid params\r\n  let dim;\r\n  let grid;\r\n  let volTex;\r\n  let weights;\r\n  let weightsMap = null;\r\n  let atomMap = null;\r\n  let visibilitySelector = null;\r\n\r\n\r\n  // grid indices -> xyz coords\r\n  let gridx;\r\n  let gridy;\r\n  let gridz;\r\n\r\n  // Lookup tables:\r\n  let sinTable;\r\n  let cosTable;\r\n\r\n  // Spatial Hash\r\n  let hash;\r\n\r\n  // Neighbour array to be filled by hash\r\n  let neighbours;\r\n\r\n  // Vectors for Torus Projection\r\n  const mid = new THREE.Vector3(0.0, 0.0, 0.0);\r\n  const n1 = new THREE.Vector3(0.0, 0.0, 0.0);\r\n  const n2 = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  let ngTorus;\r\n\r\n  function uniformArray(TypeName, n, a) {\r\n    const array = utils.allocateTyped(TypeName, n);\r\n    for (let innI = 0; innI < n; ++innI) {\r\n      array[innI] = a;\r\n    }\r\n\r\n    return array;\r\n  }\r\n\r\n  function fillGridDim(a, start, step) {\r\n    for (let innI = 0; innI < a.length; innI++) {\r\n      a[innI] = start + (step * innI);\r\n    }\r\n  }\r\n\r\n  function initializeGrid() {\r\n    ({ scaleFactor } = params);\r\n    ({ dim } = boundaries);\r\n\r\n    ngTorus = Math.min(5, 2 + Math.floor(probeRadius * scaleFactor));\r\n\r\n    const gridSize = dim[0] * dim[1] * dim[2];\r\n    grid = uniformArray(Float32Array, gridSize, -1001.0);\r\n    volTex = utils.allocateTyped(Float32Array, gridSize * 3);\r\n    weights = utils.allocateTyped(Float32Array, gridSize);\r\n    if (visibilitySelector) {\r\n      weightsMap = utils.allocateTyped(Float32Array, gridSize);\r\n      atomMap = [];\r\n    }\r\n\r\n\r\n    gridx = utils.allocateTyped(Float32Array, dim[0]);\r\n    gridy = utils.allocateTyped(Float32Array, dim[1]);\r\n    gridz = utils.allocateTyped(Float32Array, dim[2]);\r\n\r\n    fillGridDim(gridx, min[0], 1 / scaleFactor);\r\n    fillGridDim(gridy, min[1], 1 / scaleFactor);\r\n    fillGridDim(gridz, min[2], 1 / scaleFactor);\r\n  }\r\n\r\n  function initializeAngleTables() {\r\n    let theta = 0.0;\r\n    const step = 2 * Math.PI / probePositions;\r\n\r\n    cosTable = utils.allocateTyped(Float32Array, probePositions);\r\n    sinTable = utils.allocateTyped(Float32Array, probePositions);\r\n    for (let innI = 0; innI < probePositions; innI++) {\r\n      cosTable[innI] = Math.cos(theta);\r\n      sinTable[innI] = Math.sin(theta);\r\n      theta += step;\r\n    }\r\n  }\r\n\r\n  function initializeHash() {\r\n    hash = new AVHash(posRad, min, max, 2.01 * maxRadius);\r\n    neighbours = new Int32Array(hash.neighbourListLength);\r\n  }\r\n\r\n  function init() {\r\n    ({\r\n      probeRadius,\r\n      scaleFactor,\r\n      probePositions,\r\n      visibilitySelector,\r\n    } = params);\r\n    r2 = utils.allocateTyped(Float32Array, nAtoms);\r\n    maxRadius = 0;\r\n    for (let innI = 0; innI < nAtoms; ++innI) {\r\n      const rExt = posRad[innI * itemSize + 3] += probeRadius;\r\n      if (rExt > maxRadius) {\r\n        maxRadius = rExt;\r\n      }\r\n      r2[innI] = rExt * rExt;\r\n    }\r\n\r\n    initializeGrid();\r\n    initializeAngleTables();\r\n    initializeHash();\r\n\r\n    lastClip = -1;\r\n  }\r\n\r\n  function singleAtomObscures(ai, innX, innY, innZ) {\r\n    const innCI = itemSize * ai;\r\n    const ra2 = r2[ai];\r\n    const dx = posRad[innCI] - innX;\r\n    const dy = posRad[innCI + 1] - innY;\r\n    const dz = posRad[innCI + 2] - innZ;\r\n    const d2 = dx * dx + dy * dy + dz * dz;\r\n\r\n    return d2 < ra2;\r\n  }\r\n\r\n  function obscured(innX, innY, innZ, a, b) {\r\n    // Is the point at x,y,z obscured by any of the atoms\r\n    // specifeid by indices in neighbours. Ignore indices\r\n    // a and b (these are the relevant atoms in projectPoints/Torii)\r\n\r\n    // Cache the last clipped atom (as very often the same one in\r\n    // subsequent calls)\r\n    let ai;\r\n\r\n    if (lastClip !== -1) {\r\n      ai = lastClip;\r\n      if (ai !== a && ai !== b && singleAtomObscures(ai, innX, innY, innZ)) {\r\n        return ai;\r\n      }\r\n      lastClip = -1;\r\n    }\r\n\r\n    let ni = 0;\r\n    ai = neighbours[ni];\r\n    while (ai >= 0) {\r\n      if (ai !== a && ai !== b && singleAtomObscures(ai, innX, innY, innZ)) {\r\n        lastClip = ai;\r\n        return ai;\r\n      }\r\n      ai = neighbours[++ni];\r\n    }\r\n\r\n    lastClip = -1;\r\n\r\n    return -1;\r\n  }\r\n\r\n  function projectPoints() {\r\n    // For each atom:\r\n    //     Iterate over a subsection of the grid, for each point:\r\n    //         If current value < 0.0, unvisited, set positive\r\n    //\r\n    //         In any case: Project this point onto surface of the atomic sphere\r\n    //         If this projected point is not obscured by any other atom\r\n    //             Calcualte delta distance and set grid value to minimum of\r\n    //             itself and delta\r\n\r\n    // Should we alias frequently accessed closure constiables??\r\n    // Assume JS engine capable of optimizing this\r\n    // anyway...\r\n    const maxRad = 4.0;\r\n    const sigma = (maxRad) / 3;\r\n    const sigma2Inv = 1 / (2 * sigma * sigma);\r\n\r\n    for (let innI = 0; innI < nAtoms; innI++) {\r\n      const innCI = itemSize * innI;\r\n      const ax = posRad[innCI];\r\n      const ay = posRad[innCI + 1];\r\n      const az = posRad[innCI + 2];\r\n      const ar = posRad[innCI + 3];\r\n      const ar2 = r2[innI];\r\n\r\n      hash.withinRadii(ax, ay, az, ar, neighbours);\r\n\r\n      // Number of grid points, round this up...\r\n      const ng = Math.ceil(ar * scaleFactor);\r\n\r\n      // Center of the atom, mapped to grid points (take floor)\r\n      const iax = Math.floor(scaleFactor * (ax - min[0]));\r\n      const iay = Math.floor(scaleFactor * (ay - min[1]));\r\n      const iaz = Math.floor(scaleFactor * (az - min[2]));\r\n\r\n      // Extents of grid to consider for this atom\r\n      const minx = Math.max(0, iax - ng);\r\n      const miny = Math.max(0, iay - ng);\r\n      const minz = Math.max(0, iaz - ng);\r\n\r\n      // Add two to these points:\r\n      // - iax are floor'd values so this ensures coverage\r\n      // - these are loop limits (exclusive)\r\n      const maxx = Math.min(dim[0], iax + ng + 2);\r\n      const maxy = Math.min(dim[1], iay + ng + 2);\r\n      const maxz = Math.min(dim[2], iaz + ng + 2);\r\n\r\n      const colIdx = innI * 3;\r\n      const cr = colors[colIdx];\r\n      const cg = colors[colIdx + 1];\r\n      const cb = colors[colIdx + 2];\r\n\r\n      for (let iz = minz; iz < maxz; iz++) {\r\n        const dz = gridz[iz] - az;\r\n        const zOffset = dim[1] * dim[0] * iz;\r\n\r\n        for (let iy = miny; iy < maxy; iy++) {\r\n          const dy = gridy[iy] - ay;\r\n          const dzy2 = dz * dz + dy * dy;\r\n          const zyOffset = zOffset + dim[0] * iy;\r\n\r\n          for (let ix = minx; ix < maxx; ix++) {\r\n            const idx = ix + zyOffset;\r\n            const dx = gridx[ix] - ax;\r\n            const d2 = dzy2 + dx * dx;\r\n\r\n\r\n            if (d2 < ar2) {\r\n              const w = Math.exp(-d2 * sigma2Inv);\r\n              const cIdx = idx * 3;\r\n              volTex[cIdx] += cr * w;\r\n              volTex[cIdx + 1] += cg * w;\r\n              volTex[cIdx + 2] += cb * w;\r\n              weights[idx] += w;\r\n              if (visibilitySelector !== null && w > weightsMap[idx]) {\r\n                weightsMap[idx] = w;\r\n                atomMap[idx] = atoms[innI];\r\n              }\r\n\r\n              if (grid[idx] < 0.0) {\r\n                // Unvisited, make positive\r\n                grid[idx] = -grid[idx];\r\n              }\r\n              // Project on to the surface of the sphere\r\n              // sp is the projected point ( dx, dy, dz ) * ( ra / d )\r\n              const d = Math.sqrt(d2);\r\n              const ap = ar / d;\r\n              let spx = dx * ap;\r\n              let spy = dy * ap;\r\n              let spz = dz * ap;\r\n\r\n              spx += ax;\r\n              spy += ay;\r\n              spz += az;\r\n\r\n              if (obscured(spx, spy, spz, innI, -1) === -1) {\r\n                const dd = ar - d;\r\n                if (dd < grid[idx]) {\r\n                  grid[idx] = dd;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function normalToLine(out, p) {\r\n    out.x = out.y = out.z = 1.0;\r\n    if (p.x !== 0) {\r\n      out.x = (p.y + p.z) / -p.x;\r\n    } else if (p.y !== 0) {\r\n      out.y = (p.x + p.z) / -p.y;\r\n    } else if (p.z !== 0) {\r\n      out.z = (p.x + p.y) / -p.z;\r\n    }\r\n    return out;\r\n  }\r\n\r\n  function projectTorus(a, b) {\r\n    const aIdx = itemSize * a;\r\n    const bIdx = itemSize * b;\r\n    const xa = posRad[aIdx];\r\n    const ya = posRad[aIdx + 1];\r\n    const za = posRad[aIdx + 2];\r\n    const r1 = posRad[aIdx + 3];\r\n    let dx = mid.x = posRad[bIdx] - xa;\r\n    let dy = mid.y = posRad[bIdx + 1] - ya;\r\n    let dz = mid.z = posRad[bIdx + 2] - za;\r\n    const innR2 = posRad[bIdx + 3];\r\n    let d2 = dx * dx + dy * dy + dz * dz;\r\n\r\n    // This check now redundant as already done in AVHash.withinRadii\r\n    // if( d2 > (( r1 + r2 ) * ( r1 + r2 )) ){ return; }\r\n\r\n    const d = Math.sqrt(d2);\r\n\r\n    // Find angle between a->b vector and the circle\r\n    // of their intersection by cosine rule\r\n    const cosA = (r1 * r1 + d * d - innR2 * innR2) / (2.0 * r1 * d);\r\n\r\n    // distance along a->b at intersection\r\n    const dmp = r1 * cosA;\r\n\r\n    mid.normalize();\r\n\r\n    // Create normal to line\r\n    normalToLine(n1, mid);\r\n    n1.normalize();\r\n\r\n    // Cross together for second normal vector\r\n    n2.crossVectors(mid, n1);\r\n    n2.normalize();\r\n\r\n    // r is radius of circle of intersection\r\n    const rInt = Math.sqrt(r1 * r1 - dmp * dmp);\r\n\r\n    n1.multiplyScalar(rInt);\r\n    n2.multiplyScalar(rInt);\r\n    mid.multiplyScalar(dmp);\r\n\r\n    mid.x += xa;\r\n    mid.y += ya;\r\n    mid.z += za;\r\n\r\n    lastClip = -1;\r\n\r\n    const ng = ngTorus;\r\n\r\n    for (let innI = 0; innI < probePositions; innI++) {\r\n      const cost = cosTable[innI];\r\n      const sint = sinTable[innI];\r\n\r\n      const px = mid.x + cost * n1.x + sint * n2.x;\r\n      const py = mid.y + cost * n1.y + sint * n2.y;\r\n      const pz = mid.z + cost * n1.z + sint * n2.z;\r\n\r\n      if (obscured(px, py, pz, a, b) === -1) {\r\n        // As above, iterate over our grid...\r\n        // px, py, pz in grid coords\r\n        const iax = Math.floor(scaleFactor * (px - min[0]));\r\n        const iay = Math.floor(scaleFactor * (py - min[1]));\r\n        const iaz = Math.floor(scaleFactor * (pz - min[2]));\r\n\r\n        const minx = Math.max(0, iax - ng);\r\n        const miny = Math.max(0, iay - ng);\r\n        const minz = Math.max(0, iaz - ng);\r\n\r\n        const maxx = Math.min(dim[0], iax + ng + 2);\r\n        const maxy = Math.min(dim[1], iay + ng + 2);\r\n        const maxz = Math.min(dim[2], iaz + ng + 2);\r\n\r\n        for (let iz = minz; iz < maxz; iz++) {\r\n          dz = pz - gridz[iz];\r\n          const zOffset = dim[1] * dim[0] * iz;\r\n          for (let iy = miny; iy < maxy; iy++) {\r\n            dy = py - gridy[iy];\r\n            const dzy2 = dz * dz + dy * dy;\r\n            const zyOffset = zOffset + dim[0] * iy;\r\n            for (let ix = minx; ix < maxx; ix++) {\r\n              dx = px - gridx[ix];\r\n              d2 = dzy2 + dx * dx;\r\n              const idx = ix + zyOffset;\r\n              const current = grid[idx];\r\n\r\n              if (current > 0.0 && d2 < (current * current)) {\r\n                grid[idx] = Math.sqrt(d2);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function projectTorii() {\r\n    for (let innI = 0; innI < nAtoms; innI++) {\r\n      const innIdx = itemSize * innI;\r\n      hash.withinRadii(\r\n        posRad[innIdx], posRad[innIdx + 1], posRad[innIdx + 2],\r\n        posRad[innIdx + 3], neighbours,\r\n      );\r\n      let ia = 0;\r\n      let ni = neighbours[ia];\r\n      while (ni >= 0) {\r\n        if (innI < ni) {\r\n          projectTorus(innI, ni);\r\n        }\r\n        ni = neighbours[++ia];\r\n      }\r\n    }\r\n  }\r\n\r\n  function fixNegatives() {\r\n    for (let innI = 0, n = grid.length; innI < n; innI++) {\r\n      if (grid[innI] < 0) grid[innI] = 0;\r\n      let w = weights[innI];\r\n      if (w > 0) {\r\n        w = 1 / w;\r\n        const innInnI = innI * 3;\r\n        volTex[innInnI] *= w;\r\n        volTex[innInnI + 1] *= w;\r\n        volTex[innInnI + 2] *= w;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getVolume() {\r\n    // Basic steps are:\r\n    // 1) Initialize\r\n    // 2) Project points\r\n    // 3) Project torii\r\n    console.time('ContactSurface.getVolume');\r\n\r\n    console.time('ContactSurface.init');\r\n    init();\r\n    console.timeEnd('ContactSurface.init');\r\n\r\n    console.time('ContactSurface.projectPoints');\r\n    projectPoints();\r\n    console.timeEnd('ContactSurface.projectPoints');\r\n\r\n    console.time('ContactSurface.projectTorii');\r\n    projectTorii();\r\n    console.timeEnd('ContactSurface.projectTorii');\r\n    fixNegatives();\r\n    console.timeEnd('ContactSurface.getVolume');\r\n  }\r\n\r\n  this.build = function () {\r\n    // type and cutoff left in for compatibility with EDTSurface.getSurface\r\n    // function signature\r\n    getVolume();\r\n    this.volTexMap = volTex;\r\n    this.weightsMap = weightsMap;\r\n    this.atomMap = atomMap;\r\n    this.volMap = grid;\r\n  };\r\n}\r\nexport default ContactSurface;\r\n","import VolumeSurfaceGeometry from './VolumeSurfaceGeometry';\r\nimport ContactSurface from './ContactSurface';\r\nimport chem from '../../chem';\r\n\r\nconst { Volume } = chem;\r\n\r\n/**\r\n * This class implements 'contact' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass ContactSurfaceGeometry extends VolumeSurfaceGeometry {\r\n  _computeSurface(packedArrays, box, boundaries, params) {\r\n    const contactSurface = new ContactSurface(packedArrays, boundaries, params);\r\n    contactSurface.build();\r\n\r\n    const surface = {\r\n      volMap: new Volume(Float32Array, this.numVoxels, box, 1, contactSurface.volMap),\r\n      volTexMap: new Volume(Float32Array, this.numVoxels, box, 3, contactSurface.volTexMap),\r\n      atomMap: contactSurface.atomMap,\r\n      atomWeightMap: new Volume(Float32Array, this.numVoxels, box, 1, contactSurface.weightsMap),\r\n    };\r\n    return surface;\r\n  }\r\n}\r\n\r\nexport default ContactSurfaceGeometry;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Class for colored atom. Need for atom structure clusterization\r\n *\r\n * @param {Vector3} vCenter   Center of atom\r\n * @param {number}  radiusAt  Radius of atom\r\n */\r\nclass IsoSurfaceAtomColored {\r\n  constructor(vCenter, radiusAt) {\r\n    this.coord = new THREE.Vector3();\r\n    this.coord.copy(vCenter);\r\n    this.radius = radiusAt;\r\n    this.colorX = 0.99999;\r\n    this.colorY = 0.0;\r\n    this.colorZ = 0.0;\r\n    this.atomType = 0;\r\n    this.srcAtom = null;\r\n  }\r\n}\r\nexport default IsoSurfaceAtomColored;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\n// suppress some JSHint warnings\r\n/* jshint bitwise: false */\r\n\r\n/**\r\n * Build normals for isosurface, using atoms information\r\n *\r\n * @param {number} numAtoms     - Number of atoms in molecule\r\n * @param {Element} atoms      - Array of atoms\r\n * @param {Vector3} vBoxMin     - Bounding box min\r\n * @param {Vector3} vBoxMax     - Bounding box max\r\n * @param {number} probeRadius     - Normals for output\r\n *\r\n */\r\nclass IsosurfaceBuildNormals {\r\n  constructor(numAtoms, atoms, vBoxMin, vBoxMax, probeRadius) {\r\n    this._numAtoms = numAtoms;\r\n    this._atoms = atoms;\r\n    this._vBoxMin = new THREE.Vector3();\r\n    this._vBoxMax = new THREE.Vector3();\r\n    this._vBoxMin.copy(vBoxMin);\r\n    this._vBoxMax.copy(vBoxMax);\r\n    this._probeRadius = probeRadius;\r\n\r\n    this._atomsList = null;\r\n    this._voxelList = null;\r\n  }\r\n\r\n  createVoxels() {\r\n    let numAtomsRefs;\r\n    let rad;\r\n    const ATOM_VOXEL_REF_SCALE = 4.5;\r\n\r\n    const numAtoms = this._numAtoms | 0;\r\n    const atoms = this._atoms;\r\n    const dx = this._vBoxMax.x - this._vBoxMin.x;\r\n    const dy = this._vBoxMax.y - this._vBoxMin.y;\r\n    const dz = this._vBoxMax.z - this._vBoxMin.z;\r\n    let w = (dx < dy) ? dx : dy;\r\n    w = (dz < w) ? dz : w;\r\n    let maxRad = 0.0;\r\n    let aveRad = 0.0;\r\n\r\n    let i;\r\n    for (i = 0; i < numAtoms; i++) {\r\n      rad = (atoms[i].radius + this._probeRadius) * 2.0;\r\n      maxRad = (rad > maxRad) ? rad : maxRad;\r\n      aveRad += rad;\r\n    }\r\n    let numCells = Math.floor(w / maxRad);\r\n    if (numCells < 2) {\r\n      numCells = 2;\r\n    }\r\n    aveRad /= numAtoms;\r\n\r\n    this._numCells = numCells;\r\n    this._aveRad = aveRad;\r\n    this._maxRad = maxRad;\r\n\r\n    const side = numCells;\r\n    const side2 = numCells * numCells;\r\n    const side3 = numCells * numCells * numCells;\r\n\r\n    const xScale = this._xScale = 1.0 / (this._vBoxMax.x - this._vBoxMin.x);\r\n    const yScale = this._yScale = 1.0 / (this._vBoxMax.y - this._vBoxMin.y);\r\n    const zScale = this._zScale = 1.0 / (this._vBoxMax.z - this._vBoxMin.z);\r\n\r\n    // estimate number of individual atom refs in each voxel list\r\n    let maxAtomsRefs = 0;\r\n\r\n    const xNumVoxMult = xScale * numCells;\r\n    const yNumVoxMult = yScale * numCells;\r\n    const zNumVoxMult = zScale * numCells;\r\n\r\n    for (i = 0; i < numAtoms; i++) {\r\n      const radAffect = (atoms[i].radius + this._probeRadius) * ATOM_VOXEL_REF_SCALE;\r\n      const diaAffect = radAffect * 2.0;\r\n      let numVoxX = Math.floor(xNumVoxMult * diaAffect + 0.8);\r\n      let numVoxY = Math.floor(yNumVoxMult * diaAffect + 0.8);\r\n      let numVoxZ = Math.floor(zNumVoxMult * diaAffect + 0.8);\r\n      // avoid case numVox? == 0\r\n      // also use loop i <=\r\n      numVoxX++;\r\n      numVoxY++;\r\n      numVoxZ++;\r\n      maxAtomsRefs += numVoxX * numVoxY * numVoxZ;\r\n    } // for (i)\r\n    // maxAtomsRefs = numAtoms * MAX_ATOMS_IN_SINGLE_VOXEL;\r\n\r\n\r\n    this._voxelList = utils.allocateTyped(Int32Array, side3);\r\n    const atomsList = [];\r\n    atomsList.length = maxAtomsRefs;\r\n    if ((this._voxelList === null) || (atomsList === null)) {\r\n      return 0 - 1;\r\n    }\r\n    // init voxel list\r\n    for (i = 0; i < side3; i++) {\r\n      this._voxelList[i] = -1;\r\n    }\r\n    numAtomsRefs = 0;\r\n\r\n    // create voxel lists\r\n    for (i = 0; i < numAtoms; i++) {\r\n      // use multiplier 4 to locate this atom in different voxels\r\n      rad = (atoms[i].radius + this._probeRadius) * ATOM_VOXEL_REF_SCALE;\r\n      let xIndMin = Math.floor((atoms[i].coord.x - this._vBoxMin.x - rad) * numCells * xScale);\r\n      let yIndMin = Math.floor((atoms[i].coord.y - this._vBoxMin.y - rad) * numCells * yScale);\r\n      let zIndMin = Math.floor((atoms[i].coord.z - this._vBoxMin.z - rad) * numCells * zScale);\r\n      let xIndMax = Math.floor((atoms[i].coord.x - this._vBoxMin.x + rad) * numCells * xScale);\r\n      let yIndMax = Math.floor((atoms[i].coord.y - this._vBoxMin.y + rad) * numCells * yScale);\r\n      let zIndMax = Math.floor((atoms[i].coord.z - this._vBoxMin.z + rad) * numCells * zScale);\r\n\r\n      xIndMin = (xIndMin >= 0) ? xIndMin : 0;\r\n      yIndMin = (yIndMin >= 0) ? yIndMin : 0;\r\n      zIndMin = (zIndMin >= 0) ? zIndMin : 0;\r\n\r\n      xIndMax = (xIndMax < numCells) ? xIndMax : (numCells - 1);\r\n      yIndMax = (yIndMax < numCells) ? yIndMax : (numCells - 1);\r\n      zIndMax = (zIndMax < numCells) ? zIndMax : (numCells - 1);\r\n\r\n      for (let z = zIndMin; z <= zIndMax; z++) {\r\n        for (let y = yIndMin; y <= yIndMax; y++) {\r\n          for (let x = xIndMin; x <= xIndMax; x++) {\r\n            // add atom with index \"i\" to this voxel list\r\n            const indVoxel = x + y * side + z * side2;\r\n            // assert indVoxel >= 0\r\n            // assert indVoxel < side3\r\n\r\n            // add first\r\n            if (this._voxelList[indVoxel] < 0) {\r\n              atomsList[numAtomsRefs * 2 + 0] = i;\r\n              atomsList[numAtomsRefs * 2 + 1] = 0 - 1;\r\n              this._voxelList[indVoxel] = numAtomsRefs;\r\n              numAtomsRefs++;\r\n              // assert numAtomsRefs < maxAtomsRefs - 1\r\n              continue;\r\n            }\r\n            // insert into head of list\r\n            const indexNext = this._voxelList[indVoxel];\r\n            this._voxelList[indVoxel] = numAtomsRefs;\r\n            atomsList[numAtomsRefs * 2 + 0] = i;\r\n            atomsList[numAtomsRefs * 2 + 1] = indexNext;\r\n            numAtomsRefs++;\r\n          } // for (x)\r\n        } // for (y)\r\n      } // for (z)\r\n    } // for (i)\r\n\r\n    // convert Array to Int32Array\r\n    this._atomsList = Int32Array.from(atomsList);\r\n\r\n    return 0;\r\n  }\r\n\r\n  destroyVoxels() {\r\n    this._atomsList = null;\r\n    this._voxelList = null;\r\n\r\n    this._atoms = null;\r\n    this._vertices = null;\r\n    this._vBoxMin = null;\r\n    this._vBoxMax = null;\r\n  }\r\n\r\n  /**\r\n   * Enumerate all atoms affecting specified point\r\n   *\r\n   * @param {Vector3}    point    - point in 3D\r\n   * @param {func(atom)} process  - function to call for each atom\r\n   */\r\n  forEachRelatedAtom(point, process) {\r\n    // find corresponding voxel\r\n    const xInd = Math.floor((point.x - this._vBoxMin.x) * this._numCells * this._xScale);\r\n    const yInd = Math.floor((point.y - this._vBoxMin.y) * this._numCells * this._yScale);\r\n    const zInd = Math.floor((point.z - this._vBoxMin.z) * this._numCells * this._zScale);\r\n    const indVoxel = xInd + yInd * this._numCells + zInd * this._numCells * this._numCells;\r\n\r\n    // run through atoms affecting this voxel\r\n    const atoms = this._atoms;\r\n    for (let ref = this._voxelList[indVoxel]; ref >= 0; ref = this._atomsList[ref * 2 + 1]) {\r\n      const indexAtom = this._atomsList[ref * 2];\r\n      process(atoms[indexAtom]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get atom closest to specified point\r\n   *\r\n   * @param {Vector3} point  - point in 3D\r\n   *\r\n   * @returns {IsoSurfaceAtomColored} atom, or null if not found\r\n   */\r\n  getClosestAtom(point) {\r\n    let closest = null;\r\n    let minDist2 = Number.MAX_VALUE;\r\n\r\n    this.forEachRelatedAtom(point, (atom) => {\r\n      const dist2 = point.distanceToSquared(atom.coord);\r\n      if (dist2 < minDist2) {\r\n        minDist2 = dist2;\r\n        closest = atom;\r\n      }\r\n    });\r\n\r\n    return closest;\r\n  }\r\n\r\n  /**\r\n   * Build normals for isosurface, using atoms information\r\n   *\r\n   * @param {number} numVertices  - Number of vertices in final geometry (to render)\r\n   * @param {Vector3} vertices    - Geometry vertices (3d coordinates array)\r\n   * @param {Vector3} normals     - Normals for output\r\n   *\r\n   * @returns {number} 0, if success\r\n   */\r\n  buildNormals(numVertices, vertices, normals) {\r\n    const self = this;\r\n    let numCloseAtoms = 0;\r\n    let vx = 0;\r\n    let vy = 0;\r\n    let vz = 0;\r\n    let dist2;\r\n    let vNormalX = 0;\r\n    let vNormalY = 0;\r\n    let vNormalZ = 0;\r\n    let koef = 0;\r\n    let w = 0;\r\n    const r25 = 2.5;\r\n    const r01 = 0.1;\r\n\r\n    const maxRadAffect = this._aveRad * r25;\r\n    const maxRadAffect2 = maxRadAffect * maxRadAffect;\r\n    const expScale = -this._aveRad * r01;\r\n\r\n    // some stats\r\n    // numSlowAtoms = 0;\r\n\r\n    const gatherNormals = function (atom) {\r\n      const dx = vx - atom.coord.x;\r\n      const dy = vy - atom.coord.y;\r\n      const dz = vz - atom.coord.z;\r\n      dist2 = dx * dx + dy * dy + dz * dz;\r\n      if (dist2 > maxRadAffect2) {\r\n        return;\r\n      }\r\n\r\n      // get weight for gaussian smoothing\r\n      const rad = atom.radius + self._probeRadius;\r\n      koef = dist2 - (rad * rad);\r\n      if (koef < 0.0) {\r\n        koef = -koef;\r\n      }\r\n      w = Math.exp(expScale * koef);\r\n\r\n      vNormalX += dx * w;\r\n      vNormalY += dy * w;\r\n      vNormalZ += dz * w;\r\n      numCloseAtoms++;\r\n    };\r\n\r\n    let maxClosedAtoms = 0;\r\n    // process all vertices, one by one\r\n    for (let i = 0; i < numVertices; i++) {\r\n      vx = vertices[i].x;\r\n      vy = vertices[i].y;\r\n      vz = vertices[i].z;\r\n\r\n      numCloseAtoms = 0;\r\n      vNormalX = vNormalY = vNormalZ = 0.0;\r\n\r\n      this.forEachRelatedAtom(vertices[i], gatherNormals);\r\n\r\n      maxClosedAtoms = (numCloseAtoms > maxClosedAtoms) ? numCloseAtoms : maxClosedAtoms;\r\n\r\n      // normalize vNormal\r\n      dist2 = vNormalX * vNormalX + vNormalY * vNormalY + vNormalZ * vNormalZ;\r\n      if (numCloseAtoms > 0) {\r\n        koef = 1.0 / Math.sqrt(dist2);\r\n        vNormalX *= koef;\r\n        vNormalY *= koef;\r\n        vNormalZ *= koef;\r\n      }\r\n      normals[i].x = vNormalX;\r\n      normals[i].y = vNormalY;\r\n      normals[i].z = vNormalZ;\r\n    } // for (i) all vertices\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Build vertex colors for isosurface, using atoms information\r\n   *\r\n   * @param {number} numVertices  - Number of vertices in final geometry (to render)\r\n   * @param {Vector3} vertices    - Geometry vertices (3d coordinates array)\r\n   * @param {Vector3} colors                - Colors for output\r\n   * @param {number} radiusColorSmoothness  - Radius of smoothness sphere\r\n   *\r\n   * @returns {number} 0, if success\r\n   */\r\n  buildColors(numVertices, vertices, colors, radiusColorSmoothness) {\r\n    const self = this;\r\n    let vx = 0.0;\r\n    let vy = 0.0;\r\n    let vz = 0.0;\r\n    let koef = 0.0;\r\n    let w = 0.0;\r\n    const KOEF_ADD = 0.8;\r\n\r\n    const maxRadAffect = radiusColorSmoothness;\r\n    const maxRadAffect2 = maxRadAffect * maxRadAffect;\r\n\r\n    let colorsClose = [];\r\n    let weights = [];\r\n    let weightsSum = 0;\r\n\r\n    const gatherColors = function (atom) {\r\n      const dx = vx - atom.coord.x;\r\n      const dy = vy - atom.coord.y;\r\n      const dz = vz - atom.coord.z;\r\n      const dist2 = dx * dx + dy * dy + dz * dz;\r\n      if (dist2 > maxRadAffect2) {\r\n        return;\r\n      }\r\n\r\n      // get weight for gaussian smoothing\r\n      const rad = atom.radius + self._probeRadius;\r\n      koef = dist2 - (rad * rad);\r\n      if (koef < 0.0) {\r\n        koef = -koef;\r\n      }\r\n      w = 1.0 / (KOEF_ADD + koef);\r\n\r\n      colorsClose.push([atom.colorX, atom.colorY, atom.colorZ]);\r\n      weights.push(w); // save weights for use\r\n      weightsSum += w; // calc sum of weights fo further normalization\r\n    };\r\n\r\n    // process all vertices, one by one\r\n    for (let i = 0; i < numVertices; i++) {\r\n      vx = vertices[i].x;\r\n      vy = vertices[i].y;\r\n      vz = vertices[i].z;\r\n\r\n      colorsClose = [];\r\n      weights = [];\r\n      weightsSum = 0;\r\n\r\n      this.forEachRelatedAtom(vertices[i], gatherColors);\r\n\r\n      // normalized weighted sum of colors\r\n      for (let j = 0; j < colorsClose.length; ++j) {\r\n        const weightNormalized = weights[j] / weightsSum;\r\n        colors[i].x += colorsClose[j][0] * weightNormalized;\r\n        colors[i].y += colorsClose[j][1] * weightNormalized;\r\n        colors[i].z += colorsClose[j][2] * weightNormalized;\r\n      }\r\n    } // for (i) all vertices\r\n    return 0;\r\n  }\r\n}\r\nexport default IsosurfaceBuildNormals;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Class for geometry (triangle mesh) representation\r\n *\r\n *\r\n * @param {number} maxNumVertices Maximum possible number of vertices in mesh\r\n * @param {number} maxNumTriangles Maximum possible number of triangles in mesh\r\n * @param {boolean} needVertexColors Obvious\r\n */\r\nclass IsoSurfaceGeo {\r\n  constructor(maxNumVertices, maxNumTriangles, needVertexColors) {\r\n    this._maxNumVertices = maxNumVertices;\r\n    this._maxNumTriangles = maxNumTriangles;\r\n    this._vertices = new Array(maxNumVertices);\r\n    this._normals = new Array(maxNumVertices);\r\n    this._colors = null;\r\n    if (needVertexColors) {\r\n      this._colors = new Array(maxNumVertices);\r\n    }\r\n    this._indices = new Array(maxNumTriangles * (1 + 2));\r\n    this._numVertices = 0;\r\n    this._numTriangles = 0;\r\n\r\n    let i;\r\n    for (i = 0; i < maxNumVertices; i++) {\r\n      this._vertices[i] = new THREE.Vector3();\r\n      this._normals[i] = new THREE.Vector3();\r\n    }\r\n    for (i = 0; i < maxNumTriangles * (1 + 2); i++) {\r\n      this._indices[i] = -1;\r\n    }\r\n    if (needVertexColors) {\r\n      for (i = 0; i < maxNumVertices; i++) {\r\n        this._colors[i] = new THREE.Vector3();\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this._vertices = null;\r\n    this._normals = null;\r\n    this._indices = null;\r\n  }\r\n}\r\nexport default IsoSurfaceGeo;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceGeometry from './IsoSurfaceGeometry';\r\nimport IsoSurfaceAtomColored from './IsoSurfaceAtomColored';\r\nimport IsosurfaceBuildNormals from './IsosurfaceBuildNormals';\r\nimport IsoSurfaceMarchCube from './IsoSurfaceMarchCube';\r\nimport IsoSurfaceGeo from './IsoSurfaceGeo';\r\nimport chem from '../../chem';\r\nimport utils from '../../utils';\r\n\r\nconst COLOR_SIZE = 3;\r\nconst HASH_SIZE = 32768;\r\nconst { Element } = chem;\r\n\r\n/**\r\n * This class implements 'quick' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass SSIsosurfaceGeometry extends IsoSurfaceGeometry {\r\n  _build() {\r\n    // convert geoOut into arrays of positions, indices, normals\r\n    this._innerBuild();\r\n    const geoOut = this.getGeo();\r\n    this.destroy();\r\n    this._fromGeo(geoOut);\r\n  }\r\n\r\n  _fromGeo(geoOut) {\r\n    let colors = null;\r\n    const positions = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    const normals = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    if (geoOut._colors !== null) {\r\n      colors = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    }\r\n    const indices = utils.allocateTyped(Uint32Array, (1 + 2) * geoOut._numTriangles);\r\n\r\n    for (let i = 0, j = 0; i < geoOut._numVertices; i++) {\r\n      positions[j + 0] = (geoOut._vertices[i].x);\r\n      positions[j + 1] = (geoOut._vertices[i].y);\r\n      positions[j + 2] = (geoOut._vertices[i].z);\r\n      normals[j + 0] = geoOut._normals[i].x;\r\n      normals[j + 1] = geoOut._normals[i].y;\r\n      normals[j + 2] = geoOut._normals[i].z;\r\n      j += 3;\r\n    }\r\n    if (colors !== null) {\r\n      for (let i = 0, j = 0; i < geoOut._numVertices; i++, j += 3) {\r\n        colors[j + 0] = geoOut._colors[i].x;\r\n        colors[j + 1] = geoOut._colors[i].y;\r\n        colors[j + 2] = geoOut._colors[i].z;\r\n      }\r\n    }\r\n\r\n    const numTri3 = geoOut._numTriangles * (1 + 2);\r\n    for (let i = 0; i < numTri3; i++) {\r\n      indices[i] = geoOut._indices[i];\r\n    }\r\n\r\n    this.setIndex(new THREE.BufferAttribute(indices, 1));\r\n    this.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n    this.setAttribute('normal', new THREE.BufferAttribute(normals, 3));\r\n    this.setAttribute('color', new THREE.BufferAttribute(colors, 3));\r\n    this.computeBoundingBox();\r\n    this.computeBoundingSphere();\r\n\r\n    geoOut.destroy();\r\n  }\r\n\r\n  convertToAtomsColored(packedArrays, atomsColored) {\r\n    const { atoms, colors } = packedArrays;\r\n    for (let i = 0, numAtoms = atoms.length; i < numAtoms; i++) {\r\n      const vCenter = atoms[i].position;\r\n      const { radius } = atoms[i].element;\r\n      atomsColored[i] = new IsoSurfaceAtomColored(vCenter, radius);\r\n      const nm = atoms[i].element.number;\r\n      atomsColored[i].atomType = this.getType(nm);\r\n      let cIdx = COLOR_SIZE * i;\r\n      atomsColored[i].colorX = colors[cIdx++];\r\n      atomsColored[i].colorY = colors[cIdx++];\r\n      atomsColored[i].colorZ = colors[cIdx];\r\n      atomsColored[i].srcAtom = atoms[i];\r\n    }\r\n  }\r\n\r\n  getGeo() {\r\n    return this.geoOut;\r\n  }\r\n\r\n  destroy() {\r\n    this.atoms = null;\r\n\r\n    this.hashLines = null;\r\n    this.hashEntries = null;\r\n  }\r\n\r\n  /**\r\n   * Calculates bounding box for array with spheres (atoms)\r\n   *\r\n   * @param {Object}  atoms      Atoms array\r\n   * @param {Vector3} vBoxMin    Bounding box min point\r\n   * @param {Vector3} vBoxMax    Bounding box max point\r\n   */\r\n  getBoundingBox(atoms, vBoxMin, vBoxMax) {\r\n    const bigNum = 10000000.0;\r\n\r\n    vBoxMin.x = vBoxMin.y = vBoxMin.z = bigNum;\r\n    vBoxMax.x = vBoxMax.y = vBoxMax.z = 0 - bigNum;\r\n\r\n    const probeRadius2 = this.probeRadius * this.atomRadiusScale;\r\n    let radMax = 0.0;\r\n    for (let i = 0, num = atoms.length; i < num; i++) {\r\n      const vCenter = atoms[i].coord;\r\n      const rad = atoms[i].radius + probeRadius2;\r\n      radMax = (rad > radMax) ? rad : radMax;\r\n      if (vCenter.x - rad < vBoxMin.x) {\r\n        vBoxMin.x = vCenter.x - rad;\r\n      }\r\n      if (vCenter.y - rad < vBoxMin.y) {\r\n        vBoxMin.y = vCenter.y - rad;\r\n      }\r\n      if (vCenter.z - rad < vBoxMin.z) {\r\n        vBoxMin.z = vCenter.z - rad;\r\n      }\r\n      if (vCenter.x + rad > vBoxMax.x) {\r\n        vBoxMax.x = vCenter.x + rad;\r\n      }\r\n      if (vCenter.y + rad > vBoxMax.y) {\r\n        vBoxMax.y = vCenter.y + rad;\r\n      }\r\n      if (vCenter.z + rad > vBoxMax.z) {\r\n        vBoxMax.z = vCenter.z + rad;\r\n      }\r\n    }\r\n    vBoxMin.x -= radMax;\r\n    vBoxMin.y -= radMax;\r\n    vBoxMin.z -= radMax;\r\n    vBoxMax.x += radMax;\r\n    vBoxMax.y += radMax;\r\n    vBoxMax.z += radMax;\r\n  }\r\n\r\n  /**\r\n   * Calculate (x,y,z) cordinate of the cell corner point\r\n   *\r\n   * @param {Vector3} vBoxMin Bounding box min point\r\n   * @param {Vector3} vBoxMax Bounding box max point\r\n   * @param {number} x Cell integer x coordinate\r\n   * @param {number} y Cell integer y coordinate\r\n   * @param {number} z Cell integer z coordinate\r\n   * @param {number} numPoints NUm points in cell on side\r\n   * @param {Vector3} vOut Output vector\r\n   */\r\n  getCornerCoord(vBoxMin, vBoxMax, x, y, z, numPoints, vOut) {\r\n    const invNP = 1.0 / (numPoints - 1.0);\r\n    const tx = x * invNP;\r\n    const ty = y * invNP;\r\n    const tz = z * invNP;\r\n\r\n    vOut.x = vBoxMin.x * (1.0 - tx) + vBoxMax.x * tx;\r\n    vOut.y = vBoxMin.y * (1.0 - ty) + vBoxMax.y * ty;\r\n    vOut.z = vBoxMin.z * (1.0 - tz) + vBoxMax.z * tz;\r\n  }\r\n\r\n  /**\r\n   * Calculate point of intersection of sphere surface\r\n   * and cell edge, given by [indexA, indexB] line\r\n   *\r\n   * @param {number} indexA Cell vertex index in [0..11]\r\n   * @param {number} indexB Cell vertex index in [0..11]\r\n   * @param {array}  sign   Sign array for all 8 vertices\r\n   * @param {object} cube   Cube\r\n   * @param {number} indexPointValue for value placement\r\n   * @param {Vector3} vOut  Point of intersection\r\n   */\r\n  buildEdgePoint(indexA, indexB, sign, cube, indexPointValue, vOut) {\r\n    if (sign[indexA] ^ sign[indexB]) {\r\n      const cTwentyFour = 24;\r\n      const t = (0 - cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexA])\r\n        / (cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexB]\r\n          - cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexA]);\r\n      const xa = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 0];\r\n      const ya = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 1];\r\n      const za = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 2];\r\n      const xb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 0];\r\n      const yb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 1];\r\n      const zb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 2];\r\n\r\n      vOut.x = xa * (1.0 - t) + xb * t;\r\n      vOut.y = ya * (1.0 - t) + yb * t;\r\n      vOut.z = za * (1.0 - t) + zb * t;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if triangle is visible (vertices are close to atoms included in visibility set)\r\n   *\r\n   * @param {Vector3} v0 Vertex #0\r\n   * @param {Vector3} v1 Vertex #1\r\n   * @param {Vector3} v2 Vertex #2\r\n   * @returns {boolean} true if triangle is visible\r\n   */\r\n  isTriangleVisible(v0, v1, v2) {\r\n    const a0 = this.voxelWorld.getClosestAtom(v0);\r\n    const a1 = this.voxelWorld.getClosestAtom(v1);\r\n    const a2 = this.voxelWorld.getClosestAtom(v2);\r\n    if (a0 === null || a1 === null || a2 === null\r\n      || a0.srcAtom === null || a1.srcAtom === null || a2.srcAtom === null) {\r\n      return false;\r\n    }\r\n\r\n    return this.visibilitySelector.includesAtom(a0.srcAtom)\r\n      && this.visibilitySelector.includesAtom(a1.srcAtom)\r\n      && this.visibilitySelector.includesAtom(a2.srcAtom);\r\n  }\r\n\r\n  /**\r\n   * Add triangle to result geometry\r\n   *\r\n   * @param {Vector3} v0 Vertex #0\r\n   * @param {Vector3} v1 Vertex #1\r\n   * @param {Vector3} v2 Vertex #2\r\n   * @returns {boolean} false if no more triangles can be added\r\n   */\r\n  addTriangle(v0, v1, v2) {\r\n    if (this.visibilitySelector && !this.isTriangleVisible(v0, v1, v2)) {\r\n      return true;\r\n    }\r\n\r\n    const geo = this.geoOut;\r\n\r\n    if (geo._numTriangles >= this.maxNumTriangles) {\r\n      return false;\r\n    }\r\n\r\n    // Add vertex with optimize\r\n    const indInGeo0 = this.addVertexToGeo(geo, v0);\r\n    const indInGeo1 = this.addVertexToGeo(geo, v1);\r\n    const indInGeo2 = this.addVertexToGeo(geo, v2);\r\n    if ((indInGeo0 | indInGeo1 | indInGeo2) < 0) {\r\n      return false;\r\n    }\r\n\r\n    const itr = 3 * geo._numTriangles;\r\n    geo._indices[itr + 0] = indInGeo0;\r\n    geo._indices[itr + 1] = indInGeo1;\r\n    geo._indices[itr + 2] = indInGeo2;\r\n    geo._numTriangles++;\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Build result geometry (triangle mesh) from marching cube cells\r\n   *\r\n   * @param {number} meshRes Marchnig cube vertex count on each side\r\n   * @param {Vector3} vBoxMin Bounding box point min\r\n   * @param {Vector3} vBoxMax Bounding box point max\r\n   * @param {number} corners float values array for each cube point\r\n   * @param {Vector3} vCellStep vector to next cube cell diagonal point\r\n   * @param {object} cube IsoSurfaceMarchCube object\r\n   * @returns {number} 0, if success (<0) is error\r\n   */\r\n  buildGeoFromCorners(meshRes, vBoxMin, vBoxMax, corners, vCellStep, cube) {\r\n    const arrSize = 12;\r\n    const cNumVerts = 8;\r\n    const numCells = meshRes - 1;\r\n    const side = meshRes;\r\n    const side2 = meshRes * meshRes;\r\n\r\n    const vaEdges = new Array(arrSize);\r\n    for (let i = 0; i < arrSize; i++) {\r\n      vaEdges[i] = new THREE.Vector3();\r\n    }\r\n    const sign = [];\r\n    for (let i = 0; i < cNumVerts; i++) {\r\n      sign[i] = 1.0;\r\n    }\r\n    const vCorner = new THREE.Vector3();\r\n    let indCell = 0;\r\n    let indY = 0;\r\n    for (let y = 0; y < numCells; y++, indY += side2) {\r\n      let indZ = 0;\r\n      for (let z = 0; z < numCells; z++, indZ += side) {\r\n        for (let x = 0; x < numCells; x++) {\r\n          if (!cube.hasIntersection[indCell]) {\r\n            // next cell\r\n            indCell++;\r\n            continue;\r\n          }\r\n          const bitsInside = cube.bitsInside[indCell];\r\n\r\n          this.getCornerCoord(vBoxMin, vBoxMax, x, y, z, meshRes, vCorner);\r\n\r\n          const indPointValues = indCell * (2 << (2 + 2));\r\n          for (let i = 0, j = 0; i < cNumVerts; i++) {\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.x;\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.y;\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.z;\r\n          }\r\n\r\n          cube.pointsValuesLinear[indPointValues + 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 2 * 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 5 * 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3] += vCellStep.x;\r\n\r\n          cube.pointsValuesLinear[indPointValues + 2 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 3 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 7 * 3 + 2] += vCellStep.z;\r\n\r\n          cube.pointsValuesLinear[indPointValues + 4 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 5 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 7 * 3 + 1] += vCellStep.y;\r\n\r\n\r\n          // now current cell has intersections (from -x to +x) on some cube edges\r\n          const indValues = indPointValues + 24;\r\n          for (let i = 0; i < cNumVerts; ++i) {\r\n            sign[i] = (cube.pointsValuesLinear[indValues + i] < 0.0) ? 1 : 0;\r\n          }\r\n\r\n          this.buildEdgePoint(0, 1, sign, cube, indPointValues, vaEdges[0]);\r\n          this.buildEdgePoint(1, 2, sign, cube, indPointValues, vaEdges[1]);\r\n          this.buildEdgePoint(2, 3, sign, cube, indPointValues, vaEdges[2]);\r\n          this.buildEdgePoint(3, 0, sign, cube, indPointValues, vaEdges[3]);\r\n\r\n          this.buildEdgePoint(4, 5, sign, cube, indPointValues, vaEdges[4]);\r\n          this.buildEdgePoint(5, 6, sign, cube, indPointValues, vaEdges[5]);\r\n          this.buildEdgePoint(6, 7, sign, cube, indPointValues, vaEdges[6]);\r\n          this.buildEdgePoint(7, 4, sign, cube, indPointValues, vaEdges[7]);\r\n\r\n          this.buildEdgePoint(0, 4, sign, cube, indPointValues, vaEdges[8]);\r\n          this.buildEdgePoint(1, 5, sign, cube, indPointValues, vaEdges[9]);\r\n          this.buildEdgePoint(2, 6, sign, cube, indPointValues, vaEdges[10]);\r\n          this.buildEdgePoint(3, 7, sign, cube, indPointValues, vaEdges[11]);\r\n\r\n          const offs = bitsInside * (2 << (1 + 2));\r\n          for (let numTri = 0, indTri = 0; numTri < (2 + 2 + 2); numTri++, indTri += 3) {\r\n            // s_triIndicesMarchCube is external array, defined in mold_ind.js\r\n            const i0 = cube.striIndicesMarchCube[offs + indTri];\r\n            if (i0 < 0) {\r\n              break;\r\n            }\r\n            const i1 = cube.striIndicesMarchCube[offs + indTri + 1];\r\n            const i2 = cube.striIndicesMarchCube[offs + indTri + 2];\r\n\r\n            if (!this.addTriangle(vaEdges[i0], vaEdges[i1], vaEdges[i2])) {\r\n              return 0 - 2;\r\n            }\r\n          } // for numTri\r\n\r\n          // next cell (cube)\r\n          indCell++;\r\n        } // for (x)\r\n      } // for (z)\r\n    } // for (y)\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Returns number of cell with intersection with at least one sphere.\r\n   * Using this number, we can estimate required number of vertices\r\n   * and triangles to build result mesh.\r\n   *\r\n   * @param {number} side Number of points in cube voxels\r\n   * @param {number} numCells Number of cells in cube voxels (per direction)\r\n   * @param {array} corners Array of float values for cube corner points\r\n   * @param {object} cube IsoSurfaceMarchCube object\r\n   * @returns {number} numIntersectedCells\r\n   */\r\n  getNumIntersectedCells(side, numCells, corners, cube) {\r\n    const side2 = side * side;\r\n    const cNumVerts = 8;\r\n    let numIntersectedCells = 0;\r\n\r\n    let indCell = 0;\r\n    let indY = 0;\r\n    for (let y = 0; y < numCells; y++, indY += side2) {\r\n      let indZ = 0;\r\n      for (let z = 0; z < numCells; z++, indZ += side) {\r\n        for (let x = 0; x < numCells; x++) {\r\n          const cubeValuesIndex = indCell * (2 << (2 + 2)) + 24;\r\n          const indCorner = x + indZ + indY;\r\n\r\n          cube.pointsValuesLinear[cubeValuesIndex] = corners[indCorner];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 1] = corners[indCorner + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 2] = corners[indCorner + side + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 3] = corners[indCorner + side];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 4] = corners[side2 + indCorner];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 5] = corners[side2 + indCorner + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 6] = corners[side2 + indCorner + side + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 7] = corners[side2 + indCorner + side];\r\n\r\n          // check read exception\r\n          // assert(side2 + indCorner + side + 1 < side3);\r\n\r\n          // get bit flags inside\r\n          let bitsInside = 0;\r\n          for (let i = 0; i < cNumVerts; ++i) {\r\n            if (cube.pointsValuesLinear[cubeValuesIndex + i] < 0.0) {\r\n              bitsInside |= (1 << i);\r\n            }\r\n          }\r\n\r\n          if ((bitsInside === 0) || (bitsInside === ((1 << cNumVerts) - 1))) {\r\n            cube.hasIntersection[indCell] = false;\r\n          } else {\r\n            cube.hasIntersection[indCell] = true;\r\n            numIntersectedCells++;\r\n          }\r\n          cube.bitsInside[indCell] = bitsInside;\r\n          // next cell\r\n          indCell++;\r\n        } // for (x)\r\n      } // for (z)\r\n    } // for (y)\r\n    return numIntersectedCells;\r\n  }\r\n\r\n  getType(letter) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const atomT = [0, 0, 1, 1, 2, 6, 3, 6, 4, 6, 5, 6, 6, 0, 7, 3, 8, 2, 9, 6, 10, 6, 11, 6, 12, 6, 13, 6, 14, 6, 15, 4,\r\n      16, 5, 17, 6, 18, 6, 19, 6, 20, 6, 21, 6, 22, 6, 23, 6, 24, 6, 25, 6, 26, 6, 27, 6, 28, 6, 29, 6, 30, 6, 31, 6,\r\n      32, 6, 33, 6, 34, 6, 35, 6, 36, 6, 37, 6, 38, 6, 39, 6, 40, 6, 41, 6, 42, 6, 43, 6, 44, 6, 45, 6, 46, 6, 47, 6,\r\n      48, 6, 49, 6, 50, 6, 51, 6, 52, 6, 53, 6, 54, 6, 55, 6, 56, 6, 57, 6, 58, 6, 59, 6, 60, 6, 61, 6, 62, 6, 63, 6,\r\n      64, 6, 65, 6, 66, 6, 67, 6, 68, 6, 69, 6, 70, 6, 71, 6, 72, 6, 73, 6, 74, 6, 75, 6, 76, 6, 77, 6, 78, 6, 79, 6,\r\n      80, 6, 81, 6, 82, 6, 83, 6, 84, 6, 85, 6, 86, 6, 87, 6, 88, 6, 89, 6, 90, 6, 91, 6, 92, 6, 93, 6, 94, 6, 95, 6,\r\n      96, 6, 97, 6, 98, 6, 99, 6, 100, 6, 101, 6, 102, 6, 103, 6, 104, 6, 105, 6, 106, 6, 107, 6, 108, 6, 109, 6];\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    if (letter < 1 || letter > atomT.length / 2\r\n      || (Object.keys(Element.ByAtomicNumber).length * 2) !== atomT.length) {\r\n      throw new Error('atomT.length  should be equal Element.ByAtomicNumber.length * 2');\r\n    }\r\n    return atomT[letter * 2];\r\n  }\r\n\r\n\r\n  /**\r\n   * Calculate values for marching cube grid points\r\n   * positive values are outside sphere, negative - is inside\r\n   *\r\n   * @param {array} corners array of float values\r\n   * @param {number} side Number of point in cube in 1 dimennsion\r\n   * @param {Vector3} vBoxMin Bounding box min point\r\n   * @param {Vector3} vBoxMax Bounding box max point\r\n   * @param {array} atoms Array of input atoms\r\n   * @param {number} probeRad radius for atom probing\r\n   */\r\n  calculateGridCorners(corners, side, vBoxMin, vBoxMax, atoms, probeRad) {\r\n    const side2 = side * side;\r\n    const side3 = side2 * side;\r\n    const vCorner = new THREE.Vector3();\r\n    const vDif = new THREE.Vector3();\r\n    /* eslint-disable no-magic-numbers */\r\n    const aLot = +1.0e12;\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    for (let i = 0; i < side3; i++) {\r\n      corners[i] = aLot; // to large value\r\n    }\r\n\r\n    const xScale = (side - 1) / (vBoxMax.x - vBoxMin.x);\r\n    const yScale = (side - 1) / (vBoxMax.y - vBoxMin.y);\r\n    const zScale = (side - 1) / (vBoxMax.z - vBoxMin.z);\r\n\r\n    for (let s = 0, numAtoms = atoms.length; s < numAtoms; s++) {\r\n      const atom = atoms[s];\r\n      const radius = atom.radius + probeRad;\r\n\r\n      const fx = ((atom.coord.x - radius) - vBoxMin.x) * xScale;\r\n      const fy = ((atom.coord.y - radius) - vBoxMin.y) * yScale;\r\n      const fz = ((atom.coord.z - radius) - vBoxMin.z) * zScale;\r\n\r\n      const indXMin = Math.floor(fx);\r\n      const indYMin = Math.floor(fy);\r\n      const indZMin = Math.floor(fz);\r\n\r\n      let indXMax = Math.floor(((atom.coord.x + radius) - vBoxMin.x) * xScale);\r\n      let indYMax = Math.floor(((atom.coord.y + radius) - vBoxMin.y) * yScale);\r\n      let indZMax = Math.floor(((atom.coord.z + radius) - vBoxMin.z) * zScale);\r\n\r\n      indXMax++;\r\n      indYMax++;\r\n      indZMax++;\r\n      indXMax = (indXMax <= (side - 1)) ? indXMax : (side - 1);\r\n      indYMax = (indYMax <= (side - 1)) ? indYMax : (side - 1);\r\n      indZMax = (indZMax <= (side - 1)) ? indZMax : (side - 1);\r\n\r\n      for (let y = indYMin; y <= indYMax; y++) {\r\n        const indY = y * side2;\r\n        for (let z = indZMin; z <= indZMax; z++) {\r\n          const indZ = z * side;\r\n          for (let x = indXMin; x <= indXMax; x++) {\r\n            const ind = indY + indZ + x;\r\n            this.getCornerCoord(vBoxMin, vBoxMax, x, y, z, side, vCorner);\r\n            vDif.x = vCorner.x - atom.coord.x;\r\n            vDif.y = vCorner.y - atom.coord.y;\r\n            vDif.z = vCorner.z - atom.coord.z;\r\n            const distToSphere = Math.sqrt(vDif.x * vDif.x + vDif.y * vDif.y + vDif.z * vDif.z);\r\n            // val: < 0, if inside sphere\r\n            // val: > 0, if outside sphere\r\n            const val = distToSphere - radius;\r\n            if (val < corners[ind]) {\r\n              corners[ind] = val;\r\n            }\r\n          } // for (x)\r\n        } // for (z)\r\n      } // for (y)\r\n    } // for (s)\r\n  }\r\n\r\n  /**\r\n   * Create memory pool for vertex hash management\r\n   *\r\n   * @param {number} maxNumVertices Maximum possible number of vertices (that will be build)\r\n   * @param {number} maxNumTriangles Maximum possible number of triangles (that will be build)\r\n   * @returns {number} 0, if success. (<0) is non memory\r\n   */\r\n  createVertexHash(maxNumVertices, maxNumTriangles) {\r\n    this.hashLines = utils.allocateTyped(Int32Array, HASH_SIZE * 2);\r\n    if (this.hashLines === null) {\r\n      return 0 - 1;\r\n    }\r\n    for (let i = 0, j = 0; i < HASH_SIZE; i++) {\r\n      this.hashLines[j++] = 0; // num vertices in this hash line\r\n      this.hashLines[j++] = 0 - 1; // index of the first entry\r\n    }\r\n\r\n    this.maxNumVertices = maxNumVertices;\r\n    this.maxNumTriangles = maxNumTriangles;\r\n\r\n    this.numHashEtriesAllocated = maxNumVertices;\r\n    this.hashEntries = utils.allocateTyped(Int32Array, 2 * this.numHashEtriesAllocated);\r\n    if (this.hashEntries === null) {\r\n      return 0 - 1;\r\n    }\r\n    for (let i = 0, j = 0; i < this.numHashEtriesAllocated; i++) {\r\n      this.hashEntries[j++] = 0 - 1; // index of vertex\r\n      this.hashEntries[j++] = 0 - 1; // next hash entry index\r\n    }\r\n    this.numHashEntryIndex = 0;\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Allocate and return new hash entry. Just check possible amount.\r\n   *\r\n   * @returns {number} index of hash entry, that can be used for geometry add vertex functionality\r\n   */\r\n  getNewHashEntry() {\r\n    if (this.numHashEntryIndex < this.numHashEtriesAllocated) {\r\n      const i = this.numHashEntryIndex;\r\n      this.numHashEntryIndex++;\r\n      return i;\r\n    }\r\n    return 0 - 1;\r\n  }\r\n\r\n  /**\r\n   * Add vertex to geometry structure\r\n   * using vertex hash table to quickly check, is this vertex already exist in geometry\r\n   *\r\n   * @param {object} geoOut Geometry to build\r\n   * @param {Vector3} vAdd Vertex to add\r\n   * @returns {number} index of added (or existing) vertex in geometry.\r\n   */\r\n  addVertexToGeo(geoOut, vAdd) {\r\n    let entry;\r\n    const oneHynberes = 0.01;\r\n    const n815851 = 815851;\r\n    const n37633 = 37633;\r\n    const n2453543 = 2453543;\r\n    const r106 = 1.0e-6;\r\n\r\n    const hashResolution = this.marCubeResoultion << 2;\r\n    const v = new THREE.Vector3();\r\n    const ix = Math.floor(hashResolution * (vAdd.x - this.vBoxMin.x) / (this.vBoxMax.x + oneHynberes - this.vBoxMin.x));\r\n    const iy = Math.floor(hashResolution * (vAdd.y - this.vBoxMin.y) / (this.vBoxMax.y + oneHynberes - this.vBoxMin.y));\r\n    const iz = Math.floor(hashResolution * (vAdd.z - this.vBoxMin.z) / (this.vBoxMax.z + oneHynberes - this.vBoxMin.z));\r\n    let iHash = ix * n815851 + iz * n37633 + iy * n2453543;\r\n    iHash &= (HASH_SIZE - 1);\r\n    const hLineIndex = iHash + iHash;\r\n\r\n    // search vertex via hash\r\n    // search in hash list\r\n    if (this.vBoxMin !== null && this.vBoxMax !== null) {\r\n      for (entry = this.hashLines[hLineIndex + 1]; entry >= 0; entry = this.hashEntries[entry * 2 + 1]) {\r\n        const ind = this.hashEntries[entry * 2 + 0]; // vertex index\r\n        v.copy(geoOut._vertices[ind]);\r\n        v.x -= vAdd.x;\r\n        v.y -= vAdd.y;\r\n        v.z -= vAdd.z;\r\n        const dot2 = v.x * v.x + v.y * v.y + v.z * v.z;\r\n        if (dot2 < r106) {\r\n          return ind;\r\n        } // if (found)\r\n      } // for (entry)\r\n    } // search\r\n\r\n    // add new vertex to geometry\r\n    if (geoOut._numVertices >= this.maxNumVertices) {\r\n      return 0 - 1;\r\n    }\r\n\r\n    const iVertAdd = geoOut._numVertices;\r\n    geoOut._vertices[iVertAdd].copy(vAdd);\r\n\r\n    // add to hash\r\n    if (this.vBoxMin !== null && this.vBoxMax !== null) {\r\n      entry = this.getNewHashEntry();\r\n      if (entry < 0) {\r\n        return 0 - 1;\r\n      }\r\n      const entryFirst = this.hashLines[hLineIndex + 1];\r\n      this.hashLines[hLineIndex + 1] = entry;\r\n      this.hashEntries[entry * 2 + 0] = iVertAdd;\r\n      this.hashEntries[entry * 2 + 1] = entryFirst;\r\n\r\n      this.hashLines[hLineIndex + 0]++; // num vertices in line ++\r\n    }\r\n    geoOut._numVertices++;\r\n    return iVertAdd;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {number} side some placeholder description\r\n   * @param {number} probeSphereRadius some placeholder description\r\n   * @param {object} vBoxMin some placeholder description\r\n   * @param {object} vBoxMax some placeholder description\r\n   * @param {object} geoOut some placeholder description\r\n   * @param {object} corners some placeholder description\r\n   * @returns {number} always 0\r\n   */\r\n  modifyExcludedFromGeo(\r\n    side, probeSphereRadius,\r\n    vBoxMin, vBoxMax,\r\n    geoOut, corners,\r\n  ) {\r\n    let ind;\r\n    let distToSphere;\r\n    let distToBorder;\r\n    const r11 = 1.1;\r\n\r\n    function innerBlockWorkAround() {\r\n      if (distToBorder > 0.0) {\r\n        // point is inside probe sphere\r\n        if (corners[ind] < 0.0) {\r\n          corners[ind] = distToBorder; // was inside surface, now is oustide ( > 0)\r\n        }\r\n        if (distToBorder > corners[ind]) {\r\n          corners[ind] = distToBorder; // find positive maximum\r\n        }\r\n      } else if (distToBorder > corners[ind]) { // point is outside sphere\r\n        corners[ind] = distToBorder; // find negative maximum\r\n      }\r\n    }\r\n\r\n    const side2 = side * side;\r\n    const xScale = (side - 1) / (vBoxMax.x - vBoxMin.x);\r\n    const yScale = (side - 1) / (vBoxMax.y - vBoxMin.y);\r\n    const zScale = (side - 1) / (vBoxMax.z - vBoxMin.z);\r\n\r\n    const probeSpRad2 = (probeSphereRadius * 2) * (probeSphereRadius * 2);\r\n    const sideInv = 1.0 / (side - 1);\r\n\r\n    for (let i = 0; i < geoOut._numVertices; i++) {\r\n      const vCenter = geoOut._vertices[i];\r\n\r\n      const radEst = probeSphereRadius * r11;\r\n\r\n      let indXMin = Math.floor(((vCenter.x - radEst) - vBoxMin.x) * xScale);\r\n      let indYMin = Math.floor(((vCenter.y - radEst) - vBoxMin.y) * yScale);\r\n      let indZMin = Math.floor(((vCenter.z - radEst) - vBoxMin.z) * zScale);\r\n\r\n      let indXMax = Math.floor(((vCenter.x + radEst) - vBoxMin.x) * xScale);\r\n      let indYMax = Math.floor(((vCenter.y + radEst) - vBoxMin.y) * yScale);\r\n      let indZMax = Math.floor(((vCenter.z + radEst) - vBoxMin.z) * zScale);\r\n\r\n      indXMin = (indXMin >= 0) ? indXMin : 0;\r\n      indYMin = (indYMin >= 0) ? indYMin : 0;\r\n      indZMin = (indZMin >= 0) ? indZMin : 0;\r\n      indXMax = (indXMax <= (side - 1)) ? indXMax : (side - 1);\r\n      indYMax = (indYMax <= (side - 1)) ? indYMax : (side - 1);\r\n      indZMax = (indZMax <= (side - 1)) ? indZMax : (side - 1);\r\n\r\n      for (let iy = indYMin; iy <= indYMax; iy++) {\r\n        const indY = iy * side2;\r\n        for (let iz = indZMin; iz <= indZMax; iz++) {\r\n          const indZ = iz * side;\r\n          for (let ix = indXMin; ix <= indXMax; ix++) {\r\n            ind = indY + indZ + ix;\r\n            // getCornerCoord(vBoxMin, vBoxMax, ix, iy, iz, side, &vCorner);\r\n            let t = ix * sideInv;\r\n            const xCorner = vBoxMin.x * (1.0 - t) + vBoxMax.x * t;\r\n            t = iy * sideInv;\r\n            const yCorner = vBoxMin.y * (1.0 - t) + vBoxMax.y * t;\r\n            t = iz * sideInv;\r\n            const zCorner = vBoxMin.z * (1.0 - t) + vBoxMax.z * t;\r\n\r\n            const dx = xCorner - vCenter.x;\r\n            const dy = yCorner - vCenter.y;\r\n            const dz = zCorner - vCenter.z;\r\n            const dist2 = dx * dx + dy * dy + dz * dz;\r\n            if (dist2 < probeSpRad2) {\r\n              distToSphere = Math.sqrt(dist2);\r\n              distToBorder = -(distToSphere - probeSphereRadius);\r\n              innerBlockWorkAround();\r\n            } // if (dist from corner point to sphere center more 2 radiuses)\r\n          } // for (ix)\r\n        } // for (iz)\r\n      } // for (iy)\r\n    } // for (i) all geo vertices\r\n    return 0;\r\n  }\r\n\r\n  _innerBuild() {\r\n    let ok;\r\n    const expandFactor = 1.2;\r\n\r\n    // performance test\r\n    // this.performanceTest();\r\n\r\n    // Create temporary atoms (but colored)\r\n    const packedArrays = {\r\n      posRad: this._posRad,\r\n      colors: this._colors,\r\n      atoms: this._opts.atoms,\r\n    };\r\n    this.complex = this._opts.parent;\r\n    this.atoms = packedArrays.atoms;\r\n    this.meshResolution = this._opts.gridSpacing;\r\n    this.atomRadiusScale = this._opts.radScale;\r\n    this.colorMode = this._opts.colorMode;\r\n    this.probeRadius = this._opts.probeRadius;\r\n    this.useVertexColors = true;\r\n    this.excludeProbe = this._opts.excludeProbe;\r\n    this.visibilitySelector = this._opts.visibilitySelector;\r\n\r\n    this.geoOut = null;\r\n\r\n    this.hashLines = null;\r\n    this.hashEntries = null;\r\n    this.numHashEtriesAllocated = 0;\r\n    this.numHashEntryIndex = 0;\r\n    this.maxNumVertices = 0;\r\n    this.maxNumTriangles = 0;\r\n\r\n    const atomsColored = new Array(this.atoms.length);\r\n    this.convertToAtomsColored(packedArrays, atomsColored);\r\n\r\n    // find bbox for spheres scene\r\n    const vBoxMin = this.vBoxMin = new THREE.Vector3();\r\n    const vBoxMax = this.vBoxMax = new THREE.Vector3();\r\n    this.getBoundingBox(atomsColored, vBoxMin, vBoxMax);\r\n\r\n    const marCubeResoultion = this.marCubeResoultion = this.meshResolution * (2 + 2);\r\n\r\n    // build grid corners for Marching cube algorithm\r\n    const side = marCubeResoultion;\r\n    const side2 = side * side;\r\n    const side3 = side2 * side;\r\n    const corners = utils.allocateTyped(Float32Array, side3);\r\n    const rProbeRadius = this.probeRadius * this.atomRadiusScale;\r\n\r\n    this.calculateGridCorners(corners, side, vBoxMin, vBoxMax, atomsColored, rProbeRadius);\r\n\r\n    const numCells = marCubeResoultion - 1;\r\n    const cube = new IsoSurfaceMarchCube();\r\n    ok = cube.create(numCells);\r\n    if (ok < 0) {\r\n      return ok;\r\n    }\r\n    // copy corners to cells\r\n    const vCellStep = new THREE.Vector3();\r\n    vCellStep.x = (vBoxMax.x - vBoxMin.x) / numCells;\r\n    vCellStep.y = (vBoxMax.y - vBoxMin.y) / numCells;\r\n    vCellStep.z = (vBoxMax.z - vBoxMin.z) / numCells;\r\n\r\n    let numIntersectedCellsEstim = this.getNumIntersectedCells(side, numCells, corners, cube);\r\n    let maxNumVertices = Math.floor(numIntersectedCellsEstim * expandFactor);\r\n    let maxNumTriangles = Math.floor(numIntersectedCellsEstim * expandFactor * 2);\r\n\r\n    this.geoOut = new IsoSurfaceGeo(maxNumVertices, maxNumTriangles, this.useVertexColors);\r\n\r\n    ok = this.createVertexHash(maxNumVertices, maxNumTriangles);\r\n    if (ok < 0) {\r\n      return ok;\r\n    }\r\n\r\n    // build voxel world (used to check triangle-to-atom tie and to calculate normals and colors)\r\n    let probeRadForNormalsColors = rProbeRadius;\r\n    if (this.excludeProbe) {\r\n      probeRadForNormalsColors = 0.01;\r\n    }\r\n    this.voxelWorld = new IsosurfaceBuildNormals(\r\n      atomsColored.length, atomsColored,\r\n      vBoxMin, vBoxMax, probeRadForNormalsColors,\r\n    );\r\n    this.voxelWorld.createVoxels();\r\n\r\n    ok = this.buildGeoFromCorners(marCubeResoultion, vBoxMin, vBoxMax, corners, vCellStep, cube);\r\n    if (this.excludeProbe) {\r\n      // using 3d mesh (geoOut) as a surface points\r\n      // move probe sphere and try to minimuze corners values\r\n      this.modifyExcludedFromGeo(side, rProbeRadius, vBoxMin, vBoxMax, this.geoOut, corners);\r\n\r\n      // delete old builded geo\r\n      this.geoOut._vertices = null;\r\n      this.geoOut._colors = null;\r\n      this.geoOut._indices = null;\r\n      this.geoOut._normals = null;\r\n      this.geoOut._numVertices = 0;\r\n      this.geoOut._numTriangles = 0;\r\n      this.geoOut = null;\r\n\r\n      // estimage geo vertices budget again\r\n      numIntersectedCellsEstim = this.getNumIntersectedCells(side, numCells, corners, cube);\r\n      maxNumVertices = Math.floor(numIntersectedCellsEstim * expandFactor);\r\n      maxNumTriangles = Math.floor(numIntersectedCellsEstim * expandFactor * 2);\r\n\r\n      // creates empty new geometry\r\n      this.geoOut = new IsoSurfaceGeo(maxNumVertices, maxNumTriangles, this.useVertexColors);\r\n      ok = this.createVertexHash(maxNumVertices, maxNumTriangles);\r\n      if (ok < 0) {\r\n        return ok;\r\n      }\r\n      // build vertices and triangles from corners values\r\n      ok = this.buildGeoFromCorners(side, vBoxMin, vBoxMax, corners, vCellStep, cube);\r\n    }\r\n\r\n    // build vertex normals\r\n    this.voxelWorld.buildNormals(this.geoOut._vertices.length, this.geoOut._vertices, this.geoOut._normals);\r\n    // More value : more smooth color mixing\r\n    // value about 0.7: very rough colors borders\r\n    let radiusColorSmoothness = 6.5;\r\n    if (this.excludeProbe) {\r\n      radiusColorSmoothness -= 1.5;\r\n    }\r\n    if (this.useVertexColors) {\r\n      this.voxelWorld.buildColors(\r\n        this.geoOut._vertices.length, this.geoOut._vertices,\r\n        this.geoOut._colors, radiusColorSmoothness,\r\n      );\r\n    }\r\n    this.voxelWorld.destroyVoxels();\r\n    this.voxelWorld = null;\r\n\r\n    // remove objects\r\n    cube.destroy();\r\n\r\n    return ok;\r\n  }\r\n}\r\n\r\n// All code below must be erased from every device and each developer's memory\r\n\r\nexport default SSIsosurfaceGeometry;\r\n","import * as THREE from 'three';\r\nimport EventDispatcher from '../../utils/EventDispatcher';\r\n\r\nfunction createLabel(fieldTxt, className) {\r\n  const text = document.createElement('div');\r\n  text.className = className;\r\n\r\n  if (typeof fieldTxt === 'string') {\r\n    const spanText = document.createElement('span');\r\n    spanText.style.fontSize = '150%';\r\n    const strings = fieldTxt.split('\\n');\r\n\r\n    for (let i = 0, n = strings.length; i < n; ++i) {\r\n      const spanNodeP = document.createElement('span');\r\n      const spanNodeText = document.createTextNode(strings[i]);\r\n      spanNodeP.appendChild(spanNodeText);\r\n      spanText.appendChild(spanNodeP);\r\n      if (i < n - 1) {\r\n        spanText.appendChild(document.createElement('br'));\r\n      }\r\n    }\r\n\r\n    text.appendChild(spanText);\r\n  } else {\r\n    text.appendChild(fieldTxt);\r\n  }\r\n  text.worldPos = new THREE.Vector3();\r\n  return text;\r\n}\r\nclass LabelsGeometry extends EventDispatcher {\r\n  constructor(instanceCount, opts) {\r\n    super();\r\n    this._opts = opts;\r\n    this.items = [];\r\n    this.needsUpdate = false;\r\n\r\n    let xTranslation = -50;\r\n    let yTranslation = -50;\r\n    switch (opts.horizontalAlign) {\r\n      case 'left':\r\n        xTranslation = 0;\r\n        break;\r\n      case 'right':\r\n        xTranslation = -100;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    switch (opts.verticalAlign) {\r\n      case 'top':\r\n        yTranslation = -100;\r\n        break;\r\n      case 'bottom':\r\n        yTranslation = 0;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const deltaPos = new THREE.Vector3(opts.dx || 0, opts.dy || 0, opts.dz || 0);\r\n    this.userData = {\r\n      translation: `translate(${xTranslation}%, ${yTranslation}%)`,\r\n      offset: deltaPos,\r\n    };\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, fieldTxt) {\r\n    const opts = this._opts;\r\n    const text = this.items[itemIdx] || createLabel(fieldTxt, 'label');\r\n\r\n    text.worldPos.copy(itemPos);\r\n    text.style.textAlign = opts.horizontalAlign;\r\n    text.style.verticalAlign = opts.verticalAlign;\r\n    this.items[itemIdx] = text;\r\n  }\r\n\r\n  setColor(itemIdx, fColor, bColor) {\r\n    const text = this.items[itemIdx];\r\n    text.opts = {\r\n      color: fColor,\r\n      background: bColor,\r\n    };\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.needsUpdate = true;\r\n    this.dispatchEvent({ type: 'update' });\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n  }\r\n\r\n  // unimplemented functions\r\n  raycast() {\r\n  }\r\n\r\n  setOpacity() {\r\n\r\n  }\r\n\r\n  getSubset() {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default LabelsGeometry;\r\n","import InstancedSpheresGeometry from './InstancedSpheresGeometry';\r\nimport SimpleSpheresGeometry from './SimpleSpheresGeometry';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\nimport Instanced2CCylindersGeometry from './Instanced2CCylindersGeometry';\r\nimport ExtrudedObjectsGeometry from './ExtrudedObjectsGeometry';\r\nimport ChunkedLinesGeometry from './ChunkedLinesGeometry';\r\nimport TwoColorLinesGeometry from './TwoColorLinesGeometry';\r\nimport CrossGeometry from './CrossGeometry';\r\nimport QuickSurfGeometry from './QuickSurfGeometry';\r\nimport ContactSurfaceGeometry from './ContactSurfaceGeometry';\r\nimport SSIsosurfaceGeometry from './SSIsosurfaceGeometry';\r\nimport LabelsGeometry from './LabelsGeometry';\r\n\r\nexport default {\r\n  InstancedSpheresGeometry,\r\n  SimpleSpheresGeometry,\r\n  Simple2CCylindersGeometry,\r\n  Instanced2CCylindersGeometry,\r\n  ExtrudedObjectsGeometry,\r\n  ChunkedLinesGeometry,\r\n  TwoColorLinesGeometry,\r\n  CrossGeometry,\r\n  QuickSurfGeometry,\r\n  ContactSurfaceGeometry,\r\n  SSIsosurfaceGeometry,\r\n  LabelsGeometry,\r\n};\r\n","import UberMaterial from '../shaders/UberMaterial';\r\n\r\nexport default function (SuperClass) {\r\n  class NewObjectType extends SuperClass {\r\n    constructor(...rest) {\r\n      super(...rest);\r\n      this.onBeforeRender = NewObjectType.prototype.onBeforeRender;\r\n    }\r\n\r\n    onBeforeRender(renderer, scene, camera, geometry, material, group) {\r\n      this._onBeforeRender(renderer, scene, camera, geometry, material, group);\r\n      this._update();\r\n    }\r\n\r\n    _onBeforeRender() {\r\n    }\r\n\r\n    _update() {\r\n      const { material } = this;\r\n      if (!material) {\r\n        return;\r\n      }\r\n\r\n      if (material instanceof UberMaterial) {\r\n        material.updateUniforms();\r\n      }\r\n    }\r\n  }\r\n\r\n  return NewObjectType;\r\n}\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass ZSpriteMesh extends Mesh {\r\n  _onBeforeRender(renderer, scene, camera, _geometry, _material, _group) {\r\n    Mesh.prototype._onBeforeRender.call(this, renderer, scene, camera);\r\n    const { material } = this;\r\n    if (!material) {\r\n      return;\r\n    }\r\n\r\n    if (material.uniforms.invModelViewMatrix) {\r\n      // NOTE: update of modelViewMatrix inside threejs is done after onBeforeRender call,\r\n      // so we have to do it manually in that place\r\n      this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\r\n      // get inverse matrix\r\n      material.uniforms.invModelViewMatrix.value.getInverse(this.modelViewMatrix);\r\n      material.uniformsNeedUpdate = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ZSpriteMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass ZClippedMesh extends Mesh {\r\n  constructor(geometry, material) {\r\n    super(geometry, material);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n\r\n  static _mvLength = new THREE.Vector3();\r\n\r\n  static _center = new THREE.Vector3();\r\n\r\n  static _modelView = new THREE.Matrix4();\r\n\r\n  _onBeforeRender(renderer, scene, camera) {\r\n    Mesh.prototype._onBeforeRender.call(this, renderer, scene, camera);\r\n\r\n    const geo = this.geometry;\r\n    const { material } = this;\r\n    if (!geo.zClip || !material.uberOptions) {\r\n      return;\r\n    }\r\n\r\n    const zClipCoef = 0.5;\r\n\r\n    const modelView = ZClippedMesh._modelView;\r\n    const mvLength = ZClippedMesh._mvLength;\r\n    const center = ZClippedMesh._center;\r\n\r\n    modelView.multiplyMatrices(this.matrixWorld, camera.matrixWorldInverse);\r\n    const s = mvLength.setFromMatrixColumn(modelView, 0).length();\r\n    center.copy(geo.boundingSphere.center);\r\n\r\n    this.localToWorld(center);\r\n    material.uberOptions.zClipValue = camera.position.z - center.z\r\n      - s * (zClipCoef * geo.boundingSphere.radius);\r\n  }\r\n}\r\n\r\nexport default ZClippedMesh;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport CSS2DObject from '../CSS2DObject';\r\nimport utils from '../../utils';\r\n\r\nclass TextMesh extends THREE.Group {\r\n  constructor(geometry, _material) {\r\n    super();\r\n    this.geometry = geometry;\r\n\r\n    const self = this;\r\n    self.initialized = false;\r\n    this.geometry.addEventListener('update', () => {\r\n      self.update();\r\n    });\r\n  }\r\n\r\n  init() {\r\n    const { children } = this;\r\n    for (let i = children.length - 1; i >= 0; --i) {\r\n      this.remove(children[i]);\r\n    }\r\n\r\n    const { items, userData } = this.geometry;\r\n    for (let i = 0, n = items.length; i < n; ++i) {\r\n      const srcItem = items[i];\r\n      if (!srcItem) {\r\n        continue;\r\n      }\r\n      const item = utils.shallowCloneNode(srcItem);\r\n      const label = new CSS2DObject(item);\r\n      label.userData = _.clone(userData);\r\n      const el = label.getElement();\r\n      el.style.visibility = 'visible';\r\n      label.source = srcItem;\r\n      this.add(label);\r\n    }\r\n    this.initialized = true;\r\n  }\r\n\r\n  update() {\r\n    const geo = this.geometry;\r\n    if (!geo.needsUpdate) {\r\n      return;\r\n    }\r\n    const { children } = this;\r\n    if (!this.initialized) {\r\n      this.init();\r\n    }\r\n\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      const child = children[i];\r\n      const item = child.source;\r\n      child.position.copy(item.worldPos);\r\n      child.userData.color = item.opts.color;\r\n      child.userData.background = item.opts.background;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TextMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nfunction SimpleMesh(geometry, material) {\r\n  Mesh.call(this, geometry, material);\r\n  this.castShadow = true;\r\n  this.receiveShadow = true;\r\n}\r\n\r\nSimpleMesh.prototype = Object.create(Mesh.prototype);\r\nSimpleMesh.prototype.constructor = SimpleMesh;\r\n\r\nexport default SimpleMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\nconst _viewport = new THREE.Vector2();\r\n\r\nclass ThickLineMesh extends Mesh {\r\n  _onBeforeRender(renderer, scene, camera, _geometry, _material, _group) {\r\n    const { material } = this;\r\n    if (!material.uberOptions) {\r\n      return;\r\n    }\r\n\r\n    material.uberOptions.projMatrixInv.getInverse(camera.projectionMatrix, true);\r\n    renderer.getSize(_viewport);\r\n    material.uberOptions.viewport.set(_viewport.width, _viewport.height);\r\n  }\r\n}\r\n\r\nexport default ThickLineMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass InstancedMesh extends Mesh {\r\n  constructor(...rest) {\r\n    super(...rest);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n}\r\n\r\nexport default InstancedMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\nimport ZSpriteMesh from './ZSpriteMesh';\r\nimport ZClippedMesh from './ZClippedMesh';\r\nimport TextMesh from './TextMesh';\r\nimport SimpleMesh from './SimpleMesh';\r\nimport ThickLineMesh from './ThickLineMesh';\r\nimport InstancedMesh from './InstancedMesh';\r\n\r\nexport default {\r\n  ZClipped: ZClippedMesh,\r\n  ZSprite: ZSpriteMesh,\r\n  Text: TextMesh,\r\n  Line: UberObject(THREE.Line),\r\n  LineSegments: UberObject(THREE.LineSegments),\r\n  Mesh: SimpleMesh,\r\n  ThickLineMesh,\r\n  Instanced: InstancedMesh,\r\n};\r\n","import geometries from '../geometries/geometries';\r\nimport meshes from './meshes';\r\nimport ThickLinesGeometry from '../geometries/ThickLinesGeometry';\r\n\r\nfunction setMatParams(params, uniforms) {\r\n  return function (material) {\r\n    material.setValues(params);\r\n    material.setUberOptions(uniforms);\r\n  };\r\n}\r\n\r\nfunction _createInstancedCylinders(useZSprites, openEnded) {\r\n  return {\r\n    Geometry(a, b) {\r\n      return new geometries.Instanced2CCylindersGeometry(a, b, useZSprites, openEnded);\r\n    },\r\n    Object: useZSprites ? meshes.ZSprite : meshes.Instanced,\r\n    initMaterial: setMatParams({\r\n      instancedMatrix: true,\r\n      attrColor: true,\r\n      attrColor2: true,\r\n      attrAlphaColor: true,\r\n      cylinderSprite: useZSprites,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createLineSegmentsGeoTriplet(geo, renderParams) {\r\n  const thickLines = geo.prototype instanceof ThickLinesGeometry;\r\n  const lineWidth = renderParams.lineWidth || 0;\r\n  return {\r\n    Geometry: geo,\r\n    Object: thickLines ? meshes.ThickLineMesh : meshes.LineSegments,\r\n    initMaterial: setMatParams({\r\n      lights: false,\r\n      attrColor: true,\r\n      attrAlphaColor: true,\r\n      thickLine: thickLines,\r\n    }, {\r\n      lineWidth,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createSimpleGeoTriplet(geoClass) {\r\n  return {\r\n    Geometry: geoClass,\r\n    Object: meshes.Mesh,\r\n    initMaterial: setMatParams({\r\n      attrColor: true,\r\n      attrAlphaColor: true,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createIsoSurfaceGeoTriplet(geoClass, caps, settings, renderParams) {\r\n  const surfaceOpts = {\r\n    wireframe: !!renderParams.wireframe,\r\n    fakeOpacity: settings.now.isoSurfaceFakeOpacity,\r\n    zClip: renderParams.zClip,\r\n  };\r\n  return {\r\n    Geometry: geoClass,\r\n    Object: meshes.ZClipped,\r\n    initMaterial: setMatParams({\r\n      attrColor: true,\r\n      attrAlphaColor: false,\r\n      wireframe: surfaceOpts.wireframe,\r\n      fakeOpacity: surfaceOpts.fakeOpacity,\r\n      zClip: surfaceOpts.zClip,\r\n    }),\r\n  };\r\n}\r\n\r\nclass MeshCreator {\r\n  static createSpheres(caps, settings) {\r\n    const useZSprites = settings.now.zSprites;\r\n    return {\r\n      Geometry(a, b) {\r\n        return new geometries.InstancedSpheresGeometry(a, b, useZSprites);\r\n      },\r\n      Object: useZSprites ? meshes.ZSprite : meshes.Instanced,\r\n      initMaterial: setMatParams({\r\n        instancedPos: true,\r\n        attrColor: true,\r\n        attrAlphaColor: true,\r\n        sphereSprite: useZSprites,\r\n      }),\r\n    };\r\n  }\r\n\r\n  static create2CClosedCylinders(_caps, _settings) {\r\n    return _createInstancedCylinders(false, false);\r\n  }\r\n\r\n  static create2CCylinders(caps, settings) {\r\n    return _createInstancedCylinders(settings.now.zSprites, true);\r\n  }\r\n\r\n  static create2CLines(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.TwoColorLinesGeometry, renderParams);\r\n  }\r\n\r\n  static createCrosses(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.CrossGeometry, renderParams);\r\n  }\r\n\r\n  static createExtrudedChains(_caps, _settings) {\r\n    return _createSimpleGeoTriplet(geometries.ExtrudedObjectsGeometry);\r\n  }\r\n\r\n  static createChunkedLines(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.ChunkedLinesGeometry, renderParams);\r\n  }\r\n\r\n  static createQuickSurface(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.QuickSurfGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createContactSurface(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.ContactSurfaceGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createSASSES(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.SSIsosurfaceGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createLabels(_caps, _settings) {\r\n    return {\r\n      Geometry: geometries.LabelsGeometry,\r\n      Object: meshes.Text,\r\n      initMaterial() {\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default MeshCreator;\r\n","import * as THREE from 'three';\r\nimport gfxutils from '../gfxutils';\r\n\r\nclass TransformGroup extends THREE.Object3D {\r\n  static _inverseMatrix = new THREE.Matrix4();\r\n\r\n  static _ray = new THREE.Ray();\r\n\r\n  constructor(geometry, geoParams, material, transforms) {\r\n    super();\r\n    this._geometry = geometry;\r\n    this._geoParams = geoParams;\r\n    const mat = material.createInstance();\r\n    geoParams.initMaterial(mat);\r\n    this._material = mat;\r\n    this._transforms = transforms.length > 0 ? transforms : [new THREE.Matrix4()];\r\n    const meshes = this._createMeshes(geometry);\r\n    for (let i = 0, n = meshes.length; i < n; ++i) {\r\n      this.add(meshes[i]);\r\n    }\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const ray = TransformGroup._ray;\r\n    const inverseMatrix = TransformGroup._inverseMatrix;\r\n    const { children } = this;\r\n    ray.copy(raycaster.ray);\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      const child = children[i];\r\n\r\n      if (!gfxutils.belongToSelectLayers(child)) {\r\n        continue;\r\n      }\r\n\r\n      child.updateMatrixWorld();\r\n      const mtx = child.matrixWorld;\r\n      inverseMatrix.getInverse(mtx);\r\n      raycaster.ray.copy(ray).applyMatrix4(inverseMatrix);\r\n      const childIntersects = [];\r\n      this._geometry.raycast(raycaster, childIntersects);\r\n\r\n      for (let j = 0, ciCount = childIntersects.length; j < ciCount; ++j) {\r\n        const inters = childIntersects[j];\r\n        if (inters.point) {\r\n          inters.point.applyMatrix4(mtx);\r\n          inters.distance = ray.origin.distanceTo(inters.point);\r\n        }\r\n        inters.object = child;\r\n        intersects[intersects.length] = inters;\r\n      }\r\n    }\r\n    raycaster.ray.copy(ray);\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const geos = this._geometry.getSubset(chunkIndices);\r\n    const subset = [];\r\n    let subIdx = 0;\r\n\r\n    for (let i = 0, n = geos.length; i < n; ++i) {\r\n      const meshes = this._createMeshes(geos[i]);\r\n      for (let j = 0, meshCnt = meshes.length; j < meshCnt; ++j) {\r\n        subset[subIdx++] = meshes[j];\r\n      }\r\n    }\r\n\r\n    return subset;\r\n  }\r\n\r\n  _createMeshes(geometry) {\r\n    const transforms = this._transforms;\r\n    const Mesh = this._geoParams.Object;\r\n    const material = this._material;\r\n    const meshes = [];\r\n    for (let i = 0, n = transforms.length; i < n; ++i) {\r\n      const mesh = new Mesh(geometry, material);\r\n      mesh.applyMatrix(transforms[i]);\r\n\r\n      meshes[i] = mesh;\r\n    }\r\n\r\n    return meshes;\r\n  }\r\n}\r\n\r\nexport default TransformGroup;\r\n","import RCGroup from '../../RCGroup';\r\nimport TransformGroup from '../../meshes/TransformGroup';\r\n\r\nfunction wrapper(Name, args) {\r\n  const params = [Name].concat(args);\r\n  return Name.bind(...params);\r\n}\r\n\r\nclass ChemGroup extends RCGroup {\r\n  constructor(geoParams, selection, colorer, mode, transforms, polyComplexity, material) {\r\n    super();\r\n    if (this.constructor === ChemGroup) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    this._selection = selection;\r\n    this._mode = mode;\r\n    this._colorer = colorer;\r\n    this._chunksIdc = selection.chunks;\r\n    this._polyComplexity = polyComplexity;\r\n    this._geo = new (wrapper(geoParams.Geometry, this._makeGeoArgs()))();\r\n    this._mesh = new TransformGroup(this._geo, geoParams, material, transforms);\r\n    this.add(this._mesh);\r\n    this._build();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    throw new Error('ChemGroup subclass must override _makeGeoArgs() method');\r\n  }\r\n\r\n  /**\r\n   * Builds subset geometry by ATOMS index list\r\n   *\r\n   * @param {Number} mask - Representation mask\r\n   * @param {Boolean} innerOnly - if true returns inner bonds only - without halves\r\n   * @returns {Array} Subset geometry\r\n   */\r\n  getSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : false;\r\n    const chunksList = this._calcChunksList(mask, innerOnly);\r\n    if (chunksList.length === 0) {\r\n      return [];\r\n    }\r\n    return this._mesh.getSubset(chunksList);\r\n  }\r\n\r\n  _changeSubsetOpacity(mask, value, innerOnly) {\r\n    const chunksList = this._calcChunksList(mask, innerOnly);\r\n    if (chunksList.length === 0) {\r\n      return;\r\n    }\r\n    this._geo.setOpacity(chunksList, value);\r\n  }\r\n\r\n  enableSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : true;\r\n    this._changeSubsetOpacity(mask, 1.0, innerOnly);\r\n  }\r\n\r\n  disableSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : true;\r\n    this._changeSubsetOpacity(mask, 0.0, innerOnly);\r\n  }\r\n}\r\n\r\nexport default ChemGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass AtomsGroup extends ChemGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { atoms } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const atomsIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const atomIdx = atomsIdc[inters[i].chunkIdx];\r\n      if (atomIdx < atoms.length) {\r\n        inters[i].atom = atoms[atomIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const { atoms } = this._selection;\r\n    const atomsIdc = this._chunksIdc;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      if ((atom.mask & mask) !== 0) {\r\n        chunksList.push(i);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default AtomsGroup;\r\n","import AtomsGroup from './AtomsGroup';\r\n\r\nclass AtomsSphereGroup extends AtomsGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length, this._polyComplexity];\r\n  }\r\n\r\n  _build() {\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      geo.setItem(i, atom.position, mode.calcAtomRadius(atom));\r\n      geo.setColor(i, colorer.getAtomColor(atom, parent));\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      geo.setItem(i, frameData.getAtomPos(atomsIdc[i]), mode.calcAtomRadius(atom));\r\n      if (updateColor) {\r\n        geo.setColor(i, frameData.getAtomColor(colorer, atom));\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default AtomsSphereGroup;\r\n","import AtomsSphereGroup from './AtomsSphereGroup';\r\n\r\nclass AtomsSurfaceGroup extends AtomsSphereGroup {\r\n  _makeGeoArgs() {\r\n    const selectedAtoms = [];\r\n    const { atoms, chunks } = this._selection;\r\n    const n = chunks.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      selectedAtoms[i] = atoms[chunks[i]];\r\n    }\r\n    const opts = this._mode.getSurfaceOpts();\r\n    opts.atoms = selectedAtoms;\r\n    return [n, opts];\r\n  }\r\n}\r\nexport default AtomsSurfaceGroup;\r\n","/* This is a stub class keep it until SAS/SES is refactored */\r\n\r\nimport AtomsSphereGroup from './AtomsSphereGroup';\r\n\r\nclass AtomsSASSESGroupStub extends AtomsSphereGroup {\r\n  _makeGeoArgs() {\r\n    const selectedAtoms = [];\r\n    const { atoms, chunks } = this._selection;\r\n    const n = chunks.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      selectedAtoms[i] = atoms[chunks[i]];\r\n    }\r\n    const opts = this._mode.getSurfaceOpts();\r\n    opts.atoms = selectedAtoms;\r\n    opts.selection = this._selection;\r\n    opts.colorMode = this._colorer;\r\n    return [n, opts];\r\n  }\r\n}\r\n\r\nexport default AtomsSASSESGroupStub;\r\n","import AtomsGroup from './AtomsGroup';\r\nimport utils from '../../../utils';\r\n\r\nfunction adjustColor(color) {\r\n  let r = (color >> 16) & 255;\r\n  let g = (color >> 8) & 255;\r\n  let b = color & 255;\r\n\r\n  if (0.2126 * r + 0.7152 * g + 0.0722 * b > 127) {\r\n    r = r * 3 / 10;\r\n    g = g * 3 / 10;\r\n    b = b * 3 / 10;\r\n  } else {\r\n    r = 255 - ((255 - r) * 3 / 10);\r\n    g = 255 - ((255 - g) * 3 / 10);\r\n    b = 255 - ((255 - b) * 3 / 10);\r\n  }\r\n\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\nfunction inverseColor(color) {\r\n  const r = (color >> 16) & 255;\r\n  const g = (color >> 8) & 255;\r\n  const b = color & 255;\r\n\r\n  return ((255 - r) << 16) | ((255 - g) << 8) | (255 - b);\r\n}\r\n\r\nfunction getAtomText(atom) {\r\n  if (atom.name.getNode() !== null) {\r\n    return atom.name.getNode();\r\n  }\r\n\r\n  return atom.getVisualName();\r\n}\r\n\r\nconst colorMappings = {\r\n  none(c) {\r\n    return c;\r\n  },\r\n  adjust: adjustColor,\r\n  inverse: inverseColor,\r\n};\r\n\r\nfunction propagateColor(color, rule) {\r\n  let result;\r\n  if (colorMappings.hasOwnProperty(rule)) {\r\n    result = utils.hexColor(colorMappings[rule](color));\r\n  } else {\r\n    const val = parseInt(rule, 16);\r\n    if (!Number.isNaN(val) && rule.toLowerCase().startsWith('0x')) {\r\n      result = utils.hexColor(val);\r\n    } else {\r\n      result = '#000000';\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nconst templateMappings = {\r\n  serial(a) {\r\n    return a.serial;\r\n  },\r\n  name(a) {\r\n    return a.getVisualName();\r\n  },\r\n  elem(a) {\r\n    return a.element.name;\r\n  },\r\n  residue(a) {\r\n    return a.residue.getType().getName();\r\n  },\r\n  sequence(a) {\r\n    return a.residue.getSequence();\r\n  },\r\n  chain(a) {\r\n    return a.residue.getChain().getName();\r\n  },\r\n  hetatm(a) {\r\n    return a.isHet();\r\n  },\r\n  water(a) {\r\n    return a.residue.getType().getName() === 'HOH' || a.residue.getType().getName() === 'WAT';\r\n  },\r\n};\r\n\r\nconst parseTemplate = function (atom, str) {\r\n  return str.replace(/\\{\\{(\\s*\\w+\\s*)\\}\\}/g, (m) => {\r\n    let key = m.replace(/\\s+/g, '');\r\n    key = key.substring(2, key.length - 2).toLowerCase();\r\n\r\n    if (templateMappings.hasOwnProperty(key)) {\r\n      return templateMappings[key](atom);\r\n    }\r\n    return 'null';\r\n  });\r\n};\r\n\r\nclass AtomsTextGroup extends AtomsGroup {\r\n  _makeGeoArgs() {\r\n    const opts = this._mode.getLabelOpts();\r\n    return [this._selection.chunks.length, opts];\r\n  }\r\n\r\n  _build() {\r\n    const opts = this._mode.getLabelOpts();\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms, parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      const text = opts.template ? parseTemplate(atom, opts.template) : getAtomText(atom);\r\n      if (!text) {\r\n        continue;\r\n      }\r\n      const color = colorer.getAtomColor(atom, parent);\r\n      const fgColor = parseInt(propagateColor(color, opts.fg).substring(1), 16);\r\n      const bgColor = opts.showBg ? parseInt(propagateColor(color, opts.bg).substring(1), 16) : 'transparent';\r\n      geo.setItem(i, atom.position, text);\r\n      geo.setColor(i, fgColor, bgColor);\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const opts = this._mode.getLabelOpts();\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      const text = opts.template ? parseTemplate(atom, opts.template) : getAtomText(atom);\r\n      if (!text) {\r\n        continue;\r\n      }\r\n      const color = frameData.getAtomColor(colorer, atom);\r\n      const fgColor = parseInt(propagateColor(color, opts.fg).substring(1), 16);\r\n      const bgColor = opts.showBg ? parseInt(propagateColor(color, opts.bg).substring(1), 16) : 'transparent';\r\n      geo.setItem(i, frameData.getAtomPos(atomsIdc[i]), text);\r\n      if (updateColor) {\r\n        geo.setColor(i, fgColor, bgColor);\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default AtomsTextGroup;\r\n","import * as THREE from 'three';\r\nimport AtomsGroup from './AtomsGroup';\r\n\r\nfunction _slerp(omega, v1, v2, t) {\r\n  const oSin = Math.sin(omega);\r\n  return v1.clone().multiplyScalar(Math.sin((1 - t) * omega) / oSin).addScaledVector(v2, Math.sin(t * omega) / oSin);\r\n}\r\n\r\nclass AromaticGroup extends AtomsGroup {\r\n  _buildInner(radOffset, addChunk) {\r\n    const chunksToIdx = this._selection.chunks;\r\n\r\n    const prevVector = new THREE.Vector3();\r\n    const currVector = new THREE.Vector3();\r\n    const segmentsHeight = this._segmentsHeight;\r\n    const leprStep = 1.0 / segmentsHeight;\r\n    const colorer = this._colorer;\r\n\r\n    const { cycles, parent } = this._selection;\r\n    let chunkIdx = 0;\r\n    let currAtomIdx = chunksToIdx[chunkIdx];\r\n\r\n    for (let cIdx = 0, cCount = cycles.length; cIdx < cCount; ++cIdx) {\r\n      const cycle = cycles[cIdx];\r\n      const cycAtoms = cycle.atoms;\r\n      const chunkPoints = [];\r\n      const tmpDir = [];\r\n      const { center } = cycle;\r\n      const cycleRad = cycle.radius - radOffset;\r\n      const n = cycAtoms.length;\r\n      let i = 0;\r\n      const prevPos = cycAtoms[n - 1].position;\r\n      let currPos = cycAtoms[i].position;\r\n      prevVector.subVectors(prevPos, center);\r\n      currVector.subVectors(currPos, center);\r\n      const upDir = currVector.clone().cross(prevVector).normalize();\r\n\r\n\r\n      for (; i < n; ++i) {\r\n        const omega = prevVector.angleTo(currVector);\r\n        tmpDir[i] = _slerp(omega, prevVector, currVector, 0.5).normalize();\r\n        currPos = cycAtoms[(i + 1) % n].position;\r\n        prevVector.copy(currVector);\r\n        currVector.subVectors(currPos, center);\r\n      }\r\n\r\n      for (i = 0; i < n; ++i) {\r\n        if (cycAtoms[i].index !== currAtomIdx) {\r\n          continue;\r\n        }\r\n        const start = tmpDir[i];\r\n        const end = tmpDir[(i + 1) % n];\r\n        const color = colorer.getAtomColor(cycAtoms[i], parent);\r\n        const currAngle = start.angleTo(end);\r\n\r\n        for (let j = 0; j <= segmentsHeight; ++j) {\r\n          chunkPoints[j] = _slerp(currAngle, start, end, j * leprStep).multiplyScalar(cycleRad).add(center);\r\n        }\r\n\r\n        addChunk(chunkIdx++, color, chunkPoints, center, upDir);\r\n        currAtomIdx = chunksToIdx[chunkIdx];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default AromaticGroup;\r\n","import * as THREE from 'three';\r\nimport gfxutils from '../../gfxutils';\r\nimport AromaticGroup from './AromaticGroup';\r\n\r\nfunction _createShape(rad, parts) {\r\n  const pts = [];\r\n  for (let i = 0; i < parts; ++i) {\r\n    const a = -2 * i / parts * Math.PI;\r\n    pts.push(new THREE.Vector3(Math.cos(a) * rad, Math.sin(a) * rad, 0));\r\n  }\r\n  return pts;\r\n}\r\nconst { calcChunkMatrix } = gfxutils;\r\n\r\nclass AromaticTorusGroup extends AromaticGroup {\r\n  _build() {\r\n    const segmentsHeight = this._segmentsHeight;\r\n    const torusRad = this._mode.getAromRadius();\r\n    const radiusV = new THREE.Vector2(torusRad, torusRad);\r\n    const radOffset = this._mode.calcStickRadius() + 2 * torusRad;\r\n    const lookAtVector = new THREE.Vector3();\r\n    const mtc = [];\r\n    const geo = this._geo;\r\n    this._buildInner(radOffset, (chunkIdx, color, points, center, upDir) => {\r\n      for (let j = 0; j <= segmentsHeight; ++j) {\r\n        const currPoint = points[j];\r\n        const currDir = currPoint.clone().sub(center).cross(upDir);\r\n        lookAtVector.addVectors(currPoint, currDir);\r\n        mtc[j] = calcChunkMatrix(currPoint, lookAtVector, upDir, radiusV);\r\n      }\r\n      geo.setItem(chunkIdx, mtc);\r\n      geo.setColor(chunkIdx, color);\r\n    });\r\n    geo.finalize();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    this._segmentsHeight = this._polyComplexity;\r\n    return [_createShape(1.0, this._polyComplexity), this._segmentsHeight + 1, this._selection.chunks.length];\r\n  }\r\n}\r\n\r\nexport default AromaticTorusGroup;\r\n","import AromaticGroup from './AromaticGroup';\r\n\r\nclass AromaticLinesGroup extends AromaticGroup {\r\n  _build() {\r\n    const geo = this._geo;\r\n    const radOffset = this._mode.getAromaticOffset();\r\n    this._buildInner(radOffset, (chunkIdx, color, points) => {\r\n      let prevPt = points[0];// do not replace with start\r\n      for (let j = 1; j <= this._segmentsHeight; ++j) {\r\n        const currPoint = points[j];\r\n        geo.setSegment(chunkIdx, j - 1, prevPt, currPoint);\r\n        prevPt = currPoint;\r\n      }\r\n      geo.setColor(chunkIdx, color);\r\n    });\r\n    geo.finalize();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    this._segmentsHeight = this._mode.getAromaticArcChunks();\r\n    return [this._selection.chunks.length, this._segmentsHeight, true];\r\n  }\r\n}\r\n\r\nexport default AromaticLinesGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass ResiduesGroup extends ChemGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { residues } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const resIdx = chunksIdc[inters[i].chunkIdx];\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const { residues } = this._selection;\r\n    const resIdc = this._chunksIdc;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      if ((res._mask & mask) !== 0) {\r\n        chunksList.push(i);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default ResiduesGroup;\r\n","import ResiduesGroup from './ResiduesGroup';\r\n\r\nclass NucleicItemGroup extends ResiduesGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { residues } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const resIdx = chunksIdc[Math.floor(inters[i].chunkIdx / 2)];\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const stickRad = this._mode.calcStickRadius();\r\n    let chunkIdx = 0;\r\n\r\n    const resIdc = this._selection.chunks;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      const color = colorer.getResidueColor(res, parent);\r\n      this._processItem(chunkIdx++, res._cylinders[0], res._cylinders[1], stickRad, color);\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    let chunkIdx = 0;\r\n    const { residues } = this._selection;\r\n    const resIdc = this._chunksIdc;\r\n\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      if ((res._mask & mask) !== 0) {\r\n        chunksList[chunkIdx++] = 2 * i;\r\n        chunksList[chunkIdx++] = 2 * i + 1;\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const residues = frameData.getResidues();\r\n    const { parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const stickRad = this._mode.calcStickRadius();\r\n    let chunkIdx = 0;\r\n\r\n    const resIdc = this._selection.chunks;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      const color = colorer.getResidueColor(res, parent);\r\n      this._processItem(chunkIdx++, res._cylinders[0], res._cylinders[1], stickRad, color);\r\n    }\r\n    geo.finishUpdate();\r\n  }\r\n}\r\n\r\nexport default NucleicItemGroup;\r\n","import NucleicItemGroup from './NucleicItemGroup';\r\n\r\nclass NucleicCylindersGroup extends NucleicItemGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length, this._polyComplexity];\r\n  }\r\n\r\n  _processItem(chunkIdx, cyl1, cyl2, stickRad, color) {\r\n    const geo = this._geo;\r\n    geo.setItem(chunkIdx, cyl1, cyl2, stickRad);\r\n    geo.setColor(chunkIdx, color, color);\r\n  }\r\n}\r\n\r\nexport default NucleicCylindersGroup;\r\n","import NucleicItemGroup from './NucleicItemGroup';\r\n\r\nclass NucleicSpheresGroup extends NucleicItemGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length * 2, this._polyComplexity];\r\n  }\r\n\r\n  _processItem(chunkIdx, cyl1, cyl2, stickRad, color) {\r\n    const geo = this._geo;\r\n    let idx = chunkIdx * 2;\r\n    geo.setItem(idx, cyl1, stickRad);\r\n    geo.setColor(idx, color);\r\n    idx++;\r\n    geo.setItem(idx, cyl2, stickRad);\r\n    geo.setColor(idx, color);\r\n  }\r\n}\r\n\r\nexport default NucleicSpheresGroup;\r\n","\r\n/*\r\nSmooth.js version 0.1.7\r\n\r\nTurn arrays into smooth functions.\r\n\r\nCopyright 2012 Spencer Cohen\r\nLicensed under MIT license (see \"Smooth.js MIT license.txt\")\r\n*/\r\n\r\n/*Constants (these are accessible by Smooth.WHATEVER in user space)\r\n*/\r\n\r\n(function() {\r\n  var AbstractInterpolator, CubicInterpolator, Enum, LinearInterpolator, NearestInterpolator, PI, SincFilterInterpolator, Smooth, clipClamp, clipMirror, clipPeriodic, defaultConfig, getColumn, getType, isValidNumber, k, makeLanczosWindow, makeScaledFunction, makeSincKernel, normalizeScaleTo, shallowCopy, sin, sinc, v, validateNumber, validateVector,\r\n    __hasProp = Object.prototype.hasOwnProperty,\r\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };\r\n\r\n  Enum = {\r\n    /*Interpolation methods\r\n    */\r\n    METHOD_NEAREST: 'nearest',\r\n    METHOD_LINEAR: 'linear',\r\n    METHOD_CUBIC: 'cubic',\r\n    METHOD_LANCZOS: 'lanczos',\r\n    METHOD_SINC: 'sinc',\r\n    /*Input clipping modes\r\n    */\r\n    CLIP_CLAMP: 'clamp',\r\n    CLIP_ZERO: 'zero',\r\n    CLIP_PERIODIC: 'periodic',\r\n    CLIP_MIRROR: 'mirror',\r\n    /* Constants for control over the cubic interpolation tension\r\n    */\r\n    CUBIC_TENSION_DEFAULT: 0,\r\n    CUBIC_TENSION_CATMULL_ROM: 0\r\n  };\r\n\r\n  defaultConfig = {\r\n    method: Enum.METHOD_CUBIC,\r\n    cubicTension: Enum.CUBIC_TENSION_DEFAULT,\r\n    clip: Enum.CLIP_CLAMP,\r\n    scaleTo: 0,\r\n    sincFilterSize: 2,\r\n    sincWindow: void 0\r\n  };\r\n\r\n  /*Index clipping functions\r\n  */\r\n\r\n  clipClamp = function(i, n) {\r\n    return Math.max(0, Math.min(i, n - 1));\r\n  };\r\n\r\n  clipPeriodic = function(i, n) {\r\n    i = i % n;\r\n    if (i < 0) i += n;\r\n    return i;\r\n  };\r\n\r\n  clipMirror = function(i, n) {\r\n    var period;\r\n    period = 2 * (n - 1);\r\n    i = clipPeriodic(i, period);\r\n    if (i > n - 1) i = period - i;\r\n    return i;\r\n  };\r\n\r\n  /*\r\n  Abstract scalar interpolation class which provides common functionality for all interpolators\r\n  \r\n  Subclasses must override interpolate().\r\n  */\r\n\r\n  AbstractInterpolator = (function() {\r\n\r\n    function AbstractInterpolator(array, config) {\r\n      this.array = array.slice(0);\r\n      this.length = this.array.length;\r\n      if (!(this.clipHelper = {\r\n        clamp: this.clipHelperClamp,\r\n        zero: this.clipHelperZero,\r\n        periodic: this.clipHelperPeriodic,\r\n        mirror: this.clipHelperMirror\r\n      }[config.clip])) {\r\n        throw \"Invalid clip: \" + config.clip;\r\n      }\r\n    }\r\n\r\n    AbstractInterpolator.prototype.getClippedInput = function(i) {\r\n      if ((0 <= i && i < this.length)) {\r\n        return this.array[i];\r\n      } else {\r\n        return this.clipHelper(i);\r\n      }\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperClamp = function(i) {\r\n      return this.array[clipClamp(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperZero = function(i) {\r\n      return 0;\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperPeriodic = function(i) {\r\n      return this.array[clipPeriodic(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperMirror = function(i) {\r\n      return this.array[clipMirror(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.interpolate = function(t) {\r\n      throw 'Subclasses of AbstractInterpolator must override the interpolate() method.';\r\n    };\r\n\r\n    return AbstractInterpolator;\r\n\r\n  })();\r\n\r\n  NearestInterpolator = (function(_super) {\r\n\r\n    __extends(NearestInterpolator, _super);\r\n\r\n    function NearestInterpolator() {\r\n      NearestInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    NearestInterpolator.prototype.interpolate = function(t) {\r\n      return this.getClippedInput(Math.round(t));\r\n    };\r\n\r\n    return NearestInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  LinearInterpolator = (function(_super) {\r\n\r\n    __extends(LinearInterpolator, _super);\r\n\r\n    function LinearInterpolator() {\r\n      LinearInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    LinearInterpolator.prototype.interpolate = function(t) {\r\n      var k;\r\n      k = Math.floor(t);\r\n      t -= k;\r\n      return (1 - t) * this.getClippedInput(k) + t * this.getClippedInput(k + 1);\r\n    };\r\n\r\n    return LinearInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  CubicInterpolator = (function(_super) {\r\n\r\n    __extends(CubicInterpolator, _super);\r\n\r\n    function CubicInterpolator(array, config) {\r\n      this.tangentFactor = 1 - Math.max(-1, Math.min(1, config.cubicTension));\r\n      CubicInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    CubicInterpolator.prototype.getTangent = function(k) {\r\n      return this.tangentFactor * (this.getClippedInput(k + 1) - this.getClippedInput(k - 1)) / 2;\r\n    };\r\n\r\n    CubicInterpolator.prototype.interpolate = function(t) {\r\n      var k, m, p, t2, t3;\r\n      k = Math.floor(t);\r\n      m = [this.getTangent(k), this.getTangent(k + 1)];\r\n      p = [this.getClippedInput(k), this.getClippedInput(k + 1)];\r\n      t -= k;\r\n      t2 = t * t;\r\n      t3 = t * t2;\r\n      return (2 * t3 - 3 * t2 + 1) * p[0] + (t3 - 2 * t2 + t) * m[0] + (-2 * t3 + 3 * t2) * p[1] + (t3 - t2) * m[1];\r\n    };\r\n\r\n    return CubicInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  sin = Math.sin, PI = Math.PI;\r\n\r\n  sinc = function(x) {\r\n    if (x === 0) {\r\n      return 1;\r\n    } else {\r\n      return sin(PI * x) / (PI * x);\r\n    }\r\n  };\r\n\r\n  makeLanczosWindow = function(a) {\r\n    return function(x) {\r\n      return sinc(x / a);\r\n    };\r\n  };\r\n\r\n  makeSincKernel = function(window) {\r\n    return function(x) {\r\n      return sinc(x) * window(x);\r\n    };\r\n  };\r\n\r\n  SincFilterInterpolator = (function(_super) {\r\n\r\n    __extends(SincFilterInterpolator, _super);\r\n\r\n    function SincFilterInterpolator(array, config) {\r\n      SincFilterInterpolator.__super__.constructor.apply(this, arguments);\r\n      this.a = config.sincFilterSize;\r\n      if (!config.sincWindow) throw 'No sincWindow provided';\r\n      this.kernel = makeSincKernel(config.sincWindow);\r\n    }\r\n\r\n    SincFilterInterpolator.prototype.interpolate = function(t) {\r\n      var k, n, sum, _ref, _ref2;\r\n      k = Math.floor(t);\r\n      sum = 0;\r\n      for (n = _ref = k - this.a + 1, _ref2 = k + this.a; _ref <= _ref2 ? n <= _ref2 : n >= _ref2; _ref <= _ref2 ? n++ : n--) {\r\n        sum += this.kernel(t - n) * this.getClippedInput(n);\r\n      }\r\n      return sum;\r\n    };\r\n\r\n    return SincFilterInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  getColumn = function(arr, i) {\r\n    var row, _i, _len, _results;\r\n    _results = [];\r\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n      row = arr[_i];\r\n      _results.push(row[i]);\r\n    }\r\n    return _results;\r\n  };\r\n\r\n  makeScaledFunction = function(f, baseScale, scaleRange) {\r\n    var scaleFactor, translation;\r\n    if (scaleRange.join === '0,1') {\r\n      return f;\r\n    } else {\r\n      scaleFactor = baseScale / (scaleRange[1] - scaleRange[0]);\r\n      translation = scaleRange[0];\r\n      return function(t) {\r\n        return f(scaleFactor * (t - translation));\r\n      };\r\n    }\r\n  };\r\n\r\n  getType = function(x) {\r\n    return Object.prototype.toString.call(x).slice('[object '.length, -1);\r\n  };\r\n\r\n  validateNumber = function(n) {\r\n    if (isNaN(n)) throw 'NaN in Smooth() input';\r\n    if (getType(n) !== 'Number') throw 'Non-number in Smooth() input';\r\n    if (!isFinite(n)) throw 'Infinity in Smooth() input';\r\n  };\r\n\r\n  validateVector = function(v, dimension) {\r\n    var n, _i, _len;\r\n    if (getType(v) !== 'Array') throw 'Non-vector in Smooth() input';\r\n    if (v.length !== dimension) throw 'Inconsistent dimension in Smooth() input';\r\n    for (_i = 0, _len = v.length; _i < _len; _i++) {\r\n      n = v[_i];\r\n      validateNumber(n);\r\n    }\r\n  };\r\n\r\n  isValidNumber = function(n) {\r\n    return (getType(n) === 'Number') && isFinite(n) && !isNaN(n);\r\n  };\r\n\r\n  normalizeScaleTo = function(s) {\r\n    var invalidErr;\r\n    invalidErr = \"scaleTo param must be number or array of two numbers\";\r\n    switch (getType(s)) {\r\n      case 'Number':\r\n        if (!isValidNumber(s)) throw invalidErr;\r\n        s = [0, s];\r\n        break;\r\n      case 'Array':\r\n        if (s.length !== 2) throw invalidErr;\r\n        if (!(isValidNumber(s[0]) && isValidNumber(s[1]))) throw invalidErr;\r\n        break;\r\n      default:\r\n        throw invalidErr;\r\n    }\r\n    return s;\r\n  };\r\n\r\n  shallowCopy = function(obj) {\r\n    var copy, k, v;\r\n    copy = {};\r\n    for (k in obj) {\r\n      if (!__hasProp.call(obj, k)) continue;\r\n      v = obj[k];\r\n      copy[k] = v;\r\n    }\r\n    return copy;\r\n  };\r\n\r\n  Smooth = function(arr, config) {\r\n    var baseDomainEnd, dimension, i, interpolator, interpolatorClass, interpolators, k, n, properties, smoothFunc, v;\r\n    if (config == null) config = {};\r\n    properties = {};\r\n    config = shallowCopy(config);\r\n    properties.config = shallowCopy(config);\r\n    if (config.scaleTo == null) config.scaleTo = config.period;\r\n    if (config.sincFilterSize == null) {\r\n      config.sincFilterSize = config.lanczosFilterSize;\r\n    }\r\n    for (k in defaultConfig) {\r\n      if (!__hasProp.call(defaultConfig, k)) continue;\r\n      v = defaultConfig[k];\r\n      if (config[k] == null) config[k] = v;\r\n    }\r\n    if (!(interpolatorClass = {\r\n      nearest: NearestInterpolator,\r\n      linear: LinearInterpolator,\r\n      cubic: CubicInterpolator,\r\n      lanczos: SincFilterInterpolator,\r\n      sinc: SincFilterInterpolator\r\n    }[config.method])) {\r\n      throw \"Invalid method: \" + config.method;\r\n    }\r\n    if (config.method === 'lanczos') {\r\n      config.sincWindow = makeLanczosWindow(config.sincFilterSize);\r\n    }\r\n    if (arr.length < 2) throw 'Array must have at least two elements';\r\n    properties.count = arr.length;\r\n    smoothFunc = (function() {\r\n      var _i, _j, _len, _len2;\r\n      switch (getType(arr[0])) {\r\n        case 'Number':\r\n          properties.dimension = 'scalar';\r\n          if (Smooth.deepValidation) {\r\n            for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n              n = arr[_i];\r\n              validateNumber(n);\r\n            }\r\n          }\r\n          interpolator = new interpolatorClass(arr, config);\r\n          return function(t) {\r\n            return interpolator.interpolate(t);\r\n          };\r\n        case 'Array':\r\n          properties.dimension = dimension = arr[0].length;\r\n          if (!dimension) throw 'Vectors must be non-empty';\r\n          if (Smooth.deepValidation) {\r\n            for (_j = 0, _len2 = arr.length; _j < _len2; _j++) {\r\n              v = arr[_j];\r\n              validateVector(v, dimension);\r\n            }\r\n          }\r\n          interpolators = (function() {\r\n            var _results;\r\n            _results = [];\r\n            for (i = 0; 0 <= dimension ? i < dimension : i > dimension; 0 <= dimension ? i++ : i--) {\r\n              _results.push(new interpolatorClass(getColumn(arr, i), config));\r\n            }\r\n            return _results;\r\n          })();\r\n          return function(t) {\r\n            var interpolator, _k, _len3, _results;\r\n            _results = [];\r\n            for (_k = 0, _len3 = interpolators.length; _k < _len3; _k++) {\r\n              interpolator = interpolators[_k];\r\n              _results.push(interpolator.interpolate(t));\r\n            }\r\n            return _results;\r\n          };\r\n        default:\r\n          throw \"Invalid element type: \" + (getType(arr[0]));\r\n      }\r\n    })();\r\n    if (config.clip === 'periodic') {\r\n      baseDomainEnd = arr.length;\r\n    } else {\r\n      baseDomainEnd = arr.length - 1;\r\n    }\r\n    config.scaleTo || (config.scaleTo = baseDomainEnd);\r\n    properties.domain = normalizeScaleTo(config.scaleTo);\r\n    smoothFunc = makeScaledFunction(smoothFunc, baseDomainEnd, properties.domain);\r\n    properties.domain.sort();\r\n    /*copy properties\r\n    */\r\n    for (k in properties) {\r\n      if (!__hasProp.call(properties, k)) continue;\r\n      v = properties[k];\r\n      smoothFunc[k] = v;\r\n    }\r\n    return smoothFunc;\r\n  };\r\n\r\n  for (k in Enum) {\r\n    if (!__hasProp.call(Enum, k)) continue;\r\n    v = Enum[k];\r\n    Smooth[k] = v;\r\n  }\r\n\r\n  Smooth.deepValidation = true;\r\n\r\n  (typeof exports !== \"undefined\" && exports !== null ? exports : window).Smooth = Smooth;\r\n\r\n}).call(this);\r\n","import * as THREE from 'three';\r\nimport { Smooth } from '../../../../vendor/js/Smooth';\r\nimport gfxutils from '../../gfxutils';\r\nimport chem from '../../../chem';\r\n\r\nconst { ResidueType } = chem;\r\n\r\nconst calcMatrix = gfxutils.calcChunkMatrix;\r\n\r\nfunction _buildStructureInterpolator(points, tension) {\r\n  const path = Smooth(points, {\r\n    method: Smooth.METHOD_CUBIC,\r\n    clip: Smooth.CLIP_CLAMP,\r\n    cubicTension: tension,\r\n    scaleTo: 1,\r\n  });\r\n\r\n  return function (t, argTrans) {\r\n    let transformT = argTrans;\r\n    if (transformT === null) {\r\n      // map our range to the [second .. last but one]\r\n      transformT = function (tt) {\r\n        return (tt * ((points.length - 1) - 2) + 1) / (points.length - 1);\r\n      };\r\n    }\r\n    const newt = transformT(t);\r\n    const ans = path(newt);\r\n    return new THREE.Vector3(ans[0], ans[1], ans[2]);\r\n  };\r\n}\r\n\r\nfunction _addPoints(centerPoints, topPoints, idx, residue) {\r\n  if (!residue._isValid) {\r\n    centerPoints[idx] = centerPoints[idx - 1];\r\n    topPoints[idx] = topPoints[idx - 1];\r\n    return;\r\n  }\r\n  const cp = residue._controlPoint;\r\n  centerPoints[idx] = [cp.x, cp.y, cp.z];\r\n  const tp = cp.clone().add(residue._wingVector);\r\n  topPoints[idx] = [tp.x, tp.y, tp.z];\r\n}\r\n\r\nfunction _addPointsForLoneResidue(centerPoints, topPoints, idx, residue) {\r\n  const nucleic = (residue._type.flags & ResidueType.Flags.NUCLEIC) !== 0;\r\n  const nameFrom = nucleic ? 'C5\\'' : 'N';\r\n  const nameTo = nucleic ? 'C3\\'' : 'C';\r\n\r\n  let posFrom;\r\n  let posTo;\r\n  residue.forEachAtom((atom) => {\r\n    const name = atom.getVisualName();\r\n    if (!posFrom && name === nameFrom) {\r\n      posFrom = atom.position;\r\n    } else if (!posTo && name === nameTo) {\r\n      posTo = atom.position;\r\n    }\r\n  });\r\n\r\n  // provide a fallback for unknown residues\r\n  if (!(posFrom && posTo)) {\r\n    posFrom = residue._firstAtom.position;\r\n    posTo = residue._lastAtom.position;\r\n  }\r\n\r\n  if (posFrom && posTo) {\r\n    const shift = posTo.clone().sub(posFrom);\r\n\r\n    const wing = residue._wingVector;\r\n    const cp = residue._controlPoint;\r\n    const tp = cp.clone().add(wing);\r\n\r\n    const cpPrev = cp.clone().sub(shift);\r\n    const tpPrev = cpPrev.clone().add(wing);\r\n    centerPoints[idx] = [cpPrev.x, cpPrev.y, cpPrev.z];\r\n    topPoints[idx] = [tpPrev.x, tpPrev.y, tpPrev.z];\r\n    ++idx;\r\n    centerPoints[idx] = [cpPrev.x, cpPrev.y, cpPrev.z];\r\n    topPoints[idx] = [tpPrev.x, tpPrev.y, tpPrev.z];\r\n    ++idx;\r\n\r\n    centerPoints[idx] = [cp.x, cp.y, cp.z];\r\n    topPoints[idx] = [tp.x, tp.y, tp.z];\r\n    ++idx;\r\n\r\n    const cpNext = cp.clone().add(shift);\r\n    const tpNext = cpNext.clone().add(wing);\r\n    centerPoints[idx] = [cpNext.x, cpNext.y, cpNext.z];\r\n    topPoints[idx] = [tpNext.x, tpNext.y, tpNext.z];\r\n    ++idx;\r\n    centerPoints[idx] = [cpNext.x, cpNext.y, cpNext.z];\r\n    topPoints[idx] = [tpNext.x, tpNext.y, tpNext.z];\r\n  }\r\n}\r\n\r\nfunction _calcPoints(residues, firstIdx, lastIdx, boundaries) {\r\n  const left = boundaries.start;\r\n  const right = boundaries.end;\r\n  function _prevIdx(idx) {\r\n    return idx > left && residues[idx - 1]._isValid ? idx - 1 : idx;\r\n  }\r\n  function _nextIdx(idx) {\r\n    return idx < right && residues[idx + 1]._isValid ? idx + 1 : idx;\r\n  }\r\n\r\n  const topPoints = [];\r\n  const centerPoints = [];\r\n  let arrIdx = 0;\r\n  function _extrapolate2(currIdx, otherIdx) {\r\n    const cp = residues[currIdx]._controlPoint.clone().lerp(residues[otherIdx]._controlPoint, -0.25);\r\n    const tp = cp.clone().add(residues[currIdx]._wingVector);\r\n    centerPoints[arrIdx] = [cp.x, cp.y, cp.z];\r\n    topPoints[arrIdx++] = [tp.x, tp.y, tp.z];\r\n    centerPoints[arrIdx] = [cp.x, cp.y, cp.z];\r\n    topPoints[arrIdx++] = [tp.x, tp.y, tp.z];\r\n  }\r\n\r\n  // a single disconnected residue\r\n  const prevIdx = _prevIdx(firstIdx);\r\n  const nextIdx = _nextIdx(lastIdx);\r\n  if (prevIdx === nextIdx) {\r\n    _addPointsForLoneResidue(centerPoints, topPoints, arrIdx, residues[firstIdx]);\r\n    return { centerPoints, topPoints };\r\n  }\r\n\r\n  // Two points (prev-prev and next-next) are added to support edge conditions for cubic splines, they are ignored\r\n  // Another two (prev and next) were added to support the outside of the sub chain\r\n\r\n  // prev and prev-prev\r\n  if (firstIdx === prevIdx) {\r\n    // do the extrapolation\r\n    _extrapolate2(firstIdx, _nextIdx(firstIdx));\r\n  } else {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[_prevIdx(prevIdx)]);\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[prevIdx]);\r\n  }\r\n\r\n  // main loop\r\n  for (let idx = firstIdx; idx <= lastIdx; ++idx) {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[idx]);\r\n  }\r\n\r\n  // next and next-next\r\n  if (nextIdx === _nextIdx(nextIdx)) {\r\n    // do the extrapolation\r\n    _extrapolate2(lastIdx, _prevIdx(lastIdx));\r\n  } else {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[nextIdx]);\r\n    _addPoints(centerPoints, topPoints, arrIdx, residues[_nextIdx(nextIdx)]);\r\n  }\r\n  return { centerPoints, topPoints };\r\n}\r\n\r\nclass CartoonHelper {\r\n  constructor(residues, startIdx, endIdx, segmentsCount, tension, boundaries) {\r\n    const pointsArrays = _calcPoints(residues, startIdx, endIdx, boundaries);\r\n    this._topInterp = _buildStructureInterpolator(pointsArrays.topPoints, tension);\r\n    this._centerInterp = _buildStructureInterpolator(pointsArrays.centerPoints, tension);\r\n\r\n    this._shift = 0.5 / (endIdx - startIdx + 2);\r\n    this._valueStep = (1.0 - 2 * this._shift) / (2 * (endIdx - startIdx + 1) * (segmentsCount - 1));\r\n    this._segmentsCount = segmentsCount;\r\n  }\r\n\r\n  prepareMatrices(idx, firstRad, secondRad) {\r\n    const mtcCount = this._segmentsCount;\r\n    const outMtc = new Array(mtcCount);\r\n    const currRad = new THREE.Vector2(0, 0);\r\n\r\n    const topInterp = this._topInterp;\r\n    const cenInterp = this._centerInterp;\r\n\r\n    let currentValue = this._shift + this._valueStep * (mtcCount - 1) * idx;\r\n\r\n    for (let mtxIdx = 0; mtxIdx < mtcCount; ++mtxIdx) {\r\n      const lerpVal = Math.min(1.0, mtxIdx / (mtcCount - 1));\r\n      currRad.lerpVectors(firstRad, secondRad, lerpVal);\r\n\r\n      const currTop = topInterp(currentValue, null);\r\n      const currCenter = cenInterp(currentValue, null);\r\n      currentValue += this._valueStep;\r\n      const nextCenter = cenInterp(currentValue, null);\r\n\r\n      outMtc[mtxIdx] = calcMatrix(currCenter.clone(), nextCenter.clone(), currTop.clone().sub(currCenter), currRad);\r\n    }\r\n\r\n    return outMtc;\r\n  }\r\n}\r\n\r\nexport default CartoonHelper;\r\n","import * as THREE from 'three';\r\nimport ResiduesGroup from './ResiduesGroup';\r\nimport CartoonHelper from './CartoonHelper';\r\n\r\nfunction _createShape(rad, parts) {\r\n  const pts = [];\r\n\r\n  for (let i = 0; i < parts; ++i) {\r\n    // starts from pi/2 because it's important that points are lied on the angles of arrows (visual issues if not)\r\n    const a = Math.PI / 2.0 - 2 * Math.PI * i / parts;\r\n\r\n    pts.push(new THREE.Vector3(Math.cos(a) * rad, Math.sin(a) * rad, 0));\r\n  }\r\n  return pts;\r\n}\r\n\r\nfunction _loopThrough(subDiv, residues, segmentsHeight, tension, mode, callback) {\r\n  for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n    const subs = subDiv[subDivI].arr;\r\n    const { boundaries } = subDiv[subDivI];\r\n    for (let i = 0, n = subs.length; i < n; ++i) {\r\n      const idc = [subs[i].start, subs[i].end];\r\n      const matrixHelper = new CartoonHelper(residues, idc[0], idc[1], segmentsHeight, tension, boundaries);\r\n      let prevLast = null;\r\n      const startIdx = subs[i].start * 2;\r\n      const endIdx = subs[i].end * 2 + 1;\r\n      let prevSecondRad = mode.getResidueRadius(residues[0], 0);\r\n      for (let idx = startIdx; idx <= endIdx; ++idx) {\r\n        const resIdx = (idx / 2 | 0);\r\n        const currRes = residues[resIdx];\r\n        const firstRad = mode.getResidueRadius(currRes, idx % 2);\r\n        const secondRad = mode.getResidueRadius(currRes, 1 + (idx % 2));\r\n\r\n        const mtc = matrixHelper.prepareMatrices(idx - idc[0] * 2, firstRad, secondRad);\r\n        mtc.unshift(prevLast === null ? mtc[0] : prevLast);\r\n\r\n        // Slope - radius is changed along this residue part\r\n        const hasSlope = (firstRad.x !== secondRad.x) || (firstRad.y !== secondRad.y);\r\n        // Cut - end radius of previous part not equal to start radius of this part. First section of this part lies in the orthogonal plane\r\n        const hasCut = (firstRad.x !== prevSecondRad.x) || (firstRad.y !== prevSecondRad.y);\r\n\r\n        callback(currRes, mtc, hasSlope, hasCut);\r\n\r\n        prevLast = mtc[segmentsHeight];\r\n        prevSecondRad = secondRad;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass ResiduesSubseqGroup extends ResiduesGroup {\r\n  _makeGeoArgs() {\r\n    const cmpMultiplier = this._mode.getHeightSegmentsRatio();\r\n    this._segmentsHeight = this._polyComplexity * cmpMultiplier | 0;\r\n    return [_createShape(1.0, this._polyComplexity), this._segmentsHeight + 1, this._selection.chunks.length * 2];\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const tension = mode.getTension();\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const chunkIdc = [];\r\n    _loopThrough(this._selection.subdivs, residues, this._segmentsHeight, tension, mode, (currRes, mtc, hasSlope = false, hasCut = false) => {\r\n      const color = colorer.getResidueColor(currRes, parent);\r\n      chunkIdc[chunkIdx] = currRes._index;\r\n      geo.setItem(chunkIdx, mtc, hasSlope, hasCut);\r\n      geo.setColor(chunkIdx++, color);\r\n    });\r\n    this._chunksIdc = chunkIdc;\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const { parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const tension = mode.getTension();\r\n    const geo = this._geo;\r\n    const frameRes = frameData.getResidues();\r\n    let chunkIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    _loopThrough(this._selection.subdivs, frameRes, this._segmentsHeight, tension, mode, (currRes, mtc) => {\r\n      geo.setItem(chunkIdx, mtc);\r\n      if (updateColor) {\r\n        geo.setColor(chunkIdx, colorer.getResidueColor(currRes, parent));\r\n      }\r\n      chunkIdx++;\r\n    });\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default ResiduesSubseqGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass ResiduesTraceGroup extends ChemGroup {\r\n  _makeGeoArgs() {\r\n    const subDiv = this._selection.subdivs;\r\n    let chunksCount = 0;\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        chunksCount += subs[i].end - subs[i].start;\r\n      }\r\n    }\r\n    return [chunksCount, this._polyComplexity];\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const chunkIdc = [];\r\n    const subDiv = this._selection.subdivs;\r\n    const stickRad = mode.calcStickRadius();\r\n\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        const startIdx = subs[i].start;\r\n        const endIdx = subs[i].end;\r\n        let prevRes = residues[startIdx];\r\n        for (let idx = startIdx + 1; idx <= endIdx; ++idx) {\r\n          const currRes = residues[idx];\r\n          chunkIdc[chunkIdx] = { first: prevRes._index, second: currRes._index };\r\n          geo.setItem(chunkIdx, prevRes._controlPoint, currRes._controlPoint, stickRad);\r\n          geo.setColor(chunkIdx, colorer.getResidueColor(prevRes, parent), colorer.getResidueColor(currRes, parent));\r\n          chunkIdx++;\r\n          prevRes = currRes;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._chunksIdc = chunkIdc;\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n\r\n    const residues = frameData.getResidues();\r\n    const { parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const subDiv = this._selection.subdivs;\r\n    const stickRad = mode.calcStickRadius();\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        const startIdx = subs[i].start;\r\n        const endIdx = subs[i].end;\r\n        let prevRes = residues[startIdx];\r\n        for (let idx = startIdx + 1; idx <= endIdx; ++idx) {\r\n          const currRes = residues[idx];\r\n          geo.setItem(chunkIdx, prevRes._controlPoint, currRes._controlPoint, stickRad);\r\n          if (updateColor) {\r\n            geo.setColor(chunkIdx, colorer.getResidueColor(prevRes, parent), colorer.getResidueColor(currRes, parent));\r\n          }\r\n          chunkIdx++;\r\n          prevRes = currRes;\r\n        }\r\n      }\r\n    }\r\n\r\n    geo.finalize();\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const inters = [];\r\n    const { residues } = this._selection;\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksToIdx = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const { chunkIdx } = inters[i];\r\n      const chunk = chunksToIdx[Math.floor(chunkIdx / 2)];\r\n      const resIdx = chunkIdx % 2 === 0 ? chunk.first : chunk.second;\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const chunksToIdx = this._chunksIdc;\r\n    const { residues } = this._selection;\r\n    for (let i = 0, n = chunksToIdx.length; i < n; ++i) {\r\n      const chunk = chunksToIdx[i];\r\n      if (residues[chunk.first]._mask & mask) {\r\n        chunksList.push(i * 2);\r\n      }\r\n      if (residues[chunk.second]._mask & mask) {\r\n        chunksList.push(i * 2 + 1);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default ResiduesTraceGroup;\r\n","import ChemGroup from './ChemGroup';\r\nimport Bond from '../../../chem/Bond';\r\n\r\nfunction getCylinderCount(bondOrder) {\r\n  return bondOrder < 2 ? 1 : bondOrder;\r\n}\r\n\r\nclass BondsGroup extends ChemGroup {\r\n  _makeGeoArgs() {\r\n    const drawMultiple = this._mode.drawMultiorderBonds();\r\n    const showAromatic = this._mode.showAromaticLoops();\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    let bondsCount = 0;\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      bondsCount += this.getBondOrder(bonds[bondsIdc[i]], drawMultiple, showAromatic);\r\n    }\r\n    return [bondsCount, this._polyComplexity];\r\n  }\r\n\r\n  getBondOrder(bond, drawMultiple, showAromatic) {\r\n    let bondOrder = 1;\r\n    if (drawMultiple && (!showAromatic || bond._type !== Bond.BondType.AROMATIC)) {\r\n      bondOrder = getCylinderCount(bond._order);\r\n    }\r\n    return bondOrder;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const { bonds } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const bondsIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const { chunkIdx } = inters[i];\r\n      const bondIdx = bondsIdc[Math.floor(chunkIdx / 2)];\r\n      if (bondIdx < bonds.length) {\r\n        const bond = bonds[bondIdx];\r\n        inters[i].atom = chunkIdx % 2 === 0 ? bond._left : bond._right;\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask, innerOnly) {\r\n    const chunksList = [];\r\n    const { bonds } = this._selection;\r\n    const chunksToIdx = this._chunksIdc;\r\n    for (let i = 0, n = chunksToIdx.length; i < n; ++i) {\r\n      const bond = bonds[chunksToIdx[i]];\r\n      if ((bond._left.mask & mask) && (!innerOnly || (bond._right.mask & mask))) {\r\n        chunksList.push(2 * i);\r\n      }\r\n      if ((bond._right.mask & mask) && (!innerOnly || (bond._left.mask & mask))) {\r\n        chunksList.push(2 * i + 1);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default BondsGroup;\r\n","import * as THREE from 'three';\r\nimport BondsGroup from './BondsGroup';\r\n\r\nclass BondsCylinderGroup extends BondsGroup {\r\n  _build() {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const stickRad = mode.calcStickRadius();\r\n    const emptyOffset = mode.calcSpaceFraction();\r\n    let normDir;\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const chunksToIdx = [];\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = atom1.position;\r\n      const a2Pos = atom2.position;\r\n      normDir = bond.calcNormalDir();\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n      const minRad = Math.min(mode.calcAtomRadius(atom1), mode.calcAtomRadius(atom2));\r\n      const dist = 2 * minRad / order;\r\n      const currStickRad = drawMultiple ? Math.min(stickRad, dist * 0.5 * (1.0 - emptyOffset)) : stickRad;\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        const scale = dist * (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        chunksToIdx[currBondIdx] = bond._index;\r\n        leftPos.copy(a1Pos);\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.copy(a2Pos);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos, currStickRad);\r\n        geo.setColor(currBondIdx++, colorer.getAtomColor(atom1, parent), colorer.getAtomColor(atom2, parent));\r\n      }\r\n    }\r\n\r\n    geo.finalize();\r\n    this._chunksIdc = chunksToIdx;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const stickRad = mode.calcStickRadius();\r\n    const emptyOffset = mode.calcSpaceFraction();\r\n    let normDir;\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = frameData.getAtomPos(atom1.index).clone();\r\n      const a2Pos = frameData.getAtomPos(atom2.index);\r\n      normDir = bond.calcNormalDir();\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n      const minRad = Math.min(mode.calcAtomRadius(atom1), mode.calcAtomRadius(atom2));\r\n      const dist = 2 * minRad / order;\r\n      const currStickRad = drawMultiple ? Math.min(stickRad, dist * 0.5 * (1.0 - emptyOffset)) : stickRad;\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        const scale = dist * (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        leftPos.copy(a1Pos);\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.copy(a2Pos);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos, currStickRad);\r\n        if (updateColor) {\r\n          geo.setColor(currBondIdx, frameData.getAtomColor(colorer, atom1), frameData.getAtomColor(colorer, atom2));\r\n        }\r\n        currBondIdx++;\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default BondsCylinderGroup;\r\n","import * as THREE from 'three';\r\nimport BondsGroup from './BondsGroup';\r\n\r\nconst STEP_SIZE = 0.15;\r\n\r\nclass BondsLinesGroup extends BondsGroup {\r\n  _build() {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const bondDir = new THREE.Vector3();\r\n\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const chunksToIdx = [];\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = atom1.position;\r\n      const a2Pos = atom2.position;\r\n      const a1Hangs = atom1.bonds.length === 1;\r\n      const a2Hangs = atom2.bonds.length === 1;\r\n      bondDir.subVectors(a2Pos, a1Pos);\r\n      const len = bondDir.length();\r\n      const normDir = bond.calcNormalDir();\r\n\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        leftPos.copy(a1Pos);\r\n        rightPos.copy(a2Pos);\r\n        let scale = (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        chunksToIdx[currBondIdx] = bond._index;\r\n        if (order === 2 && (!a1Hangs && !a2Hangs)) {\r\n          scale -= 0.5;\r\n          scale *= -1;\r\n        }\r\n\r\n        if (!a1Hangs && !a2Hangs && order > 1 && scale !== 0) {\r\n          leftPos.lerpVectors(a1Pos, a2Pos, STEP_SIZE / (len));\r\n          rightPos.lerpVectors(a1Pos, a2Pos, 1.0 - STEP_SIZE / (len));\r\n        }\r\n\r\n        scale *= STEP_SIZE;\r\n\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos);\r\n        geo.setColor(currBondIdx++, colorer.getAtomColor(atom1, parent), colorer.getAtomColor(atom2, parent));\r\n      }\r\n    }\r\n    geo.finalize();\r\n    this._chunksIdc = chunksToIdx;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const bondDir = new THREE.Vector3();\r\n\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = frameData.getAtomPos(atom1.index).clone();\r\n      const a2Pos = frameData.getAtomPos(atom2.index);\r\n      const a1Hangs = atom1.bonds.length === 1;\r\n      const a2Hangs = atom2.bonds.length === 1;\r\n      bondDir.subVectors(a2Pos, a1Pos);\r\n      const len = bondDir.length();\r\n      const normDir = bond.calcNormalDir();\r\n\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        leftPos.copy(a1Pos);\r\n        rightPos.copy(a2Pos);\r\n        let scale = (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        if (order === 2 && (!a1Hangs && !a2Hangs)) {\r\n          scale -= 0.5;\r\n          scale *= -1;\r\n        }\r\n\r\n        if (!a1Hangs && !a2Hangs && order > 1 && scale !== 0) {\r\n          leftPos.lerpVectors(a1Pos, a2Pos, STEP_SIZE / (len));\r\n          rightPos.lerpVectors(a1Pos, a2Pos, 1.0 - STEP_SIZE / (len));\r\n        }\r\n\r\n        scale *= STEP_SIZE;\r\n\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos);\r\n        if (updateColor) {\r\n          geo.setColor(currBondIdx, frameData.getAtomColor(colorer, atom1), frameData.getAtomColor(colorer, atom2));\r\n        }\r\n        currBondIdx++;\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default BondsLinesGroup;\r\n","import AtomsSphereGroup from './AtomsSphereGroup';\r\nimport AtomsSurfaceGroup from './AtomsSurfaceGroup';\r\nimport AtomsSASSESGroupStub from './AtomsSASSESGroupStub';\r\nimport AtomsTextGroup from './AtomsTextGroup';\r\nimport AromaticTorusGroup from './AromaticTorusGroup';\r\nimport AromaticLinesGroup from './AromaticLinesGroup';\r\nimport NucleicCylindersGroup from './NucleicCylindersGroup';\r\nimport NucleicSpheresGroup from './NucleicSpheresGroup';\r\nimport ResiduesSubseqGroup from './ResiduesSubseqGroup';\r\nimport ResiduesTraceGroup from './ResiduesTraceGroup';\r\nimport BondsCylinderGroup from './BondsCylinderGroup';\r\nimport BondsLinesGroup from './BondsLinesGroup';\r\n\r\nexport default {\r\n  AtomsSphereGroup,\r\n  AtomsSurfaceGroup,\r\n  AtomsSASSESGroupStub,\r\n  AtomsTextGroup,\r\n  AromaticTorusGroup,\r\n  AromaticLinesGroup,\r\n  NucleicCylindersGroup,\r\n  NucleicSpheresGroup,\r\n  ResiduesSubseqGroup,\r\n  ResiduesTraceGroup,\r\n  BondsCylinderGroup,\r\n  BondsLinesGroup,\r\n};\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass AtomsProcessor extends RCGroup {\r\n  constructor(AtomsGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    this._mode = mode;\r\n    const atoms = complex.getAtoms();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const atomsIdc = [];\r\n      let atomCount = 0;\r\n      component.forEachAtom((atom) => {\r\n        if (!self._checkAtom(atom, mask)) {\r\n          return;\r\n        }\r\n        atomsIdc[atomCount++] = atom.index;\r\n      });\r\n      if (atomCount === 0) {\r\n        return;\r\n      }\r\n      const atomsGroup = new AtomsGroup(geoParams, {\r\n        atoms,\r\n        chunks: atomsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      atomsGroup._component = component;\r\n      self.add(atomsGroup);\r\n    });\r\n  }\r\n\r\n  _checkAtom(atom, mask) {\r\n    return atom.mask & mask;\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default AtomsProcessor;\r\n","import AtomsProcessor from './AtomsProcessor';\r\n\r\nclass OrphanAtomsProcessor extends AtomsProcessor {\r\n  _checkAtom(atom, mask) {\r\n    if (!(atom.mask & mask)) {\r\n      return false;\r\n    }\r\n\r\n    const { bonds } = atom;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      if ((bonds[i]._left.mask & mask) && (bonds[i]._right.mask & mask)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default OrphanAtomsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass ResiduesProcessor extends RCGroup {\r\n  constructor(ResidueGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const residues = complex.getResidues();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      let chunksCount = 0;\r\n      const resIdc = [];\r\n      component.forEachResidue((residue) => {\r\n        if (self._checkResidue(residue, mask)) {\r\n          resIdc[chunksCount++] = residue._index;\r\n        }\r\n      });\r\n\r\n      if (chunksCount === 0) {\r\n        return;\r\n      }\r\n      const residuesGroup = new ResidueGroup(geoParams, {\r\n        residues,\r\n        chunks: resIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      residuesGroup._component = component;\r\n      self.add(residuesGroup);\r\n    });\r\n  }\r\n\r\n  checkResidue(residue, mask) {\r\n    return residue._mask & mask;\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default ResiduesProcessor;\r\n","import ResidueProcessor from './ResiduesProcessor';\r\n\r\nclass NucleicProcessor extends ResidueProcessor {\r\n  _checkResidue(residue, mask) {\r\n    return mask & residue._mask && residue._cylinders !== null;\r\n  }\r\n}\r\nexport default NucleicProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass SubseqsProcessor extends RCGroup {\r\n  constructor(ResidueGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const residues = complex.getResidues();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const subDivs = component.getMaskedSubdivSequences(mask);\r\n\r\n      let chunksCount = 0;\r\n      const resIdc = [];\r\n      for (let subDivI = 0, subDivN = subDivs.length; subDivI < subDivN; ++subDivI) {\r\n        const subs = subDivs[subDivI].arr;\r\n        for (let i = 0, n = subs.length; i < n; ++i) {\r\n          for (let j = subs[i].start, jEnd = subs[i].end; j <= jEnd; ++j) {\r\n            resIdc[chunksCount++] = residues[j]._index;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (chunksCount === 0) {\r\n        return;\r\n      }\r\n      const residuesGroup = new ResidueGroup(geoParams, {\r\n        residues,\r\n        chunks: resIdc,\r\n        subdivs: subDivs,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      residuesGroup._component = component;\r\n      self.add(residuesGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default SubseqsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass BondsProcessor extends RCGroup {\r\n  constructor(BondsGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const bonds = complex.getBonds();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const bondsIdc = [];\r\n      let bondsCount = 0;\r\n      component.forEachBond((bond) => {\r\n        const atom1 = bond._left;\r\n        const atom2 = bond._right;\r\n        if (!(atom1.mask & mask) || !(atom2.mask & mask)) {\r\n          return;\r\n        }\r\n        bondsIdc[bondsCount++] = bond._index;\r\n      });\r\n      if (bondsCount === 0) {\r\n        return;\r\n      }\r\n      const bondsGroup = new BondsGroup(geoParams, {\r\n        bonds,\r\n        chunks: bondsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      bondsGroup._component = component;\r\n      self.add(bondsGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default BondsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass AromaticProcessor extends RCGroup {\r\n  constructor(AromaticGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const atoms = complex.getAtoms();\r\n    const transforms = complex.getTransforms();\r\n    if (!mode.showAromaticLoops()) {\r\n      return;\r\n    }\r\n\r\n    complex.forEachComponent((component) => {\r\n      const atomsIdc = [];\r\n      let chunksCount = 0;\r\n      const cycles = [];\r\n      let cycleIdx = 0;\r\n      component.forEachCycle((cycle) => {\r\n        const cycAtoms = cycle.atoms;\r\n        let perCycle = 0;\r\n        for (let i = 0, n = cycAtoms.length; i < n; ++i) {\r\n          if ((cycAtoms[i].mask & mask) !== 0) {\r\n            ++perCycle;\r\n            atomsIdc[chunksCount++] = cycAtoms[i].index;\r\n          }\r\n        }\r\n        if (perCycle > 0) {\r\n          cycles[cycleIdx++] = cycle;\r\n        }\r\n      });\r\n\r\n      const atomsGroup = new AromaticGroup(geoParams, {\r\n        cycles,\r\n        atoms,\r\n        chunks: atomsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      atomsGroup._component = component;\r\n      self.add(atomsGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default AromaticProcessor;\r\n","import AtomsProcessor from './AtomsProcessor';\r\nimport OrphanAtomsProcessor from './OrphanAtomsProcessor';\r\nimport ResiduesProcessor from './ResiduesProcessor';\r\nimport NucleicProcessor from './NucleicProcessor';\r\nimport SubseqsProcessor from './SubseqsProcessor';\r\nimport BondsProcessor from './BondsProcessor';\r\nimport AromaticProcessor from './AromaticProcessor';\r\n\r\nexport default {\r\n  Atoms: AtomsProcessor,\r\n  OrphanAtoms: OrphanAtomsProcessor,\r\n  Residues: ResiduesProcessor,\r\n  Nucleic: NucleicProcessor,\r\n  Subseqs: SubseqsProcessor,\r\n  Bonds: BondsProcessor,\r\n  Aromatic: AromaticProcessor,\r\n};\r\n","import MeshCreator from '../../meshes/MeshCreator';\r\nimport groups from './groups';\r\nimport processors from '../processors/processors';\r\n\r\nfunction _bakeGroup(triplet, Processor, Group) {\r\n  return function (complex, colorer, mode, polyComplexity, mask, material) {\r\n    return new Processor(Group, triplet, complex, colorer, mode, polyComplexity, mask, material);\r\n  };\r\n}\r\n\r\nclass GroupsFactory {\r\n  static AtomsSpheres(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createSpheres(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSphereGroup);\r\n  }\r\n\r\n  static OrphanedAtomsCrosses(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createCrosses(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.OrphanAtoms, groups.AtomsSphereGroup);\r\n  }\r\n\r\n  static BondsCylinders(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Bonds, groups.BondsCylinderGroup);\r\n  }\r\n\r\n  static BondsLines(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.create2CLines(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Bonds, groups.BondsLinesGroup);\r\n  }\r\n\r\n  static CartoonChains(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createExtrudedChains(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Subseqs, groups.ResiduesSubseqGroup);\r\n  }\r\n\r\n  static TraceChains(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CClosedCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Subseqs, groups.ResiduesTraceGroup);\r\n  }\r\n\r\n  static NucleicSpheres(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createSpheres(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Nucleic, groups.NucleicSpheresGroup);\r\n  }\r\n\r\n  static NucleicCylinders(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Nucleic, groups.NucleicCylindersGroup);\r\n  }\r\n\r\n  static ALoopsTorus(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createExtrudedChains(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Aromatic, groups.AromaticTorusGroup);\r\n  }\r\n\r\n  static ALoopsLines(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createChunkedLines(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Aromatic, groups.AromaticLinesGroup);\r\n  }\r\n\r\n  static QuickSurfGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createQuickSurface(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSurfaceGroup);\r\n  }\r\n\r\n  static ContactSurfaceGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createContactSurface(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSurfaceGroup);\r\n  }\r\n\r\n  static SASSESSurfaceGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createSASSES(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSASSESGroupStub);\r\n  }\r\n\r\n  static TextLabelsGeo(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createLabels(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsTextGroup);\r\n  }\r\n}\r\n\r\nexport default GroupsFactory;\r\n","import _ from 'lodash';\r\nimport makeContextDependent from '../../utils/makeContextDependent';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport factory from './groups/GroupsFactory';\r\n\r\n/**\r\n * Create new mode.\r\n *\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the mode after its creation.\r\n *\r\n * @exports Mode\r\n * @this Mode\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all available modes used for building and displaying molecule geometry.\r\n */\r\nclass Mode {\r\n  constructor(opts) {\r\n    if (this.constructor === Mode) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Mode options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.opts = _.merge(utils.deriveDeep(this.settings.now.modes[this.id], true), opts);\r\n  }\r\n\r\n\r\n  /**\r\n   * Get mode identification, probably with options.\r\n   * @returns {string|Array} Mode identifier string ({@link Mode#id}) or two-element array containing both mode\r\n   *   identifier and options ({@link Mode#opts}).\r\n   * Options are returned if they were changed during or after the mode creation.\r\n   */\r\n  identify() {\r\n    const diff = utils.objectsDiff(this.opts, this.settings.now.modes[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      return [this.id, diff];\r\n    }\r\n    return this.id;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const polyComplexity = this.opts.polyComplexity ? this.opts.polyComplexity[this.settings.now.resolution] : 0;\r\n    const groupList = this.depGroups;\r\n    const groupCount = groupList.length;\r\n    const group = new gfxutils.RCGroup();\r\n    const self = this;\r\n    for (let i = 0; i < groupCount; ++i) {\r\n      let currGroup = groupList[i];\r\n      let renderParams = {};\r\n      if (_.isArray(currGroup)) {\r\n        renderParams = currGroup[1].call(this);\r\n        [currGroup] = currGroup;\r\n      }\r\n      const Group = factory[currGroup](null, this.settings, renderParams);\r\n      const newGroup = new Group(complex, colorer, self, polyComplexity, mask, material);\r\n      if (newGroup.children.length > 0) {\r\n        group.add(newGroup);\r\n      }\r\n    }\r\n    return group;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Mode.prototype);\r\n\r\n/**\r\n* Mode identifier.\r\n* @type {string}\r\n*/\r\nMode.prototype.id = '__';\r\n\r\n/**\r\n * Mode geo groups.\r\n * @type {Array}\r\n */\r\nMode.prototype.depGroups = [];\r\n\r\nexport default Mode;\r\n","import Mode from './Mode';\r\n\r\nfunction getRenderParams() {\r\n  return {\r\n    lineWidth: this.opts.lineWidth,\r\n  };\r\n}\r\n\r\nclass LinesMode extends Mode {\r\n  static id = 'LN';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    this.depGroups = this.depGroups.slice(0); // clone depGroups to prevent prototype edits\r\n    const groups = this.depGroups;\r\n    for (let i = 0, n = groups.length; i < n; ++i) {\r\n      groups[i] = [groups[i], getRenderParams];\r\n    }\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n\r\n  calcAtomRadius() {\r\n    return this.opts.atom;\r\n  }\r\n\r\n  getAromaticOffset() {\r\n    return this.opts.offsarom;\r\n  }\r\n\r\n  getAromaticArcChunks() {\r\n    return this.opts.chunkarom;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n}\r\n\r\nLinesMode.prototype.id = 'LN';\r\nLinesMode.prototype.name = 'Lines';\r\nLinesMode.prototype.shortName = 'Lines';\r\nLinesMode.prototype.depGroups = [\r\n  'ALoopsLines',\r\n  'BondsLines',\r\n  'OrphanedAtomsCrosses',\r\n];\r\n\r\nexport default LinesMode;\r\n","/* eslint-disable no-magic-numbers */\r\nimport Mode from './Mode';\r\n\r\nclass LicoriceMode extends Mode {\r\n  static id = 'LC';\r\n\r\n  calcAtomRadius(_atom) {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  calcStickRadius() {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  calcSpaceFraction() {\r\n    return this.opts.space;\r\n  }\r\n\r\n  getAromRadius() {\r\n    return this.opts.aromrad;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n}\r\n\r\nLicoriceMode.prototype.id = 'LC';\r\nLicoriceMode.prototype.name = 'Licorice';\r\nLicoriceMode.prototype.shortName = 'Licorice';\r\nLicoriceMode.prototype.depGroups = [\r\n  'AtomsSpheres',\r\n  'BondsCylinders',\r\n  'ALoopsTorus',\r\n];\r\n\r\nexport default LicoriceMode;\r\n","/* eslint-disable no-magic-numbers */\r\nimport Mode from './Mode';\r\n\r\nclass BallsAndSticksMode extends Mode {\r\n  static id = 'BS';\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius * this.opts.atom;\r\n  }\r\n\r\n  calcStickRadius() {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  getAromRadius() {\r\n    return this.opts.aromrad;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n\r\n  calcSpaceFraction() {\r\n    return this.opts.space;\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n}\r\n\r\nBallsAndSticksMode.prototype.id = 'BS';\r\nBallsAndSticksMode.prototype.name = 'Balls and Sticks';\r\nBallsAndSticksMode.prototype.shortName = 'Balls';\r\nBallsAndSticksMode.prototype.depGroups = [\r\n  'AtomsSpheres',\r\n  'BondsCylinders',\r\n  'ALoopsTorus',\r\n];\r\n\r\nexport default BallsAndSticksMode;\r\n","import Mode from './Mode';\r\n\r\nclass VanDerWaalsMode extends Mode {\r\n  static id = 'VW';\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n}\r\n\r\nVanDerWaalsMode.prototype.id = 'VW';\r\nVanDerWaalsMode.prototype.name = 'Van der Waals';\r\nVanDerWaalsMode.prototype.shortName = 'VDW';\r\nVanDerWaalsMode.prototype.depGroups = ['AtomsSpheres'];\r\n\r\nexport default VanDerWaalsMode;\r\n","import Mode from './Mode';\r\n\r\nclass TraceMode extends Mode {\r\n  static id = 'TR';\r\n\r\n  calcStickRadius() {\r\n    return this.opts.radius;\r\n  }\r\n}\r\n\r\nTraceMode.prototype.id = 'TR';\r\nTraceMode.prototype.name = 'Trace';\r\nTraceMode.prototype.shortName = 'Trace';\r\nTraceMode.prototype.depGroups = ['TraceChains'];\r\n\r\nexport default TraceMode;\r\n","import * as THREE from 'three';\r\nimport Mode from './Mode';\r\n\r\nclass TubeMode extends Mode {\r\n  static id = 'TU';\r\n\r\n  getResidueRadius(_residue) {\r\n    return this.TUBE_RADIUS;\r\n  }\r\n\r\n  getHeightSegmentsRatio() {\r\n    return this.opts.heightSegmentsRatio;\r\n  }\r\n\r\n  getTension() {\r\n    return this.opts.tension;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const rad = this.opts.radius;\r\n    this.TUBE_RADIUS = new THREE.Vector2(rad, rad);\r\n\r\n    return Mode.prototype.buildGeometry.call(this, complex, colorer, mask, material);\r\n  }\r\n}\r\n\r\nTubeMode.prototype.id = 'TU';\r\nTubeMode.prototype.name = 'Tube';\r\nTubeMode.prototype.shortName = 'Tube';\r\nTubeMode.prototype.depGroups = ['CartoonChains'];\r\n\r\nexport default TubeMode;\r\n","import * as THREE from 'three';\r\nimport Mode from './Mode';\r\n\r\nclass CartoonMode extends Mode {\r\n  static id = 'CA';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    // cache for secondary structure options\r\n    this.secCache = {};\r\n  }\r\n\r\n  getResidueStartRadius(residue) {\r\n    const second = residue.getSecondary();\r\n    if (!second || !second.generic) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    const secOpts = this.secCache[second.generic];\r\n    if (!secOpts) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    if (second.term === residue) {\r\n      return secOpts.start;\r\n    }\r\n    return secOpts.center;\r\n  }\r\n\r\n  getResidueEndRadius(residue) {\r\n    const second = residue.getSecondary();\r\n    if (second === null || !second.generic) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    const secOpts = this.secCache[second.generic];\r\n    if (!secOpts) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    if (second.term === residue) {\r\n      return this.ARROW_END;\r\n    }\r\n    return secOpts.center;\r\n  }\r\n\r\n  getResidueRadius(residue, val) {\r\n    const startRad = this.getResidueStartRadius(residue);\r\n    if (val === 0) {\r\n      return startRad;\r\n    }\r\n\r\n    const endRad = this.getResidueEndRadius(residue);\r\n    if (val === 2) {\r\n      return endRad;\r\n    }\r\n\r\n    return startRad.clone().lerp(endRad, val / 2.0);\r\n  }\r\n\r\n  calcStickRadius(_res) {\r\n    return this.opts.radius;\r\n  }\r\n\r\n  getHeightSegmentsRatio() {\r\n    return this.opts.heightSegmentsRatio;\r\n  }\r\n\r\n  getTension() {\r\n    return this.opts.tension;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const tubeRad = this.opts.radius;\r\n    const secHeight = this.opts.depth;\r\n\r\n    this.TUBE_RADIUS = new THREE.Vector2(tubeRad, tubeRad);\r\n    this.ARROW_END = new THREE.Vector2(secHeight, tubeRad);\r\n    const secCache = {};\r\n    const secData = this.opts.ss;\r\n    /* eslint-disable guard-for-in */\r\n    for (const prop in secData) {\r\n      secCache[prop] = {\r\n        center: new THREE.Vector2(secHeight, secData[prop].width),\r\n        start: new THREE.Vector2(secHeight, secData[prop].arrow),\r\n      };\r\n    }\r\n    this.secCache = secCache;\r\n    /* eslint-enable guard-for-in */\r\n\r\n    return Mode.prototype.buildGeometry.call(this, complex, colorer, mask, material);\r\n  }\r\n}\r\n\r\nCartoonMode.prototype.id = 'CA';\r\nCartoonMode.prototype.name = 'Cartoon';\r\nCartoonMode.prototype.shortName = 'Cartoon';\r\nCartoonMode.prototype.depGroups = [\r\n  'CartoonChains',\r\n  'NucleicSpheres',\r\n  'NucleicCylinders',\r\n];\r\n\r\nexport default CartoonMode;\r\n","import chem from '../../chem';\r\nimport Mode from './Mode';\r\n\r\nconst { selectors } = chem;\r\n\r\nfunction getRenderParams() {\r\n  return {\r\n    wireframe: this.opts.wireframe,\r\n    zClip: this.opts.zClip,\r\n  };\r\n}\r\n\r\nclass SurfaceMode extends Mode {\r\n  constructor(opts) {\r\n    super(opts);\r\n    this.depGroups = this.depGroups.slice(0); // clone depGroups to prevent prototype edits\r\n    const surfaces = this.surfaceNames;\r\n    const groups = this.depGroups;\r\n    for (let i = 0, n = surfaces.length; i < n; ++i) {\r\n      groups[groups.length] = [surfaces[i], getRenderParams];\r\n    }\r\n  }\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n\r\n  getVisibilitySelector() {\r\n    let visibilitySelector = null;\r\n    if (this.opts.subset !== '') {\r\n      const res = selectors.parse(this.opts.subset);\r\n      if (!res.error) {\r\n        visibilitySelector = res.selector;\r\n      }\r\n    }\r\n    return visibilitySelector;\r\n  }\r\n}\r\n\r\nSurfaceMode.prototype.isSurface = true;\r\nSurfaceMode.prototype.surfaceNames = [];\r\n\r\nexport default SurfaceMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass QuickSurfaceMode extends SurfaceMode {\r\n  static id = 'QS';\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      useBeads: false,\r\n      isoValue: this.opts.isoValue,\r\n      gaussLim: this.opts.gaussLim[this.settings.now.resolution],\r\n      radScale: this.opts.scale,\r\n      gridSpacing: this.opts.gridSpacing[this.settings.now.resolution],\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n    };\r\n  }\r\n}\r\n\r\nQuickSurfaceMode.prototype.id = 'QS';\r\nQuickSurfaceMode.prototype.name = 'Quick Surface';\r\nQuickSurfaceMode.prototype.shortName = 'Quick Surf';\r\nQuickSurfaceMode.prototype.surfaceNames = ['QuickSurfGeo'];\r\n\r\nexport default QuickSurfaceMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass IsoSurfaceMode extends SurfaceMode {\r\n  constructor(excludeProbe, opts) {\r\n    super(opts);\r\n    this._excludeProbe = excludeProbe;\r\n  }\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      gridSpacing: this.opts.polyComplexity[this.settings.now.resolution],\r\n      radScale: this._radScale,\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n      probeRadius: this.opts.probeRadius,\r\n      excludeProbe: this._excludeProbe,\r\n    };\r\n  }\r\n}\r\n\r\nIsoSurfaceMode.prototype.id = 'SU';\r\nIsoSurfaceMode.prototype.name = 'Surface';\r\nIsoSurfaceMode.prototype.shortName = 'Surface';\r\nIsoSurfaceMode.prototype.surfaceNames = ['SASSESSurfaceGeo'];\r\n\r\nIsoSurfaceMode.prototype._radScale = 1;\r\nIsoSurfaceMode.prototype._excludeProbe = false;\r\n\r\nexport default IsoSurfaceMode;\r\n","import IsoSurfaceMode from './IsoSurfaceMode';\r\n\r\nclass IsoSurfaceSASMode extends IsoSurfaceMode {\r\n  static id = 'SA';\r\n\r\n  constructor(opts) {\r\n    super(false, opts);\r\n  }\r\n}\r\n\r\nIsoSurfaceSASMode.prototype.id = 'SA';\r\nIsoSurfaceSASMode.prototype.name = 'Solvent Accessible Surface';\r\nIsoSurfaceSASMode.prototype.shortName = 'SAS';\r\n\r\nexport default IsoSurfaceSASMode;\r\n","import IsoSurfaceMode from './IsoSurfaceMode';\r\n\r\nclass IsoSurfaceSESMode extends IsoSurfaceMode {\r\n  static id = 'SE';\r\n\r\n  constructor(opts) {\r\n    super(true, opts);\r\n  }\r\n}\r\n\r\nIsoSurfaceSESMode.prototype.id = 'SE';\r\nIsoSurfaceSESMode.prototype.name = 'Solvent Excluded Surface';\r\nIsoSurfaceSESMode.prototype.shortName = 'SES';\r\n\r\nexport default IsoSurfaceSESMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass ContactSurfaceMode extends SurfaceMode {\r\n  static id = 'CS';\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      probeRadius: this.opts.probeRadius,\r\n      radScale: this.opts.polyComplexity[this.settings.now.resolution],\r\n      scaleFactor: this.opts.polyComplexity[this.settings.now.resolution],\r\n      gridSpacing: 1.0 / this.opts.polyComplexity[this.settings.now.resolution],\r\n      isoValue: this.opts.isoValue,\r\n      probePositions: this.opts.probePositions,\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n    };\r\n  }\r\n}\r\n\r\nContactSurfaceMode.prototype.id = 'CS';\r\nContactSurfaceMode.prototype.name = 'Contact Surface';\r\nContactSurfaceMode.prototype.shortName = 'Contact Surf';\r\nContactSurfaceMode.prototype.isSurface = true;\r\nContactSurfaceMode.prototype.surfaceNames = ['ContactSurfaceGeo'];\r\n\r\nexport default ContactSurfaceMode;\r\n","import _ from 'lodash';\r\nimport Mode from './Mode';\r\n\r\nclass TextMode extends Mode {\r\n  static id = 'TX';\r\n\r\n  getTemplateOptions() {\r\n    return this.opts.template;\r\n  }\r\n\r\n  getLabelOpts() {\r\n    return _.merge(this.opts, {\r\n      colors: true,\r\n      adjustColor: true,\r\n      transparent: true,\r\n    });\r\n  }\r\n}\r\n\r\nTextMode.prototype.id = 'TX';\r\nTextMode.prototype.name = 'Text mode';\r\nTextMode.prototype.shortName = 'Text';\r\nTextMode.prototype.depGroups = ['TextLabelsGeo'];\r\n\r\nexport default TextMode;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport LinesMode from './modes/LinesMode';\r\nimport LicoriceMode from './modes/LicoriceMode';\r\nimport BallsAndSticksMode from './modes/BallsAndSticksMode';\r\nimport VanDerWaalsMode from './modes/VanDerWaalsMode';\r\nimport TraceMode from './modes/TraceMode';\r\nimport TubeMode from './modes/TubeMode';\r\nimport CartoonMode from './modes/CartoonMode';\r\nimport QuickSurfaceMode from './modes/QuickSurfaceMode';\r\nimport IsoSurfaceSASMode from './modes/IsoSurfaceSASMode';\r\nimport IsoSurfaceSESMode from './modes/IsoSurfaceSESMode';\r\nimport ContactSurfaceMode from './modes/ContactSurfaceMode';\r\nimport TextMode from './modes/TextMode';\r\n\r\nconst modes = new EntityList([\r\n  LinesMode,\r\n  LicoriceMode,\r\n  BallsAndSticksMode,\r\n  VanDerWaalsMode,\r\n  TraceMode,\r\n  TubeMode,\r\n  CartoonMode,\r\n  QuickSurfaceMode,\r\n  IsoSurfaceSASMode,\r\n  IsoSurfaceSESMode,\r\n  ContactSurfaceMode,\r\n  TextMode,\r\n]);\r\n\r\nexport default modes;\r\n","import _ from 'lodash';\r\n\r\nfunction clamp(x, a, b) {\r\n  return x <= b ? x < 0 ? 0 : x : b;\r\n}\r\n\r\nfunction lerpColor(c1, c2, alpha) {\r\n  const beta = 1 - alpha;\r\n  const r1 = (c1 >> 16) & 0xff;\r\n  const g1 = (c1 >> 8) & 0xff;\r\n  const b1 = c1 & 0xff;\r\n  const r2 = (c2 >> 16) & 0xff;\r\n  const g2 = (c2 >> 8) & 0xff;\r\n  const b2 = c2 & 0xff;\r\n  const r = beta * r1 + alpha * r2;\r\n  const g = beta * g1 + alpha * g2;\r\n  const b = beta * b1 + alpha * b2;\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\n\r\nclass Palette {\r\n  constructor(name, id) {\r\n    this.name = name || 'Custom';\r\n    this.id = id || 'CP';\r\n  }\r\n\r\n  getElementColor(name, asIs = false) {\r\n    const color = this.elementColors[name];\r\n    return color === undefined && !asIs ? this.defaultElementColor : color;\r\n  }\r\n\r\n  getResidueColor(name, asIs = false) {\r\n    const color = this.residueColors[name];\r\n    return color === undefined && !asIs ? this.defaultResidueColor : color;\r\n  }\r\n\r\n  getChainColor(name) {\r\n    let chain = name.charCodeAt(0);\r\n    chain = ((chain < 0 ? 0 : chain >= 256 ? chain - 256 : chain) & 0x1F)\r\n      % this.chainColors.length;\r\n    return this.chainColors[chain];\r\n  }\r\n\r\n  getSecondaryColor(type, asIs = false) {\r\n    const color = this.secondaryColors[type];\r\n    return color === undefined && !asIs ? this.defaultSecondaryColor : color;\r\n  }\r\n\r\n  getSequentialColor(index) {\r\n    const { colors } = this;\r\n    const len = colors.length;\r\n    return index < 0 ? colors[(index % len) + len] : colors[index % len];\r\n  }\r\n\r\n  getGradientColor(value, gradientName) {\r\n    const gradient = this.gradients[gradientName];\r\n    if (!gradient) {\r\n      return this.defaultNamedColor;\r\n    }\r\n    const count = gradient.length;\r\n    const index = value * (count - 1);\r\n    let left = Math.floor(index);\r\n    const right = clamp(left + 1, 0, count - 1);\r\n    left = clamp(left, 0, count - 1);\r\n    return lerpColor(gradient[left], gradient[right], index - left);\r\n  }\r\n\r\n  getNamedColor(name, asIs = false) {\r\n    const color = this.namedColors[name];\r\n    return color === undefined && !asIs ? this.defaultNamedColor : color;\r\n  }\r\n}\r\n\r\n_.assign(Palette.prototype, {\r\n  colors: [0xFFFFFF, 0xFF0000, 0x00FF00, 0x0000FF, 0x808080],\r\n\r\n  minRangeColor: 0x000000,\r\n  midRangeColor: 0x7F7F7F,\r\n  maxRangeColor: 0xFFFFFF,\r\n\r\n  defaultElementColor: 0xFFFFFF,\r\n  elementColors: {},\r\n\r\n  defaultResidueColor: 0xFFFFFF,\r\n  residueColors: {},\r\n\r\n  chainColors: [0xFFFFFF],\r\n\r\n  defaultSecondaryColor: 0xFFFFFF,\r\n  secondaryColors: {},\r\n\r\n  defaultGradientColor: 0x000000,\r\n\r\n  defaultNamedColor: 0xFFFFFF,\r\n  namedColorsArray: [\r\n    /* eslint-disable no-multi-spaces */\r\n    ['indianred',               0xcd5c5c],\r\n    ['lightcoral',              0xf08080],\r\n    ['salmon',                  0xfa8072],\r\n    ['darksalmon',              0xe9967a],\r\n    ['lightsalmon',             0xffa07a],\r\n    ['crimson',                 0xdc143c],\r\n    ['red',                     0xff0000],\r\n    ['firebrick',               0xb22222],\r\n    ['darkred',                 0x8b0000],\r\n    ['pink',                    0xffc0cb],\r\n    ['lightpink',               0xffb6c1],\r\n    ['hotpink',                 0xff69b4],\r\n    ['deeppink',                0xff1493],\r\n    ['mediumvioletred',         0xc71585],\r\n    ['palevioletred',           0xdb7093],\r\n    ['coral',                   0xff7f50],\r\n    ['tomato',                  0xff6347],\r\n    ['orangered',               0xff4500],\r\n    ['darkorange',              0xff8c00],\r\n    ['orange',                  0xffa500],\r\n    ['gold',                    0xffd700],\r\n    ['yellow',                  0xffff00],\r\n    ['lightyellow',             0xffffe0],\r\n    ['lemonchiffon',            0xfffacd],\r\n    ['lightgoldenrodyellow',    0xfafad2],\r\n    ['papayawhip',              0xffefd5],\r\n    ['moccasin',                0xffe4b5],\r\n    ['peachpuff',               0xffdab9],\r\n    ['palegoldenrod',           0xeee8aa],\r\n    ['khaki',                   0xf0e68c],\r\n    ['darkkhaki',               0xbdb76b],\r\n    ['lavender',                0xe6e6fa],\r\n    ['thistle',                 0xd8bfd8],\r\n    ['plum',                    0xdda0dd],\r\n    ['violet',                  0xee82ee],\r\n    ['orchid',                  0xda70d6],\r\n    ['fuchsia',                 0xff00ff],\r\n    ['magenta',                 0xff00ff],\r\n    ['mediumorchid',            0xba55d3],\r\n    ['mediumpurple',            0x9370db],\r\n    ['rebeccapurple',           0x663399],\r\n    ['blueviolet',              0x8a2be2],\r\n    ['darkviolet',              0x9400d3],\r\n    ['darkorchid',              0x9932cc],\r\n    ['darkmagenta',             0x8b008b],\r\n    ['purple',                  0x800080],\r\n    ['indigo',                  0x4b0082],\r\n    ['slateblue',               0x6a5acd],\r\n    ['mediumslateblue',         0x7b68ee],\r\n    ['darkslateblue',           0x483d8b],\r\n    ['greenyellow',             0xadff2f],\r\n    ['chartreuse',              0x7fff00],\r\n    ['lawngreen',               0x7cfc00],\r\n    ['lime',                    0x00ff00],\r\n    ['limegreen',               0x32cd32],\r\n    ['palegreen',               0x98fb98],\r\n    ['lightgreen',              0x90ee90],\r\n    ['mediumspringgreen',       0x00fa9a],\r\n    ['springgreen',             0x00ff7f],\r\n    ['mediumseagreen',          0x3cb371],\r\n    ['seagreen',                0x2e8b57],\r\n    ['forestgreen',             0x228b22],\r\n    ['green',                   0x008000],\r\n    ['darkgreen',               0x006400],\r\n    ['yellowgreen',             0x9acd32],\r\n    ['olivedrab',               0x6b8e23],\r\n    ['olive',                   0x808000],\r\n    ['darkolivegreen',          0x556b2f],\r\n    ['mediumaquamarine',        0x66cdaa],\r\n    ['darkseagreen',            0x8fbc8f],\r\n    ['lightseagreen',           0x20b2aa],\r\n    ['darkcyan',                0x008b8b],\r\n    ['teal',                    0x008080],\r\n    ['aqua',                    0x00ffff],\r\n    ['cyan',                    0x00ffff],\r\n    ['lightcyan',               0xe0ffff],\r\n    ['paleturquoise',           0xafeeee],\r\n    ['aquamarine',              0x7fffd4],\r\n    ['turquoise',               0x40e0d0],\r\n    ['mediumturquoise',         0x48d1cc],\r\n    ['darkturquoise',           0x00ced1],\r\n    ['cadetblue',               0x5f9ea0],\r\n    ['steelblue',               0x4682b4],\r\n    ['lightsteelblue',          0xb0c4de],\r\n    ['powderblue',              0xb0e0e6],\r\n    ['lightblue',               0xadd8e6],\r\n    ['skyblue',                 0x87ceeb],\r\n    ['lightskyblue',            0x87cefa],\r\n    ['deepskyblue',             0x00bfff],\r\n    ['dodgerblue',              0x1e90ff],\r\n    ['cornflowerblue',          0x6495ed],\r\n    ['royalblue',               0x4169e1],\r\n    ['blue',                    0x0000ff],\r\n    ['mediumblue',              0x0000cd],\r\n    ['darkblue',                0x00008b],\r\n    ['navy',                    0x000080],\r\n    ['midnightblue',            0x191970],\r\n    ['cornsilk',                0xfff8dc],\r\n    ['blanchedalmond',          0xffebcd],\r\n    ['bisque',                  0xffe4c4],\r\n    ['navajowhite',             0xffdead],\r\n    ['wheat',                   0xf5deb3],\r\n    ['burlywood',               0xdeb887],\r\n    ['tan',                     0xd2b48c],\r\n    ['rosybrown',               0xbc8f8f],\r\n    ['sandybrown',              0xf4a460],\r\n    ['goldenrod',               0xdaa520],\r\n    ['darkgoldenrod',           0xb8860b],\r\n    ['peru',                    0xcd853f],\r\n    ['chocolate',               0xd2691e],\r\n    ['saddlebrown',             0x8b4513],\r\n    ['sienna',                  0xa0522d],\r\n    ['brown',                   0xa52a2a],\r\n    ['maroon',                  0x800000],\r\n    ['white',                   0xffffff],\r\n    ['snow',                    0xfffafa],\r\n    ['honeydew',                0xf0fff0],\r\n    ['mintcream',               0xf5fffa],\r\n    ['azure',                   0xf0ffff],\r\n    ['aliceblue',               0xf0f8ff],\r\n    ['ghostwhite',              0xf8f8ff],\r\n    ['whitesmoke',              0xf5f5f5],\r\n    ['seashell',                0xfff5ee],\r\n    ['beige',                   0xf5f5dc],\r\n    ['oldlace',                 0xfdf5e6],\r\n    ['floralwhite',             0xfffaf0],\r\n    ['ivory',                   0xfffff0],\r\n    ['antiquewhite',            0xfaebd7],\r\n    ['linen',                   0xfaf0e6],\r\n    ['lavenderblush',           0xfff0f5],\r\n    ['mistyrose',               0xffe4e1],\r\n    ['gainsboro',               0xdcdcdc],\r\n    ['lightgray',               0xd3d3d3],\r\n    ['silver',                  0xc0c0c0],\r\n    ['darkgray',                0xa9a9a9],\r\n    ['gray',                    0x808080],\r\n    ['dimgray',                 0x696969],\r\n    ['lightslategray',          0x778899],\r\n    ['slategray',               0x708090],\r\n    ['darkslategray',           0x2f4f4f],\r\n    ['black',                   0x000000],\r\n    /* eslint-enable no-multi-spaces */\r\n  ],\r\n\r\n  namedColors: {},\r\n  /* eslint-enable no-magic-numbers */\r\n\r\n  gradients: {\r\n    rainbow: [\r\n      0x0000ff, // blue\r\n      0x00ffff, // cyan\r\n      0x00ff00, // green\r\n      0xffff00, // yellow\r\n      0xff0000, // red\r\n    ],\r\n    temp: [\r\n      0x0000ff, // blue\r\n      0x007fff, // light-blue\r\n      0xffffff, // white\r\n      0xff7f00, // orange\r\n      0xff0000, // red\r\n    ],\r\n    hot: [\r\n      0xffffff, // white\r\n      0xff7f00, // orange\r\n      0xff0000, // red\r\n    ],\r\n    cold: [\r\n      0xffffff, // white\r\n      0x007fff, // light-blue\r\n      0x0000ff, // blue\r\n    ],\r\n    'blue-red': [\r\n      0x0000ff, // blue\r\n      0xffffff, // white\r\n      0xff0000, // red\r\n    ],\r\n    reds: [\r\n      0xffffff, // white\r\n      0xff0000, // red\r\n    ],\r\n    blues: [\r\n      0xffffff, // white\r\n      0x0000ff, // blue\r\n    ],\r\n  },\r\n});\r\n\r\n\r\nconst { namedColorsArray, namedColors } = Palette.prototype;\r\n\r\nfor (let i = 0, { length } = namedColorsArray; i < length; ++i) {\r\n  const [name, value] = namedColorsArray[i];\r\n  namedColors[name] = value;\r\n}\r\n\r\nexport default Palette;\r\n","import Palette from './Palette';\r\n\r\nconst palette = new Palette('CPK', 'CP');\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  C: 0x202020,\r\n  N: 0x2060FF,\r\n  O: 0xEE2010,\r\n  F: 0x00FF00,\r\n  P: 0x8020FF,\r\n  S: 0xFFFF00,\r\n  CL: 0x00BB00,\r\n  FE: 0xD0D0D0,\r\n  CO: 0xD0D0D0,\r\n  NI: 0xD0D0D0,\r\n  CU: 0xD0D0D0,\r\n  BR: 0x008800,\r\n  I: 0x005500,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\nexport default palette;\r\n","import Palette from './Palette';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst palette = new Palette('Jmol', 'JM');\r\n\r\npalette.colors = [\r\n  /* eslint-disable no-magic-numbers */\r\n  0x0000FF, // blue\r\n  0x0055FF, //\r\n  0x00ABFF, //\r\n  0x00FFFF, // cyan\r\n  0x00FFAB, //\r\n  0x00FF55, //\r\n  0x00FF00, // green\r\n  0x55FF00, //\r\n  0xABFF00, //\r\n  0xFFFF00, // yellow\r\n  0xFFAB00, //\r\n  0xFF5500, //\r\n  0xFF0000, // red\r\n  0xFF0055, //\r\n  0xFF00AB, //\r\n  0xFF00FF, // magenta\r\n  0xAB00FF, //\r\n  0x5500FF, //\r\n  /* eslint-enable no-magic-numbers */\r\n];\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  D: 0xFFFFC0,\r\n  T: 0xFFFFA0,\r\n  HE: 0xD9FFFF,\r\n  LI: 0xCC80FF,\r\n  BE: 0xC2FF00,\r\n  B: 0xFFB5B5,\r\n  C: 0x909090,\r\n  N: 0x3050F8,\r\n  O: 0xFF0D0D,\r\n  F: 0x90E050,\r\n  NE: 0xB3E3F5,\r\n  NA: 0xAB5CF2,\r\n  MG: 0x8AFF00,\r\n  AL: 0xBFA6A6,\r\n  SI: 0xF0C8A0,\r\n  P: 0xFF8000,\r\n  S: 0xFFFF30,\r\n  CL: 0x1FF01F,\r\n  AR: 0x80D1E3,\r\n  K: 0x8F40D4,\r\n  CA: 0x3DFF00,\r\n  SC: 0xE6E6E6,\r\n  TI: 0xBFC2C7,\r\n  V: 0xA6A6AB,\r\n  CR: 0x8A99C7,\r\n  MN: 0x9C7AC7,\r\n  FE: 0xE06633,\r\n  CO: 0xF090A0,\r\n  NI: 0x50D050,\r\n  CU: 0xC88033,\r\n  ZN: 0x7D80B0,\r\n  GA: 0xC28F8F,\r\n  GE: 0x668F8F,\r\n  AS: 0xBD80E3,\r\n  SE: 0xFFA100,\r\n  BR: 0xA62929,\r\n  KR: 0x5CB8D1,\r\n  RB: 0x702EB0,\r\n  SR: 0x00FF00,\r\n  Y: 0x94FFFF,\r\n  ZR: 0x94E0E0,\r\n  NB: 0x73C2C9,\r\n  MO: 0x54B5B5,\r\n  TC: 0x3B9E9E,\r\n  RU: 0x248F8F,\r\n  RH: 0x0A7D8C,\r\n  PD: 0x006985,\r\n  AG: 0xC0C0C0,\r\n  CD: 0xFFD98F,\r\n  IN: 0xA67573,\r\n  SN: 0x668080,\r\n  SB: 0x9E63B5,\r\n  TE: 0xD47A00,\r\n  I: 0x940094,\r\n  XE: 0x429EB0,\r\n  CS: 0x57178F,\r\n  BA: 0x00C900,\r\n  LA: 0x70D4FF,\r\n  CE: 0xFFFFC7,\r\n  PR: 0xD9FFC7,\r\n  ND: 0xC7FFC7,\r\n  PM: 0xA3FFC7,\r\n  SM: 0x8FFFC7,\r\n  EU: 0x61FFC7,\r\n  GD: 0x45FFC7,\r\n  TB: 0x30FFC7,\r\n  DY: 0x1FFFC7,\r\n  HO: 0x00FF9C,\r\n  ER: 0x00E675,\r\n  TM: 0x00D452,\r\n  YB: 0x00BF38,\r\n  LU: 0x00AB24,\r\n  HF: 0x4DC2FF,\r\n  TA: 0x4DA6FF,\r\n  W: 0x2194D6,\r\n  RE: 0x267DAB,\r\n  OS: 0x266696,\r\n  IR: 0x175487,\r\n  PT: 0xD0D0E0,\r\n  AU: 0xFFD123,\r\n  HG: 0xB8B8D0,\r\n  TL: 0xA6544D,\r\n  PB: 0x575961,\r\n  BI: 0x9E4FB5,\r\n  PO: 0xAB5C00,\r\n  AT: 0x754F45,\r\n  RN: 0x428296,\r\n  FR: 0x420066,\r\n  RA: 0x007D00,\r\n  AC: 0x70ABFA,\r\n  TH: 0x00BAFF,\r\n  PA: 0x00A1FF,\r\n  U: 0x008FFF,\r\n  NP: 0x0080FF,\r\n  PU: 0x006BFF,\r\n  AM: 0x545CF2,\r\n  CM: 0x785CE3,\r\n  BK: 0x8A4FE3,\r\n  CF: 0xA136D4,\r\n  ES: 0xB31FD4,\r\n  FM: 0xB31FBA,\r\n  MD: 0xB30DA6,\r\n  NO: 0xBD0D87,\r\n  LR: 0xC70066,\r\n  RF: 0xCC0059,\r\n  DB: 0xD1004F,\r\n  SG: 0xD90045,\r\n  BH: 0xE00038,\r\n  HS: 0xE6002E,\r\n  MT: 0xEB0026,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.defaultResidueColor = 0xBEA06E;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\npalette.residueColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  ALA: 0xC8C8C8,\r\n  ARG: 0x145AFF,\r\n  ASN: 0x00DCDC,\r\n  ASP: 0xE60A0A,\r\n  CYS: 0xE6E600,\r\n  GLN: 0x00DCDC,\r\n  GLU: 0xE60A0A,\r\n  GLY: 0xEBEBEB,\r\n  HIS: 0x8282D2,\r\n  ILE: 0x0F820F,\r\n  LEU: 0x0F820F,\r\n  LYS: 0x145AFF,\r\n  MET: 0xE6E600,\r\n  PHE: 0x3232AA,\r\n  PRO: 0xDC9682,\r\n  SER: 0xFA9600,\r\n  THR: 0xFA9600,\r\n  TRP: 0xB45AB4,\r\n  TYR: 0x3232AA,\r\n  VAL: 0x0F820F,\r\n  A: 0xA0A0FF,\r\n  C: 0xFF8C4B,\r\n  G: 0xFF7070,\r\n  I: 0x80FFFF,\r\n  T: 0xA0FFA0,\r\n  U: 0xFF8080,\r\n  DA: 0xA0A0FF,\r\n  DC: 0xFF8C4B,\r\n  DG: 0xFF7070,\r\n  DI: 0x80FFFF,\r\n  DT: 0xA0FFA0,\r\n  DU: 0xFF8080,\r\n  '+A': 0xA0A0FF,\r\n  '+C': 0xFF8C4B,\r\n  '+G': 0xFF7070,\r\n  '+I': 0x80FFFF,\r\n  '+T': 0xA0FFA0,\r\n  '+U': 0xFF8080,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.chainColors = [\r\n  // ' '->0 'A'->1, 'B'->2\r\n  0xFFffffff, // ' ' & '0' white\r\n  //\r\n  0xFFC0D0FF, // skyblue\r\n  0xFFB0FFB0, // pastel green\r\n  0xFFFFC0C8, // pink\r\n  0xFFFFFF80, // pastel yellow\r\n  0xFFFFC0FF, // pastel magenta\r\n  0xFFB0F0F0, // pastel cyan\r\n  0xFFFFD070, // pastel gold\r\n  0xFFF08080, // lightcoral\r\n\r\n  0xFFF5DEB3, // wheat\r\n  0xFF00BFFF, // deepskyblue\r\n  0xFFCD5C5C, // indianred\r\n  0xFF66CDAA, // mediumaquamarine\r\n  0xFF9ACD32, // yellowgreen\r\n  0xFFEE82EE, // violet\r\n  0xFF00CED1, // darkturquoise\r\n  0xFF00FF7F, // springgreen\r\n  0xFF3CB371, // mediumseagreen\r\n\r\n  0xFF00008B, // darkblue\r\n  0xFFBDB76B, // darkkhaki\r\n  0xFF006400, // darkgreen\r\n  0xFF800000, // maroon\r\n  0xFF808000, // olive\r\n  0xFF800080, // purple\r\n  0xFF008080, // teal\r\n  0xFFB8860B, // darkgoldenrod\r\n  0xFFB22222, // firebrick\r\n];\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\npalette.secondaryColors = {\r\n  [StructuralElementType.HELIX_ALPHA]: 0xFF0080,\r\n  [StructuralElementType.HELIX_PI]: 0x600080,\r\n  [StructuralElementType.HELIX_310]: 0xA00080,\r\n  [StructuralElementType.STRAND]: 0xFFC800,\r\n  [StructuralElementType.TURN]: 0x6080FF,\r\n  dna: 0xAE00FE,\r\n  rna: 0xFD0162,\r\n};\r\n\r\nexport default palette;\r\n","import Palette from './Palette';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst palette = new Palette('VMD', 'VM');\r\n\r\npalette.colors = [\r\n  /* eslint-disable no-magic-numbers */\r\n  0x0000FF, // blue\r\n  0xFF0000, // red\r\n  0x606060, // gray\r\n  0xFF8000, // orange\r\n  0xFFFF00, // yellow\r\n  0x808033, // tan\r\n  0x999999, // silver\r\n  0x00FF00, // green\r\n  0xFFFFFF, // white\r\n  0xFF9999, // pink\r\n  0x40C0C0, // cyan\r\n  0xA600A6, // purple\r\n  0x80E666, // lime\r\n  0xE666B3, // mauve\r\n  0x804D00, // ochre\r\n  0x8080C0, // ice blue\r\n  /* eslint-enable no-magic-numbers */\r\n];\r\n\r\npalette.defaultElementColor = 0x804D00;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  C: 0x40BFBF,\r\n  N: 0x0000FF,\r\n  O: 0xFF0000,\r\n  P: 0x808033,\r\n  S: 0xFFFF00,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.defaultResidueColor = 0x40C0C0;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\npalette.residueColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  ALA: 0x0000FF,\r\n  ARG: 0xFFFFFF,\r\n  ASN: 0x808033,\r\n  ASP: 0xFF0000,\r\n  CYS: 0xFFFF00,\r\n  GLN: 0xFF8000,\r\n  GLU: 0xFF9999,\r\n  GLY: 0xFFFFFF,\r\n  HIS: 0x40C0C0,\r\n  ILE: 0x00FF00,\r\n  LEU: 0xFF9999,\r\n  LYS: 0x40C0C0,\r\n  MET: 0xFFFF00,\r\n  PHE: 0xA600A6,\r\n  PRO: 0x804C00,\r\n  SER: 0xFFFF00,\r\n  THR: 0xE666B3,\r\n  TRP: 0x999999,\r\n  TYR: 0x00FF00,\r\n  VAL: 0x808033,\r\n  A: 0x0000FF,\r\n  C: 0xFF8000,\r\n  G: 0xFFFF00,\r\n  T: 0xA600A6,\r\n  U: 0x00FF00,\r\n  DA: 0x0000FF,\r\n  DC: 0xFF8000,\r\n  DG: 0xFFFF00,\r\n  DT: 0xA600A6,\r\n  DU: 0x00FF00,\r\n  '+A': 0x0000FF,\r\n  '+C': 0xFF8000,\r\n  '+G': 0xFFFF00,\r\n  '+T': 0xA600A6,\r\n  '+U': 0x00FF00,\r\n  WAT: 0x40C0C0,\r\n  H2O: 0x40C0C0,\r\n  HOH: 0x40C0C0,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.chainColors = [0xFFFFFF].concat(palette.colors);\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\npalette.secondaryColors = {\r\n  [StructuralElementType.HELIX_ALPHA]: 0xA600A6,\r\n  [StructuralElementType.HELIX_310]: 0x0000FF,\r\n  [StructuralElementType.HELIX_PI]: 0xFF0000,\r\n  [StructuralElementType.STRAND]: 0xFFFF00,\r\n  [StructuralElementType.BRIDGE]: 0x808033,\r\n  [StructuralElementType.TURN]: 0x40C0C0,\r\n};\r\n\r\nexport default palette;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport cpkPalette from './palettes/cpkPalette';\r\nimport jmolPalette from './palettes/jmolPalette';\r\nimport vmdPalette from './palettes/vmdPalette';\r\n\r\nconst palettes = new EntityList([\r\n  cpkPalette,\r\n  jmolPalette,\r\n  vmdPalette,\r\n]);\r\n\r\nexport default palettes;\r\n","import _ from 'lodash';\r\nimport settings from '../../settings';\r\nimport utils from '../../utils';\r\nimport palettes from '../palettes';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the colorer after its creation.\r\n *\r\n * @exports Colorer\r\n * @this Colorer\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all available coloring algorithms used for building and displaying molecule geometry.\r\n */\r\nclass Colorer {\r\n  constructor(opts) {\r\n    if (this.constructor === Colorer) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Colorer options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.opts = _.merge(utils.deriveDeep(settings.now.colorers[this.id], true), opts);\r\n    /**\r\n     * Palette in use.\r\n     * @type {Palette}\r\n     */\r\n    this.palette = palettes.first;\r\n  }\r\n\r\n  /**\r\n   * Get Colorer identification, probably with options.\r\n   * @returns {string|Array} Colorer identifier string ({@link Colorer#id}) or two-element array containing both colorer\r\n   *   identifier and options ({@link Colorer#opts}).\r\n   * Options are returned if they were changed during or after colorer creation.\r\n   */\r\n  identify() {\r\n    const diff = utils.objectsDiff(this.opts, settings.now.colorers[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      return [this.id, diff];\r\n    }\r\n    return this.id;\r\n  }\r\n}\r\n\r\n/**\r\n * Colorer identifier.\r\n * @type {string}\r\n */\r\n\r\nColorer.prototype.id = '__';\r\n\r\nexport default Colorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Element\r\n *\r\n * @exports ElementColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Coloring algorithm based on chemical element.\r\n */\r\nclass ElementColorer extends Colorer {\r\n  static id = 'EL';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const type = atom.element.name;\r\n    if (type === 'C' && this.opts.carbon >= 0) {\r\n      return this.opts.carbon;\r\n    }\r\n    return this.palette.getElementColor(type);\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.palette.defaultResidueColor;\r\n  }\r\n}\r\n\r\nElementColorer.prototype.id = 'EL';\r\nElementColorer.prototype.name = 'Element';\r\nElementColorer.prototype.shortName = 'Element';\r\n\r\nexport default ElementColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Coloring algorithm based on residue type.\r\n *\r\n * @see ResidueType\r\n *\r\n * @exports ResidueTypeColorer\r\n * @constructor\r\n */\r\nclass ResidueTypeColorer extends Colorer {\r\n  static id = 'RT';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    return this.palette.getResidueColor(residue._type._name);\r\n  }\r\n}\r\n\r\nResidueTypeColorer.prototype.id = 'RT';\r\nResidueTypeColorer.prototype.name = 'Residue Type';\r\nResidueTypeColorer.prototype.shortName = 'Residue';\r\n\r\nexport default ResidueTypeColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass SequenceColorer extends Colorer {\r\n  static id = 'SQ';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const chain = residue._chain;\r\n    if (chain.minSequence === Number.POSITIVE_INFINITY && chain.maxSequence === Number.NEGATIVE_INFINITY) {\r\n      return this.palette.defaultNamedColor;\r\n    }\r\n    const min = chain.minSequence;\r\n    const max = chain.maxSequence > min ? chain.maxSequence : min + 1;\r\n    return this.palette.getGradientColor((residue._sequence - min) / (max - min), this.opts.gradient);\r\n  }\r\n}\r\n\r\nSequenceColorer.prototype.id = 'SQ';\r\nSequenceColorer.prototype.name = 'Sequence';\r\nSequenceColorer.prototype.shortName = 'Sequence';\r\n\r\nexport default SequenceColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass ChainColorer extends Colorer {\r\n  static id = 'CH';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    return this.palette.getChainColor(residue.getChain()._name);\r\n  }\r\n}\r\n\r\nChainColorer.prototype.id = 'CH';\r\nChainColorer.prototype.name = 'Chain';\r\nChainColorer.prototype.shortName = 'Chain';\r\n\r\nexport default ChainColorer;\r\n","import Colorer from './Colorer';\r\nimport ResidueType from '../../chem/ResidueType';\r\n\r\nclass SecondaryStructureColorer extends Colorer {\r\n  static id = 'SS';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    if (residue._type.flags & ResidueType.Flags.DNA) {\r\n      return this.palette.getSecondaryColor('dna');\r\n    }\r\n    if (residue._type.flags & ResidueType.Flags.RNA) {\r\n      return this.palette.getSecondaryColor('rna');\r\n    }\r\n    const secondary = residue.getSecondary();\r\n    if (secondary) {\r\n      let color = this.palette.getSecondaryColor(secondary.type, true);\r\n      if (color === undefined) {\r\n        color = this.palette.getSecondaryColor(secondary.generic);\r\n      }\r\n      return color;\r\n    }\r\n    return this.palette.defaultSecondaryColor;\r\n  }\r\n}\r\n\r\nSecondaryStructureColorer.prototype.id = 'SS';\r\nSecondaryStructureColorer.prototype.name = 'Secondary Structure';\r\nSecondaryStructureColorer.prototype.shortName = 'Structure';\r\n\r\nexport default SecondaryStructureColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass UniformColorer extends Colorer {\r\n  static id = 'UN';\r\n\r\n  getAtomColor(_atom, _complex) {\r\n    return this.opts.color;\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.opts.color;\r\n  }\r\n}\r\n\r\nUniformColorer.prototype.id = 'UN';\r\nUniformColorer.prototype.name = 'Uniform';\r\nUniformColorer.prototype.shortName = 'Uniform';\r\n\r\nexport default UniformColorer;\r\n","import Colorer from './Colorer';\r\nimport selectors from '../../chem/selectors';\r\n\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @exports ConditionalColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Bicolor coloring algorithm based on a selector string used as a condition.\r\n */\r\nclass ConditionalColorer extends Colorer {\r\n  static id = 'CO';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    const parsed = selectors.parse(this.opts.subset);\r\n    this._subsetCached = parsed.error ? selectors.none() : parsed.selector;\r\n  }\r\n\r\n  getAtomColor(atom, _complex) {\r\n    return this._subsetCached.includesAtom(atom) ? this.opts.color : this.opts.baseColor;\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const subset = this._subsetCached;\r\n    let includes = true;\r\n    const atoms = residue._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      includes = includes && subset.includesAtom(atoms[i]);\r\n    }\r\n    return includes ? this.opts.color : this.opts.baseColor;\r\n  }\r\n}\r\n\r\nConditionalColorer.prototype.id = 'CO';\r\nConditionalColorer.prototype.name = 'Conditional';\r\nConditionalColorer.prototype.shortName = 'Conditional';\r\n\r\nexport default ConditionalColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass ConformationColorer extends Colorer {\r\n  static id = 'CF';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    return this.palette.getChainColor(String.fromCharCode(atom.location));\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.palette.defaultResidueColor;\r\n  }\r\n}\r\n\r\nConformationColorer.prototype.id = 'CF';\r\nConformationColorer.prototype.name = 'Conformation';\r\nConformationColorer.prototype.shortName = 'Conformation';\r\n\r\nexport default ConformationColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Temperature\r\n *\r\n * @exports TemperatureColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Coloring algorithm based on temperature of chemical element.\r\n */\r\nclass TemperatureColorer extends Colorer {\r\n  static id = 'TM';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const { opts } = this;\r\n    let factor = 1;\r\n    if (atom.temperature && opts) {\r\n      if (opts.min === opts.max) {\r\n        factor = atom.temperature > opts.max ? 1 : 0;\r\n      } else {\r\n        factor = (atom.temperature - opts.min) / (opts.max - opts.min);\r\n      }\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const { opts } = this;\r\n    if (!opts) {\r\n      return this.palette.defaultGradientColor;\r\n    }\r\n    if (residue.temperature) {\r\n      let factor = 0;\r\n      if (opts.min === opts.max) {\r\n        factor = residue.temperature > opts.max ? 1 : 0;\r\n      } else {\r\n        factor = (residue.temperature - opts.min) / (opts.max - opts.min);\r\n      }\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n}\r\n\r\nTemperatureColorer.prototype.id = 'TM'; // [T]e[M]perature\r\nTemperatureColorer.prototype.name = 'Temperature';\r\nTemperatureColorer.prototype.shortName = 'Temperature';\r\n\r\nexport default TemperatureColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Occupancy\r\n *\r\n * @exports OccupancyColorer\r\n * @augments Occupancy\r\n * @constructor\r\n * @classdesc Coloring algorithm based on occupancy of chemical element.\r\n */\r\nclass OccupancyColorer extends Colorer {\r\n  static id = 'OC';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const { opts } = this;\r\n    if (atom.occupancy && opts) {\r\n      const factor = 1 - atom.occupancy;\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const { opts } = this;\r\n    if (!opts) {\r\n      return this.palette.defaultGradientColor;\r\n    }\r\n    if (residue.occupancy > 0) {\r\n      const factor = 1 - residue.occupancy;\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n}\r\n\r\nOccupancyColorer.prototype.id = 'OC'; // [OC]cupancy\r\nOccupancyColorer.prototype.name = 'Occupancy';\r\nOccupancyColorer.prototype.shortName = 'Occupancy';\r\n\r\nexport default OccupancyColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass HydrophobicityColorer extends Colorer {\r\n  static id = 'HY';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    let color = this.palette.defaultResidueColor;\r\n    if (residue._type.hydrophobicity) {\r\n      // Kyte Doolitle hydro [-4.5,4.5]->[0.1]\r\n      const min = -4.5;\r\n      const max = 4.5;\r\n      color = this.palette.getGradientColor((residue._type.hydrophobicity - min) / (max - min), this.opts.gradient);\r\n    }\r\n    return color;\r\n  }\r\n}\r\n\r\nHydrophobicityColorer.prototype.id = 'HY';\r\nHydrophobicityColorer.prototype.name = 'Hydrophobicity';\r\nHydrophobicityColorer.prototype.shortName = 'Hydrophobicity';\r\n\r\nexport default HydrophobicityColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass MoleculeColorer extends Colorer {\r\n  static id = 'MO';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const molecule = residue._molecule;\r\n    const count = _complex.getMoleculeCount();\r\n    if (count > 1) {\r\n      return this.palette.getGradientColor((molecule.index - 1) / (count - 1), this.opts.gradient);\r\n    }\r\n    return this.palette.getGradientColor(0, this.opts.gradient);\r\n  }\r\n}\r\n\r\nMoleculeColorer.prototype.id = 'MO';\r\nMoleculeColorer.prototype.name = 'Molecule';\r\nMoleculeColorer.prototype.shortName = 'Molecule';\r\n\r\nexport default MoleculeColorer;\r\n","import Colorer from './Colorer';\r\nimport Atom from '../../chem/Atom';\r\n\r\nfunction scaleColor(c, factor) {\r\n  const r1 = (c >> 16) & 0xff;\r\n  const g1 = (c >> 8) & 0xff;\r\n  const b1 = c & 0xff;\r\n  const r = factor * r1;\r\n  const g = factor * g1;\r\n  const b = factor * b1;\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @exports CarbonColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Bicolor coloring algorithm based on selection carbon atoms.\r\n */\r\nclass CarbonColorer extends Colorer {\r\n  static id = 'CB';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const colorCarbon = this.opts.color;\r\n    const colorNotCarbon = scaleColor(colorCarbon, this.opts.factor);\r\n    return (atom.flags & Atom.Flags.CARBON) ? colorCarbon : colorNotCarbon;\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.opts.color;\r\n  }\r\n}\r\n\r\nCarbonColorer.prototype.id = 'CB';\r\nCarbonColorer.prototype.name = 'Carbon';\r\nCarbonColorer.prototype.shortName = 'Carbon';\r\n\r\nexport default CarbonColorer;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport ElementColorer from './colorers/ElementColorer';\r\nimport ResidueTypeColorer from './colorers/ResidueTypeColorer';\r\nimport SequenceColorer from './colorers/SequenceColorer';\r\nimport ChainColorer from './colorers/ChainColorer';\r\nimport SecondaryStructureColorer from './colorers/SecondaryStructureColorer';\r\nimport UniformColorer from './colorers/UniformColorer';\r\nimport ConditionalColorer from './colorers/ConditionalColorer';\r\nimport ConformationColorer from './colorers/ConformationColorer';\r\nimport TemperatureColorer from './colorers/TemperatureColorer';\r\nimport OccupancyColorer from './colorers/OccupancyColorer';\r\nimport HydrophobicityColorer from './colorers/HydrophobicityColorer';\r\nimport MoleculeColorer from './colorers/MoleculeColorer';\r\nimport CarbonColorer from './colorers/CarbonColorer';\r\n\r\nconst colorers = new EntityList([\r\n  ElementColorer,\r\n  ResidueTypeColorer,\r\n  SequenceColorer,\r\n  ChainColorer,\r\n  SecondaryStructureColorer,\r\n  UniformColorer,\r\n  ConditionalColorer,\r\n  ConformationColorer,\r\n  TemperatureColorer,\r\n  OccupancyColorer,\r\n  HydrophobicityColorer,\r\n  MoleculeColorer,\r\n  CarbonColorer,\r\n]);\r\n\r\nexport default colorers;\r\n","import * as THREE from 'three';\r\nimport EntityList from '../utils/EntityList';\r\n\r\nfunction neutralColor(intensity) {\r\n  return new THREE.Color(intensity, intensity, intensity);\r\n}\r\n\r\nconst materialList = [\r\n  {\r\n    id: 'DF',\r\n    name: 'Diffuse',\r\n    shortName: 'Diffuse',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'SF',\r\n    name: 'Soft Plastic',\r\n    shortName: 'Soft',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.1),\r\n      shininess: 30,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'PL',\r\n    name: 'Glossy Plastic',\r\n    shortName: 'Glossy',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.56),\r\n      specular: neutralColor(0.28),\r\n      shininess: 100,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'ME',\r\n    name: 'Metal',\r\n    shortName: 'Metal',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.56),\r\n      specular: neutralColor(0.55),\r\n      shininess: 30,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'TR',\r\n    name: 'Transparent',\r\n    shortName: 'Transparent',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 0.5,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: true,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'GL',\r\n    name: 'Glass',\r\n    shortName: 'Glass',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.50),\r\n      specular: neutralColor(0.65),\r\n      shininess: 100,\r\n      opacity: 0.5,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: true,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'BA',\r\n    name: 'Backdrop',\r\n    shortName: 'Backdrop',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: false,\r\n      fog: false,\r\n      depthWrite: false,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'TN',\r\n    name: 'Toon',\r\n    shortName: 'Toon',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: true,\r\n    },\r\n  }, {\r\n    id: 'FL',\r\n    name: 'Flat',\r\n    shortName: 'Flat',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 0,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: false,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n    },\r\n  },\r\n];\r\n\r\nconst materials = new EntityList(materialList);\r\n\r\nexport default materials;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport UberMaterial from './shaders/UberMaterial';\r\nimport gfxutils from './gfxutils';\r\nimport settings from '../settings';\r\nimport materials from './materials';\r\nimport chem from '../chem';\r\n\r\nconst { selectors } = chem;\r\n\r\nclass Representation {\r\n  constructor(index, mode, colorer, selector) {\r\n    const startMaterialValues = {\r\n      clipPlane: settings.now.draft.clipPlane,\r\n      fogTransparent: settings.now.bg.transparent,\r\n      shadowmap: settings.now.shadow.on,\r\n      shadowmapType: settings.now.shadow.type,\r\n    };\r\n    this.index = index;\r\n    this.mode = mode;\r\n    this.colorer = colorer;\r\n    this.selector = selector;\r\n    this.selectorString = '';\r\n    this.count = 0;\r\n    this.material = new UberMaterial();\r\n    this.material.setValues(startMaterialValues);\r\n    this.material.setUberOptions({ fogAlpha: settings.now.fogAlpha });\r\n    this.materialPreset = materials.first;\r\n    this.needsRebuild = true;\r\n    this.visible = true;\r\n\r\n    // apply mode params & preset\r\n    this.setMode(mode);\r\n  }\r\n\r\n\r\n  markAtoms(complex) {\r\n    this.count = complex.markAtoms(this.selector, 1 << this.index);\r\n    this.needsRebuild = true;\r\n    return this.count;\r\n  }\r\n\r\n  unmarkAtoms(complex) {\r\n    complex.clearAtomBits(1 << this.index);\r\n    this.count = 0;\r\n  }\r\n\r\n  setMode(mode) {\r\n    this.mode = mode;\r\n  }\r\n\r\n  setMaterialPreset(preset) {\r\n    this.materialPreset = preset;\r\n    this.material.setUberOptions(preset.uberOptions);\r\n    this.material.setValues(preset.values);\r\n  }\r\n\r\n  reset() {\r\n    this.geo = null;\r\n    this.selectionGeo = null;\r\n  }\r\n\r\n  buildGeometry(complex) {\r\n    this.reset();\r\n    this.needsRebuild = false;\r\n\r\n    if (settings.now.ao) {\r\n      this.material.setValues({ normalsToGBuffer: settings.now.ao });\r\n    }\r\n\r\n    this.geo = this.mode.buildGeometry(complex, this.colorer, 1 << this.index, this.material);\r\n\r\n    if (this.material.uberOptions.opacity < 0.99 && settings.now.transparency === 'prepass') {\r\n      gfxutils.processTransparentMaterial(this.geo, this.material);\r\n    }\r\n    this.geo.visible = this.visible;\r\n\r\n    gfxutils.processObjRenderOrder(this.geo, this.materialPreset.id);\r\n    gfxutils.processColFromPosMaterial(this.geo, this.material);\r\n\r\n    if (settings.now.shadow.on) {\r\n      gfxutils.createShadowmapMaterial(this.geo, this.material);\r\n    }\r\n\r\n    return this.geo;\r\n  }\r\n\r\n  buildSelectionGeometry(mask) {\r\n    let sg = null;\r\n\r\n    if (this.geo && ('getSubset' in this.geo)) {\r\n      const meshes = this.geo.getSubset(mask);\r\n      if (meshes && meshes.length > 0) {\r\n        sg = new THREE.Group();\r\n        sg.matrixAutoUpdate = false;\r\n        sg.matrix = this.geo.matrix;\r\n\r\n        for (let j = 0; j < meshes.length; j++) {\r\n          const m = meshes[j];\r\n          sg.add(m);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (sg) {\r\n      sg.visible = this.visible;\r\n    }\r\n\r\n    this.selectionGeo = sg;\r\n    return this.selectionGeo;\r\n  }\r\n\r\n  /**\r\n   * Create object that represents difference between current and another rep\r\n   * anotherRep could be undefined. In this case everything is reported.\r\n   */\r\n  compare(repSettings) {\r\n    const diff = {};\r\n\r\n    const selStr = String(this.selector);\r\n    if (!repSettings || selStr.valueOf() !== String(repSettings.selector).valueOf()) {\r\n      diff.selector = selStr;\r\n    }\r\n\r\n    const modeDiff = this.mode.identify();\r\n    if (!repSettings || Array.isArray(modeDiff) || modeDiff !== repSettings.mode) {\r\n      diff.mode = modeDiff;\r\n    }\r\n\r\n    const colorerDiff = this.colorer.identify();\r\n    if (!repSettings || Array.isArray(colorerDiff) || colorerDiff !== repSettings.colorer) {\r\n      diff.colorer = colorerDiff;\r\n    }\r\n\r\n    if (!repSettings || this.materialPreset.id !== repSettings.material) {\r\n      diff.material = this.materialPreset.id;\r\n    }\r\n\r\n    return diff;\r\n  }\r\n\r\n  /**\r\n   * Change representation. Write fields what was changed into new object, return it.\r\n   */\r\n  change(repSettings, complex, mode, color) {\r\n    const diff = {};\r\n\r\n    // modify selector\r\n    if (repSettings.selector) {\r\n      const newSelectorObject = selectors.parse(repSettings.selector).selector;\r\n      const newSelector = String(newSelectorObject);\r\n      if (this.selectorString !== newSelector) {\r\n        diff.selector = newSelector;\r\n        this.selectorString = newSelector;\r\n        this.selector = newSelectorObject;\r\n        this.markAtoms(complex);\r\n      }\r\n    }\r\n\r\n    // modify mode\r\n    if (repSettings.mode) {\r\n      const newMode = repSettings.mode;\r\n      if (!_.isEqual(this.mode.identify(), newMode)) {\r\n        diff.mode = newMode;\r\n        this.setMode(mode);\r\n      }\r\n    }\r\n\r\n    // modify colorer\r\n    if (repSettings.colorer) {\r\n      const newColorer = repSettings.colorer;\r\n      if (!_.isEqual(this.colorer.identify(), newColorer)) {\r\n        diff.colorer = newColorer;\r\n        this.colorer = color;\r\n      }\r\n    }\r\n\r\n    // modify material\r\n    if (repSettings.material) {\r\n      const newMaterial = repSettings.material;\r\n      if (!_.isEqual(this.materialPreset.id, newMaterial)) {\r\n        diff.material = newMaterial;\r\n        this.setMaterialPreset(materials.get(repSettings.material));\r\n      }\r\n    }\r\n\r\n    return diff;\r\n  }\r\n\r\n  show(visible) {\r\n    this.visible = visible;\r\n    if (this.geo) {\r\n      this.geo.visible = visible;\r\n    }\r\n    if (this.selectionGeo) {\r\n      this.selectionGeo.visible = visible;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Representation;\r\n","import * as THREE from 'three';\r\nimport logger from './utils/logger';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport './gfx/modes';\r\n\r\nfunction _traverseComponentGroups(root, component, callback) {\r\n  const { children } = root;\r\n  if (!children) {\r\n    return;\r\n  }\r\n\r\n  for (let i = 0, n = children.length; i < n; ++i) {\r\n    const child = children[i];\r\n    if (child._component === component) {\r\n      callback(child);\r\n    }\r\n    if (child instanceof gfxutils.RCGroup) {\r\n      _traverseComponentGroups(child, component, callback);\r\n    }\r\n  }\r\n}\r\n\r\nfunction ComplexEditor() {\r\n}\r\n\r\nclass ComplexComponentEditor extends ComplexEditor {\r\n  constructor(complexVisual) {\r\n    super();\r\n    this._complexVisual = complexVisual;\r\n    this._inProgress = false;\r\n  }\r\n\r\n  begin() {\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    // init component matrices\r\n    this._componentTransforms = [];\r\n    for (let i = 0; i < complex._components.length; ++i) {\r\n      const component = complex._components[i];\r\n      this._componentTransforms[component._index] = new THREE.Object3D();\r\n    }\r\n\r\n    this._inProgress = true;\r\n\r\n    return true;\r\n  }\r\n\r\n  apply() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    for (let i = 0; i < complex._components.length; ++i) {\r\n      this._bakeComponentTransform(complex._components[i]);\r\n    }\r\n\r\n    complex.onAtomPositionChanged();\r\n\r\n    this._resetComponentTransform();\r\n\r\n    this._complexVisual.finalizeEdit();\r\n  }\r\n\r\n  discard() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    this._resetComponentTransform();\r\n\r\n    this._complexVisual.finalizeEdit();\r\n  }\r\n\r\n  getAltObj() {\r\n    const res = {\r\n      objects: [],\r\n      pivot: new THREE.Vector3(0, 0, 0),\r\n    };\r\n\r\n    const visual = this._complexVisual;\r\n    const component = visual.getSelectedComponent();\r\n\r\n    if (component === null) {\r\n      return res;\r\n    }\r\n\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n    const selectionMask = 1 << visual.getSelectionBit();\r\n    let i;\r\n    let j;\r\n    let reprNode;\r\n    let geo;\r\n\r\n    // find all geo nodes for this component\r\n    _traverseComponentGroups(visual, component, (child) => {\r\n      res.objects.push(child);\r\n    });\r\n\r\n    // find all selection nodes for this component\r\n    for (i = 0; i < selection.children.length; ++i) {\r\n      reprNode = selection.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component') && geo._component === component) {\r\n          res.objects.push(geo);\r\n        }\r\n      }\r\n    }\r\n\r\n    // add dummy object that stores component transformation\r\n    res.objects.push(this._componentTransforms[component._index]);\r\n\r\n    const bbmin = new THREE.Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n    const bbmax = new THREE.Vector3(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\r\n\r\n    component.forEachResidue((residue) => {\r\n      const atoms = residue._atoms;\r\n      for (j = 0; j < atoms.length; ++j) {\r\n        if (atoms[j].mask & selectionMask) {\r\n          bbmin.min(atoms[j].position);\r\n          bbmax.max(atoms[j].position);\r\n        }\r\n      }\r\n    });\r\n\r\n    res.pivot.lerpVectors(bbmin, bbmax, 0.5);\r\n    return res;\r\n  }\r\n\r\n  _bakeComponentTransform(component) {\r\n    const t = this._componentTransforms[component._index];\r\n    if (t && (!(t.position.x === 0 && t.position.y === 0 && t.position.z === 0)\r\n      || !(t.quaternion.x === 0 && t.quaternion.y === 0 && t.quaternion.z === 0 && t.quaternion.w === 1))) {\r\n      t.updateMatrix();\r\n\r\n      component.forEachResidue((residue) => {\r\n        const atoms = residue._atoms;\r\n        for (let j = 0; j < atoms.length; ++j) {\r\n          atoms[j].position.applyMatrix4(t.matrix);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  _resetComponentTransform() {\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n    let i;\r\n    let j;\r\n    let reprNode;\r\n    let geo;\r\n\r\n    for (i = 0; i < this._componentTransforms.length; ++i) {\r\n      geo = this._componentTransforms[i];\r\n      geo.position.set(0, 0, 0);\r\n      geo.quaternion.set(0, 0, 0, 1);\r\n    }\r\n\r\n    // reset all geo nodes\r\n    for (i = 0; i < visual.children.length; ++i) {\r\n      reprNode = visual.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component')) {\r\n          geo.position.set(0, 0, 0);\r\n          geo.quaternion.set(0, 0, 0, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // reset all selection nodes\r\n    for (i = 0; i < selection.children.length; ++i) {\r\n      reprNode = selection.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component')) {\r\n          geo.position.set(0, 0, 0);\r\n          geo.quaternion.set(0, 0, 0, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\nclass ComplexFragmentEditor extends ComplexEditor {\r\n  constructor(complexVisual) {\r\n    super();\r\n    this._complexVisual = complexVisual;\r\n    this._inProgress = false;\r\n  }\r\n\r\n  begin() {\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n\r\n    const atoms = this._getSelectionBorderAtoms();\r\n    if (atoms.length < 1 || atoms.length > 2) {\r\n      logger.error('Can only edit fragments with one or two bound atoms.');\r\n      return false;\r\n    }\r\n\r\n    this._fragmentBoundAtoms = atoms;\r\n\r\n    const selectionMask = 1 << visual.getSelectionBit();\r\n\r\n    // hide selected fragment in main model\r\n    visual.disableSubset(selectionMask, true);\r\n\r\n    // hide selection geo in main model\r\n    for (let k = 0; k < selection.children.length; ++k) {\r\n      selection.children[k].visible = false;\r\n    }\r\n\r\n    // create visible fragment representation to rotate\r\n    const pivotPos = atoms[0].position.clone();\r\n\r\n    if (atoms.length === 2) {\r\n      pivotPos.lerp(atoms[1].position, 0.5);\r\n    }\r\n\r\n    this._fragmentGeo = new THREE.Group();\r\n    visual.add(this._fragmentGeo);\r\n    this._fragmentGeo.position.copy(pivotPos);\r\n\r\n    this._fragmentSelectionGeo = new THREE.Group();\r\n    selection.add(this._fragmentSelectionGeo);\r\n    this._fragmentSelectionGeo.position.copy(pivotPos);\r\n\r\n    const offset = pivotPos.clone();\r\n    offset.negate();\r\n\r\n    for (let i = 0; i < visual.children.length; ++i) {\r\n      const g = visual.children[i];\r\n      if (!('getSubset' in g)) {\r\n        continue;\r\n      }\r\n\r\n      const vg = new THREE.Group();\r\n      this._fragmentGeo.add(vg);\r\n\r\n      const sg = new THREE.Group();\r\n      this._fragmentSelectionGeo.add(sg);\r\n\r\n      const meshes = g.getSubset(selectionMask, true);\r\n      for (let j = 0; j < meshes.length; j++) {\r\n        const m = meshes[j];\r\n        vg.add(m);\r\n        m.position.copy(offset);\r\n      }\r\n\r\n      const smeshes = g.getSubset(selectionMask, true);\r\n      for (let h = 0; h < smeshes.length; h++) {\r\n        const sm = smeshes[h];\r\n        sg.add(sm);\r\n        sm.position.copy(offset);\r\n      }\r\n    }\r\n\r\n    gfxutils.applySelectionMaterial(this._fragmentSelectionGeo);\r\n\r\n    this._inProgress = true;\r\n    return true;\r\n  }\r\n\r\n  apply() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const visual = this._complexVisual;\r\n    const selectionBit = visual.getSelectionBit();\r\n\r\n    const p = this._fragmentGeo.position;\r\n    const m = this._fragmentGeo.matrix.clone();\r\n    m.multiply(new THREE.Matrix4().makeTranslation(-p.x, -p.y, -p.z));\r\n\r\n    this._bakeAtomTransform(m, 1 << selectionBit);\r\n\r\n    // show selected fragment in main model\r\n    visual.enableSubset(1 << selectionBit, true);\r\n\r\n    visual.getComplex().onAtomPositionChanged();\r\n\r\n    visual.finalizeEdit();\r\n  }\r\n\r\n  discard() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n\r\n    this._fragmentGeo.parent.remove(this._fragmentGeo);\r\n\r\n    // show selected fragment in main model\r\n    visual.enableSubset(1 << visual.getSelectionBit(), true);\r\n\r\n    // show selection geo in main model (+ remove fragment selection geo)\r\n    for (let i = 0; i < selection.children.length; ++i) {\r\n      const node = selection.children[i];\r\n      if (node.visible) {\r\n        selection.remove(node);\r\n      } else {\r\n        node.visible = true;\r\n      }\r\n    }\r\n\r\n    visual.finalizeEdit();\r\n  }\r\n\r\n  isFreeRotationAllowed() {\r\n    return (this._fragmentBoundAtoms.length < 2);\r\n  }\r\n\r\n  getAltObj() {\r\n    const res = {\r\n      objects: [],\r\n      pivot: new THREE.Vector3(0, 0, 0),\r\n    };\r\n\r\n    res.objects.push(this._fragmentGeo, this._fragmentSelectionGeo);\r\n\r\n    const boundAtoms = this._fragmentBoundAtoms;\r\n    if (boundAtoms.length === 1) {\r\n      if (boundAtoms[0].bonds.length === 1) {\r\n        // single external bond allows rotation about bond axis\r\n        const bond = boundAtoms[0].bonds[0];\r\n        res.axis = new THREE.Vector3().subVectors(bond._right.position, bond._left.position);\r\n        res.axis.normalize();\r\n        res.axis.transformDirection(this._complexVisual.matrixWorld);\r\n      }\r\n    } else if (boundAtoms.length === 2) {\r\n      // two bound atoms allow rotation only about axis running through their centers\r\n      res.axis = new THREE.Vector3().subVectors(boundAtoms[1].position, boundAtoms[0].position);\r\n      res.axis.normalize();\r\n      res.axis.transformDirection(this._complexVisual.matrixWorld);\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  _getSelectionBorderAtoms() {\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    const selectionMask = 1 << this._complexVisual.getSelectionBit();\r\n    const atomHash = {};\r\n\r\n    complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          atomHash[bond._left.index] = 1;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        atomHash[bond._right.index] = 1;\r\n      }\r\n    });\r\n\r\n    const atoms = [];\r\n    const keys = Object.keys(atomHash);\r\n    for (let i = 0, n = keys.length; i < n; ++i) {\r\n      const idx = keys[i];\r\n      atoms.push(complex._atoms[idx]);\r\n    }\r\n\r\n    return atoms;\r\n  }\r\n\r\n  _bakeAtomTransform(matrix, mask) {\r\n    this._complexVisual.getComplex().forEachAtom((atom) => {\r\n      if (atom.mask & mask) {\r\n        atom.position.applyMatrix4(matrix);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\nexport default {\r\n  ComponentEditor: ComplexComponentEditor,\r\n  FragmentEditor: ComplexFragmentEditor,\r\n};\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from './utils';\r\nimport logger from './utils/logger';\r\nimport chem from './chem';\r\nimport settings from './settings';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport modes from './gfx/modes';\r\nimport colorers from './gfx/colorers';\r\nimport palettes from './gfx/palettes';\r\nimport materials from './gfx/materials';\r\nimport Representation from './gfx/Representation';\r\nimport Visual from './Visual';\r\nimport ComplexVisualEdit from './ComplexVisualEdit';\r\n\r\nconst { selectors } = chem;\r\n\r\nfunction lookupAndCreate(entityList, specs) {\r\n  if (!Array.isArray(specs)) {\r\n    specs = [specs];\r\n  }\r\n  const [id, opts] = specs;\r\n  const Entity = entityList.get(id) || entityList.first;\r\n  return new Entity(opts);\r\n}\r\n\r\nclass ComplexVisual extends Visual {\r\n  constructor(name, dataSource) {\r\n    super(name, dataSource);\r\n    this._complex = dataSource;\r\n\r\n    /** @type {Representation[]} */\r\n    this._reprList = [];\r\n    /** @type {?Representation} */\r\n    this._repr = null;\r\n    this._reprListChanged = true;\r\n\r\n    this._selectionBit = 0;\r\n    this._reprUsedBits = 0;\r\n    this._selectionCount = 0;\r\n\r\n    this._selectionGeometry = new THREE.Group();\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this._complex.getBoundaries();\r\n  }\r\n\r\n  release() {\r\n    if (this._selectionGeometry.parent) {\r\n      this._selectionGeometry.remove(this._selectionGeometry);\r\n    }\r\n    Visual.prototype.release.call(this);\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  getSelectionCount() {\r\n    return this._selectionCount;\r\n  }\r\n\r\n  getSelectionGeo() {\r\n    return this._selectionGeometry;\r\n  }\r\n\r\n  getSelectionBit() {\r\n    return this._selectionBit;\r\n  }\r\n\r\n  getEditor() {\r\n    return this._editor;\r\n  }\r\n\r\n  resetReps(reps) {\r\n    // Create all necessary representations\r\n    if (this._complex) {\r\n      this._complex.clearAtomBits(~0);\r\n    }\r\n    this._reprListChanged = true;\r\n    this._reprUsedBits = 0;\r\n    this._reprList.length = reps.length;\r\n    for (let i = 0, n = reps.length; i < n; ++i) {\r\n      const rep = reps[i];\r\n\r\n      let selector;\r\n      let selectorString;\r\n      if (typeof rep.selector === 'string') {\r\n        selectorString = rep.selector;\r\n        ({ selector } = selectors.parse(selectorString));\r\n      } else if (typeof rep.selector === 'undefined') {\r\n        selectorString = settings.now.presets.default[0].selector;\r\n        ({ selector } = selectors.parse(selectorString));\r\n      } else {\r\n        ({ selector } = rep);\r\n        selectorString = selector.toString();\r\n      }\r\n      const mode = lookupAndCreate(modes, rep.mode);\r\n      const colorer = lookupAndCreate(colorers, rep.colorer);\r\n      const material = materials.get(rep.material) || materials.first;\r\n\r\n      this._reprList[i] = new Representation(i, mode, colorer, selector);\r\n      this._reprList[i].setMaterialPreset(material);\r\n      this._reprList[i].selectorString = selectorString;\r\n\r\n      if (this._complex) {\r\n        this._complex.markAtoms(selector, 1 << i);\r\n      }\r\n\r\n      this._reprUsedBits |= 1 << i;\r\n    }\r\n    this._repr = reps.length > 0 ? this._reprList[0] : null;\r\n\r\n    this._selectionBit = reps.length;\r\n    this._reprUsedBits |= 1 << this._selectionBit; // selection uses one bit\r\n    this._selectionCount = 0;\r\n\r\n    if (this._complex) {\r\n      this._complex.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get number of representations created so far.\r\n   * @returns {number} Number of reps.\r\n   */\r\n  repCount() {\r\n    return this._reprList.length;\r\n  }\r\n\r\n  /**\r\n   * Get or set the current representation index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @returns {number} The current index.\r\n   */\r\n  repCurrent(index) {\r\n    if (index >= 0 && index < this._reprList.length) {\r\n      this._repr = this._reprList[index];\r\n    } else {\r\n      index = this._reprList.indexOf(this._repr);\r\n    }\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * Get or set representation by index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @param {object=} rep - Optional representation description.\r\n   * @param {string=} rep.selector - Selector string.\r\n   * @param {string=} rep.mode - Mode id.\r\n   * @param {string=} rep.colorer - Colorer id.\r\n   * @param {string=} rep.material - Material id.\r\n   * @returns {Object} {desc, index, status} field desc contains rep description, index - index of correspondent rep,\r\n   * status - one of three strings: 'created', 'changed', ''. 'created' means new rep was created during this function,\r\n   * 'changed' - rep was changed during this function. '' - something else.\r\n   */\r\n  rep(index, rep) {\r\n    // if index is missing then it is the current\r\n    if (!rep && (index === undefined || index instanceof Object)) {\r\n      rep = index;\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index > this._reprList.length) {\r\n      logger.error(`Rep ${index} does not exist!`);\r\n      return null;\r\n    }\r\n\r\n    // a special case of adding just after the end\r\n    if (index === this._reprList.length) {\r\n      const res = this.repAdd(rep);\r\n      logger.warn(`Rep ${index} does not exist! New representation was created.`);\r\n      return { desc: res.desc, index, status: 'created' };\r\n    }\r\n\r\n    // gather description\r\n    const target = this._reprList[index];\r\n    const desc = {\r\n      selector: target.selectorString,\r\n      mode: target.mode.identify(),\r\n      colorer: target.colorer.identify(),\r\n      material: target.materialPreset.id,\r\n    };\r\n\r\n    // modification is requested\r\n    if (rep) {\r\n      // modify\r\n      const diff = target.change(rep, this._complex,\r\n        lookupAndCreate(modes, rep.mode),\r\n        lookupAndCreate(colorers, rep.colorer));\r\n\r\n      // something was changed\r\n      if (!_.isEmpty(diff)) {\r\n        target.needsRebuild = true;\r\n        for (const key in diff) {\r\n          if (diff.hasOwnProperty(key)) {\r\n            desc[key] = diff[key];\r\n            logger.debug(`rep[${index}].${key} changed to ${diff[key]}`);\r\n          }\r\n        }\r\n\r\n        // safety trick: lower resolution for surface modes\r\n        if (diff.mode && target.mode.isSurface\r\n          && (settings.now.resolution === 'ultra' || settings.now.resolution === 'high')) {\r\n          logger.report('Surface resolution was changed to \"medium\" to avoid hang-ups.');\r\n          settings.set('resolution', 'medium');\r\n        }\r\n        return { desc, index, status: 'changed' };\r\n      }\r\n    }\r\n    return { desc, index, status: '' };\r\n  }\r\n\r\n\r\n  /**\r\n   * Get representation (not just description) by index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @returns {?object} Representation.\r\n   */\r\n  repGet(index) {\r\n    // if index is missing then it is the current\r\n    if (index === undefined || index instanceof Object) {\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index >= this._reprList.length) {\r\n      return null;\r\n    }\r\n\r\n    return this._reprList[index];\r\n  }\r\n\r\n  _getFreeReprIdx() {\r\n    let bits = this._reprUsedBits;\r\n    for (let i = 0; i <= ComplexVisual.NUM_REPRESENTATION_BITS; ++i, bits >>= 1) {\r\n      if ((bits & 1) === 0) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Add new representation.\r\n   * @param {object=} rep - Representation description.\r\n   * @returns {Object} {desc, index} field desc contains added rep description, index - index of this rep.\r\n   */\r\n  repAdd(rep) {\r\n    if (this._reprList.length >= ComplexVisual.NUM_REPRESENTATION_BITS) {\r\n      return null;\r\n    }\r\n\r\n    const newSelectionBit = this._getFreeReprIdx();\r\n    if (newSelectionBit < 0) {\r\n      return null; // no more slots for representations\r\n    }\r\n\r\n    const originalSelection = this.buildSelectorFromMask(1 << this._selectionBit);\r\n\r\n    // Fill in default values\r\n    const def = settings.now.presets.default[0];\r\n    const desc = _.merge({\r\n      selector: def.selector,\r\n      mode: def.mode,\r\n      colorer: def.colorer,\r\n      material: def.material,\r\n    }, rep);\r\n\r\n    const selector = (typeof desc.selector === 'string') ? selectors.parse(desc.selector).selector : desc.selector;\r\n    const target = new Representation(\r\n      this._selectionBit,\r\n      lookupAndCreate(modes, desc.mode),\r\n      lookupAndCreate(colorers, desc.colorer),\r\n      selector,\r\n    );\r\n    target.selectorString = selector.toString();\r\n    target.setMaterialPreset(materials.get(desc.material));\r\n    target.markAtoms(this._complex);\r\n    this._reprList.push(target);\r\n\r\n    // change selection bit\r\n    this._selectionBit = newSelectionBit;\r\n    this._reprUsedBits |= 1 << this._selectionBit;\r\n\r\n    // restore selection using new selection bit\r\n    this._complex.markAtoms(originalSelection, 1 << this._selectionBit);\r\n\r\n    return { desc, index: this._reprList.length - 1 };\r\n  }\r\n\r\n  /**\r\n   * Remove representation.\r\n   * @param {number=} index - Zero-based representation index.\r\n   */\r\n  repRemove(index) {\r\n    if (index === undefined) {\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // catch out of bounds case\r\n    let count = this._reprList.length;\r\n    if (index < 0 || index >= count || count <= 1) { // do not allow to remove the single rep\r\n      return;\r\n    }\r\n\r\n    const target = this._reprList[index];\r\n    target.unmarkAtoms(this._complex);\r\n    this._reprUsedBits &= ~(1 << target.index);\r\n\r\n    this._reprList.splice(index, 1);\r\n\r\n    // update current rep\r\n    if (target === this._repr) {\r\n      --count;\r\n      index = index < count ? index : count - 1;\r\n      this._repr = this._reprList[index];\r\n    }\r\n    this._reprListChanged = true;\r\n  }\r\n\r\n  /**\r\n   * Hide representation.\r\n   * @param {number} index - Zero-based representation index.\r\n   * @param {boolean=} hide - Specify false to make rep visible, true to hide (by default).\r\n   */\r\n  repHide(index, hide) {\r\n    if (hide === undefined) {\r\n      hide = true;\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index >= this._reprList.length) {\r\n      return;\r\n    }\r\n\r\n    const target = this._reprList[index];\r\n    target.show(!hide);\r\n  }\r\n\r\n  /**\r\n   * Select atoms with selector\r\n   * @param {Selector} selector - selector\r\n   * @param {boolean=} append - true to append selection atoms to current selection, false to rewrite selection\r\n   */\r\n  select(selector, append) {\r\n    if (append) {\r\n      this._selectionCount += this._complex.markAtomsAdditionally(selector, 1 << this._selectionBit);\r\n    } else {\r\n      this._selectionCount = this._complex.markAtoms(selector, 1 << this._selectionBit);\r\n    }\r\n    this._complex.updateStructuresMask();\r\n    this.rebuildSelectionGeometry();\r\n  }\r\n\r\n  resetSelectionMask() {\r\n    if (this._selectionCount !== 0) {\r\n      this._selectionCount = 0;\r\n      if (this._complex) {\r\n        this._complex.clearAtomBits(1 << this._selectionBit);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSelectionMask(pickedObj) {\r\n    const self = this;\r\n    const { atom } = pickedObj;\r\n    let { residue, chain, molecule } = pickedObj;\r\n    const setMask = 1 << this._selectionBit;\r\n    const clearMask = ~setMask;\r\n\r\n    if (atom) {\r\n      residue = atom.residue;\r\n      chain = residue._chain;\r\n      molecule = residue._molecule;\r\n\r\n      if (atom.mask & setMask) {\r\n        atom.mask &= clearMask;\r\n        residue._mask &= clearMask;\r\n        chain._mask &= clearMask;\r\n        if (molecule) {\r\n          molecule.mask &= clearMask;\r\n        }\r\n        this._selectionCount--;\r\n      } else {\r\n        atom.mask |= setMask;\r\n        this._selectionCount++;\r\n\r\n        // select residue if all atoms in it are selected\r\n        residue.collectMask();\r\n        // select chain and molecule if all residues in it are selected\r\n        chain.collectMask();\r\n        if (molecule) {\r\n          molecule.collectMask();\r\n        }\r\n      }\r\n    } else if (residue) {\r\n      chain = residue._chain;\r\n      molecule = residue._molecule;\r\n\r\n      if (residue._mask & setMask) {\r\n        residue._mask &= clearMask;\r\n        chain._mask &= clearMask;\r\n        residue.forEachAtom((a) => {\r\n          if (a.mask & setMask) {\r\n            a.mask &= clearMask;\r\n            self._selectionCount--;\r\n          }\r\n        });\r\n      } else {\r\n        residue._mask |= setMask;\r\n        residue.forEachAtom((a) => {\r\n          if (!(a.mask & setMask)) {\r\n            a.mask |= setMask;\r\n            self._selectionCount++;\r\n          }\r\n        });\r\n\r\n        // select chain and molecule if all residues in it are selected\r\n        chain.collectMask();\r\n        if (molecule) {\r\n          molecule.collectMask();\r\n        }\r\n      }\r\n    } else if (chain || molecule) {\r\n      const obj = chain || molecule;\r\n      if (obj._mask & setMask) {\r\n        obj._mask &= clearMask;\r\n        obj.forEachResidue((r) => {\r\n          if (r._mask & setMask) {\r\n            r._mask &= clearMask;\r\n            r.forEachAtom((a) => {\r\n              if (a.mask & setMask) {\r\n                a.mask &= clearMask;\r\n                self._selectionCount--;\r\n              }\r\n            });\r\n            r._mask &= clearMask;\r\n          }\r\n        });\r\n      } else {\r\n        obj._mask |= setMask;\r\n        obj.forEachResidue((r) => {\r\n          if (!(r._mask & setMask)) {\r\n            r._mask |= setMask;\r\n            r.forEachAtom((a) => {\r\n              if (!(a.mask & setMask)) {\r\n                a.mask |= setMask;\r\n                self._selectionCount++;\r\n              }\r\n            });\r\n            const otherObj = chain ? r.getMolecule() : r.getChain();\r\n            if (otherObj) {\r\n              otherObj.collectMask();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      this.resetSelectionMask();\r\n    }\r\n  }\r\n\r\n  expandSelection() {\r\n    const self = this;\r\n    const selectionMask = 1 << this._selectionBit;\r\n    const tmpMask = 1 << 31;\r\n\r\n    // mark atoms to add\r\n    this._complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          bond._right.mask |= tmpMask;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        bond._left.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // select marked atoms\r\n    const deselectionMask = ~tmpMask;\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & tmpMask) {\r\n        atom.mask = (atom.mask & deselectionMask) | selectionMask;\r\n        ++self._selectionCount;\r\n      }\r\n    });\r\n\r\n    this._complex.updateStructuresMask();\r\n  }\r\n\r\n  shrinkSelection() {\r\n    const self = this;\r\n    const selectionMask = 1 << this._selectionBit;\r\n    const tmpMask = 1 << 31;\r\n\r\n    // mark atoms neighbouring to unselected ones\r\n    this._complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          bond._left.mask |= tmpMask;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        bond._right.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // mark hanging atoms\r\n    this._complex.forEachAtom((atom) => {\r\n      if ((atom.mask & selectionMask) && (atom.bonds.length === 1)) {\r\n        atom.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // deselect marked atoms\r\n    const deselectionMask = ~(selectionMask | tmpMask);\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & tmpMask) {\r\n        atom.mask &= deselectionMask;\r\n        --self._selectionCount;\r\n      }\r\n    });\r\n\r\n    this._complex.updateStructuresMask();\r\n  }\r\n\r\n  getSelectedComponent() {\r\n    const selectionMask = 1 << this._selectionBit;\r\n\r\n    let component = null;\r\n    let multiple = false;\r\n\r\n    // find which component is selected (exclusively)\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & selectionMask) {\r\n        if (component === null) {\r\n          component = atom.residue._component;\r\n        } else if (component !== atom.residue._component) {\r\n          multiple = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    return multiple ? null : component;\r\n  }\r\n\r\n  getSelectionCenter(center, includesAtom, selRule) {\r\n    center.set(0.0, 0.0, 0.0);\r\n    let count = 0;\r\n\r\n    this._complex.forEachAtom((atom) => {\r\n      if (includesAtom(atom, selRule)) {\r\n        center.add(atom.position);\r\n        count++;\r\n      }\r\n    });\r\n    if (count === 0) {\r\n      return false;\r\n    }\r\n    center.divideScalar(count);\r\n    center.applyMatrix4(this.matrix);\r\n    return true;\r\n  }\r\n\r\n  needsRebuild() {\r\n    if (this._reprListChanged) {\r\n      return true;\r\n    }\r\n    const reprList = this._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      const repr = reprList[i];\r\n      if (repr.needsRebuild) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Rebuild molecule geometry asynchronously.\r\n   */\r\n  rebuild() {\r\n    const self = this;\r\n\r\n    // Destroy current geometry\r\n    gfxutils.clearTree(this);\r\n\r\n    return new Promise(((resolve) => {\r\n      // Nothing to do?\r\n      const complex = self._complex;\r\n      if (!complex) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      let errorOccured = false;\r\n      setTimeout(() => {\r\n        console.time('build');\r\n        const reprList = self._reprList;\r\n        const palette = palettes.get(settings.now.palette) || palettes.first;\r\n        let hasGeometry = false;\r\n        for (let i = 0, n = reprList.length; i < n; ++i) {\r\n          const repr = reprList[i];\r\n          repr.colorer.palette = palette;\r\n\r\n          if (repr.needsRebuild) {\r\n            repr.reset();\r\n\r\n            try {\r\n              repr.buildGeometry(complex);\r\n            } catch (e) {\r\n              if (e instanceof utils.OutOfMemoryError) {\r\n                repr.needsRebuild = false;\r\n                repr.reset();\r\n                logger.error(`Not enough memory to build geometry for representation ${repr.index + 1}`);\r\n                errorOccured = true;\r\n              } else {\r\n                throw e;\r\n              }\r\n            }\r\n\r\n            if (DEBUG && !errorOccured) {\r\n              logger.debug(`Triangles count: ${gfxutils.countTriangles(repr.geo)}`);\r\n            }\r\n          }\r\n\r\n          hasGeometry = errorOccured || hasGeometry || gfxutils.groupHasGeometryToRender(repr.geo);\r\n\r\n          if (repr.geo) {\r\n            self.add(repr.geo);\r\n          }\r\n        }\r\n\r\n        self._reprListChanged = false;\r\n\r\n        console.timeEnd('build');\r\n        resolve();\r\n      }, 10);\r\n    }));\r\n  }\r\n\r\n  setNeedsRebuild() {\r\n    // invalidate all representations\r\n    const reprList = this._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      reprList[i].needsRebuild = true;\r\n    }\r\n  }\r\n\r\n  rebuildSelectionGeometry() {\r\n    const mask = 1 << this._selectionBit;\r\n\r\n    gfxutils.clearTree(this._selectionGeometry);\r\n\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const repr = this._reprList[i];\r\n      const sg = repr.buildSelectionGeometry(mask);\r\n      if (!sg) {\r\n        continue;\r\n      }\r\n\r\n      this._selectionGeometry.add(sg);\r\n      for (let j = 0; j < sg.children.length; j++) {\r\n        const m = sg.children[j];\r\n\r\n        // copy component transform (that's not applied yet)\r\n        // TODO make this code obsolete, accessing editor is bad\r\n        if (this._editor && this._editor._componentTransforms) {\r\n          const t = this._editor._componentTransforms[m._component._index];\r\n          if (t) {\r\n            m.position.copy(t.position);\r\n            m.quaternion.copy(t.quaternion);\r\n          }\r\n        }\r\n      }\r\n\r\n      gfxutils.applySelectionMaterial(sg);\r\n    }\r\n  }\r\n\r\n  _buildSelectorFromSortedLists(atoms, residues, chains) {\r\n    const complex = this._complex;\r\n\r\n    function optimizeList(list) {\r\n      const result = [];\r\n      let k = 0;\r\n      let first = NaN;\r\n      let last = NaN;\r\n      for (let i = 0, n = list.length; i < n; ++i) {\r\n        const value = list[i];\r\n        if (value === last + 1) {\r\n          last = value;\r\n        } else {\r\n          if (!Number.isNaN(first)) {\r\n            result[k++] = new selectors.Range(first, last);\r\n          }\r\n          first = last = value;\r\n        }\r\n      }\r\n      if (!Number.isNaN(first)) {\r\n        result[k] = new selectors.Range(first, last);\r\n      }\r\n      return result;\r\n    }\r\n\r\n    let expression = null;\r\n    if (chains.length === complex._chains.length) {\r\n      expression = selectors.all();\r\n    } else {\r\n      let selector;\r\n      if (chains.length > 0) {\r\n        selector = selectors.chain(chains);\r\n        expression = expression ? selectors.or(expression, selector) : selector;// NOSONAR\r\n      }\r\n      if (Object.keys(residues).length > 0) {\r\n        for (const ch in residues) {\r\n          if (residues.hasOwnProperty(ch)) {\r\n            selector = selectors.and(\r\n              selectors.chain(ch),\r\n              selectors.residx(optimizeList(residues[ch])),\r\n            );\r\n            expression = expression ? selectors.or(expression, selector) : selector;\r\n          }\r\n        }\r\n      }\r\n      if (atoms.length > 0) {\r\n        selector = selectors.serial(optimizeList(atoms));\r\n        expression = expression ? selectors.or(expression, selector) : selector;\r\n      }\r\n\r\n      if (!expression) {\r\n        expression = selectors.none();\r\n      }\r\n    }\r\n\r\n    return expression;\r\n  }\r\n\r\n  buildSelectorFromMask(mask) {\r\n    const complex = this._complex;\r\n    const chains = [];\r\n    const residues = {};\r\n    const atoms = [];\r\n\r\n    complex.forEachChain((chain) => {\r\n      if (chain._mask & mask) {\r\n        chains.push(chain._name);\r\n      }\r\n    });\r\n\r\n    complex.forEachResidue((residue) => {\r\n      if (residue._mask & mask && !(residue._chain._mask & mask)) {\r\n        const c = residue._chain._name;\r\n        if (!(c in residues)) {\r\n          residues[c] = [residue._index];\r\n        } else {\r\n          residues[c].push(residue._index);\r\n        }\r\n      }\r\n    });\r\n\r\n    complex.forEachAtom((atom) => {\r\n      if (atom.mask & mask && !(atom.residue._mask & mask)) {\r\n        atoms.push(atom.serial);\r\n      }\r\n    });\r\n\r\n    return this._buildSelectorFromSortedLists(atoms, residues, chains);\r\n  }\r\n\r\n  forSelectedResidues(process) {\r\n    const selectionMask = 1 << this._selectionBit;\r\n    this._complex.forEachResidue((residue) => {\r\n      if (residue._mask & selectionMask) {\r\n        process(residue);\r\n      }\r\n    });\r\n  }\r\n\r\n  beginComponentEdit() {\r\n    if (this._editor) {\r\n      return null;\r\n    }\r\n\r\n    const editor = new ComplexVisualEdit.ComponentEditor(this);\r\n    if (!editor.begin()) {\r\n      return null;\r\n    }\r\n\r\n    this._editor = editor;\r\n    return editor;\r\n  }\r\n\r\n  beginFragmentEdit() {\r\n    if (this._editor) {\r\n      return null;\r\n    }\r\n\r\n    const editor = new ComplexVisualEdit.FragmentEditor(this);\r\n    if (!editor.begin()) {\r\n      return null;\r\n    }\r\n\r\n    this._editor = editor;\r\n    return editor;\r\n  }\r\n\r\n  // should only be called by editors\r\n  finalizeEdit() {\r\n    this._editor = null;\r\n  }\r\n\r\n  setMaterialValues(values, needTraverse = false, process = undefined) {\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const rep = this._reprList[i];\r\n      rep.material.setValues(values);\r\n      if (needTraverse) {\r\n        rep.geo.traverse((object) => {\r\n          if (object instanceof THREE.Mesh) {\r\n            object.material.setValues(values);\r\n\r\n            if (process !== undefined) {\r\n              process(object);\r\n            }\r\n\r\n            object.material.needsUpdate = true;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  setUberOptions(values) {\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const rep = this._reprList[i];\r\n      rep.material.setUberOptions(values);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build selector that contains all atoms within given distance from group of atoms\r\n   * @param {Selector} selector - selector describing source group of atoms\r\n   * @param {number} radius - distance\r\n   * @returns {Selector} selector describing result group of atoms\r\n   */\r\n  within(selector, radius) {\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return false;\r\n    }\r\n\r\n    // mark atoms of the group as selected\r\n    const selectionMask = 1 << this._selectionBit;\r\n    this._complex.markAtoms(selector, selectionMask);\r\n\r\n    // mark all atoms within distance as selected\r\n    if (vw) {\r\n      vw.forEachAtomWithinDistFromMasked(this._complex, selectionMask, Number(radius), (atom) => {\r\n        atom.mask |= selectionMask;\r\n      });\r\n    }\r\n\r\n    // update selection count\r\n    this._selectionCount = this._complex.countAtomsByMask(selectionMask);\r\n\r\n    // update secondary structure mask\r\n    this._complex.updateStructuresMask();\r\n\r\n    return this.buildSelectorFromMask(selectionMask);\r\n  }\r\n}\r\n// 32 bits = 30 bits for reps + 1 for selection + 1 for selection expansion\r\nComplexVisual.NUM_REPRESENTATION_BITS = 30;\r\n\r\nexport default ComplexVisual;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexVolumeFaces from './VolumeFaces.vert';\r\nimport fragmentVolumeFaces from './VolumeFaces.frag';\r\nimport vertexVolume from './Volume.vert';\r\nimport fragmentVolume from './Volume.frag';\r\nimport vertexFarPlane from './VolumeFarPlane.vert';\r\nimport fragmentFarPlane from './VolumeFarPlane.frag';\r\nimport settings from '../../settings';\r\n\r\nconst volumeUniforms = THREE.UniformsUtils.merge([\r\n  {\r\n    volumeDim: { type: 'v3', value: new THREE.Vector3(512, 512, 512) },\r\n    tileTex: { type: 't', value: null },\r\n    tileTexSize: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n    tileStride: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n\r\n    boxAngles: { type: 'v3', value: new THREE.Vector3(1, 1, 1) },\r\n    delta: { type: 'v3', value: new THREE.Vector3(0, 0, 0) },\r\n\r\n    _isoLevel0: { type: 'v2', value: new THREE.Vector3(0.5, 0.75, 1.0) },\r\n    _flipV: { type: 'f', value: 0.0 },\r\n    _BFLeft: { type: 't', value: null },\r\n    _BFRight: { type: 't', value: null },\r\n    _FFLeft: { type: 't', value: null },\r\n    _FFRight: { type: 't', value: null },\r\n    _WFFLeft: { type: 't', value: null },\r\n    _WFFRight: { type: 't', value: null },\r\n  },\r\n]);\r\n\r\nfunction overrideUniforms(params, defUniforms) {\r\n  const uniforms = THREE.UniformsUtils.clone(defUniforms);\r\n  for (const p in params) {\r\n    if (uniforms.hasOwnProperty(p)) {\r\n      uniforms[p].value = params[p];\r\n    }\r\n  }\r\n  return uniforms;\r\n}\r\n\r\nfunction facesPosMaterialParams(params, sideType) {\r\n  return {\r\n    uniforms: overrideUniforms(params, {}),\r\n    vertexShader: vertexVolumeFaces,\r\n    fragmentShader: fragmentVolumeFaces,\r\n    transparent: false,\r\n    depthTest: false,\r\n    depthWrite: false,\r\n    side: sideType,\r\n  };\r\n}\r\n\r\nclass BackFacePosMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const backFaceParams = facesPosMaterialParams(params, THREE.BackSide);\r\n    super(backFaceParams);\r\n  }\r\n}\r\n\r\nclass ShaderParams {\r\n  constructor(params, uniforms, vertexShader, fragmentShader) {\r\n    this.uniforms = overrideUniforms(params, uniforms);\r\n    this.vertexShader = vertexShader;\r\n    this.fragmentShader = fragmentShader;\r\n    this.transparent = false;\r\n    this.depthTest = false;\r\n    this.depthWrite = false;\r\n    this.side = THREE.FrontSide;\r\n  }\r\n}\r\n\r\nclass BackFacePosMaterialFarPlane extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const matUniforms = THREE.UniformsUtils.merge([\r\n      {\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        farZ: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        matWorld2Volume: { type: '4fv', value: new THREE.Matrix4() },\r\n      },\r\n    ]);\r\n\r\n    const shaderParams = new ShaderParams(params, matUniforms, vertexFarPlane, fragmentFarPlane);\r\n    super(shaderParams);\r\n  }\r\n}\r\n\r\nclass FrontFacePosMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const frontFaceParams = facesPosMaterialParams(params, THREE.FrontSide);\r\n    super(frontFaceParams);\r\n  }\r\n}\r\n\r\nclass VolumeMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const shaderParams = new ShaderParams(params, volumeUniforms, vertexVolume, fragmentVolume);\r\n    shaderParams.transparent = true;\r\n    shaderParams.depthTest = true;\r\n\r\n    super(shaderParams);\r\n    this.updateDefines();\r\n  }\r\n\r\n  updateDefines() {\r\n    this.defines = {\r\n      ISO_MODE: settings.now.modes.VD.isoMode,\r\n      STEPS_COUNT: settings.now.modes.VD.polyComplexity[settings.now.resolution] * 100,\r\n    };\r\n    this.needsUpdate = true;\r\n  }\r\n}\r\n\r\nexport default {\r\n  BackFacePosMaterial,\r\n  BackFacePosMaterialFarPlane,\r\n  FrontFacePosMaterial,\r\n  VolumeMaterial,\r\n};\r\n","import * as THREE from 'three';\r\nimport VolumeMaterial from './shaders/VolumeMaterial';\r\nimport settings from '../settings';\r\n\r\nclass VolumeMesh extends THREE.Mesh {\r\n  volumeInfo = {}; // data for noise filter\r\n\r\n  constructor() {\r\n    const geo = new THREE.BufferGeometry();\r\n    super(geo);\r\n    this.clipPlane = new THREE.Plane();\r\n    const size = new THREE.Vector3(0.5, 0.5, 0.5);\r\n    this.size = size;\r\n\r\n    this.cullFlag = [\r\n      true, true, true, true,\r\n      true, true, true, true,\r\n      false, false, false, false, false, false,\r\n    ];\r\n\r\n    this.faces = [\r\n      { indices: [], norm: new THREE.Vector3(0, 0, -1) },\r\n      { indices: [], norm: new THREE.Vector3(0, 0, 1) },\r\n      { indices: [], norm: new THREE.Vector3(0, -1, 0) },\r\n      { indices: [], norm: new THREE.Vector3(0, 1, 0) },\r\n      { indices: [], norm: new THREE.Vector3(-1, 0, 0) },\r\n      { indices: [], norm: new THREE.Vector3(1, 0, 0) },\r\n      { indices: [], norm: new THREE.Vector3(0, 0, 0) },\r\n    ];\r\n\r\n    this.vertices = [\r\n      new THREE.Vector3(-size.x, -size.y, -size.z),\r\n      new THREE.Vector3(-size.x, size.y, -size.z),\r\n      new THREE.Vector3(size.x, -size.y, -size.z),\r\n      new THREE.Vector3(size.x, size.y, -size.z),\r\n      new THREE.Vector3(-size.x, -size.y, size.z),\r\n      new THREE.Vector3(-size.x, size.y, size.z),\r\n      new THREE.Vector3(size.x, -size.y, size.z),\r\n      new THREE.Vector3(size.x, size.y, size.z),\r\n      new THREE.Vector3(0.0, 0.0, 0.0), // Placeholder for section\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n    ];\r\n\r\n    geo.setAttribute('position', new THREE.BufferAttribute(new Float32Array(this.vertices.length * 3), 3));\r\n\r\n    this.name = 'VolumeMesh';\r\n  }\r\n\r\n  static _corners = [\r\n    // x, y, z, edge1, edge2, edge3\r\n    [-1, -1, -1, 0, 4, 8],\r\n    [1, -1, -1, 0, 5, 9],\r\n    [1, 1, -1, 1, 5, 10],\r\n    [-1, 1, -1, 1, 4, 11],\r\n    [-1, -1, 1, 2, 6, 8],\r\n    [1, -1, 1, 2, 7, 9],\r\n    [1, 1, 1, 3, 7, 10],\r\n    [-1, 1, 1, 3, 6, 11],\r\n  ];\r\n\r\n  static _edges = [\r\n    // corner1, corner2, center_x, center_y, center_z\r\n    [0, 1, 0, -1, -1],\r\n    [2, 3, 0, 1, -1],\r\n    [4, 5, 0, -1, 1],\r\n    [6, 7, 0, 1, 1],\r\n    [0, 3, -1, 0, -1],\r\n    [1, 2, 1, 0, -1],\r\n    [4, 7, -1, 0, 1],\r\n    [5, 6, 1, 0, 1],\r\n    [0, 4, -1, -1, 0],\r\n    [1, 5, 1, -1, 0],\r\n    [2, 6, -1, 1, 0],\r\n    [3, 7, 1, 1, 0],\r\n  ];\r\n\r\n  static _edgeIntersections = (function () {\r\n    const edgeIntersections = [];\r\n    for (let j = 0; j < 12; ++j) {\r\n      edgeIntersections.push(new THREE.Vector3());\r\n    }\r\n    return edgeIntersections;\r\n  }());\r\n\r\n  _updateVertices() {\r\n    // Algorithm:\r\n    // 1. Get plane parameters\r\n    // 2. Compute culling flags for all vertices\r\n    // 3. If intersection occurs => compute from 3 to 6 intersection points\r\n    const corners = VolumeMesh._corners;\r\n    const edges = VolumeMesh._edges;\r\n    const edgeIntersections = VolumeMesh._edgeIntersections;\r\n\r\n    let i;\r\n\r\n    const norm = this.clipPlane.normal;\r\n    const D = this.clipPlane.constant;\r\n\r\n    const vert = this.vertices;\r\n    const { size } = this;\r\n\r\n    const cornerMark = [0, 0, 0, 0, 0, 0, 0, 0];\r\n    const edgeMark = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\r\n    const curEdge = new THREE.Vector3();\r\n    let curEdgeInter = null;\r\n\r\n    function CheckX() {\r\n      if (norm.x === 0) return 0;\r\n      const x = -(norm.dot(curEdge) + D) / norm.x;\r\n      if (-size.x <= x && x <= size.x) {\r\n        curEdgeInter.set(x, curEdge.y, curEdge.z);\r\n        if (x === size.x) return 2;\r\n        if (x === -size.x) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    function CheckY() {\r\n      if (norm.y === 0) return 0;\r\n      const y = -(norm.dot(curEdge) + D) / norm.y;\r\n      if (-size.y <= y && y <= size.y) {\r\n        curEdgeInter.set(curEdge.x, y, curEdge.z);\r\n        if (y === size.y) return 2;\r\n        if (y === -size.y) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    function CheckZ() {\r\n      if (norm.z === 0) return 0;\r\n      const z = -(norm.dot(curEdge) + D) / norm.z;\r\n      if (-size.z <= z && z <= size.z) {\r\n        curEdgeInter.set(curEdge.x, curEdge.y, z);\r\n        if (z === size.z) return 2;\r\n        if (z === -size.z) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    // for each edge\r\n    for (let curEdgeIdx = 0; curEdgeIdx < 12; ++curEdgeIdx) {\r\n      const curEdgeSource = edges[curEdgeIdx];\r\n      curEdgeInter = edgeIntersections[curEdgeIdx];\r\n\r\n      curEdge.set(curEdgeSource[2], curEdgeSource[3], curEdgeSource[4]);\r\n      curEdge.multiply(size);\r\n\r\n      // calculate intersection point\r\n      let flag = 0;\r\n      if (curEdgeSource[2] === 0) flag = CheckX();\r\n      if (curEdgeSource[3] === 0) flag = CheckY();\r\n      if (curEdgeSource[4] === 0) flag = CheckZ();\r\n\r\n      // mark corresponding corner (if plane cuts through one)\r\n      if (flag === -2) {\r\n        cornerMark[curEdgeSource[0]] = 1;\r\n      } else if (flag === 2) {\r\n        cornerMark[curEdgeSource[1]] = 1;\r\n      } else if (flag === 0) {\r\n        // edge is not intersected by the plane (doesn't produce a vertex)\r\n        edgeMark[curEdgeIdx] = 0;\r\n      }\r\n    }\r\n\r\n    const face = {\r\n      indices: [],\r\n      norm: norm.clone().negate(),\r\n    };\r\n\r\n    let nextVertex = 8;\r\n\r\n    // for each marked corner\r\n    for (i = 0; i < 8; ++i) {\r\n      if (cornerMark[i] === 1) {\r\n        // add corner as vertex to the face\r\n        vert[nextVertex].set(corners[i][0], corners[i][1], corners[i][2]).multiply(size);\r\n        face.indices.push(nextVertex++);\r\n        // skip adjacent edges\r\n        edgeMark[corners[i][3]] = 0;\r\n        edgeMark[corners[i][4]] = 0;\r\n        edgeMark[corners[i][5]] = 0;\r\n      }\r\n    }\r\n\r\n    // for each edge that has internal intersection\r\n    for (i = 0; i < 12; ++i) {\r\n      if (edgeMark[i] === 1) {\r\n        // add intersection point as vertex to the face\r\n        vert[nextVertex].copy(edgeIntersections[i]);\r\n        face.indices.push(nextVertex++);\r\n      }\r\n    }\r\n\r\n    this.faces[6] = face;\r\n\r\n    const diff = new THREE.Vector3();\r\n    const coplanarPoint = new THREE.Vector3();\r\n    this.clipPlane.coplanarPoint(coplanarPoint);\r\n    for (i = 0; i < vert.length; ++i) {\r\n      this.cullFlag[i] = false;\r\n      if (i < 8) {\r\n        // corners should be culled by clipping plane\r\n        diff.subVectors(vert[i], coplanarPoint);\r\n        this.cullFlag[i] = (norm.dot(diff) >= 0.0);\r\n      } else if (i < 8 + face.indices.length) {\r\n        // cross section vertices don't get culled\r\n        this.cullFlag[i] = true;\r\n      }\r\n    }\r\n\r\n    // write data to vertex buffer\r\n    const positions = this.geometry.getAttribute('position');\r\n    let idx = 0;\r\n    for (i = 0; i < vert.length; ++i) {\r\n      positions.array[idx++] = vert[i].x;\r\n      positions.array[idx++] = vert[i].y;\r\n      positions.array[idx++] = vert[i].z;\r\n    }\r\n    positions.needsUpdate = true;\r\n  }\r\n\r\n  _collectVertices(face, filter) {\r\n    let i;\r\n    const vert = this.vertices;\r\n    face.indices = [];\r\n    for (i = 0; i < vert.length; ++i) {\r\n      if (this.cullFlag[i] && filter(vert[i])) {\r\n        face.indices.push(i);\r\n      }\r\n    }\r\n  }\r\n\r\n  _sortIndices(face, right) {\r\n    let i;\r\n    let j;\r\n    const vert = this.vertices;\r\n    const angle = [];\r\n\r\n    const dir = new THREE.Vector3();\r\n    for (i = 1; i < face.indices.length; ++i) {\r\n      dir.subVectors(vert[face.indices[i]], vert[face.indices[0]]);\r\n      dir.normalize();\r\n      dir.cross(right);\r\n      dir.negate();\r\n      angle[i] = face.norm.dot(dir);\r\n    }\r\n\r\n    // Exchange sort\r\n    for (i = 1; i < face.indices.length - 1; ++i) {\r\n      for (j = i + 1; j < face.indices.length; ++j) {\r\n        if (angle[j] < angle[i]) {\r\n          // swap\r\n          let t = angle[i];\r\n          angle[i] = angle[j];\r\n          angle[j] = t;\r\n\r\n          t = face.indices[i];\r\n          face.indices[i] = face.indices[j];\r\n          face.indices[j] = t;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateIndices() {\r\n    // Algorithm:\r\n    // 1. Get plane vertices (from 3 to 6 vertices)\r\n    // 2. Get \"right\" vector in plane\r\n    // 3. Sort vertices using Graham-like method\r\n    // 4. Create indices\r\n\r\n    let i;\r\n    let faceIdx;\r\n    let face;\r\n    const vert = this.vertices;\r\n    const { size } = this;\r\n\r\n    this._collectVertices(this.faces[0], (vertex) => vertex.z === -size.z);\r\n    this._collectVertices(this.faces[1], (vertex) => vertex.z === size.z);\r\n    this._collectVertices(this.faces[2], (vertex) => vertex.y === -size.y);\r\n    this._collectVertices(this.faces[3], (vertex) => vertex.y === size.y);\r\n    this._collectVertices(this.faces[4], (vertex) => vertex.x === -size.x);\r\n    this._collectVertices(this.faces[5], (vertex) => vertex.x === size.x);\r\n\r\n    const vCenter = new THREE.Vector3();\r\n    const vRight = new THREE.Vector3();\r\n    const vDir = new THREE.Vector3();\r\n\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n\r\n      if (face.indices.length === 0) continue;\r\n\r\n      vCenter.set(0, 0, 0);\r\n      for (i = 0; i < face.indices.length; ++i) {\r\n        vCenter.add(vert[face.indices[i]]);\r\n      }\r\n      vCenter.multiplyScalar(1.0 / face.indices.length);\r\n      vRight.subVectors(vert[face.indices[0]], vCenter);\r\n      vRight.normalize();\r\n\r\n      const rightProj = [];\r\n      for (i = 0; i < face.indices.length; ++i) {\r\n        vDir.subVectors(vert[face.indices[i]], vCenter);\r\n        rightProj[i] = vDir.dot(vRight);\r\n      }\r\n      for (i = 1; i < face.indices.length; ++i) {\r\n        if (rightProj[i] < rightProj[0]) {\r\n          // swap\r\n          let t = rightProj[0];\r\n          rightProj[0] = rightProj[i];\r\n          rightProj[i] = t;\r\n\r\n          [t] = face.indices;\r\n          face.indices[0] = face.indices[i];\r\n          face.indices[i] = t;\r\n        }\r\n      }\r\n\r\n      this._sortIndices(face, vRight);\r\n    }\r\n\r\n    let numIndices = 0;\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n      if (face.indices.length >= 3) {\r\n        numIndices += 3 * (face.indices.length - 2);\r\n      }\r\n    }\r\n    let offset = 0;\r\n    const indices = new Uint16Array(numIndices);\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n      for (i = 0; i < face.indices.length - 2; ++i) {\r\n        indices[offset] = face.indices[0]; // eslint-disable-line prefer-destructuring\r\n        indices[offset + 1] = face.indices[i + 1];\r\n        indices[offset + 2] = face.indices[i + 2];\r\n        offset += 3;\r\n      }\r\n    }\r\n\r\n    this.geometry.setIndex(new THREE.BufferAttribute(indices, 1));\r\n  }\r\n\r\n  setDataSource(dataSource) {\r\n    const vm = new VolumeMaterial.VolumeMaterial();\r\n    const dim = dataSource.getDimensions();\r\n    const stride = dataSource.getTiledTextureStride();\r\n    const texture = dataSource.buildTiledTexture();\r\n    const bbox = dataSource.getBox();\r\n    vm.uniforms.volumeDim.value.set(dim[0], dim[1], dim[2]);\r\n    vm.uniforms.tileTex.value = texture;\r\n    vm.uniforms.tileTexSize.value.set(texture.image.width, texture.image.height);\r\n    vm.uniforms.tileStride.value.set(stride[0], stride[1]);\r\n    Object.assign(this.volumeInfo, dataSource.getVolumeInfo());\r\n\r\n    const volInfo = this.volumeInfo;\r\n    vm.uniforms.delta.value.copy(volInfo.delta);\r\n    vm.uniforms.boxAngles.value.set(volInfo.obtuseAngle[0], volInfo.obtuseAngle[1], volInfo.obtuseAngle[2]);\r\n\r\n    this.material = vm;\r\n\r\n    bbox.getSize(this.scale);\r\n    bbox.getCenter(this.position);\r\n  }\r\n\r\n  _updateIsoLevel() {\r\n    const { kSigma, kSigmaMed, kSigmaMax } = settings.now.modes.VD;\r\n    const volInfo = this.volumeInfo;\r\n    const mean = volInfo.dmean - volInfo.dmin;\r\n    const span = volInfo.dmax - volInfo.dmin;\r\n    const level = (k) => (mean + k * volInfo.sd) / span;\r\n    this.material.uniforms._isoLevel0.value.set(level(kSigma), level(kSigmaMed), level(kSigmaMax));\r\n  }\r\n\r\n  static _nearClipPlaneOffset = 0.2;\r\n\r\n  static _pos = new THREE.Vector3();\r\n\r\n  static _norm = new THREE.Vector3();\r\n\r\n  static _norm4D = new THREE.Vector4();\r\n\r\n  static _matrixWorldToLocal = new THREE.Matrix4();\r\n\r\n  static _clipPlane = new THREE.Plane();\r\n\r\n  rebuild(camera) {\r\n    const nearClipPlaneOffset = VolumeMesh._nearClipPlaneOffset;\r\n    const pos = VolumeMesh._pos;\r\n    const norm = VolumeMesh._norm;\r\n    const norm4D = VolumeMesh._norm4D;\r\n    const matrixWorldToLocal = VolumeMesh._matrixWorldToLocal;\r\n    const clipPlane = VolumeMesh._clipPlane;\r\n\r\n\r\n    this._updateIsoLevel();\r\n\r\n    // get clip plane in local space\r\n    camera.getWorldDirection(norm);\r\n    camera.getWorldPosition(pos);\r\n    pos.addScaledVector(norm, camera.near + nearClipPlaneOffset);\r\n\r\n    // transform pos to local CS\r\n    matrixWorldToLocal.getInverse(this.matrixWorld);\r\n    pos.applyMatrix4(matrixWorldToLocal);\r\n\r\n    // transform norm to local CS\r\n    norm4D.set(norm.x, norm.y, norm.z, 0.0); // NOTE: use homogeneous norm for proper transformation\r\n    norm4D.applyMatrix4(matrixWorldToLocal);\r\n    norm.copy(norm4D);\r\n    norm.normalize();\r\n\r\n    clipPlane.setFromNormalAndCoplanarPoint(norm, pos);\r\n\r\n    if (!this.clipPlane.equals(clipPlane)) {\r\n      this.clipPlane = clipPlane.clone();\r\n      this._updateVertices();\r\n      this._updateIndices();\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default VolumeMesh;\r\n","import * as THREE from 'three';\r\nimport gfxutils from './gfxutils';\r\n\r\nclass VolumeBounds {\r\n  static _projectionTable = { // corresponds between (origin axes and angles between them) and between saving vector coordinates\r\n    XY: ['x', 2],\r\n    XZ: ['y', 1],\r\n    YZ: ['z', 0],\r\n  };\r\n\r\n  constructor(bBox, volInfo) {\r\n    const { delta } = volInfo; // {x: XY, y : XZ, z: YZ}\r\n    const { obtuseAngle } = volInfo; // 1 - obtuse, 0 - acute\r\n\r\n    const bSize = new THREE.Vector3();\r\n    bBox.getSize(bSize);\r\n    bSize.multiplyScalar(0.5);\r\n\r\n    const offsetVert = this._getBaseVertices(delta, obtuseAngle);\r\n\r\n    const geometry = new THREE.Geometry();\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      geometry.vertices.push(offsetVert[i].clone().multiply(bSize));\r\n      geometry.vertices.push(offsetVert[(i + 1) % 4].clone().multiply(bSize));\r\n    }\r\n    const translation = new THREE.Vector3(2 * bSize.x * (1 - delta.x - delta.y), 0, 0);\r\n    for (let i = 0; i < 8; i++) {\r\n      geometry.vertices.push(geometry.vertices[i].clone().add(translation));\r\n    }\r\n    for (let i = 0; i < 4; i++) {\r\n      geometry.vertices.push(geometry.vertices[i * 2].clone());\r\n      geometry.vertices.push(geometry.vertices[i * 2 + 8].clone());\r\n    }\r\n    const center = new THREE.Vector3();\r\n    bBox.getCenter(center);\r\n    geometry.vertices.forEach((vertex) => vertex.add(center)); // pivot shift\r\n\r\n    this._lines = new THREE.LineSegments(geometry, new THREE.LineBasicMaterial({ color: 0xFFFFFF }));\r\n    this._lines.layers.set(gfxutils.LAYERS.VOLUME);\r\n  }\r\n\r\n  // Set one edge (4 points) of frame, from which with parallel transfer  the rest of the frame points can be obtained\r\n  _getBaseVertices(delta, obtuseAngle) {\r\n    const projTable = VolumeBounds._projectionTable;\r\n\r\n    const proj = ((index, inv) => { // tricky function to take account of projections: their position(related to box) and sign\r\n      const currDelta = delta[projTable[index][0]];\r\n      const angleValue = -0.5 * (inv - 1) + inv * obtuseAngle[projTable[index][1]];// inv = 1: alpha; inv = -1: 1 - alpha\r\n      return angleValue * currDelta;\r\n    });\r\n\r\n    const offsetVert = [\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', 1) + proj('XY', 1)), -1 + 2 * proj('YZ', 1), -1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', -1) + proj('XY', 1)), -1 + 2 * proj('YZ', -1), 1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', -1) + proj('XY', -1)), 1 - 2 * proj('YZ', 1), 1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', 1) + proj('XY', -1)), 1 - 2 * proj('YZ', -1), -1),\r\n    ];\r\n\r\n    return offsetVert;\r\n  }\r\n\r\n  getMesh() {\r\n    return this._lines;\r\n  }\r\n}\r\n\r\nexport default VolumeBounds;\r\n","import * as THREE from 'three';\r\nimport VolumeMaterial from './shaders/VolumeMaterial';\r\nimport meshes from './meshes/meshes';\r\nimport gfxutils from './gfxutils';\r\n\r\n// Thes geometric far plane is required for correct filling in the BFTexture in case, when far plane cuts the volume\r\n// cube. In cut place of cube there is no correct data in BFTexture and volume rendering integral is calculated\r\n// with errors.\r\n// Far plane cuts the cube in case of large volume scale (zoom), because farplane doesn't change\r\nclass VolumeFarPlane {\r\n  // create plane with unit corners coords (for future rescale in vshader according to camera properties)\r\n  constructor(volume, width, height) {\r\n    const planeGeo = this._initPlaneGeo(width, height);\r\n\r\n    const mat = new VolumeMaterial.BackFacePosMaterialFarPlane();\r\n    this._plane = new meshes.Mesh(planeGeo, mat);\r\n    this._plane.frustumCulled = false;\r\n    this._plane.doubleSided = true;\r\n    const matWorldToVolume = new THREE.Matrix4();\r\n\r\n    this._plane._onBeforeRender = function (_renderer, _scene, camera, _geometry, _material, _group) {\r\n      const { material } = this;\r\n      if (!volume || !material) {\r\n        return;\r\n      }\r\n\r\n      // count point in world at farplane place\r\n      const planeCamPos = new THREE.Vector4(0, 0, -(camera.far - 0.1), 1);\r\n      planeCamPos.applyMatrix4(camera.matrixWorld);\r\n\r\n      // recalc matrices to make plane be placed as farplane in the World relative to camera\r\n      this.matrix.identity();\r\n      this.matrix.makeTranslation(planeCamPos.x, planeCamPos.y, planeCamPos.z);\r\n      this.matrixWorld.copy(this.matrix);\r\n      this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\r\n      this.normalMatrix.getNormalMatrix(this.modelViewMatrix);\r\n\r\n      // build worldToVolume matrix to transform plane into volumeCS (volumeCS coords are written to BackFaceTexture)\r\n      const volumeMatrix = volume.matrixWorld;\r\n      matWorldToVolume.getInverse(volumeMatrix);\r\n\r\n      // update material props\r\n      material.uniforms.aspectRatio.value = camera.aspect;\r\n      material.uniforms.farZ.value = camera.far;\r\n      material.uniforms.tanHalfFOV.value = Math.tan(THREE.Math.DEG2RAD * 0.5 * camera.fov);\r\n      material.uniforms.matWorld2Volume.value = matWorldToVolume;\r\n    };\r\n\r\n    // set it to special layer to draw only into BFTexture\r\n    this._plane.layers.set(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n  }\r\n\r\n  _initPlaneGeo(width, height) {\r\n    const planeGeo = new THREE.Geometry();\r\n\r\n    width = width || 1;\r\n    height = height || 1;\r\n\r\n    planeGeo.vertices.push(new THREE.Vector3(-0.5 * width, 0.5 * height, 0));\r\n    planeGeo.vertices.push(new THREE.Vector3(0.5 * width, 0.5 * height, 0));\r\n    planeGeo.vertices.push(new THREE.Vector3(-0.5 * width, -0.5 * height, 0));\r\n    planeGeo.vertices.push(new THREE.Vector3(0.5 * width, -0.5 * height, 0));\r\n\r\n    planeGeo.faces.push(new THREE.Face3(0, 2, 1));\r\n    planeGeo.faces.push(new THREE.Face3(2, 3, 1));\r\n\r\n    return planeGeo;\r\n  }\r\n\r\n  getMesh() {\r\n    return this._plane;\r\n  }\r\n}\r\n\r\nexport default VolumeFarPlane;\r\n","import * as THREE from 'three';\r\nimport utils from './utils';\r\nimport VolumeMesh from './gfx/VolumeMesh';\r\nimport VolumeBounds from './gfx/VolumeBounds';\r\nimport VolumeFarPlane from './gfx/VolumeFarPlane';\r\nimport Visual from './Visual';\r\nimport settings from './settings';\r\n\r\nfunction VolumeVisual(name, dataSource) {\r\n  Visual.call(this, name, dataSource);\r\n\r\n  this._mesh = new VolumeMesh();\r\n  this._mesh.setDataSource(dataSource);\r\n  this.add(this._mesh);\r\n\r\n  this._frame = new VolumeBounds(this.getBoundaries().boundingBox, this._mesh.volumeInfo);\r\n  this.add(this._frame.getMesh());\r\n  this.showFrame(settings.now.modes.VD.frame);\r\n\r\n  this._farPlane = new VolumeFarPlane(this._mesh, 2, 2);\r\n  this.add(this._farPlane.getMesh());\r\n}\r\n\r\nutils.deriveClass(VolumeVisual, Visual);\r\n\r\nVolumeVisual.prototype.getBoundaries = function () {\r\n  const box = this._dataSource.getBox();\r\n  const sphere = new THREE.Sphere();\r\n  box.getBoundingSphere(sphere);\r\n\r\n  return {\r\n    boundingBox: box,\r\n    boundingSphere: sphere,\r\n  };\r\n};\r\n\r\nVolumeVisual.prototype.getMesh = function () {\r\n  return this._mesh;\r\n};\r\n\r\nVolumeVisual.prototype.showFrame = function (needShow) {\r\n  this._frame.getMesh().material.visible = needShow;\r\n};\r\n\r\nexport default VolumeVisual;\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available loaders.\r\n * @extends EntityList\r\n */\r\nclass LoaderList extends EntityList {\r\n  /**\r\n   * Create a list of loaders.\r\n   * The loaders are indexed by supported source types (`.types` property of a Loader\r\n   * subclass).\r\n   * The loaders can be retrieved later by matching against specs (see {@link LoaderList#find}).\r\n   *\r\n   * @param {!Array<function(new:Loader)>=} someLoaders A list of {@link Loader} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see LoaderList#register\r\n   */\r\n  constructor(someLoaders = []) {\r\n    super(someLoaders, ['types']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable loader for a source type.\r\n   *\r\n   * @param {Object} specs Loader specifications.\r\n   * @param {string=} specs.type Supported source type.\r\n   * @param {*=} specs.source Source to load from.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.type) {\r\n      list = this._dict.types[specs.type.toLowerCase()] || [];\r\n    } else if (specs.source) {\r\n      return this._list.filter((SomeLoader) => SomeLoader.canProbablyLoad && SomeLoader.canProbablyLoad(specs.source));\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default LoaderList;\r\n","import EventDispatcher from '../../utils/EventDispatcher';\r\nimport makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Loader extends EventDispatcher {\r\n  constructor(source, options) {\r\n    super();\r\n    this._source = source;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n    this._agent = null;\r\n  }\r\n\r\n  load() {\r\n    return Promise.reject(new Error('Loading from this source is not implemented'));\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n    if (this._agent) {\r\n      this._agent.abort();\r\n    }\r\n  }\r\n\r\n  static extractName(_source) {\r\n    return undefined;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Loader.prototype);\r\n","import Loader from './Loader';\r\n\r\nexport default class FileLoader extends Loader {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n\r\n    options = this._options;\r\n    this._binary = options.binary === true;\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n\r\n      const blob = this._source;\r\n      const reader = this._agent = new FileReader();\r\n\r\n      reader.addEventListener('load', () => {\r\n        resolve(reader.result);\r\n      });\r\n      reader.addEventListener('error', () => {\r\n        reject(reader.error);\r\n      });\r\n      reader.addEventListener('abort', () => {\r\n        reject(new Error('Loading aborted'));\r\n      });\r\n      reader.addEventListener('progress', (event) => {\r\n        this.dispatchEvent(event);\r\n      });\r\n\r\n      if (this._binary) {\r\n        reader.readAsArrayBuffer(blob);\r\n      } else {\r\n        reader.readAsText(blob);\r\n      }\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(source) {\r\n    return (File && source instanceof File) || (Blob && source instanceof Blob);\r\n  }\r\n\r\n  static extractName(source) {\r\n    return source && source.name;\r\n  }\r\n}\r\n\r\nFileLoader.types = ['file', 'blob'];\r\n","import _ from 'lodash';\r\nimport Loader from './Loader';\r\n\r\n// we don't need to detect all kinds of URLs, just the evident ones\r\nconst urlStartRegexp = /^(https?|ftp):\\/\\//i;\r\n\r\nexport default class XHRLoader extends Loader {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n\r\n    options = this._options;\r\n    this._binary = (options.binary === true);\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n\r\n      const url = this._source;\r\n      const request = this._agent = new XMLHttpRequest();\r\n\r\n      request.addEventListener('load', () => {\r\n        if (request.status === 200) {\r\n          resolve(request.response);\r\n        } else {\r\n          reject(new Error(`HTTP ${request.status} while fetching ${url}`));\r\n        }\r\n      });\r\n      request.addEventListener('error', () => {\r\n        reject(new Error('HTTP request failed'));\r\n      });\r\n      request.addEventListener('abort', () => {\r\n        reject(new Error('Loading aborted'));\r\n      });\r\n      request.addEventListener('progress', (event) => {\r\n        this.dispatchEvent(event);\r\n      });\r\n\r\n      request.open('GET', url);\r\n      if (this._binary) {\r\n        request.responseType = 'arraybuffer';\r\n      } else {\r\n        request.responseType = 'text';\r\n      }\r\n      request.send();\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(source) {\r\n    return _.isString(source) && urlStartRegexp.test(source);\r\n  }\r\n\r\n  static extractName(source) {\r\n    if (source) {\r\n      const last = (source.indexOf('?') + 1 || source.lastIndexOf('#') + 1 || source.length + 1) - 1;\r\n      return source.slice(source.lastIndexOf('/', last) + 1, last);\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nXHRLoader.types = ['url'];\r\n","import Loader from './Loader';\r\n\r\nexport default class ImmediateLoader extends Loader {\r\n  load() {\r\n    return new Promise((resolve) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n      resolve(this._source);\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(_source) {\r\n    return false;\r\n  }\r\n}\r\n\r\nImmediateLoader.types = ['immediate'];\r\n","import LoaderList from './loaders/LoaderList';\r\n\r\nimport FileLoader from './loaders/FileLoader';\r\nimport XHRLoader from './loaders/XHRLoader';\r\nimport ImmediateLoader from './loaders/ImmediateLoader';\r\n\r\nexport default new LoaderList([\r\n  // note: order might be important\r\n  FileLoader,\r\n  XHRLoader,\r\n  ImmediateLoader,\r\n]);\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available parsers.\r\n * @extends EntityList\r\n */\r\nclass ParserList extends EntityList {\r\n  /**\r\n   * Create a list of parsers.\r\n   * The parsers are indexed by supported data formats and file extensions (`.formats` and\r\n   * `.extensions` properties of a Parser subclass).\r\n   * The parsers can be retrieved later by matching against specs (see {@link ParsrerList#find}).\r\n   *\r\n   * @param {!Array<function(new:Parser)>=} someParsers A list of {@link Parser} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see ParserList#register\r\n   */\r\n  constructor(someParsers = []) {\r\n    super(someParsers, ['formats', 'extensions']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable parser for data.\r\n   *\r\n   * @param {Object} specs Parser specifications.\r\n   * @param {string=} specs.format Supported data format.\r\n   * @param {string=} specs.ext Supported filename extension.\r\n   * @param {*=} specs.data Data to parse.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.format) {\r\n      list = this._dict.formats[specs.format.toLowerCase()] || [];\r\n    } else if (specs.ext) {\r\n      list = this._dict.extensions[specs.ext.toLowerCase()] || [];\r\n    }\r\n    // autodetect only if no format is forced\r\n    if (list.length === 0 && !specs.format && specs.data) {\r\n      return this._list.filter((SomeParser) => SomeParser.canProbablyParse && SomeParser.canProbablyParse(specs.data));\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default ParserList;\r\n","import makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Parser {\r\n  constructor(data, options) {\r\n    this._data = data;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n  }\r\n\r\n  parseSync() {\r\n    throw new Error('Parsing this type of data is not implemented');\r\n  }\r\n\r\n  parse() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (this._abort) {\r\n            return reject(new Error('Parsing aborted'));\r\n          }\r\n          return resolve(this.parseSync());\r\n        } catch (error) {\r\n          return reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // only for volume Parsers\r\n  getModel() {\r\n    this.model._parseHeader(this._data);\r\n    return this.model;\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Parser.prototype);\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Parser helper for PDB tag \"REMARK 290\".\r\n *\r\n * @exports Remark290\r\n * @constructor\r\n */\r\nclass Remark290 {\r\n  constructor() {\r\n    /** @type {THREE.Matrix4[]} */\r\n    this.matrices = [];\r\n\r\n    /** @type {?THREE.Matrix4} */\r\n    this._matrix = null;\r\n    /** @type {number} */\r\n    this._matrixIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Parse a single line of a stream.\r\n   * @param {PDBStream} stream - stream to parse\r\n   */\r\n\r\n  parse(stream) {\r\n    /** @type {?THREE.Matrix4} */\r\n    let matrix = this._matrix;\r\n\r\n    if (stream.readString(12, 18) === '  SMTRY') {\r\n      const matrixRow = stream.readCharCode(19) - 49; // convert '1', '2', or '3' -> 0, 1, or 2\r\n      const matrixData = stream.readString(20, 80).trim().split(/\\s+/);\r\n      const matrixIndex = parseInt(matrixData[0], 10);\r\n      if (this._matrix === null || matrixIndex !== this._matrixIndex) {\r\n        // TODO: assert(matrixIndex === this.matrices.length + 1);\r\n        this._matrixIndex = matrixIndex;\r\n        this._matrix = matrix = new THREE.Matrix4();\r\n        this.matrices[this.matrices.length] = matrix;\r\n      }\r\n\r\n      const { elements } = matrix;\r\n      elements[matrixRow] = parseFloat(matrixData[1]);\r\n      elements[matrixRow + 4] = parseFloat(matrixData[2]);\r\n      elements[matrixRow + 8] = parseFloat(matrixData[3]);\r\n      elements[matrixRow + 12] = parseFloat(matrixData[4]);\r\n    }\r\n  }\r\n}\r\n\r\nRemark290.prototype.id = 290;\r\n\r\nexport default Remark290;\r\n","import * as THREE from 'three';\r\nimport chem from '../../../chem';\r\n\r\nconst { Assembly } = chem;\r\n\r\n/**\r\n * Parser helper for PDB tag \"REMARK 350\".\r\n *\r\n * @exports Remark350\r\n * @constructor\r\n */\r\nclass Remark350 {\r\n  constructor(complex) {\r\n    /** @type {Complex} */\r\n    this._complex = complex;\r\n    /** @type {Assembly[]} */\r\n    this.assemblies = [];\r\n\r\n    /** @type {?Assembly} */\r\n    this._assembly = null;\r\n    /** @type {?THREE.Matrix4} */\r\n    this._matrix = null;\r\n    /** @type {number} */\r\n    this._matrixIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Parse a single line of a stream.\r\n   * @param {PDBStream} stream - stream to parse\r\n   */\r\n\r\n  parse(stream) {\r\n    /** @type {?Assembly} */\r\n    let assembly = this._assembly;\r\n    /** @type {?THREE.Matrix4} */\r\n    let matrix = this._matrix;\r\n\r\n    if (assembly && stream.readString(12, 18) === '  BIOMT') {\r\n      const matrixRow = stream.readCharCode(19) - 49; // convert '1', '2', or '3' -> 0, 1, or 2\r\n      const matrixData = stream.readString(20, 80).trim().split(/\\s+/);\r\n      const matrixIndex = parseInt(matrixData[0], 10);\r\n      if (this._matrix === null || matrixIndex !== this._matrixIndex) {\r\n        // TODO: assert(matrixIndex === assembly.matrices.length + 1);\r\n        this._matrixIndex = matrixIndex;\r\n        this._matrix = matrix = new THREE.Matrix4();\r\n        assembly.addMatrix(matrix);\r\n      }\r\n\r\n      const { elements } = matrix;\r\n      elements[matrixRow] = parseFloat(matrixData[1]);\r\n      elements[matrixRow + 4] = parseFloat(matrixData[2]);\r\n      elements[matrixRow + 8] = parseFloat(matrixData[3]);\r\n      elements[matrixRow + 12] = parseFloat(matrixData[4]);\r\n    } else if (assembly && stream.readString(35, 41) === 'CHAINS:') {\r\n      const entries = stream.readString(42, 80).split(',');\r\n      for (let i = 0, n = entries.length; i < n; ++i) {\r\n        const chain = entries[i].trim();\r\n        if (chain.length > 0) {\r\n          assembly.addChain(chain);\r\n        }\r\n      }\r\n    } else if (stream.readString(12, 23) === 'BIOMOLECULE:') {\r\n      // assert molIndex === this.assemblies.length + 1\r\n      this._matrix = null;\r\n      this._matrixIndex = -1;\r\n      this._assembly = assembly = new Assembly(this._complex);\r\n      this.assemblies.push(assembly);\r\n    }\r\n  }\r\n}\r\n\r\nRemark350.prototype.id = 350;\r\n\r\nexport default Remark350;\r\n","/** Helper class for stream-like reading input files. */\r\nclass PDBStream {\r\n  /**\r\n   * Create a stream\r\n   * @param {String} data Input data\r\n   */\r\n  constructor(data) {\r\n    /** @type String */\r\n    this._data = data; // Input file\r\n    /** @type Number */\r\n    this._start = 0; // Starting position of line\r\n    /** @type Number */\r\n    this._nextCR = -1; // Position of next CR (0x0D)\r\n    /** @type Number */\r\n    this._nextLF = -1; // Position of next LF (0x0A)\r\n    /** @type Number */\r\n    this._next = -1; // End position of line\r\n    /** @type Number */\r\n    this._end = data.length; // End of data\r\n\r\n    this.next();\r\n  }\r\n\r\n  /**\r\n   * Reading next line.\r\n   * @returns {String} Next line in data (ending with LF or CR)\r\n   */\r\n  readLine() {\r\n    return this._data.slice(this._start, this._next);\r\n  }\r\n\r\n  /**\r\n   * Reading character from position.\r\n   * @param {Number} pos - Position in current line.\r\n   * @returns {String} Character from position\r\n   */\r\n  readChar(pos) {\r\n    pos = this._start + pos - 1;\r\n    return pos < this._next ? this._data[pos] : ' ';\r\n  }\r\n\r\n  /**\r\n   * Reading character code from position.\r\n   * @param {Number} pos - Position in current line.\r\n   * @returns {Number} Character code from position\r\n   */\r\n  readCharCode(pos) {\r\n    pos = this._start + pos - 1;\r\n    return pos < this._next ? this._data.charCodeAt(pos) : 32;\r\n  }\r\n\r\n  /**\r\n   * Reading string from begin to end points.\r\n   * For a reason unknown, numbering assumed not to start from 0, but from 1.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {String} String from begin to end\r\n   */\r\n  readString(begin, end) {\r\n    const from = this._start + begin - 1;\r\n    const to = this._start + end;\r\n    return this._data.slice(from, to < this._next ? to : this._next);\r\n  }\r\n\r\n  /**\r\n   * Reading integer from begin to end points.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {Number} Integer from begin to end\r\n   */\r\n  readInt(begin, end) {\r\n    return parseInt(this.readString(begin, end), 10);\r\n  }\r\n\r\n  /**\r\n   * Reading float from begin to end points.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {Number} Float from begin to end\r\n   */\r\n  readFloat(begin, end) {\r\n    return parseFloat(this.readString(begin, end));\r\n  }\r\n\r\n  /**\r\n   * Checking for end of data.\r\n   * @returns {boolean} True if data is ended, false otherwise\r\n   */\r\n  end() {\r\n    return this._start >= this._end;\r\n  }\r\n\r\n  /**\r\n   * Procedure to re-arrange current pointers in data.\r\n   */\r\n  next() {\r\n    const start = this._next + 1;\r\n    this._start = start < this._end ? start : this._end;\r\n\r\n    // support CR, LF, CR+LF line endings\r\n    // do not support LF+CR, CR+CR+LF, and other strange combinations\r\n\r\n    if (this._start > this._nextCR) {\r\n      this._nextCR = (this._data.indexOf('\\r', this._start) + 1 || this._end + 1) - 1;\r\n    }\r\n    if (this._start > this._nextLF) {\r\n      this._nextLF = (this._data.indexOf('\\n', this._start) + 1 || this._end + 1) - 1;\r\n    }\r\n    this._next = this._nextCR + 1 < this._nextLF ? this._nextCR : this._nextLF;\r\n  }\r\n}\r\n\r\nexport default PDBStream;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport Remark290 from './pdb/Remark290';\r\nimport Remark350 from './pdb/Remark350';\r\nimport PDBStream from './PDBStream';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst TAG_LENGTH = 6;\r\n\r\nfunction nameToElement(name) {\r\n  // http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\r\n  //\r\n  // http://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note1\r\n  //\r\n  // Atom names start with element symbols right-justified in columns 13-14\r\n  // as permitted by the length of the name. For example, the symbol FE for\r\n  // iron appears in columns 13-14, whereas the symbol C for carbon appears\r\n  // in column 14 (see Misaligned Atom Names). If an atom name has four\r\n  // characters, however, it must start in column 13 even if the element\r\n  // symbol is a single character (for example, see Hydrogen Atoms).\r\n\r\n  const veryLong = name.trim().length === 4;\r\n  return name.slice(0, veryLong ? 1 : 2).trim();\r\n}\r\n\r\n// the most frequently used beginnings; although HEADER is mandatory, it is often missing in handmade files\r\nconst pdbStartRegexp = /^(HEADER\\s|COMPND\\s|REMARK\\s|ATOM {2}|HETATM|MODEL )/i;\r\n\r\nconst remarkParsers = {\r\n  // NOTE: please forget the idea to build the method name in runtime, it can be obfuscated.\r\n  290: Remark290,\r\n  350: Remark350,\r\n};\r\n\r\nclass PDBParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._sheet = null;\r\n    this._serialAtomMap = null;\r\n    this._modelId = 1;\r\n    this._compaundFound = false;\r\n    this._biomoleculeFound = false;\r\n    this._allowedChainsIDs = null;\r\n    this._lastMolId = -1;\r\n\r\n    this._remarks = {};\r\n    this._remark = null;\r\n\r\n    this._molecules = [];\r\n    this._molecule = null;\r\n    this._compndCurrToken = '';\r\n\r\n    this._options.fileType = 'pdb';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && pdbStartRegexp.test(data);\r\n  }\r\n\r\n  _finalize() {\r\n    this._fixBondsArray();\r\n    this._fixChains();\r\n\r\n    // keep crystallographic symmetry transformations\r\n    const remark290 = this._remarks[290];\r\n    this._complex.symmetry = _.isUndefined(remark290) ? [] : remark290.matrices;\r\n\r\n    // add loaded biological assemblies\r\n    const remark350 = this._remarks[350];\r\n    this._complex.units = this._complex.units.concat(_.isUndefined(remark350) ? [] : remark350.assemblies);\r\n\r\n    // add loaded macromolecules\r\n    this._finalizeMolecules();\r\n\r\n    // create secondary structure etc.\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // get chains from complex\r\n    const chainDict = {};\r\n    let i;\r\n    const chains = this._complex._chains;\r\n    for (i = 0; i < chains.length; ++i) {\r\n      const chainObj = chains[i];\r\n      const chainName = chainObj._name;\r\n      chainDict[chainName] = chainObj;\r\n    }\r\n\r\n    // aggregate residues from chains\r\n    for (i = 0; i < this._molecules.length; i++) {\r\n      const m = this._molecules[i];\r\n      let residues = [];\r\n      for (let j = 0; j < m._chains.length; j++) {\r\n        const name = m._chains[j];\r\n        const chain = chainDict[name];\r\n        residues = residues.concat(chain._residues.slice());\r\n      }\r\n      const molecule = new Molecule(this._complex, m._name, i + 1);\r\n      molecule.residues = residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  _fixChains() {\r\n    const idChainMap = {};\r\n    const complex = this._complex;\r\n\r\n    // prepare\r\n    for (let i = 0; i < complex._chains.length; i++) {\r\n      const chain = complex._chains[i];\r\n      idChainMap[chain._name.charCodeAt(0)] = chain;\r\n    }\r\n  }\r\n\r\n  // FIXME: This function is redundant, CONECT records always follow ATOM and HETATM. Build the map online.\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const complex = this._complex;\r\n\r\n    const atoms = complex._atoms;\r\n    for (let i = 0, ni = atoms.length; i < ni; ++i) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    const { logger } = this;\r\n    for (let j = 0, nj = bonds.length; j < nj; ++j) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        logger.debug('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _parseATOM(stream) {\r\n    if (this._modelId !== 1) {\r\n      return;\r\n    }\r\n\r\n    /* eslint-disable no-magic-numbers */\r\n    const het = stream.readCharCode(1) === 0x48;\r\n\r\n    // field names according to wwPDB Format\r\n    // NOTE: Chimera allows (nonstandard) use of columns 6-11 for the integer atom serial number in ATOM records.\r\n    const serial = het ? stream.readInt(7, 11) : stream.readInt(6, 11);\r\n    let name = stream.readString(13, 16);\r\n    const altLoc = stream.readChar(17);\r\n    const resName = stream.readString(18, 20).trim();\r\n    const chainID = stream.readChar(22);\r\n    const resSeq = stream.readInt(23, 26);\r\n    const iCode = stream.readChar(27);\r\n    const x = stream.readFloat(31, 38);\r\n    const y = stream.readFloat(39, 46);\r\n    const z = stream.readFloat(47, 54);\r\n    const occupancy = stream.readFloat(55, 60);\r\n    const tempFactor = stream.readFloat(61, 66);\r\n    const element = stream.readString(77, 78).trim() || nameToElement(name);\r\n    const charge = stream.readInt(79, 80) || 0;\r\n    /* eslint-enable no-magic-numbers */\r\n    // skip waters (there may be lots of them)\r\n    if (this.settings.now.nowater) {\r\n      if (resName === 'HOH' || resName === 'WAT') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // PDB uses positional system for atom names. It helps derive element type from the name\r\n    // but names may include extra spaces. From this point on we don't need those spaces anymore.\r\n    name = name.trim();\r\n\r\n    const type = Element.getByName(element);\r\n    const role = Element.Role[name]; // FIXME: Maybe should use type as additional index (\" CA \" vs. \"CA  \")\r\n\r\n    // NOTE: Residues of a particular chain are not required to be listed next to each other.\r\n    // https://github.com/biasmv/pv/commit/7319b898b7473ba380c26699e3b028b2b1a7e1a1\r\n    let chain = this._chain;\r\n    if (!chain || chain.getName() !== chainID) {\r\n      this._chain = chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n      this._residue = null;\r\n    }\r\n\r\n    let residue = this._residue;\r\n    if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n      this._residue = residue = chain.addResidue(resName, resSeq, iCode);\r\n    }\r\n\r\n    const xyz = new THREE.Vector3(x, y, z);\r\n    residue.addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n  }\r\n\r\n  _parseENDMDL() {\r\n    this._modelId += 1;\r\n  }\r\n\r\n  _parseCONECT(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const serial0 = stream.readInt(7, 11);\r\n    const serial1 = stream.readInt(12, 16);\r\n    const serial2 = stream.readInt(17, 21);\r\n    const serial3 = stream.readInt(22, 26);\r\n    const serial4 = stream.readInt(27, 31);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    const complex = this._complex;\r\n\r\n    // Keep bonds ordered by atom serial\r\n    if (serial1 && serial1 > serial0) {\r\n      complex.addBond(serial0, serial1, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial2 && serial2 > serial0) {\r\n      complex.addBond(serial0, serial2, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial3 && serial3 > serial0) {\r\n      complex.addBond(serial0, serial3, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial4 && serial4 > serial0) {\r\n      complex.addBond(serial0, serial4, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n  }\r\n\r\n  _parseCOMPND(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const str = stream.readString(11, 80);\r\n    const tokenIdx = str.indexOf(':');\r\n    this._compndCurrToken = tokenIdx > 0 ? str.substring(0, tokenIdx).trim() : this._compndCurrToken;\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // start reading new molecule\r\n    if (this._compndCurrToken === 'MOL_ID') {\r\n      this._molecule = { _index: '', _chains: [] };\r\n      this._molecule._index = parseInt(str.substring(tokenIdx + 1, str.indexOf(';')), 10);\r\n      this._molecules.push(this._molecule);\r\n      // parse molecule name\r\n    } else if (this._compndCurrToken === 'MOLECULE' && this._molecule != null) {\r\n      this._molecule._name = str.substring(tokenIdx + 1, str.indexOf(';')).trim();\r\n      // parse molecule chains\r\n    } else if (this._compndCurrToken === 'CHAIN' && this._molecule != null) {\r\n      let chainStr = str.substring(tokenIdx + 1, 80).trim();\r\n      const lastChar = chainStr[chainStr.length - 1];\r\n      if (lastChar === ';' || lastChar === ',') {\r\n        chainStr = chainStr.slice(0, -1);\r\n      }\r\n      chainStr = chainStr.replace(/\\s+/g, '');\r\n      const chains = chainStr.split(',');\r\n      this._molecule._chains = this._molecule._chains.concat(chains);\r\n    }\r\n  }\r\n\r\n  _parseREMARK(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const remarkNum = stream.readInt(8, 10);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // create remark parser if needed\r\n    let remark = this._remarks[remarkNum];\r\n    if (_.isUndefined(remark)) {\r\n      const RemarkParser = remarkParsers[remarkNum];\r\n      if (_.isFunction(RemarkParser)) {\r\n        this._remarks[remarkNum] = remark = new RemarkParser(this._complex);\r\n      }\r\n    }\r\n\r\n    // delegate parsing\r\n    if (!_.isUndefined(remark)) {\r\n      remark.parse(stream);\r\n    }\r\n  }\r\n\r\n  _parseHELIX(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const fields = [20, 22, 32, 34];\r\n    /* eslint-enable no-magic-numbers */\r\n    this._parseSTRUCTURE(stream, fields, (obj) => {\r\n      this._complex.addHelix(obj);\r\n      this._complex.structures.push(obj);\r\n    });\r\n  }\r\n\r\n  _parseSHEET(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const fields = [22, 23, 33, 34];\r\n    /* eslint-enable no-magic-numbers */\r\n    this._parseSTRUCTURE(stream, fields, (obj) => {\r\n      this._complex.addSheet(obj);\r\n    });\r\n  }\r\n\r\n  _parseSTRUCTURE(stream, pars, adder) {\r\n    const startId = 0;\r\n    const startIndex = 1;\r\n    const endId = 2;\r\n    const endIndex = 3;\r\n\r\n    // identify fields: debugging and stuff\r\n    /* eslint-disable no-magic-numbers */\r\n    const codeOfS = 0x53;\r\n    const serialNumber = stream.readInt(8, 10);\r\n    const structureName = stream.readString(12, 14).trim(); // FIXME: LString(3) forbids trim()\r\n    const comment = stream.readString(41, 70).trim();\r\n    const helLength = stream.readInt(72, 76);\r\n    const helixClass = stream.readInt(39, 40);\r\n    const shWidth = stream.readInt(15, 16);\r\n    const shCur = stream.readInt(42, 45);\r\n    const shPrev = stream.readInt(57, 60);\r\n    /* eslint-enable no-magic-numbers */\r\n    // file fields\r\n    const startChainID = stream.readString(pars[startId], pars[endId] + 1).charCodeAt(0);\r\n    const endChainID = stream.readString(pars[endId], pars[endId] + 1).charCodeAt(0);\r\n    const startSequenceNumber = stream.readInt(pars[startIndex], pars[startIndex] + 3);\r\n    let iCodeStr = stream.readString(pars[startIndex] + 4, pars[startIndex] + 4);\r\n    let startICode = 0;\r\n\r\n    if (iCodeStr.length > 0) {\r\n      startICode = iCodeStr.charCodeAt(0);\r\n    }\r\n    const endSequenceNumber = stream.readInt(pars[endIndex], pars[endIndex] + 3);\r\n    iCodeStr = stream.readString(pars[endIndex] + 4, pars[endIndex] + 4);\r\n    let endICode = 0;\r\n    if (iCodeStr.length > 0) {\r\n      endICode = iCodeStr.charCodeAt(0);\r\n    }\r\n\r\n    let obj;\r\n    let cs = this._sheet;\r\n    if (stream.readCharCode(1) === codeOfS) {\r\n      if (cs !== null && cs.getName() !== structureName) {\r\n        cs = null;\r\n        this._sheet = null;\r\n      }\r\n      if (cs === null) {\r\n        this._sheet = obj = new Sheet(structureName, shWidth);\r\n        adder(obj);\r\n      } else {\r\n        obj = cs;\r\n      }\r\n      const strand = new Strand(\r\n        obj,\r\n        this._complex.getUnifiedSerial(startChainID, startSequenceNumber, startICode),\r\n        this._complex.getUnifiedSerial(endChainID, endSequenceNumber, endICode),\r\n        helixClass, shCur, shPrev,\r\n      );\r\n      obj.addStrand(strand);\r\n      this._complex.structures.push(strand);\r\n    } else {\r\n      obj = new Helix(\r\n        helixClass,\r\n        this._complex.getUnifiedSerial(startChainID, startSequenceNumber, startICode),\r\n        this._complex.getUnifiedSerial(endChainID, endSequenceNumber, endICode),\r\n        serialNumber, structureName, comment, helLength,\r\n      );\r\n      adder(obj);\r\n    }\r\n  }\r\n\r\n  _parseHEADER(stream) {\r\n    const { metadata } = this._complex;\r\n    metadata.classification = stream.readString(11, 50).trim();\r\n    metadata.date = stream.readString(51, 59).trim();\r\n\r\n    const id = stream.readString(63, 66).trim();\r\n    metadata.id = id;\r\n    if (id) {\r\n      this._complex.name = id;\r\n    }\r\n    metadata.format = 'pdb';\r\n  }\r\n\r\n  _parseTITLE(stream) {\r\n    const { metadata } = this._complex;\r\n    metadata.title = metadata.title || [];\r\n\r\n    const line = stream.readInt(9, 10) || 1;\r\n    metadata.title[line - 1] = stream.readString(11, 80).trim();\r\n  }\r\n\r\n  static tagParsers = {\r\n    HEADER: PDBParser.prototype._parseHEADER,\r\n    'TITLE ': PDBParser.prototype._parseTITLE,\r\n    'ATOM  ': PDBParser.prototype._parseATOM,\r\n    HETATM: PDBParser.prototype._parseATOM,\r\n    ENDMDL: PDBParser.prototype._parseENDMDL,\r\n    CONECT: PDBParser.prototype._parseCONECT,\r\n    COMPND: PDBParser.prototype._parseCOMPND,\r\n    REMARK: PDBParser.prototype._parseREMARK,\r\n    // 'SOURCE': PDBParser.prototype._parseSOURCE,\r\n    'HELIX ': PDBParser.prototype._parseHELIX,\r\n    'SHEET ': PDBParser.prototype._parseSHEET,\r\n\r\n    // nonstandard extension to allow range 100,000 - 999,999\r\n    'ATOM 1': PDBParser.prototype._parseATOM,\r\n    'ATOM 2': PDBParser.prototype._parseATOM,\r\n    'ATOM 3': PDBParser.prototype._parseATOM,\r\n    'ATOM 4': PDBParser.prototype._parseATOM,\r\n    'ATOM 5': PDBParser.prototype._parseATOM,\r\n    'ATOM 6': PDBParser.prototype._parseATOM,\r\n    'ATOM 7': PDBParser.prototype._parseATOM,\r\n    'ATOM 8': PDBParser.prototype._parseATOM,\r\n    'ATOM 9': PDBParser.prototype._parseATOM,\r\n  };\r\n\r\n  parseSync() {\r\n    const stream = new PDBStream(this._data);\r\n    const result = this._complex = new Complex();\r\n\r\n    // parse PDB line by line\r\n    while (!stream.end()) {\r\n      const tag = stream.readString(1, TAG_LENGTH);\r\n      const func = PDBParser.tagParsers[tag];\r\n      if (_.isFunction(func)) {\r\n        func.call(this, stream);\r\n      }\r\n      stream.next();\r\n    }\r\n\r\n    // Resolve indices and serials to objects\r\n    this._finalize();\r\n\r\n    // cleanup\r\n    this._serialAtomMap = null;\r\n    this._sheet = null;\r\n    this._residue = null;\r\n    this._chain = null;\r\n    this._complex = null;\r\n\r\n    if (result.getAtomCount() === 0) {\r\n      throw new Error('The data does not contain valid atoms');\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nPDBParser.formats = ['pdb'];\r\nPDBParser.extensions = ['.pdb', '.ent'];\r\n\r\nexport default PDBParser;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  SGroup,\r\n  Bond,\r\n} = chem;\r\n\r\nconst cOrderCharCodes = {\r\n  A: 0,\r\n  S: 1,\r\n  D: 2,\r\n  T: 3,\r\n};\r\n\r\nconst cmlStartRegexp = /\\s*<\\?xml\\b[^?>]*\\?>\\s*<(?:cml|molecule)\\b/i;\r\n\r\nclass CMLParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._complex = null;\r\n    this._residue = null;\r\n    this._serialAtomMap = null;\r\n    this._modelId = 1;\r\n    this._lastMolId = -1;\r\n    this._readOnlyOneMolecule = false;\r\n    this._options.fileType = 'cml';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && cmlStartRegexp.test(data);\r\n  }\r\n\r\n  _rebuidBondIndexes(atoms, bonds) {\r\n    const count = atoms.length;\r\n    for (let i = 0; i < count; i++) {\r\n      const atomId = atoms[i].id;\r\n\r\n      const countBonds = bonds.length;\r\n      for (let j = 0; j < countBonds; j++) {\r\n        const idxs = bonds[j].atomRefs2.split(' ');\r\n        if (idxs[0] === atomId) {\r\n          bonds[j].start = i;\r\n        }\r\n\r\n        if (idxs[1] === atomId) {\r\n          bonds[j].end = i;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _createSGroup(molecule, moleculeArr) {\r\n    const newGroup = new SGroup(\r\n      molecule.id, molecule.fieldData,\r\n      new THREE.Vector3(parseFloat(molecule.x), parseFloat(molecule.y), 0), molecule.atomRefs, molecule,\r\n    );\r\n    if (molecule.placement === 'Relative') {\r\n      newGroup._center = new THREE.Vector3(0, 0, 0);\r\n    }\r\n    if (molecule.fieldName === 'MDLBG_FRAGMENT_CHARGE') {\r\n      newGroup._charge = parseInt(molecule.fieldData, 10) || 0;\r\n    }\r\n    if (molecule.fieldName === 'MDLBG_FRAGMENT_COEFFICIENT') {\r\n      newGroup._repeat = parseInt(molecule.fieldData, 10) || 1;\r\n    }\r\n    moleculeArr.push(newGroup);\r\n  }\r\n\r\n  _extractSGroup(molecule, moleculeArr) {\r\n    if (!Array.isArray(moleculeArr)) {\r\n      moleculeArr = [];\r\n    }\r\n\r\n    if (molecule) {\r\n      if (Array.isArray(molecule)) {\r\n        const count = molecule.length;\r\n        for (let i = 0; i < count; i++) {\r\n          if (molecule[i].molecule) {\r\n            moleculeArr = moleculeArr.concat(this._extractSGroup(molecule[i].molecule));\r\n          }\r\n          this._createSGroup(molecule[i], moleculeArr);\r\n        }\r\n      } else {\r\n        if (molecule.molecule) {\r\n          if (molecule.molecule) {\r\n            moleculeArr = moleculeArr.concat(this._extractSGroup(molecule.molecule));\r\n          }\r\n        }\r\n        this._createSGroup(molecule, moleculeArr);\r\n      }\r\n    }\r\n\r\n    return moleculeArr;\r\n  }\r\n\r\n\r\n  _extractSGroups(molecule, atoms) {\r\n    const moleculeArr = this._extractSGroup(molecule);\r\n\r\n\r\n    const count = atoms.length;\r\n    let i;\r\n    let j;\r\n\r\n    for (i = 0; i < count; i++) {\r\n      const atomId = atoms[i].id;\r\n      for (j = 0; j < moleculeArr.length; j++) {\r\n        const firstAtomRef = moleculeArr[j]._atoms.split(' ')[0];\r\n        if (firstAtomRef === atomId) {\r\n          if (!atoms[i].sgroupRef) {\r\n            atoms[i].sgroupRef = [];\r\n          }\r\n          atoms[i].sgroupRef.push(moleculeArr[j]);\r\n        }\r\n      }\r\n    }\r\n    // build sGroups centers\r\n    let atomMap = {}; // sgrpmap cache\r\n    let mapEntry = null;\r\n    const nLimon = 100000000;\r\n    const bLow = new THREE.Vector3(nLimon, nLimon, nLimon);\r\n    const bHight = new THREE.Vector3(-nLimon, -nLimon, -nLimon);\r\n\r\n    function cycleFuncInner(e) {\r\n      mapEntry = atomMap[e];\r\n      if (mapEntry) {\r\n        moleculeArr[j]._atoms.push(mapEntry.a);\r\n      }\r\n    }\r\n\r\n    function cycleFunc(e) {\r\n      mapEntry = atomMap[e];\r\n      if (mapEntry) {\r\n        bLow.set(Math.min(bLow.x, mapEntry.x), Math.min(bLow.y, mapEntry.y), Math.min(bLow.z, mapEntry.z));\r\n        bHight.set(Math.max(bHight.x, mapEntry.x), Math.max(bHight.y, mapEntry.y), Math.max(bHight.z, mapEntry.z));\r\n        cycleFuncInner(e);\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < atoms.length; i++) {\r\n      atomMap[atoms[i].id] = {};\r\n      atomMap[atoms[i].id].x = atoms[i].x2;\r\n      if (atoms[i].x3) {\r\n        atomMap[atoms[i].id].x = atoms[i].x3;\r\n      }\r\n      atomMap[atoms[i].id].x = parseFloat(atomMap[atoms[i].id].x);\r\n      atomMap[atoms[i].id].y = atoms[i].y2;\r\n      if (atoms[i].y3) {\r\n        atomMap[atoms[i].id].y = atoms[i].y3;\r\n      }\r\n      atomMap[atoms[i].id].y = parseFloat(atomMap[atoms[i].id].y);\r\n      atomMap[atoms[i].id].z = '0.0';\r\n      if (atoms[i].z3) {\r\n        atomMap[atoms[i].id].z = atoms[i].z3;\r\n      }\r\n      atomMap[atoms[i].id].z = parseFloat(atomMap[atoms[i].id].z);\r\n      atomMap[atoms[i].id].a = atoms[i];\r\n    }\r\n\r\n    let atomsRef;\r\n    for (j = 0; j < moleculeArr.length; j++) {\r\n      if (moleculeArr[j]._center !== null) {\r\n        bLow.set(nLimon, nLimon, nLimon);\r\n        bHight.set(-nLimon, -nLimon, -nLimon);\r\n        atomsRef = moleculeArr[j]._atoms.split(' ');\r\n        moleculeArr[j]._atoms = [];\r\n        atomsRef.forEach(cycleFunc);\r\n\r\n        moleculeArr[j]._center.addVectors(bLow, bHight);\r\n        moleculeArr[j]._center.multiplyScalar(0.5);\r\n      } else {\r\n        atomsRef = moleculeArr[j]._atoms.split(' ');\r\n        moleculeArr[j]._atoms = [];\r\n        atomsRef.forEach(cycleFuncInner);\r\n      }\r\n    }\r\n    atomMap = null;\r\n  }\r\n\r\n\r\n  _traverseData(dom) {\r\n    function isArray(o) {\r\n      return Object.prototype.toString.apply(o) === '[object Array]';\r\n    }\r\n\r\n    function parseNode(xmlNode, result) {\r\n      if (xmlNode.nodeName === '#text' && xmlNode.nodeValue.trim() === '') {\r\n        return;\r\n      }\r\n\r\n      const jsonNode = {};\r\n      jsonNode.xmlNode = xmlNode;\r\n      const existing = result[xmlNode.nodeName];\r\n      if (existing) {\r\n        if (!isArray(existing)) {\r\n          result[xmlNode.nodeName] = [existing, jsonNode];\r\n        } else {\r\n          result[xmlNode.nodeName].push(jsonNode);\r\n        }\r\n      } else {\r\n        result[xmlNode.nodeName] = jsonNode;\r\n      }\r\n\r\n      let length;\r\n      let i;\r\n      if (xmlNode.attributes) {\r\n        ({ length } = xmlNode.attributes);\r\n        for (i = 0; i < length; i++) {\r\n          const attribute = xmlNode.attributes[i];\r\n          jsonNode[attribute.nodeName] = attribute.nodeValue;\r\n        }\r\n      }\r\n\r\n      ({ length } = xmlNode.childNodes);\r\n      for (i = 0; i < length; i++) {\r\n        parseNode(xmlNode.childNodes[i], jsonNode);\r\n      }\r\n    }\r\n\r\n    const result = {};\r\n    if (dom.childNodes.length) {\r\n      parseNode(dom.childNodes[0], result);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  _findSuitableMolecule(data, molSet) {\r\n    for (const key in data) {\r\n      if (key === 'xmlNode') {\r\n        continue;\r\n      } else if (key === 'molecule') {\r\n        if (data.molecule) {\r\n          if (data.molecule.atomArray && data.molecule.atomArray.atom) {\r\n            molSet.push(data);\r\n          }\r\n          if (Array.isArray(data.molecule)) {\r\n            for (let i = 0; i < data.molecule.length; i++) {\r\n              if (data.molecule[i].atomArray && data.molecule[i].atomArray.atom) {\r\n                molSet.push({ molecule: data.molecule[i] });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (data[key] && data[key] !== null && typeof (data[key]) === 'object') {\r\n        this._findSuitableMolecule(data[key], molSet);\r\n      }\r\n    }\r\n  }\r\n\r\n  _selectComponents(text) {\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(text, 'application/xml');\r\n    const traversedData = this._traverseData(doc);\r\n    let rawData;\r\n    const self = this;\r\n\r\n    function prepareComponentCompound(data) {\r\n      let atoms = [];\r\n      if (data.molecule && data.molecule.atomArray && data.molecule.atomArray.atom) {\r\n        if (!Array.isArray(data.molecule.atomArray.atom)) {\r\n          atoms.push(data.molecule.atomArray.atom);\r\n        } else {\r\n          atoms = data.molecule.atomArray.atom;\r\n        }\r\n      } else if (!data.molecule) {\r\n        const ret = {};\r\n        ret.atomLabels = null;\r\n        ret.labelsCount = 1;\r\n        return ret;\r\n      }\r\n\r\n      if (data.molecule.molecule) {\r\n        self._extractSGroups(data.molecule.molecule, atoms);\r\n      }\r\n\r\n      let atom;\r\n      let count = atoms.length;\r\n      for (let i = 0; i < count; i++) {\r\n        atom = atoms[i];\r\n        atom.edges = [];\r\n      }\r\n\r\n      let localBond = [];\r\n      if (data.molecule.bondArray && data.molecule.bondArray.bond) {\r\n        if (!Array.isArray(data.molecule.bondArray.bond)) {\r\n          localBond.push(data.molecule.bondArray.bond);\r\n        } else {\r\n          localBond = data.molecule.bondArray.bond;\r\n        }\r\n      }\r\n      let bond;\r\n      count = localBond.length;\r\n      self._rebuidBondIndexes(atoms, localBond);\r\n\r\n      function addCurrBond(index) {\r\n        bond = localBond[index];\r\n        atom = atoms[bond.start];\r\n        if (!atom) {\r\n          return false;\r\n        }\r\n        atom.edges.push(bond.end);\r\n        atom = atoms[bond.end];\r\n        if (!atom) {\r\n          return false;\r\n        }\r\n        atom.edges.push(bond.start);\r\n        return true;\r\n      }\r\n\r\n      for (let i = 0; i < count; i++) {\r\n        if (!addCurrBond(i)) {\r\n          // ignore invalid bond\r\n          continue;\r\n        }\r\n        const orderAttr = bond.xmlNode.getAttribute('order');\r\n        const tc = parseInt(orderAttr, 10);\r\n        // the default bond order is unknown\r\n        localBond[i].order = 0;\r\n        localBond[i].type = Bond.BondType.UNKNOWN;\r\n        if (tc > 1) {\r\n          localBond[i].order = tc;\r\n        } else {\r\n          // another option - bond order is a string\r\n          const order = cOrderCharCodes[orderAttr];\r\n          if (order !== undefined) {\r\n            localBond[i].order = order;\r\n            if (orderAttr === 'A') {\r\n              localBond[i].type = Bond.BondType.AROMATIC;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      count = atoms.length;\r\n      for (let i = 0; i < count; i++) {\r\n        atom = atoms[i];\r\n        atom.edges.sort();\r\n      }\r\n\r\n      const labels = self._breadWidthSearch(atoms, 0); // for now\r\n\r\n      const retStruct = {};\r\n      retStruct.atoms = atoms;\r\n      retStruct.bonds = localBond;\r\n      retStruct.labels = labels.atomLabels;\r\n      retStruct.count = Math.min(1, labels.labelsCount); // for now\r\n      retStruct.curr = -1;\r\n      retStruct.originalCML = doc;\r\n\r\n      return retStruct;\r\n    }\r\n\r\n    if (traversedData.cml) {\r\n      rawData = traversedData.cml;\r\n    } else {\r\n      rawData = traversedData;\r\n    }\r\n    const retData = [];\r\n    const filteredData = [];\r\n    this._findSuitableMolecule(rawData, filteredData);\r\n    if (this._readOnlyOneMolecule && filteredData.length > 1) {\r\n      filteredData.splice(1, filteredData.length - 1);\r\n    }\r\n    filteredData.forEach((d) => {\r\n      const rd = prepareComponentCompound(d);\r\n      if (rd.atoms.length > 0) {\r\n        retData.push(rd);\r\n      }\r\n    });\r\n    return retData;\r\n  }\r\n\r\n  _packLabel(compId, molId) {\r\n    const shift = 16;\r\n    return (molId << shift) + compId;\r\n  }\r\n\r\n  _unpackLabel(l) {\r\n    const shift = 16;\r\n    const mask = (1 << shift) - 1;\r\n    return { molId: l >>> shift, compId: l & mask };\r\n  }\r\n\r\n  _breadWidthSearch(atoms, molID) {\r\n    const atomLabels = new Array(atoms.length);\r\n\r\n    let id;\r\n    for (id = 0; id < atomLabels.length; id++) {\r\n      atomLabels[id] = this._packLabel(0, molID);\r\n    }\r\n\r\n    const breadthQueue = [];\r\n    let componentID = 0;\r\n    let labeledAtoms = atoms.length;\r\n\r\n    while (labeledAtoms > 0) {\r\n      componentID++;\r\n\r\n      let startID = -1;\r\n      for (id = 0; id < atomLabels.length; id++) {\r\n        if (this._unpackLabel(atomLabels[id]).compId === 0) {\r\n          startID = id;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (startID < 0) {\r\n        break;\r\n      }\r\n\r\n      // Bread first search\r\n      breadthQueue.push(atoms[startID]);\r\n      atomLabels[startID] = this._packLabel(componentID, molID);\r\n      labeledAtoms--;\r\n\r\n      while (breadthQueue.length > 0) {\r\n        const curr = breadthQueue.shift();\r\n        if (!curr) {\r\n          continue;\r\n        }\r\n\r\n        for (let i = 0; i < curr.edges.length; i++) {\r\n          if (atomLabels[curr.edges[i]] !== componentID) {\r\n            breadthQueue.push(atoms[curr.edges[i]]);\r\n            atomLabels[curr.edges[i]] = componentID;\r\n            labeledAtoms--;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const ret = {};\r\n    ret.atomLabels = atomLabels;\r\n    ret.labelsCount = componentID;\r\n    return ret;\r\n  }\r\n\r\n  _parseBond(eAtom, mainAtom, order, type) {\r\n    if (eAtom >= 0) {\r\n      const h = [Math.min(eAtom, mainAtom), Math.max(eAtom, mainAtom)];\r\n      this._complex.addBond(h[0], h[1], order, type, true);\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const complex = this._complex;\r\n\r\n    const atoms = complex._atoms;\r\n    for (let i = 0, ni = atoms.length; i < ni; ++i) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    const { logger } = this;\r\n    for (let j = 0, nj = bonds.length; j < nj; ++j) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        logger.debug('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _parseSet(varData) {\r\n    const complex = this._complex = new Complex();\r\n    const data = varData;\r\n    const currentLabel = data.curr;\r\n    const { atoms, labels } = data;\r\n    let atom = null;\r\n    let i;\r\n    let j;\r\n    const count = atoms.length;\r\n\r\n    function addFunc(a) {\r\n      a.xmlNodeRef = atom;\r\n      if (atom.x2) {\r\n        atom.x3 = atom.x2;\r\n        delete atom.x2;\r\n      }\r\n      if (atom.y2) {\r\n        atom.y3 = atom.y2;\r\n        delete atom.y2;\r\n      }\r\n      if (!(atom.z3)) {\r\n        atom.z3 = '0.0';\r\n      }\r\n      atom.complexAtom = a;\r\n    }\r\n\r\n    let chains = {};\r\n    // parse atoms in label order\r\n    const reorder = [];\r\n    for (i = 0; i < count; i++) {\r\n      reorder.push(i);\r\n    }\r\n    reorder.sort((a, b) => labels[a] - labels[b]);\r\n    for (i = 0; i < count; i++) {\r\n      const atomCharge = 0;\r\n      const lLabel = labels[reorder[i]];\r\n      if (this._unpackLabel(lLabel).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[reorder[i]];\r\n        const atomFullNameStruct = atom.elementType;\r\n\r\n        if (atom.sgroupRef) {\r\n          const countRef = atom.sgroupRef.length;\r\n          for (let k = 0; k < countRef; ++k) {\r\n            complex._sgroups.push(atom.sgroupRef[k]);\r\n          }\r\n        }\r\n\r\n        if (atom.x3 || atom.x2) {\r\n          const currAtomComp = this._unpackLabel(lLabel).compId;\r\n          // use ' ' by default instead of synthetic creation of chain names\r\n          const chainID = ' '; //= String.fromCharCode('A'.charCodeAt(0) + currAtomComp);\r\n          const resSeq = currAtomComp;\r\n          const iCode = ' ';\r\n          let strLabel = currAtomComp.toString();\r\n          if (strLabel.length === 1) {\r\n            strLabel = `0${strLabel}`;\r\n          }\r\n          const resName = `N${strLabel}`;\r\n          let chain = chains[chainID];\r\n          if (!chain || chain.getName() !== chainID) {\r\n            chains[chainID] = chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n            this._residue = null;\r\n          }\r\n\r\n          let residue = this._residue;\r\n          if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n            this._residue = residue = chain.addResidue(resName, resSeq, iCode);\r\n          }\r\n\r\n          // _x, _y, _z, mname, mindex, atomNameFull, atomName, chainID, serial, isHet, atlLocInd, atomNameToTypeF\r\n          let xyz = null;\r\n          if (atom.x3) {\r\n            xyz = new THREE.Vector3(parseFloat(atom.x3), parseFloat(atom.y3), parseFloat(atom.z3));\r\n          } else if (atom.x2) {\r\n            xyz = new THREE.Vector3(parseFloat(atom.x2), parseFloat(atom.y2), 0);\r\n          }\r\n          let element = Element.ByName[atom.elementType.toUpperCase()];\r\n          if (!element) {\r\n            element = (JSON.parse(JSON.stringify(Element.ByName[\r\n              Object.keys(Element.ByName)[Object.keys(Element.ByName).length - 1]])));\r\n            element.number += 1;\r\n            element.name = atom.elementType.toUpperCase();\r\n            element.fullName = 'Unknown';\r\n            Element.ByName[atom.elementType.toUpperCase()] = element;\r\n          }\r\n          const atomSerial = parseInt(atom.id.replace(/[^0-9]/, ''), 10);\r\n          const added = residue.addAtom(\r\n            atomFullNameStruct, element, xyz, Element.Role.SG,\r\n            true, atomSerial, ' ', 1.0, 0.0, atomCharge,\r\n          );\r\n          if (atom.hydrogenCount) {\r\n            added.hydrogenCount = parseInt(atom.hydrogenCount, 10);\r\n          }\r\n          if (atom.mrvValence) {\r\n            added.valence = parseInt(atom.mrvValence, 10);\r\n          }\r\n          addFunc(added);\r\n        }\r\n      }\r\n    }\r\n    chains = null;// NOSONAR\r\n    for (i = 0; i < data.bonds.length; i++) {\r\n      const cb = data.bonds[i];\r\n      if (this._unpackLabel(labels[cb.start]).molId === this._unpackLabel(currentLabel).molId\r\n          && this._unpackLabel(labels[cb.end]).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[cb.start];\r\n        if (!atom || !(atoms[cb.end])) {\r\n          continue; // skip invalid\r\n        }\r\n        this._parseBond(\r\n          parseInt(atom.id.replace(/[^0-9]/, ''), 10),\r\n          parseInt(atoms[cb.end].id.replace(/[^0-9]/, ''), 10), cb.order, cb.type,\r\n        );\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < this._complex.getSGroupCount(); i++) {\r\n      const sGrp = this._complex.getSGroups()[i];\r\n      for (j = 0; j < sGrp._atoms.length; j++) {\r\n        sGrp._atoms[j] = sGrp._atoms[j].complexAtom;\r\n      }\r\n    }\r\n    for (i = 0; i < count; i++) {\r\n      if (this._unpackLabel(labels[i]).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[i];\r\n        atom.complexAtom = null;\r\n        delete atom.complexAtom;\r\n      }\r\n    }\r\n    this._complex.originalCML = data.originalCML;\r\n    this._fixBondsArray();\r\n    complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n    this._serialAtomMap = null;\r\n    this._complex = null;\r\n    return complex;\r\n  }\r\n\r\n  parseSync() {\r\n    const complexes = [];\r\n    const self = this;\r\n    const moleculaSet = this._selectComponents(this._data);\r\n    moleculaSet.forEach((molSet) => {\r\n      molSet.curr = 2;\r\n      if (molSet.count === 0) {\r\n        molSet.count = 1;\r\n      }\r\n      for (let i = 0; i < molSet.count; i++) {\r\n        molSet.curr = (i + 1);\r\n        complexes.push(self._parseSet(molSet, false));\r\n      }\r\n    });\r\n\r\n    let totalAtomsParsed = 0;\r\n    complexes.forEach((c) => {\r\n      totalAtomsParsed += c.getAtomCount();\r\n    });\r\n    if (totalAtomsParsed <= 0) {\r\n      throw new Error('The data does not contain valid atoms');\r\n    }\r\n\r\n    if (complexes.length > 1) {\r\n      const joinedComplex = new Complex();\r\n      joinedComplex.joinComplexes(complexes);\r\n      joinedComplex.originalCML = complexes[0].originalCML;\r\n      return joinedComplex;\r\n    }\r\n    if (complexes.length === 1) {\r\n      return complexes[0];\r\n    }\r\n    return new Complex();\r\n  }\r\n}\r\n\r\n\r\nCMLParser.formats = ['cml'];\r\nCMLParser.extensions = ['.cml'];\r\n\r\nexport default CMLParser;\r\n","!function(r,t){if(\"function\"==typeof define&&define.amd)define([\"exports\"],t);else if(\"object\"==typeof exports&&\"undefined\"!=typeof module)t(exports);else t(r.MMTF=r.MMTF||{})}(this,function(r){\"use strict\";function t(r,t,n){for(var e=(r.byteLength,0),i=n.length;i>e;e++){var o=n.charCodeAt(e);if(128>o)r.setUint8(t++,o>>>0&127|0);else if(2048>o)r.setUint8(t++,o>>>6&31|192),r.setUint8(t++,o>>>0&63|128);else if(65536>o)r.setUint8(t++,o>>>12&15|224),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128);else{if(!(1114112>o))throw new Error(\"bad codepoint \"+o);r.setUint8(t++,o>>>18&7|240),r.setUint8(t++,o>>>12&63|128),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128)}}}function n(r){for(var t=0,n=0,e=r.length;e>n;n++){var i=r.charCodeAt(n);if(128>i)t+=1;else if(2048>i)t+=2;else if(65536>i)t+=3;else{if(!(1114112>i))throw new Error(\"bad codepoint \"+i);t+=4}}return t}function e(r,i,o){var a=typeof r;if(\"string\"===a){var u=n(r);if(32>u)return i.setUint8(o,160|u),t(i,o+1,r),1+u;if(256>u)return i.setUint8(o,217),i.setUint8(o+1,u),t(i,o+2,r),2+u;if(65536>u)return i.setUint8(o,218),i.setUint16(o+1,u),t(i,o+3,r),3+u;if(4294967296>u)return i.setUint8(o,219),i.setUint32(o+1,u),t(i,o+5,r),5+u}if(r instanceof Uint8Array){var u=r.byteLength,s=new Uint8Array(i.buffer);if(256>u)return i.setUint8(o,196),i.setUint8(o+1,u),s.set(r,o+2),2+u;if(65536>u)return i.setUint8(o,197),i.setUint16(o+1,u),s.set(r,o+3),3+u;if(4294967296>u)return i.setUint8(o,198),i.setUint32(o+1,u),s.set(r,o+5),5+u}if(\"number\"===a){if(!isFinite(r))throw new Error(\"Number not finite: \"+r);if(Math.floor(r)!==r)return i.setUint8(o,203),i.setFloat64(o+1,r),9;if(r>=0){if(128>r)return i.setUint8(o,r),1;if(256>r)return i.setUint8(o,204),i.setUint8(o+1,r),2;if(65536>r)return i.setUint8(o,205),i.setUint16(o+1,r),3;if(4294967296>r)return i.setUint8(o,206),i.setUint32(o+1,r),5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return i.setInt8(o,r),1;if(r>=-128)return i.setUint8(o,208),i.setInt8(o+1,r),2;if(r>=-32768)return i.setUint8(o,209),i.setInt16(o+1,r),3;if(r>=-2147483648)return i.setUint8(o,210),i.setInt32(o+1,r),5;throw new Error(\"Number too small -0x\"+(-r).toString(16).substr(1))}if(null===r)return i.setUint8(o,192),1;if(\"boolean\"===a)return i.setUint8(o,r?195:194),1;if(\"object\"===a){var u,f=0,c=Array.isArray(r);if(c)u=r.length;else{var d=Object.keys(r);u=d.length}var f;if(16>u?(i.setUint8(o,u|(c?144:128)),f=1):65536>u?(i.setUint8(o,c?220:222),i.setUint16(o+1,u),f=3):4294967296>u&&(i.setUint8(o,c?221:223),i.setUint32(o+1,u),f=5),c)for(var l=0;u>l;l++)f+=e(r[l],i,o+f);else for(var l=0;u>l;l++){var v=d[l];f+=e(v,i,o+f),f+=e(r[v],i,o+f)}return f}throw new Error(\"Unknown type \"+a)}function i(r){var t=typeof r;if(\"string\"===t){var e=n(r);if(32>e)return 1+e;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(r instanceof Uint8Array){var e=r.byteLength;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(\"number\"===t){if(Math.floor(r)!==r)return 9;if(r>=0){if(128>r)return 1;if(256>r)return 2;if(65536>r)return 3;if(4294967296>r)return 5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return 1;if(r>=-128)return 2;if(r>=-32768)return 3;if(r>=-2147483648)return 5;throw new Error(\"Number too small -0x\"+r.toString(16).substr(1))}if(\"boolean\"===t||null===r)return 1;if(\"object\"===t){var e,o=0;if(Array.isArray(r)){e=r.length;for(var a=0;e>a;a++)o+=i(r[a])}else{var u=Object.keys(r);e=u.length;for(var a=0;e>a;a++){var s=u[a];o+=i(s)+i(r[s])}}if(16>e)return 1+o;if(65536>e)return 3+o;if(4294967296>e)return 5+o;throw new Error(\"Array or object too long 0x\"+e.toString(16))}throw new Error(\"Unknown type \"+t)}function o(r){var t=new ArrayBuffer(i(r)),n=new DataView(t);return e(r,n,0),new Uint8Array(t)}function a(r,t,n){return t?new r(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function u(r){return a(DataView,r)}function s(r){return a(Uint8Array,r)}function f(r){return a(Int8Array,r)}function c(r){return a(Int32Array,r,4)}function d(r){return a(Float32Array,r,4)}function l(r,t){var n=r.length/2;t||(t=new Int16Array(n));for(var e=0,i=0;n>e;++e,i+=2)t[e]=r[i]<<8^r[i+1]<<0;return t}function v(r,t){var n=r.length;t||(t=new Uint8Array(2*n));for(var e=u(t),i=0;n>i;++i)e.setInt16(2*i,r[i]);return s(t)}function g(r,t){var n=r.length/4;t||(t=new Int32Array(n));for(var e=0,i=0;n>e;++e,i+=4)t[e]=r[i]<<24^r[i+1]<<16^r[i+2]<<8^r[i+3]<<0;return t}function L(r,t){var n=r.length;t||(t=new Uint8Array(4*n));for(var e=u(t),i=0;n>i;++i)e.setInt32(4*i,r[i]);return s(t)}function h(r,t){var n=r.length;t||(t=new Float32Array(n/4));for(var e=u(t),i=u(r),o=0,a=0,s=n/4;s>o;++o,a+=4)e.setFloat32(a,i.getFloat32(a),!0);return t}function y(r,t,n){var e=r.length,i=1/t;n||(n=new Float32Array(e));for(var o=0;e>o;++o)n[o]=r[o]*i;return n}function m(r,t,n){var e=r.length;n||(n=new Int32Array(e));for(var i=0;e>i;++i)n[i]=Math.round(r[i]*t);return n}function p(r,t){var n,e;if(!t){var i=0;for(n=0,e=r.length;e>n;n+=2)i+=r[n+1];t=new r.constructor(i)}var o=0;for(n=0,e=r.length;e>n;n+=2)for(var a=r[n],u=r[n+1],s=0;u>s;++s)t[o]=a,++o;return t}function U(r){if(0===r.length)return new Int32Array;var t,n,e=2;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]&&(e+=2);var i=new Int32Array(e),o=0,a=1;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]?(i[o]=r[t-1],i[o+1]=a,a=1,o+=2):++a;return i[o]=r[r.length-1],i[o+1]=a,i}function b(r,t){var n=r.length;t||(t=new r.constructor(n)),n&&(t[0]=r[0]);for(var e=1;n>e;++e)t[e]=r[e]+t[e-1];return t}function I(r,t){var n=r.length;t||(t=new r.constructor(n)),t[0]=r[0];for(var e=1;n>e;++e)t[e]=r[e]-r[e-1];return t}function w(r,t){var n,e,i=r instanceof Int8Array?127:32767,o=-i-1,a=r.length;if(!t){var u=0;for(n=0;a>n;++n)r[n]<i&&r[n]>o&&++u;t=new Int32Array(u)}for(n=0,e=0;a>n;){for(var s=0;r[n]===i||r[n]===o;)s+=r[n],++n;s+=r[n],++n,t[e]=s,++e}return t}function C(r,t){var n,e=t?127:32767,i=-e-1,o=r.length,a=0;for(n=0;o>n;++n){var u=r[n];0===u?++a:a+=u===e||u===i?2:u>0?Math.ceil(u/e):Math.ceil(u/i)}var s=t?new Int8Array(a):new Int16Array(a),f=0;for(n=0;o>n;++n){var u=r[n];if(u>=0)for(;u>=e;)s[f]=e,++f,u-=e;else for(;i>=u;)s[f]=i,++f,u-=i;s[f]=u,++f}return s}function A(r,t){return b(p(r),t)}function x(r){return U(I(r))}function M(r,t,n){return y(p(r,c(n)),t,n)}function F(r,t){return U(m(r,t))}function S(r,t,n){return y(b(r,c(n)),t,n)}function E(r,t,n){return I(m(r,t),n)}function N(r,t,n){return y(w(r,c(n)),t,n)}function O(r,t,n){var e=w(r,c(n));return S(e,t,d(e))}function T(r,t,n){return C(E(r,t),n)}function k(r){var t=u(r),n=t.getInt32(0),e=t.getInt32(4),i=r.subarray(8,12),r=r.subarray(12);return[n,r,e,i]}function j(r,t,n,e){var i=new ArrayBuffer(12+e.byteLength),o=new Uint8Array(i),a=new DataView(i);return a.setInt32(0,r),a.setInt32(4,t),n&&o.set(n,8),o.set(e,12),o}function q(r){var t=r.length,n=s(r);return j(2,t,void 0,n)}function D(r){var t=r.length,n=L(r);return j(4,t,void 0,n)}function P(r,t){var n=r.length/t,e=L([t]),i=s(r);return j(5,n,e,i)}function z(r){var t=r.length,n=L(U(r));return j(6,t,void 0,n)}function B(r){var t=r.length,n=L(x(r));return j(8,t,void 0,n)}function V(r,t){var n=r.length,e=L([t]),i=L(F(r,t));return j(9,n,e,i)}function G(r,t){var n=r.length,e=L([t]),i=v(T(r,t));return j(10,n,e,i)}function R(r){var t={};return rr.forEach(function(n){void 0!==r[n]&&(t[n]=r[n])}),r.bondAtomList&&(t.bondAtomList=D(r.bondAtomList)),r.bondOrderList&&(t.bondOrderList=q(r.bondOrderList)),t.xCoordList=G(r.xCoordList,1e3),t.yCoordList=G(r.yCoordList,1e3),t.zCoordList=G(r.zCoordList,1e3),r.bFactorList&&(t.bFactorList=G(r.bFactorList,100)),r.atomIdList&&(t.atomIdList=B(r.atomIdList)),r.altLocList&&(t.altLocList=z(r.altLocList)),r.occupancyList&&(t.occupancyList=V(r.occupancyList,100)),t.groupIdList=B(r.groupIdList),t.groupTypeList=D(r.groupTypeList),r.secStructList&&(t.secStructList=q(r.secStructList,1)),r.insCodeList&&(t.insCodeList=z(r.insCodeList)),r.sequenceIndexList&&(t.sequenceIndexList=B(r.sequenceIndexList)),t.chainIdList=P(r.chainIdList,4),r.chainNameList&&(t.chainNameList=P(r.chainNameList,4)),t}function H(r){function t(r){for(var t={},n=0;r>n;n++){var e=o();t[e]=o()}return t}function n(t){var n=r.subarray(a,a+t);return a+=t,n}function e(t){var n=r.subarray(a,a+t);a+=t;var e=65535;if(t>e){for(var i=[],o=0;o<n.length;o+=e)i.push(String.fromCharCode.apply(null,n.subarray(o,o+e)));return i.join(\"\")}return String.fromCharCode.apply(null,n)}function i(r){for(var t=new Array(r),n=0;r>n;n++)t[n]=o();return t}function o(){var o,s,f=r[a];if(0===(128&f))return a++,f;if(128===(240&f))return s=15&f,a++,t(s);if(144===(240&f))return s=15&f,a++,i(s);if(160===(224&f))return s=31&f,a++,e(s);if(224===(224&f))return o=u.getInt8(a),a++,o;switch(f){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return s=u.getUint8(a+1),a+=2,n(s);case 197:return s=u.getUint16(a+1),a+=3,n(s);case 198:return s=u.getUint32(a+1),a+=5,n(s);case 202:return o=u.getFloat32(a+1),a+=5,o;case 203:return o=u.getFloat64(a+1),a+=9,o;case 204:return o=r[a+1],a+=2,o;case 205:return o=u.getUint16(a+1),a+=3,o;case 206:return o=u.getUint32(a+1),a+=5,o;case 208:return o=u.getInt8(a+1),a+=2,o;case 209:return o=u.getInt16(a+1),a+=3,o;case 210:return o=u.getInt32(a+1),a+=5,o;case 217:return s=u.getUint8(a+1),a+=2,e(s);case 218:return s=u.getUint16(a+1),a+=3,e(s);case 219:return s=u.getUint32(a+1),a+=5,e(s);case 220:return s=u.getUint16(a+1),a+=3,i(s);case 221:return s=u.getUint32(a+1),a+=5,i(s);case 222:return s=u.getUint16(a+1),a+=3,t(s);case 223:return s=u.getUint32(a+1),a+=5,t(s)}throw new Error(\"Unknown type 0x\"+f.toString(16))}var a=0,u=new DataView(r.buffer);return o()}function W(r,t,n,e){switch(r){case 1:return h(t);case 2:return f(t);case 3:return l(t);case 4:return g(t);case 5:return s(t);case 6:return p(g(t),new Uint8Array(n));case 7:return p(g(t));case 8:return A(g(t));case 9:return M(g(t),g(e)[0]);case 10:return O(l(t),g(e)[0]);case 11:return y(l(t),g(e)[0]);case 12:return N(l(t),g(e)[0]);case 13:return N(f(t),g(e)[0]);case 14:return w(l(t));case 15:return w(f(t))}}function X(r,t){t=t||{};var n=t.ignoreFields,e={};return nr.forEach(function(t){var i=n?-1!==n.indexOf(t):!1,o=r[t];i||void 0===o||(o instanceof Uint8Array?e[t]=W.apply(null,k(o)):e[t]=o)}),e}function J(r){return String.fromCharCode.apply(null,r).replace(/\\0/g,\"\")}function K(r,t,n){n=n||{};var e,i,o,a,u,s,f=n.firstModelOnly,c=t.onModel,d=t.onChain,l=t.onGroup,v=t.onAtom,g=t.onBond,L=0,h=0,y=0,m=0,p=0,U=-1,b=r.chainNameList,I=r.secStructList,w=r.insCodeList,C=r.sequenceIndexList,A=r.atomIdList,x=r.bFactorList,M=r.altLocList,F=r.occupancyList,S=r.bondAtomList,E=r.bondOrderList;for(e=0,i=r.chainsPerModel.length;i>e&&!(f&&L>0);++e){var N=r.chainsPerModel[L];for(c&&c({chainCount:N,modelIndex:L}),o=0;N>o;++o){var O=r.groupsPerChain[h];if(d){var T=J(r.chainIdList.subarray(4*h,4*h+4)),k=null;b&&(k=J(b.subarray(4*h,4*h+4))),d({groupCount:O,chainIndex:h,modelIndex:L,chainId:T,chainName:k})}for(a=0;O>a;++a){var j=r.groupList[r.groupTypeList[y]],q=j.atomNameList.length;if(l){var D=null;I&&(D=I[y]);var P=null;r.insCodeList&&(P=String.fromCharCode(w[y]));var z=null;C&&(z=C[y]),l({atomCount:q,groupIndex:y,chainIndex:h,modelIndex:L,groupId:r.groupIdList[y],groupType:r.groupTypeList[y],groupName:j.groupName,singleLetterCode:j.singleLetterCode,chemCompType:j.chemCompType,secStruct:D,insCode:P,sequenceIndex:z})}for(u=0;q>u;++u){if(v){var B=null;A&&(B=A[m]);var V=null;x&&(V=x[m]);var G=null;M&&(G=String.fromCharCode(M[m]));var R=null;F&&(R=F[m]),v({atomIndex:m,groupIndex:y,chainIndex:h,modelIndex:L,atomId:B,element:j.elementList[u],atomName:j.atomNameList[u],formalCharge:j.formalChargeList[u],xCoord:r.xCoordList[m],yCoord:r.yCoordList[m],zCoord:r.zCoordList[m],bFactor:V,altLoc:G,occupancy:R})}m+=1}if(g){var H=j.bondAtomList;for(u=0,s=j.bondOrderList.length;s>u;++u)g({atomIndex1:m-q+H[2*u],atomIndex2:m-q+H[2*u+1],bondOrder:j.bondOrderList[u]})}y+=1}h+=1}if(p=U+1,U=m-1,g&&S)for(u=0,s=S.length;s>u;u+=2){var W=S[u],X=S[u+1];(W>=p&&U>=W||X>=p&&U>=X)&&g({atomIndex1:W,atomIndex2:X,bondOrder:E?E[u/2]:null})}L+=1}}function Q(r){return o(R(r))}function Y(r,t){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var n;return n=r instanceof Uint8Array?H(r):r,X(n,t)}function Z(r,t,n,e){function i(){try{var r=Y(o.response);n(r)}catch(t){e(t)}}var o=new XMLHttpRequest;o.addEventListener(\"load\",i,!0),o.addEventListener(\"error\",e,!0),o.responseType=\"arraybuffer\",o.open(\"GET\",t+r.toUpperCase()),o.send()}function $(r,t,n){Z(r,or,t,n)}function _(r,t,n){Z(r,ar,t,n)}var rr=[\"mmtfVersion\",\"mmtfProducer\",\"unitCell\",\"spaceGroup\",\"structureId\",\"title\",\"depositionDate\",\"releaseDate\",\"experimentalMethods\",\"resolution\",\"rFree\",\"rWork\",\"bioAssemblyList\",\"ncsOperatorList\",\"entityList\",\"groupList\",\"numBonds\",\"numAtoms\",\"numGroups\",\"numChains\",\"numModels\",\"groupsPerChain\",\"chainsPerModel\"],tr=[\"xCoordList\",\"yCoordList\",\"zCoordList\",\"groupIdList\",\"groupTypeList\",\"chainIdList\",\"bFactorList\",\"atomIdList\",\"altLocList\",\"occupancyList\",\"secStructList\",\"insCodeList\",\"sequenceIndexList\",\"chainNameList\",\"bondAtomList\",\"bondOrderList\"],nr=rr.concat(tr),er=\"v1.1.0dev\",ir=\"//mmtf.rcsb.org/v1.0/\",or=ir+\"full/\",ar=ir+\"reduced/\";r.encode=Q,r.decode=Y,r.traverse=K,r.fetch=$,r.fetchReduced=_,r.version=er,r.fetchUrl=or,r.fetchReducedUrl=ar,r.encodeMsgpack=o,r.encodeMmtf=R,r.decodeMsgpack=H,r.decodeMmtf=X});","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport MMTF from '../../../vendor/js/mmtf';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst {\r\n  Complex,\r\n  Chain,\r\n  Atom,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Bond,\r\n  Assembly,\r\n  Molecule,\r\n} = chem;\r\n\r\nclass ArrayComparator {\r\n  constructor(original) {\r\n    this._original = Array.from(original);\r\n    this._original.sort();\r\n\r\n    this._sum = 0;\r\n    for (let i = 0; i < this._original.length; ++i) {\r\n      this._sum += this._original[i];\r\n    }\r\n  }\r\n\r\n  compare(candidate) {\r\n    const len = candidate.length;\r\n    if (len !== this._original.length) {\r\n      return false;\r\n    }\r\n\r\n    let sum = 0;\r\n    let i;\r\n    for (i = 0; i < len; ++i) {\r\n      sum += candidate[i];\r\n    }\r\n\r\n    if (sum !== this._sum) {\r\n      return false;\r\n    }\r\n\r\n    const sorted = Array.from(candidate);\r\n    sorted.sort();\r\n\r\n    for (i = 0; i < len; ++i) {\r\n      if (sorted[i] !== this._original[i]) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nArrayComparator.prototype.constructor = ArrayComparator;\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\n// see https://github.com/rcsb/mmtf-javascript/blob/master/src/mmtf-traverse.js\r\nconst secStructToType = [\r\n  StructuralElementType.HELIX_PI, // 0\r\n  StructuralElementType.BEND, // 1\r\n  StructuralElementType.HELIX_ALPHA, // 2\r\n  StructuralElementType.STRAND, // 3\r\n  StructuralElementType.HELIX_310, // 4\r\n  StructuralElementType.BRIDGE, // 5\r\n  StructuralElementType.TURN, // 6\r\n  StructuralElementType.COIL, // 7\r\n];\r\n\r\nfunction getFirstByte(buf) {\r\n  const bytes = new Uint8Array(buf, 0, 1);\r\n  return bytes[0];\r\n}\r\n\r\nclass MMTFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'mmtf';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    // check if it's binary MessagePack format containing a map (dictionary)\r\n    // see https://github.com/msgpack/msgpack/blob/master/spec.md\r\n    return _.isArrayBuffer(data) && ((getFirstByte(data) | 1) === 0xDF);\r\n  }\r\n\r\n  _onModel(_modelData) {\r\n  }\r\n\r\n  _onChain(chainData) {\r\n    if (chainData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    const chain = new Chain(this._complex, chainData.chainName);\r\n    this._complex._chains[chainData.chainIndex] = chain;\r\n    chain._index = chainData.chainIndex;\r\n  }\r\n\r\n  _onGroup(groupData) {\r\n    if (groupData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.settings.now.nowater) {\r\n      // skip water\r\n      if (groupData.groupName === 'HOH' || groupData.groupName === 'WAT') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const chain = this._complex._chains[groupData.chainIndex];\r\n    const icode = !groupData.insCode.charCodeAt(0) ? '' : groupData.insCode;\r\n    const residue = chain.addResidue(groupData.groupName, groupData.groupId, icode);\r\n    residue._index = groupData.groupIndex;\r\n\r\n    this._updateSecStructure(this._complex, residue, groupData);\r\n  }\r\n\r\n  _onAtom(atomData) {\r\n    if (atomData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    const altLoc = !atomData.altLoc.charCodeAt(0) ? '' : atomData.altLoc;\r\n    const atom = new Atom(\r\n      atomData.groupIndex, // we store residue index here to replace it later with actual reference\r\n      atomData.atomName,\r\n      Element.getByName(atomData.element.toUpperCase()),\r\n      new THREE.Vector3(atomData.xCoord, atomData.yCoord, atomData.zCoord),\r\n      Element.Role[atomData.atomName],\r\n      false, // hetero atoms will be marked later\r\n      atomData.atomId,\r\n      altLoc,\r\n      atomData.occupancy,\r\n      atomData.bFactor,\r\n      atomData.formalCharge,\r\n    );\r\n\r\n    this._complex._atoms[atomData.atomIndex] = atom;\r\n    atom.index = atomData.atomIndex;\r\n\r\n    this._serialAtomMap[atomData.atomId] = atom;\r\n  }\r\n\r\n  _onBond(bondData) {\r\n    const right = Math.max(bondData.atomIndex1, bondData.atomIndex2);\r\n    if (right >= this._complex._atoms.length) {\r\n      return;\r\n    }\r\n    const left = Math.min(bondData.atomIndex1, bondData.atomIndex2);\r\n    this._complex.addBond(\r\n      this._complex._atoms[left], this._complex._atoms[right],\r\n      bondData.bondOrder, Bond.BondType.UNKNOWN, true,\r\n    );\r\n  }\r\n\r\n  _updateSecStructure(complex, residue, groupData) {\r\n    const helixClasses = [3, -1, 1, -1, 5];\r\n\r\n    if (!_.isUndefined(groupData) && groupData.secStruct === this._ssType) {\r\n      residue._secondary = this._ssStruct;\r\n      if (this._ssStruct) {\r\n        this._ssStruct.term = residue;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!_.isUndefined(groupData)) {\r\n      // start new secondary structure\r\n      const type = secStructToType[groupData.secStruct];\r\n      this._ssType = groupData.secStruct;\r\n      this._ssStart = residue;\r\n\r\n      let struct = null;\r\n      switch (this._ssType) {\r\n        case -1: // undefined\r\n        case 7: // coil\r\n          break;\r\n        case 0: // pi helix\r\n        case 2: // alpha helix\r\n        case 4: // 3-10 helix\r\n          struct = new Helix(helixClasses[this._ssType], residue, residue, 0, '', '', 0);\r\n          complex._helices.push(struct);\r\n          break;\r\n        case 3: { // extended\r\n          const sheet = new Sheet('', 0);\r\n          complex._sheets.push(sheet);\r\n          struct = new Strand(sheet, residue, residue, 0, null, null);\r\n          break;\r\n        }\r\n        default:\r\n          if (type !== undefined) {\r\n            struct = new StructuralElement(type, residue, residue);\r\n          }\r\n          break;\r\n      }\r\n\r\n      this._ssStruct = struct;\r\n      residue._secondary = struct;\r\n      if (struct) {\r\n        complex.structures.push(struct);\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateMolecules(mmtfData) {\r\n    const entities = mmtfData.entityList;\r\n    if (!entities) {\r\n      return;\r\n    }\r\n\r\n    const chainsInModel0 = mmtfData.chainsPerModel[0];\r\n    for (let i = 0; i < entities.length; i++) {\r\n      const entity = entities[i];\r\n      const chains = entity.chainIndexList;\r\n      let residues = [];\r\n      for (let j = 0; j < chains.length; j++) {\r\n        const chainIndex = chains[j];\r\n        // skip chains in models other than the first one\r\n        if (chainIndex >= chainsInModel0) {\r\n          continue;\r\n        }\r\n        const chain = this._complex._chains[chainIndex];\r\n        residues = residues.concat(chain._residues.slice());\r\n      }\r\n      const molecule = new Molecule(this._complex, entity.description, i + 1);\r\n      molecule.residues = residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  // populate complex with chains, residues and atoms\r\n  _traverse(mmtfData) {\r\n    const self = this;\r\n\r\n    // get metadata\r\n    const { metadata } = this._complex;\r\n    metadata.id = mmtfData.structureId;\r\n    metadata.title = [];\r\n    metadata.title[0] = mmtfData.title;\r\n    metadata.date = mmtfData.releaseDate;\r\n    metadata.format = 'mmtf';\r\n\r\n    // create event callback functions\r\n    const eventCallbacks = {\r\n      onModel(modelData) {\r\n        self._onModel(modelData);\r\n      },\r\n      onChain(chainData) {\r\n        self._onChain(chainData);\r\n      },\r\n      onGroup(groupData) {\r\n        self._onGroup(groupData);\r\n      },\r\n      onAtom(atomData) {\r\n        self._onAtom(atomData);\r\n      },\r\n      onBond(bondData) {\r\n        self._onBond(bondData);\r\n      },\r\n    };\r\n\r\n    // temporary variables used during traversal to track secondary structures\r\n    this._ssType = -1;\r\n    this._ssStruct = null;\r\n    this._ssStart = null;\r\n\r\n    // traverse the structure and listen to the events\r\n    MMTF.traverse(mmtfData, eventCallbacks);\r\n\r\n    this._updateSecStructure(this._complex);\r\n    this._updateMolecules(mmtfData);\r\n  }\r\n\r\n  // During traversal atoms and residues don't come sequentially\r\n  // so a residue for certain atom can be unavailable. Thus we\r\n  // store residue index in atom.\r\n  // This function being called after traversal replaces the index\r\n  // with actual reference, and also populates atom lists in residues.\r\n  _linkAtomsToResidues() {\r\n    for (let i = 0; i < this._complex._atoms.length; ++i) {\r\n      const atom = this._complex._atoms[i];\r\n      const residue = this._complex._residues[atom.residue];\r\n      atom.residue = residue;\r\n      residue._atoms.push(atom);\r\n    }\r\n  }\r\n\r\n  _findSynonymousChains() {\r\n    const named = {};\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i];\r\n      const name = chain.getName();\r\n      if (!named.hasOwnProperty(name)) {\r\n        named[name] = [];\r\n      }\r\n\r\n      named[name].push(chain._index);\r\n    }\r\n\r\n    return named;\r\n  }\r\n\r\n  // NOTE: This function relies on original chain indices, so it must be called before any magic happens to chains.\r\n  _parseAssemblyInfo(mmtfData) {\r\n    let i;\r\n    let j;\r\n    let k;\r\n    const assemblies = [];\r\n    const { logger } = this;\r\n\r\n    for (i = 0; i < mmtfData.bioAssemblyList.length; ++i) {\r\n      const baInfo = mmtfData.bioAssemblyList[i];\r\n      if (baInfo.transformList.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      const chains = baInfo.transformList[0].chainIndexList;\r\n      const chainListCheck = new ArrayComparator(chains);\r\n\r\n      // build list of chain names\r\n      const chainNames = {};\r\n      for (j = 0; j < chains.length; ++j) {\r\n        chainNames[this._complex._chains[chains[j]].getName()] = 1;\r\n      }\r\n\r\n      // all chains with the same name should belong to assembly if one of them belongs\r\n      const allChains = [];\r\n      let name;\r\n      for (name in chainNames) {\r\n        if (chainNames.hasOwnProperty(name)) {\r\n          // just concat arrays -- there should be no duplicates\r\n          Array.prototype.push.apply(allChains, this._chainsByName[name]);\r\n        }\r\n      }\r\n      if (!chainListCheck.compare(allChains)) {\r\n        // assembly is missing some of the chains\r\n        logger.debug('MMTF: Assembly is missing some of the synonymous chains. Skipping...');\r\n      }\r\n\r\n      const a = new Assembly(this._complex);\r\n\r\n      // add chains to assembly\r\n      for (name in chainNames) {\r\n        if (chainNames.hasOwnProperty(name)) {\r\n          a.addChain(name);\r\n        }\r\n      }\r\n\r\n      // add unique matrices to assembly\r\n      a.addMatrix(new THREE.Matrix4().fromArray(baInfo.transformList[0].matrix).transpose());\r\n      for (j = 1; j < baInfo.transformList.length; ++j) {\r\n        const transform = baInfo.transformList[j];\r\n\r\n        if (!chainListCheck.compare(transform.chainIndexList)) {\r\n          // list of chains for this transform doesn't match that for other transforms\r\n          // this is illegal in our structure\r\n          logger.debug('MMTF: Chain lists differ for different transforms in one assembly. Skipping...');\r\n          continue;\r\n        }\r\n\r\n        const m = new THREE.Matrix4().fromArray(transform.matrix).transpose();\r\n\r\n        // check if matrix is already in the list\r\n        for (k = 0; k < a.matrices.length; ++k) {\r\n          if (a.matrices[k].equals(m)) {\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (k === a.matrices.length) {\r\n          a.addMatrix(m);\r\n        }\r\n      }\r\n\r\n      a.finalize();\r\n      assemblies.push(a);\r\n    }\r\n\r\n    return assemblies;\r\n  }\r\n\r\n  // NOTE: This function relies on original chain indices, so it must be called before any magic happens to chains.\r\n  _markHeteroAtoms(mmtfData) {\r\n    const chainsInModel0 = mmtfData.chainsPerModel[0];\r\n    for (let i = 0; i < mmtfData.entityList.length; ++i) {\r\n      const entity = mmtfData.entityList[i];\r\n      if (entity.type !== 'polymer') {\r\n        for (let j = 0; j < entity.chainIndexList.length; ++j) {\r\n          const chainIndex = entity.chainIndexList[j];\r\n          // skip chains in models other than the first one\r\n          if (chainIndex >= chainsInModel0) {\r\n            continue;\r\n          }\r\n          const chain = this._complex._chains[chainIndex];\r\n          for (let k = 0; k < chain._residues.length; ++k) {\r\n            const res = chain._residues[k];\r\n            for (let m = 0; m < res._atoms.length; ++m) {\r\n              res._atoms[m].het = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // joins chains with the same name into single chain\r\n  _joinSynonymousChains() {\r\n    let i;\r\n    let j;\r\n\r\n    const primaryChainsArray = [];\r\n    const primaryChainsHash = {};\r\n\r\n    // join chains\r\n    for (i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i];\r\n      const name = chain.getName();\r\n      if (!primaryChainsHash.hasOwnProperty(name)) {\r\n        // new name -- this is a primary chain\r\n        primaryChainsHash[name] = chain;\r\n        chain._index = primaryChainsArray.length; // update index as this array will later replace original chain list\r\n        primaryChainsArray.push(chain);\r\n        continue;\r\n      }\r\n\r\n      // this chain should be joined with the primary chain of the same name\r\n      const primary = primaryChainsHash[name];\r\n      for (j = 0; j < chain._residues.length; ++j) {\r\n        const residue = chain._residues[j];\r\n        primary._residues.push(residue);\r\n        residue._chain = primary;\r\n      }\r\n    }\r\n\r\n    // replace chains list with one containing only primary chains\r\n    // dropping references to all chains but primary\r\n    this._complex._chains = primaryChainsArray;\r\n  }\r\n\r\n  parseSync() {\r\n    const mmtfData = MMTF.decode(this._data);\r\n\r\n    this._complex = new Complex();\r\n    this._serialAtomMap = {}; // filled during traversal\r\n\r\n    this._traverse(mmtfData);\r\n    this._linkAtomsToResidues();\r\n    this._markHeteroAtoms(mmtfData);\r\n    this._chainsByName = this._findSynonymousChains();\r\n    Array.prototype.push.apply(this._complex.units, this._parseAssemblyInfo(mmtfData));\r\n    this._joinSynonymousChains();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n\r\n    return this._complex;\r\n  }\r\n}\r\n\r\nMMTFParser.formats = ['mmtf'];\r\nMMTFParser.extensions = ['.mmtf'];\r\nMMTFParser.binary = true;\r\n\r\nexport default MMTFParser;\r\n","class ParsingError extends Error {\r\n  constructor(message, line, column) {\r\n    super(`data:${line}:${column}: ${message}`);\r\n\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(this, ParsingError);\r\n    }\r\n\r\n    this.name = 'ParsingError';\r\n    this.parseLine = line;\r\n    this.parseColumn = column;\r\n  }\r\n}\r\n\r\nexport default ParsingError;\r\n","import _ from 'lodash';\r\nimport ParsingError from './ParsingError';\r\n\r\n// Implemented and being tested against: https://www.iucr.org/resources/cif/spec/version1.1/cifsyntax\r\n\r\nfunction _isWhitespace(ch) {\r\n  return ch === 32 || ch === 10 || ch === 13 || ch === 9;\r\n}\r\n\r\nfunction _inlineIndexOf(ch0, str, idx) {\r\n  const len = str.length;\r\n  let ch = -1;\r\n  while (idx < len) {\r\n    ch = str.charCodeAt(idx);\r\n    if (ch === ch0 || ch === 10) {\r\n      break;\r\n    }\r\n    ++idx;\r\n  }\r\n  return ch === ch0 ? idx : -1;\r\n}\r\n\r\nexport default function readCIF(source) {\r\n  let i = 0;\r\n  let j = 0;\r\n  const n = source.length;\r\n  let code = NaN;\r\n  let newline = true;\r\n  let line = 1;\r\n  let column = 1;\r\n  let begin;\r\n  let state = 0; // 0 - start, 1 - block, 2 - item, 3 - loop, 4 - values, 5 - value\r\n  const result = {};\r\n  let block = {};\r\n  let keys = [];\r\n  let keysCount = 0;\r\n  let key = '';\r\n  let values = [];\r\n  let valuesCount = 0;\r\n  let value;\r\n\r\n  function _parseValue() {\r\n    let val;\r\n    if ((code === 46 || code === 63) && (i + 1 >= n || _isWhitespace(source.charCodeAt(i + 1)))) { // '.' or '?' .....\r\n      // it's a missing value\r\n      ++column;\r\n      ++i;\r\n      return undefined;\r\n    }\r\n    if (newline && code === 59) { // ';' ......................................................................\r\n      // parse multi-line string\r\n      j = i;\r\n      let lines = 0;\r\n      do {\r\n        j = _inlineIndexOf(10, source, j + 1); // '\\n'\r\n        if (j === -1) {\r\n          throw new ParsingError('Unterminated text block found', line, column);\r\n        }\r\n        ++lines;\r\n      } while ((j + 1 < n && source.charCodeAt(j + 1) !== code) || j + 1 >= n);\r\n      val = source.substring(i + 1, j).replace(/\\r/g, '');\r\n      i = j + 2;\r\n      line += lines;\r\n      column = 1;\r\n      newline = false;\r\n      return val;\r\n    }\r\n    if (code === 39 || code === 34) { // ''' or '\"' ...........................................................\r\n      // parse quoted string\r\n      j = i;\r\n      do {\r\n        j = _inlineIndexOf(code, source, j + 1);\r\n        if (j === -1) {\r\n          throw new ParsingError('Unterminated quoted string found', line, column);\r\n        }\r\n      } while (j + 1 < n && !_isWhitespace(source.charCodeAt(j + 1)));\r\n      val = source.substring(i + 1, j);\r\n      column += j - i + 1;\r\n      i = j + 1;\r\n      return val;\r\n    } // ......................................................................................................\r\n    // parse until the first whitespace\r\n    j = i;\r\n    while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n      ++j;\r\n    }\r\n    val = source.substring(i, j);\r\n    column += j - i;\r\n    i = j;\r\n    // try to convert to a number\r\n    const num = Number(val);\r\n    if (!Number.isNaN(num)) {\r\n      return num;\r\n    }\r\n    // or leave as an unquoted string\r\n    return val;\r\n  }\r\n\r\n  function _storeKey(tag) {\r\n    keys[keysCount++] = tag;\r\n  }\r\n\r\n  function _storeValue(val) {\r\n    const keyIndex = valuesCount % keysCount;\r\n    values[keyIndex].push(val);\r\n    ++valuesCount;\r\n    return val;\r\n  }\r\n\r\n  while (i <= n) {\r\n    code = source.charCodeAt(i); // 'NaN' in place of '<eof>'\r\n    if (code === 13) { // '\\r' .......................................................................................\r\n      // just ignore\r\n    } else if (code === 10) { // '\\n' ................................................................................\r\n      // take note of new lines\r\n      newline = true;\r\n      ++line;\r\n      column = 1;\r\n    } else {\r\n      // process inline characters\r\n      if (code === 32 || code === 9) { // ' ' or '\\t' ................................................................\r\n        // just ignore\r\n      } else if (code === 35) { // '#' ...............................................................................\r\n        // skip the comment until before the end of the line\r\n        i = _inlineIndexOf(10, source, i + 1); // '\\n'\r\n        if (i === -1) {\r\n          break;\r\n        } else {\r\n          continue; // don't forget to process the new line\r\n        }\r\n      } else if (state === 0) { // start =============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          j = i + 5;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // add new data block\r\n            result[source.substring(begin, i)] = block = {};\r\n            state = 1; // block\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Data block name missing', line, column);\r\n          }\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          break;\r\n        } else { // ..................................................................................................\r\n          throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n        }\r\n      } else if (state === 1) { // block =============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          state = 0; // start\r\n          continue; // parse again in a different state\r\n        } else if (code === 95) { // '_' .............................................................................\r\n          j = i + 1;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // start new item\r\n            key = source.substring(begin, i);\r\n            state = 2; // item\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Tag name missing', line, column);\r\n          }\r\n        } else if ((code === 76 || code === 108) && source.substr(i + 1, 4).toLowerCase() === 'oop_') { // 'loop_' ...\r\n          i += 5;\r\n          column += 5;\r\n          if (i < n && !_isWhitespace(source.charCodeAt(i))) {\r\n            throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n          } else {\r\n            // start new loop\r\n            keys = [];\r\n            keysCount = 0;\r\n            values = [];\r\n            valuesCount = 0;\r\n            state = 3; // loop\r\n            continue; // don't forget to process the whitespace\r\n          }\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          break;\r\n        } else { // ..................................................................................................\r\n          throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n        }\r\n      } else if (state === 2) { // item ==============================================================================\r\n        if (Number.isNaN(code)) {\r\n          break;\r\n        }\r\n        value = _parseValue();\r\n        _.set(block, key, value);\r\n        state = 1; // block\r\n        continue;\r\n      } else if (state === 3) { // loop ==============================================================================\r\n        if (code === 95) { // '_' ....................................................................................\r\n          j = i + 1;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // add new key\r\n            _storeKey(source.substring(begin, i));\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Tag name missing', line, column);\r\n          }\r\n        } else { // ..................................................................................................\r\n          if (keysCount > 0) {\r\n            for (let keyIndex = 0; keyIndex < keysCount; ++keyIndex) {\r\n              value = [];\r\n              values[keyIndex] = value;\r\n              _.set(block, keys[keyIndex], value);\r\n            }\r\n            state = 4;\r\n            continue; // parse again in a different state\r\n          }\r\n          throw new ParsingError('Data tags are missing inside a loop', line, column);\r\n        }\r\n      } else if (state === 4) { // values ============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          state = 0; // start\r\n        } else if (code === 95) { // '_' .............................................................................\r\n          state = 1; // block\r\n        } else if ((code === 76 || code === 108) && source.substr(i + 1, 4).toLowerCase() === 'oop_') { // 'loop_' ...\r\n          state = 1; // block\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          state = 0;\r\n        } else { // ..................................................................................................\r\n          _storeValue(_parseValue());\r\n        }\r\n        continue; // parse again in a different state\r\n      } else { // ====================================================================================================\r\n        throw new ParsingError(`Unexpected internal state ${state}`, line, column);\r\n      }\r\n\r\n      newline = false;\r\n      ++column;\r\n    }\r\n    ++i;\r\n  }\r\n\r\n  if (state === 2) { // item\r\n    throw new ParsingError(`Unexpected end of file in state ${state}`, line, column);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\nimport readCIF from './readCIF';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Assembly,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst cRequiredAtomFields = [\r\n  'auth_seq_id',\r\n  'Cartn_x',\r\n  'Cartn_y',\r\n  'Cartn_z',\r\n  'label_atom_id',\r\n];\r\n\r\nconst cSecondaryCoding = {\r\n  helx: 'helix',\r\n  turn: 'turn',\r\n  strn: 'strand',\r\n};\r\n\r\nfunction getTypeFromId(string) {\r\n  const typeId = /[A-Za-z]+/.exec(string);\r\n  if (!typeId) {\r\n    return null;\r\n  }\r\n\r\n  return cSecondaryCoding[typeId[0].toLowerCase()];\r\n}\r\n\r\n/**\r\n * Make valid object an array\r\n * @param arrayLikeObject\r\n * @return {array, object} array or object\r\n */\r\nfunction arrize(arrayLikeObject) {\r\n  if (arrayLikeObject === null || arrayLikeObject === undefined || _.isArray(arrayLikeObject)) {\r\n    return arrayLikeObject;\r\n  }\r\n  return [arrayLikeObject];\r\n}\r\n\r\nfunction nameToElement(name) {\r\n  // http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\r\n  //\r\n  // http://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note1\r\n  //\r\n  // Atom names start with element symbols right-justified in columns 13-14\r\n  // as permitted by the length of the name. For example, the symbol FE for\r\n  // iron appears in columns 13-14, whereas the symbol C for carbon appears\r\n  // in column 14 (see Misaligned Atom Names). If an atom name has four\r\n  // characters, however, it must start in column 13 even if the element\r\n  // symbol is a single character (for example, see Hydrogen Atoms).\r\n\r\n  const veryLong = name.trim().length === 4;\r\n  return name.slice(0, veryLong ? 1 : 2).trim();\r\n}\r\n\r\nclass AtomDataError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'AtomDataError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction _getOperations(operList) {\r\n  if (!operList) {\r\n    return null;\r\n  }\r\n  const idc = arrize(operList.id);\r\n  const { matrix, vector } = operList;\r\n  if (!idc || !matrix || !vector) {\r\n    return null;\r\n  }\r\n\r\n  const ops = [];\r\n  for (let i = 0, n = idc.length; i < n; ++i) {\r\n    const mtx = new THREE.Matrix4();\r\n    const { elements } = mtx;\r\n\r\n    for (let row = 0; row < 3; ++row) {\r\n      const matrixData = matrix[row + 1];\r\n      elements[row] = arrize(matrixData[1])[i];\r\n      elements[row + 4] = arrize(matrixData[2])[i];\r\n      elements[row + 8] = arrize(matrixData[3])[i];\r\n      elements[row + 12] = arrize(vector[row + 1])[i];\r\n    }\r\n    ops[idc[i]] = mtx;\r\n  }\r\n  return ops;\r\n}\r\n\r\nfunction _extractOperations(assemblyGen, opsDict) {\r\n  assemblyGen = _.isString(assemblyGen) ? assemblyGen : `${assemblyGen}`;\r\n  const l = assemblyGen.replace(/\\)\\s*\\(/g, '!').replace(/[()']/g, '');\r\n  const groupStr = l.split('!');\r\n  const gps = [];\r\n\r\n  for (let grIdx = 0, grCount = groupStr.length; grIdx < grCount; ++grIdx) {\r\n    const gr = groupStr[grIdx].split(',');\r\n    const gp = [];\r\n    let idx = 0;\r\n    for (let i = 0, n = gr.length; i < n; ++i) {\r\n      const s = gr[i];\r\n      if (s.includes('-')) {\r\n        const es = s.split('-');\r\n        let j = parseInt(es[0], 10);\r\n        const m = parseInt(es[1], 10);\r\n        for (; j <= m; ++j) {\r\n          gp[idx++] = opsDict[j];\r\n        }\r\n      } else {\r\n        gp[idx++] = opsDict[s];\r\n      }\r\n    }\r\n    gps.push(gp);\r\n  }\r\n\r\n  // traverse all groups from the end of array and make all mults\r\n  const matrices = [];\r\n  let cnt = 0;\r\n  function traverse(level, mtx) {\r\n    for (let ii = 0, nn = gps[level].length; ii < nn; ++ii) {\r\n      const newMtx = mtx ? mtx.clone() : new THREE.Matrix4();\r\n      newMtx.multiplyMatrices(gps[level][ii], newMtx);\r\n      if (level === 0) {\r\n        matrices[cnt++] = newMtx;\r\n      } else {\r\n        traverse(level - 1, newMtx);\r\n      }\r\n    }\r\n  }\r\n  traverse(gps.length - 1);\r\n  return matrices;\r\n}\r\n\r\nclass CIFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this.asymDict = {};\r\n    this.molecules = [];\r\n    this._options.fileType = 'cif';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && /^\\s*data_/i.test(data);\r\n  }\r\n\r\n  parseSync() {\r\n    this.logger.info('Parsing CIF file..');\r\n    const data = readCIF(this._data);\r\n    return this._toComplex(data);\r\n  }\r\n\r\n  /**\r\n   * Convert intermediate structure into our valid Complex object\r\n   * @param cifData intermediate CIF object\r\n   * @returns {Complex} complex\r\n   * @private\r\n   */\r\n  _toComplex(cifData) {\r\n    const complex = new Complex();\r\n    const complexData = cifData[Object.keys(cifData)[0]];\r\n    this._extractAtoms(complex, complexData);\r\n    this._extractSecondary(complex, complexData);\r\n    this._extractAssemblies(complex, complexData);\r\n    this._extractMolecules(complex, complexData);\r\n    this._extractMetadata(complex, complexData);\r\n    complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n    });\r\n\r\n    return complex;\r\n  }\r\n\r\n\r\n  /**\r\n   * Extract metadata\r\n   * @param complex structure to fill\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n\r\n  _extractMetadata(complex, complexData) {\r\n    const { metadata } = complex;\r\n    metadata.id = complexData.entry.id;\r\n    metadata.classification = complexData.struct_keywords.pdbx_keywords;\r\n    const databaserev = complexData.database_PDB_rev;\r\n    metadata.date = (databaserev && databaserev.date_original) ? databaserev.date_original : '';\r\n    metadata.format = 'cif';\r\n    metadata.title = [];\r\n    metadata.title[0] = complexData.struct.title;\r\n  }\r\n\r\n  /**\r\n   * Extract molecules information from CIF structure (should be called strictly after _extractAtoms)\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractMolecules(complex, complexData) {\r\n    const molData = complexData.entity;\r\n    const names = arrize(molData.pdbx_description);\r\n    const count = names.length;\r\n    let i;\r\n\r\n    // molecules names from cif\r\n    for (i = 0; i < count; i++) {\r\n      this.molecules[i].name = names[i];\r\n    }\r\n\r\n    // reorganize molecules for complex and check chains\r\n    const molecules = complex.getMolecules();\r\n    for (i = 0; i < count; i++) {\r\n      const molecule = this.molecules[i];\r\n      molecules[i] = new Molecule(complex, molecule.name, i + 1);\r\n      molecules[i].residues = molecule.residues;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract atom information from CIF structure and fill complex\r\n   * @param {Complex} complex\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractAtoms(complex, complexData) {\r\n    const atomData = complexData.atom_site;\r\n    if (!atomData) {\r\n      throw new AtomDataError('CIF parsing error: atom_site is not specified!');\r\n    }\r\n\r\n    for (let f = 0, n = cRequiredAtomFields.length; f < n; ++f) {\r\n      if (!atomData[cRequiredAtomFields[f]]) {\r\n        throw new AtomDataError(`CIF parsing error: requires field ${cRequiredAtomFields[f]} not found!`);\r\n      }\r\n    }\r\n\r\n    const { asymDict } = this;\r\n    // required fields\r\n    const resIdc = arrize(atomData.auth_seq_id);\r\n    const x = arrize(atomData.Cartn_x);\r\n    const y = arrize(atomData.Cartn_y);\r\n    const z = arrize(atomData.Cartn_z);\r\n    const names = arrize(atomData.label_atom_id);\r\n    const count = names.length;\r\n    // optional fields\r\n    const group = arrize(atomData.group_PDB) || [];\r\n    const chainIdc = arrize(atomData.auth_asym_id) || [];\r\n    const chainLabelIdc = arrize(atomData.label_asym_id) || [];\r\n    const serials = arrize(atomData.id) || [];\r\n    const iCodes = arrize(atomData.pdbx_PDB_ins_code) || [];\r\n    const resNames = arrize(atomData.label_comp_id) || [];\r\n    const elements = arrize(atomData.type_symbol) || [];\r\n    const tempFactors = arrize(atomData.B_iso_or_equiv) || [];\r\n    const occupancies = arrize(atomData.occupancy) || [];\r\n    const charges = arrize(atomData.pdbx_formal_charge) || [];\r\n    const altLocs = arrize(atomData.label_alt_id) || [];\r\n    const models = arrize(atomData.pdbx_PDB_model_num) || [];\r\n    const molecules = arrize(atomData.label_entity_id) || [];\r\n\r\n    let chain = null;\r\n    let residue = null;\r\n    for (let i = 0; i < count; ++i) {\r\n      const model = models[i] || 1;\r\n      if (model !== 1) {\r\n        continue;\r\n      }\r\n      const chainID = String(chainIdc[i] || ' ');\r\n\r\n      if (!chain || chain.getName() !== chainID) {\r\n        chain = complex.getChain(chainID) || complex.addChain(chainID);\r\n      }\r\n      asymDict[String(chainLabelIdc[i] || ' ')] = chainID;\r\n      const resSeq = resIdc[i];\r\n      const iCode = String(iCodes[i] || ' ');\r\n      const resName = String(resNames[i] || '');\r\n      if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n        residue = chain.addResidue(resName, resSeq, iCode);\r\n\r\n        // store molecule (entity)\r\n        const moleculeIdx = molecules[i] - 1;\r\n        let entity = this.molecules[moleculeIdx];\r\n        if (!entity) {\r\n          this.molecules[moleculeIdx] = { name: '', residues: [] };\r\n          entity = this.molecules[moleculeIdx];\r\n        }\r\n        entity.residues.push(residue);\r\n      }\r\n\r\n      const name = names[i];\r\n      const element = elements[i] || nameToElement(name);\r\n      const type = Element.getByName(element);\r\n      const role = Element.Role[name.trim()];\r\n      const xyz = new THREE.Vector3(x[i], y[i], z[i]);\r\n      const het = group[i] === 'HETATM' || false;\r\n      const serial = serials[i] || i;\r\n      const tempFactor = tempFactors[i] || 0.0;\r\n      const occupancy = occupancies[i] || 0.0;\r\n      const altLoc = String(altLocs[i] || '');\r\n      const charge = charges[i] || 0;\r\n\r\n      residue.addAtom(\r\n        name, type, xyz,\r\n        role, het, serial, altLoc, occupancy, tempFactor, charge,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts secondary structure information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex - complex to fill\r\n   * @param complexData - CIF complex data\r\n   * @private\r\n   */\r\n  _extractSecondary(complex, complexData) {\r\n    if (complexData.struct_conf) {\r\n      this._extractConfs(complex, complexData.struct_conf);\r\n    }\r\n    if (complexData.struct_sheet_range) {\r\n      this._extractSheets(complex, complexData.struct_sheet_range);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts sheets information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex\r\n   * @param sheetData\r\n   * @private\r\n   */\r\n  _extractSheets(complex, sheetData) {\r\n    const { asymDict } = this;\r\n    if (!sheetData.sheet_id || !sheetData.id || !sheetData.beg_label_seq_id || !sheetData.end_label_seq_id\r\n      || !sheetData.beg_label_asym_id) {\r\n      return;\r\n    }\r\n    // Strand(sheet, start, end, sense, cur, prev)\r\n    const sheets = complex._sheets;\r\n\r\n    function getSheet(name) {\r\n      const n = sheets.length;\r\n      for (let i = 0; i < n; ++i) {\r\n        if (sheets[i]._name === name) {\r\n          return sheets[i];\r\n        }\r\n      }\r\n      sheets[n] = new Sheet(name, 0);\r\n      return sheets[n];\r\n    }\r\n\r\n    const sheetNames = arrize(sheetData.sheet_id);\r\n    const strandNames = arrize(sheetData.id);\r\n    const starts = arrize(sheetData.beg_auth_seq_id);\r\n    const ends = arrize(sheetData.end_auth_seq_id);\r\n    const chains = arrize(sheetData.beg_label_asym_id);\r\n    const stICodes = arrize(sheetData.pdbx_beg_PDB_ins_code) || [];\r\n    const endICodes = arrize(sheetData.pdbx_end_PDB_ins_code) || [];\r\n\r\n    for (let i = 0, n = strandNames.length; i < n; ++i) {\r\n      const chain = complex.getChain(asymDict[chains[i]]);\r\n      const sheet = getSheet(sheetNames[i]);\r\n      const startIdx = starts[i];\r\n      const endIdx = ends[i];\r\n      const startICode = stICodes[i] || ' ';\r\n      const endICode = endICodes[i] || ' ';\r\n\r\n      const start = chain.findResidue(startIdx, startICode);\r\n      const end = chain.findResidue(endIdx, endICode);\r\n\r\n      // TODO think about last condition\r\n      if (!start || !end) {\r\n        continue;\r\n      }\r\n\r\n      const strand = new Strand(sheet, start[0], end[0], 0, null, null);\r\n      const residues = chain.getResidues();\r\n      for (let r = start[1]; r <= end[1]; ++r) {\r\n        residues[r]._secondary = strand;\r\n      }\r\n      sheet.addStrand(strand);\r\n      complex.structures.push(strand);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts helix/turn/strand(?) information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex\r\n   * @param helicesData\r\n   * @private\r\n   */\r\n  _extractConfs(complex, helicesData) {\r\n    const { asymDict } = this;\r\n    if (!helicesData.conf_type_id || !helicesData.beg_label_seq_id || !helicesData.end_label_seq_id\r\n      || !helicesData.beg_label_asym_id) {\r\n      return;\r\n    }\r\n\r\n    const types = arrize(helicesData.conf_type_id);\r\n    const starts = arrize(helicesData.beg_auth_seq_id);\r\n    const stICodes = arrize(helicesData.pdbx_beg_PDB_ins_code) || [];\r\n    const ends = arrize(helicesData.end_auth_seq_id);\r\n    const endICodes = arrize(helicesData.pdbx_end_PDB_ins_code) || [];\r\n    const comments = arrize(helicesData.details) || [];\r\n    const lengths = arrize(helicesData.pdbx_PDB_helix_length) || [];\r\n    const helixClasses = arrize(helicesData.pdbx_PDB_helix_class) || [];\r\n    const names = arrize(helicesData.id) || [];\r\n    const chains = arrize(helicesData.beg_label_asym_id);\r\n\r\n    for (let i = 0, n = types.length; i < n; ++i) {\r\n      const type = getTypeFromId(types[i]);\r\n      if (!type) {\r\n        continue;\r\n      }\r\n      const name = names[i] || types[i];\r\n      const chain = complex.getChain(asymDict[chains[i]]);\r\n\r\n      const startIdx = starts[i];\r\n      const endIdx = ends[i];\r\n      const startICode = stICodes[i] || ' ';\r\n      const endICode = endICodes[i] || ' ';\r\n\r\n      const start = chain.findResidue(startIdx, startICode);\r\n      const end = chain.findResidue(endIdx, endICode);\r\n\r\n      // TODO think about last condition\r\n      if (!start || !end) {\r\n        continue;\r\n      }\r\n      const comment = comments[i] || '';\r\n      const length = lengths[i] || 0;\r\n      const helixClass = helixClasses[i] || ' ';\r\n      let struct;\r\n      if (type === 'helix') {\r\n        const idx = complex._helices.length;\r\n        struct = new Helix(helixClass, start[0], end[0], idx, name, comment, length);\r\n        complex.addHelix(struct);\r\n        complex.structures.push(struct);\r\n      } else if (type === 'turn') {\r\n        struct = new StructuralElement(StructuralElement.Type.TURN, start[0], end[0]);\r\n        complex.structures.push(struct);\r\n      } else {\r\n        struct = null;\r\n      }\r\n      if (!struct) {\r\n        continue;\r\n      }\r\n      const residues = chain.getResidues();\r\n      for (let r = start[1]; r <= end[1]; ++r) {\r\n        residues[r]._secondary = struct;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Extract biological assemblies information from CIF structure and fill complex\r\n   * @param {Complex} complex\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractAssemblies(complex, complexData) {\r\n    const { asymDict } = this;\r\n    const asmGen = complexData.pdbx_struct_assembly_gen;\r\n    if (!asmGen) {\r\n      return;\r\n    }\r\n\r\n    const asmIdx = arrize(asmGen.assembly_id);\r\n    const asmOper = arrize(asmGen.oper_expression);\r\n    const asmList = arrize(asmGen.asym_id_list);\r\n    if (!asmIdx || !asmOper || !asmList) {\r\n      return;\r\n    }\r\n\r\n    const operList = _getOperations(complexData.pdbx_struct_oper_list);\r\n    if (!operList) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0, n = asmIdx.length; i < n; ++i) {\r\n      const asm = new Assembly(complex);\r\n      const assemblyOps = _extractOperations(asmOper[i], operList);\r\n      const entries = asmList[i].split(',');\r\n      for (let ii = 0, nn = entries.length; ii < nn; ++ii) {\r\n        const chain = entries[ii].trim();\r\n        if (chain.length > 0) {\r\n          asm.addChain(asymDict[chain]);\r\n        }\r\n      }\r\n      asm.matrices = assemblyOps;\r\n      complex.units.push(asm);\r\n    }\r\n  }\r\n}\r\n\r\nCIFParser.formats = ['cif', 'mmcif'];\r\nCIFParser.extensions = ['.cif', '.mmcif'];\r\n\r\nexport default CIFParser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Volume from '../../chem/Volume';\r\n\r\nexport const valueType = {\r\n  singular: 0,\r\n  vector: 1,\r\n  array: 2,\r\n  buffer: 3,\r\n};\r\n\r\nclass VolumeModel {\r\n  _xyz2crs = [];\r\n\r\n  _origin = new THREE.Vector3(0, 0, 0);\r\n\r\n  constructor() {\r\n    this._header = {};\r\n    this._boxSize = new THREE.Vector3();\r\n    this._boxStart = new THREE.Vector3();\r\n    this._header.delta = {};\r\n    this._header.extent = [];\r\n    this._header.nstart = [];\r\n    this._header.grid = [];\r\n    this._header.crs2xyz = [];\r\n    this._header.cellDims = new THREE.Vector3();\r\n    this._header.angles = [];\r\n    this._header.origin = new THREE.Vector3(0, 0, 0);\r\n    this._header.dmin = 0;\r\n    this._header.dmean = 0;\r\n    this._header.dmax = 0;\r\n  }\r\n\r\n  _typedCheck() {\r\n    if (_.isTypedArray(this._buff)) {\r\n      this._buff = this._buff.buffer;\r\n    } else if (!_.isArrayBuffer(this._buff)) {\r\n      throw new TypeError('Expected ArrayBuffer or TypedArray');\r\n    }\r\n  }\r\n\r\n  _fillHeader(headerFormat, arrays) {\r\n    for (const key in headerFormat) {\r\n      if (headerFormat.hasOwnProperty(key)) {\r\n        switch (headerFormat[key][0]) {\r\n          case valueType.singular:\r\n            this._header[key] = arrays[headerFormat[key][1]][headerFormat[key][2]];\r\n            break;\r\n\r\n          case valueType.array:\r\n            this._parseArray(this._header[key], arrays[headerFormat[key][1]], headerFormat[key][2]);\r\n            break;\r\n\r\n          case valueType.vector:\r\n            this._parseVector(this._header[key], arrays[headerFormat[key][1]], headerFormat[key][2]);\r\n            break;\r\n\r\n          case valueType.buffer:\r\n            this._header[key] = new Uint8Array(\r\n              arrays[headerFormat[key][1]],\r\n              [headerFormat[key][2]] * 4,\r\n              [headerFormat[key][3]] * 4,\r\n            );\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _parseVector(vector, arr, pos) {\r\n    [vector.x, vector.y, vector.z] = [arr[pos], arr[pos + 1], arr[pos + 2]];\r\n  }\r\n\r\n  _parseArray(vector, arr, pos) {\r\n    vector[0] = arr[pos];\r\n    vector[1] = arr[pos + 1];\r\n    vector[2] = arr[pos + 2];\r\n  }\r\n\r\n  _parseHeader(_buffer) {}\r\n\r\n  _setAxisIndices() {}\r\n\r\n  _setOrigins() {}\r\n\r\n  _getAxis() {\r\n    const header = this._header;\r\n\r\n    const xScale = header.cellDims.x / header.grid[0];\r\n    const yScale = header.cellDims.y / header.grid[1];\r\n    const zScale = header.cellDims.z / header.grid[2];\r\n\r\n    const [alpha, beta, gamma] = header.angles;\r\n\r\n    const z1 = Math.cos(beta);\r\n    const z2 = (Math.cos(alpha) - Math.cos(beta)\r\n      * Math.cos(gamma)) / Math.sin(gamma);\r\n    const z3 = Math.sqrt(1.0 - z1 * z1 - z2 * z2);\r\n\r\n    const xaxis = new THREE.Vector3(xScale, 0, 0);\r\n    const yaxis = new THREE.Vector3(Math.cos(gamma) * yScale, Math.sin(gamma) * yScale, 0);\r\n    const zaxis = new THREE.Vector3(z1 * zScale, z2 * zScale, z3 * zScale);\r\n\r\n    return [xaxis, yaxis, zaxis];\r\n  }\r\n\r\n  _getXYZdim() {\r\n    return [this._header.extent[this._xyz2crs[0]],\r\n      this._header.extent[this._xyz2crs[1]],\r\n      this._header.extent[this._xyz2crs[2]]];\r\n  }\r\n\r\n  _getVolumeInfo() {\r\n    const volInfo = _.pick(this._header, ['dmean', 'dmin', 'dmax', 'sd', 'delta']);\r\n    volInfo.obtuseAngle = this._header.angles.map((angle) => Number(angle >= (Math.PI / 2)));\r\n    return volInfo;\r\n  }\r\n\r\n  _setBoxParams(xaxis, yaxis, zaxis) {\r\n    // if axes are not orthogonal, the origins might not match with box coordinates - need to make shift\r\n    let shiftX = 0;\r\n    let shiftY = 0;\r\n    const [alpha, beta, gamma] = this._header.angles;\r\n\r\n    if (gamma >= Math.PI / 2) {\r\n      shiftX += Math.abs(yaxis.x);\r\n    }\r\n    if (beta >= Math.PI / 2) {\r\n      shiftX += Math.abs(zaxis.x);\r\n    }\r\n    if (alpha >= Math.PI / 2) {\r\n      shiftY += Math.abs(zaxis.y);\r\n    }\r\n\r\n    this._boxStart = new THREE.Vector3(this._origin.x - shiftX, this._origin.y - shiftY, this._origin.z);\r\n    this._boxSize = new THREE.Vector3(\r\n      Math.abs(xaxis.x) + Math.abs(yaxis.x) + Math.abs(zaxis.x),\r\n      Math.abs(yaxis.y) + Math.abs(zaxis.y),\r\n      Math.abs(zaxis.z),\r\n    );\r\n\r\n    const delta = (axe, proj) => (Math.abs(axe[proj]) / this._boxSize[proj]);\r\n    this._header.delta.x = delta(yaxis, 'x');\r\n    this._header.delta.y = delta(zaxis, 'x');\r\n    this._header.delta.z = delta(zaxis, 'y');\r\n  }\r\n\r\n  _getXYZbox() {\r\n    return new THREE.Box3(this._boxStart.clone(), this._boxStart.clone().add(this._boxSize));\r\n  }\r\n\r\n  _toXYZData() {}\r\n\r\n  parse(data) {\r\n    this._parseHeader(data);\r\n    this._setOrigins();\r\n    return new Volume(Float32Array, this._getXYZdim(), this._getXYZbox(), 1, this._toXYZData(), this._getVolumeInfo());\r\n  }\r\n}\r\n\r\nexport default VolumeModel;\r\n","import Parser from './Parser';\r\nimport VolumeModel, { valueType } from './VolumeModel';\r\n\r\nconst CCP4Header = {\r\n  extent: [valueType.array, 'u32', 0],\r\n  type: [valueType.singular, 'u32', 3],\r\n  nstart: [valueType.array, 'i32', 4],\r\n  grid: [valueType.array, 'u32', 7],\r\n  cellDims: [valueType.vector, 'f32', 10],\r\n  angles: [valueType.array, 'f32', 13],\r\n  crs2xyz: [valueType.array, 'i32', 16],\r\n  dmin: [valueType.singular, 'f32', 19],\r\n  dmax: [valueType.singular, 'f32', 20],\r\n  dmean: [valueType.singular, 'f32', 21],\r\n  ispg: [valueType.singular, 'u32', 22],\r\n  nsymbt: [valueType.singular, 'u32', 23],\r\n  lksflg: [valueType.singular, 'u32', 24],\r\n  customData: [valueType.buffer, 'buffer', 25, 9],\r\n  origin: [valueType.vector, 'f32', 34],\r\n  map: [valueType.buffer, 'buffer', 52, 1],\r\n  machine: [valueType.singular, 'u32', 53],\r\n  sd: [valueType.singular, 'f32', 54],\r\n  nlabel: [valueType.singular, 'f32', 55],\r\n  label: [valueType.buffer, 'buffer', 56, 200],\r\n};\r\n\r\nclass Ccp4Model extends VolumeModel {\r\n  // read header (http://www.ccp4.ac.uk/html/maplib.html)\r\n  _parseHeader(_buffer) {\r\n    this._buff = _buffer;\r\n    this._typedCheck();\r\n    const arrays = {};\r\n    arrays.u32 = new Uint32Array(this._buff, 0, 56);\r\n    arrays.i32 = new Int32Array(this._buff, 0, 56);\r\n    arrays.f32 = new Float32Array(this._buff, 0, 56);\r\n    arrays.buffer = this._buff;\r\n    const header = this._header;\r\n\r\n    this._fillHeader(CCP4Header, arrays);\r\n\r\n    // calculate non-orthogonal unit cell coordinates\r\n    header.angles.forEach((angle, i, a) => { a[i] *= Math.PI / 180.0; });\r\n  }\r\n\r\n  _setAxisIndices() {\r\n    const header = this._header;\r\n\r\n    if (header.cellDims.x === 0.0 && header.cellDims.y === 0.0 && header.cellDims.z === 0.0) {\r\n      header.cellDims.set(1.0, 1.0, 1.0);\r\n    }\r\n    // Apply header conversion\r\n    // Mapping between CCP4 column, row, section and VMD x, y, z.\r\n    const { crs2xyz } = this._header;\r\n    if (crs2xyz[0] === 0 && crs2xyz[1] === 0 && crs2xyz[2] === 0) {\r\n      crs2xyz[0] = 1;\r\n      crs2xyz[1] = 2;\r\n      crs2xyz[2] = 3;\r\n    }\r\n\r\n    const xyz2crs = this._xyz2crs;\r\n    xyz2crs[crs2xyz[0] - 1] = 0; // column\r\n    xyz2crs[crs2xyz[1] - 1] = 1; // row\r\n    xyz2crs[crs2xyz[2] - 1] = 2; // section\r\n  }\r\n\r\n\r\n  _setOrigins() {\r\n    const [xaxis, yaxis, zaxis] = this._getAxis();\r\n    this._setAxisIndices();\r\n\r\n    const header = this._header;\r\n    const xyz2crs = this._xyz2crs;\r\n    // Handle both MRC-2000 and older format maps\r\n    if (header.origin.x === 0.0 && header.origin.y === 0.0 && header.origin.z === 0.0) {\r\n      this._origin.addScaledVector(xaxis, header.nstart[xyz2crs[0]]);\r\n      this._origin.addScaledVector(yaxis, header.nstart[xyz2crs[1]]);\r\n      this._origin.addScaledVector(zaxis, header.nstart[xyz2crs[2]]);\r\n    } else {\r\n      this._origin = header.origin;\r\n      // Use ORIGIN records rather than old n[xyz]start records\r\n      //   http://www2.mrc-lmb.cam.ac.uk/image2000.html\r\n      // XXX the ORIGIN field is only used by the EM community, and\r\n      // has undefined meaning for non-orthogonal maps and/or non-cubic voxels, etc.\r\n    }\r\n    xaxis.multiplyScalar(header.extent[xyz2crs[0]] - 1);\r\n    yaxis.multiplyScalar(header.extent[xyz2crs[1]] - 1);\r\n    zaxis.multiplyScalar(header.extent[xyz2crs[2]] - 1);\r\n\r\n    if (header.type === 2) {\r\n      this._data = new Float32Array(\r\n        this._buff,\r\n        1024 + header.nsymbt,\r\n        header.extent[0] * header.extent[1] * header.extent[2],\r\n      );\r\n    } else {\r\n      throw new Error(`CCP4: Unsupported format ${header.type}`);\r\n    }\r\n\r\n    this._setBoxParams(xaxis, yaxis, zaxis);\r\n  }\r\n\r\n  _toXYZData() {\r\n    const header = this._header;\r\n    const data = this._data;\r\n    const xyz2crs = this._xyz2crs;\r\n    const xyzData = new Float32Array(data.length);\r\n\r\n    const dim = this._getXYZdim();\r\n    const xSize = dim[0];\r\n    const ySize = dim[1];\r\n\r\n    let crsIdx = 0;\r\n    const coord = [];\r\n    let x;\r\n    let y;\r\n    let z;\r\n    for (coord[2] = 0; coord[2] < header.extent[2]; coord[2]++) { // Site\r\n      for (coord[1] = 0; coord[1] < header.extent[1]; coord[1]++) { // Row\r\n        for (coord[0] = 0; coord[0] < header.extent[0]; coord[0]++, crsIdx++) { // Column\r\n          x = coord[xyz2crs[0]];\r\n          y = coord[xyz2crs[1]];\r\n          z = coord[xyz2crs[2]];\r\n          xyzData[x + xSize * (y + ySize * z)] = data[crsIdx];\r\n        }\r\n      }\r\n    }\r\n\r\n    return xyzData;\r\n  }\r\n}\r\n\r\nclass CCP4Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'ccp4';\r\n    this.model = new Ccp4Model();\r\n  }\r\n\r\n  static canProbablyParse(_data) {\r\n    return false; // Autodetection is not implemented yet\r\n  }\r\n\r\n  parseSync() {\r\n    return this.model.parse(this._data);\r\n  }\r\n}\r\n\r\nCCP4Parser.formats = ['ccp4'];\r\nCCP4Parser.extensions = ['.ccp4', '.map', '.mrc'];\r\nCCP4Parser.binary = true;\r\n\r\nexport default CCP4Parser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst { Complex, Element, Molecule } = chem;\r\n\r\nclass XYZParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._atomsInf = null;\r\n\r\n    this._options.fileType = 'xyz';\r\n    this._fileName = options.name;\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && /^\\s*\\d+ *\\n[^\\n]*\\n\\s*\\w{1,3}\\s+-?\\d/.test(data);\r\n  }\r\n\r\n  _parseToAtomsInf(source) {\r\n    const endnAtoms = source.indexOf('\\n');\r\n    const nAtoms = parseInt(source.substring(0, endnAtoms), 10);\r\n    const endComment = source.indexOf('\\n', endnAtoms + 1);\r\n    let comment = source.slice(endnAtoms + 1, endComment).trim();\r\n    if (comment.length === 0) {\r\n      comment = this._fileName;\r\n    }\r\n\r\n    const startAtomsInf = endComment + source.substring(endComment).search(/\\S/);\r\n    this._atomsInf = source.substring(startAtomsInf).split(/[\\s,]*\\n[\\s,]*/);\r\n    if (!Number.isNaN(nAtoms) && (this._atomsInf.length - 1 !== nAtoms)) {\r\n      this._complex.error = {\r\n        message: 'wrong number of atoms',\r\n      };\r\n      return;\r\n    }\r\n\r\n    this._complex.metadata.format = 'xyz';\r\n    this._complex.name = comment;\r\n  }\r\n\r\n  _parseAtomsInf() {\r\n    const het = true;\r\n    const altLoc = ' ';\r\n    const occupancy = 1;\r\n    const tempFactor = 1;\r\n    const charge = 0;\r\n\r\n    const chain = this._complex.addChain('A');\r\n    const residue = chain.addResidue('UNK', 1, ' ');\r\n\r\n    for (let i = 0; i < this._atomsInf.length - 1; i++) {\r\n      const words = this._atomsInf[i].split(/[\\s,]+/);\r\n\r\n      if (words.length !== 4) {\r\n        this._complex.error = {\r\n          message: 'missed parameters',\r\n        };\r\n        break;\r\n      }\r\n\r\n      const serial = i + 1;\r\n      const name = words[0];\r\n      const xyz = new THREE.Vector3(parseFloat(words[1]), parseFloat(words[2]), parseFloat(words[3]));\r\n      const type = Element.getByName(name);\r\n      const role = undefined;\r\n\r\n      residue.addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n    }\r\n\r\n    const molecule = new Molecule(this._complex, this._complex.name, 1);\r\n    molecule.residues = residue;\r\n    this._complex._molecules[0] = molecule;\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n\r\n    this._parseToAtomsInf(this._data);\r\n    this._parseAtomsInf();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n\r\n    this._complex = null;\r\n    this._atomsInf = null;\r\n\r\n    if (result.error) {\r\n      throw new Error(result.error.message);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static formats = ['xyz'];\r\n\r\n  static extensions = ['.xyz'];\r\n}\r\n\r\nexport default XYZParser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst { Complex, Element } = chem;\r\n\r\nclass PubChemParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'pubchem+json';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && data[0] === '{';\r\n  }\r\n\r\n  parseSync() {\r\n    this.logger.info('Parsing PubChem JSON file...');\r\n    return this._toComplex(JSON.parse(this._data));\r\n  }\r\n\r\n  _toComplex(jsonData) {\r\n    const complex = new Complex();\r\n    const complexData = jsonData.PC_Compounds && jsonData.PC_Compounds[0];\r\n    if (complexData) {\r\n      this._extractAtoms(complex, complexData);\r\n      complex.finalize({\r\n        needAutoBonding: false,\r\n        detectAromaticLoops: this.settings.now.aromatic,\r\n        enableEditing: this.settings.now.editing,\r\n      });\r\n    }\r\n    return complex;\r\n  }\r\n\r\n  _extractAtoms(complex, complexData) {\r\n    let aids = complexData.atoms && complexData.atoms.aid;\r\n    let elements = aids && complexData.atoms.element;\r\n    if (!elements || aids.length !== elements.length) {\r\n      throw new Error('Unable to parse atom elements');\r\n    }\r\n    elements = _.fromPairs(_.zip(aids, elements));\r\n    const atoms = {};\r\n\r\n    const coords = complexData.coords && complexData.coords[0];\r\n    const model = coords && coords.conformers && coords.conformers[0];\r\n    const xs = model && model.x;\r\n    const ys = model && model.y;\r\n    const zs = (model && model.z) || [];\r\n    aids = coords && coords.aid;\r\n    if (!aids || !xs || !ys) {\r\n      throw new Error('Coordinates are not found in the file');\r\n    }\r\n\r\n    const chain = complex.addChain(' ');\r\n    const residue = chain.addResidue('UNK', 1, ' ');\r\n\r\n    for (let i = 0, n = aids.length; i < n; ++i) {\r\n      const aid = aids[i];\r\n      const element = Element.ByAtomicNumber[elements[aid]];\r\n      const xyz = new THREE.Vector3(xs[i], ys[i], zs[i] || 0.0);\r\n      atoms[aid] = residue.addAtom(element.name, element, xyz, undefined, true, aid, ' ', 1.0, 0.0, 0);\r\n    }\r\n\r\n    const aids1 = complexData.bonds && complexData.bonds.aid1;\r\n    const aids2 = complexData.bonds && complexData.bonds.aid2;\r\n    const orders = (complexData.bonds && complexData.bonds.order) || [];\r\n    if (!aids1 || !aids2 || aids1.length !== aids2.length) {\r\n      return;\r\n    }\r\n\r\n    for (let j = 0, m = aids1.length; j < m; ++j) {\r\n      complex.addBond(atoms[aids1[j]], atoms[aids2[j]], orders[j] || 1, 0, true);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nPubChemParser.formats = ['pubchem', 'pubchem+json', 'pc'];\r\nPubChemParser.extensions = ['.json'];\r\n\r\nexport default PubChemParser;\r\n","import _ from 'lodash';\r\n\r\nexport default class SDFStream {\r\n  constructor(data) {\r\n    this._strings = data.split(/\\r?\\n|\\r/);\r\n    this._currentStart = 0;\r\n    this._currentStringIndx = 0;\r\n  }\r\n\r\n  setStart(start) {\r\n    if (start >= this._strings.length) {\r\n      this._currentStart = this._strings.length - 1;\r\n      this._currentStringIndx = this._strings.length - 1;\r\n    } else {\r\n      this._currentStart = start;\r\n      this._currentStringIndx = start;\r\n    }\r\n  }\r\n\r\n  getNextString() {\r\n    return this._strings[++this._currentStringIndx];\r\n  }\r\n\r\n  getCurrentString() {\r\n    return this._strings[this._currentStringIndx];\r\n  }\r\n\r\n  getStringFromStart(numb) {\r\n    this._currentStringIndx = this._currentStart + numb;\r\n    return this._strings[this._currentStart + numb];\r\n  }\r\n\r\n  findNextDataItem() {\r\n    let curStr = this.getNextString();\r\n    let res = false;\r\n    while (!_.isUndefined(curStr) && curStr.trim() !== '$$$$') {\r\n      if (curStr.match(/>\\s+<(.*)>/)) {\r\n        res = true;\r\n        break;\r\n      }\r\n      curStr = this.getNextString();\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  findNextCompoundStart() {\r\n    let curStr = this.getCurrentString();\r\n    while (!_.isUndefined(curStr) && curStr.trim() !== '$$$$') {\r\n      curStr = this.getNextString();\r\n    }\r\n    this.setStart(++this._currentStringIndx);\r\n    return this.probablyHaveDataToParse();\r\n  }\r\n\r\n  probablyHaveDataToParse() {\r\n    return this._currentStringIndx < this._strings.length - 2;\r\n  }\r\n}\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport SDFStream from './SDFStream';\r\nimport Assembly from '../../chem/Assembly';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst chargeMap = [0, 3, 2, 1, 0, -1, -2, -3];\r\nconst orderMap = [0, 1, 2, 3, 1, 1, 1, 2];\r\nconst typeMap = [\r\n  Bond.BondType.UNKNOWN, // 0 - error\r\n  Bond.BondType.COVALENT, // 1 - single\r\n  Bond.BondType.COVALENT, // 2 - double\r\n  Bond.BondType.COVALENT, // 3 - triple\r\n  Bond.BondType.AROMATIC, // 4 - aromatic\r\n  Bond.BondType.UNKNOWN, // 5 - single or double\r\n  Bond.BondType.AROMATIC, // 6 - single or aromatic\r\n  Bond.BondType.AROMATIC, // 7 - double or aromatic\r\n  // 8 - any\r\n  // 9 - coordination\r\n  // 10 - hydrogen\r\n];\r\n\r\nconst sdfAndMolRegexp = /.*(M\\s\\sEND).*|.*(^$$$$).*|.*>\\s+<(.+)>.*/;\r\nconst sdfRegExp = /.*($$$$).*|.*>\\s+<(.+)>.*/;\r\n\r\nconst fileFormat = { SDF: 'sdf', MOL: 'mol' };\r\n\r\nconst possibleNameTags = ['PUBCHEM_IUPAC_TRADITIONAL_NAME', /PUBCHEM_(.+)_NAME/, /(.+)name/, /(.+)NAME/];\r\nconst possibleIDTags = ['PUBCHEM_COMPOUND_CID', 'id', 'ID', /.*CID/, /.*ID/, /.*id/];\r\nconst possibleTitleTags = ['msg', 'MSG', 'message', 'title', 'description', 'desc'];\r\nconst tagsNames = ['name', 'id', 'title'];\r\nconst tags = { name: possibleNameTags, id: possibleIDTags, title: possibleTitleTags };\r\n\r\nfunction buildChainID(index) {\r\n  if (!index) {\r\n    return 'A';\r\n  }\r\n\r\n  const codes = [];\r\n  while (index) {\r\n    codes.push(65 + (index % 26));\r\n    index = Math.trunc(index / 26);\r\n  }\r\n  if (codes.length > 1) {\r\n    codes.reverse();\r\n    codes[0] -= 1;\r\n  }\r\n\r\n  return String.fromCharCode(...codes);\r\n}\r\n\r\nexport default class SDFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._format = 'sdf';\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._molecules = null;\r\n    this._metadata = {};\r\n    this._metadata.molecules = [];\r\n    this._currentMolProps = {};\r\n    this._compoundIndx = -1;\r\n    this._assemblies = [];\r\n    this._atomsParsed = 0;\r\n    this._atomsIndexes = [];\r\n  }\r\n\r\n  canProbablyParse(data) {\r\n    return _.isString(data) && sdfAndMolRegexp.test(data);\r\n  }\r\n\r\n  _parseHeader(stream) {\r\n    const molecule = {};\r\n    molecule.name = stream.getStringFromStart(0);\r\n    const date = parseInt(stream.getStringFromStart(1).substr(10, 6).trim(), 10);\r\n    molecule.date = date.toString() || '';\r\n    molecule.title = stream.getStringFromStart(2);\r\n    this._metadata.molecules.push(molecule);\r\n  }\r\n\r\n  _parseAtoms(stream, atomsNum) {\r\n    let curStr;\r\n    let serial = this._atomsParsed;\r\n\r\n    // each molecule = chain\\residue\r\n    const chainID = buildChainID(this._compoundIndx);\r\n    const resName = 'UNK';\r\n    const resSeq = 1;\r\n\r\n    this._chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n    this._residue = this._chain.addResidue(resName, resSeq, ' ');\r\n\r\n    for (let i = 0; i < atomsNum; i++) {\r\n      curStr = stream.getNextString();\r\n      serial++;\r\n      const x = parseFloat(curStr.substr(0, 10));\r\n      const y = parseFloat(curStr.substr(10, 10));\r\n      const z = parseFloat(curStr.substr(20, 10));\r\n      const charge = chargeMap[parseInt(curStr.substr(36, 3), 10)];\r\n      const xyz = new THREE.Vector3(x, y, z);\r\n      let name = curStr.substr(31, 3).trim().toUpperCase();\r\n      const type = Element.getByName(name);\r\n      if (!this._atomsIndexes[name]) {\r\n        this._atomsIndexes[name] = 0;\r\n      }\r\n      this._atomsIndexes[name] += 1;\r\n      name += this._atomsIndexes[name]; // every atom need to have unique name.\r\n\r\n      this._residue.addAtom(name, type, xyz, undefined, true, serial, ' ', 1.0, 0.0, charge);\r\n    }\r\n  }\r\n\r\n  _parseBonds(stream, bondsNum) {\r\n    let curStr;\r\n\r\n    for (let i = 0; i < bondsNum; i++) {\r\n      curStr = stream.getNextString();\r\n      let atom1 = parseInt(curStr.substr(0, 3), 10) + this._atomsParsed;\r\n      let atom2 = parseInt(curStr.substr(3, 3), 10) + this._atomsParsed;\r\n      const bondType = parseInt(curStr.substr(6, 3), 10);\r\n\r\n      if (atom1 > atom2) {\r\n        [atom1, atom2] = [atom2, atom1];\r\n      }\r\n      this._complex.addBond(atom1, atom2,\r\n        orderMap[bondType] || 1,\r\n        typeMap[bondType] || Bond.BondType.UNKNOWN,\r\n        true);\r\n    }\r\n  }\r\n\r\n  _parseMOL(stream) {\r\n    this._compoundIndx++;\r\n\r\n    this._parseHeader(stream);\r\n    const countsLine = stream.getStringFromStart(3);\r\n    const atomsNum = parseInt(countsLine.substr(0, 3), 10);\r\n    const bondsNum = parseInt(countsLine.substr(3, 3), 10);\r\n    this._parseAtoms(stream, atomsNum);\r\n    this._parseBonds(stream, bondsNum);\r\n\r\n    this._atomsParsed += atomsNum;\r\n\r\n    this._metadata.molecules[this._compoundIndx]._residues = [];\r\n    this._metadata.molecules[this._compoundIndx]._residues.push(this._residue);\r\n  }\r\n\r\n  _parseDataItem(stream) {\r\n    const tag = stream.getCurrentString();\r\n\r\n    let data = [];\r\n    let curStr = stream.getNextString();\r\n\r\n    // read data\r\n    while (curStr.trim() !== '') {\r\n      data.push(curStr);\r\n      curStr = stream.getNextString();\r\n    }\r\n    if (data.length === 1) {\r\n      [data] = data;\r\n    }\r\n    this._currentMolProps[tag.replace(/[<>]/g, '').trim()] = data;\r\n  }\r\n\r\n  _parseCompound(stream) {\r\n    this._parseMOL(stream);\r\n\r\n    // parse data items block\r\n    if (this._format === fileFormat.SDF) {\r\n      this._currentMolProps = {};\r\n      while (stream.findNextDataItem()) {\r\n        this._parseDataItem(stream);\r\n      }\r\n      if (Object.keys(this._currentMolProps).length !== 0) {\r\n        const molecule = this._metadata.molecules[this._compoundIndx];\r\n        molecule.props = this._currentMolProps;\r\n        this._tryToUpdateMoleculeData(molecule);\r\n      }\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap;\r\n    const complex = this._complex;\r\n\r\n    const bonds = complex._bonds;\r\n    for (let j = 0; j < bonds.length; j++) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        console.log('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _buildAssemblies() {\r\n    const chains = this._complex._chains;\r\n\r\n    if (chains.length === 1) {\r\n      return this._assemblies;\r\n    }\r\n\r\n    for (let i = 0; i < chains.length; i++) {\r\n      const assembly = new Assembly(this._complex);\r\n      const matrix = new THREE.Matrix4();\r\n      assembly.addMatrix(matrix);\r\n      assembly.addChain(chains[i]._name);\r\n      this._assemblies.push(assembly);\r\n    }\r\n\r\n    return this._assemblies;\r\n  }\r\n\r\n  _buildMolecules() {\r\n    this._complex._molecules = [];\r\n    const { molecules } = this._metadata;\r\n    for (let i = 0; i < molecules.length; i++) {\r\n      const molecule = new Molecule(this._complex, molecules[i].name, i + 1);\r\n      molecule.residues = molecules[i]._residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n\r\n    return this._complex._molecules;\r\n  }\r\n\r\n  _searchTag(tag, props) {\r\n    for (let i = 0; i < props.length; i++) {\r\n      if ((tag instanceof RegExp && tag.test(props[i].tag)) || tag === props[i].tag) {\r\n        return props[i].data;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  _tryToFind(tagsList, props) {\r\n    for (let j = 0; j < tagsList.length; j++) {\r\n      const res = this._searchTag(tagsList[j], props);\r\n      if (res) {\r\n        return res;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  _tryToUpdateMoleculeData(molecule) {\r\n    let res = false;\r\n    for (let i = 0; i < tagsNames.length; i++) {\r\n      const tagPossibleNames = tags[tagsNames[i]];\r\n      const data = this._tryToFind(tagPossibleNames, molecule.props);\r\n      if (data) {\r\n        molecule[tagsNames[i]] = data;\r\n        res = true;\r\n      }\r\n    }\r\n\r\n    molecule.name = molecule.name || molecule.id;\r\n    if (molecule.name.match(/^\\d+$/)) {\r\n      molecule.name = `CID: ${molecule.name}`;\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  _finalizeMetadata() {\r\n    const { molecules } = this._metadata;\r\n    const { metadata } = this._complex;\r\n    const complex = this._complex;\r\n\r\n    if (molecules.length === 1) {\r\n      complex.name = molecules[0].name;\r\n      metadata.title = molecules[0].title;\r\n      metadata.date = molecules[0].date;\r\n      metadata.properties = molecules[0].props;\r\n    } else if (molecules.length > 1) {\r\n      metadata.molecules = [];\r\n      for (let i = 0; i < molecules.length; i++) {\r\n        metadata.molecules.push({\r\n          name: molecules[i].name, date: molecules[i].date, title: molecules[i].title, properties: molecules[i].props,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _finalize() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const atoms = this._complex._atoms;\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    this._complex._finalizeBonds();\r\n    this._fixBondsArray();\r\n    this._finalizeMetadata();\r\n    this._buildAssemblies();\r\n    this._complex.units = this._complex.units.concat(this._assemblies);\r\n    this._buildMolecules();\r\n    this._complex.finalize({\r\n      needAutoBonding: false, detectAromaticLoops: false, enableEditing: false, serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  defineFormat(data) {\r\n    let format;\r\n    if (sdfRegExp.test(data)) {\r\n      format = fileFormat.SDF;\r\n    } else {\r\n      format = fileFormat.MOL;\r\n    }\r\n\r\n    return format;\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n    const stream = new SDFStream(this._data);\r\n\r\n    this._format = this.defineFormat(this._data);\r\n    result.metadata.format = this._format;\r\n\r\n    do {\r\n      this._parseCompound(stream);\r\n    } while (stream.findNextCompoundStart());\r\n\r\n    this._finalize();\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nSDFParser.formats = ['mol', 'sdf'];\r\nSDFParser.extensions = ['.mol', '.sdf'];\r\n","import * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport VolumeModel, { valueType } from './VolumeModel';\r\n\r\n// http://www.uoxray.uoregon.edu/tnt/manual/node104.html\r\nconst DSN6Header = {\r\n  nstart: [valueType.array, 'i16', 0],\r\n  extent: [valueType.array, 'i16', 3],\r\n  grid: [valueType.array, 'i16', 6],\r\n  cellDims: [valueType.vector, 'i16', 9],\r\n  angles: [valueType.array, 'i16', 12],\r\n  div: [valueType.singular, 'i16', 15],\r\n  adder: [valueType.singular, 'i16', 16],\r\n  scaleFactor: [valueType.singular, 'i16', 17],\r\n};\r\n\r\nclass DSN6Model extends VolumeModel {\r\n  _parseHeader(_buffer) {\r\n    this._buff = _buffer;\r\n    this._typedCheck();\r\n\r\n    const arrays = {};\r\n    arrays.i16 = new Int16Array(this._buff);\r\n\r\n    // check and reverse if big endian\r\n    if (arrays.i16[18] !== 100) {\r\n      for (let i = 0, n = arrays.i16.length; i < n; ++i) {\r\n        const val = arrays.i16[i];\r\n        arrays.i16[i] = ((val & 0xff) << 8) | ((val >> 8) & 0xff);\r\n      }\r\n    }\r\n    if (arrays.i16[18] !== 100) {\r\n      throw new Error('DSN6: Incorrect format ');\r\n    }\r\n\r\n    const header = this._header;\r\n\r\n    this._fillHeader(DSN6Header, arrays);\r\n    header.cellDims.multiplyScalar(1.0 / header.scaleFactor);\r\n    header.angles.forEach((angle, i, a) => { a[i] *= (Math.PI / 180.0) / header.scaleFactor; });\r\n    header.div /= 100;\r\n  }\r\n\r\n  _setAxisIndices() {\r\n    this._xyz2crs[0] = 0;\r\n    this._xyz2crs[1] = 1;\r\n    this._xyz2crs[2] = 2;\r\n  }\r\n\r\n  _setOrigins() {\r\n    const header = this._header;\r\n    const [xaxis, yaxis, zaxis] = this._getAxis();\r\n    this._setAxisIndices();\r\n\r\n    this._origin.addScaledVector(xaxis, header.nstart[0]);\r\n    this._origin.addScaledVector(yaxis, header.nstart[1]);\r\n    this._origin.addScaledVector(zaxis, header.nstart[2]);\r\n\r\n    xaxis.multiplyScalar(header.extent[0]);\r\n    yaxis.multiplyScalar(header.extent[1]);\r\n    zaxis.multiplyScalar(header.extent[2]);\r\n\r\n    this._setBoxParams(xaxis, yaxis, zaxis);\r\n  }\r\n\r\n  _pointCalculate(xyzData, byteBuffer, z, y, x, pos, i) {\r\n    const header = this._header;\r\n\r\n    if (x < header.extent[0] && y < header.extent[1] && z < header.extent[2]) {\r\n      const idx = x + header.extent[0] * (y + header.extent[1] * z);\r\n      xyzData[idx] = (byteBuffer[pos.counter] - header.adder) / header.div;\r\n      ++pos.counter;\r\n    } else {\r\n      pos.counter += 8 - i;\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _blockCalculate(xyzData, byteBuffer, zBlock, yBlock, xBlock, pos) {\r\n    for (let k = 0; k < 8; ++k) {\r\n      const z = 8 * zBlock + k;\r\n      for (let j = 0; j < 8; ++j) {\r\n        const y = 8 * yBlock + j;\r\n        let inRange = true;\r\n        let i = 0;\r\n        while (inRange && i < 8) {\r\n          const x = 8 * xBlock + i;\r\n          inRange = this._pointCalculate(xyzData, byteBuffer, z, y, x, pos, i);\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _toXYZData() {\r\n    const header = this._header;\r\n    const byteBuffer = new Uint8Array(this._buff);\r\n    const xyzData = new Float32Array(header.extent[0] * header.extent[1] * header.extent[2]);\r\n\r\n    const blocks = new THREE.Vector3(header.extent[0] / 8, header.extent[1] / 8, header.extent[2] / 8);\r\n\r\n    const pos = {};\r\n    pos.counter = 512;\r\n\r\n    for (let zBlock = 0; zBlock < blocks.z; ++zBlock) {\r\n      for (let yBlock = 0; yBlock < blocks.y; ++yBlock) {\r\n        for (let xBlock = 0; xBlock < blocks.x; ++xBlock) {\r\n          this._blockCalculate(xyzData, byteBuffer, zBlock, yBlock, xBlock, pos);\r\n        }\r\n      }\r\n    }\r\n    this._calculateInfoParams(xyzData);\r\n    return xyzData;\r\n  }\r\n\r\n  _calculateInfoParams(xyzData) {\r\n    this._header.dmean /= xyzData.length;\r\n    let dispersion = 0;\r\n    let minDensity = xyzData[0];\r\n    let maxDensity = xyzData[0];\r\n    for (let j = 0; j < xyzData.length; j++) {\r\n      dispersion += (this._header.dmean - xyzData[j]) ** 2;\r\n\r\n      if (xyzData[j] < minDensity) {\r\n        minDensity = xyzData[j];\r\n      }\r\n      if (xyzData[j] > maxDensity) {\r\n        maxDensity = xyzData[j];\r\n      }\r\n    }\r\n    this._header.sd = Math.sqrt(dispersion / xyzData.length);\r\n    this._header.dmax = maxDensity;\r\n    this._header.dmin = minDensity;\r\n  }\r\n}\r\n\r\nclass DSN6Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'dsn6';\r\n    this.model = new DSN6Model();\r\n  }\r\n\r\n  static canParse(data, options) {\r\n    if (!data) {\r\n      return false;\r\n    }\r\n    return data instanceof ArrayBuffer && Parser.checkDataTypeOptions(options, 'dsn6');\r\n  }\r\n\r\n  static canProbablyParse(_data) {\r\n    return false;\r\n  }\r\n\r\n  parseSync() {\r\n    return this.model.parse(this._data);\r\n  }\r\n}\r\n\r\nDSN6Parser.formats = ['dsn6'];\r\nDSN6Parser.extensions = ['.dsn6', '.omap'];\r\nDSN6Parser.binary = true;\r\n\r\nexport default DSN6Parser;\r\n","import PDBStream from './PDBStream';\r\n\r\n/**\r\n * Little helper class for GRO Parser usage.\r\n * @extends PDBStream\r\n */\r\nclass GROReader extends PDBStream {\r\n  constructor(data) {\r\n    super(data);\r\n    /** @type Number */\r\n    this._next = -1; // End position of line\r\n    this.next();\r\n  }\r\n\r\n  /**\r\n   * Getting end of string.\r\n   * @returns {Number} Pointer to end of string\r\n   */\r\n  getNext() {\r\n    return this._next;\r\n  }\r\n}\r\n\r\nexport default GROReader;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport GROReader from './GROReader';\r\n\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Molecule,\r\n} = chem;\r\n\r\n/**\r\n * Gromos87 file format parser.\r\n * @extends Parser\r\n */\r\nclass GROParser extends Parser {\r\n  /**\r\n   * Create parser for .gro file format\r\n   *\r\n   * @param {String} data Input file\r\n   * @param {String} options Input options (optional field)\r\n   */\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    /** @type Date */\r\n    this._time = null; // Time in ps, optional field for animations\r\n    /** @type Number */\r\n    this._numAtoms = null; // Number of atoms in complex\r\n    /** @type Number */\r\n    this._residueNumber = null; // Number of exact residue\r\n    /** @type String */\r\n    this._residueName = ''; // Scientific name of exact residue\r\n    /** @type String */\r\n    this._atomName = ''; // Scientific name of exact atom\r\n    /** @type Number */\r\n    this._atomNumber = null; // Sorted number of exact atom\r\n    /** @type Array */\r\n    this._atomPosition = []; // Array which contains x, y, z position of exact atom\r\n    /** @type Array */\r\n    this._atomVelocity = []; // Array which contains x, y, z velocity of exact atom (optional)\r\n    /** @type Complex */\r\n    this._complex = null; // Complex structure for unified molecule representation\r\n    /** @type Vector3 */\r\n    this._molecules = []; // Molecules array\r\n    /** @type Molecule */\r\n    this._molecule = null; // Single molecule\r\n    /** @type String */\r\n    this._options.filetype = 'gro'; // Extension of data file.\r\n  }\r\n\r\n  /**\r\n   * General check for possibility of parsing.\r\n   * @param {String} data - Input file\r\n   * @returns {boolean} true if this file is in ascii, false otherwise\r\n   */\r\n  canProbablyParse(data) {\r\n    return _.isString(this._data) && /^\\s*[^\\n]*\\n\\s*\\d+ *\\n\\s*\\d+[^\\n\\d]{3}\\s*\\w+\\s*\\d+\\s*-?\\d/.test(data);\r\n  }\r\n\r\n  /**\r\n   * Parsing title of molecule complex.\r\n   * NOTE: that names are ESTIMATES, there is no strict rules in Gromos87 standard for first line in input file.\r\n   * @param {GROReader} line - Line containing title and time.\r\n   */\r\n  _parseTitle(line) {\r\n    const { metadata } = this._complex;\r\n    metadata.id = line.readLine().trim();\r\n    metadata.name = metadata.id.slice(metadata.id.lastIndexOf('\\\\') + 1, metadata.id.lastIndexOf('.'));\r\n    metadata.format = 'gro';\r\n  }\r\n\r\n  /**\r\n   * Parsing line containing number of atoms information.\r\n   * @param {GROReader} line - Line containing number of atoms.\r\n   */\r\n  _parseNumberOfAtoms(line) {\r\n    this._numAtoms = line.readInt(0, line.getNext());\r\n    if (Number.isNaN(this._numAtoms)) {\r\n      throw new Error('Line 2 is not representing atom number. Consider checking input file');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parsing line containing information about residues, atoms etc. Also information about box vectors.\r\n   * Format of atoms MUST (by Gromos87 standard) be this: (note that numbering starts not from 0, but from 1!)\r\n   * ResidueNumber[1 - 5]  ResidueName[6 - 10] AtomName[11 - 15] AtomNumber[16 - 20] Position[21 - 45] Velocity[46 - 69]\r\n   * @param {GROReader} line - Line containing information about atom.\r\n   */\r\n  _parseAtom(line) {\r\n    this._residueNumber = line.readInt(1, 5);\r\n    this._residueName = line.readString(6, 10).trim();\r\n    this._atomName = line.readString(11, 15).trim();\r\n    this._atomNumber = line.readInt(16, 20);\r\n    const positionX = line.readFloat(21, 28) * 10;\r\n    const positionY = line.readFloat(29, 36) * 10;\r\n    const positionZ = line.readFloat(37, 45) * 10;\r\n    if (Number.isNaN(positionX) || Number.isNaN(positionY) || Number.isNaN(positionZ)) {\r\n      this._complex.error = {\r\n        message: `Atom position is invalid in \"${line.readLine()}\"`,\r\n      };\r\n      return;\r\n    }\r\n    /* const velocityX = line.readFloat(46, 53);\r\n    const velocityY = line.readFloat(54, 61);\r\n    const velocityZ = line.readFloat(62, 69); */\r\n    /* Adding residue and atom to complex structure */\r\n    const type = Element.getByName(this._atomName[0]); /* MAGIC 0. REASONS: This name is something like \"CA\", where\r\n     C - is an element an A is something else. But what about Calcium? */\r\n    if (type.fullName === 'Unknown') {\r\n      this._complex.error = {\r\n        message: `${this._atomName[0]} hasn't been recognised as an atom name.`,\r\n      };\r\n      return;\r\n    }\r\n    const role = Element.Role[this._atomName];\r\n    /* Firstly, create a dummy chain */\r\n    let chain = this._chain;\r\n    if (!chain) {\r\n      this._chain = chain = this._complex.addChain('A');\r\n    }\r\n    /* Secondly, add residue to that chain */\r\n    let residue = this._residue;\r\n    if (!residue || residue.getSequence() !== this._residueNumber) {\r\n      this._residue = residue = chain.addResidue(this._residueName, this._residueNumber, ' ');\r\n    }\r\n    /* Lastly, add atom to that residue */\r\n    this._atomPosition = new THREE.Vector3(positionX, positionY, positionZ);\r\n    /* Adding default constants to correct atom addition process */\r\n    const het = true;\r\n    const altLoc = ' ';\r\n    const occupancy = 1;\r\n    const tempFactor = 1;\r\n    const charge = 0;\r\n    residue.addAtom(this._atomName, type, this._atomPosition, role, het, this._atomNumber, altLoc, occupancy, tempFactor, charge);\r\n  }\r\n\r\n  /**\r\n   * Some finalizing procedures. In '.gro' file format there is only 1 chain and 1 molecule.\r\n   */\r\n  _finalize() {\r\n    const molecule = new Molecule(this._complex, this._complex.metadata.name, 1);\r\n    // aggregate residues from chain\r\n    molecule.residues = this._chain._residues;\r\n    molecule._chains = this._chain;\r\n    this._complex._molecules[0] = molecule;\r\n    this._molecules.push(molecule);\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main parsing procedure.\r\n   * @returns {Complex} Complex structure for visualizing.\r\n   */\r\n  parseSync() {\r\n    /* Create \"Complex\" variable */\r\n    const result = this._complex = new Complex();\r\n    /* Parse input file line-by-line */\r\n    const reader = new GROReader(this._data);\r\n    let counter = 0; /* Simple counter regarding to format of .gro file */\r\n    /* First two lines - technical information, other lines - Atoms */\r\n    this._parseTitle(reader);\r\n    reader.next();\r\n    this._parseNumberOfAtoms(reader);\r\n    reader.next();\r\n    for (counter = 0; counter < this._numAtoms; ++counter) {\r\n      if (!reader.end()) {\r\n        this._parseAtom(reader);\r\n        reader.next();\r\n      } else break;\r\n    }\r\n    /* If number of atoms in second line is less then actual atoms in file */\r\n    if (counter < this._numAtoms) {\r\n      this._complex.error = {\r\n        message: 'File ended unexpectedly.',\r\n      };\r\n    }\r\n    /* Catch errors occurred in parsing process */\r\n    if (result.error) {\r\n      throw new Error(result.error.message);\r\n    }\r\n\r\n    /* Finalizing data */\r\n    this._finalize();\r\n\r\n    /* Cleaning up */\r\n    this._atomPosition = null;\r\n    this._complex = null;\r\n    this._molecules = null;\r\n    this._molecule = null;\r\n\r\n    /* Return resulting Complex variable */\r\n    return result;\r\n  }\r\n}\r\n\r\nGROParser.formats = ['gro'];\r\nGROParser.extensions = ['.gro'];\r\n\r\nexport default GROParser;\r\n","import * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst orderMap = {\r\n  un: 0,\r\n  1: 1,\r\n  2: 2,\r\n  3: 3,\r\n  ar: 1,\r\n  am: 1,\r\n  nc: 0,\r\n  du: 1,\r\n};\r\nconst typeMap = {\r\n  un: Bond.BondType.UNKNOWN, // unknown (cannot be determined from the parameter tables)\r\n  1: Bond.BondType.COVALENT, // single\r\n  2: Bond.BondType.COVALENT, // double\r\n  3: Bond.BondType.COVALENT, // triple\r\n  ar: Bond.BondType.AROMATIC, // aromatic\r\n  am: Bond.BondType.COVALENT, // amide\r\n  nc: Bond.BondType.UNKNOWN, // not connected\r\n  du: Bond.BondType.COVALENT, // dummy\r\n};\r\n\r\nconst resNumberRegex = /\\d+$/;\r\nconst spacesRegex = /\\s+/;\r\n\r\nfunction splitToFields(str) {\r\n  return str.trim().split(spacesRegex);\r\n}\r\n/* There is no jsdoc documentation because of eslint corrections:\r\n * not all Parser methods are implemented\r\n */\r\n\r\nclass MOL2Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._compoundIndx = -1;\r\n\r\n    this._molecules = [];\r\n    this._molecule = null;\r\n\r\n    this._currPosIdx = 0;\r\n    this._currStartIdx = 0;\r\n\r\n    this._serialAtomMap = {};\r\n\r\n    this._options.fileType = 'mol2';\r\n  }\r\n\r\n  _parseRawStrings(data) {\r\n    return data.split(/\\r?\\n|\\r/);\r\n  }\r\n\r\n  _toStringFromStart(numb, MOL2Data) {\r\n    const newPosIdx = this._currStartIdx + numb;\r\n    this._currPosIdx = (newPosIdx < MOL2Data.length) ? newPosIdx : this._currStartIdx;\r\n  }\r\n\r\n  _toHeaderString(header, MOL2Data) {\r\n    this._toStringFromStart(0, MOL2Data);\r\n    while (this._currPosIdx < MOL2Data.length) {\r\n      if (MOL2Data[this._currPosIdx].match(`@<TRIPOS>${header}`)) {\r\n        return;\r\n      }\r\n      this._currPosIdx++;\r\n    }\r\n    this._toStringFromStart(0, MOL2Data);\r\n  }\r\n\r\n  _toStringFromHeader(header, numb, MOL2Data) {\r\n    this._toHeaderString(header, MOL2Data);\r\n    const newPosIdx = this._currPosIdx + numb;\r\n\r\n    if (MOL2Data[this._currPosIdx].match(`@<TRIPOS>${header}`) && newPosIdx < MOL2Data.length) {\r\n      this._currPosIdx = newPosIdx;\r\n    }\r\n  }\r\n\r\n  _setStart(startPos, MOL2Data) {\r\n    if (startPos >= MOL2Data.length) {\r\n      this._currStartIdx = this._currPosIdx = MOL2Data.length - 1;\r\n    } else {\r\n      this._currStartIdx = this._currPosIdx = startPos;\r\n    }\r\n  }\r\n\r\n  _probablyHaveDataToParse(MOL2Data) {\r\n    return this._currPosIdx < MOL2Data.length - 2;\r\n  }\r\n\r\n  _findNextCompoundStart(MOL2Data) {\r\n    while (this._currPosIdx < MOL2Data.length && MOL2Data[this._currPosIdx].trim() !== '@<TRIPOS>MOLECULE>') {\r\n      this._currPosIdx++;\r\n    }\r\n    this._setStart(++this._currPosIdx, MOL2Data);\r\n    return this._probablyHaveDataToParse(MOL2Data);\r\n  }\r\n\r\n  _parseMolecule(MOL2Data) {\r\n    this._toHeaderString('MOLECULE', MOL2Data);\r\n\r\n    const { metadata } = this._complex;\r\n    metadata.name = MOL2Data[++this._currPosIdx];\r\n    metadata.format = 'mol2';\r\n\r\n    this._molecule = { _index: '', _chains: [] };\r\n    this._molecule._index = this._compoundIndx + 1;\r\n    this._molecules.push(this._molecule);\r\n  }\r\n\r\n  /* Atom format description:\r\n   * atomId atomName x y z element [resSeq [resName [charge [statusBit]]]]\r\n   * statusBits is the internal SYBYL status bits associated with the atom.\r\n   * These should never be set by the user.\r\n   * Source: http://chemyang.ccnu.edu.cn/ccb/server/AIMMS/mol2.pdf\r\n   */\r\n  _parseAtoms(atomsNum, MOL2Data) {\r\n    this._toHeaderString('ATOM', MOL2Data);\r\n\r\n    for (let i = 0; i < atomsNum; i++) {\r\n      const parsedStr = splitToFields(MOL2Data[++this._currPosIdx]);\r\n\r\n      if (parsedStr.length < 6) {\r\n        throw new Error('MOL2 parsing error: Not enough information to create atom!');\r\n      }\r\n      const atomId = parseInt(parsedStr[0], 10);\r\n      const atomName = parsedStr[1];\r\n\r\n      const x = parseFloat(parsedStr[2]);\r\n      const y = parseFloat(parsedStr[3]);\r\n      const z = parseFloat(parsedStr[4]);\r\n\r\n      const element = parsedStr[5].split('.')[0].toUpperCase();\r\n\r\n      let charge = 0;\r\n      if (parsedStr.length >= 9) {\r\n        charge = parseFloat(parsedStr[8]) || 0.0;\r\n      }\r\n\r\n      let chain = this._chain;\r\n      if (!chain) {\r\n        // .mol2 may contain information about multiple molecules, but they can't be visualized\r\n        // at the same time now. There is no need to create different chain IDs then.\r\n        this._chain = chain = this._complex.getChain('A') || this._complex.addChain('A');\r\n        this._residue = null;\r\n      }\r\n      if (!this._setResidue(parsedStr)) {\r\n        continue;\r\n      }\r\n\r\n      // These fields are not listed in mol2 format. Set them default.\r\n      // Atoms and het atoms doesn't differ in .mol2,\r\n      // but het atoms have special residues. It can be used in next updates\r\n      const het = false;\r\n      const altLoc = ' ';\r\n      const occupancy = 1.0;\r\n      const tempFactor = 0.0;\r\n      const type = Element.getByName(element);\r\n      const role = Element.Role[atomName];\r\n\r\n      const xyz = new THREE.Vector3(x, y, z);\r\n      this._residue.addAtom(atomName, type, xyz, role, het, atomId, altLoc, occupancy, tempFactor, charge);\r\n    }\r\n  }\r\n\r\n  _setResidue(parsedStr) {\r\n    let resSeq = 1;\r\n    let resName = 'UNK'; // The same meaning has '<0>' in some mol2 files\r\n\r\n    if (parsedStr.length >= 7) {\r\n      resSeq = parseInt(parsedStr[6], 10);\r\n    }\r\n    if (parsedStr.length >= 8 && parsedStr[7] !== '<0>') {\r\n      resName = parsedStr[7].replace(resNumberRegex, '');\r\n    }\r\n    if (this.settings.now.nowater) {\r\n      if (resName === 'HOH' || resName === 'WAT') {\r\n        return false;\r\n      }\r\n    }\r\n    const residue = this._residue;\r\n    const chain = this._chain;\r\n    if (!residue || residue.getSequence() !== resSeq) {\r\n      this._residue = chain.addResidue(resName, resSeq, 'A');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /* Bond format description\r\n   * bondId originAtomId targetAtomId bondType [statusBits]\r\n   */\r\n  _parseBonds(bondsNum, MOL2Data) {\r\n    this._toHeaderString('BOND', MOL2Data);\r\n\r\n    for (let i = 0; i < bondsNum; i++) {\r\n      const parsedStr = splitToFields(MOL2Data[++this._currPosIdx]);\r\n\r\n      if (parsedStr.length < 3) {\r\n        throw new Error('MOL2 parsing error: Missing information about bonds!');\r\n      }\r\n\r\n      let originAtomId = parseInt(parsedStr[1], 10);\r\n      let targetAtomId = parseInt(parsedStr[2], 10);\r\n      const bondType = parsedStr[3];\r\n\r\n      if (originAtomId > targetAtomId) {\r\n        [originAtomId, targetAtomId] = [targetAtomId, originAtomId];\r\n      }\r\n      this._complex.addBond(originAtomId, targetAtomId,\r\n        orderMap[bondType] || 0,\r\n        typeMap[bondType] || Bond.BondType.UNKNOWN,\r\n        true);\r\n    }\r\n  }\r\n\r\n  _fixSerialAtoms() {\r\n    const atoms = this._complex._atoms;\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const atom = atoms[i];\r\n      this._serialAtomMap[atom.serial] = atom;\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap;\r\n    const complex = this._complex;\r\n\r\n    if (Object.keys(serialAtomMap).length === 0) {\r\n      throw new Error('MOL2 parsing error: Missing atom information!');\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    for (let j = 0; j < bonds.length; j++) {\r\n      const bond = bonds[j];\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // Get chain from complex\r\n    const chain = this._complex._chains[0];\r\n    this._complex._molecules = [];\r\n\r\n    // Aggregate residues from chains\r\n    // (to be precise from the chain 'A')\r\n    for (let i = 0; i < this._molecules.length; i++) {\r\n      const currMolecule = this._molecules[i];\r\n      const molResidues = chain._residues;\r\n      const molecule = new Molecule(this._complex, currMolecule._name, i + 1);\r\n      molecule.residues = molResidues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  _finalize() {\r\n    this._complex._finalizeBonds();\r\n    this._fixSerialAtoms();\r\n    this._fixBondsArray();\r\n    this._finalizeMolecules();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  _parseCompound(MOL2Data) {\r\n    this._compoundIndx++;\r\n    this._parseMolecule(MOL2Data);\r\n\r\n    // Ignoring comments and everything before @<TRIPOS>MOLECULE block\r\n    this._toStringFromHeader('MOLECULE', 2, MOL2Data);\r\n\r\n    const parsedStr = MOL2Data[this._currPosIdx].trim().split(spacesRegex);\r\n    const atomsNum = parsedStr[0];\r\n    const bondsNum = parsedStr[1];\r\n\r\n    this._parseAtoms(atomsNum, MOL2Data);\r\n    this._parseBonds(bondsNum, MOL2Data);\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n    const MOL2Data = this._parseRawStrings(this._data);\r\n    do {\r\n      this._parseCompound(MOL2Data);\r\n    } while (this._findNextCompoundStart(MOL2Data));\r\n\r\n    this._finalize();\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nMOL2Parser.formats = ['mol2'];\r\nMOL2Parser.extensions = ['.mol2', '.ml2', '.sy2'];\r\n\r\nexport default MOL2Parser;\r\n","import ParserList from './parsers/ParserList';\r\n\r\nimport PDBParser from './parsers/PDBParser';\r\nimport CMLParser from './parsers/CMLParser';\r\nimport MMTFParser from './parsers/MMTFParser';\r\nimport CIFParser from './parsers/CIFParser';\r\nimport CCP4Parser from './parsers/CCP4Parser';\r\nimport XYZParser from './parsers/XYZParser';\r\nimport PubChemParser from './parsers/PubChemParser';\r\nimport SDFParser from './parsers/SDFParser';\r\nimport DSN6Parser from './parsers/DSN6Parser';\r\nimport GROParser from './parsers/GROParser';\r\nimport MOL2Parser from './parsers/MOL2Parser';\r\n\r\nexport default new ParserList([\r\n  // note: order might be important\r\n  PDBParser,\r\n  CIFParser,\r\n  MMTFParser,\r\n  XYZParser,\r\n  CMLParser,\r\n  PubChemParser,\r\n  SDFParser,\r\n  CCP4Parser,\r\n  DSN6Parser,\r\n  GROParser,\r\n  MOL2Parser,\r\n]);\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available exporters.\r\n * @extends EntityList\r\n */\r\nclass ExporterList extends EntityList {\r\n  /**\r\n   * Create a list of exporters.\r\n   * The exporters are indexed by supported data formats (`.formats` and\r\n   * `.extensions` properties of a Exporter subclass).\r\n   * The Exporters can be retrieved later by matching against specs (see {@link ExporterList#find}).\r\n   *\r\n   * @param {!Array<function(new:Exporter)>=} someExporters A list of {@link Exporter} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see ExporterList#register\r\n   */\r\n  constructor(someExporters = []) {\r\n    super(someExporters, ['formats']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable exporter for data.\r\n   *\r\n   * @param {Object} specs Exporter specifications.\r\n   * @param {string=} specs.format Supported data format.\r\n   * @param {*=} specs.data Data to export.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.format) {\r\n      list = this._dict.formats[specs.format.toLowerCase()] || [];\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default ExporterList;\r\n","import makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Exporter {\r\n  constructor(source, options) {\r\n    this._source = source;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n  }\r\n\r\n  exportSync() {\r\n    throw new Error('Exporting to this source is not implemented');\r\n  }\r\n\r\n  export() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (this._abort) {\r\n            return reject(new Error('Export aborted'));\r\n          }\r\n          return resolve(this.exportSync());\r\n        } catch (error) {\r\n          return reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Exporter.prototype);\r\n","import _ from 'lodash';\r\nimport { Matrix4 } from 'three';\r\n\r\nexport default class PDBResult {\r\n  constructor() {\r\n    this._resultArray = [];\r\n    this._currentStr = -1;\r\n    this._tag = null;\r\n    this._fixedNumeration = false;\r\n    this._numeration = false;\r\n    this._tagStrNum = 0;\r\n  }\r\n\r\n  getResult() {\r\n    this.writeString('\\n', 81, 81);\r\n    return this._resultArray.join('');\r\n  }\r\n\r\n  _currentStrLength() {\r\n    const curStr = this._resultArray[this._currentStr];\r\n    return curStr ? curStr.length : 0;\r\n  }\r\n\r\n  // numeration can be number or boolean\r\n  // if numeration is number then just put this number to 8-10 pos in string\r\n  // if numeration is boolean then increase number for all new strings\r\n  newTag(tag, numeration) {\r\n    if (!tag) {\r\n      this._tag = null;\r\n    } else {\r\n      this._tag = tag;\r\n    }\r\n    if (!_.isUndefined(numeration)) {\r\n      if (_.isNumber(numeration)) {\r\n        this._tagStrNum = numeration;\r\n        this._numeration = true;\r\n        this._fixedNumeration = true;\r\n      } else if (_.isBoolean(numeration)) {\r\n        this._tagStrNum = 0;\r\n        this._numeration = numeration;\r\n        this._fixedNumeration = false;\r\n      }\r\n    } else {\r\n      this._numeration = false;\r\n      this._fixedNumeration = false;\r\n      this._tagStrNum = 0;\r\n    }\r\n  }\r\n\r\n  newString(tag) {\r\n    this.writeString('\\n', 81, 81);\r\n    this._currentStr++;\r\n    this._resultArray.push('');\r\n\r\n    if (tag) {\r\n      this.writeString(tag, 1, 6);\r\n    } else if (this._tag) {\r\n      this.writeString(this._tag, 1, 6);\r\n    }\r\n\r\n    if (this._numeration) {\r\n      if (!this._fixedNumeration) {\r\n        this._tagStrNum++;\r\n      }\r\n      if (this._tagStrNum !== 1) {\r\n        this.writeString(this._tagStrNum.toString(), 10, 8);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeEntireString(string, maxStrPos, concat) {\r\n    if (!maxStrPos) {\r\n      maxStrPos = 81;\r\n    }\r\n    for (let j = 0; j < string.length; j++) {\r\n      if (this._currentStrLength() === maxStrPos && j !== string.length - 1) {\r\n        this.newString();\r\n        if (concat) { // pretty hardcoddy\r\n          this.writeString(concat.tag, concat.begin, concat.end);\r\n        }\r\n      }\r\n      if (string[j] === '\\n') {\r\n        this.newString();\r\n      } else {\r\n        this.writeString(string[j]);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeString(string, begin, end) {\r\n    let curStr = this._resultArray[this._currentStr];\r\n    let str;\r\n\r\n    const curStrLength = curStr ? curStr.length : 0;\r\n\r\n    if (_.isUndefined(string)) {\r\n      return;\r\n    }\r\n\r\n    if (!_.isNumber(begin)) {\r\n      begin = curStrLength + 1;\r\n    }\r\n\r\n    if (!_.isNumber(end)) {\r\n      end = curStrLength + string.length;\r\n    }\r\n\r\n    if (!_.isString(string)) {\r\n      str = string.toString();\r\n    } else {\r\n      str = string;\r\n    }\r\n\r\n    const finish = begin < end ? end : begin;\r\n    const start = begin < end ? begin : end;\r\n\r\n    if (str.length > Math.abs(begin - end) + 1) {\r\n      str = str.substr(0, Math.abs(begin - end + 1));\r\n    }\r\n\r\n    // spaces before start of new data\r\n    if (start > curStrLength + 1) {\r\n      this._resultArray[this._currentStr] += ' '.repeat(start - curStrLength - 1);\r\n    } else if (start <= curStrLength) {\r\n      const cStr = this._resultArray[this._currentStr];\r\n      this._resultArray[this._currentStr] = cStr.slice(0, start - 1);\r\n    }\r\n\r\n    // if reverse order\r\n    // reverse order of end and begin means that user wants to align text right\r\n    if (end < begin) {\r\n      const len = begin - end + 1;\r\n      str = ' '.repeat(len - str.length) + str;\r\n    }\r\n\r\n    // some hardcode fix for space between string numeration and data\r\n    // (see pdb file format description)\r\n    if (start === 11 && this._numeration && this._tagStrNum !== 1) {\r\n      str = ` ${str}`;\r\n    }\r\n\r\n    // append new data to string\r\n    this._resultArray[this._currentStr] += str;\r\n    curStr = this._resultArray[this._currentStr];\r\n\r\n    if (finish > curStr.length) {\r\n      this._resultArray[this._currentStr] += ' '.repeat(finish - curStr.length);\r\n    }\r\n  }\r\n\r\n  writeBondsArray(bonds, atom) {\r\n    const bondsArrays = this._getSubArrays(bonds, 4);\r\n\r\n    for (let k = 0; k < bondsArrays.length; k++) {\r\n      this.newString();\r\n      this.writeString(atom.serial, 11, 7);\r\n\r\n      for (let j = 0; j < bondsArrays[k].length; j++) {\r\n        const serial = (bondsArrays[k][j]._left.serial === atom.serial)\r\n          ? bondsArrays[k][j]._right.serial : bondsArrays[k][j]._left.serial;\r\n\r\n        this.writeString(serial, 16 + 5 * j, 12 + 5 * j);\r\n      }\r\n    }\r\n  }\r\n\r\n  _getSubArrays(arr, subArraySize) {\r\n    const subArrays = [];\r\n    for (let i = 0; i < arr.length; i += subArraySize) {\r\n      subArrays.push(arr.slice(i, i + subArraySize));\r\n    }\r\n    return subArrays;\r\n  }\r\n\r\n  // function for writing matrix in Remark290 and Remark350 tags\r\n  // (see pdb file description)\r\n  writeMatrix(matrix, matrixIndx, tag) {\r\n    for (let j = 0; j < 3; j++) {\r\n      this.newString();\r\n      this.writeString(tag, 14, 18);\r\n      this.writeString((j + 1).toString(), 19, 19);\r\n      this.writeString(matrixIndx.toString(), 23, 20);\r\n      for (let k = 0; k < 3; k++) {\r\n        const numb = parseFloat(matrix.elements[j * 4 + k]).toFixed(6);\r\n        this.writeString(numb.toString(), 33 + k * 10, 24 + k * 10);\r\n      }\r\n\r\n      const numb = parseFloat(matrix.elements[j * 4 + 3]).toFixed(5);\r\n      this.writeString(numb.toString(), 68, 55);\r\n    }\r\n  }\r\n\r\n  writeMatrices(matrices, string) {\r\n    if (!matrices) {\r\n      return;\r\n    }\r\n    const matrix = new Matrix4();\r\n    for (let j = 0; j < matrices.length; j++) {\r\n      matrix.copy(matrices[j]).transpose();\r\n      this.writeMatrix(matrix, j + 1, string);\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport Complex from '../../chem/Complex';\r\nimport Exporter from './Exporter';\r\nimport PDBResult from './PDBResult';\r\nimport Assembly from '../../chem/Assembly';\r\nimport { typeByPDBHelixClass } from '../../chem/Helix';\r\n\r\nexport default class PDBExporter extends Exporter {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n    this._tags = ['HEADER', 'TITLE', 'COMPND', 'REMARK', 'HELIX', 'SHEET', 'ATOM and HETATM', 'CONECT'];\r\n    this._result = null;\r\n    this._tagExtractors = {\r\n      HEADER: this._extractHEADER,\r\n      TITLE: this._extractTITLE,\r\n      'ATOM and HETATM': this._extractATOM,\r\n      CONECT: this._extractCONECT,\r\n      COMPND: this._extractCOMPND,\r\n      REMARK: this._extractREMARK,\r\n      HELIX: this._extractHELIX,\r\n      SHEET: this._extractSHEET,\r\n    };\r\n    this._stringForRemark350 = 'COORDINATES FOR A COMPLETE MULTIMER REPRESENTING THE KNOWN\\n'\r\n                             + 'BIOLOGICALLY SIGNIFICANT OLIGOMERIZATION STATE OF THE\\n'\r\n                             + 'MOLECULE CAN BE GENERATED BY APPLYING BIOMT TRANSFORMATIONS\\n'\r\n                             + 'GIVEN BELOW.  BOTH NON-CRYSTALLOGRAPHIC AND\\n'\r\n                             + 'CRYSTALLOGRAPHIC OPERATIONS ARE GIVEN.';\r\n\r\n    this._stringForRemark290 = 'CRYSTALLOGRAPHIC SYMMETRY TRANSFORMATIONS\\n'\r\n                             + 'THE FOLLOWING TRANSFORMATIONS OPERATE ON THE ATOM/HETATM\\n'\r\n                             + 'RECORDS IN THIS ENTRY TO PRODUCE CRYSTALLOGRAPHICALLY\\n'\r\n                             + 'RELATED MOLECULES.';\r\n  }\r\n\r\n  exportSync() {\r\n    const result = new PDBResult();\r\n    if (!this._source) {\r\n      return this._result;\r\n    }\r\n\r\n    for (let i = 0; i < this._tags.length; i++) {\r\n      const tag = this._tags[i];\r\n      const func = this._tagExtractors[tag];\r\n      if (_.isFunction(func)) {\r\n        func.call(this, result);\r\n      }\r\n    }\r\n\r\n    this._result = result.getResult();\r\n\r\n    return this._result;\r\n  }\r\n\r\n  _extractHEADER(result) {\r\n    if (!this._source.metadata) {\r\n      return;\r\n    }\r\n    const { metadata } = this._source;\r\n    result.newTag('HEADER');\r\n    result.newString();\r\n    if (metadata.classification) {\r\n      result.writeString(metadata.classification, 11, 50);\r\n    }\r\n    if (metadata.date) {\r\n      result.writeString(metadata.date, 51, 59);\r\n    }\r\n    if (metadata.id) {\r\n      result.writeString(metadata.id, 63, 66);\r\n    }\r\n  }\r\n\r\n  _extractTITLE(result) {\r\n    if (!this._source.metadata) {\r\n      return;\r\n    }\r\n    const { metadata } = this._source;\r\n    if (!metadata.title) {\r\n      return;\r\n    }\r\n    result.newTag('TITLE', true);\r\n    for (let i = 0; i < metadata.title.length; i++) {\r\n      result.newString();\r\n      result.writeString(metadata.title[i], 11, 80);\r\n    }\r\n  }\r\n\r\n  _extractCONECT(result) {\r\n    if (!this._source._atoms) {\r\n      return;\r\n    }\r\n\r\n    const atoms = this._source._atoms;\r\n    result.newTag('CONECT');\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const fixedBonds = atoms[i].bonds.filter((bond) => bond._fixed);\r\n      if (fixedBonds.length !== 0) {\r\n        result.writeBondsArray(fixedBonds.reverse(), atoms[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractSHEET(result) {\r\n    if (!this._source._sheets) {\r\n      return;\r\n    }\r\n\r\n    result.newTag('SHEET');\r\n\r\n    const sheets = this._source._sheets;\r\n    for (let i = 0; i < sheets.length; i++) {\r\n      if (sheets[i]._strands) {\r\n        const strands = sheets[i]._strands;\r\n        for (let j = 0; j < strands.length; j++) {\r\n          result.newString();\r\n          result.writeString(j + 1, 10, 8);\r\n          result.writeString(sheets[i]._name, 14, 12);\r\n          result.writeString(strands.length, 16, 15);\r\n          result.writeString(strands[j].init._type._name, 18, 20);\r\n          result.writeString(strands[j].init._chain._name, 22, 22);\r\n          result.writeString(strands[j].init._sequence, 26, 23);\r\n          result.writeString(strands[j].init._icode, 27, 27);\r\n          result.writeString(strands[j].term._type._name, 29, 31);\r\n          result.writeString(strands[j].init._chain._name, 33, 33);\r\n          result.writeString(strands[j].term._sequence, 37, 34);\r\n          result.writeString(strands[j].term._icode, 38, 38);\r\n          result.writeString(strands[j].sense, 40, 39);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractHELIX(result) {\r\n    if (!this._source._helices) {\r\n      return;\r\n    }\r\n\r\n    result.newTag('HELIX');\r\n    const helices = this._source._helices;\r\n    for (let i = 0; i < helices.length; i++) {\r\n      const helix = helices[i];\r\n      const helixClass = _.invert(typeByPDBHelixClass);\r\n      result.newString();\r\n      result.writeString(helix.serial, 10, 8);\r\n      result.writeString(helix.name, 14, 12);\r\n      result.writeString(helix.init._type._name, 16, 18);\r\n      result.writeString(helix.init._chain._name, 20, 20);\r\n      result.writeString(helix.init._sequence, 25, 22);\r\n      result.writeString(helix.init._icode, 26, 26);\r\n      result.writeString(helix.term._type._name, 28, 30);\r\n      result.writeString(helix.term._chain._name, 32, 32);\r\n      result.writeString(helix.term._sequence, 37, 34);\r\n      result.writeString(helix.term._icode, 38, 38);\r\n      result.writeString(helixClass[helix.type], 40, 39);\r\n      result.writeString(helix.comment, 41, 70);\r\n      result.writeString(helix.length, 76, 72);\r\n    }\r\n  }\r\n\r\n  _extractATOM(result) {\r\n    if (!this._source._atoms) {\r\n      return;\r\n    }\r\n    const atoms = this._source._atoms;\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const tag = atoms[i].het ? 'HETATM' : 'ATOM';\r\n      result.newString(tag);\r\n      const startIndx = (atoms[i].element.name.length > 1 || atoms[i].name.length > 3) ? 13 : 14;\r\n      result.writeString(atoms[i].serial, 11, 7);\r\n      result.writeString(atoms[i].name, startIndx, 16);\r\n      result.writeString(String.fromCharCode(atoms[i].location), 17, 17);\r\n      result.writeString(atoms[i].residue._type._name, 20, 18);\r\n      result.writeString(atoms[i].residue._chain._name, 22, 22);\r\n      result.writeString(atoms[i].residue._sequence, 26, 23);\r\n      result.writeString(atoms[i].residue._icode, 27, 27);\r\n      result.writeString(atoms[i].position.x.toFixed(3), 38, 31);\r\n      result.writeString(atoms[i].position.y.toFixed(3), 46, 39);\r\n      result.writeString(atoms[i].position.z.toFixed(3), 54, 47);\r\n      result.writeString(atoms[i].occupancy.toFixed(2), 60, 55);\r\n      result.writeString(atoms[i].temperature.toFixed(2), 66, 61);\r\n      result.writeString(atoms[i].element.name, 78, 77);\r\n      if (atoms[i].charge) {\r\n        result.writeString(atoms[i].charge, 79, 80);\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractCOMPND(result) {\r\n    if (!this._source._molecules) {\r\n      return;\r\n    }\r\n    const molecules = this._source._molecules;\r\n    result.newTag('COMPND', true);\r\n\r\n    for (let i = 0; i < molecules.length; i++) {\r\n      const chains = this._getMoleculeChains(molecules[i]);\r\n      result.newString();\r\n      result.writeString(`MOL_ID: ${molecules[i].index};`, 11, 80);\r\n      result.newString();\r\n      result.writeString(`MOLECULE: ${molecules[i].name};`, 11, 80);\r\n      result.newString();\r\n      result.writeString('CHAIN: ', 11, 18);\r\n      const chainsString = `${chains.join(', ')};`;\r\n      result.writeEntireString(chainsString, 81);\r\n    }\r\n  }\r\n\r\n  _extractREMARK(result) {\r\n    this._Remark290(result);\r\n    this._Remark350(result);\r\n  }\r\n\r\n  _Remark290(result) {\r\n    if (!this._source.symmetry) {\r\n      return;\r\n    }\r\n\r\n    if (this._source.symmetry.length !== 0) {\r\n      const matrices = this._source.symmetry;\r\n      result.newTag('REMARK', 290);\r\n      result.newString();\r\n      result.newString();\r\n      result.writeEntireString(this._stringForRemark290);\r\n      result.writeMatrices(matrices, 'SMTRY');\r\n      result.newString();\r\n      result.newString();\r\n      result.writeString('REMARK: NULL', 11, 80);\r\n    }\r\n  }\r\n\r\n  _Remark350(result) {\r\n    if (!this._source.units) {\r\n      return;\r\n    }\r\n    const { units } = this._source;\r\n    let biomolIndx = 0;\r\n\r\n    result.newTag('REMARK', 350);\r\n    result.newString();\r\n    result.newString();\r\n    result.writeEntireString(this._stringForRemark350);\r\n\r\n    const assemblies = units.filter((unit) => unit instanceof Assembly);\r\n\r\n    for (let i = 0; i < assemblies.length; i++) {\r\n      result.newString();\r\n      result.newString();\r\n      biomolIndx++;\r\n      result.writeString(`BIOMOLECULE: ${biomolIndx}`, 11, 80);\r\n      const chains = assemblies[i].chains.join(', ');\r\n      result.newString();\r\n      result.writeString('APPLY THE FOLLOWING TO CHAINS: ');\r\n      result.writeEntireString(chains, 69, { tag: 'AND CHAINS: ', begin: 31, end: 42 });\r\n\r\n      const { matrices } = assemblies[i];\r\n      result.writeMatrices(matrices, 'BIOMT');\r\n    }\r\n  }\r\n\r\n  _getMoleculeChains(molecule) {\r\n    function getChainName(residue) {\r\n      return residue._chain._name;\r\n    }\r\n    const chainNames = molecule.residues.map(getChainName);\r\n    return chainNames.filter((item, pos) => chainNames.indexOf(item) === pos);\r\n  }\r\n}\r\n\r\nPDBExporter.formats = ['pdb'];\r\nPDBExporter.SourceClass = Complex;\r\n","import * as THREE from 'three';\r\n\r\nconst FBX_POS_SIZE = 3;\r\nconst FBX_NORM_SIZE = 3;\r\nconst FBX_COL_SIZE = 4;\r\n\r\nfunction copyFbxPoint3(src, srcIdx, dst, dstIdx) {\r\n  dst[dstIdx] = src[srcIdx];\r\n  dst[dstIdx + 1] = src[srcIdx + 1];\r\n  dst[dstIdx + 2] = src[srcIdx + 2];\r\n}\r\n\r\nfunction copyFbxPoint4(src, srcIdx, dst, dstIdx, value) {\r\n  dst[dstIdx] = src[srcIdx];\r\n  dst[dstIdx + 1] = src[srcIdx + 1];\r\n  dst[dstIdx + 2] = src[srcIdx + 2];\r\n  dst[dstIdx + 3] = value;\r\n}\r\n\r\nconst vector4 = new THREE.Vector4();\r\nfunction copyTransformedPoint3(src, srcIdx, dst, dstIdx, opts) {\r\n  vector4.set(src[srcIdx], src[srcIdx + 1], src[srcIdx + 2], opts.w);\r\n  vector4.applyMatrix4(opts.matrix);\r\n  dst[dstIdx] = vector4.x;\r\n  dst[dstIdx + 1] = vector4.y;\r\n  dst[dstIdx + 2] = vector4.z;\r\n}\r\n\r\nfunction setSubArray(src, dst, count, copyFunctor, functorOpts) {\r\n  if ((dst.array.length - dst.start) / dst.stride < count\r\n    || (src.array.length - src.start) / src.stride < count) {\r\n    return; // we've got no space\r\n  }\r\n  if (src.stride === dst.stride) { // stride is the same\r\n    dst.array.set(src.array, dst.start);\r\n  } else {\r\n    let idx = dst.start;\r\n    let arridx = src.start;\r\n    for (let i = 0; i < count; ++i, idx += dst.stride, arridx += src.stride) {\r\n      copyFunctor(src.array, arridx, dst.array, idx, functorOpts);\r\n    }\r\n  }\r\n}\r\n\r\nexport default class FBXModel {\r\n  constructor() {\r\n    this.positions = null;\r\n    this.normals = null;\r\n    this.colors = null;\r\n    this.indices = null;\r\n    this.lastPos = 0;\r\n    this.lastNorm = 0;\r\n    this.lastCol = 0;\r\n    this.lastIdx = 0;\r\n  }\r\n\r\n  init(vertsCount, indsCount) {\r\n    this.positions = new Float32Array(vertsCount * FBX_POS_SIZE);\r\n    this.normals = new Float32Array(vertsCount * FBX_NORM_SIZE);\r\n    this.colors = new Float32Array(vertsCount * FBX_COL_SIZE);\r\n    this.indices = new Int32Array(indsCount);\r\n  }\r\n\r\n  setPositions(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.positions,\r\n      start: this.lastPos,\r\n      stride: FBX_POS_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint3);\r\n    this.lastPos += count * FBX_POS_SIZE;\r\n  }\r\n\r\n  setTransformedPositions(array, start, count, stride, matrix) {\r\n    let idx = this.lastPos;\r\n    let arrIdx = start;\r\n    const opts = { matrix, w: 1 };\r\n    for (let i = 0; i < count; ++i, arrIdx += stride, idx += FBX_POS_SIZE) {\r\n      copyTransformedPoint3(array, arrIdx, this.positions, idx, opts);\r\n    }\r\n    this.lastPos += count * FBX_POS_SIZE;\r\n  }\r\n\r\n  setNormals(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.normals,\r\n      start: this.lastNorm,\r\n      stride: FBX_NORM_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint3);\r\n    this.lastNorm += count * FBX_NORM_SIZE;\r\n  }\r\n\r\n  setTransformedNormals(array, start, count, stride, matrix) {\r\n    let idx = this.lastNorm;\r\n    let arrIdx = start;\r\n    const opts = { matrix, w: 0 };\r\n    for (let i = 0; i < count; ++i, arrIdx += stride, idx += FBX_NORM_SIZE) {\r\n      copyTransformedPoint3(array, arrIdx, this.normals, idx, opts);\r\n    }\r\n    this.lastNorm += count * FBX_NORM_SIZE;\r\n  }\r\n\r\n  setColors(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.colors,\r\n      start: this.lastCol,\r\n      stride: FBX_COL_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint4, 1);\r\n    this.lastCol += count * FBX_COL_SIZE;\r\n  }\r\n\r\n  setIndices(array, start, count) {\r\n    this.indices.set(array, this.lastIdx);\r\n    this.lastIdx += count;\r\n  }\r\n\r\n  setShiftedIndices(array, count, shift) {\r\n    const shifted = array.map((x) => x + shift);\r\n    this.setIndices(shifted, 0, count);\r\n  }\r\n\r\n  getVerticesNumber() {\r\n    return this.lastPos / FBX_POS_SIZE;\r\n  }\r\n\r\n  addInstance(matrix, geo) {\r\n    // add indices at first to take old number of vertices for shift\r\n    const currentCount = this.getVerticesNumber();\r\n    this.setShiftedIndices(geo.indices, geo.indices.length, currentCount);\r\n    // simply write vertices at empty space\r\n    const size = geo.itemSize;\r\n    this.setTransformedPositions(geo.positions, 0, geo.vertsCount, size.position, matrix);\r\n    this.setTransformedNormals(geo.normals, 0, geo.vertsCount, size.normal, matrix);\r\n    this.setColors(geo.colors, 0, geo.vertsCount, size.color);\r\n  }\r\n}\r\n","/** Base class for fbx geometry contains simply organized attributes: positions+normals+colors, indices. */\r\nexport default class FBXGeometry {\r\n  /**\r\n   * Create a base geo with necessary members.\r\n   */\r\n  constructor() {\r\n    this.positions = null;\r\n    this.normals = null;\r\n    this.colors = null;\r\n    this.indices = null;\r\n    this.vertsCount = 0;\r\n    this.itemSize = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize base geo storing items info from attributes.\r\n   * @param {Object} geo - THREE.Geometry.\r\n   */\r\n  init(geo, _info) {\r\n    const { attributes } = geo;\r\n    // save item size\r\n    this.itemSize = {\r\n      position: attributes.position.itemSize,\r\n      normal: attributes.normal.itemSize,\r\n      color: attributes.color.itemSize,\r\n    };\r\n  }\r\n}\r\n","import FBXGeometry from './FBXGeometry';\r\n\r\n/**\r\n * Fbx geometry, that copies positions+normals, indexes and creates colors filled with defined value.\r\n * @extends FBXGeometry\r\n */\r\nexport default class FBX1CGeometry extends FBXGeometry {\r\n  /**\r\n   * Initialize geo storing positions, normals, indices and create colors.\r\n   * @param {Object} geo - THREE.Geometry.\r\n   */\r\n  init(geo, _info) {\r\n    super.init(geo, _info);\r\n    const {\r\n      attributes: {\r\n        position,\r\n        normal,\r\n      },\r\n      index,\r\n    } = geo;\r\n    // copy vertices attributes\r\n    this.vertsCount = position.count;\r\n    this.positions = position.array;\r\n    this.normals = normal.array;\r\n    // create color array\r\n    this.colors = new Float32Array(this.vertsCount * this.itemSize.color);\r\n    // indices\r\n    this.indices = index.array;\r\n  }\r\n\r\n  /**\r\n   * Set defined color for all items in color attribute\r\n   * @param {Object} color - THREE.Color.\r\n   */\r\n  setColors(color) {\r\n    let offset = 0;\r\n    for (let i = 0, l = this.colors.length, cl = this.itemSize.color; i < l; i += cl) {\r\n      this.colors[offset++] = color.r;\r\n      this.colors[offset++] = color.g;\r\n      this.colors[offset++] = color.b;\r\n    }\r\n  }\r\n}\r\n","import FBXGeometry from './FBXGeometry';\r\n\r\n/**\r\n * Fbx geometry, that copies positions+normals, indexes from cylinder  geometry and creates colors filled with two\r\n * defined values.\r\n * @extends FBXGeometry\r\n */\r\nexport default class FBX2CCylinder extends FBXGeometry {\r\n  constructor() {\r\n    super();\r\n    this._cutRawStart = 0;\r\n    this._cutRawEnd = 0;\r\n    this._facesPerSlice = 0;\r\n  }\r\n\r\n  /**\r\n   * Initialize geo by creating new attributes, because we extend number of vertices to make cylinder two-colored.\r\n   * Indices remain the same. We process open- end close-ended cylinders and consider cylinders od 2 segments\r\n   * in height ONLY.\r\n   * NOTE: cylinder consists of 2 height segments and stores parts in the order: tube, topCap, bottomCap\r\n   * @param {Object} geo - THREE.Geometry.\r\n   * @param {Object} info - information needed for geo extend\r\n   */\r\n  init(geo, info) {\r\n    super.init(geo, info);\r\n    const {\r\n      attributes: {\r\n        position,\r\n      },\r\n      index,\r\n    } = geo;\r\n    // extend vertices arrays\r\n    this.vertsCount = position.count + info.addPerCylinder;\r\n    this._facesPerSlice = info.addPerCylinder;\r\n    this.positions = new Float32Array(this.vertsCount * position.itemSize);\r\n    this.normals = new Float32Array(this.vertsCount * this.itemSize.normal);\r\n    this.colors = new Float32Array(this.vertsCount * this.itemSize.color);\r\n    this._extendVertices(geo, info);\r\n    // number of indices stays the same\r\n    this.indices = new Uint32Array(index.count);\r\n    this._extendIndices(geo, info);\r\n  }\r\n\r\n  /** Extend vertex attributes to have one more slice to make sharp middle startColor-endColor line. */\r\n  _extendVertices(geo, info) {\r\n    const { position } = geo.attributes;\r\n    const { normal } = geo.attributes;\r\n    const geoParams = geo.getGeoParams();\r\n    const cutRaw = 1; // we expect cylinders of 2 segments in height => so half segment = 1\r\n    this._cutRawStart = cutRaw * geoParams.radialSegments;\r\n    this._cutRawEnd = this._cutRawStart + info.addPerCylinder;\r\n    { // write first half of cylinder\r\n      let temp = position.array.slice(0, this._cutRawEnd * position.itemSize);\r\n      this.positions.set(temp, 0);\r\n      temp = normal.array.slice(0, this._cutRawEnd * normal.itemSize);\r\n      this.normals.set(temp, 0);\r\n    }\r\n    { // write second part of cylinder\r\n      let temp = position.array.slice(this._cutRawStart * position.itemSize, position.array.length);\r\n      this.positions.set(temp, this._cutRawEnd * position.itemSize);\r\n      temp = normal.array.slice(this._cutRawStart * normal.itemSize, normal.array.length);\r\n      this.normals.set(temp, this._cutRawEnd * normal.itemSize);\r\n    }\r\n  }\r\n\r\n  /** Shift values of second part (+caps) indices by newly added vertices count. Number of faces remains the same. */\r\n  _extendIndices(geo, info) {\r\n    const { index } = geo;\r\n    const indicesPerQuad = 6; // quad = 2 triangles => 6 indices\r\n    const startToShift = info.addPerCylinder * indicesPerQuad;\r\n    const shift = info.addPerCylinder;\r\n    let shifted = index.array.slice(startToShift, index.count);\r\n    shifted = shifted.map((x) => x + shift); // shift only the endings\r\n    this.indices.set(index.array, 0);\r\n    this.indices.set(shifted, startToShift);\r\n  }\r\n\r\n  /**\r\n   * Set defined colors: (first part + bottom cap), (second part + top cap)\r\n   * @param {number} start - start color index\r\n   * @param {number} end - start color index\r\n   * @param {array} array - array of colors\r\n   * @param {array} color - color value components\r\n   */\r\n  _setColorRange(start, end, array, color) {\r\n    const colorSize = color.length;\r\n    for (let i = start; i < end; i += colorSize) {\r\n      array.set(color, i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set defined colors: (first part + bottom cap), (second part + top cap)\r\n   * @param {Object} color1 - THREE.Color.\r\n   * @param {Object} color2 - THREE.Color.\r\n   */\r\n  setColors(color1, color2) {\r\n    const colorSize = this.itemSize.color;\r\n    const part1End = this._cutRawEnd * colorSize;\r\n    const part2End = part1End * 2;\r\n    this._setColorRange(0, part1End, this.colors, color1.toArray());\r\n    this._setColorRange(part1End, part2End, this.colors, color2.toArray());\r\n    if (part2End < this.colors.length) { // cylinder has caps, lets paint them\r\n      const capSize = (this._facesPerSlice + 1) * colorSize;\r\n      const cap1End = part2End + capSize;\r\n      this._setColorRange(part2End, cap1End, this.colors, color2.toArray());\r\n      const cap2End = cap1End + capSize; // should be equal to this.colors.length;\r\n      this._setColorRange(cap1End, cap2End, this.colors, color1.toArray());\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\n\r\nimport utils from '../../../utils';\r\nimport gfxutils from '../../../gfx/gfxutils';\r\nimport logger from '../../../utils/logger';\r\n\r\nimport FBXModel from './FBXModel';\r\nimport ThickLineMesh from '../../../gfx/meshes/ThickLineMesh';\r\nimport ZSpriteMesh from '../../../gfx/meshes/ZSpriteMesh';\r\nimport InstancedSpheresGeometry from '../../../gfx/geometries/InstancedSpheresGeometry';\r\nimport Instanced2CCylindersGeometry from '../../../gfx/geometries/Instanced2CCylindersGeometry';\r\nimport FBX1CGeometry from './FBX1CGeometry';\r\nimport FBX2CCylinder from './FBX2CCylinder';\r\n\r\nexport default class FBXInfoExtractor {\r\n  constructor() {\r\n    this._materials = [];\r\n    this._models = [];\r\n  }\r\n\r\n  process(data) {\r\n    this._extractModelsAndMaterials(data);\r\n\r\n\r\n    const models = this._flattenModels();\r\n\r\n    return {\r\n      name: data.name,\r\n      models,\r\n      materials: this._materials,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Extract fbx object information from ComplexVisual\r\n   * @param {object} data - complexVisual to get geometry info from\r\n   */\r\n  _extractModelsAndMaterials(data) {\r\n    const layersOfInterest = new THREE.Layers();\r\n    layersOfInterest.set(gfxutils.LAYERS.DEFAULT);\r\n    layersOfInterest.enable(gfxutils.LAYERS.TRANSPARENT);\r\n    data.traverse((object) => {\r\n      if (object instanceof THREE.Mesh && object.layers.test(layersOfInterest) && this.checkExportAbility(object)) {\r\n        if (object.geometry.type === 'InstancedBufferGeometry') {\r\n          this._collectInstancedGeoInfo(object);\r\n        } else {\r\n          this._collectGeoInfo(object);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reworking indices buffer, see https://banexdevblog.wordpress.com/2014/06/23/a-quick-tutorial-about-the-fbx-ascii-format/\r\n   * basically, every triangle in Miew has been represented hat way (e.g.) : 0,1,7, but we must (for FBX) rework that\r\n   * into: 0,1,-8.\r\n   * @param {array} indices - belongs to [0, maxVertIndex]\r\n   */\r\n  _reworkIndices(indices) {\r\n    const faceSize = 3;\r\n    for (let i = faceSize - 1; i < indices.length; i += faceSize) {\r\n      indices[i] *= -1;\r\n      indices[i]--;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Combine geometry from several models having the same material into one Model and finally prepare indices\r\n    * @returns {array} models, combined by material id\r\n   */\r\n  _flattenModels() {\r\n    let overallVertsCount = 0;\r\n    function shift(x) {\r\n      return x + overallVertsCount;\r\n    }\r\n    const combined = [];\r\n    // flatten models geometry\r\n    for (let i = 0, n = this._models.length; i < n; i++) {\r\n      const models = this._models[i];\r\n      let indices = [];\r\n      let positions = [];\r\n      let normals = [];\r\n      let colors = [];\r\n      // reorganize every attributes as array of arrays\r\n      overallVertsCount = 0;\r\n      for (let j = 0; j < models.length; j++) {\r\n        const m = models[j];\r\n        indices.push(m.indices.map(shift));\r\n        overallVertsCount += m.getVerticesNumber();\r\n        positions.push(m.positions);\r\n        normals.push(m.normals);\r\n        colors.push(m.colors);\r\n      }\r\n      // join all subarrays into one\r\n      indices = utils.mergeTypedArraysUnsafe(indices);\r\n      this._reworkIndices(indices);\r\n      positions = utils.mergeTypedArraysUnsafe(positions);\r\n      normals = utils.mergeTypedArraysUnsafe(normals);\r\n      colors = utils.mergeTypedArraysUnsafe(colors);\r\n      combined.push({\r\n        indices,\r\n        positions,\r\n        normals,\r\n        colors,\r\n        verticesCount: overallVertsCount,\r\n      });\r\n    }\r\n    return combined;\r\n  }\r\n\r\n  /**\r\n   * Check ability to export the kind of mesh.\r\n   * @param {object} mesh - given mesh to check\r\n   * @returns {boolean} result of check\r\n   */\r\n  checkExportAbility(mesh) {\r\n    // check mesh on not being empty\r\n    if (mesh.geometry.attributes.position.count === 0) {\r\n      return false;\r\n    }\r\n    // check type of mesh\r\n    // if (mesh.geometry.isInstancedBufferGeometry && settings.now.zSprites) {\r\n    if (mesh instanceof ZSpriteMesh) {\r\n      logger.warn('Currently we cannot export \\'sprites\\' modes, like BS, WV, LC. Please turn of settings \\'zSprites\\' and try again');\r\n      return false;\r\n    }\r\n    if (mesh instanceof ThickLineMesh) {\r\n      logger.warn('Currently we cannot export Lines mode');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Save geometry info from common mesh, like Surface or Cartoon\r\n   */\r\n  _collectGeoInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n          normal,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const vertCount = position.count;\r\n    model.init(vertCount, index.count);\r\n    if (matrix.isIdentity()) {\r\n      model.setPositions(position.array, 0, vertCount, position.itemSize);\r\n      model.setNormals(normal.array, 0, vertCount, normal.itemSize);\r\n    } else {\r\n      model.setTransformedPositions(position.array, 0, vertCount, position.itemSize, matrix);\r\n      model.setTransformedNormals(normal.array, 0, vertCount, normal.itemSize, matrix);\r\n    }\r\n    model.setColors(color.array, 0, vertCount, color.itemSize);\r\n    model.setIndices(index.array, 0, index.count);\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Collect instanced spheres geometry and materials.\r\n   * @param {object} mesh - mesh with instanced spheres info\r\n   */\r\n  _collectSpheresInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const instCount = mesh.geometry.maxInstancedCount;\r\n    const vertCount = position.count;\r\n    const indsCount = index.count;\r\n    model.init(instCount * vertCount, instCount * indsCount);\r\n    const geo = new FBX1CGeometry();\r\n    geo.init(mesh.geometry);\r\n    const instMatrix = new THREE.Matrix4();\r\n    const objMatrix = new THREE.Matrix4();\r\n    const sphereColor = new THREE.Color();\r\n    for (let instanceIndex = 0; instanceIndex < instCount; ++instanceIndex) {\r\n      // update colors in geometry\r\n      const colorIdx = instanceIndex * color.itemSize;\r\n      sphereColor.fromArray(color.array, colorIdx);\r\n      geo.setColors(sphereColor);\r\n      // add instance to the model\r\n      this._getSphereInstanceMatrix(mesh.geometry, instanceIndex, instMatrix);\r\n      objMatrix.multiplyMatrices(matrix, instMatrix);\r\n      model.addInstance(objMatrix, geo);\r\n    }\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Getting all instanced cylinders from given mesh.\r\n   * Divide cylinder (add additional vertexes) for prettiness therefore algorithm is a bit complicated\r\n   * @param {object} mesh - given mesh with instanced cylinders\r\n   */\r\n  _collectCylindersInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n          color2,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const instCount = mesh.geometry.maxInstancedCount;\r\n    const oneCCylinder = new FBX1CGeometry();\r\n    oneCCylinder.init(mesh.geometry);\r\n    const splittingInfo = this._gatherCylindersColoringInfo(mesh.geometry);\r\n    let twoCCylinder = null;\r\n    if (splittingInfo.needToSplit > 0) {\r\n      twoCCylinder = new FBX2CCylinder();\r\n      twoCCylinder.init(mesh.geometry, splittingInfo);\r\n    }\r\n    const additionalVertsCount = splittingInfo.addPerCylinder * splittingInfo.needToSplit;\r\n    const vertCount = position.count;\r\n    const indsCount = index.count;\r\n    model.init(instCount * vertCount + additionalVertsCount, instCount * indsCount);\r\n    const instMatrix = new THREE.Matrix4();\r\n    const objMatrix = new THREE.Matrix4();\r\n    const colorStart = new THREE.Color();\r\n    const colorEnd = new THREE.Color();\r\n    let geo = {};\r\n    for (let instanceIndex = 0; instanceIndex < instCount; ++instanceIndex) {\r\n      // update colors in geometry\r\n      const colorIdx = instanceIndex * color.itemSize;\r\n      if (splittingInfo.is2Colored[instanceIndex]) {\r\n        // .color2 contains starting color, and .color contains starting color (see uber.frag ATTR_COLOR2)\r\n        colorStart.fromArray(color2.array, colorIdx);\r\n        colorEnd.fromArray(color.array, colorIdx);\r\n        if (twoCCylinder) {\r\n          twoCCylinder.setColors(colorStart, colorEnd);\r\n          geo = twoCCylinder;\r\n        }\r\n      } else {\r\n        // has one color per cylinder\r\n        colorStart.fromArray(color.array, colorIdx);\r\n        oneCCylinder.setColors(colorStart);\r\n        geo = oneCCylinder;\r\n      }\r\n      // add instance to the model\r\n      this._getCylinderInstanceMatrix(mesh.geometry, instanceIndex, instMatrix);\r\n      objMatrix.multiplyMatrices(matrix, instMatrix);\r\n      model.addInstance(objMatrix, geo);\r\n    }\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Adding model to pool of models or extend existing ones\r\n   * @param {object} model - model to add\r\n   * @param {object} material - material to add\r\n   */\r\n  _addToPool(model, material) {\r\n    const materialIdx = this._checkExistingMaterial(material);\r\n    if (materialIdx < 0) { // new model-material pair\r\n      this._models.push([model]);\r\n      this._materials.push(material);\r\n    } else { // add model to existing model-material pair\r\n      const models = this._models[materialIdx];\r\n      models.push(model);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checking if given material already was registered in materials pool (no need to create new one)\r\n   * @param {object} material - given material\r\n   * @returns {number} number of model-material pair\r\n   */\r\n  _checkExistingMaterial(material) {\r\n    return _.findIndex(this._materials, (m) => _.isEqual(m, material));\r\n  }\r\n\r\n  _gatherCylindersColoringInfo(geo) {\r\n    const instCount = geo.maxInstancedCount;\r\n    const color1 = geo.attributes.color.array;\r\n    const color2 = geo.attributes.color2.array;\r\n    const stride = geo.attributes.color.itemSize;\r\n    const is2Colored = new Array(instCount);\r\n    // analyze color instance attributes\r\n    let needToSplit = 0;\r\n    let colIdx = 0;\r\n    for (let i = 0; i < instCount; i++, colIdx += stride) {\r\n      const differs = (Math.abs(color1[colIdx] - color2[colIdx]) > 0.0000001) // compare ending colors\r\n        || (Math.abs(color1[colIdx + 1] - color2[colIdx + 1]) > 0.0000001)\r\n        || (Math.abs(color1[colIdx + 2] - color2[colIdx + 2]) > 0.0000001);\r\n      is2Colored[i] = differs;\r\n      needToSplit += differs; // count number of 2-colored cylinders\r\n    }\r\n    // calc number of vertices to add into 2-colored\r\n    const geoParams = geo.getGeoParams();\r\n    const addPerCylinder = geoParams.radialSegments;\r\n    return { is2Colored, needToSplit, addPerCylinder };\r\n  }\r\n\r\n  /**\r\n   * Collect instanced models and materials.\r\n   * @param {object} mesh - given mesh with instanced something (spheres or cylinders)\r\n   */\r\n  _collectInstancedGeoInfo(mesh) {\r\n    if (mesh.geometry instanceof InstancedSpheresGeometry) {\r\n      this._collectSpheresInfo(mesh);\r\n    } else if (mesh.geometry instanceof Instanced2CCylindersGeometry) {\r\n      this._collectCylindersInfo(mesh);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Collect Material info from given mesh.\r\n   * @param {object} mesh - given mesh with material info\r\n   * @returns {object} material\r\n   */\r\n  _collectMaterialInfo(mesh) {\r\n    const { uberOptions } = mesh.material;\r\n    return ({\r\n      diffuse: uberOptions.diffuse.toArray(),\r\n      opacity: uberOptions.opacity,\r\n      shininess: uberOptions.shininess,\r\n      specular: uberOptions.specular.toArray(),\r\n    });\r\n  }\r\n\r\n  _getCylinderInstanceMatrix(geo, instIdx, matrix) {\r\n    const matVector1 = geo.attributes.matVector1.array;\r\n    const matVector2 = geo.attributes.matVector2.array;\r\n    const matVector3 = geo.attributes.matVector3.array;\r\n    const idxOffset = instIdx * 4; // used 4 because offset arrays are stored in quads\r\n    matrix.set(matVector1[idxOffset], matVector1[idxOffset + 1], matVector1[idxOffset + 2], matVector1[idxOffset + 3],\r\n      matVector2[idxOffset], matVector2[idxOffset + 1], matVector2[idxOffset + 2], matVector2[idxOffset + 3],\r\n      matVector3[idxOffset], matVector3[idxOffset + 1], matVector3[idxOffset + 2], matVector3[idxOffset + 3],\r\n      0, 0, 0, 1);\r\n  }\r\n\r\n  _getSphereInstanceMatrix(geo, instIdx, matrix) {\r\n    const { offset } = geo.attributes;\r\n    const idx = instIdx * offset.itemSize;\r\n    const x = offset.array[idx];\r\n    const y = offset.array[idx + 1];\r\n    const z = offset.array[idx + 2];\r\n    const scale = offset.array[idx + 3];\r\n    matrix.set(\r\n      scale, 0, 0, x,\r\n      0, scale, 0, y,\r\n      0, 0, scale, z,\r\n      0, 0, 0, 1,\r\n    );\r\n  }\r\n}\r\n","// Forming default definitions block\r\nconst defaultDefinitions = `\r\nDefinitions:  {\r\n  Version: 100\r\n  Count: 3\r\n  ObjectType: \"Model\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Geometry\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Material\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Pose\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"GlobalSettings\" {\r\n    Count: 1\r\n  }\r\n} `;\r\n\r\n// Default model properties\r\nconst defaultProperties = `Properties60: {\r\n      Property: \"QuaternionInterpolate\", \"bool\", \"\",0\r\n      Property: \"Visibility\", \"Visibility\", \"A\",1\r\n      Property: \"Lcl Translation\", \"Lcl Translation\", \"A\",0.000000000000000,0.000000000000000,-1789.238037109375000\r\n      Property: \"Lcl Rotation\", \"Lcl Rotation\", \"A\",0.000009334667643,-0.000000000000000,0.000000000000000\r\n      Property: \"Lcl Scaling\", \"Lcl Scaling\", \"A\",1.000000000000000,1.000000000000000,1.000000000000000\r\n      Property: \"RotationOffset\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationPivot\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"ScalingOffset\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"ScalingPivot\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationActive\", \"bool\", \"\",0\r\n      Property: \"TranslationMin\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationMax\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationMinX\", \"bool\", \"\",0\r\n      Property: \"TranslationMinY\", \"bool\", \"\",0\r\n      Property: \"TranslationMinZ\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxX\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxY\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxZ\", \"bool\", \"\",0\r\n      Property: \"RotationOrder\", \"enum\", \"\",0\r\n      Property: \"RotationSpaceForLimitOnly\", \"bool\", \"\",0\r\n      Property: \"AxisLen\", \"double\", \"\",10\r\n      Property: \"PreRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"PostRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationActive\", \"bool\", \"\",0\r\n      Property: \"RotationMin\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationMax\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationMinX\", \"bool\", \"\",0\r\n      Property: \"RotationMinY\", \"bool\", \"\",0\r\n      Property: \"RotationMinZ\", \"bool\", \"\",0\r\n      Property: \"RotationMaxX\", \"bool\", \"\",0\r\n      Property: \"RotationMaxY\", \"bool\", \"\",0\r\n      Property: \"RotationMaxZ\", \"bool\", \"\",0\r\n      Property: \"RotationStiffnessX\", \"double\", \"\",0\r\n      Property: \"RotationStiffnessY\", \"double\", \"\",0\r\n      Property: \"RotationStiffnessZ\", \"double\", \"\",0\r\n      Property: \"MinDampRangeX\", \"double\", \"\",0\r\n      Property: \"MinDampRangeY\", \"double\", \"\",0\r\n      Property: \"MinDampRangeZ\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeX\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeY\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeZ\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthX\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthY\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthZ\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthX\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthY\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthZ\", \"double\", \"\",0\r\n      Property: \"PreferedAngleX\", \"double\", \"\",0\r\n      Property: \"PreferedAngleY\", \"double\", \"\",0\r\n      Property: \"PreferedAngleZ\", \"double\", \"\",0\r\n      Property: \"InheritType\", \"enum\", \"\",0\r\n      Property: \"ScalingActive\", \"bool\", \"\",0\r\n      Property: \"ScalingMin\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"ScalingMax\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"ScalingMinX\", \"bool\", \"\",0\r\n      Property: \"ScalingMinY\", \"bool\", \"\",0\r\n      Property: \"ScalingMinZ\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxX\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxY\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxZ\", \"bool\", \"\",0\r\n      Property: \"GeometricTranslation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"GeometricRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"GeometricScaling\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"LookAtProperty\", \"object\", \"\"\r\n      Property: \"UpVectorProperty\", \"object\", \"\"\r\n      Property: \"Show\", \"bool\", \"\",1\r\n      Property: \"NegativePercentShapeSupport\", \"bool\", \"\",1\r\n      Property: \"DefaultAttributeIndex\", \"int\", \"\",0\r\n      Property: \"Color\", \"Color\", \"A+\",0,0,0\r\n      Property: \"Size\", \"double\", \"\",100\r\n      Property: \"Look\", \"enum\", \"\",1\r\n    }`;\r\n\r\n// Default materials layer\r\nconst defaultMaterialLayer = `\r\n    LayerElementMaterial: 0 {\r\n      Version: 101\r\n      Name: \"\"\r\n      MappingInformationType: \"AllSame\"\r\n      ReferenceInformationType: \"Direct\"\r\n      Materials: 0\r\n    }`;\r\n\r\n// Default layers block\r\nconst defaultLayerBlock = `\r\n    Layer: 0 {\r\n      Version: 100\r\n      LayerElement:  {\r\n        Type: \"LayerElementNormal\"\r\n        TypedIndex: 0\r\n      }\r\n      LayerElement:  {\r\n        Type: \"LayerElementColor\"\r\n        TypedIndex: 0\r\n      }\r\n      LayerElement:  {\r\n        Type: \"LayerElementMaterial\"\r\n        TypedIndex: 0\r\n      }\r\n    }`;\r\n\r\n/**\r\n * globalSettings info in output file.\r\n */\r\nconst globalSettings = `GlobalSettings: {\r\n    Version: 1000\r\n    Properties60:  {\r\n      Property: \"UpAxis\", \"int\", \"\",1\r\n      Property: \"UpAxisSign\", \"int\", \"\",1\r\n      Property: \"FrontAxis\", \"int\", \"\",2\r\n      Property: \"FrontAxisSign\", \"int\", \"\",1\r\n      Property: \"CoordAxis\", \"int\", \"\",0\r\n      Property: \"CoordAxisSign\", \"int\", \"\",1\r\n      Property: \"UnitScaleFactor\", \"double\", \"\",1\r\n    }\r\n  }`;\r\n\r\nexport default class FBXResult {\r\n  constructor() {\r\n    this._resultArray = [];\r\n    this._info = null;\r\n  }\r\n\r\n  getResult(info) {\r\n    this._info = info;\r\n    this._resultArray.push(this._writeHeader());\r\n    this._resultArray.push(this._writeDefinitions());\r\n    this._resultArray.push(this._writeObjects(info.models, info.materials));\r\n    this._resultArray.push(this._writeRelations());\r\n    this._resultArray.push(this._writeConnections()); // connections between models and materials)\r\n    this._info = null;\r\n    return this._resultArray.join('');\r\n  }\r\n\r\n  /**\r\n   * Add FBXHeader info to output file.\r\n   * Some fields are really confusing, but it seems that all listed fields are very informative\r\n   */\r\n  _writeHeader() {\r\n    const FBXHeaderVersion = 1003; // 1003 is some number which appears to present in many 6.1 ASCII files\r\n    const FBXVersion = 6100; // Mandatory and only supported version\r\n    const date = new Date();\r\n    const timeStampVersion = 1000;\r\n    const creator = `Miew FBX Exporter v${this._info.version}`; // Supposed to be an engine\r\n\r\n    return `; FBX 6.1.0 project file\r\n; Created by ${creator} Copyright (c) 2015-2020 EPAM Systems, Inc.\r\n; For support please contact miew@epam.com\r\n; ----------------------------------------------------\r\n\r\nFBXHeaderExtension:  {\r\n  FBXHeaderVersion: ${FBXHeaderVersion}\r\n  FBXVersion: ${FBXVersion}\r\n  CreationTimeStamp:  {\r\n    Version: ${timeStampVersion}\r\n    Year: ${date.getFullYear()}\r\n    Month: ${date.getMonth() + 1} \r\n    Day: ${date.getDate()}\r\n    Hour: ${date.getHours()}\r\n    Minute: ${date.getMinutes()}\r\n    Second: ${date.getSeconds()}\r\n    Millisecond: ${date.getMilliseconds()}\r\n  }\r\n  Creator: \"${creator}\"\r\n  OtherFlags:  {\r\n    FlagPLE: 0\r\n  }\r\n}\r\nCreationTime: \"${date}\"\r\nCreator: \"${creator}\"  \r\n`;\r\n  }\r\n\r\n  /**\r\n   * Add Definitions info to output file.\r\n   * Not exactly sure if this section is template section (as it is in 7.4+) or it should every time be like this\r\n   */\r\n  _writeDefinitions() {\r\n    return `\r\n; Object definitions\r\n;------------------------------------------------------------------\r\n\r\n${defaultDefinitions}\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Adding gathered information about Models to resulting string.\r\n   * Reminder - there may be more then 1 model in scene, but we must place materials after ALL models.\r\n   * @returns {string} string containing all models (vertices, indices, colors, normals etc)\r\n   */\r\n  _models() {\r\n    const modelVersion = 232;\r\n    let allModels = '';\r\n    const { models } = this._info;\r\n    for (let i = 0; i < models.length; ++i) {\r\n      const model = models[i];\r\n      const vertCount = model.verticesCount;\r\n      allModels += `\r\n  Model: \"Model::${this._info.name}_${i}\", \"Mesh\" {\r\n    Version: ${modelVersion} \r\n    ${defaultProperties}\r\n    ${this._verticesIndices(model.positions, model.indices)}\r\n    ${this._normalLayer(model.normals)} \r\n    ${this._colorLayer(model.colors, vertCount)} \r\n    ${defaultMaterialLayer}  \r\n    ${defaultLayerBlock}\r\n  }`;\r\n    }\r\n    return allModels;\r\n  }\r\n\r\n  /**\r\n   * Add Material info to result\r\n   */\r\n  _materials() {\r\n    const materialVersion = 102;\r\n    let allMaterials = '';\r\n    const { materials } = this._info;\r\n    for (let i = 0; i < materials.length; ++i) {\r\n      const material = materials[i];\r\n      allMaterials += `\r\n  Material: \"Material::${this._info.name}_${i}_default\", \"\" {\r\n    Version: ${materialVersion}\r\n    ShadingModel: \"lambert\"\r\n    MultiLayer: 0\r\n    ${this._materialProperties(material)}\r\n  }`;\r\n    }\r\n    return allMaterials;\r\n  }\r\n\r\n  /**\r\n   * Add Objects info to output file.\r\n   */\r\n  _writeObjects() {\r\n    return `\r\n; Object properties\r\n;------------------------------------------------------------------\r\n\r\nObjects:  {\r\n  ${this._models()}\r\n  ${this._materials()}\r\n  ${globalSettings}\r\n}\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Add Relations info to output file.\r\n   */\r\n  _writeRelations() {\r\n    let modelsList = '';\r\n    for (let i = 0; i < this._info.models.length; ++i) {\r\n      modelsList += `\r\n  Model: \"Model::${this._info.name}_${i}\", \"Mesh\" {\r\n  }`;\r\n    }\r\n    let materialList = '';\r\n    for (let i = 0; i < this._info.materials.length; ++i) {\r\n      materialList += `\r\n  Material: \"Material::${this._info.name}_${i}_default\", \"\" {\r\n  }`;\r\n    }\r\n\r\n    return `\r\n; Object relations\r\n;------------------------------------------------------------------\r\n\r\nRelations:  {\r\n  ${modelsList}\r\n  Model: \"Model::Producer Perspective\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Top\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Bottom\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Front\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Back\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Right\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Left\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Camera Switcher\", \"CameraSwitcher\" {\r\n  }\r\n  ${materialList}\r\n}`;\r\n  }\r\n\r\n  /**\r\n   * Add Connections info to output file.\r\n   */\r\n  _writeConnections() {\r\n    let modelsList = '';\r\n    const { name } = this._info;\r\n    for (let i = 0; i < this._info.models.length; ++i) {\r\n      modelsList += `\r\n  Connect: \"OO\", \"Model::${name}_${i}\", \"Model::Scene\"`;\r\n    }\r\n\r\n    let materialList = '';\r\n    for (let i = 0; i < this._info.materials.length; ++i) {\r\n      materialList += `\r\n  Connect: \"OO\", \"Material::${name}_${i}_default\", \"Model::${name}_${i}\"`;\r\n    }\r\n\r\n    return `\r\n; Object connections\r\n;------------------------------------------------------------------\r\n\r\nConnections:  {\r\n  ${modelsList}\r\n  ${materialList}\r\n}`;\r\n  }\r\n\r\n  /**\r\n   * Write float array to string with limited precision\r\n   * @param {Float32Array} array - array to be fixed\r\n   * @returns {String} String with fixed floats\r\n   */\r\n  _floatArrayToString(array) {\r\n    const str = [];\r\n    for (let i = 0; i < array.length; ++i) {\r\n      str[i] = array[i].toFixed(6);\r\n    }\r\n    return str.join(',');\r\n  }\r\n\r\n  /**\r\n   * Adding color layer to resulting file\r\n   * @param {Float32Array} colorArray attribute\r\n   * @param {number} vertCount - number of vertices in the model\r\n   * @returns {string} color layer info\r\n   */\r\n  _colorLayer(colorArray, vertCount) {\r\n    const layerElementColorNumber = 0;\r\n    const layerElementColorVersion = 101;\r\n    const layerElementColorName = '';\r\n    const colorsStr = this._floatArrayToString(colorArray);\r\n    // Mapping Information type and Reference Information type are mandatory for our Miew! Must not be changed\r\n    // As said [..Array(...)] - fastest and easiest way to produce [0, 1, .....] array\r\n    const colorIndices = [...Array(vertCount).keys()];\r\n    return `\r\n    LayerElementColor: ${layerElementColorNumber} {\r\n      Version: ${layerElementColorVersion}\r\n      Name: \"${layerElementColorName}\"\r\n      MappingInformationType: \"ByVertice\"\r\n      ReferenceInformationType: \"Direct\"\r\n      Colors: ${colorsStr}\r\n      ColorIndex: ${colorIndices}\r\n    }`;\r\n  }\r\n\r\n  /**\r\n   * Adding normal layer to resulting file\r\n   * @param {Float32Array} normalArray attribute\r\n   * @returns {string} normal layer info\r\n   */\r\n  _normalLayer(normalArray) {\r\n    const layerElementNormalNumber = 0;\r\n    const layerElementNormalVersion = 101;\r\n    const layerElementNormalName = '';\r\n    const normalsStr = this._floatArrayToString(normalArray);\r\n    // Mapping Information type and Reference Information type are mandatory for our Miew! Must not be changed\r\n    return `\r\n    LayerElementNormal: ${layerElementNormalNumber} {\r\n      Version: ${layerElementNormalVersion}\r\n      Name: \"${layerElementNormalName}\"\r\n      MappingInformationType: \"ByVertice\"\r\n      ReferenceInformationType: \"Direct\" \r\n      Normals: ${normalsStr}\r\n    }`;\r\n  }\r\n\r\n  /**\r\n   * Adding vertices and indices to resulting string\r\n   * @return {string} resulting string in FBX notation\r\n   */\r\n  _verticesIndices(positions, indices) {\r\n    const multiLayer = 0;\r\n    const multiTake = 1;\r\n    const shading = 'Y';\r\n    const culling = 'CullingOff';\r\n    const geometryVersion = 124;\r\n    const vertStr = this._floatArrayToString(positions);\r\n    /* About _correctArrayNotation: Float32Arrays will contains only Float32 numbers, which implies that it will be floating points with 17 numbers after point.\r\n    * We cannot (and it's logically incorrect) save all this information, so we convert this Float32Array into Array-like object with numbers with only 6 numbers after point\r\n    * Reminder - this is big memory loss (as we must save at one moment two arrays with similar information) */\r\n    return `MultiLayer: ${multiLayer}\r\n    MultiTake: ${multiTake}\r\n    Shading: ${shading}\r\n    Culling: \"${culling}\"\r\n    Vertices: ${vertStr}\r\n    PolygonVertexIndex: ${indices}\r\n    GeometryVersion: ${geometryVersion}`;\r\n  }\r\n\r\n  /**\r\n   * Forming material properties block.\r\n   * @param {Object} material - given material of model\r\n   * @returns {String} material properties string\r\n   */\r\n  _materialProperties(material) {\r\n    return `Properties60:  {\r\n      Property: \"ShadingModel\", \"KString\", \"\", \"Lambert\"\r\n      Property: \"MultiLayer\", \"bool\", \"\",0\r\n      Property: \"EmissiveColor\", \"ColorRGB\", \"\",0,0,0\r\n      Property: \"EmissiveFactor\", \"double\", \"\",0.0000\r\n      Property: \"AmbientColor\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"AmbientFactor\", \"double\", \"\",0.0000\r\n      Property: \"DiffuseColor\", \"ColorRGB\", \"\",${material.diffuse}\r\n      Property: \"DiffuseFactor\", \"double\", \"\",1.0000\r\n      Property: \"Bump\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TransparentColor\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"TransparencyFactor\", \"double\", \"\",0.0000\r\n      Property: \"SpecularColor\", \"ColorRGB\", \"\",${material.specular}\r\n      Property: \"SpecularFactor\", \"double\", \"\",1.0000\r\n      Property: \"ShininessExponent\", \"double\", \"\",${material.shininess}\r\n      Property: \"ReflectionColor\", \"ColorRGB\", \"\",0,0,0\r\n      Property: \"ReflectionFactor\", \"double\", \"\",1\r\n      Property: \"Ambient\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"Diffuse\", \"ColorRGB\", \"\",${material.diffuse}\r\n      Property: \"Specular\", \"ColorRGB\", \"\",${material.specular}\r\n      Property: \"Shininess\", \"double\", \"\",${material.shininess}\r\n      Property: \"Opacity\", \"double\", \"\",${material.opacity}\r\n      Property: \"Reflectivity\", \"double\", \"\",0\r\n    }`;\r\n  }\r\n}\r\n","import Exporter from './Exporter';\r\nimport FBXInfoExtractor from './fbx/FBXInfoExtractor';\r\nimport FBXResult from './fbx/FBXResult';\r\nimport ComplexVisual from '../../ComplexVisual';\r\n\r\nexport default class FBXExporter extends Exporter {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n    // Data\r\n    this._data = source;\r\n    this._version = options.miewVersion || '0.0-UNSPECIFIED';\r\n    this._extractor = new FBXInfoExtractor();\r\n  }\r\n\r\n  /**\r\n   * Entry point to exporter.\r\n   */\r\n  exportSync() {\r\n    // Creating mandatory blocks\r\n    const result = new FBXResult();\r\n    if (!this._source) {\r\n      return this._result;\r\n    }\r\n\r\n    const info = this._extractor.process(this._data);\r\n    info.version = this._version;\r\n    this._result = result.getResult(info);\r\n    return this._result;\r\n  }\r\n}\r\n\r\nFBXExporter.formats = ['fbx'];\r\nFBXExporter.SourceClass = ComplexVisual;\r\n","import ExporterList from './exporters/ExporterList';\r\n\r\nimport PDBExporter from './exporters/PDBExporter';\r\nimport FBXExporter from './exporters/FBXExporter';\r\n\r\nexport default new ExporterList([\r\n  PDBExporter,\r\n  FBXExporter,\r\n]);\r\n","import loaders from './loaders';\r\nimport parsers from './parsers';\r\nimport exporters from './exporters';\r\n\r\nexport default {\r\n  loaders,\r\n  parsers,\r\n  exporters,\r\n};\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\nimport CSS2DObject from './CSS2DObject';\r\n\r\nconst tempColor = new THREE.Color();\r\n\r\nclass CSS2DRenderer {\r\n  constructor() {\r\n    this._width = 0;\r\n    this._height = 0;\r\n    this._widthHalf = 0;\r\n    this._heightHalf = 0;\r\n\r\n    this._vector = new THREE.Vector3();\r\n    this._viewMatrix = new THREE.Matrix4();\r\n    this._projectionMatrix = new THREE.Matrix4();\r\n\r\n    this._domElement = document.createElement('div');\r\n    this._domElement.style.overflow = 'hidden';\r\n    this._domElement.style.position = 'absolute';\r\n    this._domElement.style.top = '0';\r\n    this._domElement.style.zIndex = '0'; // start a new Stacking Context to enclose all z-ordered children\r\n    this._domElement.style.pointerEvents = 'none';\r\n  }\r\n\r\n  getElement() {\r\n    return this._domElement;\r\n  }\r\n\r\n  reset() {\r\n    const myNode = this.getElement();\r\n    while (myNode.firstChild) {\r\n      myNode.removeChild(myNode.firstChild);\r\n    }\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this._width = width;\r\n    this._height = height;\r\n\r\n    this._widthHalf = this._width / 2;\r\n    this._heightHalf = this._height / 2;\r\n\r\n    this._domElement.style.width = `${width}px`;\r\n    this._domElement.style.height = `${height}px`;\r\n  }\r\n\r\n  _renderObject(object, camera, scene) {\r\n    function lerpColorAsHex(a, b, t) {\r\n      tempColor.setHex(a);\r\n      tempColor.lerp(b, t);\r\n      return `#${tempColor.getHexString()}`;\r\n    }\r\n\r\n    function colorAsHex(a) {\r\n      tempColor.setHex(a);\r\n      return `#${tempColor.getHexString()}`;\r\n    }\r\n\r\n    if (object instanceof CSS2DObject) {\r\n      this._vector.setFromMatrixPosition(object.matrixWorld);\r\n\r\n      if (object.userData !== undefined && object.userData.offset !== undefined) {\r\n        const localOffset = new THREE.Vector3(object.userData.offset.x, object.userData.offset.y, 0);\r\n        this._vector.add(localOffset.multiplyScalar(object.matrixWorld.getMaxScaleOnAxis()));\r\n      }\r\n\r\n      this._vector.applyMatrix4(this._viewMatrix);\r\n\r\n      const visibility = this._vector.z > -camera.near ? 'hidden' : 'visible';\r\n      const zIndex = 10000 * (camera.far - (-this._vector.z)) / (camera.far - camera.near);\r\n\r\n      const element = object.getElement();\r\n      if (typeof scene.fog === 'undefined') {\r\n        element.style.color = colorAsHex(object.userData.color);\r\n        if (object.userData.background !== 'transparent') {\r\n          element.style.background = colorAsHex(object.userData.background);\r\n        }\r\n      } else {\r\n        const fogFactor = THREE.Math.smoothstep(-this._vector.z, scene.fog.near, scene.fog.far);\r\n        element.style.color = lerpColorAsHex(object.userData.color, scene.fog.color, fogFactor);\r\n        if (object.userData.background !== 'transparent') {\r\n          element.style.background = lerpColorAsHex(object.userData.background, scene.fog.color, fogFactor);\r\n        }\r\n      }\r\n\r\n      this._vector.applyMatrix4(this._projectionMatrix);\r\n\r\n      const style = `${object.userData !== {} ? object.userData.translation : 'translate(-50%, -50%) '\r\n      }translate(${this._vector.x * this._widthHalf + this._widthHalf}px,${\r\n        -this._vector.y * this._heightHalf + this._heightHalf}px)`;\r\n      element.style.visibility = visibility;\r\n      element.style.WebkitTransform = style;\r\n      element.style.MozTransform = style;\r\n      element.style.oTransform = style;\r\n      element.style.transform = style;\r\n      element.style.zIndex = Number(zIndex).toFixed(0);\r\n\r\n      if (element.parentNode !== this._domElement) {\r\n        this._domElement.appendChild(element);\r\n      }\r\n    }\r\n\r\n    for (let i = 0, l = object.children.length; i < l; i++) {\r\n      this._renderObject(object.children[i], camera, scene);\r\n    }\r\n  }\r\n\r\n  render(scene, camera) {\r\n    scene.updateMatrixWorld();\r\n\r\n    if (camera.parent === null) {\r\n      camera.updateMatrixWorld();\r\n    }\r\n\r\n    camera.matrixWorldInverse.getInverse(camera.matrixWorld);\r\n\r\n    this._viewMatrix.copy(camera.matrixWorldInverse.getInverse(camera.matrixWorld));\r\n    this._projectionMatrix.copy(camera.projectionMatrix);\r\n\r\n    this._renderObject(scene, camera, scene);\r\n  }\r\n}\r\nexport default CSS2DRenderer;\r\n","import * as THREE from 'three';\r\nimport Timer from '../Timer';\r\nimport settings from '../settings';\r\nimport EventDispatcher from '../utils/EventDispatcher';\r\n\r\nconst VK_LEFT = 37;\r\nconst VK_UP = 38;\r\nconst VK_RIGHT = 39;\r\nconst VK_DOWN = 40;\r\n\r\nconst STATE = {\r\n  NONE: -1, ROTATE: 0, TRANSLATE: 1, SCALE: 2, TRANSLATE_PIVOT: 3,\r\n};\r\n\r\n// pausing for this amount of time before releasing mouse button prevents inertial rotation (seconds)\r\nconst FULL_STOP_THRESHOLD = 0.1;\r\n\r\nconst quaternion = new THREE.Quaternion();\r\nconst matrix4 = new THREE.Matrix4();\r\n\r\n// pivot -- local offset of the rotation pivot point\r\nfunction ObjectHandler(objects, camera, pivot, options) {\r\n  this.objects = objects;\r\n  [this.object] = objects;\r\n  this.camera = camera;\r\n  this.pivot = pivot;\r\n  this.axis = new THREE.Vector3(0, 0, 1);\r\n  this.options = options;\r\n\r\n  this.lastRotation = {\r\n    axis: new THREE.Vector3(),\r\n    angle: 0.0,\r\n  };\r\n}\r\n\r\nObjectHandler.prototype._rotate = (function () {\r\n  const p = new THREE.Vector3();\r\n  const q = new THREE.Quaternion();\r\n  const s = new THREE.Vector3();\r\n\r\n  const m = new THREE.Matrix4();\r\n\r\n  return function (quat) {\r\n    const zeroPivot = (this.pivot.x === 0.0 && this.pivot.y === 0.0 && this.pivot.z === 0.0);\r\n\r\n    m.copy(this.object.matrix);\r\n\r\n    if (zeroPivot) {\r\n      m.multiply(matrix4.makeRotationFromQuaternion(quat));\r\n    } else {\r\n      m.multiply(matrix4.makeTranslation(this.pivot.x, this.pivot.y, this.pivot.z));\r\n      m.multiply(matrix4.makeRotationFromQuaternion(quat));\r\n      m.multiply(matrix4.makeTranslation(-this.pivot.x, -this.pivot.y, -this.pivot.z));\r\n    }\r\n\r\n    m.decompose(p, q, s);\r\n\r\n    // update objects\r\n    if (!zeroPivot) {\r\n      for (let i = 0; i < this.objects.length; ++i) {\r\n        this.objects[i].position.copy(p);\r\n      }\r\n    }\r\n\r\n    for (let j = 0; j < this.objects.length; ++j) {\r\n      this.objects[j].quaternion.copy(q);\r\n      this.objects[j].updateMatrix();\r\n    }\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.setObjects = function (objects) {\r\n  this.objects = objects;\r\n  [this.object] = objects;\r\n};\r\n\r\nObjectHandler.prototype.rotate = (function () {\r\n  const rot = {\r\n    axis: new THREE.Vector3(),\r\n    angle: 0.0,\r\n  };\r\n\r\n  return function (quat, mousePrevPos, mouseCurPos, aboutAxis) {\r\n    this.mouse2rotation(rot, mousePrevPos, mouseCurPos, aboutAxis);\r\n    quat.setFromAxisAngle(rot.axis, rot.angle);\r\n\r\n    if (rot.angle) {\r\n      this._rotate(quat);\r\n    }\r\n\r\n    this.lastRotation = rot;\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.translate = (function () {\r\n  const dir = new THREE.Vector3();\r\n  const pivot = new THREE.Vector3();\r\n\r\n  return function (delta) {\r\n    // reverse-project viewport movement to view coords (compensate for screen aspect ratio)\r\n    dir.set(\r\n      delta.x / this.camera.projectionMatrix.elements[0],\r\n      delta.y / this.camera.projectionMatrix.elements[5], 0,\r\n    );\r\n    let dist = dir.length();\r\n    dir.normalize();\r\n\r\n    // transform movement direction to object local coords\r\n    dir.transformDirection(matrix4.getInverse(this.object.matrixWorld));\r\n\r\n    // visible translate distance shouldn't depend on camera-to-object distance\r\n    pivot.copy(this.pivot);\r\n    this.object.localToWorld(pivot);\r\n    dist *= Math.abs(pivot.z - this.camera.position.z);\r\n\r\n    // visible translate distance shouldn't depend on object scale\r\n    dist /= this.object.matrixWorld.getMaxScaleOnAxis();\r\n\r\n    // all objects are translated similar to principal object\r\n    // (we assume they all have identical pivot and scale)\r\n    for (let i = 0; i < this.objects.length; ++i) {\r\n      this.objects[i].translateOnAxis(dir, dist);\r\n    }\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.update = (function () {\r\n  const axis = new THREE.Vector3();\r\n\r\n  return function (timeSinceLastUpdate, timeSinceMove) {\r\n    if (settings.now.autoRotation !== 0.0) {\r\n      // auto-rotation with constant speed\r\n\r\n      // if rotation axis is fixed or hasn't been defined yet\r\n      if (settings.now.autoRotationAxisFixed || this.lastRotation.axis.length() === 0.0) {\r\n        // use Y-axis (transformed to local object coords)\r\n        axis.set(0, 1, 0).transformDirection(matrix4.getInverse(this.object.matrixWorld));\r\n      } else {\r\n        // use axis defined by last user rotation\r\n        axis.copy(this.lastRotation.axis);\r\n      }\r\n\r\n      this._rotate(quaternion.setFromAxisAngle(axis, settings.now.autoRotation * timeSinceLastUpdate));\r\n      return true;\r\n    }\r\n\r\n    if (this.options.intertia && this.lastRotation.angle) {\r\n      // inertial object rotation\r\n      const angle = this.lastRotation.angle * ((1.0 - this.options.dynamicDampingFactor) ** (40.0 * timeSinceMove));\r\n\r\n      if (Math.abs(angle) <= this.options.intertiaThreshold) {\r\n        this.lastRotation.angle = 0.0;\r\n      } else {\r\n        this._rotate(quaternion.setFromAxisAngle(this.lastRotation.axis, angle));\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.stop = function () {\r\n  this.lastRotation.angle = 0.0;\r\n};\r\n\r\n// calculate (axis, angle) pair from mouse/touch movement\r\nObjectHandler.prototype.mouse2rotation = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  const eye = new THREE.Vector3();\r\n  const eyeDirection = new THREE.Vector3();\r\n\r\n  const cameraUpDirection = new THREE.Vector3();\r\n  const cameraSidewaysDirection = new THREE.Vector3();\r\n\r\n  const moveDirection = new THREE.Vector3();\r\n\r\n  const mouseDelta = new THREE.Vector2();\r\n\r\n  return function (rot, mousePrev, mouseCur, aboutAxis) {\r\n    if (aboutAxis) {\r\n      rot.axis.copy(this.axis);\r\n      rot.angle = this.options.axisRotateFactor * (mouseCur.y - mousePrev.y);\r\n\r\n      /* cool method that allows rotation around Z axis to be \"tied\" to mouse cursor\r\n\r\n        res.axis.copy(this.axis);\r\n\r\n        var pivot = this.pivot.clone();\r\n        this.object.localToWorld(pivot);\r\n        pivot.project(this.camera);\r\n\r\n        var v1 = new THREE.Vector3(mousePrev.x, mousePrev.y, this.camera.position.z);\r\n        v1.sub(pivot);\r\n        var v2 = new THREE.Vector3(mouseCur.x, mouseCur.y, this.camera.position.z);\r\n        v2.sub(pivot);\r\n\r\n        v1.sub(res.axis.clone().multiplyScalar(v1.dot(res.axis)));\r\n        v2.sub(res.axis.clone().multiplyScalar(v2.dot(res.axis)));\r\n\r\n        var abs = v1.length() * v2.length();\r\n        if (abs > 0) {\r\n          res.angle = res.axis.dot(v1.cross(v2)) / abs;\r\n        }\r\n      */\r\n    } else {\r\n      mouseDelta.subVectors(mouseCur, mousePrev);\r\n      const angle = mouseDelta.length();\r\n      if (angle === 0.0) {\r\n        return;\r\n      }\r\n\r\n      center.copy(this.pivot);\r\n      this.object.localToWorld(center);\r\n      eye.subVectors(this.camera.position, center);\r\n      eyeDirection.copy(eye).normalize();\r\n\r\n      cameraUpDirection.copy(this.camera.up).normalize();\r\n      cameraSidewaysDirection.crossVectors(cameraUpDirection, eyeDirection).normalize();\r\n\r\n      cameraUpDirection.setLength(mouseDelta.y);\r\n      cameraSidewaysDirection.setLength(mouseDelta.x);\r\n\r\n      moveDirection.copy(cameraUpDirection.add(cameraSidewaysDirection));\r\n\r\n      rot.axis.crossVectors(moveDirection, eye);\r\n\r\n      rot.angle = -angle * this.options.rotateFactor;\r\n    }\r\n\r\n    rot.axis.transformDirection(matrix4.getInverse(this.object.matrixWorld));\r\n\r\n    // make sure angle is always positive (thus 'axis' defines both axis and direction of rotation)\r\n    if (rot.angle < 0.0) {\r\n      rot.axis.negate();\r\n      rot.angle = -rot.angle;\r\n    }\r\n  };\r\n}());\r\n\r\nfunction ObjectControls(object, objectPivot, camera, domElement, getAltObj) {\r\n  EventDispatcher.call(this);\r\n  const self = this;\r\n\r\n  this.object = object;\r\n  this.objectPivot = objectPivot;\r\n  this.camera = camera;\r\n  this.domElement = (typeof domElement !== 'undefined') ? domElement : document;\r\n  this.getAltObj = getAltObj;\r\n\r\n  // API\r\n\r\n  this.enabled = true;\r\n  this.hotkeysEnabled = true;\r\n\r\n  this.screen = {\r\n    left: 0, top: 0, width: 0, height: 0,\r\n  };\r\n\r\n  this.options = {\r\n    rotateFactor: Math.PI, // full screen slide (along short side) would roughly mean 180 deg. rotation\r\n    axisRotateFactor: 4 * Math.PI, // full screen slide (along short side) would roughly mean 720 deg. rotation\r\n    intertia: true,\r\n    dynamicDampingFactor: 0.1,\r\n    intertiaThreshold: 1e-3,\r\n  };\r\n\r\n  // internals\r\n\r\n  this._state = STATE.NONE;\r\n\r\n  this._mousePrevPos = new THREE.Vector2();\r\n  this._mouseCurPos = new THREE.Vector2();\r\n\r\n  this._mainObj = new ObjectHandler([this.object], this.camera, new THREE.Vector3(0, 0, 0), this.options);\r\n  this._altObj = new ObjectHandler([this.object], this.camera, new THREE.Vector3(0, 0, 0), this.options);\r\n  this._affectedObj = this._mainObj;\r\n  this._isAltObjFreeRotationAllowed = true;\r\n  this._isTranslationAllowed = true;\r\n  this._isKeysTranslatingObj = false;\r\n\r\n  this._pressedKeys = [];\r\n\r\n  this._clock = new Timer();\r\n  this._clock.start();\r\n  this._lastUpdateTime = this._clock.getElapsedTime();\r\n\r\n  // events\r\n  this._listeners = [\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousedown',\r\n      handler(e) {\r\n        self.mousedown(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseup',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousemove',\r\n      handler(e) {\r\n        self.mousemove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousewheel',\r\n      handler(e) {\r\n        self.mousewheel(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'DOMMouseScroll',\r\n      handler(e) {\r\n        self.mousewheel(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseout',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchstart',\r\n      handler(e) {\r\n        self.touchstartend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchend',\r\n      handler(e) {\r\n        self.touchstartend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchmove',\r\n      handler(e) {\r\n        self.touchmove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.getKeyBindObject(),\r\n      type: 'keydown',\r\n      handler(e) {\r\n        self.keydownup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.getKeyBindObject(),\r\n      type: 'keyup',\r\n      handler(e) {\r\n        self.keydownup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'resize',\r\n      handler() {\r\n        self.handleResize();\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'blur',\r\n      handler() {\r\n        self.resetKeys();\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'contextmenu',\r\n      handler(e) {\r\n        self.contextmenu(e);\r\n      },\r\n    }];\r\n\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.addEventListener(l.type, l.handler);\r\n  }\r\n\r\n  this.handleResize();\r\n\r\n  this.resetKeys();\r\n\r\n  // force an update at start\r\n  this.update();\r\n}\r\n\r\n// methods\r\n\r\nObjectControls.prototype = Object.create(EventDispatcher.prototype);\r\nObjectControls.prototype.constructor = ObjectControls;\r\n\r\nObjectControls.prototype.resetKeys = function () {\r\n  this._pressedKeys[VK_LEFT] = false;\r\n  this._pressedKeys[VK_UP] = false;\r\n  this._pressedKeys[VK_RIGHT] = false;\r\n  this._pressedKeys[VK_DOWN] = false;\r\n};\r\n\r\nObjectControls.prototype.contextmenu = function (e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n};\r\n\r\nObjectControls.prototype.handleResize = function () {\r\n  if (this.domElement === document) {\r\n    this.screen.left = 0;\r\n    this.screen.top = 0;\r\n    this.screen.width = window.innerWidth;\r\n    this.screen.height = window.innerHeight;\r\n  } else {\r\n    const box = this.domElement.getBoundingClientRect();\r\n    // adjustments come from similar code in the jquery offset() function\r\n    const d = this.domElement.ownerDocument.documentElement;\r\n    this.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n    this.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n    this.screen.width = box.width;\r\n    this.screen.height = box.height;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.enable = function (enable) {\r\n  this.enabled = enable;\r\n};\r\n\r\nObjectControls.prototype.enableHotkeys = function (enable) {\r\n  this.hotkeysEnabled = enable;\r\n};\r\n\r\nObjectControls.prototype.allowTranslation = function (allow) {\r\n  this._isTranslationAllowed = allow;\r\n};\r\n\r\nObjectControls.prototype.allowAltObjFreeRotation = function (allow) {\r\n  this._isAltObjFreeRotationAllowed = allow;\r\n};\r\n\r\nObjectControls.prototype.keysTranslateObj = function (on) {\r\n  this._isKeysTranslatingObj = on;\r\n};\r\n\r\nObjectControls.prototype.isEditingAltObj = function () {\r\n  return ((this._state === STATE.ROTATE) || (this._state === STATE.TRANSLATE))\r\n            && (this._affectedObj === this._altObj);\r\n};\r\n\r\n// convert page coords of mouse/touch to uniform coords with smaller side being [-0.5, 0.5]\r\n// (uniform coords keep direct proportion with screen distance travelled by mouse regardless of screen aspect ratio)\r\nObjectControls.prototype.convertMouseToOnCircle = function (coords, pageX, pageY) {\r\n  const screenSize = Math.min(this.screen.width, this.screen.height);\r\n\r\n  if (screenSize === 0) {\r\n    coords.set(0, 0);\r\n    return;\r\n  }\r\n\r\n  coords.set(\r\n    ((pageX - this.screen.width * 0.5 - this.screen.left) / screenSize),\r\n    ((0.5 * this.screen.height + this.screen.top - pageY) / screenSize),\r\n  );\r\n};\r\n\r\n// convert page coords of mouse/touch to viewport coords with both sides being [-1, 1]\r\n// (those are non-uniform coords affected by screen aspect ratio)\r\nObjectControls.prototype.convertMouseToViewport = function (coords, pageX, pageY) {\r\n  if (this.screen.width === 0 || this.screen.height === 0) {\r\n    coords.set(0, 0);\r\n    return;\r\n  }\r\n\r\n  coords.set(\r\n    (2.0 * (pageX - this.screen.width * 0.5 - this.screen.left) / this.screen.width),\r\n    (2.0 * (0.5 * this.screen.height + this.screen.top - pageY) / this.screen.height),\r\n  );\r\n};\r\n\r\nObjectControls.prototype.stop = function () {\r\n  this._mainObj.stop();\r\n  this._altObj.stop();\r\n};\r\n\r\n// rotate object based on latest mouse/touch movement\r\nObjectControls.prototype.rotateByMouse = (function () {\r\n  const quat = new THREE.Quaternion();\r\n\r\n  return function (aboutZAxis) {\r\n    this._affectedObj.rotate(quat, this._mousePrevPos, this._mouseCurPos, aboutZAxis);\r\n    this.dispatchEvent({ type: 'change', action: 'rotate', quaternion: quat });\r\n  };\r\n}());\r\n\r\n// rotate object by specified quaternion\r\nObjectControls.prototype.rotate = function (quat) {\r\n  this.object.quaternion.multiply(quat);\r\n  this.dispatchEvent({ type: 'change', action: 'rotate', quaternion: quat });\r\n};\r\n\r\n// get object's orientation\r\nObjectControls.prototype.getOrientation = function () {\r\n  return this.object.quaternion;\r\n};\r\n\r\n// set object's orientation\r\nObjectControls.prototype.setOrientation = function (quat) {\r\n  this.object.quaternion.copy(quat);\r\n};\r\n\r\n// translate object based on latest mouse/touch movement\r\nObjectControls.prototype.translate = (function () {\r\n  const delta = new THREE.Vector2();\r\n  return function () {\r\n    delta.subVectors(this._mouseCurPos, this._mousePrevPos);\r\n    this._affectedObj.translate(delta);\r\n    this.dispatchEvent({ type: 'change', action: 'translate' });\r\n  };\r\n}());\r\n\r\n// get object scale\r\nObjectControls.prototype.getScale = function () {\r\n  return this.object.scale.x;\r\n};\r\n\r\n// set uniform object scale\r\nObjectControls.prototype.setScale = function (scale) {\r\n  this.object.scale.set(scale, scale, scale);\r\n};\r\n\r\n// scale object by factor (factor should be greater than zero)\r\nObjectControls.prototype.scale = function (factor) {\r\n  if (factor <= 0) {\r\n    return;\r\n  }\r\n  this.setScale(this.object.scale.x * factor);\r\n  this.dispatchEvent({ type: 'change', action: 'zoom', factor });\r\n};\r\n\r\nObjectControls.prototype.update = (function () {\r\n  const shift = new THREE.Vector2();\r\n\r\n  return function () {\r\n    const curTime = this._clock.getElapsedTime();\r\n    const timeSinceLastUpdate = curTime - this._lastUpdateTime;\r\n\r\n    // update object handler\r\n    if (this._state === STATE.NONE) {\r\n      const timeSinceMove = curTime - this._lastMouseMoveTime;\r\n      if (this._mainObj.update(timeSinceLastUpdate, timeSinceMove)\r\n        || this._altObj.update(timeSinceLastUpdate, timeSinceMove)) {\r\n        this.dispatchEvent({ type: 'change', action: 'auto' });\r\n      }\r\n    }\r\n\r\n    // apply arrow keys\r\n    if (this._isKeysTranslatingObj) {\r\n      const speedX = Number(this._pressedKeys[VK_RIGHT]) - Number(this._pressedKeys[VK_LEFT]);\r\n      const speedY = Number(this._pressedKeys[VK_UP]) - Number(this._pressedKeys[VK_DOWN]);\r\n      if (speedX !== 0.0 || speedY !== 0.0) {\r\n        const delta = timeSinceLastUpdate;\r\n\r\n        // update object translation\r\n        const altObj = this.getAltObj();\r\n        if (altObj.objects.length > 0) {\r\n          this._altObj.setObjects(altObj.objects);\r\n          this._altObj.pivot = altObj.pivot;\r\n\r\n          if ('axis' in altObj) {\r\n            this._altObj.axis = altObj.axis.clone();\r\n          } else {\r\n            this._altObj.axis.set(0, 0, 1);\r\n          }\r\n\r\n          shift.set(delta * speedX, delta * speedY);\r\n          this._altObj.translate(shift);\r\n          this.dispatchEvent({ type: 'change', action: 'translate' });\r\n        }\r\n      }\r\n    }\r\n\r\n    this._lastUpdateTime = curTime;\r\n  };\r\n}());\r\n\r\nObjectControls.prototype.reset = function () {\r\n  this._state = STATE.NONE;\r\n\r\n  this.object.quaternion.copy(quaternion.set(0, 0, 0, 1));\r\n};\r\n\r\n// listeners\r\n\r\nObjectControls.prototype.mousedown = function (event) {\r\n  if (this.enabled === false || this._state !== STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (this._state === STATE.NONE) {\r\n    if (event.button === 0) {\r\n      this._affectedObj.stop(); // can edit only one object at a time\r\n\r\n      let workWithAltObj = false;\r\n\r\n      if (event.altKey) {\r\n        const altObj = this.getAltObj();\r\n        workWithAltObj = (altObj.objects.length > 0);\r\n        if (workWithAltObj) {\r\n          this._altObj.setObjects(altObj.objects);\r\n          this._altObj.pivot = altObj.pivot;\r\n\r\n          if ('axis' in altObj) {\r\n            this._altObj.axis = altObj.axis.clone();\r\n          } else {\r\n            this._altObj.axis.set(0, 0, 1);\r\n          }\r\n        }\r\n      }\r\n\r\n      this._affectedObj = workWithAltObj ? this._altObj : this._mainObj;\r\n\r\n      this._state = (workWithAltObj && event.ctrlKey && this._isTranslationAllowed) ? STATE.TRANSLATE : STATE.ROTATE;\r\n    } else if (event.button === 2) {\r\n      this._state = STATE.TRANSLATE_PIVOT;\r\n    }\r\n  }\r\n\r\n  if (this._state === STATE.ROTATE) {\r\n    this.convertMouseToOnCircle(this._mouseCurPos, event.pageX, event.pageY);\r\n    this._mousePrevPos.copy(this._mouseCurPos);\r\n  }\r\n\r\n  if (this._state === STATE.TRANSLATE || this._state === STATE.TRANSLATE_PIVOT) {\r\n    this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n    this._mousePrevPos.copy(this._mouseCurPos);\r\n  }\r\n};\r\n\r\nObjectControls.prototype.mousemove = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (this._state) {\r\n    case STATE.ROTATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.rotateByMouse((event.altKey && !this._isAltObjFreeRotationAllowed) || event.shiftKey);\r\n      this._lastMouseMoveTime = this._clock.getElapsedTime();\r\n      break;\r\n\r\n    case STATE.TRANSLATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.translate();\r\n      break;\r\n\r\n    case STATE.TRANSLATE_PIVOT:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.translatePivotByMouse();\r\n      break;\r\n\r\n    default: break;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.mousewheel = function (event) {\r\n  if (this.enabled === false || !settings.now.zooming || this._state !== STATE.NONE || event.shiftKey) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n\r\n  let delta = 0;\r\n\r\n  if (event.wheelDelta) {\r\n    // WebKit / Opera / Explorer 9\r\n    delta = event.wheelDelta / 40;\r\n  } else if (event.detail) {\r\n    // Firefox\r\n    delta = -event.detail / 3;\r\n  }\r\n\r\n  let factor = 1.0 + delta * 0.05;\r\n  factor = Math.max(factor, 0.01);\r\n  this.scale(factor);\r\n};\r\n\r\nObjectControls.prototype.mouseup = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  this._state = STATE.NONE;\r\n\r\n  if (this._clock.getElapsedTime() - this._lastMouseMoveTime > FULL_STOP_THRESHOLD) {\r\n    this._affectedObj.stop();\r\n  }\r\n};\r\n\r\nObjectControls.prototype.touchstartend = function (event) {\r\n  if (this.enabled === false) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (event.touches.length) {\r\n    case 1:\r\n      this._state = STATE.ROTATE;\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.touches[0].pageX, event.touches[0].pageY);\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      break;\r\n\r\n    case 2: {\r\n      // prevent inertial rotation\r\n      this._mainObj.stop();\r\n      this._altObj.stop();\r\n\r\n      this._state = STATE.SCALE;\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n      this._touchDistanceCur = this._touchDistanceStart = Math.sqrt(dx * dx + dy * dy);\r\n      this._scaleStart = this.object.scale.x;\r\n      break;\r\n    }\r\n\r\n    default:\r\n      this._state = STATE.NONE;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.touchmove = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (this._state) {\r\n    case STATE.ROTATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.touches[0].pageX, event.touches[0].pageY);\r\n      this.rotateByMouse(false);\r\n\r\n      this._lastMouseMoveTime = this._clock.getElapsedTime();\r\n      break;\r\n\r\n    case STATE.SCALE:\r\n      if (settings.now.zooming) {\r\n        // update scale\r\n        const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n        const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n        this._touchDistanceCur = Math.sqrt(dx * dx + dy * dy);\r\n        const newScale = this._scaleStart * this._touchDistanceCur / this._touchDistanceStart;\r\n        const factor = newScale / this.object.scale.x;\r\n        this.scale(factor);\r\n      }\r\n      break;\r\n\r\n    default:\r\n  }\r\n};\r\n\r\nObjectControls.prototype.keydownup = function (event) {\r\n  if (this.enabled === false || this.hotkeysEnabled === false) {\r\n    return;\r\n  }\r\n\r\n  switch (event.keyCode) {\r\n    case VK_LEFT:\r\n    case VK_UP:\r\n    case VK_RIGHT:\r\n    case VK_DOWN:\r\n      this._pressedKeys[event.keyCode] = (event.type === 'keydown');\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      break;\r\n    default:\r\n  }\r\n};\r\n\r\nObjectControls.prototype.getKeyBindObject = function () {\r\n  return window.top;\r\n};\r\n\r\n\r\nObjectControls.prototype.dispose = function () {\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.removeEventListener(l.type, l.handler);\r\n  }\r\n};\r\n\r\nObjectControls.prototype.translatePivotByMouse = (function () {\r\n  const delta = new THREE.Vector2();\r\n  return function () {\r\n    delta.subVectors(this._mouseCurPos, this._mousePrevPos);\r\n    this.translatePivotInWorld(settings.now.translationSpeed * delta.x, settings.now.translationSpeed * delta.y, 0);\r\n  };\r\n}());\r\n\r\n// Translate in WorldCS, translation is scaled with root scale matrix\r\nObjectControls.prototype.translatePivotInWorld = function (x, y, z) {\r\n  const pos = this.objectPivot.position;\r\n  pos.applyMatrix4(this.object.matrixWorld);\r\n  pos.setX(pos.x + x);\r\n  pos.setY(pos.y + y);\r\n  pos.setZ(pos.z + z);\r\n  pos.applyMatrix4(matrix4.getInverse(this.object.matrixWorld));\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\n// Translate in ModelCS, x, y, z are Ang\r\nObjectControls.prototype.translatePivot = function (x, y, z) {\r\n  const pos = this.objectPivot.position;\r\n  pos.setX(pos.x + x);\r\n  pos.setY(pos.y + y);\r\n  pos.setZ(pos.z + z);\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\n// Set pivot\r\nObjectControls.prototype.setPivot = function (newPivot) {\r\n  this.objectPivot.position.copy(newPivot);\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\nexport default ObjectControls;\r\n","import * as THREE from 'three';\r\nimport settings from '../settings';\r\nimport Timer from '../Timer';\r\nimport EventDispatcher from '../utils/EventDispatcher';\r\n\r\nfunction Picker(gfxObj, camera, domElement) {\r\n  EventDispatcher.call(this);\r\n  const self = this;\r\n\r\n  this.gfxObj = gfxObj;\r\n  this.camera = camera;\r\n  this.domElement = (typeof domElement !== 'undefined') ? domElement : document;\r\n  this.screen = {\r\n    left: 0, top: 0, width: 0, height: 0,\r\n  };\r\n  this._lastMousePos = new THREE.Vector2(0, 0);\r\n  this._mouseTotalDist = 0.0;\r\n  this._lastClickBeginTime = -1000.0;\r\n  this._lastClickPos = new THREE.Vector2(0, 0);\r\n  this._clickBeginTime = 0.0;\r\n\r\n  this._clock = new Timer();\r\n  this._clock.start();\r\n\r\n  this._listeners = [\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousedown',\r\n      handler(e) {\r\n        self.mousedown(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseup',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousemove',\r\n      handler(e) {\r\n        self.mousemove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchstart',\r\n      handler(e) {\r\n        self.touchstart(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchend',\r\n      handler(e) {\r\n        self.touchend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'resize',\r\n      handler() {\r\n        self.handleResize();\r\n      },\r\n    }];\r\n\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.addEventListener(l.type, l.handler);\r\n  }\r\n\r\n  this.handleResize();\r\n}\r\n\r\nPicker.prototype = Object.create(EventDispatcher.prototype);\r\nPicker.prototype.constructor = Picker;\r\n\r\nPicker.prototype.reset = function () {\r\n  this.picked = {};\r\n  this.dispatchEvent({ type: 'newpick', obj: {} });\r\n};\r\n\r\nPicker.prototype.handleResize = function () {\r\n  if (this.domElement === document) {\r\n    this.screen.left = 0;\r\n    this.screen.top = 0;\r\n    this.screen.width = window.innerWidth;\r\n    this.screen.height = window.innerHeight;\r\n  } else {\r\n    const box = this.domElement.getBoundingClientRect();\r\n    // adjustments come from similar code in the jquery offset() function\r\n    const d = this.domElement.ownerDocument.documentElement;\r\n    this.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n    this.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n    this.screen.width = box.width;\r\n    this.screen.height = box.height;\r\n  }\r\n};\r\n\r\nPicker.prototype.pickObject = function (screenPos) {\r\n  if (!this.gfxObj) {\r\n    this.picked = {};\r\n    this.dispatchEvent({ type: 'newpick', obj: {} });\r\n    return;\r\n  }\r\n\r\n  const { gfxObj } = this;\r\n  const rayCaster = new THREE.Raycaster();\r\n  rayCaster.ray.origin.setFromMatrixPosition(this.camera.matrixWorld);\r\n  rayCaster.ray.direction.set(screenPos.x, screenPos.y, 0.5).unproject(this.camera).sub(rayCaster.ray.origin).normalize();\r\n\r\n  const clipPlane = (settings.now.draft.clipPlane && this.clipPlaneValue) ? this.clipPlaneValue : Infinity;\r\n  const fogFarPlane = (settings.now.fog && this.fogFarValue) ? this.fogFarValue : Infinity;\r\n  const point = rayCaster.intersectVisibleObject(gfxObj, this.camera, clipPlane, fogFarPlane);\r\n  if (!point) {\r\n    this.picked = {};\r\n    this.dispatchEvent({ type: 'newpick', obj: {} });\r\n    return;\r\n  }\r\n\r\n  let picked = {};\r\n  if (point.residue || point.atom) {\r\n    const residue = point.residue || point.atom.residue;\r\n    if (settings.now.pick === 'chain') {\r\n      picked = { chain: residue.getChain() };\r\n    } else if (settings.now.pick === 'molecule') {\r\n      picked = { molecule: residue.getMolecule() };\r\n    } else if (point.residue || settings.now.pick === 'residue') {\r\n      picked = { residue };\r\n    } else if (point.atom) {\r\n      picked = { atom: point.atom };\r\n    }\r\n  }\r\n  this.picked = picked;\r\n  this.dispatchEvent({ type: 'newpick', obj: picked });\r\n};\r\n\r\nPicker.prototype.getMouseInViewport = function (pageX, pageY) {\r\n  return new THREE.Vector2(\r\n    (pageX - this.screen.left) / this.screen.width * 2 - 1,\r\n    -(pageY - this.screen.top) / this.screen.height * 2 + 1,\r\n  );\r\n};\r\n\r\nPicker.prototype.mousedown = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.button === 0) {\r\n    this._lastMousePos = this.getMouseInViewport(event.pageX, event.pageY);\r\n    this._mouseTotalDist = 0.0;\r\n    this._clickBeginTime = this._clock.getElapsedTime();\r\n  }\r\n};\r\n\r\nPicker.prototype.mousemove = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  const pos = this.getMouseInViewport(event.pageX, event.pageY);\r\n  this._mouseTotalDist += pos.sub(this._lastMousePos).length();\r\n};\r\n\r\nPicker.prototype.mouseup = function (event) {\r\n  const self = this;\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.button === 0) {\r\n    if (this._mouseTotalDist < 0.01) {\r\n      const curTime = this._clock.getElapsedTime();\r\n      const curPos = this.getMouseInViewport(event.pageX, event.pageY);\r\n\r\n      const timeSinceLastClickBegin = curTime - this._lastClickBeginTime;\r\n      if (timeSinceLastClickBegin < 0.7) {\r\n        const clickDist = new THREE.Vector2().subVectors(curPos, this._lastClickPos);\r\n        if (clickDist.length() < 0.01) {\r\n          // it's a double click\r\n          this.dispatchEvent({ type: 'dblclick', obj: this.picked });\r\n\r\n          this._lastClickPos = curPos;\r\n          this._lastClickBeginTime = -1000; // this click cannot serve as first click in double-click\r\n          return;\r\n        }\r\n      }\r\n\r\n      setTimeout(() => {\r\n        self.pickObject(curPos);\r\n      }, 0);\r\n\r\n      this._lastClickPos = curPos;\r\n      this._lastClickBeginTime = this._clickBeginTime;\r\n    }\r\n  }\r\n};\r\n\r\nPicker.prototype.touchstart = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.touches.length === 1) {\r\n    this._lastTouchdownPos = this.getMouseInViewport(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n};\r\n\r\nPicker.prototype.touchend = function (event) {\r\n  const self = this;\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.touches.length === 0\r\n        && event.changedTouches.length === 1) {\r\n    const pos = this.getMouseInViewport(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\r\n    const dist = pos.sub(this._lastTouchdownPos).length();\r\n    if (dist < 0.01) {\r\n      setTimeout(() => {\r\n        self.pickObject(self._lastTouchdownPos);\r\n      }, 0);\r\n    }\r\n  }\r\n};\r\n\r\nPicker.prototype.dispose = function () {\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.removeEventListener(l.type, l.handler);\r\n  }\r\n};\r\n\r\nexport default Picker;\r\n","import * as THREE from 'three';\r\n\r\nclass Axes {\r\n  constructor(target, targetCamera) {\r\n    this._target = target;\r\n    this._targetCamera = targetCamera;\r\n    this._camera = new THREE.PerspectiveCamera(targetCamera.fov, targetCamera.aspect, 1, 100);\r\n    this._object = new THREE.AxesHelper(1);\r\n    this._scene = new THREE.Scene();\r\n    this._scene.add(this._object);\r\n    this._full = new THREE.Vector2();\r\n\r\n    this._update();\r\n  }\r\n\r\n  _update() {\r\n    const { fov } = this._targetCamera;\r\n    const camera = this._camera;\r\n    camera.aspect = this._targetCamera.aspect;\r\n    camera.setMinimalFov(fov);\r\n    camera.setDistanceToFit(1.0, fov);\r\n    camera.updateProjectionMatrix();\r\n\r\n    this._object.quaternion.copy(this._target.quaternion);\r\n  }\r\n\r\n  render(renderer) {\r\n    this._update();\r\n\r\n    renderer.getSize(this._full);\r\n    const width = this._full.width * 0.25;\r\n    const height = this._full.height * 0.25;\r\n\r\n    const { autoClear } = renderer;\r\n    renderer.autoClear = false;\r\n    renderer.setViewport(0.0, 0.0, width, height);\r\n    renderer.clear(false, true, false);\r\n    renderer.render(this._scene, this._camera);\r\n    renderer.setViewport(0, 0, this._full.width, this._full.height);\r\n    renderer.autoClear = autoClear;\r\n  }\r\n}\r\nexport default Axes;\r\n","import * as THREE from 'three';\r\nimport SecondaryStructureColorer from './colorers/SecondaryStructureColorer';\r\n\r\nconst cDataOffset = 12;\r\nconst cFirstMask = 0x0FFFFF00;\r\nconst cFirstShift = 8;\r\nconst cSecMask1 = 0x000000FF;\r\nconst cSecShift1 = 12;\r\nconst cSecMask2 = 0xFFF00000;\r\nconst cSecShift2 = 20;\r\nconst cThirdMask = 0x000FFFFF;\r\nconst cStrMask = 0xF0000000;\r\nconst cStrShift = 28;\r\nconst c219 = 1 << 19;\r\nconst c220 = 1 << 20;\r\n\r\nconst cHelixIdx = 1;\r\nconst cSheetIdx = 2;\r\nconst secTypes = ['helix', 'strand'];\r\nconst cSecNames = ['fs', 'ps', 'ns', 'us'];\r\n\r\nfunction _createSecondary(strArray, complex) {\r\n  const residues = complex._residues;\r\n  const nRes = residues.length;\r\n  const resid = new Uint8Array(nRes);\r\n\r\n  const atoms = complex._atoms;\r\n  for (let i = 0, n = strArray.length; i < n; ++i) {\r\n    const atom = atoms[i];\r\n    resid[atom.residue._index] = strArray[i];\r\n  }\r\n\r\n  const secondary = [];\r\n  let rIdx = 0;\r\n  while (rIdx < nRes) {\r\n    if (resid[rIdx] !== 0) {\r\n      const start = rIdx;\r\n      const val = resid[rIdx];\r\n      while (rIdx < nRes - 1 && resid[rIdx + 1] === val\r\n      && residues[rIdx].isConnected(residues[rIdx + 1])) {\r\n        ++rIdx;\r\n      }\r\n      secondary.push({ start, end: rIdx, type: secTypes[val - 1] });\r\n    }\r\n    ++rIdx;\r\n  }\r\n  return secondary;\r\n}\r\n\r\nfunction fromUInt20ToInt20(uint20) {\r\n  return uint20 >= c219 ? uint20 - c220 : uint20;\r\n}\r\n\r\nclass FrameInfo {\r\n  constructor(complex, payload, callbacks) {\r\n    this._complex = complex;\r\n    this._secondary = null;\r\n    this.isLoading = false;\r\n    this._framesRange = {\r\n      start: 0,\r\n      end: -1,\r\n    };\r\n    this.frameIsReady = false;\r\n    this._buffer = null;\r\n    this._frameRequest = null;\r\n    this._callbacks = callbacks;\r\n    if (typeof payload === 'function') {\r\n      this._framesRequestLength = 1;\r\n      this._downloadDataFn = payload;\r\n    } else {\r\n      this.parseBinaryData(payload, true);\r\n    }\r\n    this.reset();\r\n    this.setFrame(0);\r\n  }\r\n\r\n  _prepareBuffer(framesStart, framesEnd) {\r\n    if (framesStart === undefined || framesStart === null) {\r\n      framesStart = 0;\r\n    }\r\n    if (framesEnd === undefined || framesEnd === null) {\r\n      framesEnd = framesStart + this._framesRequestLength;\r\n    }\r\n    if (this._framesCount !== undefined) {\r\n      framesEnd = Math.min(this._framesCount - 1, framesEnd);\r\n    }\r\n    if (this._downloadDataFn) {\r\n      const self = this;\r\n      const onDone = function (data) {\r\n        self.isLoading = false;\r\n        if (self._callbacks && typeof self._callbacks.onLoadStatusChanged === 'function') {\r\n          self._callbacks.onLoadStatusChanged();\r\n        }\r\n        self._buffer = {\r\n          data,\r\n          state: 'ready',\r\n          start: framesStart,\r\n          end: framesEnd,\r\n        };\r\n        if (self._frameRequest !== null) {\r\n          const idx = self._frameRequest;\r\n          self._frameRequest = null;\r\n          self.setFrame(idx);\r\n        }\r\n      };\r\n      const onFail = function () {\r\n        self.isLoading = false;\r\n        if (self._callbacks && typeof self._callbacks.onError === 'function') {\r\n          self._callbacks.onError('Streaming failed');\r\n        }\r\n      };\r\n      if (!this._buffer) {\r\n        this._buffer = {};\r\n      }\r\n      this._buffer.state = 'downloading';\r\n      this.isLoading = true;\r\n      if (self._callbacks && typeof self._callbacks.onLoadStatusChanged === 'function') {\r\n        self._callbacks.onLoadStatusChanged();\r\n      }\r\n      this._downloadDataFn({ start: framesStart, end: framesEnd + 1 }, onDone, onFail);\r\n    }\r\n  }\r\n\r\n  _parseBuffer() {\r\n    if (this._buffer && this._buffer.state === 'ready') {\r\n      this._framesRange = {\r\n        start: this._buffer.start,\r\n        end: this._buffer.end,\r\n      };\r\n      this.parseBinaryData(this._buffer.data, false);\r\n      let _bufferRequestStart = (this._buffer.end + 1) % this._framesCount;\r\n      if (_bufferRequestStart >= this._framesCount) {\r\n        _bufferRequestStart = 0;\r\n      }\r\n      this._buffer = {\r\n        state: 'none',\r\n      };\r\n      this._prepareBuffer(_bufferRequestStart, _bufferRequestStart + this._framesRequestLength);\r\n      if (this._frameRequest !== null) {\r\n        const idx = this._frameRequest;\r\n        this._frameRequest = null;\r\n        this.setFrame(idx);\r\n      }\r\n    }\r\n  }\r\n\r\n  parseBinaryData(arrayBuffer) {\r\n    const dataView = new DataView(arrayBuffer);\r\n    let offset = 0;\r\n    const atomsCount = dataView.getUint32(offset, true);\r\n    offset += 4;\r\n    const framesCount = dataView.getUint32(offset, true);\r\n    this._framesCount = framesCount;\r\n    this._framesRange.end = this._framesRange.end > 0\r\n      ? Math.min(this._framesRange.end, framesCount - 1) : framesCount - 1;\r\n    offset += 4;\r\n    this._atomsCount = atomsCount;\r\n    const maxSize = 1024 * 1024; // 1 MB\r\n    this._framesRequestLength = Math.ceil(maxSize / (atomsCount * 8));\r\n    const chunkedFramesCount = this._framesRange.end - this._framesRange.start + 1;\r\n    if (atomsCount !== this._complex._atoms.length\r\n      || arrayBuffer.byteLength !== cDataOffset + chunkedFramesCount * atomsCount * 8) {\r\n      throw new Error();\r\n    }\r\n    const complex = this._complex;\r\n    let timeStep = dataView.getUint32(offset, true);\r\n    let iName = 0;\r\n    while (timeStep > 1000 && iName < cSecNames.length - 1) {\r\n      timeStep /= 1000;\r\n      ++iName;\r\n    }\r\n\r\n    this._timeStep = `${timeStep.toString()} ${cSecNames[iName]}`;\r\n    offset += 4;\r\n    const secondary = [];\r\n    const posData = new Float32Array(chunkedFramesCount * atomsCount * 3);\r\n    let coordIdx = 0;\r\n    const secondaryArr = new Int8Array(atomsCount);\r\n    for (let j = 0; j < chunkedFramesCount; ++j) {\r\n      for (let i = 0; i < atomsCount; ++i) {\r\n        const hiWord = dataView.getUint32(offset, true);\r\n        offset += 4;\r\n        const loWord = dataView.getUint32(offset, true);\r\n        offset += 4;\r\n        const str = (loWord & cStrMask) >>> cStrShift;\r\n        const x = fromUInt20ToInt20(((loWord & cFirstMask) >>> cFirstShift) >> 0);\r\n        const y = fromUInt20ToInt20((((loWord & cSecMask1) << cSecShift1)\r\n          | ((hiWord & cSecMask2) >>> cSecShift2)) >> 0);\r\n        const z = fromUInt20ToInt20((hiWord & cThirdMask) >> 0);\r\n        secondaryArr[i] = 0;\r\n        if (str > 0 && str < 4) {\r\n          secondaryArr[i] = cHelixIdx;\r\n        } else if (str === 4) {\r\n          secondaryArr[i] = cSheetIdx;\r\n        }\r\n        posData[coordIdx++] = x / 100;\r\n        posData[coordIdx++] = y / 100;\r\n        posData[coordIdx++] = z / 100;\r\n      }\r\n      secondary.push(_createSecondary(secondaryArr, complex));\r\n    }\r\n    this._secondaryData = secondary;\r\n    this._data = posData;\r\n  }\r\n\r\n  nextFrame() {\r\n    this.setFrame((this._currFrame + 1) % this._framesCount);\r\n  }\r\n\r\n  needsColorUpdate(colorer) {\r\n    return colorer instanceof SecondaryStructureColorer;\r\n  }\r\n\r\n  getAtomColor(colorer, atom) {\r\n    return colorer.getResidueColor(this._residues[atom.residue._index], this._complex);\r\n  }\r\n\r\n  getResidueColor(colorer, residue) {\r\n    return colorer.getResidueColor(this._residues[residue._index], this._complex);\r\n  }\r\n\r\n  _updateSecondary() {\r\n    let i;\r\n    const myResidues = this._residues;\r\n    let n = myResidues.length;\r\n    for (i = 0; i < n; ++i) {\r\n      myResidues[i]._secondary = null;\r\n    }\r\n    const sec = this._secondaryData[this._currFrame - this._framesRange.start];\r\n    for (i = 0, n = sec.length; i < n; ++i) {\r\n      const oldSec = sec[i];\r\n      const { start, end } = oldSec;\r\n      const nSec = {\r\n        _start: myResidues[start],\r\n        _end: myResidues[end],\r\n        type: oldSec.type,\r\n        generic: oldSec.generic,\r\n      };\r\n      for (let j = start; j <= end; ++j) {\r\n        myResidues[j]._secondary = nSec;\r\n      }\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    const compRes = this._complex._residues;\r\n    const n = compRes.length;\r\n    this._residues = new Array(n);\r\n    const myResidues = this._residues;\r\n    const getSec = function () {\r\n      return this._secondary;\r\n    };\r\n    for (let i = 0; i < n; ++i) {\r\n      myResidues[i] = {\r\n        _type: compRes[i]._type,\r\n        _isValid: compRes[i]._isValid,\r\n        _controlPoint: null,\r\n        _wingVector: null,\r\n        _secondary: null,\r\n        getSecondary: getSec,\r\n      };\r\n    }\r\n  }\r\n\r\n  setFrame(frameIdx) {\r\n    this.frameIsReady = false;\r\n    if (frameIdx >= this._framesRange.start && frameIdx <= this._framesRange.end) {\r\n      this._currFrame = frameIdx;\r\n      this._cachedResidues = false;\r\n      this._updateSecondary();\r\n      this.frameIsReady = true;\r\n    } else {\r\n      this._frameRequest = frameIdx;\r\n      if (!this._buffer) {\r\n        this._prepareBuffer(frameIdx);\r\n      } else {\r\n        const self = this;\r\n        switch (this._buffer.state) {\r\n          case 'none':\r\n            this._prepareBuffer(frameIdx);\r\n            break;\r\n          case 'ready':\r\n            self._parseBuffer();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  disableEvents() {\r\n    this._callbacks = null;\r\n  }\r\n\r\n  /**\r\n   * Returns link to atom pos vector, clone it if needed\r\n   */\r\n\r\n  static _vec = new THREE.Vector3();\r\n\r\n  getAtomPos(atomIdx) {\r\n    const vec = FrameInfo._vec;\r\n    const self = this;\r\n    const data = self._data;\r\n    const idx = (self._atomsCount * (self._currFrame - self._framesRange.start) + atomIdx) * 3;\r\n    vec.set(data[idx], data[idx + 1], data[idx + 2]);\r\n    return vec;\r\n  }\r\n\r\n\r\n  getResidues() {\r\n    if (this._cachedResidues) {\r\n      return this._residues;\r\n    }\r\n    this._complex.updateToFrame(this);\r\n    return this._residues;\r\n  }\r\n}\r\nexport default FrameInfo;\r\n","import _ from 'lodash';\r\nimport settings from '../../settings';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\n\r\n/**\r\n * Create new scene object.\r\n *\r\n * @param {array=} params - Object required params.\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the colorer after its creation.\r\n *\r\n * @exports SceneObject\r\n * @this SceneObject\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all scene objects that are not reps.\r\n */\r\nclass SceneObject {\r\n  constructor(params, opts) {\r\n    if (this.constructor === SceneObject) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Object's options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.params = params;\r\n    this.opts = _.merge(utils.deriveDeep(settings.now.objects[this.type], true), opts);\r\n    this.needsRebuild = false;\r\n    this._mesh = null;\r\n    this.id = null;\r\n  }\r\n\r\n  /**\r\n   * Get object identification, probably with options.\r\n   *  @returns {Object} field type contains type information, params - object's formal parameters,\r\n   * opts - changed options\r\n   * Options are returned if they were changed during or after object creation.\r\n   */\r\n  identify() {\r\n    const result = {\r\n      type: this.type,\r\n      params: this.params,\r\n    };\r\n    const diff = utils.objectsDiff(this.opts, settings.now.modes[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      result.opts = diff;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  toString() {\r\n    const paramsStr = `o=${this.type},${this.params.join(',')}`;\r\n    const optsStr = utils.compareOptionsWithDefaults(this.opts, settings.defaults.objects[this.type]);\r\n    return paramsStr + optsStr;\r\n  }\r\n\r\n  getGeometry() {\r\n    return this._mesh;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._mesh) {\r\n      gfxutils.destroyObject(this._mesh);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Scene object identifier.\r\n * @type {string}\r\n */\r\nSceneObject.prototype.type = '__';\r\n\r\nexport default SceneObject;\r\n","import * as THREE from 'three';\r\nimport SceneObject from './SceneObject';\r\nimport gfxutils from '../gfxutils';\r\nimport UberMaterial from '../shaders/UberMaterial';\r\nimport meshes from '../meshes/meshes';\r\nimport settings from '../../settings';\r\n\r\nclass LinesObj extends SceneObject {\r\n  constructor(params, opts) {\r\n    super(params, opts);\r\n    if (params.length < 2) {\r\n      throw new Error('Wrong number of argumets on line object creation!');\r\n    }\r\n    [this._id1, this._id2] = params;\r\n  }\r\n\r\n  _getAtomFromName(complex, atomId) {\r\n    const err = ' - Wrong atom format it must be \\'#CHAIN_NAME.#RESIDUE_NUMBER.#ATOM_NAME\\' (e.g. \\'A.38.CO1\\')';\r\n    const atom1 = complex.getAtomByFullname(atomId);\r\n    if (!atom1) {\r\n      throw new Error(atomId + err);\r\n    }\r\n    return atom1;\r\n  }\r\n\r\n  build(complex) {\r\n    const geom = new THREE.Geometry();\r\n    this._atom1 = this._getAtomFromName(complex, this._id1);\r\n    this._atom2 = this._getAtomFromName(complex, this._id2);\r\n\r\n    geom.vertices[0] = this._atom1.position.clone();\r\n    geom.vertices[1] = this._atom2.position.clone();\r\n    geom.dynamic = true;\r\n    geom.computeBoundingBox();\r\n\r\n    this._line = new meshes.Line(geom, new UberMaterial({\r\n      lights: false,\r\n      overrideColor: true,\r\n      dashedLine: true,\r\n      fogTransparent: settings.now.bg.transparent,\r\n    }));\r\n    this._line.computeLineDistances();\r\n    this._line.material.setUberOptions({\r\n      fixedColor: new THREE.Color(this.opts.color),\r\n      dashedLineSize: this.opts.dashSize,\r\n      dashedLinePeriod: this.opts.dashSize + this.opts.gapSize,\r\n    });\r\n    this._line.material.updateUniforms();\r\n\r\n    this._line.raycast = function (_raycaster, _intersects) {};\r\n    this._mesh = this._line;\r\n    const transforms = complex.getTransforms();\r\n    if (transforms.length > 0) {\r\n      this._mesh = new THREE.Group();\r\n      this._mesh.add(this._line);\r\n      gfxutils.applyTransformsToMeshes(this._mesh, transforms);\r\n    }\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    if (!this._atom1 || !this._atom2 || !this._line) {\r\n      return;\r\n    }\r\n\r\n    const geo = this._line.geometry;\r\n    geo.vertices[0].copy(frameData.getAtomPos(this._atom1.index));\r\n    geo.vertices[1].copy(frameData.getAtomPos(this._atom2.index));\r\n    this._line.computeLineDistances();\r\n    geo.computeBoundingSphere();\r\n\r\n    geo.verticesNeedUpdate = true;\r\n  }\r\n}\r\n\r\nLinesObj.prototype.constructor = LinesObj;\r\nLinesObj.prototype.type = 'line';\r\n\r\nexport default LinesObj;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './Outline.frag';\r\n\r\nclass OutlineMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    // add depth outline\r\n    super(params);\r\n\r\n    const settings = {\r\n      uniforms: {\r\n        srcTex: { type: 't', value: null },\r\n        srcDepthTex: { type: 't', value: null },\r\n        srcTexSize: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n        color: { type: 'v3', value: null },\r\n        threshold: { type: 'f', value: null },\r\n        opacity: { type: 'f', value: 1.0 },\r\n        thickness: { type: 'v2', value: new THREE.Vector2(1, 1) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: true,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    };\r\n\r\n    this.setValues(settings);\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.depth = source.depth;\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n    const defines = {};\r\n\r\n    if (this.depth) {\r\n      defines.DEPTH_OUTLINE = 1;\r\n    }\r\n\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nOutlineMaterial.prototype.depth = false;\r\n\r\nexport default OutlineMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './FXAA.frag';\r\n\r\nclass FXAAMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        srcTex: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        bgColor: { type: 'c', value: new THREE.Color(0xffffff) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n\r\n    this.setValues(params);\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.depth = source.depth;\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n\r\n    const defines = {};\r\n\r\n    if (this.bgTransparent) {\r\n      defines.BG_TRANSPARENT = 1;\r\n    }\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nFXAAMaterial.prototype.bgTransparent = false;\r\n\r\nexport default FXAAMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AO.frag';\r\nimport noise from '../noiseTexture';\r\n\r\nconst _samplesKernel = [\r\n  // hemisphere samples adopted to sphere\r\n  new THREE.Vector3(0.295184, 0.077723, 0.068429),\r\n  new THREE.Vector3(-0.271976, -0.365221, 0.838363),\r\n  new THREE.Vector3(0.547713, 0.467576, 0.488515),\r\n  new THREE.Vector3(0.662808, -0.031733, 0.584758),\r\n  new THREE.Vector3(-0.025717, 0.218955, 0.657094),\r\n  new THREE.Vector3(-0.310153, -0.365223, 0.370701),\r\n  new THREE.Vector3(-0.101407, -0.006313, 0.747665),\r\n  new THREE.Vector3(-0.769138, 0.360399, 0.086847),\r\n  new THREE.Vector3(-0.271988, -0.275140, 0.905353),\r\n  new THREE.Vector3(0.096740, -0.566901, 0.700151),\r\n  new THREE.Vector3(0.562872, -0.735136, 0.094647),\r\n  new THREE.Vector3(0.379877, 0.359278, 0.190061),\r\n  new THREE.Vector3(0.519064, -0.023055, 0.405068),\r\n  new THREE.Vector3(-0.301036, 0.114696, 0.088885),\r\n  new THREE.Vector3(-0.282922, 0.598305, 0.487214),\r\n  new THREE.Vector3(-0.181859, 0.251670, 0.679702),\r\n  new THREE.Vector3(-0.191463, -0.635818, 0.512919),\r\n  new THREE.Vector3(-0.293655, 0.427423, 0.078921),\r\n  new THREE.Vector3(-0.267983, 0.680534, 0.132880),\r\n  new THREE.Vector3(0.139611, 0.319637, 0.477439),\r\n  new THREE.Vector3(-0.352086, 0.311040, 0.653913),\r\n  new THREE.Vector3(0.321032, 0.805279, 0.487345),\r\n  new THREE.Vector3(0.073516, 0.820734, 0.414183),\r\n  new THREE.Vector3(-0.155324, 0.589983, 0.411460),\r\n  new THREE.Vector3(0.335976, 0.170782, 0.527627),\r\n  new THREE.Vector3(0.463460, -0.355658, 0.167689),\r\n  new THREE.Vector3(0.222654, 0.596550, 0.769406),\r\n  new THREE.Vector3(0.922138, -0.042070, 0.147555),\r\n  new THREE.Vector3(-0.727050, -0.329192, 0.369826),\r\n  new THREE.Vector3(-0.090731, 0.533820, 0.463767),\r\n  new THREE.Vector3(-0.323457, -0.876559, 0.238524),\r\n  new THREE.Vector3(-0.663277, -0.372384, 0.342856),\r\n];\r\n\r\nclass AOMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        noiseTexture: { type: 't', value: noise.noiseTexture },\r\n        noiseTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / noise.noiseWidth, 1.0 / noise.noiseHeight) },\r\n        diffuseTexture: { type: 't', value: null },\r\n        normalTexture: { type: 't', value: null },\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        camNearFar: { type: 'v2', value: new THREE.Vector2(1.0, 10.0) },\r\n        projMatrix: { type: 'mat4', value: new THREE.Matrix4() },\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        samplesKernel: { type: 'v3v', value: _samplesKernel },\r\n        kernelRadius: { type: 'f', value: 1.0 },\r\n        depthThreshold: { type: 'f', value: 1.0 },\r\n        factor: { type: 'f', value: 1.0 },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n  }\r\n}\r\n\r\nexport default AOMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AOHorBlur.frag';\r\n\r\nconst _kernelOffsets = [-2.0, -1.0, 0.0, 1.0, 2.0];\r\n\r\nclass AOHorBlurMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        aoMap: { type: 't', value: null },\r\n        samplesOffsets: { type: 'fv1', value: _kernelOffsets },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n  }\r\n}\r\n\r\nexport default AOHorBlurMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AOVertBlurWithBlend.frag';\r\n\r\nconst _kernelOffsets = [-2.0, -1.0, 0.0, 1.0, 2.0];\r\n\r\nclass AOVertBlurWithBlendMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        diffuseTexture: { type: 't', value: null },\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        aoMap: { type: 't', value: null },\r\n        samplesOffsets: { type: 'fv1', value: _kernelOffsets },\r\n        projMatrix: { type: 'mat4', value: new THREE.Matrix4() },\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        fogNearFar: { type: 'v2', value: new THREE.Vector2(100.0, 100.0) },\r\n        fogColor: { type: 'v4', value: new THREE.Vector4(0.0, 0.5, 0.0, 1.0) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n\r\n    this.setValues(params);\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n\r\n    const defines = {};\r\n\r\n    if (this.useFog) {\r\n      defines.USE_FOG = 1;\r\n    }\r\n    if (this.fogTransparent) {\r\n      defines.FOG_TRANSPARENT = 1;\r\n    }\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nAOVertBlurWithBlendMaterial.prototype.useFog = true;\r\nAOVertBlurWithBlendMaterial.prototype.fogTransparent = false;\r\n\r\nexport default AOVertBlurWithBlendMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './Anaglyph.frag';\r\n\r\nclass AnaglyphMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n    const settings = {\r\n      uniforms: {\r\n        srcL: { type: 't', value: null },\r\n        srcR: { type: 't', value: null },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    };\r\n    this.setValues(settings);\r\n  }\r\n}\r\n\r\nexport default AnaglyphMaterial;\r\n","import * as THREE from 'three';\r\nimport settings from '../settings';\r\n\r\nclass View {\r\n  constructor() {\r\n    this.position = new THREE.Vector3(0, 0, 0);\r\n    this.scale = 1;\r\n    this.orientation = new THREE.Quaternion(0, 0, 0, 1);\r\n  }\r\n\r\n  set(position, scale, orientation) {\r\n    this.position = position;\r\n    this.scale = scale;\r\n    this.orientation = orientation;\r\n  }\r\n}\r\n\r\nconst _transitionTime = 1.5; // in seconds\r\n\r\nexport default class ViewInterpolator {\r\n  setup(startView, endView) {\r\n    this._startTime = undefined;\r\n    this._endTime = undefined;\r\n    this._isPaused = false;\r\n\r\n    this._srcView = startView;\r\n    this._dstView = endView;\r\n    this._isMoving = false;\r\n  }\r\n\r\n  isMoving() {\r\n    return this._isMoving;\r\n  }\r\n\r\n  wasStarted() {\r\n    return typeof this._startTime !== 'undefined' && typeof this._endTime !== 'undefined';\r\n  }\r\n\r\n  start() {\r\n    this._startTime = Date.now();\r\n    const transTime = settings.now.interpolateViews ? _transitionTime * 1000 : 0;\r\n    this._endTime = this._startTime + transTime;\r\n    this._isMoving = true;\r\n  }\r\n\r\n  getCurrentView() {\r\n    if (typeof this._srcView === 'undefined' || typeof this._dstView === 'undefined'\r\n      || !this._isMoving || !this.wasStarted()) {\r\n      return { success: false };\r\n    }\r\n\r\n    let view = this.createView();\r\n    const time = Date.now();\r\n    if (time > this._endTime) {\r\n      view = this._dstView;\r\n      this.reset();\r\n      return { success: true, view };\r\n    }\r\n\r\n    const factor = (time - this._startTime) / (this._endTime - this._startTime);\r\n    view.position.copy(this._srcView.position);\r\n    view.position.lerp(this._dstView.position, factor);\r\n    view.scale = (1 - factor) * this._srcView.scale + factor * this._dstView.scale;\r\n    view.orientation.copy(this._srcView.orientation);\r\n    view.orientation.slerp(this._dstView.orientation, factor);\r\n    return { success: true, view };\r\n  }\r\n\r\n  reset() {\r\n    this._startTime = this._endTime = 0;\r\n    this._isMoving = false;\r\n  }\r\n\r\n  pause() {\r\n    if (!this._isPaused) {\r\n      this.setup(this.getCurrentView().view, this._dstView);\r\n      this._isPaused = true;\r\n    }\r\n  }\r\n\r\n  resume() {\r\n    this._isPaused = false;\r\n  }\r\n\r\n  createView() {\r\n    return new View();\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport makeContextDependent from './makeContextDependent';\r\n\r\nconst MAX_COOKIE_LEN = 4000;\r\nconst COUNT_SUFFIX = 'Cnt';\r\n\r\nfunction _chunkString(string, chunkLen) {\r\n  const l = string.length;\r\n  const chunks = [];\r\n  for (let c = 0, lc = 0; lc < l; c++, lc += chunkLen) {\r\n    chunks[c] = string.slice(lc, lc + chunkLen);\r\n  }\r\n  return chunks;\r\n}\r\n\r\n/**\r\n * Create new context dependent Cookie holder object.\r\n * @param context\r\n * @param {Object} opts - options\r\n * @param {string} opts.path - cookie path\r\n * @constructor\r\n */\r\nfunction Cookies(context, opts) {\r\n  this.context = context;\r\n  this._opts = _.merge({\r\n    path: '/',\r\n  }, opts);\r\n}\r\n\r\nmakeContextDependent(Cookies.prototype);\r\n\r\n/**\r\n * Remove cookie by the name.\r\n * @param key\r\n */\r\nCookies.prototype.removeCookie = function (key) {\r\n  const cntKey = this._toCount(key);\r\n  let cntVal = this._getSimpleCookie(cntKey);\r\n  if (!cntVal) {\r\n    this._removeSimpleCookie(key);\r\n    return;\r\n  }\r\n  this._removeSimpleCookie(cntKey);\r\n  cntVal = parseInt(cntVal, 10);\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    this._removeSimpleCookie(key + i);\r\n  }\r\n};\r\n\r\n/**\r\n * Set new cookie value. Automatically splits\r\n * values that are too large into multiple cookies.\r\n * @param key\r\n * @param value\r\n */\r\nCookies.prototype.setCookie = function (key, value) {\r\n  this.removeCookie(key);\r\n  value = encodeURIComponent(value);\r\n  const values = _chunkString(value, MAX_COOKIE_LEN - key.length - 1);\r\n  const cntVal = values.length;\r\n  if (cntVal === 1) {\r\n    this._setSimpleCookie(key, value);\r\n    return;\r\n  }\r\n  const cntKey = this._toCount(key);\r\n  this._setSimpleCookie(cntKey, cntVal.toString());\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    this._setSimpleCookie(key + i, values[i]);\r\n  }\r\n};\r\n\r\n/**\r\n * Obtain the value of a compound cookie.\r\n * @param key\r\n */\r\nCookies.prototype.getCookie = function (key) {\r\n  const cntKey = this._toCount(key);\r\n  let cntVal = this._getSimpleCookie(cntKey);\r\n  if (!cntVal) {\r\n    return this._getSimpleCookie(key);\r\n  }\r\n  cntVal = parseInt(cntVal, 10);\r\n  const value = [];\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    value[i] = this._getSimpleCookie(key + i);\r\n  }\r\n  return value.join('');\r\n};\r\n\r\nCookies.prototype._toCount = function (key) {\r\n  return key + COUNT_SUFFIX;\r\n};\r\n\r\nCookies.prototype._removeSimpleCookie = function (key) {\r\n  document.cookie = `${key}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\r\n};\r\n\r\nCookies.prototype._getExpirationDate = function () {\r\n  const today = new Date();\r\n  const EXP_PERIOD_YEARS = 10;\r\n  today.setFullYear(today.getFullYear() + EXP_PERIOD_YEARS);\r\n  return today;\r\n};\r\n\r\nCookies.prototype._setSimpleCookie = function (key, value) {\r\n  document.cookie = `${key}=${value\r\n  };expires=${this._getExpirationDate().toUTCString()\r\n  };path=${this._opts.path}`;\r\n};\r\n\r\nCookies.prototype._getSimpleCookie = function (key) {\r\n  const matches = document.cookie.match(new RegExp(`(?:^|; )${key}=([^;]*)`));\r\n  return matches ? decodeURIComponent(matches[1]) : '';\r\n};\r\n\r\nCookies.prototype._exists = function (key) {\r\n  return document.cookie.match(new RegExp(`(?:^|; )${key}=([^;]*)`));\r\n};\r\n\r\nexport default Cookies;\r\n","/*\r\n * Toggling WebVR is done through button.click because of limitations on calling requestPresent in webVR:\r\n * VRDisplay::requestPresent should be called from user gesture:\r\n * https://developer.mozilla.org/en-US/docs/Web/API/VRDisplay/requestPresent\r\n */\r\nexport default function (webVRPoC) {\r\n  function showEnterVR(button) {\r\n    button.style.display = '';\r\n    button.style.cursor = 'pointer';\r\n    button.style.left = 'calc(50% - 50px)';\r\n    button.style.width = '100px';\r\n\r\n    button.textContent = 'ENTER VR';\r\n\r\n    let currentSession = null;\r\n\r\n    function onSessionEnded(/* event */) {\r\n      currentSession.removeEventListener('end', onSessionEnded);\r\n      button.textContent = 'ENTER VR';\r\n      currentSession = null;\r\n    }\r\n\r\n    function onSessionStarted(session) {\r\n      session.addEventListener('end', onSessionEnded);\r\n      webVRPoC._gfx.renderer.xr.setReferenceSpaceType('local');\r\n      webVRPoC._gfx.renderer.xr.setSession(session);\r\n      button.textContent = 'EXIT VR';\r\n      currentSession = session;\r\n    }\r\n\r\n    button.onmouseenter = function () { button.style.opacity = '1.0'; };\r\n    button.onmouseleave = function () { button.style.opacity = '0.5'; };\r\n\r\n    button.onclick = function () {\r\n      if (currentSession === null) {\r\n        // WebXR's requestReferenceSpace only works if the corresponding feature\r\n        // was requested at session creation time. For simplicity, just ask for\r\n        // the interesting ones as optional features, but be aware that the\r\n        // requestReferenceSpace call will fail if it turns out to be unavailable.\r\n        // ('local' is always available for immersive sessions and doesn't need to\r\n        // be requested separately.)\r\n\r\n        const sessionInit = { optionalFeatures: ['local-floor', 'bounded-floor'] };\r\n        navigator.xr.requestSession('immersive-vr', sessionInit).then(onSessionStarted);\r\n        webVRPoC.moveSceneBehindHeadset();\r\n      } else {\r\n        currentSession.end();\r\n      }\r\n    };\r\n  }\r\n\r\n  function showWebXRNotFound(button) {\r\n    button.style.display = '';\r\n    button.style.cursor = 'auto';\r\n    button.style.left = 'calc(50% - 75px)';\r\n    button.style.width = '150px';\r\n    button.textContent = 'VR NOT FOUND';\r\n    button.onmouseenter = null;\r\n    button.onmouseleave = null;\r\n    button.onclick = null;\r\n  }\r\n\r\n  function stylizeElement(element) {\r\n    element.style.position = 'absolute';\r\n    element.style.bottom = '20px';\r\n    element.style.padding = '12px 6px';\r\n    element.style.border = '1px solid #fff';\r\n    element.style.borderRadius = '4px';\r\n    element.style.background = 'transparent';\r\n    element.style.color = '#fff';\r\n    element.style.font = 'normal 13px sans-serif';\r\n    element.style.textAlign = 'center';\r\n    element.style.opacity = '0.5';\r\n    element.style.outline = 'none';\r\n    element.style.zIndex = '999';\r\n  }\r\n\r\n  if ('xr' in navigator) {\r\n    const button = document.createElement('button');\r\n    button.style.display = 'none';\r\n    stylizeElement(button);\r\n    navigator.xr.isSessionSupported('immersive-vr').then((supported) => (\r\n      supported ? showEnterVR(button) : showWebXRNotFound(button)\r\n    ));\r\n    return button;\r\n  }\r\n  const message = document.createElement('a');\r\n  message.href = 'https://webvr.info';\r\n  message.innerHTML = 'WEBXR NOT SUPPORTED';\r\n  message.style.left = 'calc(50% - 90px)';\r\n  message.style.width = '180px';\r\n  message.style.textDecoration = 'none';\r\n  stylizeElement(message);\r\n  return message;\r\n}\r\n","import * as THREE from 'three';\r\nimport createWebVRButton from './createWebVRButton';\r\nimport gfxutils from '../gfxutils';\r\nimport logger from '../../utils/logger';\r\nimport settings from '../../settings';\r\nimport UberMaterial from '../shaders/UberMaterial';\r\n\r\nexport default class WebVRPoC {\r\n  constructor(onToggle) {\r\n    this._mainCamera = new THREE.PerspectiveCamera();\r\n    this._button = null;\r\n    this._onToggle = onToggle;\r\n\r\n    this._molContainer = new gfxutils.RCGroup();\r\n    this._user = new gfxutils.RCGroup();\r\n    this._scalingPivot = new THREE.Object3D();\r\n    this._user.add(this._scalingPivot);\r\n\r\n    this._controller1 = null;\r\n    this._controller2 = null;\r\n    this._pressedGripsCounter = 0;\r\n    this._distance = 0;\r\n\r\n    this._gfx = null;\r\n  }\r\n\r\n  startScalingByControllers() {\r\n    // reset scale\r\n    this._distance = this._controller1.position.distanceTo(this._controller2.position);\r\n    gfxutils.getMiddlePoint(this._controller1.position, this._controller2.position, this._scalingPivot.position);\r\n    this._scalingPivot.scale.set(1, 1, 1);\r\n    this._scalingPivot.updateMatrix();\r\n    this._scalingPivot.updateMatrixWorld();\r\n    // link molecule to pivot\r\n    this._scalingPivot.addSavingWorldTransform(this._molContainer);\r\n  }\r\n\r\n  stopScalingByControllers() {\r\n    this._gfx.scene.addSavingWorldTransform(this._molContainer);\r\n  }\r\n\r\n  handleGripsDown(event) {\r\n    this._pressedGripsCounter++;\r\n    if (this._pressedGripsCounter === 2) {\r\n      this.startScalingByControllers();\r\n    } else if (this._pressedGripsCounter === 1) {\r\n      event.target.addSavingWorldTransform(this._molContainer);\r\n    }\r\n  }\r\n\r\n  handleGripsUp(event) {\r\n    this._pressedGripsCounter--;\r\n    if (this._pressedGripsCounter === 1) {\r\n      this.stopScalingByControllers();\r\n      // reattach molecule to other controller\r\n      const anotherController = event.target === this._controller1 ? this._controller2 : this._controller1;\r\n      anotherController.addSavingWorldTransform(this._molContainer);\r\n    } else if (this._pressedGripsCounter === 0) {\r\n      this._gfx.scene.addSavingWorldTransform(this._molContainer);\r\n    }\r\n  }\r\n\r\n  enable(gfx) {\r\n    if (!gfx) {\r\n      logger.warn('WebVR couldn\\'t be enabled, because gfx is not defined');\r\n      return;\r\n    }\r\n    this._gfx = gfx;\r\n    const { renderer, camera } = gfx;\r\n    if (!renderer) {\r\n      throw new Error('No renderer is available to toggle WebVR');\r\n    }\r\n    if (!camera) {\r\n      throw new Error('No camera is available to toggle WebVR');\r\n    }\r\n\r\n    // enable xr in renderer\r\n    renderer.xr.enabled = true;\r\n    // add button for turning vr mode\r\n    if (!this._button) {\r\n      this._button = createWebVRButton(this);\r\n      document.body.appendChild(this._button);\r\n    } else {\r\n      this._button.style.display = 'block';\r\n    }\r\n    // store fog setting\r\n    this._mainFog = settings.now.fog;\r\n    settings.set('fog', false);\r\n\r\n    this._plugVRNodesIntoScene(gfx, renderer);\r\n    this._setControllersListeners();\r\n\r\n    // make some Miew job\r\n    if (this._onToggle) {\r\n      this._onToggle(true);\r\n    }\r\n  }\r\n\r\n  _plugVRNodesIntoScene(gfx, renderer) {\r\n    // store common scene camera\r\n    this._mainCamera.copy(gfx.camera);\r\n    // add hierarchical structure for webVR into scene\r\n    gfx.scene.add(this._user);\r\n    // turn on webvr transformation\r\n    gfx.scene.add(this._molContainer);\r\n    this._molContainer.add(gfx.root);\r\n\r\n    this._controller1 = renderer.xr.getController(0);\r\n    this._controller2 = renderer.xr.getController(1);\r\n    const mesh = this._createControllerMesh();\r\n    this._controller1.add(mesh);\r\n    this._controller2.add(mesh.clone());\r\n    this._user.add(this._controller1);\r\n    this._user.add(this._controller2);\r\n  }\r\n\r\n  _setControllersListeners() {\r\n    this._controller1.addEventListener('selectstart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller1.addEventListener('selectend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n    this._controller2.addEventListener('selectstart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller2.addEventListener('selectend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n\r\n    this._controller1.addEventListener('squeezestart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller1.addEventListener('squeezeend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n    this._controller2.addEventListener('squeezestart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller2.addEventListener('squeezeend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n  }\r\n\r\n  disable() {\r\n    if (!this._gfx) {\r\n      return;\r\n    }\r\n    const { renderer, camera } = this._gfx;\r\n    if (!renderer) {\r\n      throw new Error('No renderer is available to toggle WebVR');\r\n    }\r\n\r\n    // nullify webxr callback for animation frame\r\n    renderer.setAnimationLoop(null);\r\n    const session = renderer.xr.getSession();\r\n    if (session) {\r\n      session.end();\r\n    }\r\n    renderer.xr.enabled = false;\r\n    // remove button of VR entering\r\n    if (this._button) {\r\n      this._button.style.display = 'none';\r\n    }\r\n    // restore fog param\r\n    settings.set('fog', this._mainFog);\r\n\r\n    this._unplugVRNodesFromScene(camera);\r\n\r\n    // make some Miew job\r\n    if (this._onToggle) {\r\n      this._onToggle(false);\r\n    }\r\n  }\r\n\r\n  _unplugVRNodesFromScene(camera) {\r\n    // restore common camera\r\n    if (this._mainCamera && camera) {\r\n      camera.copy(this._mainCamera);\r\n    }\r\n    // turn off webvr transformation\r\n    const root = this._molContainer.children[0];\r\n    if (root) {\r\n      this._gfx.scene.add(root);\r\n    }\r\n    this._molContainer.parent.remove(this._molContainer);\r\n    if (this._user) {\r\n      this._gfx.scene.remove(this._user);\r\n    }\r\n    // free scene nodes\r\n    this._molContainer = null;\r\n    this._user = null;\r\n    this._scalingPivot = null;\r\n    this._user = null;\r\n    this._controller1 = null;\r\n    this._controller2 = null;\r\n  }\r\n\r\n  _createControllerMesh() {\r\n    // visualize controllers with cylinders\r\n    const geometry = new THREE.CylinderGeometry(0.04, 0.04, 0.3);\r\n    const material = new UberMaterial({ lights: false, overrideColor: true });\r\n    material.setUberOptions({ fixedColor: new THREE.Color(0x4444ff) });\r\n    material.updateUniforms();\r\n    const cylinder = new THREE.Mesh(geometry, material);\r\n    cylinder.rotateX(-Math.PI / 2);\r\n    return cylinder;\r\n  }\r\n\r\n  updateMoleculeScale() {\r\n    if (!this._controller1 || !this._controller2) {\r\n      return;\r\n    }\r\n\r\n    const self = this;\r\n    // update molecule scaling by controllers\r\n    if (self._pressedGripsCounter === 2) {\r\n      // recalc scaling pivot\r\n      gfxutils.getMiddlePoint(self._controller1.position, self._controller2.position, self._scalingPivot.position);\r\n      // recalc scaler\r\n      const dist = self._controller1.position.distanceTo(self._controller2.position);\r\n      const scaler = dist / self._distance;\r\n      self._scalingPivot.scale.multiplyScalar(scaler);\r\n      // save cur distance for next frame\r\n      self._distance = dist;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reposition molecule right before the camera.\r\n   * @note The proper way is to initiate headset in the place of common Miew's camera.\r\n   * But threejs limitations on setting new XRReferenceSpace enforce the molecule repositioning\r\n   * Hope, something will change.\r\n   */\r\n  moveSceneBehindHeadset() {\r\n    const gfx = this._gfx;\r\n    const { camera } = gfx;\r\n\r\n    // set container position in camera space\r\n    const container = this._molContainer;\r\n    container.matrix.identity();\r\n    container.position.set(0, 0, -4.0);\r\n    container.updateMatrix();\r\n\r\n    // update container world matrix\r\n    container.matrixWorld.multiplyMatrices(camera.matrixWorld, container.matrix);\r\n    // readd to scene\r\n    gfx.scene.addSavingWorldTransform(container);\r\n    if (this._onToggle) {\r\n      this._onToggle(true);\r\n    }\r\n  }\r\n\r\n  getCanvas() {\r\n    const gfx = this._gfx;\r\n    return (gfx && gfx.renderer) ? gfx.renderer.domElement : null;\r\n  }\r\n}\r\n","/* global PACKAGE_VERSION:false */\r\nimport _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport { Spinner } from 'spin.js';\r\nimport Stats from './gfx/Stats';\r\nimport utils from './utils';\r\nimport JobHandle from './utils/JobHandle';\r\nimport options from './options';\r\nimport settings from './settings';\r\nimport chem from './chem';\r\nimport Visual from './Visual';\r\nimport ComplexVisual from './ComplexVisual';\r\nimport Complex from './chem/Complex';\r\nimport VolumeVisual from './VolumeVisual';\r\nimport io from './io/io';\r\nimport modes from './gfx/modes';\r\nimport colorers from './gfx/colorers';\r\nimport palettes from './gfx/palettes';\r\nimport materials from './gfx/materials';\r\nimport Representation from './gfx/Representation';\r\nimport CSS2DRenderer from './gfx/CSS2DRenderer';\r\nimport ObjectControls from './ui/ObjectControls';\r\nimport Picker from './ui/Picker';\r\nimport Axes from './gfx/Axes';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport FrameInfo from './gfx/FrameInfo';\r\nimport meshes from './gfx/meshes/meshes';\r\nimport LinesObject from './gfx/objects/LinesObj';\r\nimport UberMaterial from './gfx/shaders/UberMaterial';\r\nimport OutlineMaterial from './gfx/shaders/OutlineMaterial';\r\nimport FXAAMaterial from './gfx/shaders/FXAAMaterial';\r\nimport AOMaterial from './gfx/shaders/AOMaterial';\r\nimport AOHorBlurMaterial from './gfx/shaders/AOHorBlurMaterial';\r\nimport AOVertBlurWithBlendMaterial from './gfx/shaders/AOVertBlurWithBlendMaterial';\r\nimport AnaglyphMaterial from './gfx/shaders/AnaglyphMaterial';\r\nimport VolumeMaterial from './gfx/shaders/VolumeMaterial';\r\nimport ViewInterpolator from './gfx/ViewInterpolator';\r\nimport EventDispatcher from './utils/EventDispatcher';\r\nimport logger from './utils/logger';\r\nimport Cookies from './utils/Cookies';\r\nimport capabilities from './gfx/capabilities';\r\nimport WebVRPoC from './gfx/vr/WebVRPoC';\r\nimport vertexScreenQuadShader from './gfx/shaders/ScreenQuad.vert';\r\nimport fragmentScreenQuadFromDistTex from './gfx/shaders/ScreenQuadFromDistortionTex.frag';\r\n\r\nconst {\r\n  selectors,\r\n  Atom,\r\n  Residue,\r\n  Chain,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst EDIT_MODE = { COMPLEX: 0, COMPONENT: 1, FRAGMENT: 2 };\r\n\r\nconst LOADER_NOT_FOUND = 'Could not find suitable loader for this source';\r\nconst PARSER_NOT_FOUND = 'Could not find suitable parser for this source';\r\n\r\nconst { createElement } = utils;\r\n\r\nfunction updateFogRange(fog, center, radius) {\r\n  fog.near = center - radius * settings.now.fogNearFactor;\r\n  fog.far = center + radius * settings.now.fogFarFactor;\r\n}\r\n\r\nfunction removeExtension(fileName) {\r\n  const dot = fileName.lastIndexOf('.');\r\n  if (dot >= 0) {\r\n    fileName = fileName.substr(0, dot);\r\n  }\r\n  return fileName;\r\n}\r\n\r\nfunction hasValidResidues(complex) {\r\n  let hasValidRes = false;\r\n  complex.forEachComponent((component) => {\r\n    component.forEachResidue((residue) => {\r\n      if (residue._isValid) {\r\n        hasValidRes = true;\r\n      }\r\n    });\r\n  });\r\n  return hasValidRes;\r\n}\r\n\r\nfunction reportProgress(log, action, percent) {\r\n  const TOTAL_PERCENT = 100;\r\n  if (percent !== undefined) {\r\n    log.debug(`${action}... ${Math.floor(percent * TOTAL_PERCENT)}%`);\r\n  } else {\r\n    log.debug(`${action}...`);\r\n  }\r\n}\r\n\r\nfunction chooseFogColor() {\r\n  return settings.now.fogColorEnable ? settings.now.fogColor : settings.now.bg.color;\r\n}\r\n\r\n// ////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Main 3D Molecular Viewer class.\r\n *\r\n * @param {object} opts - Viewer options.\r\n * @param {HTMLElement=} opts.container - DOM element that serves as a viewer container.\r\n * @param {object=} opts.settings - An object with properties to override default settings.\r\n * @param {string=} opts.settingsCookie='settings' - The name of the cookie to save current settings to.\r\n * @param {string=} opts.cookiePath='/' - The path option for cookies. Defaults to root.\r\n *\r\n * @exports Miew\r\n * @constructor\r\n */\r\nfunction Miew(opts) {\r\n  EventDispatcher.call(this);\r\n  this._opts = _.merge({\r\n    settingsCookie: 'settings',\r\n    cookiePath: '/',\r\n  }, opts);\r\n  /** @type {?object} */\r\n  this._gfx = null;\r\n  /** @type {ViewInterpolator} */\r\n  this._interpolator = new ViewInterpolator();\r\n  /** @type {HTMLElement} */\r\n  this._container = (opts && opts.container)\r\n    || document.getElementById('miew-container')\r\n    || _.head(document.getElementsByClassName('miew-container'))\r\n    || document.body;\r\n  /** @type {HTMLElement} */\r\n  this._containerRoot = this._container;\r\n\r\n  /** @type {boolean} */\r\n  this._running = false;\r\n  /** @type {boolean} */\r\n  this._halting = false;\r\n  /** @type {boolean} */\r\n  this._building = false;\r\n  /** @type {boolean} */\r\n  this._needRender = true;\r\n  /** @type {boolean} */\r\n  this._hotKeysEnabled = true;\r\n\r\n  /** @type {Settings} */\r\n  this.settings = settings;\r\n  const log = logger;\r\n  log.console = DEBUG;\r\n  log.level = DEBUG ? 'debug' : 'info';\r\n  /**\r\n   * @type {Logger}\r\n   * @example\r\n   * miew.logger.addEventListener('message', function _onLogMessage(evt) {\r\n   *   console.log(evt.message);\r\n   * });\r\n   */\r\n  this.logger = log;\r\n\r\n  this._cookies = new Cookies(this);\r\n  this.restoreSettings();\r\n  if (opts && opts.settings) {\r\n    this.settings.set(opts.settings);\r\n  }\r\n\r\n  /** @type {?Spinner} */\r\n  this._spinner = null;\r\n  /** @type {JobHandle[]} */\r\n  this._loading = [];\r\n  /** @type {?number}\r\n   * @deprecated until Animation system refactoring\r\n   */\r\n  this._animInterval = null;\r\n\r\n  /** @type {object} */\r\n  this._visuals = {};\r\n  /** @type {?string} */\r\n  this._curVisualName = null;\r\n\r\n  /** @type {array} */\r\n  this._objects = [];\r\n\r\n  /** @type {object} */\r\n  this._sourceWindow = null;\r\n\r\n  this.reset();\r\n\r\n  if (this._repr) {\r\n    log.debug(`Selected ${this._repr.mode.name} mode with ${this._repr.colorer.name} colorer.`);\r\n  }\r\n\r\n  const self = this;\r\n  Miew.registeredPlugins.forEach((plugin) => {\r\n    plugin.call(self);\r\n  });\r\n\r\n  this._initOnSettingsChanged();\r\n}\r\n\r\nMiew.prototype = Object.create(EventDispatcher.prototype);\r\nMiew.prototype.constructor = Miew;\r\n\r\nMiew.prototype.getMaxRepresentationCount = function () {\r\n  return ComplexVisual.NUM_REPRESENTATION_BITS;\r\n};\r\n\r\n/**\r\n * Replace viewer container contents with a DOM element.\r\n * @param {HTMLElement} container - parent container.\r\n * @param {HTMLElement} element - DOM element to show.\r\n * @private\r\n */\r\nfunction _setContainerContents(container, element) {\r\n  const parent = container;\r\n  while (parent.firstChild) {\r\n    parent.removeChild(parent.firstChild);\r\n  }\r\n  parent.appendChild(element);\r\n}\r\n\r\n/**\r\n * Update Shadow Camera target position and frustum.\r\n * @private\r\n */\r\nMiew.prototype._updateShadowCamera = (function () {\r\n  const shadowMatrix = new THREE.Matrix4();\r\n  const direction = new THREE.Vector3();\r\n  const OBB = { center: new THREE.Vector3(), halfSize: new THREE.Vector3() };\r\n\r\n  return function () {\r\n    this._gfx.scene.updateMatrixWorld();\r\n    for (let i = 0; i < this._gfx.scene.children.length; i++) {\r\n      if (this._gfx.scene.children[i].type === 'DirectionalLight') {\r\n        const light = this._gfx.scene.children[i];\r\n        shadowMatrix.copy(light.shadow.camera.matrixWorldInverse);\r\n        this.getOBB(shadowMatrix, OBB);\r\n\r\n        direction.subVectors(light.target.position, light.position);\r\n        light.position.subVectors(OBB.center, direction);\r\n        light.target.position.copy(OBB.center);\r\n\r\n        light.shadow.bias = 0.09;\r\n        light.shadow.camera.bottom = -OBB.halfSize.y;\r\n        light.shadow.camera.top = OBB.halfSize.y;\r\n        light.shadow.camera.right = OBB.halfSize.x;\r\n        light.shadow.camera.left = -OBB.halfSize.x;\r\n        light.shadow.camera.near = direction.length() - OBB.halfSize.z;\r\n        light.shadow.camera.far = direction.length() + OBB.halfSize.z;\r\n\r\n        light.shadow.camera.updateProjectionMatrix();\r\n      }\r\n    }\r\n  };\r\n}());\r\n\r\n/**\r\n * Initialize the viewer.\r\n * @returns {boolean} true on success.\r\n * @throws Forwards exception raised during initialization.\r\n * @see Miew#term\r\n */\r\nMiew.prototype.init = function () {\r\n  const container = this._container;\r\n  const elem = utils.createElement('div', { class: 'miew-canvas' });\r\n  _setContainerContents(container, elem);\r\n  this._container = elem;\r\n\r\n  const frag = document.createDocumentFragment();\r\n  frag.appendChild(this._msgMode = createElement(\r\n    'div', { class: 'mode-message overlay' },\r\n    createElement('p', {}, 'COMPONENT EDIT MODE'),\r\n  ));\r\n  frag.appendChild(this._msgAtomInfo = createElement(\r\n    'div', { class: 'atom-info overlay' },\r\n    createElement('p', {}, ''),\r\n  ));\r\n  container.appendChild(frag);\r\n\r\n  if (this._gfx !== null) { // block double init\r\n    return true;\r\n  }\r\n\r\n  const self = this;\r\n  this._showMessage('Viewer is being initialized...');\r\n  try {\r\n    this._initGfx();\r\n\r\n    this._initListeners();\r\n    this._spinner = new Spinner({\r\n      lines: 13,\r\n      length: 28,\r\n      width: 14,\r\n      radius: 42,\r\n      color: '#fff',\r\n      zIndex: 700,\r\n    });\r\n\r\n    window.top.addEventListener('keydown', (event) => {\r\n      self._onKeyDown(event);\r\n    });\r\n\r\n    window.top.addEventListener('keyup', (event) => {\r\n      self._onKeyUp(event);\r\n    });\r\n\r\n    this._objectControls = new ObjectControls(\r\n      this._gfx.root, this._gfx.pivot,\r\n      this._gfx.camera, this._gfx.renderer.domElement, (() => self._getAltObj()),\r\n    );\r\n    this._objectControls.addEventListener('change', (e) => {\r\n      if (settings.now.shadow.on) {\r\n        self._updateShadowCamera();\r\n      }\r\n      // route rotate, zoom, translate and translatePivot events to the external API\r\n      switch (e.action) {\r\n        case 'rotate':\r\n          self.dispatchEvent({ type: 'rotate', quaternion: e.quaternion });\r\n          break;\r\n        case 'zoom':\r\n          self.dispatchEvent({ type: 'zoom', factor: e.factor });\r\n          break;\r\n        default:\r\n          self.dispatchEvent({ type: e.action });\r\n      }\r\n      self.dispatchEvent({ type: 'transform' });\r\n      self._needRender = true;\r\n    });\r\n\r\n    const gfx = this._gfx;\r\n    this._picker = new Picker(gfx.root, gfx.camera, gfx.renderer.domElement);\r\n    this._picker.addEventListener('newpick', (event) => {\r\n      self._onPick(event);\r\n    });\r\n    this._picker.addEventListener('dblclick', (event) => {\r\n      self.center(event);\r\n    });\r\n  } catch (error) {\r\n    if (error.name === 'TypeError' && error.message === 'Cannot read property \\'getExtension\\' of null') {\r\n      this._showMessage('Could not create WebGL context.');\r\n    } else if (error.message.search(/webgl/i) > 1) {\r\n      this._showMessage(error.message);\r\n    } else {\r\n      this._showMessage('Viewer initialization failed.');\r\n      throw error;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // automatically load default file\r\n  const file = this._opts && this._opts.load;\r\n  if (file) {\r\n    const type = this._opts && this._opts.type;\r\n    this.load(file, { fileType: type, keepRepsInfo: true });\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Terminate the viewer completely.\r\n * @see Miew#init\r\n */\r\nMiew.prototype.term = function () {\r\n  this._showMessage('Viewer has been terminated.');\r\n  this._loading.forEach((job) => {\r\n    job.cancel();\r\n  });\r\n  this._loading.length = 0;\r\n  this.halt();\r\n  this._gfx = null;\r\n};\r\n\r\n/**\r\n * Display message inside the viewer container, hiding WebGL canvas.\r\n * @param {string} msg - Message to show.\r\n * @private\r\n */\r\nMiew.prototype._showMessage = function (msg) {\r\n  const element = document.createElement('div');\r\n  element.setAttribute('class', 'miew-message');\r\n  element.appendChild(document.createElement('p')).appendChild(document.createTextNode(msg));\r\n  _setContainerContents(this._container, element);\r\n};\r\n\r\n/**\r\n * Display WebGL canvas inside the viewer container, hiding any message shown.\r\n * @private\r\n */\r\nMiew.prototype._showCanvas = function () {\r\n  _setContainerContents(this._container, this._gfx.renderer.domElement);\r\n};\r\n\r\nMiew.prototype._requestAnimationFrame = function (callback) {\r\n  const { xr } = this._gfx.renderer;\r\n  if (xr && xr.enabled) {\r\n    this._gfx.renderer.setAnimationLoop(callback);\r\n    return;\r\n  }\r\n  requestAnimationFrame(callback);\r\n};\r\n\r\nfunction arezSpritesSupported(context) {\r\n  return context.getExtension('EXT_frag_depth');\r\n}\r\n\r\nfunction isAOSupported(context) {\r\n  return (context.getExtension('WEBGL_depth_texture')\r\n  && context.getExtension('WEBGL_draw_buffers'));\r\n}\r\n\r\n/**\r\n * Initialize WebGL and set 3D scene up.\r\n * @private\r\n */\r\nMiew.prototype._initGfx = function () {\r\n  const gfx = {\r\n    width: this._container.clientWidth,\r\n    height: this._container.clientHeight,\r\n  };\r\n\r\n  const webGLOptions = { preserveDrawingBuffer: true, alpha: true, premultipliedAlpha: false };\r\n  if (settings.now.antialias) {\r\n    webGLOptions.antialias = true;\r\n  }\r\n\r\n  gfx.renderer2d = new CSS2DRenderer();\r\n\r\n  gfx.renderer = new THREE.WebGLRenderer(webGLOptions);\r\n  gfx.renderer.shadowMap.enabled = settings.now.shadow.on;\r\n  gfx.renderer.shadowMap.autoUpdate = false;\r\n  gfx.renderer.shadowMap.type = THREE.PCFShadowMap;\r\n  capabilities.init(gfx.renderer);\r\n\r\n  // z-sprites and ambient occlusion possibility\r\n  if (!arezSpritesSupported(gfx.renderer.getContext())) {\r\n    settings.set('zSprites', false);\r\n  }\r\n  if (!isAOSupported(gfx.renderer.getContext())) {\r\n    settings.set('ao', false);\r\n  }\r\n\r\n  gfx.renderer.autoClear = false;\r\n  gfx.renderer.setPixelRatio(window.devicePixelRatio);\r\n  gfx.renderer.setSize(gfx.width, gfx.height);\r\n  gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n  gfx.renderer.clearColor();\r\n\r\n  gfx.renderer2d.setSize(gfx.width, gfx.height);\r\n\r\n  gfx.camera = new THREE.PerspectiveCamera(\r\n    settings.now.camFov, gfx.width / gfx.height,\r\n    settings.now.camNear, settings.now.camFar,\r\n  );\r\n  gfx.camera.setMinimalFov(settings.now.camFov);\r\n  gfx.camera.position.z = settings.now.camDistance;\r\n  gfx.camera.updateProjectionMatrix();\r\n  gfx.camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  gfx.camera.layers.enable(gfxutils.LAYERS.VOLUME);\r\n  gfx.camera.layers.enable(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n\r\n  gfx.stereoCam = new THREE.StereoCamera();\r\n\r\n  gfx.scene = new THREE.Scene();\r\n\r\n  const color = chooseFogColor();\r\n  gfx.scene.fog = new THREE.Fog(color, settings.now.camNear, settings.now.camFar);\r\n\r\n  gfx.root = new gfxutils.RCGroup();\r\n  gfx.scene.add(gfx.root);\r\n\r\n  gfx.pivot = new gfxutils.RCGroup();\r\n  gfx.root.add(gfx.pivot);\r\n\r\n  gfx.selectionScene = new THREE.Scene();\r\n  gfx.selectionRoot = new THREE.Group();\r\n  gfx.selectionRoot.matrixAutoUpdate = false;\r\n  gfx.selectionScene.add(gfx.selectionRoot);\r\n\r\n  gfx.selectionPivot = new THREE.Group();\r\n  gfx.selectionPivot.matrixAutoUpdate = false;\r\n  gfx.selectionRoot.add(gfx.selectionPivot);\r\n\r\n  const light12 = new THREE.DirectionalLight(0xffffff, 0.45);\r\n  light12.position.set(0, 0.414, 1);\r\n  light12.layers.enable(gfxutils.LAYERS.TRANSPARENT);\r\n  light12.castShadow = true;\r\n  light12.shadow = new THREE.DirectionalLightShadow();\r\n  light12.shadow.bias = 0.09;\r\n  light12.shadow.radius = settings.now.shadow.radius;\r\n  light12.shadow.camera.layers.set(gfxutils.LAYERS.SHADOWMAP);\r\n\r\n  const pixelRatio = gfx.renderer.getPixelRatio();\r\n  const shadowMapSize = Math.max(gfx.width, gfx.height) * pixelRatio;\r\n  light12.shadow.mapSize.width = shadowMapSize;\r\n  light12.shadow.mapSize.height = shadowMapSize;\r\n  light12.target.position.set(0.0, 0.0, 0.0);\r\n  gfx.scene.add(light12);\r\n  gfx.scene.add(light12.target);\r\n\r\n  const light3 = new THREE.AmbientLight(0x666666);\r\n  light3.layers.enable(gfxutils.LAYERS.TRANSPARENT);\r\n  gfx.scene.add(light3);\r\n\r\n  // add axes\r\n  gfx.axes = new Axes(gfx.root, gfx.camera);\r\n  const deviceWidth = gfx.width * pixelRatio;\r\n  const deviceHeight = gfx.height * pixelRatio;\r\n\r\n  gfx.offscreenBuf = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat, depthBuffer: true,\r\n    },\r\n  );\r\n\r\n  if (gfx.renderer.getContext().getExtension('WEBGL_depth_texture')) {\r\n    gfx.offscreenBuf.depthTexture = new THREE.DepthTexture();\r\n    gfx.offscreenBuf.depthTexture.type = THREE.UnsignedShortType;\r\n  }\r\n\r\n  gfx.offscreenBuf2 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.offscreenBuf3 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.offscreenBuf4 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.volBFTex = gfx.offscreenBuf3;\r\n  gfx.volFFTex = gfx.offscreenBuf4;\r\n  gfx.volWFFTex = gfx.offscreenBuf;\r\n\r\n  // use float textures for volume rendering if possible\r\n  if (gfx.renderer.getContext().getExtension('OES_texture_float')) {\r\n    gfx.offscreenBuf5 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: false,\r\n      },\r\n    );\r\n\r\n    gfx.offscreenBuf6 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: false,\r\n      },\r\n    );\r\n\r\n    gfx.offscreenBuf7 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: true,\r\n      },\r\n    );\r\n\r\n    gfx.volBFTex = gfx.offscreenBuf5;\r\n    gfx.volFFTex = gfx.offscreenBuf6;\r\n    gfx.volWFFTex = gfx.offscreenBuf7;\r\n  } else {\r\n    this.logger.warn('Device doesn\\'t support OES_texture_float extension');\r\n  }\r\n\r\n  gfx.stereoBufL = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.stereoBufR = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  this._gfx = gfx;\r\n  this._showCanvas();\r\n\r\n  this._embedWebXR(settings.now.stereo === 'WEBVR');\r\n\r\n  this._container.appendChild(gfx.renderer2d.getElement());\r\n\r\n  // add FPS counter\r\n  const stats = new Stats();\r\n  stats.domElement.style.position = 'absolute';\r\n  stats.domElement.style.right = '0';\r\n  stats.domElement.style.bottom = '0';\r\n  this._container.appendChild(stats.domElement);\r\n  this._fps = stats;\r\n  this._fps.show(settings.now.fps);\r\n};\r\n\r\n/**\r\n * Setup event listeners.\r\n * @private\r\n */\r\nMiew.prototype._initListeners = function () {\r\n  const self = this;\r\n  window.addEventListener('resize', () => {\r\n    self._onResize();\r\n  });\r\n};\r\n\r\n/**\r\n * Try to add numbers to the base name to make it unique among visuals\r\n * @private\r\n */\r\nMiew.prototype._makeUniqueVisualName = function (baseName) {\r\n  if (!baseName) {\r\n    return Math.random().toString();\r\n  }\r\n\r\n  let name = baseName;\r\n  let suffix = 1;\r\n  while (this._visuals.hasOwnProperty(name)) {\r\n    name = `${baseName} (${suffix.toString()})`;\r\n    suffix++;\r\n  }\r\n\r\n  return name;\r\n};\r\n\r\n/**\r\n * Add visual to the viewer\r\n * @private\r\n */\r\nMiew.prototype._addVisual = function (visual) {\r\n  if (!visual) {\r\n    return null;\r\n  }\r\n\r\n  // change visual name in order to make it unique\r\n  const name = this._makeUniqueVisualName(visual.name);\r\n  visual.name = name;\r\n\r\n  this._visuals[name] = visual;\r\n  this._gfx.pivot.add(visual);\r\n  if (visual.getSelectionGeo) {\r\n    this._gfx.selectionPivot.add(visual.getSelectionGeo());\r\n  }\r\n\r\n  return name;\r\n};\r\n\r\n/**\r\n * Remove visual from the viewer\r\n * @private\r\n */\r\nMiew.prototype._removeVisual = function (visual) {\r\n  let name = '';\r\n  let obj = null;\r\n  if (visual instanceof Visual) {\r\n    ({ name } = visual);\r\n    obj = visual;\r\n  } else if (typeof visual === 'string') {\r\n    name = visual;\r\n    obj = this._visuals[name];\r\n  }\r\n\r\n  if (!obj || !this._visuals.hasOwnProperty(name) || this._visuals[name] !== obj) {\r\n    return;\r\n  }\r\n\r\n  if (name === this._curVisualName) {\r\n    this._curVisualName = undefined;\r\n  }\r\n\r\n  delete this._visuals[name];\r\n  obj.release(); // removes nodes from scene\r\n\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Call specified function for each Visual\r\n * @private\r\n */\r\nMiew.prototype._forEachVisual = function (callback) {\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)) {\r\n      callback(this._visuals[name]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Release (destroy) all visuals in the scene\r\n * @private\r\n */\r\nMiew.prototype._releaseAllVisuals = function () {\r\n  if (!this._gfx || !this._gfx.pivot) {\r\n    return;\r\n  }\r\n\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)) {\r\n      this._visuals[name].release();\r\n    }\r\n  }\r\n\r\n  this._visuals = {};\r\n};\r\n\r\n/**\r\n * Call specified function for each ComplexVisual\r\n * @private\r\n */\r\nMiew.prototype._forEachComplexVisual = function (callback) {\r\n  if (!this._gfx || !this._gfx.pivot) {\r\n    return;\r\n  }\r\n\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)\r\n          && this._visuals[name] instanceof ComplexVisual) {\r\n      callback(this._visuals[name]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Returns ComplexVisual with specified name, or current (if not found), or any, or null\r\n * @private\r\n */\r\nMiew.prototype._getComplexVisual = function (name) {\r\n  name = name || this._curVisualName;\r\n  let any = null;\r\n  let named = null;\r\n  this._forEachComplexVisual((visual) => {\r\n    any = visual;\r\n    if (visual.name === name) {\r\n      named = visual;\r\n    }\r\n  });\r\n  return named || any;\r\n};\r\n\r\n/**\r\n * Returns first found VolumeVisual (no more than one should be present actually)\r\n * @private\r\n */\r\nMiew.prototype._getVolumeVisual = function () {\r\n  let any = null;\r\n  this._forEachVisual((visual) => {\r\n    if (visual instanceof VolumeVisual) {\r\n      any = visual;\r\n    }\r\n  });\r\n  return any;\r\n};\r\n\r\n/**\r\n * Returns ComplexVisual corresponding to specified complex\r\n * @private\r\n */\r\nMiew.prototype._getVisualForComplex = function (complex) {\r\n  if (!complex) {\r\n    return null;\r\n  }\r\n\r\n  let found = null;\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.getComplex() === complex) {\r\n      found = visual;\r\n    }\r\n  });\r\n  return found;\r\n};\r\n\r\n/*\r\n   * Get a list of names of visuals currently shown by the viewer\r\n   */\r\nMiew.prototype.getVisuals = function () {\r\n  return Object.keys(this._visuals);\r\n};\r\n\r\n/*\r\n   * Get complex visuals count\r\n   */\r\nMiew.prototype.getComplexVisualsCount = function () {\r\n  let count = 0;\r\n  this._forEachComplexVisual(() => count++);\r\n  return count;\r\n};\r\n\r\n/*\r\n   * Get current visual\r\n   */\r\nMiew.prototype.getCurrentVisual = function () {\r\n  return this._curVisualName;\r\n};\r\n\r\n/*\r\n   * Set current visual.\r\n   * All further operations will be performed on this visual (complex) if not stated otherwise.\r\n   */\r\nMiew.prototype.setCurrentVisual = function (name) {\r\n  if (!this._visuals[name]) {\r\n    return;\r\n  }\r\n\r\n  this._curVisualName = name;\r\n};\r\n\r\n/**\r\n * Run the viewer, start processing update/render frames periodically.\r\n * Has no effect if already running.\r\n * @see Miew#halt\r\n */\r\nMiew.prototype.run = function () {\r\n  if (!this._running) {\r\n    this._running = true;\r\n    if (this._halting) {\r\n      this._halting = false;\r\n      return;\r\n    }\r\n\r\n    this._objectControls.enable(true);\r\n    this._interpolator.resume();\r\n\r\n    this._requestAnimationFrame(() => this._onTick());\r\n  }\r\n};\r\n\r\n/**\r\n * Request the viewer to stop.\r\n * Will be processed during the next frame.\r\n * @see Miew#run\r\n */\r\nMiew.prototype.halt = function () {\r\n  if (this._running) {\r\n    this._discardComponentEdit();\r\n    this._discardFragmentEdit();\r\n    this._objectControls.enable(false);\r\n    this._interpolator.pause();\r\n    this._halting = true;\r\n  }\r\n};\r\n\r\n/**\r\n * Request the viewer to start / stop responsing\r\n * on hot keys.\r\n * @param enabled - start (true) or stop (false) response on hot keys.\r\n */\r\nMiew.prototype.enableHotKeys = function (enabled) {\r\n  this._hotKeysEnabled = enabled;\r\n  this._objectControls.enableHotkeys(enabled);\r\n};\r\n\r\n/**\r\n * Callback which processes window resize.\r\n * @private\r\n */\r\nMiew.prototype._onResize = function () {\r\n  this._needRender = true;\r\n\r\n  const gfx = this._gfx;\r\n  gfx.width = this._container.clientWidth;\r\n  gfx.height = this._container.clientHeight;\r\n\r\n  gfx.camera.aspect = gfx.width / gfx.height;\r\n  gfx.camera.setMinimalFov(settings.now.camFov);\r\n  gfx.camera.updateProjectionMatrix();\r\n\r\n  gfx.renderer.setSize(gfx.width, gfx.height);\r\n  gfx.renderer2d.setSize(gfx.width, gfx.height);\r\n\r\n  this.dispatchEvent({ type: 'resize' });\r\n};\r\n\r\nMiew.prototype._resizeOffscreenBuffers = function (width, height, stereo) {\r\n  const gfx = this._gfx;\r\n  stereo = stereo || 'NONE';\r\n  const isAnaglyph = (stereo === 'NONE' || stereo === 'ANAGLYPH');\r\n  const multi = isAnaglyph ? 1 : 0.5;\r\n  gfx.offscreenBuf.setSize(multi * width, height);\r\n  gfx.offscreenBuf2.setSize(multi * width, height);\r\n  gfx.offscreenBuf3.setSize(multi * width, height);\r\n  gfx.offscreenBuf4.setSize(multi * width, height);\r\n  if (gfx.offscreenBuf5) {\r\n    gfx.offscreenBuf5.setSize(multi * width, height);\r\n  }\r\n  if (gfx.offscreenBuf6) {\r\n    gfx.offscreenBuf6.setSize(multi * width, height);\r\n  }\r\n  if (gfx.offscreenBuf7) {\r\n    gfx.offscreenBuf7.setSize(multi * width, height);\r\n  }\r\n  if (isAnaglyph) {\r\n    gfx.stereoBufL.setSize(width, height);\r\n    gfx.stereoBufR.setSize(width, height);\r\n  }\r\n};\r\n\r\n/**\r\n * Callback which processes update/render frames.\r\n * @private\r\n */\r\nMiew.prototype._onTick = function () {\r\n  if (this._halting) {\r\n    this._running = false;\r\n    this._halting = false;\r\n    return;\r\n  }\r\n\r\n  this._fps.update();\r\n\r\n  this._requestAnimationFrame(() => this._onTick());\r\n\r\n  this._onUpdate();\r\n  if (this._needRender) {\r\n    this._onRender();\r\n    this._needRender = !settings.now.suspendRender || settings.now.stereo === 'WEBVR';\r\n  }\r\n};\r\n\r\nMiew.prototype._getBSphereRadius = function () {\r\n  // calculate radius that would include all visuals\r\n  let radius = 0;\r\n  this._forEachVisual((visual) => {\r\n    radius = Math.max(radius, visual.getBoundaries().boundingSphere.radius);\r\n  });\r\n  return radius * this._objectControls.getScale();\r\n};\r\n\r\n/**\r\n * Calculate bounding box that would include all visuals and being axis aligned in world defined by\r\n * transformation matrix: matrix\r\n * @param {Matrix4} matrix - transformation matrix.\r\n * @param {object}  OBB           - calculating bounding box.\r\n * @param {Vector3} OBB.center    - OBB center.\r\n * @param {Vector3} OBB.halfSize  - half magnitude of OBB sizes.\r\n */\r\nMiew.prototype.getOBB = (function () {\r\n  const _bSphereForOneVisual = new THREE.Sphere();\r\n  const _bBoxForOneVisual = new THREE.Box3();\r\n  const _bBox = new THREE.Box3();\r\n\r\n  const _invMatrix = new THREE.Matrix4();\r\n\r\n  const _points = [\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n  ];\r\n\r\n  return function (matrix, OBB) {\r\n    _bBox.makeEmpty();\r\n\r\n    this._forEachVisual((visual) => {\r\n      _bSphereForOneVisual.copy(visual.getBoundaries().boundingSphere);\r\n      _bSphereForOneVisual.applyMatrix4(visual.matrixWorld).applyMatrix4(matrix);\r\n      _bSphereForOneVisual.getBoundingBox(_bBoxForOneVisual);\r\n      _bBox.union(_bBoxForOneVisual);\r\n    });\r\n    _bBox.getCenter(OBB.center);\r\n\r\n    _invMatrix.getInverse(matrix);\r\n    OBB.center.applyMatrix4(_invMatrix);\r\n\r\n    const { min } = _bBox;\r\n    const { max } = _bBox;\r\n    _points[0].set(min.x, min.y, min.z); // 000\r\n    _points[1].set(max.x, min.y, min.z); // 100\r\n    _points[2].set(min.x, max.y, min.z); // 010\r\n    _points[3].set(min.x, min.y, max.z); // 001\r\n    for (let i = 0, l = _points.length; i < l; i++) {\r\n      _points[i].applyMatrix4(_invMatrix);\r\n    }\r\n\r\n    OBB.halfSize.set(\r\n      Math.abs(_points[0].x - _points[1].x),\r\n      Math.abs(_points[0].y - _points[2].y),\r\n      Math.abs(_points[0].z - _points[3].z),\r\n    ).multiplyScalar(0.5);\r\n  };\r\n}());\r\n\r\nMiew.prototype._updateFog = function () {\r\n  const gfx = this._gfx;\r\n\r\n  if (settings.now.fog) {\r\n    if (typeof gfx.scene.fog === 'undefined' || gfx.scene.fog === null) {\r\n      const color = chooseFogColor();\r\n      gfx.scene.fog = new THREE.Fog(color);\r\n      this._setUberMaterialValues({ fog: settings.now.fog });\r\n    }\r\n    updateFogRange(gfx.scene.fog, gfx.camera.position.z, this._getBSphereRadius());\r\n  } else if (gfx.scene.fog) {\r\n    gfx.scene.fog = undefined;\r\n    this._setUberMaterialValues({ fog: settings.now.fog });\r\n  }\r\n};\r\n\r\nMiew.prototype._onUpdate = function () {\r\n  if (this.isScriptingCommandAvailable !== undefined && this.isScriptingCommandAvailable() && !this._building) {\r\n    this.callNextCmd();\r\n  }\r\n\r\n  this._objectControls.update();\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.getComplex().update();\r\n  });\r\n\r\n  if (settings.now.autobuild && !this._loading.length && !this._building && this._needRebuild()) {\r\n    this.rebuild();\r\n  }\r\n\r\n  if (!this._loading.length && !this._building && !this._needRebuild()) {\r\n    this._updateView();\r\n  }\r\n\r\n  this._updateFog();\r\n\r\n  if (this._gfx.renderer.xr.enabled) {\r\n    this.webVR.updateMoleculeScale();\r\n  }\r\n};\r\n\r\nMiew.prototype._onRender = function () {\r\n  const gfx = this._gfx;\r\n\r\n  // update all matrices\r\n  gfx.scene.updateMatrixWorld();\r\n  gfx.camera.updateMatrixWorld();\r\n\r\n  this._clipPlaneUpdateValue(this._getBSphereRadius());\r\n  this._fogFarUpdateValue();\r\n\r\n  gfx.renderer.setRenderTarget(null);\r\n  gfx.renderer.clear();\r\n\r\n  this._renderFrame(settings.now.stereo);\r\n};\r\n\r\nMiew.prototype._renderFrame = (function () {\r\n  const _anaglyphMat = new AnaglyphMaterial();\r\n  const _size = new THREE.Vector2();\r\n\r\n  return function (stereo) {\r\n    const gfx = this._gfx;\r\n    const { renderer } = gfx;\r\n\r\n    renderer.getSize(_size);\r\n\r\n    if (stereo !== 'NONE') {\r\n      gfx.camera.focus = gfx.camera.position.z; // set focus to the center of the object\r\n      gfx.stereoCam.aspect = 1.0;\r\n\r\n      // in anaglyph mode we render full-size image for each eye\r\n      // while in other stereo modes only half-size (two images on the screen)\r\n      if (stereo === 'ANAGLYPH') {\r\n        gfx.stereoCam.update(gfx.camera);\r\n      } else {\r\n        gfx.stereoCam.updateHalfSized(gfx.camera, settings.now.camFov);\r\n      }\r\n    }\r\n\r\n    // resize offscreen buffers to match the target\r\n    const pixelRatio = gfx.renderer.getPixelRatio();\r\n    this._resizeOffscreenBuffers(_size.width * pixelRatio, _size.height * pixelRatio, stereo);\r\n\r\n    this._renderShadowMap();\r\n\r\n    switch (stereo) {\r\n      case 'WEBVR':\r\n      case 'NONE':\r\n        this._renderScene(gfx.camera, false);\r\n        break;\r\n      case 'SIMPLE':\r\n      case 'DISTORTED':\r\n        renderer.setScissorTest(true);\r\n\r\n        renderer.setScissor(0, 0, _size.width / 2, _size.height);\r\n        renderer.setViewport(0, 0, _size.width / 2, _size.height);\r\n        this._renderScene(this._gfx.stereoCam.cameraL, stereo === 'DISTORTED');\r\n\r\n        renderer.setScissor(_size.width / 2, 0, _size.width / 2, _size.height);\r\n        renderer.setViewport(_size.width / 2, 0, _size.width / 2, _size.height);\r\n        this._renderScene(this._gfx.stereoCam.cameraR, stereo === 'DISTORTED');\r\n\r\n        renderer.setScissorTest(false);\r\n        break;\r\n      case 'ANAGLYPH':\r\n        this._renderScene(this._gfx.stereoCam.cameraL, false, gfx.stereoBufL);\r\n        this._renderScene(this._gfx.stereoCam.cameraR, false, gfx.stereoBufR);\r\n        renderer.setRenderTarget(null);\r\n        _anaglyphMat.uniforms.srcL.value = gfx.stereoBufL.texture;\r\n        _anaglyphMat.uniforms.srcR.value = gfx.stereoBufR.texture;\r\n        gfx.renderer.renderScreenQuad(_anaglyphMat);\r\n        break;\r\n      default:\r\n    }\r\n\r\n    gfx.renderer2d.render(gfx.scene, gfx.camera);\r\n\r\n    if (settings.now.axes && gfx.axes && !gfx.renderer.xr.enabled) {\r\n      gfx.axes.render(renderer);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._onBgColorChanged = function () {\r\n  const gfx = this._gfx;\r\n  const color = chooseFogColor();\r\n  if (gfx) {\r\n    if (gfx.scene.fog) {\r\n      gfx.scene.fog.color.set(color);\r\n    }\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._onFogColorChanged = function () {\r\n  const gfx = this._gfx;\r\n  const color = chooseFogColor();\r\n  if (gfx && gfx.scene.fog) {\r\n    gfx.scene.fog.color.set(color);\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._setUberMaterialValues = function (values) {\r\n  this._gfx.root.traverse((obj) => {\r\n    if ((obj instanceof THREE.Mesh || obj instanceof THREE.LineSegments || obj instanceof THREE.Line)\r\n        && obj.material instanceof UberMaterial) {\r\n      obj.material.setValues(values);\r\n      obj.material.needsUpdate = true;\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype._enableMRT = function (on, renderBuffer, textureBuffer) {\r\n  const gfx = this._gfx;\r\n  const gl = gfx.renderer.getContext();\r\n  const ext = gl.getExtension('WEBGL_draw_buffers');\r\n  const { properties } = gfx.renderer;\r\n\r\n  if (!on) {\r\n    ext.drawBuffersWEBGL([gl.COLOR_ATTACHMENT0, null]);\r\n    return;\r\n  }\r\n\r\n  // take extra texture from Texture Buffer\r\n  gfx.renderer.setRenderTarget(textureBuffer);\r\n  const tx8 = properties.get(textureBuffer.texture).__webglTexture;\r\n  gl.bindTexture(gl.TEXTURE_2D, tx8);\r\n\r\n  // take texture and framebuffer from renderbuffer\r\n  gfx.renderer.setRenderTarget(renderBuffer);\r\n  const fb = properties.get(renderBuffer).__webglFramebuffer;\r\n  const tx = properties.get(renderBuffer.texture).__webglTexture;\r\n\r\n  // set framebuffer\r\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\r\n  fb.width = renderBuffer.width;\r\n  fb.height = renderBuffer.height;\r\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tx, 0);\r\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, ext.COLOR_ATTACHMENT1_WEBGL, gl.TEXTURE_2D, tx8, 0);\r\n\r\n  // mapping textures\r\n  ext.drawBuffersWEBGL([gl.COLOR_ATTACHMENT0, ext.COLOR_ATTACHMENT1_WEBGL]);\r\n};\r\n\r\nMiew.prototype._renderScene = (function () {\r\n  return function (camera, distortion, target) {\r\n    distortion = distortion || false;\r\n    target = target || null;\r\n\r\n    const gfx = this._gfx;\r\n\r\n    // render to offscreen buffer\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(target);\r\n    gfx.renderer.clear();\r\n    if (gfx.renderer.xr.enabled) {\r\n      gfx.renderer.render(gfx.scene, camera);\r\n      return;\r\n    }\r\n\r\n    // clean buffer for normals texture\r\n    gfx.renderer.setClearColor(0x000000, 0.0);\r\n    gfx.renderer.setRenderTarget(gfx.offscreenBuf4);\r\n    gfx.renderer.clearColor();\r\n\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n    gfx.renderer.clear();\r\n\r\n    const bHaveComplexes = (this._getComplexVisual() !== null);\r\n    const volumeVisual = this._getVolumeVisual();\r\n    const ssao = bHaveComplexes && settings.now.ao;\r\n\r\n    if (ssao) {\r\n      this._enableMRT(true, gfx.offscreenBuf, gfx.offscreenBuf4);\r\n    }\r\n\r\n    if (settings.now.transparency === 'prepass') {\r\n      this._renderWithPrepassTransparency(camera, gfx.offscreenBuf);\r\n    } else if (settings.now.transparency === 'standard') {\r\n      gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n      gfx.renderer.render(gfx.scene, camera);\r\n    }\r\n\r\n    if (ssao) {\r\n      this._enableMRT(false, null, null);\r\n    }\r\n\r\n    // when fxaa we should get resulting image in temp off-screen buff2 for further postprocessing with fxaa filter\r\n    // otherwise we render to canvas\r\n    const outline = bHaveComplexes && settings.now.outline.on;\r\n    const fxaa = bHaveComplexes && settings.now.fxaa;\r\n    const volume = (volumeVisual !== null) && (volumeVisual.getMesh().material != null);\r\n    let dstBuffer = (ssao || outline || volume || fxaa || distortion) ? gfx.offscreenBuf2 : target;\r\n    let srcBuffer = gfx.offscreenBuf;\r\n\r\n    if (ssao) {\r\n      this._performAO(\r\n        srcBuffer,\r\n        gfx.offscreenBuf4,\r\n        gfx.offscreenBuf.depthTexture,\r\n        dstBuffer,\r\n        gfx.offscreenBuf3,\r\n        gfx.offscreenBuf2,\r\n      );\r\n      if (!fxaa && !distortion && !volume && !outline) {\r\n        srcBuffer = dstBuffer;\r\n        dstBuffer = target;\r\n        gfx.renderer.setRenderTarget(dstBuffer);\r\n        gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 1.0);\r\n      }\r\n    } else {\r\n      // just copy color buffer to dst buffer\r\n      gfx.renderer.setRenderTarget(dstBuffer);\r\n      gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 1.0);\r\n    }\r\n\r\n    // outline\r\n    if (outline) {\r\n      srcBuffer = dstBuffer;\r\n      dstBuffer = (volume || fxaa || distortion) ? gfx.offscreenBuf3 : target;\r\n      if (srcBuffer != null) {\r\n        this._renderOutline(camera, gfx.offscreenBuf, srcBuffer, dstBuffer);\r\n      }\r\n    }\r\n\r\n    // render selected part with outline material\r\n    this._renderSelection(camera, gfx.offscreenBuf, dstBuffer);\r\n\r\n    if (volume) {\r\n      // copy current picture to the buffer that retains depth-data of the original molecule render\r\n      // so that volume renderer could use depth-test\r\n      gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n      gfx.renderer.renderScreenQuadFromTex(dstBuffer.texture, 1.0);\r\n      dstBuffer = gfx.offscreenBuf;\r\n      this._renderVolume(volumeVisual, camera, dstBuffer, gfx.volBFTex, gfx.volFFTex, gfx.volWFFTex);\r\n\r\n      // if this is the last stage -- copy image to target\r\n      if (!fxaa && !distortion) {\r\n        gfx.renderer.setRenderTarget(target);\r\n        gfx.renderer.renderScreenQuadFromTex(dstBuffer.texture, 1.0);\r\n      }\r\n    }\r\n\r\n    srcBuffer = dstBuffer;\r\n\r\n    if (fxaa) {\r\n      dstBuffer = distortion ? gfx.offscreenBuf4 : target;\r\n      this._performFXAA(srcBuffer, dstBuffer);\r\n      srcBuffer = dstBuffer;\r\n    }\r\n\r\n    if (distortion) {\r\n      dstBuffer = target;\r\n      this._performDistortion(srcBuffer, dstBuffer, true);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._performDistortion = (function () {\r\n  const _scene = new THREE.Scene();\r\n  const _camera = new THREE.OrthographicCamera(-1.0, 1.0, 1.0, -1.0, -500, 1000);\r\n\r\n  const _material = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      srcTex: { type: 't', value: null },\r\n      aberration: { type: 'fv3', value: new THREE.Vector3(1.0) },\r\n    },\r\n    vertexShader: vertexScreenQuadShader,\r\n    fragmentShader: fragmentScreenQuadFromDistTex,\r\n    transparent: false,\r\n    depthTest: false,\r\n    depthWrite: false,\r\n  });\r\n\r\n  const _geo = gfxutils.buildDistorionMesh(10, 10, settings.now.debug.stereoBarrel);\r\n  _scene.add(new meshes.Mesh(_geo, _material));\r\n\r\n  return function (srcBuffer, targetBuffer, mesh) {\r\n    this._gfx.renderer.setRenderTarget(targetBuffer);\r\n    this._gfx.renderer.clear();\r\n\r\n    if (mesh) {\r\n      _material.uniforms.srcTex.value = srcBuffer.texture;\r\n      _material.uniforms.aberration.value.set(0.995, 1.0, 1.01);\r\n      this._gfx.renderer.render(_scene, _camera);\r\n    } else {\r\n      this._gfx.renderer.renderScreenQuadFromTexWithDistortion(srcBuffer, settings.now.debug.stereoBarrel);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._renderOutline = (function () {\r\n  const _outlineMaterial = new OutlineMaterial({ depth: true });\r\n\r\n  return function (camera, srcDepthBuffer, srcColorBuffer, targetBuffer) {\r\n    const self = this;\r\n    const gfx = self._gfx;\r\n\r\n    // apply Sobel filter -- draw outline\r\n    _outlineMaterial.uniforms.srcTex.value = srcColorBuffer.texture;\r\n    _outlineMaterial.uniforms.srcDepthTex.value = srcDepthBuffer.depthTexture;\r\n    _outlineMaterial.uniforms.srcTexSize.value.set(srcDepthBuffer.width, srcDepthBuffer.height);\r\n    _outlineMaterial.uniforms.color.value = new THREE.Color(settings.now.outline.color);\r\n    _outlineMaterial.uniforms.threshold.value = settings.now.outline.threshold;\r\n    _outlineMaterial.uniforms.thickness.value = new THREE.Vector2(\r\n      settings.now.outline.thickness,\r\n      settings.now.outline.thickness,\r\n    );\r\n\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuad(_outlineMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._renderShadowMap = (function () {\r\n  const pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\r\n\r\n  return function () {\r\n    if (!settings.now.shadow.on) {\r\n      return;\r\n    }\r\n\r\n    const gfx = this._gfx;\r\n    const currentRenderTarget = gfx.renderer.getRenderTarget();\r\n    const activeCubeFace = gfx.renderer.getActiveCubeFace();\r\n    const activeMipmapLevel = gfx.renderer.getActiveMipmapLevel();\r\n\r\n    const _state = gfx.renderer.state;\r\n\r\n    // Set GL state for depth map.\r\n    _state.setBlending(THREE.NoBlending);\r\n    _state.buffers.color.setClear(1, 1, 1, 1);\r\n    _state.buffers.depth.setTest(true);\r\n    _state.setScissorTest(false);\r\n\r\n    for (let i = 0; i < gfx.scene.children.length; i++) {\r\n      if (gfx.scene.children[i].type === 'DirectionalLight') {\r\n        const light = gfx.scene.children[i];\r\n\r\n        if (light.shadow.map == null) {\r\n          light.shadow.map = new THREE.WebGLRenderTarget(light.shadow.mapSize.width, light.shadow.mapSize.height, pars);\r\n          light.shadow.camera.updateProjectionMatrix();\r\n        }\r\n        light.shadow.updateMatrices(light);\r\n\r\n        gfx.renderer.setRenderTarget(light.shadow.map);\r\n        gfx.renderer.clear();\r\n\r\n        gfx.renderer.render(gfx.scene, light.shadow.camera);\r\n      }\r\n    }\r\n    gfx.renderer.setRenderTarget(currentRenderTarget, activeCubeFace, activeMipmapLevel);\r\n  };\r\n}());\r\n\r\n/**\r\n * Check if there is selection which must be rendered or not.\r\n * @private\r\n * @returns {boolean} true on existing selection to render\r\n */\r\nMiew.prototype._hasSelectionToRender = function () {\r\n  const selPivot = this._gfx.selectionPivot;\r\n\r\n  for (let i = 0; i < selPivot.children.length; i++) {\r\n    const selPivotChild = selPivot.children[i];\r\n    if (selPivotChild.children.length > 0) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nMiew.prototype._renderSelection = (function () {\r\n  const _outlineMaterial = new OutlineMaterial();\r\n\r\n  return function (camera, srcBuffer, targetBuffer) {\r\n    const self = this;\r\n    const gfx = self._gfx;\r\n\r\n    // clear offscreen buffer (leave z-buffer intact)\r\n    gfx.renderer.setClearColor('black', 0);\r\n\r\n    // render selection to offscreen buffer\r\n    gfx.renderer.setRenderTarget(srcBuffer);\r\n    gfx.renderer.clear(true, false, false);\r\n    if (self._hasSelectionToRender()) {\r\n      gfx.selectionRoot.matrix = gfx.root.matrix;\r\n      gfx.selectionPivot.matrix = gfx.pivot.matrix;\r\n      gfx.renderer.render(gfx.selectionScene, camera);\r\n    } else {\r\n      // just render something to force \"target clear\" operation to finish\r\n      gfx.renderer.renderDummyQuad();\r\n    }\r\n\r\n    // overlay to screen\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 0.6);\r\n\r\n    // apply Sobel filter -- draw outline\r\n    _outlineMaterial.uniforms.srcTex.value = srcBuffer.texture;\r\n    _outlineMaterial.uniforms.srcTexSize.value.set(srcBuffer.width, srcBuffer.height);\r\n    gfx.renderer.renderScreenQuad(_outlineMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._checkVolumeRenderingSupport = function (renderTarget) {\r\n  if (!renderTarget) {\r\n    return false;\r\n  }\r\n  const gfx = this._gfx;\r\n  const oldRT = gfx.renderer.getRenderTarget();\r\n\r\n  gfx.renderer.setRenderTarget(renderTarget);\r\n  const context = gfx.renderer.getContext();\r\n  const result = context.checkFramebufferStatus(context.FRAMEBUFFER);\r\n  gfx.renderer.setRenderTarget(oldRT);\r\n  if (result !== context.FRAMEBUFFER_COMPLETE) {\r\n    // floatFrameBufferWarning = ;\r\n    this.logger.warn('Device doesn\\'t support electron density rendering');\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nMiew.prototype._renderVolume = (function () {\r\n  const volumeBFMat = new VolumeMaterial.BackFacePosMaterial();\r\n  const volumeFFMat = new VolumeMaterial.FrontFacePosMaterial();\r\n  const cubeOffsetMat = new THREE.Matrix4().makeTranslation(0.5, 0.5, 0.5);\r\n  const world2colorMat = new THREE.Matrix4();\r\n\r\n  let volumeRenderingSupported;\r\n\r\n  return function (volumeVisual, camera, dstBuf, tmpBuf1, tmpBuf2, tmpBuf3) {\r\n    const gfx = this._gfx;\r\n\r\n    if (typeof volumeRenderingSupported === 'undefined') {\r\n      volumeRenderingSupported = this._checkVolumeRenderingSupport(tmpBuf1);\r\n    }\r\n\r\n    if (!volumeRenderingSupported) {\r\n      return;\r\n    }\r\n\r\n    const mesh = volumeVisual.getMesh();\r\n\r\n    mesh.rebuild(gfx.camera);\r\n\r\n    // use main camera to prepare special textures to be used by volumetric rendering\r\n    // these textures have the size of the window and are stored in offscreen buffers\r\n    gfx.renderer.setClearColor('black', 0);\r\n    gfx.renderer.setRenderTarget(tmpBuf1);\r\n    gfx.renderer.clear();\r\n    gfx.renderer.setRenderTarget(tmpBuf2);\r\n    gfx.renderer.clear();\r\n    gfx.renderer.setRenderTarget(tmpBuf3);\r\n    gfx.renderer.clear();\r\n\r\n    gfx.renderer.setRenderTarget(tmpBuf1);\r\n    // draw plane with its own material, because it differs slightly from volumeBFMat\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.scene.overrideMaterial = volumeBFMat;\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    gfx.renderer.setRenderTarget(tmpBuf2);\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.scene.overrideMaterial = volumeFFMat;\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    gfx.scene.overrideMaterial = null;\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n\r\n    // prepare texture that contains molecule positions\r\n    world2colorMat.getInverse(mesh.matrixWorld);\r\n    UberMaterial.prototype.uberOptions.world2colorMatrix.multiplyMatrices(cubeOffsetMat, world2colorMat);\r\n    camera.layers.set(gfxutils.LAYERS.COLOR_FROM_POSITION);\r\n    gfx.renderer.setRenderTarget(tmpBuf3);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // render volume\r\n    const vm = mesh.material;\r\n    vm.uniforms._BFRight.value = tmpBuf1.texture;\r\n    vm.uniforms._FFRight.value = tmpBuf2.texture;\r\n    vm.uniforms._WFFRight.value = tmpBuf3.texture;\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.renderer.setRenderTarget(dstBuf);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  };\r\n}());\r\n\r\n/*  Render scene with 'ZPrepass transparency Effect'\r\n   * Idea: transparent objects are rendered in two passes. The first one writes result only into depth buffer.\r\n   * The second pass reads depth buffer and writes only to color buffer. The method results in\r\n   * correct image of front part of the semi-transparent objects, but we can see only front transparent objects\r\n   * and opaque objects inside, there is no transparent objects inside.\r\n   * Notes: 1. Opaque objects should be rendered strictly before semi-transparent ones.\r\n   * 2. Realization doesn't use camera layers because scene traversing is used for material changes and\r\n   * we can use it to select needed meshes and don't complicate meshes builders with layers\r\n  */\r\nMiew.prototype._renderWithPrepassTransparency = (function () {\r\n  return function (camera, targetBuffer) {\r\n    const gfx = this._gfx;\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n\r\n    // opaque objects\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // transparent objects z prepass\r\n    camera.layers.set(gfxutils.LAYERS.PREPASS_TRANSPARENT);\r\n    gfx.renderer.getContext().colorMask(false, false, false, false); // don't update color buffer\r\n    gfx.renderer.render(gfx.scene, camera);\r\n    gfx.renderer.getContext().colorMask(true, true, true, true); // update color buffer\r\n\r\n    // transparent objects color pass\r\n    camera.layers.set(gfxutils.LAYERS.TRANSPARENT);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // restore default layer\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  };\r\n}());\r\n\r\nMiew.prototype._performFXAA = (function () {\r\n  const _fxaaMaterial = new FXAAMaterial();\r\n\r\n  return function (srcBuffer, targetBuffer) {\r\n    if (typeof srcBuffer === 'undefined' || typeof targetBuffer === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    const gfx = this._gfx;\r\n\r\n    // clear canvas\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.clear();\r\n\r\n    // do fxaa processing of offscreen buff2\r\n    _fxaaMaterial.uniforms.srcTex.value = srcBuffer.texture;\r\n    _fxaaMaterial.uniforms.srcTexelSize.value.set(1.0 / srcBuffer.width, 1.0 / srcBuffer.height);\r\n    _fxaaMaterial.uniforms.bgColor.value.set(settings.now.bg.color);\r\n\r\n    if (_fxaaMaterial.bgTransparent !== settings.now.bg.transparent) {\r\n      _fxaaMaterial.setValues({ bgTransparent: settings.now.bg.transparent });\r\n      _fxaaMaterial.needsUpdate = true;\r\n    }\r\n    gfx.renderer.renderScreenQuad(_fxaaMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._performAO = (function () {\r\n  const _aoMaterial = new AOMaterial();\r\n  const _horBlurMaterial = new AOHorBlurMaterial();\r\n  const _vertBlurMaterial = new AOVertBlurWithBlendMaterial();\r\n\r\n  const _scale = new THREE.Vector3();\r\n  return function (srcColorBuffer, normalBuffer, srcDepthTexture, targetBuffer, tempBuffer, tempBuffer1) {\r\n    if (!srcColorBuffer || !normalBuffer || !srcDepthTexture || !targetBuffer || !tempBuffer || !tempBuffer1) {\r\n      return;\r\n    }\r\n    const gfx = this._gfx;\r\n    const tanHalfFOV = Math.tan(THREE.Math.DEG2RAD * 0.5 * gfx.camera.fov);\r\n\r\n    _aoMaterial.uniforms.diffuseTexture.value = srcColorBuffer.texture;\r\n    _aoMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    _aoMaterial.uniforms.normalTexture.value = normalBuffer.texture;\r\n    _aoMaterial.uniforms.srcTexelSize.value.set(1.0 / srcColorBuffer.width, 1.0 / srcColorBuffer.height);\r\n    _aoMaterial.uniforms.camNearFar.value.set(gfx.camera.near, gfx.camera.far);\r\n    _aoMaterial.uniforms.projMatrix.value = gfx.camera.projectionMatrix;\r\n    _aoMaterial.uniforms.aspectRatio.value = gfx.camera.aspect;\r\n    _aoMaterial.uniforms.tanHalfFOV.value = tanHalfFOV;\r\n    gfx.root.matrix.extractScale(_scale);\r\n    _aoMaterial.uniforms.kernelRadius.value = settings.now.debug.ssaoKernelRadius * _scale.x;\r\n    _aoMaterial.uniforms.depthThreshold.value = 2.0 * this._getBSphereRadius(); // diameter\r\n    _aoMaterial.uniforms.factor.value = settings.now.debug.ssaoFactor;\r\n    // N: should be tempBuffer1 for proper use of buffers (see buffers using outside the function)\r\n    gfx.renderer.setRenderTarget(tempBuffer1);\r\n    gfx.renderer.renderScreenQuad(_aoMaterial);\r\n\r\n    _horBlurMaterial.uniforms.aoMap.value = tempBuffer1.texture;\r\n    _horBlurMaterial.uniforms.srcTexelSize.value.set(1.0 / tempBuffer1.width, 1.0 / tempBuffer1.height);\r\n    _horBlurMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    gfx.renderer.setRenderTarget(tempBuffer);\r\n    gfx.renderer.renderScreenQuad(_horBlurMaterial);\r\n\r\n    _vertBlurMaterial.uniforms.aoMap.value = tempBuffer.texture;\r\n    _vertBlurMaterial.uniforms.diffuseTexture.value = srcColorBuffer.texture;\r\n    _vertBlurMaterial.uniforms.srcTexelSize.value.set(1.0 / tempBuffer.width, 1.0 / tempBuffer.height);\r\n    _vertBlurMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    _vertBlurMaterial.uniforms.projMatrix.value = gfx.camera.projectionMatrix;\r\n    _vertBlurMaterial.uniforms.aspectRatio.value = gfx.camera.aspect;\r\n    _vertBlurMaterial.uniforms.tanHalfFOV.value = tanHalfFOV;\r\n    const { fog } = gfx.scene;\r\n    if (fog) {\r\n      _vertBlurMaterial.uniforms.fogNearFar.value.set(fog.near, fog.far);\r\n      _vertBlurMaterial.uniforms.fogColor.value.set(fog.color.r, fog.color.g, fog.color.b, settings.now.fogAlpha);\r\n    }\r\n    if ((_vertBlurMaterial.useFog !== settings.now.fog)\r\n      || (_vertBlurMaterial.fogTransparent !== settings.now.bg.transparent)) {\r\n      _vertBlurMaterial.setValues({ useFog: settings.now.fog, fogTransparent: settings.now.bg.transparent });\r\n      _vertBlurMaterial.needsUpdate = true;\r\n    }\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuad(_vertBlurMaterial);\r\n  };\r\n}());\r\n\r\n/**\r\n * Reset the viewer, unload molecules.\r\n * @param {boolean=} keepReps - Keep representations while resetting viewer state.\r\n */\r\nMiew.prototype.reset = function (/* keepReps */) {\r\n  if (this._picker) {\r\n    this._picker.reset();\r\n  }\r\n  this._lastPick = null;\r\n\r\n  this._releaseAllVisuals();\r\n\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this._resetObjects();\r\n\r\n  if (this._gfx) {\r\n    gfxutils.clearTree(this._gfx.pivot);\r\n    this._gfx.renderer2d.reset();\r\n  }\r\n\r\n  this.setNeedRender();\r\n};\r\n\r\nMiew.prototype._resetScene = function () {\r\n  this._objectControls.reset();\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n  this.resetReps();\r\n  this.resetPivot();\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype.resetView = function () {\r\n  // reset controls\r\n  if (this._picker) {\r\n    this._picker.reset();\r\n  }\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._resetScene();\r\n\r\n  // reset selection\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.updateSelectionMask({});\r\n    visual.rebuildSelectionGeometry();\r\n  });\r\n};\r\n\r\nMiew.prototype._export = function (format) {\r\n  const TheExporter = _.head(io.exporters.find({ format }));\r\n  if (!TheExporter) {\r\n    this.logger.error('Could not find suitable exporter for this source');\r\n    return Promise.reject(new Error('Could not find suitable exporter for this source'));\r\n  }\r\n  this.dispatchEvent({ type: 'exporting' });\r\n\r\n  if (this._visuals[this._curVisualName] instanceof ComplexVisual) {\r\n    let dataSource = null;\r\n    if (TheExporter.SourceClass === ComplexVisual) {\r\n      dataSource = this._visuals[this._curVisualName];\r\n    } else if (TheExporter.SourceClass === Complex) {\r\n      dataSource = this._visuals[this._curVisualName]._complex;\r\n    }\r\n    const exporter = new TheExporter(dataSource, { miewVersion: Miew.VERSION });\r\n    return exporter.export().then((data) => data);\r\n  }\r\n  if (this._visuals[this._curVisualName] instanceof VolumeVisual) {\r\n    return Promise.reject(new Error('Sorry, exporter for volume data not implemented yet'));\r\n  }\r\n  return Promise.reject(new Error('Unexpected format of data'));\r\n};\r\n\r\nconst rePdbId = /^(?:(pdb|cif|mmtf|ccp4|dsn6):\\s*)?(\\d[a-z\\d]{3})$/i;\r\nconst rePubchem = /^(?:pc|pubchem):\\s*([a-z]+)$/i;\r\nconst reUrlScheme = /^([a-z][a-z\\d\\-+.]*):/i;\r\n\r\nfunction resolveSourceShortcut(source, opts) {\r\n  if (!_.isString(source)) {\r\n    return source;\r\n  }\r\n\r\n  // e.g. \"mmtf:1CRN\"\r\n  const matchesPdbId = rePdbId.exec(source);\r\n  if (matchesPdbId) {\r\n    let [, format = 'pdb', id] = matchesPdbId;\r\n\r\n    format = format.toLowerCase();\r\n    id = id.toUpperCase();\r\n\r\n    switch (format) {\r\n      case 'pdb':\r\n        source = `https://files.rcsb.org/download/${id}.pdb`;\r\n        break;\r\n      case 'cif':\r\n        source = `https://files.rcsb.org/download/${id}.cif`;\r\n        break;\r\n      case 'mmtf':\r\n        source = `https://mmtf.rcsb.org/v1.0/full/${id}`;\r\n        break;\r\n      case 'ccp4':\r\n        source = `https://www.ebi.ac.uk/pdbe/coordinates/files/${id.toLowerCase()}.ccp4`;\r\n        break;\r\n      case 'dsn6':\r\n        source = `https://edmaps.rcsb.org/maps/${id.toLowerCase()}_2fofc.dsn6`;\r\n        break;\r\n      default:\r\n        throw new Error('Unexpected data format shortcut');\r\n    }\r\n\r\n    opts.fileType = format;\r\n    opts.fileName = `${id}.${format}`;\r\n    opts.sourceType = 'url';\r\n    return source;\r\n  }\r\n\r\n  // e.g. \"pc:aspirin\"\r\n  const matchesPubchem = rePubchem.exec(source);\r\n  if (matchesPubchem) {\r\n    const compound = matchesPubchem[1].toLowerCase();\r\n    source = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/${compound}/JSON?record_type=3d`;\r\n    opts.fileType = 'pubchem';\r\n    opts.fileName = `${compound}.json`;\r\n    opts.sourceType = 'url';\r\n    return source;\r\n  }\r\n\r\n  // otherwise is should be an URL\r\n  if (opts.sourceType === 'url' || opts.sourceType === undefined) {\r\n    opts.sourceType = 'url';\r\n\r\n    // e.g. \"./data/1CRN.pdb\"\r\n    if (!reUrlScheme.test(source)) {\r\n      source = utils.resolveURL(source);\r\n    }\r\n  }\r\n\r\n  return source;\r\n}\r\n\r\nfunction updateBinaryMode(opts) {\r\n  let { binary } = opts;\r\n\r\n  // detect by format\r\n  if (opts.fileType !== undefined) {\r\n    const TheParser = _.head(io.parsers.find({ format: opts.fileType }));\r\n    if (TheParser) {\r\n      binary = TheParser.binary || false;\r\n    } else {\r\n      throw new Error('Could not find suitable parser for this format');\r\n    }\r\n  }\r\n\r\n  // detect by file extension\r\n  if (binary === undefined && opts.fileExt !== undefined) {\r\n    const TheParser = _.head(io.parsers.find({ ext: opts.fileExt }));\r\n    if (TheParser) {\r\n      binary = TheParser.binary || false;\r\n    }\r\n  }\r\n\r\n  // temporary workaround for animation\r\n  if (opts.fileExt !== undefined && opts.fileExt.toLowerCase() === '.man') {\r\n    opts.binary = true;\r\n    opts.animation = true; // who cares?\r\n  }\r\n\r\n  // update if detected\r\n  if (binary !== undefined) {\r\n    if (opts.binary !== undefined && opts.binary !== binary) {\r\n      opts.context.logger.warn('Overriding incorrect binary mode');\r\n    }\r\n  }\r\n\r\n  opts.binary = binary || false;\r\n}\r\n\r\nfunction _fetchData(source, opts, job) {\r\n  return new Promise(((resolve) => {\r\n    if (job.shouldCancel()) {\r\n      throw new Error('Operation cancelled');\r\n    }\r\n    job.notify({ type: 'fetching' });\r\n\r\n    // allow for source shortcuts\r\n    source = resolveSourceShortcut(source, opts);\r\n\r\n    // detect a proper loader\r\n    const TheLoader = _.head(io.loaders.find({ type: opts.sourceType, source }));\r\n    if (!TheLoader) {\r\n      throw new Error(LOADER_NOT_FOUND);\r\n    }\r\n\r\n    // split file name\r\n    const fileName = opts.fileName || TheLoader.extractName(source);\r\n    if (fileName) {\r\n      const [name, fileExt] = utils.splitFileName(fileName);\r\n      _.defaults(opts, { name, fileExt, fileName });\r\n    }\r\n\r\n    // should it be text or binary?\r\n    updateBinaryMode(opts);\r\n\r\n    // FIXME: All new settings retrieved from server are applied after the loading is complete. However, we need some\r\n    // flags to alter the loading process itself. Here we apply them in advance. Dirty hack. Kill the server, remove\r\n    // all hacks and everybody's happy.\r\n    let newOptions = _.get(opts, 'preset.expression');\r\n    if (!_.isUndefined(newOptions)) {\r\n      newOptions = JSON.parse(newOptions);\r\n      if (newOptions && newOptions.settings) {\r\n        const keys = ['singleUnit'];\r\n        for (let keyIndex = 0, keyCount = keys.length; keyIndex < keyCount; ++keyIndex) {\r\n          const key = keys[keyIndex];\r\n          const value = _.get(newOptions.settings, key);\r\n          if (!_.isUndefined(value)) {\r\n            settings.set(key, value);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // create a loader\r\n    const loader = new TheLoader(source, opts);\r\n    loader.context = opts.context;\r\n    job.addEventListener('cancel', () => loader.abort());\r\n\r\n    loader.addEventListener('progress', (event) => {\r\n      if (event.lengthComputable && event.total > 0) {\r\n        reportProgress(loader.logger, 'Fetching', event.loaded / event.total);\r\n      } else {\r\n        reportProgress(loader.logger, 'Fetching');\r\n      }\r\n    });\r\n\r\n    console.time('fetch');\r\n    const promise = loader.load()\r\n      .then((data) => {\r\n        console.timeEnd('fetch');\r\n        opts.context.logger.info('Fetching finished');\r\n        job.notify({ type: 'fetchingDone', data });\r\n        return data;\r\n      })\r\n      .catch((error) => {\r\n        console.timeEnd('fetch');\r\n        opts.context.logger.debug(error.message);\r\n        if (error.stack) {\r\n          opts.context.logger.debug(error.stack);\r\n        }\r\n        opts.context.logger.error('Fetching failed');\r\n        job.notify({ type: 'fetchingDone', error });\r\n        throw error;\r\n      });\r\n    resolve(promise);\r\n  }));\r\n}\r\n\r\nfunction _parseData(data, opts, job) {\r\n  if (job.shouldCancel()) {\r\n    return Promise.reject(new Error('Operation cancelled'));\r\n  }\r\n\r\n  job.notify({ type: 'parsing' });\r\n\r\n  const TheParser = _.head(io.parsers.find({ format: opts.fileType, ext: opts.fileExt, data }));\r\n  if (!TheParser) {\r\n    return Promise.reject(new Error('Could not find suitable parser'));\r\n  }\r\n\r\n  const parser = new TheParser(data, opts);\r\n  parser.context = opts.context;\r\n  job.addEventListener('cancel', () => parser.abort());\r\n\r\n  console.time('parse');\r\n  return parser.parse()\r\n    .then((dataSet) => {\r\n      console.timeEnd('parse');\r\n      job.notify({ type: 'parsingDone', data: dataSet });\r\n      return dataSet;\r\n    })\r\n    .catch((error) => {\r\n      console.timeEnd('parse');\r\n      opts.error = error;\r\n      opts.context.logger.debug(error.message);\r\n      if (error.stack) {\r\n        opts.context.logger.debug(error.stack);\r\n      }\r\n      opts.context.logger.error('Parsing failed');\r\n      job.notify({ type: 'parsingDone', error });\r\n      throw error;\r\n    });\r\n}\r\n\r\n/**\r\n * Load molecule asynchronously.\r\n * @param {string|File} source - Molecule source to load (e.g. PDB ID, URL or File object).\r\n * @param {object=} opts - Options.\r\n * @param {string=} opts.sourceType - Data source type (e.g. 'url', 'file').\r\n * @param {string=} opts.fileType - Data contents type (e.g. 'pdb', 'cml').\r\n * @param {string=} opts.mdFile - .nc file path.\r\n * @param {boolean=} opts.keepRepsInfo - prevent reset of object and reps information.\r\n * @returns {Promise} name of the visual that was added to the viewer\r\n */\r\nMiew.prototype.load = function (source, opts) {\r\n  opts = _.merge({}, opts, {\r\n    context: this,\r\n  });\r\n\r\n  // for a single-file scenario\r\n  if (!this.settings.now.use.multiFile) {\r\n    // abort all loaders in progress\r\n    if (this._loading.length) {\r\n      this._loading.forEach((job) => {\r\n        job.cancel();\r\n      });\r\n      this._loading.length = 0;\r\n    }\r\n\r\n    // reset\r\n    if (!opts.animation) { // FIXME: sometimes it is set AFTERWARDS!\r\n      this.reset(true);\r\n    }\r\n  }\r\n\r\n  this._interpolator.reset();\r\n\r\n  this.dispatchEvent({ type: 'loading', options: opts, source });\r\n\r\n  const job = new JobHandle();\r\n  this._loading.push(job);\r\n  job.addEventListener('notification', (e) => {\r\n    this.dispatchEvent(e.slaveEvent);\r\n  });\r\n\r\n  this._spinner.spin(this._container);\r\n\r\n  const onLoadEnd = (anything) => {\r\n    const jobIndex = this._loading.indexOf(job);\r\n    if (jobIndex !== -1) {\r\n      this._loading.splice(jobIndex, 1);\r\n    }\r\n    this._spinner.stop();\r\n    this._refreshTitle();\r\n    job.notify({ type: 'loadingDone', anything });\r\n    return anything;\r\n  };\r\n\r\n  return _fetchData(source, opts, job)\r\n    .then((data) => _parseData(data, opts, job))\r\n    .then((object) => {\r\n      const name = this._onLoad(object, opts);\r\n      return onLoadEnd(name);\r\n    })\r\n    .catch((err) => {\r\n      this.logger.error('Could not load data');\r\n      this.logger.debug(err);\r\n      throw onLoadEnd(err);\r\n    });\r\n};\r\n\r\n/**\r\n * Unload molecule (delete corresponding visual).\r\n * @param {string=} name - name of the visual\r\n */\r\nMiew.prototype.unload = function (name) {\r\n  this._removeVisual(name || this.getCurrentVisual());\r\n  this.resetPivot();\r\n  if (settings.now.shadow.on) {\r\n    this._updateShadowCamera();\r\n  }\r\n};\r\n\r\n/**\r\n * Start new animation. Now is broken.\r\n * @param fileData - new data to animate\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._startAnimation = function (fileData) {\r\n  this._stopAnimation();\r\n  const self = this;\r\n  const visual = this._getComplexVisual();\r\n  if (visual === null) {\r\n    this.logger.error('Unable to start animation - no molecule is loaded.');\r\n    return;\r\n  }\r\n  try {\r\n    this._frameInfo = new FrameInfo(\r\n      visual.getComplex(), fileData,\r\n      {\r\n        onLoadStatusChanged() {\r\n          self.dispatchEvent({\r\n            type: 'mdPlayerStateChanged',\r\n            state: {\r\n              isPlaying: self._isAnimating,\r\n              isLoading: self._frameInfo ? self._frameInfo.isLoading : true,\r\n            },\r\n          });\r\n        },\r\n        onError(message) {\r\n          self._stopAnimation();\r\n          self.logger.error(message);\r\n        },\r\n      },\r\n    );\r\n  } catch (e) {\r\n    this.logger.error('Animation file does not fit to current complex!');\r\n    return;\r\n  }\r\n  this._continueAnimation();\r\n};\r\n\r\n/**\r\n * Pause current animation. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._pauseAnimation = function () {\r\n  if (this._animInterval === null) {\r\n    return;\r\n  }\r\n  this._isAnimating = false;\r\n  clearInterval(this._animInterval);\r\n  this._animInterval = null;\r\n  if (this._frameInfo) {\r\n    this.dispatchEvent({\r\n      type: 'mdPlayerStateChanged',\r\n      state: {\r\n        isPlaying: this._isAnimating,\r\n        isLoading: this._frameInfo.isLoading,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Continue current animation after pausing. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._continueAnimation = function () {\r\n  this._isAnimating = true;\r\n  let minFrameTime = 1000 / settings.now.maxfps;\r\n  minFrameTime = Number.isNaN(minFrameTime) ? 0 : minFrameTime;\r\n  const self = this;\r\n  const { pivot } = self._gfx;\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    visual.resetSelectionMask();\r\n    visual.rebuildSelectionGeometry();\r\n    this._msgAtomInfo.style.opacity = 0.0;\r\n  }\r\n  this._animInterval = setInterval(() => {\r\n    self.dispatchEvent({\r\n      type: 'mdPlayerStateChanged',\r\n      state: {\r\n        isPlaying: self._isAnimating,\r\n        isLoading: self._frameInfo.isLoading,\r\n      },\r\n    });\r\n    if (self._frameInfo.frameIsReady) {\r\n      pivot.updateToFrame(self._frameInfo);\r\n      self._updateObjsToFrame(self._frameInfo);\r\n      self._refreshTitle(` Frame ${self._frameInfo._currFrame} of ${self._frameInfo._framesCount\r\n      } time interval - ${self._frameInfo._timeStep}`);\r\n      try {\r\n        self._frameInfo.nextFrame();\r\n      } catch (e) {\r\n        self.logger.error('Error during animation');\r\n        self._stopAnimation();\r\n        return;\r\n      }\r\n      self._needRender = true;\r\n    }\r\n  }, minFrameTime);\r\n};\r\n\r\n/**\r\n * Stop current animation. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._stopAnimation = function () {\r\n  if (this._animInterval === null) {\r\n    return;\r\n  }\r\n  clearInterval(this._animInterval);\r\n  this._frameInfo.disableEvents();\r\n  this._frameInfo = null;\r\n  this._animInterval = null;\r\n  this.dispatchEvent({\r\n    type: 'mdPlayerStateChanged',\r\n    state: null,\r\n  });\r\n};\r\n\r\n/**\r\n * Invoked upon successful loading of some data source\r\n * @param {DataSource} dataSource - Data source for visualization (molecular complex or other)\r\n * @param {object} opts - Options.\r\n * @private\r\n */\r\nMiew.prototype._onLoad = function (dataSource, opts) {\r\n  const gfx = this._gfx;\r\n  let visualName = null;\r\n\r\n  if (opts.animation) {\r\n    this._refreshTitle();\r\n    this._startAnimation(dataSource);\r\n    return null;\r\n  }\r\n  this._stopAnimation();\r\n  if (!opts || !opts.keepRepsInfo) {\r\n    this._opts.reps = null;\r\n    this._opts._objects = null;\r\n  }\r\n\r\n\r\n  if (dataSource.id === 'Complex') {\r\n    const complex = dataSource;\r\n\r\n    // update title\r\n    if (opts.fileName) {\r\n      complex.name = complex.name || removeExtension(opts.fileName).toUpperCase();\r\n    } else if (opts.amberFileName) {\r\n      complex.name = complex.name || removeExtension(opts.amberFileName).toUpperCase();\r\n    } else {\r\n      complex.name = `Dynamic ${opts.fileType} molecule`;\r\n    }\r\n\r\n    visualName = this._addVisual(new ComplexVisual(complex.name, complex));\r\n    this._curVisualName = visualName;\r\n\r\n    const desc = this.info();\r\n    this.logger.info(`Parsed ${opts.fileName} (${\r\n      desc.atoms} atoms, ${\r\n      desc.bonds} bonds, ${\r\n      desc.residues} residues, ${\r\n      desc.chains} chains).`);\r\n\r\n    if (_.isNumber(this._opts.unit)) {\r\n      complex.setCurrentUnit(this._opts.unit);\r\n    }\r\n\r\n    if (opts.preset) {\r\n      // ...removed server access...\r\n    } else if (settings.now.autoPreset) {\r\n      switch (opts.fileType) {\r\n        case 'cml':\r\n          this.resetReps('small');\r\n          break;\r\n        case 'pdb':\r\n        case 'mmtf':\r\n        case 'cif':\r\n          if (hasValidResidues(complex)) {\r\n            this.resetReps('macro');\r\n          } else {\r\n            this.resetReps('small');\r\n          }\r\n          break;\r\n        default:\r\n          this.resetReps('default');\r\n          break;\r\n      }\r\n    } else {\r\n      this.resetReps('default');\r\n    }\r\n  } else if (dataSource.id === 'Volume') {\r\n    this.resetEd();\r\n    visualName = this._onLoadEd(dataSource);\r\n  }\r\n\r\n  gfx.camera.updateProjectionMatrix();\r\n  this._updateFog();\r\n\r\n  // reset global transform\r\n  gfx.root.resetTransform();\r\n  this.resetPivot();\r\n\r\n  // set scale to fit everything on the screen\r\n  this._objectControls.setScale(settings.now.radiusToFit / this._getBSphereRadius());\r\n\r\n  this._resetObjects();\r\n\r\n  if (settings.now.autoResolution) {\r\n    this._tweakResolution();\r\n  }\r\n\r\n  if (settings.now.shadow.on) {\r\n    this._updateShadowCamera();\r\n  }\r\n\r\n  if (this._opts.view) {\r\n    this.view(this._opts.view);\r\n    delete this._opts.view;\r\n  }\r\n\r\n  this._refreshTitle();\r\n\r\n  return visualName;\r\n};\r\n\r\nMiew.prototype.resetEd = function () {\r\n  if (this._edLoader) {\r\n    this._edLoader.abort();\r\n    this._edLoader = null;\r\n  }\r\n\r\n  // free all resources\r\n  this._removeVisual(this._getVolumeVisual());\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype.loadEd = function (source) {\r\n  this.resetEd();\r\n\r\n  const TheLoader = _.head(io.loaders.find({ source }));\r\n  if (!TheLoader) {\r\n    this.logger.error(LOADER_NOT_FOUND);\r\n    return Promise.reject(new Error(LOADER_NOT_FOUND));\r\n  }\r\n\r\n  const loader = this._edLoader = new TheLoader(source, { binary: true });\r\n  loader.context = this;\r\n  return loader.load().then((data) => {\r\n    const TheParser = _.head(io.parsers.find({ format: 'ccp4' }));\r\n    if (!TheParser) {\r\n      throw new Error(PARSER_NOT_FOUND);\r\n    }\r\n    const parser = new TheParser(data);\r\n    parser.context = this;\r\n    return parser.parse().then((dataSource) => {\r\n      this._onLoadEd(dataSource);\r\n    });\r\n  }).catch((error) => {\r\n    this.logger.error('Could not load ED data');\r\n    this.logger.debug(error);\r\n  });\r\n};\r\n\r\nMiew.prototype._onLoadEd = function (dataSource) {\r\n  dataSource.normalize();\r\n\r\n  const volumeVisual = new VolumeVisual('volume', dataSource);\r\n  volumeVisual.getMesh().layers.set(gfxutils.LAYERS.VOLUME); // volume mesh is not visible to common render\r\n  const visualName = this._addVisual(volumeVisual);\r\n\r\n  this._needRender = true;\r\n  return visualName;\r\n};\r\n\r\nMiew.prototype._needRebuild = function () {\r\n  let needsRebuild = false;\r\n  this._forEachComplexVisual((visual) => {\r\n    needsRebuild = needsRebuild || visual.needsRebuild();\r\n  });\r\n  return needsRebuild;\r\n};\r\n\r\nMiew.prototype._rebuildObjects = function () {\r\n  const self = this;\r\n  const gfx = this._gfx;\r\n  let i;\r\n  let n;\r\n\r\n  // remove old object geometry\r\n  const toRemove = [];\r\n  for (i = 0; i < gfx.pivot.children.length; ++i) {\r\n    const child = gfx.pivot.children[i];\r\n    if (!(child instanceof Visual)) {\r\n      toRemove.push(child);\r\n    }\r\n  }\r\n  for (i = 0; i < toRemove.length; ++i) {\r\n    toRemove[i].parent.remove(toRemove[i]);\r\n  }\r\n\r\n  setTimeout(() => {\r\n    const objList = self._objects;\r\n    for (i = 0, n = objList.length; i < n; ++i) {\r\n      const obj = objList[i];\r\n      if (obj.needsRebuild) {\r\n        obj.build();\r\n      }\r\n      if (obj.getGeometry()) {\r\n        gfx.pivot.add(obj.getGeometry());\r\n      }\r\n    }\r\n  }, 10);\r\n};\r\n\r\nMiew.prototype.changeUnit = function (unitIdx, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    throw new Error('There is no complex to change!');\r\n  }\r\n\r\n  function currentUnitInfo() {\r\n    const unit = visual ? visual.getComplex().getCurrentUnit() : 0;\r\n    const type = unit > 0 ? (`Bio molecule ${unit}`) : 'Asymmetric unit';\r\n    return `Current unit: ${unit} (${type})`;\r\n  }\r\n\r\n  if (unitIdx === undefined) {\r\n    return currentUnitInfo();\r\n  }\r\n  if (_.isString(unitIdx)) {\r\n    unitIdx = Math.max(parseInt(unitIdx, 10), 0);\r\n  }\r\n  if (visual.getComplex().setCurrentUnit(unitIdx)) {\r\n    this._resetScene();\r\n    this._updateInfoPanel();\r\n  }\r\n  return currentUnitInfo();\r\n};\r\n\r\n/**\r\n * Start to rebuild geometry asynchronously.\r\n */\r\nMiew.prototype.rebuild = function () {\r\n  if (this._building) {\r\n    this.logger.warn('Miew.rebuild(): already building!');\r\n    return;\r\n  }\r\n  this._building = true;\r\n\r\n  this.dispatchEvent({ type: 'rebuilding' });\r\n\r\n  this._rebuildObjects();\r\n\r\n  this._gfx.renderer2d.reset();\r\n\r\n  const rebuildActions = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.needsRebuild()) {\r\n      rebuildActions.push(visual.rebuild().then(() => new Promise(((resolve) => {\r\n        visual.rebuildSelectionGeometry();\r\n        resolve();\r\n      }))));\r\n    }\r\n  });\r\n\r\n  // Start asynchronous rebuild\r\n  const self = this;\r\n  this._spinner.spin(this._container);\r\n  Promise.all(rebuildActions).then(() => {\r\n    self._spinner.stop();\r\n\r\n\r\n    self._needRender = true;\r\n\r\n    self._refreshTitle();\r\n    this.dispatchEvent({ type: 'buildingDone' });\r\n    self._building = false;\r\n  });\r\n};\r\n\r\n/** Mark all representations for rebuilding */\r\nMiew.prototype.rebuildAll = function () {\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setNeedsRebuild();\r\n  });\r\n};\r\n\r\nMiew.prototype._refreshTitle = function (appendix) {\r\n  let title;\r\n  appendix = appendix === undefined ? '' : appendix;\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    title = visual.getComplex().name;\r\n    const rep = visual.repGet(visual.repCurrent());\r\n    title += (rep ? `  ${rep.mode.name} Mode` : '');\r\n  } else {\r\n    title = Object.keys(this._visuals).length > 0 ? 'Unknown' : 'No Data';\r\n  }\r\n  title += appendix;\r\n\r\n  this.dispatchEvent({ type: 'titleChanged', data: title });\r\n};\r\n\r\nMiew.prototype.setNeedRender = function () {\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._extractRepresentation = function () {\r\n  const changed = [];\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.getSelectionCount() === 0) {\r\n      return;\r\n    }\r\n\r\n    const selector = visual.buildSelectorFromMask(1 << visual.getSelectionBit());\r\n    const defPreset = settings.now.presets.default;\r\n    const res = visual.repAdd({\r\n      selector,\r\n      mode: defPreset[0].mode.id,\r\n      colorer: defPreset[0].colorer.id,\r\n      material: defPreset[0].material.id,\r\n    });\r\n    if (!res) {\r\n      if (visual.repCount() === ComplexVisual.NUM_REPRESENTATION_BITS) {\r\n        this.logger.warn(`Number of representations is limited to ${ComplexVisual.NUM_REPRESENTATION_BITS}`);\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name: visual.name });\r\n    visual.repCurrent(res.index);\r\n\r\n    changed.push(visual.name);\r\n  });\r\n\r\n  if (changed.length > 0) {\r\n    this.logger.report(`New representation from selection for complexes: ${changed.join(', ')}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Change current representation list.\r\n * @param {array} reps - Representation list.\r\n */\r\nMiew.prototype._setReps = function (reps) {\r\n  reps = reps || (this._opts && this._opts.reps) || [];\r\n  this._forEachComplexVisual((visual) => visual.resetReps(reps));\r\n};\r\n\r\n/**\r\n * Apply existing preset to current scene.\r\n * @param preset\r\n */\r\nMiew.prototype.applyPreset = function (preset) {\r\n  const { presets } = settings.now;\r\n  const presList = [\r\n    preset || settings.defaults.preset,\r\n    settings.defaults.preset,\r\n    Object.keys(presets)[0],\r\n  ];\r\n  let reps = null;\r\n  for (let i = 0; !reps && i < presList.length; ++i) {\r\n    settings.set('preset', presList[i]);\r\n    reps = presets[settings.now.preset];\r\n    if (!reps) {\r\n      this.logger.warn(`Unknown preset \"${settings.now.preset}\"`);\r\n    }\r\n  }\r\n  this._setReps(reps);\r\n};\r\n\r\n/**\r\n * Reset current representation list to initial values.\r\n * @param {string} [preset] - The source preset in case of uninitialized representation list.\r\n */\r\nMiew.prototype.resetReps = function (preset) {\r\n  const reps = this._opts && this._opts.reps;\r\n  if (reps) {\r\n    this._setReps(reps);\r\n  } else {\r\n    this.applyPreset(preset);\r\n  }\r\n};\r\n\r\n/**\r\n * Get number of representations created so far.\r\n * @returns {number} Number of reps.\r\n */\r\nMiew.prototype.repCount = function (name) {\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repCount() : 0;\r\n};\r\n\r\n/**\r\n * Get or set the current representation index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n * @param {string=} [name] - Complex name. Defaults to the current one.\r\n * @returns {number} The current index.\r\n */\r\nMiew.prototype.repCurrent = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  const newIdx = visual ? visual.repCurrent(index) : -1;\r\n  if (index && newIdx !== index) {\r\n    this.logger.warn(`Representation ${index} was not found. Current rep remains unchanged.`);\r\n  }\r\n  return newIdx;\r\n};\r\n\r\n/**\r\n * Get or set representation by index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount}(). Defaults to the current one.\r\n * @param {object=} rep - Optional representation description.\r\n * @param {string=} rep.selector - Selector string.\r\n * @param {string=} rep.mode - Mode id.\r\n * @param {string=} rep.colorer - Colorer id.\r\n * @param {string=} rep.material - Material id.\r\n * @returns {?object} Representation description.\r\n */\r\nMiew.prototype.rep = function (index, rep) {\r\n  const visual = this._getComplexVisual('');\r\n  if (!visual) {\r\n    return null;\r\n  }\r\n  const res = visual.rep(index, rep);\r\n  if (res.status === 'created') {\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name: visual.name });\r\n  } else if (res.status === 'changed') {\r\n    this.dispatchEvent({ type: 'repChanged', index: res.index, name: visual.name });\r\n  }\r\n  return res.desc;\r\n};\r\n\r\n/**\r\n * Get representation (not just description) by index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount}(). Defaults to the current one.\r\n * @returns {?object} Representation.\r\n */\r\nMiew.prototype.repGet = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repGet(index) : null;\r\n};\r\n\r\n/**\r\n * Add new representation.\r\n * @param {object=} rep - Representation description.\r\n * @returns {number} Index of the new representation.\r\n */\r\nMiew.prototype.repAdd = function (rep, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return -1;\r\n  }\r\n\r\n  const res = visual.repAdd(rep);\r\n  if (res) {\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name });\r\n    return res.index;\r\n  }\r\n  return -1;\r\n};\r\n\r\n/**\r\n * Remove representation.\r\n * @param {number=} index - Zero-based representation index.\r\n */\r\nMiew.prototype.repRemove = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return;\r\n  }\r\n\r\n  visual.repRemove(index);\r\n  this.dispatchEvent({ type: 'repRemoved', index, name });\r\n};\r\n\r\n/**\r\n * Hide representation.\r\n * @param {number} index - Zero-based representation index.\r\n * @param {boolean=} hide - Specify false to make rep visible, true to hide (by default).\r\n */\r\nMiew.prototype.repHide = function (index, hide, name) {\r\n  this._needRender = true;\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repHide(index, hide) : null;\r\n};\r\n\r\nMiew.prototype._setEditMode = function (mode) {\r\n  this._editMode = mode;\r\n\r\n  const elem = this._msgMode;\r\n  if (elem) {\r\n    elem.style.opacity = (mode === EDIT_MODE.COMPLEX) ? 0.0 : 1.0;\r\n\r\n    if (mode !== EDIT_MODE.COMPLEX) {\r\n      const t = elem.getElementsByTagName('p')[0];\r\n      t.innerHTML = (mode === EDIT_MODE.COMPONENT) ? 'COMPONENT EDIT MODE' : 'FRAGMENT EDIT MODE';\r\n    }\r\n  }\r\n\r\n  this.dispatchEvent({ type: 'editModeChanged', data: mode === EDIT_MODE.COMPLEX });\r\n};\r\n\r\nMiew.prototype._enterComponentEditMode = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPLEX) {\r\n    return;\r\n  }\r\n\r\n  const editors = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    const editor = visual.beginComponentEdit();\r\n    if (editor) {\r\n      editors.push(editor);\r\n    }\r\n  });\r\n\r\n  if (editors === []) {\r\n    return;\r\n  }\r\n\r\n  this._editors = editors;\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- ON');\r\n  this._setEditMode(EDIT_MODE.COMPONENT);\r\n  this._objectControls.keysTranslateObj(true);\r\n};\r\n\r\nMiew.prototype._applyComponentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPONENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n  this._objectControls.keysTranslateObj(false);\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].apply();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- OFF (applied)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._discardComponentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPONENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n  this._objectControls.keysTranslateObj(false);\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].discard();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- OFF (discarded)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this._needRender = true;\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._enterFragmentEditMode = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPLEX) {\r\n    return;\r\n  }\r\n\r\n  const selectedVisuals = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual instanceof ComplexVisual\r\n          && visual.getSelectionCount() > 0) {\r\n      selectedVisuals.push(visual);\r\n    }\r\n  });\r\n\r\n  if (selectedVisuals.length !== 1) {\r\n    // either we have no selection or\r\n    // we have selected atoms in two or more visuals -- not supported\r\n    return;\r\n  }\r\n\r\n  const editor = selectedVisuals[0].beginFragmentEdit();\r\n  if (!editor) {\r\n    return;\r\n  }\r\n  this._editors = [editor];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- ON (single bond)');\r\n  this._setEditMode(EDIT_MODE.FRAGMENT);\r\n  this._objectControls.allowTranslation(false);\r\n  this._objectControls.allowAltObjFreeRotation(editor.isFreeRotationAllowed());\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._applyFragmentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.FRAGMENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].apply();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- OFF (applied)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._discardFragmentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.FRAGMENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].discard();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- OFF (discarded)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._onPick = function (event) {\r\n  if (!settings.now.picking) {\r\n    // picking is disabled\r\n    return;\r\n  }\r\n\r\n  if (this._animInterval !== null) {\r\n    // animation playback is on\r\n    return;\r\n  }\r\n\r\n  if (this._editMode === EDIT_MODE.FRAGMENT) {\r\n    // prevent picking in fragment edit mode\r\n    return;\r\n  }\r\n\r\n  if (this._objectControls.isEditingAltObj()) {\r\n    // prevent picking during component rotation\r\n    return;\r\n  }\r\n\r\n  // update last pick & find complex\r\n  let complex = null;\r\n  if (event.obj.atom) {\r\n    complex = event.obj.atom.residue.getChain().getComplex();\r\n    this._lastPick = event.obj.atom;\r\n  } else if (event.obj.residue) {\r\n    complex = event.obj.residue.getChain().getComplex();\r\n    this._lastPick = event.obj.residue;\r\n  } else if (event.obj.chain) {\r\n    complex = event.obj.chain.getComplex();\r\n    this._lastPick = event.obj.chain;\r\n  } else if (event.obj.molecule) {\r\n    complex = event.obj.molecule.complex;\r\n    this._lastPick = event.obj.molecule;\r\n  } else {\r\n    this._lastPick = null;\r\n  }\r\n\r\n  function _updateSelection(visual) {\r\n    visual.updateSelectionMask(event.obj);\r\n    visual.rebuildSelectionGeometry();\r\n  }\r\n\r\n  // update visual\r\n  if (complex) {\r\n    const visual = this._getVisualForComplex(complex);\r\n    if (visual) {\r\n      _updateSelection(visual);\r\n      this._needRender = true;\r\n    }\r\n  } else {\r\n    this._forEachComplexVisual(_updateSelection);\r\n    this._needRender = true;\r\n  }\r\n\r\n  this._updateInfoPanel();\r\n  this.dispatchEvent(event);\r\n};\r\n\r\nMiew.prototype._onKeyDown = function (event) {\r\n  if (!this._running || !this._hotKeysEnabled) {\r\n    return;\r\n  }\r\n\r\n  switch (event.keyCode) {\r\n    case 'C'.charCodeAt(0):\r\n      if (settings.now.editing) {\r\n        this._enterComponentEditMode();\r\n      }\r\n      break;\r\n    case 'F'.charCodeAt(0):\r\n      if (settings.now.editing) {\r\n        this._enterFragmentEditMode();\r\n      }\r\n      break;\r\n    case 'A'.charCodeAt(0):\r\n      switch (this._editMode) {\r\n        case EDIT_MODE.COMPONENT:\r\n          this._applyComponentEdit();\r\n          break;\r\n        case EDIT_MODE.FRAGMENT:\r\n          this._applyFragmentEdit();\r\n          break;\r\n        default: break;\r\n      }\r\n      break;\r\n    case 'D'.charCodeAt(0):\r\n      switch (this._editMode) {\r\n        case EDIT_MODE.COMPONENT:\r\n          this._discardComponentEdit();\r\n          break;\r\n        case EDIT_MODE.FRAGMENT:\r\n          this._discardFragmentEdit();\r\n          break;\r\n        default: break;\r\n      }\r\n      break;\r\n    case 'S'.charCodeAt(0):\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      settings.set('ao', !settings.now.ao);\r\n      this._needRender = true;\r\n      break;\r\n    case 107:\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this._forEachComplexVisual((visual) => {\r\n        visual.expandSelection();\r\n        visual.rebuildSelectionGeometry();\r\n      });\r\n      this._updateInfoPanel();\r\n      this._needRender = true;\r\n      break;\r\n    case 109:\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this._forEachComplexVisual((visual) => {\r\n        visual.shrinkSelection();\r\n        visual.rebuildSelectionGeometry();\r\n      });\r\n      this._updateInfoPanel();\r\n      this._needRender = true;\r\n      break;\r\n    default:\r\n  }\r\n};\r\n\r\nMiew.prototype._onKeyUp = function (event) {\r\n  if (!this._running || !this._hotKeysEnabled) {\r\n    return;\r\n  }\r\n\r\n  if (event.keyCode === 'X'.charCodeAt(0)) {\r\n    this._extractRepresentation();\r\n  }\r\n};\r\n\r\nMiew.prototype._updateInfoPanel = function () {\r\n  const info = this._msgAtomInfo.getElementsByTagName('p')[0];\r\n  let atom;\r\n  let residue;\r\n\r\n  let count = 0;\r\n  this._forEachComplexVisual((visual) => {\r\n    count += visual.getSelectionCount();\r\n  });\r\n\r\n  while (info.firstChild) {\r\n    info.removeChild(info.firstChild);\r\n  }\r\n\r\n  if (count === 0) {\r\n    this._msgAtomInfo.style.opacity = 0.0;\r\n    return;\r\n  }\r\n\r\n  let firstLine = `${String(count)} atom${count !== 1 ? 's' : ''} selected`;\r\n  if (this._lastPick !== null) {\r\n    firstLine += ', the last pick:';\r\n  }\r\n  let secondLine = '';\r\n  let aName = '';\r\n  let coordLine = '';\r\n\r\n  if (this._lastPick instanceof Atom) {\r\n    atom = this._lastPick;\r\n    residue = atom.residue;\r\n\r\n    aName = atom.name;\r\n    const location = (atom.location !== 32) ? String.fromCharCode(atom.location) : ''; // 32 is code of white-space\r\n    secondLine = `${atom.element.fullName} #${atom.serial}${location}: \\\r\n      ${residue._chain._name}.${residue._type._name}${residue._sequence}${residue._icode.trim()}.`;\r\n    secondLine += aName;\r\n\r\n    coordLine = `Coord: (${atom.position.x.toFixed(2).toString()},\\\r\n     ${atom.position.y.toFixed(2).toString()},\\\r\n     ${atom.position.z.toFixed(2).toString()})`;\r\n  } else if (this._lastPick instanceof Residue) {\r\n    residue = this._lastPick;\r\n\r\n    secondLine = `${residue._type._fullName}: \\\r\n      ${residue._chain._name}.${residue._type._name}${residue._sequence}${residue._icode.trim()}`;\r\n  } else if (this._lastPick instanceof Chain) {\r\n    secondLine = `chain ${this._lastPick._name}`;\r\n  } else if (this._lastPick instanceof Molecule) {\r\n    secondLine = `molecule ${this._lastPick._name}`;\r\n  }\r\n\r\n  info.appendChild(document.createTextNode(firstLine));\r\n\r\n  if (secondLine !== '') {\r\n    info.appendChild(document.createElement('br'));\r\n    info.appendChild(document.createTextNode(secondLine));\r\n  }\r\n\r\n  if (coordLine !== '') {\r\n    info.appendChild(document.createElement('br'));\r\n    info.appendChild(document.createTextNode(coordLine));\r\n  }\r\n\r\n  this._msgAtomInfo.style.opacity = 1.0;\r\n};\r\n\r\nMiew.prototype._getAltObj = function () {\r\n  if (this._editors) {\r\n    let altObj = null;\r\n    for (let i = 0; i < this._editors.length; ++i) {\r\n      const nextAltObj = this._editors[i].getAltObj();\r\n      if (nextAltObj.objects.length > 0) {\r\n        if (altObj) {\r\n          // we have selected atoms in two or more visuals -- not supported\r\n          altObj = null;\r\n          break;\r\n        }\r\n        altObj = nextAltObj;\r\n      }\r\n    }\r\n    if (altObj) {\r\n      return altObj;\r\n    }\r\n  }\r\n\r\n  return {\r\n    objects: [],\r\n    pivot: new THREE.Vector3(0, 0, 0),\r\n  };\r\n};\r\n\r\nMiew.prototype.resetPivot = (function () {\r\n  const boundingBox = new THREE.Box3();\r\n  const center = new THREE.Vector3();\r\n\r\n  return function () {\r\n    boundingBox.makeEmpty();\r\n    this._forEachVisual((visual) => {\r\n      boundingBox.union(visual.getBoundaries().boundingBox);\r\n    });\r\n\r\n    boundingBox.getCenter(center);\r\n    this._objectControls.setPivot(center.negate());\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotResidue = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  return function (residue) {\r\n    const visual = this._getVisualForComplex(residue.getChain().getComplex());\r\n    if (!visual) {\r\n      return;\r\n    }\r\n\r\n    if (residue._controlPoint) {\r\n      center.copy(residue._controlPoint);\r\n    } else {\r\n      let x = 0;\r\n      let y = 0;\r\n      let z = 0;\r\n      const amount = residue._atoms.length;\r\n      for (let i = 0; i < amount; ++i) {\r\n        const p = residue._atoms[i].position;\r\n        x += p.x / amount;\r\n        y += p.y / amount;\r\n        z += p.z / amount;\r\n      }\r\n      center.set(x, y, z);\r\n    }\r\n    center.applyMatrix4(visual.matrix).negate();\r\n    this._objectControls.setPivot(center);\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotAtom = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  return function (atom) {\r\n    const visual = this._getVisualForComplex(atom.residue.getChain().getComplex());\r\n    if (!visual) {\r\n      return;\r\n    }\r\n\r\n    center.copy(atom.position);\r\n    center.applyMatrix4(visual.matrix).negate();\r\n    this._objectControls.setPivot(center);\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.getSelectionCenter = (function () {\r\n  const _centerInVisual = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  return function (center, includesAtom, selector) {\r\n    center.set(0.0, 0.0, 0.0);\r\n    let count = 0;\r\n\r\n    this._forEachComplexVisual((visual) => {\r\n      if (visual.getSelectionCenter(_centerInVisual, includesAtom, selector || visual.getSelectionBit())) {\r\n        center.add(_centerInVisual);\r\n        count++;\r\n      }\r\n    });\r\n    if (count === 0) {\r\n      return false;\r\n    }\r\n    center.divideScalar(count);\r\n    center.negate();\r\n    return true;\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotSubset = (function () {\r\n  const _center = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  function _includesInCurSelection(atom, selectionBit) {\r\n    return atom.mask & (1 << selectionBit);\r\n  }\r\n\r\n  function _includesInSelector(atom, selector) {\r\n    return selector.selector.includesAtom(atom);\r\n  }\r\n\r\n  return function (selector) {\r\n    const includesAtom = (selector) ? _includesInSelector : _includesInCurSelection;\r\n\r\n    if (this.getSelectionCenter(_center, includesAtom, selector)) {\r\n      this._objectControls.setPivot(_center);\r\n      this.dispatchEvent({ type: 'transform' });\r\n    } else {\r\n      this.logger.warn('selection is empty. Center operation not performed');\r\n    }\r\n  };\r\n}());\r\n\r\n/**\r\n * Makes a screenshot.\r\n * @param {number} [width] - Width of an image. Defaults to the canvas width.\r\n * @param {number} [height] - Height of an image. Defaults to the width (square) or canvas height,\r\n *        if width is omitted too.\r\n * @returns {string} Data URL representing the image contents.\r\n */\r\nMiew.prototype.screenshot = function (width, height) {\r\n  const gfx = this._gfx;\r\n  const deviceWidth = gfx.renderer.domElement.width;\r\n  const deviceHeight = gfx.renderer.domElement.height;\r\n\r\n  function fov2Tan(fov) {\r\n    return Math.tan(THREE.Math.degToRad(0.5 * fov));\r\n  }\r\n\r\n  function tan2Fov(tan) {\r\n    return THREE.Math.radToDeg(Math.atan(tan)) * 2.0;\r\n  }\r\n\r\n  function getDataURL() {\r\n    let dataURL;\r\n    const currBrowser = utils.getBrowser();\r\n\r\n    if (currBrowser === utils.browserType.SAFARI) {\r\n      const canvas = document.createElement('canvas');\r\n      const canvasContext = canvas.getContext('2d');\r\n\r\n      canvas.width = width === undefined ? deviceWidth : width;\r\n      canvas.height = height === undefined ? deviceHeight : height;\r\n\r\n      canvasContext.drawImage(gfx.renderer.domElement, 0, 0, canvas.width, canvas.height);\r\n      dataURL = canvas.toDataURL('image/png');\r\n    } else {\r\n      // Copy current canvas to screenshot\r\n      dataURL = gfx.renderer.domElement.toDataURL('image/png');\r\n    }\r\n    return dataURL;\r\n  }\r\n  height = height || width;\r\n\r\n  let screenshotURI;\r\n  if ((width === undefined && height === undefined)\r\n    || (width === deviceWidth && height === deviceHeight)) {\r\n    // renderer.domElement.toDataURL('image/png') returns flipped image in Safari\r\n    // It hasn't been resolved yet, but getScreenshotSafari()\r\n    // fixes it using an extra canvas.\r\n    screenshotURI = getDataURL();\r\n  } else {\r\n    const originalAspect = gfx.camera.aspect;\r\n    const originalFov = gfx.camera.fov;\r\n    const originalTanFov2 = fov2Tan(gfx.camera.fov);\r\n\r\n    // screenshot should contain the principal area of interest (a centered square touching screen sides)\r\n    const areaOfInterestSize = Math.min(gfx.width, gfx.height);\r\n    const areaOfInterestTanFov2 = originalTanFov2 * areaOfInterestSize / gfx.height;\r\n\r\n    // set appropriate camera aspect & FOV\r\n    const shotAspect = width / height;\r\n    gfx.renderer.setPixelRatio(1);\r\n    gfx.camera.aspect = shotAspect;\r\n    gfx.camera.fov = tan2Fov(areaOfInterestTanFov2 / Math.min(shotAspect, 1.0));\r\n    gfx.camera.updateProjectionMatrix();\r\n\r\n    // resize canvas to the required size of screenshot\r\n    gfx.renderer.setDrawingBufferSize(width, height, 1);\r\n\r\n    // make screenshot\r\n    this._renderFrame(settings.now.stereo);\r\n    screenshotURI = getDataURL();\r\n\r\n    // restore original camera & canvas proportions\r\n    gfx.renderer.setPixelRatio(window.devicePixelRatio);\r\n    gfx.camera.aspect = originalAspect;\r\n    gfx.camera.fov = originalFov;\r\n    gfx.camera.updateProjectionMatrix();\r\n    gfx.renderer.setDrawingBufferSize(gfx.width, gfx.height, window.devicePixelRatio);\r\n    this._needRender = true;\r\n  }\r\n\r\n  return screenshotURI;\r\n};\r\n\r\n/**\r\n * Makes screenshot and initiates a download.\r\n * @param {string} [filename] - Name of a file. Default to a 'screenshot-XXXXX.png', where XXXXX is a current\r\n *        date/time in seconds.\r\n * @param {number} [width] - Width of an image. Defaults to the canvas width.\r\n * @param {number} [height] - Height of an image. Defaults to the width (square) or canvas height,\r\n *        if width is omitted too.\r\n */\r\nMiew.prototype.screenshotSave = function (filename, width, height) {\r\n  const uri = this.screenshot(width, height);\r\n  utils.shotDownload(uri, filename);\r\n};\r\n\r\nMiew.prototype.save = function (opts) {\r\n  this._export(opts.fileType).then((dataString) => {\r\n    const filename = this._visuals[this._curVisualName]._complex.name;\r\n    utils.download(dataString, filename, opts.fileType);\r\n    this._refreshTitle();\r\n    this.dispatchEvent({ type: 'exportingDone' });\r\n  }).catch((error) => {\r\n    this.logger.error('Could not export data');\r\n    this.logger.debug(error);\r\n    this._refreshTitle();\r\n    this.dispatchEvent({ type: 'exportingDone', error });\r\n  });\r\n};\r\n\r\nMiew.prototype._tweakResolution = function () {\r\n  const maxPerf = [\r\n    ['poor', 100],\r\n    ['low', 500],\r\n    ['medium', 1000],\r\n    ['high', 5000],\r\n    ['ultra', Number.MAX_VALUE],\r\n  ];\r\n\r\n  let atomCount = 0;\r\n  this._forEachComplexVisual((visual) => {\r\n    atomCount += visual.getComplex().getAtomCount();\r\n  });\r\n\r\n  if (atomCount > 0) {\r\n    const performance = this._gfxScore * 10e5 / atomCount;\r\n    // set resolution based on estimated performance\r\n    for (let i = 0; i < maxPerf.length; ++i) {\r\n      if (performance < maxPerf[i][1]) {\r\n        this._autoChangeResolution(maxPerf[i][0]);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._autoChangeResolution = function (resolution) {\r\n  if (resolution !== settings.now.resolution) {\r\n    this.logger.report(`Your rendering resolution was changed to \"${resolution}\" for best performance.`);\r\n  }\r\n  settings.now.resolution = resolution;\r\n};\r\n\r\n/**\r\n * Save current settings to cookies.\r\n */\r\nMiew.prototype.saveSettings = function () {\r\n  this._cookies.setCookie(this._opts.settingsCookie, JSON.stringify(this.settings.getDiffs(true)));\r\n};\r\n\r\n/**\r\n * Load settings from cookies.\r\n */\r\nMiew.prototype.restoreSettings = function () {\r\n  try {\r\n    const cookie = this._cookies.getCookie(this._opts.settingsCookie);\r\n    const diffs = cookie ? JSON.parse(cookie) : {};\r\n    this.settings.applyDiffs(diffs, true);\r\n  } catch (e) {\r\n    this.logger.error(`Cookies parse error: ${e.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Reset current settings to the defaults.\r\n */\r\nMiew.prototype.resetSettings = function () {\r\n  this.settings.reset();\r\n};\r\n\r\n/*\r\n   * DANGEROUS and TEMPORARY. The method should change or disappear in future versions.\r\n   * @param {string|object} opts - See {@link Miew} constructor.\r\n   * @see {@link Miew#set}, {@link Miew#repAdd}, {@link Miew#rep}.\r\n   */\r\nMiew.prototype.setOptions = function (opts) {\r\n  if (typeof opts === 'string') {\r\n    opts = Miew.options.fromAttr(opts);\r\n  }\r\n  if (opts.reps) {\r\n    this._opts.reps = null;\r\n  }\r\n  _.merge(this._opts, opts);\r\n  if (opts.settings) {\r\n    this.set(opts.settings);\r\n  }\r\n\r\n  this._opts._objects = opts._objects;\r\n  this._resetObjects();\r\n\r\n  if (opts.load) {\r\n    this.load(opts.load, { fileType: opts.type });\r\n  }\r\n\r\n  if (opts.preset) {\r\n    settings.now.preset = opts.preset;\r\n  }\r\n\r\n  if (opts.reps) {\r\n    this.resetReps(opts.preset);\r\n  }\r\n\r\n  if (this._opts.view) {\r\n    this.view(this._opts.view);\r\n    delete this._opts.view;\r\n  }\r\n\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    visual.getComplex().resetCurrentUnit();\r\n    if (_.isNumber(opts.unit)) {\r\n      visual.getComplex().setCurrentUnit(opts.unit);\r\n    }\r\n    this.resetView();\r\n    this.rebuildAll();\r\n  }\r\n};\r\n\r\nMiew.prototype.info = function (name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return {};\r\n  }\r\n  const complex = visual.getComplex();\r\n  const { metadata } = complex;\r\n  return {\r\n    id: metadata.id || complex.name || 'UNKNOWN',\r\n    title: (metadata.title && metadata.title.join(' ')) || 'UNKNOWN DATA',\r\n    atoms: complex.getAtomCount(),\r\n    bonds: complex.getBondCount(),\r\n    residues: complex.getResidueCount(),\r\n    chains: complex.getChainCount(),\r\n  };\r\n};\r\n\r\n/*\r\n   * OBJECTS SEGMENT\r\n   */\r\n\r\nMiew.prototype.addObject = function (objData, bThrow) {\r\n  let Ctor = null;\r\n\r\n  if (objData.type === LinesObject.prototype.type) {\r\n    Ctor = LinesObject;\r\n  }\r\n\r\n  if (Ctor === null) {\r\n    throw new Error(`Unknown scene object type - ${objData.type}`);\r\n  }\r\n\r\n  try {\r\n    const newObj = new Ctor(objData.params, objData.opts);\r\n    this._addSceneObject(newObj);\r\n  } catch (error) {\r\n    if (!bThrow) {\r\n      this.logger.debug(`Error during scene object creation: ${error.message}`);\r\n    } else {\r\n      throw error;\r\n    }\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._addSceneObject = function (sceneObject) {\r\n  const visual = this._getComplexVisual();\r\n  if (sceneObject.build && visual) {\r\n    sceneObject.build(visual.getComplex());\r\n    this._gfx.pivot.add(sceneObject.getGeometry());\r\n  }\r\n  const objects = this._objects;\r\n  objects[objects.length] = sceneObject;\r\n};\r\n\r\nMiew.prototype._updateObjsToFrame = function (frameData) {\r\n  const objs = this._objects;\r\n  for (let i = 0, n = objs.length; i < n; ++i) {\r\n    if (objs[i].updateToFrame) {\r\n      objs[i].updateToFrame(frameData);\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._resetObjects = function () {\r\n  const objs = this._opts._objects;\r\n\r\n  this._objects = [];\r\n  if (objs) {\r\n    for (let i = 0, n = objs.length; i < n; ++i) {\r\n      this.addObject(objs[i], false);\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype.removeObject = function (index) {\r\n  const obj = this._objects[index];\r\n  if (!obj) {\r\n    throw new Error(`Scene object with index ${index} does not exist`);\r\n  }\r\n  obj.destroy();\r\n  this._objects.splice(index, 1);\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Get a string with a URL to reproduce the current scene.\r\n *\r\n * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n * preset information regardless of the differences with settings\r\n * @param {boolean} [opts.settings=false] - when this flag is true, changes in settings are included\r\n * @param {boolean} [opts.view=false] - when this flag is true, a view information is included\r\n * @returns {string} URL\r\n */\r\nMiew.prototype.getURL = function (opts) {\r\n  return options.toURL(this.getState(_.defaults(opts, {\r\n    compact: true,\r\n    settings: false,\r\n    view: false,\r\n  })));\r\n};\r\n\r\n/**\r\n * Get a string with a script to reproduce the current scene.\r\n *\r\n * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n * preset information regardless of the differences with settings\r\n * @param {boolean} [opts.settings=true] - when this flag is true, changes in settings are included\r\n * @param {boolean} [opts.view=true] - when this flag is true, a view information is included\r\n * @returns {string} script\r\n */\r\nMiew.prototype.getScript = function (opts) {\r\n  return options.toScript(this.getState(_.defaults(opts, {\r\n    compact: true,\r\n    settings: true,\r\n    view: true,\r\n  })));\r\n};\r\n\r\n/*\r\n   * Generates object that represents the current state of representations list\r\n   * @param {boolean} compareWithDefaults - when this flag is true, reps list is compared (if possible)\r\n   * to preset's defaults and only diffs are generated\r\n   */\r\nMiew.prototype._compareReps = function (complexVisual, compareWithDefaults) {\r\n  const ans = {};\r\n  let repCount = 0;\r\n\r\n  if (complexVisual) {\r\n    repCount = complexVisual.repCount();\r\n  }\r\n\r\n  const currPreset = settings.defaults.presets[settings.now.preset];\r\n  let compare = compareWithDefaults;\r\n  if (currPreset === undefined || currPreset.length > repCount) {\r\n    compare = false;\r\n    ans.preset = 'empty';\r\n  } else if (settings.now.preset !== settings.defaults.preset) {\r\n    ans.preset = settings.now.preset;\r\n  }\r\n\r\n  const repsDiff = [];\r\n  let emptyReps = true;\r\n  for (let i = 0, n = repCount; i < n; ++i) {\r\n    repsDiff[i] = complexVisual.repGet(i).compare(compare ? currPreset[i] : null);\r\n    if (!_.isEmpty(repsDiff[i])) {\r\n      emptyReps = false;\r\n    }\r\n  }\r\n  if (!emptyReps) {\r\n    ans.reps = repsDiff;\r\n  }\r\n  return ans;\r\n};\r\n\r\n/*\r\n   * Obtain object that represents current state of miew (might be used as options in constructor).\r\n   * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n   * preset information regardless of the differences with settings\r\n   * @param {boolean} [opts.settings=false] - when this flag is true, changes in settings are included\r\n   * @param {boolean} [opts.view=false] - when this flag is true, a view information is included\r\n   * @returns {Object} State object.\r\n   */\r\nMiew.prototype.getState = function (opts) {\r\n  const state = {};\r\n\r\n  opts = _.defaults(opts, {\r\n    compact: true,\r\n    settings: false,\r\n    view: false,\r\n  });\r\n\r\n  // load\r\n  const visual = this._getComplexVisual();\r\n  if (visual !== null) {\r\n    const complex = visual.getComplex();\r\n    const { metadata } = complex;\r\n    if (metadata.id) {\r\n      const format = metadata.format ? `${metadata.format}:` : '';\r\n      state.load = format + metadata.id;\r\n    }\r\n    const unit = complex.getCurrentUnit();\r\n    if (unit !== 1) {\r\n      state.unit = unit;\r\n    }\r\n  }\r\n\r\n  // representations\r\n  const repsInfo = this._compareReps(visual, opts.compact);\r\n  if (repsInfo.preset) {\r\n    state.preset = repsInfo.preset;\r\n  }\r\n\r\n  if (repsInfo.reps) {\r\n    state.reps = repsInfo.reps;\r\n  }\r\n\r\n  // objects\r\n  const objects = this._objects;\r\n  const objectsState = [];\r\n  for (let i = 0, n = objects.length; i < n; ++i) {\r\n    objectsState[i] = objects[i].identify();\r\n  }\r\n  if (objects.length > 0) {\r\n    state._objects = objectsState;\r\n  }\r\n\r\n  // view\r\n  if (opts.view) {\r\n    state.view = this.view();\r\n  }\r\n\r\n  // settings\r\n  if (opts.settings) {\r\n    const diff = this.settings.getDiffs(false);\r\n    if (!_.isEmpty(diff)) {\r\n      state.settings = diff;\r\n    }\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\n/**\r\n * Get parameter value.\r\n * @param {string} param - Parameter name or path (e.g. 'modes.BS.atom').\r\n * @param {*=} value - Default value.\r\n * @returns {*} Parameter value.\r\n */\r\nMiew.prototype.get = function (param, value) {\r\n  return settings.get(param, value);\r\n};\r\n\r\nMiew.prototype._clipPlaneUpdateValue = function (radius) {\r\n  const clipPlaneValue = Math.max(\r\n    this._gfx.camera.position.z - radius * settings.now.draft.clipPlaneFactor,\r\n    settings.now.camNear,\r\n  );\r\n\r\n  const opts = { clipPlaneValue };\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setUberOptions(opts);\r\n  });\r\n  for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n    const obj = this._objects[i];\r\n    if (obj._line) {\r\n      obj._line.material.setUberOptions(opts);\r\n    }\r\n  }\r\n  if (this._picker !== null) {\r\n    this._picker.clipPlaneValue = clipPlaneValue;\r\n  }\r\n};\r\n\r\nMiew.prototype._fogFarUpdateValue = function () {\r\n  if (this._picker !== null) {\r\n    if (this._gfx.scene.fog) {\r\n      this._picker.fogFarValue = this._gfx.scene.fog.far;\r\n    } else {\r\n      this._picker.fogFarValue = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._updateShadowmapMeshes = function (process) {\r\n  this._forEachComplexVisual((visual) => {\r\n    const reprList = visual._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      const repr = reprList[i];\r\n      process(repr.geo, repr.material);\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype._updateMaterials = function (values, needTraverse = false, process = undefined) {\r\n  this._forEachComplexVisual((visual) => visual.setMaterialValues(values, needTraverse, process));\r\n  for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n    const obj = this._objects[i];\r\n    if (obj._line) {\r\n      obj._line.material.setValues(values);\r\n      obj._line.material.needsUpdate = true;\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._fogAlphaChanged = function () {\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setUberOptions({\r\n      fogAlpha: settings.now.fogAlpha,\r\n    });\r\n  });\r\n};\r\n\r\nMiew.prototype._embedWebXR = function () {\r\n  // switch off\r\n  if (settings.now.stereo !== 'WEBVR') {\r\n    if (this.webVR) {\r\n      this.webVR.disable();\r\n    }\r\n    this.webVR = null;\r\n    return;\r\n  }\r\n  // switch on\r\n  if (!this.webVR) {\r\n    this.webVR = new WebVRPoC(() => {\r\n      this._requestAnimationFrame(() => this._onTick());\r\n      this._needRender = true;\r\n      this._onResize();\r\n    });\r\n  }\r\n  this.webVR.enable(this._gfx);\r\n};\r\n\r\nMiew.prototype._initOnSettingsChanged = function () {\r\n  const on = (props, func) => {\r\n    props = _.isArray(props) ? props : [props];\r\n    props.forEach((prop) => {\r\n      this.settings.addEventListener(`change:${prop}`, func);\r\n    });\r\n  };\r\n\r\n  on('modes.VD.frame', () => {\r\n    const volume = this._getVolumeVisual();\r\n    if (volume === null) return;\r\n\r\n    volume.showFrame(settings.now.modes.VD.frame);\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('modes.VD.isoMode', () => {\r\n    const volume = this._getVolumeVisual();\r\n    if (volume === null) return;\r\n\r\n    volume.getMesh().material.updateDefines();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('bg.color', () => {\r\n    this._onBgColorChanged();\r\n  });\r\n\r\n  on('ao', () => {\r\n    if (settings.now.ao && !isAOSupported(this._gfx.renderer.getContext())) {\r\n      this.logger.warn('Your device or browser does not support ao');\r\n      settings.set('ao', false);\r\n    } else {\r\n      const values = { normalsToGBuffer: settings.now.ao };\r\n      this._setUberMaterialValues(values);\r\n    }\r\n  });\r\n\r\n  on('zSprites', () => {\r\n    if (settings.now.zSprites && !arezSpritesSupported(this._gfx.renderer.getContext())) {\r\n      this.logger.warn('Your device or browser does not support zSprites');\r\n      settings.set('zSprites', false);\r\n    }\r\n  });\r\n\r\n  on('fogColor', () => {\r\n    this._onFogColorChanged();\r\n  });\r\n\r\n  on('fogColorEnable', () => {\r\n    this._onFogColorChanged();\r\n  });\r\n\r\n  on('bg.transparent', (evt) => {\r\n    const gfx = this._gfx;\r\n    if (gfx) {\r\n      gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    }\r\n    // update materials\r\n    this._updateMaterials({ fogTransparent: evt.value });\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('draft.clipPlane', (evt) => {\r\n    // update materials\r\n    this._updateMaterials({ clipPlane: evt.value });\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('shadow.on', (evt) => {\r\n    // update materials\r\n    const values = { shadowmap: evt.value, shadowmapType: settings.now.shadow.type };\r\n    const gfx = this._gfx;\r\n    if (gfx) {\r\n      gfx.renderer.shadowMap.enabled = Boolean(values.shadowmap);\r\n    }\r\n    this._updateMaterials(values, true);\r\n    if (values.shadowmap) {\r\n      this._updateShadowCamera();\r\n      this._updateShadowmapMeshes(gfxutils.createShadowmapMaterial);\r\n    } else {\r\n      this._updateShadowmapMeshes(gfxutils.removeShadowmapMaterial);\r\n    }\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('shadow.type', (evt) => {\r\n    // update materials if shadowmap is enable\r\n    if (settings.now.shadow.on) {\r\n      this._updateMaterials({ shadowmapType: evt.value }, true);\r\n      this._needRender = true;\r\n    }\r\n  });\r\n\r\n  on('shadow.radius', (evt) => {\r\n    for (let i = 0; i < this._gfx.scene.children.length; i++) {\r\n      if (this._gfx.scene.children[i].shadow !== undefined) {\r\n        const light = this._gfx.scene.children[i];\r\n        light.shadow.radius = evt.value;\r\n        this._needRender = true;\r\n      }\r\n    }\r\n  });\r\n\r\n  on('fps', () => {\r\n    this._fps.show(settings.now.fps);\r\n  });\r\n\r\n  on(['fog', 'fogNearFactor', 'fogFarFactor'], () => {\r\n    this._updateFog();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('fogAlpha', () => {\r\n    const { fogAlpha } = settings.now;\r\n    if (fogAlpha < 0 || fogAlpha > 1) {\r\n      this.logger.warn('fogAlpha must belong range [0,1]');\r\n    }\r\n    this._fogAlphaChanged();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('autoResolution', (evt) => {\r\n    if (evt.value && !this._gfxScore) {\r\n      this.logger.warn('Benchmarks are missed, autoresolution will not work! '\r\n        + 'Autoresolution should be set during miew startup.');\r\n    }\r\n  });\r\n\r\n  on('stereo', () => {\r\n    this._embedWebXR(settings.now.stereo === 'WEBVR');\r\n    this._needRender = true;\r\n  });\r\n\r\n  on(['transparency', 'palette'], () => {\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('resolution', () => {\r\n    // update complex visuals\r\n    this.rebuildAll();\r\n\r\n    // update volume visual\r\n    const volume = this._getVolumeVisual();\r\n    if (volume) {\r\n      volume.getMesh().material.updateDefines();\r\n      this._needRender = true;\r\n    }\r\n  });\r\n\r\n  on(['axes', 'fxaa', 'ao',\r\n    'outline.on', 'outline.color', 'outline.threshold', 'outline.thickness'], () => {\r\n    this._needRender = true;\r\n  });\r\n};\r\n\r\n/**\r\n * Set parameter value.\r\n * @param {string|object} params - Parameter name or path (e.g. 'modes.BS.atom') or even settings object.\r\n * @param {*=} value - Value.\r\n */\r\nMiew.prototype.set = function (params, value) {\r\n  settings.set(params, value);\r\n};\r\n\r\n/**\r\n * Select atoms with selection string.\r\n * @param {string} expression - string expression of selection\r\n * @param {boolean=} append - true to append selection atoms to current selection, false to rewrite selection\r\n */\r\nMiew.prototype.select = function (expression, append) {\r\n  const visual = this._getComplexVisual();\r\n  if (!visual) {\r\n    return;\r\n  }\r\n\r\n  let sel = expression;\r\n  if (_.isString(expression)) {\r\n    sel = selectors.parse(expression).selector;\r\n  }\r\n\r\n  visual.select(sel, append);\r\n  this._lastPick = null;\r\n\r\n  this._updateInfoPanel();\r\n  this._needRender = true;\r\n};\r\n\r\nconst VIEW_VERSION = '1';\r\n\r\n/**\r\n * Get or set view info packed into string.\r\n *\r\n * **Note:** view is stored for *left-handed* cs, euler angles are stored in radians and *ZXY-order*,\r\n *\r\n * @param {string=} expression - Optional string encoded the view\r\n */\r\nMiew.prototype.view = function (expression) {\r\n  const self = this;\r\n  const { pivot } = this._gfx;\r\n  let transform = [];\r\n  const eulerOrder = 'ZXY';\r\n\r\n  function encode() {\r\n    const pos = pivot.position;\r\n    const scale = self._objectControls.getScale() / settings.now.radiusToFit;\r\n    const euler = new THREE.Euler();\r\n    euler.setFromQuaternion(self._objectControls.getOrientation(), eulerOrder);\r\n    transform = [\r\n      pos.x, pos.y, pos.z,\r\n      scale,\r\n      euler.x, euler.y, euler.z,\r\n    ];\r\n    return VIEW_VERSION + utils.arrayToBase64(transform, Float32Array);\r\n  }\r\n\r\n  function decode() {\r\n    // backwards compatible: old non-versioned view is the 0th version\r\n    if (expression.length === 40) {\r\n      expression = `0${expression}`;\r\n    }\r\n\r\n    const version = expression[0];\r\n    transform = utils.arrayFromBase64(expression.substr(1), Float32Array);\r\n\r\n    // apply adapter for old versions\r\n    if (version !== VIEW_VERSION) {\r\n      if (version === '0') {\r\n        // cancel radiusToFit included in old views\r\n        transform[3] /= 8.0;\r\n      } else {\r\n        // do nothing\r\n        self.logger.warn(`Encoded view version mismatch, stored as ${version} vs ${VIEW_VERSION} expected`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const interpolator = self._interpolator;\r\n    const srcView = interpolator.createView();\r\n    srcView.position.copy(pivot.position);\r\n    srcView.scale = self._objectControls.getScale();\r\n    srcView.orientation.copy(self._objectControls.getOrientation());\r\n\r\n    const dstView = interpolator.createView();\r\n    dstView.position.set(transform[0], transform[1], transform[2]);\r\n\r\n    // hack to make preset views work after we moved centering offset to visual nodes\r\n    // FIXME should only store main pivot offset in preset\r\n    if (self._getComplexVisual()) {\r\n      dstView.position.sub(self._getComplexVisual().position);\r\n    }\r\n\r\n    dstView.scale = transform[3]; // eslint-disable-line prefer-destructuring\r\n    dstView.orientation.setFromEuler(new THREE.Euler(transform[4], transform[5], transform[6], eulerOrder));\r\n\r\n    interpolator.setup(srcView, dstView);\r\n  }\r\n\r\n  if (typeof expression === 'undefined') {\r\n    return encode();\r\n  }\r\n  decode();\r\n\r\n  return expression;\r\n};\r\n\r\n/*\r\n   * Update current view due to viewinterpolator state\r\n   */\r\nMiew.prototype._updateView = function () {\r\n  const self = this;\r\n  const { pivot } = this._gfx;\r\n\r\n  const interpolator = this._interpolator;\r\n  if (!interpolator.wasStarted()) {\r\n    interpolator.start();\r\n  }\r\n\r\n  if (!interpolator.isMoving()) {\r\n    return;\r\n  }\r\n\r\n  const res = interpolator.getCurrentView();\r\n  if (res.success) {\r\n    const curr = res.view;\r\n    pivot.position.copy(curr.position);\r\n    self._objectControls.setScale(curr.scale * settings.now.radiusToFit);\r\n    self._objectControls.setOrientation(curr.orientation);\r\n    this.dispatchEvent({ type: 'transform' });\r\n    self._needRender = true;\r\n  }\r\n};\r\n\r\n/**\r\n * Translate object by vector\r\n * @param {number} x - translation value (Ang) along model's X axis\r\n * @param {number} y - translation value (Ang) along model's Y axis\r\n * @param {number} z - translation value (Ang) along model's Z axis\r\n */\r\nMiew.prototype.translate = function (x, y, z) {\r\n  this._objectControls.translatePivot(x, y, z);\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Rotate object by Euler angles\r\n * @param {number} x - rotation angle around X axis in radians\r\n * @param {number} y - rotation angle around Y axis in radians\r\n * @param {number} z - rotation angle around Z axis in radians\r\n */\r\nMiew.prototype.rotate = function (x, y, z) {\r\n  this._objectControls.rotate(new THREE.Quaternion().setFromEuler(new THREE.Euler(x, y, z, 'XYZ')));\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Scale object by factor\r\n * @param {number} factor - scale multiplier, should greater than zero\r\n */\r\nMiew.prototype.scale = function (factor) {\r\n  if (factor <= 0) {\r\n    throw new RangeError('Scale should be greater than zero');\r\n  }\r\n  this._objectControls.scale(factor);\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Center view on selection\r\n * @param {empty | subset | string} selector - defines part of molecule which must be centered (\r\n * empty - center on current selection;\r\n * subset - center on picked atom/residue/molecule;\r\n * string - center on atoms correspond to selection string)\r\n */\r\nMiew.prototype.center = function (selector) {\r\n  // no arguments - center on current selection;\r\n  if (selector === undefined) {\r\n    this.setPivotSubset();\r\n    this._needRender = true;\r\n    return;\r\n  }\r\n  // subset with atom or residue - center on picked atom/residue;\r\n  if (selector.obj !== undefined && ('atom' in selector.obj || 'residue' in selector.obj)) { // from event with selection\r\n    if ('atom' in selector.obj) {\r\n      this.setPivotAtom(selector.obj.atom);\r\n    } else {\r\n      this.setPivotResidue(selector.obj.residue);\r\n    }\r\n    this._needRender = true;\r\n    return;\r\n  }\r\n  // string - center on atoms correspond to selection string\r\n  if (selector.obj === undefined && selector !== '') {\r\n    const sel = selectors.parse(selector);\r\n    if (sel.error === undefined) {\r\n      this.setPivotSubset(sel);\r\n      this._needRender = true;\r\n      return;\r\n    }\r\n  }\r\n  // empty subset or incorrect/empty string - center on all molecule;\r\n  this.resetPivot();\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Build selector that contains all atoms within given distance from group of atoms\r\n * @param {Selector} selector - selector describing source group of atoms\r\n * @param {number} radius - distance\r\n * @returns {Selector} selector describing result group of atoms\r\n */\r\nMiew.prototype.within = function (selector, radius) {\r\n  const visual = this._getComplexVisual();\r\n  if (!visual) {\r\n    return selectors.None();\r\n  }\r\n\r\n  if (selector instanceof String) {\r\n    selector = selectors.parse(selector);\r\n  }\r\n\r\n  const res = visual.within(selector, radius);\r\n  if (res) {\r\n    visual.rebuildSelectionGeometry();\r\n    this._needRender = true;\r\n  }\r\n  return res;\r\n};\r\n\r\n/**\r\n * Get atom position in 2D canvas coords\r\n * @param {string} fullAtomName - full atom name, like A.38.CG\r\n * @returns {Object} {x, y} or false if atom not found\r\n */\r\nMiew.prototype.projected = function (fullAtomName, complexName) {\r\n  const visual = this._getComplexVisual(complexName);\r\n  if (!visual) {\r\n    return false;\r\n  }\r\n\r\n  const atom = visual.getComplex().getAtomByFullname(fullAtomName);\r\n  if (atom === null) {\r\n    return false;\r\n  }\r\n\r\n  const pos = atom.position.clone();\r\n  // we consider atom position to be affected only by common complex transform\r\n  // ignoring any transformations that may add during editing\r\n  this._gfx.pivot.updateMatrixWorldRecursive();\r\n  this._gfx.camera.updateMatrixWorldRecursive();\r\n  this._gfx.pivot.localToWorld(pos);\r\n  pos.project(this._gfx.camera);\r\n\r\n  return {\r\n    x: (pos.x + 1.0) * 0.5 * this._gfx.width,\r\n    y: (1.0 - pos.y) * 0.5 * this._gfx.height,\r\n  };\r\n};\r\n\r\n/**\r\n * Replace secondary structure with calculated one.\r\n *\r\n * DSSP algorithm implementation is used.\r\n *\r\n * Kabsch W, Sander C. 1983. Dictionary of protein secondary structure: pattern recognition of hydrogen-bonded and\r\n * geometrical features. Biopolymers. 22(12):2577-2637. doi:10.1002/bip.360221211.\r\n *\r\n * @param {string=} complexName - complex name\r\n */\r\nMiew.prototype.dssp = function (complexName) {\r\n  const visual = this._getComplexVisual(complexName);\r\n  if (!visual) {\r\n    return;\r\n  }\r\n  visual.getComplex().dssp();\r\n\r\n  // rebuild dependent representations (cartoon or ss-colored)\r\n  visual._reprList.forEach((rep) => {\r\n    if (rep.mode.id === 'CA' || rep.colorer.id === 'SS') {\r\n      rep.needsRebuild = true;\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype.exportCML = function () {\r\n  const self = this;\r\n\r\n  function extractRotation(m) {\r\n    const xAxis = new THREE.Vector3();\r\n    const yAxis = new THREE.Vector3();\r\n    const zAxis = new THREE.Vector3();\r\n    m.extractBasis(xAxis, yAxis, zAxis);\r\n    xAxis.normalize();\r\n    yAxis.normalize();\r\n    zAxis.normalize();\r\n    const retMat = new THREE.Matrix4();\r\n    retMat.identity();\r\n    retMat.makeBasis(xAxis, yAxis, zAxis);\r\n    return retMat;\r\n  }\r\n\r\n  function updateCMLData(complex) {\r\n    const { root } = self._gfx;\r\n    const mat = extractRotation(root.matrixWorld);\r\n    const v4 = new THREE.Vector4(0, 0, 0, 0);\r\n    const vCenter = new THREE.Vector4(0, 0, 0, 0);\r\n    let xml = null;\r\n    let ap = null;\r\n\r\n    // update atoms in cml\r\n    complex.forEachAtom((atom) => {\r\n      if (atom.xmlNodeRef && atom.xmlNodeRef.xmlNode) {\r\n        xml = atom.xmlNodeRef.xmlNode;\r\n        ap = atom.position;\r\n        v4.set(ap.x, ap.y, ap.z, 1.0);\r\n        v4.applyMatrix4(mat);\r\n        xml.setAttribute('x3', v4.x.toString());\r\n        xml.setAttribute('y3', v4.y.toString());\r\n        xml.setAttribute('z3', v4.z.toString());\r\n        xml.removeAttribute('x2');\r\n        xml.removeAttribute('y2');\r\n      }\r\n    });\r\n    // update stereo groups in cml\r\n    complex.forEachSGroup((sGroup) => {\r\n      if (sGroup.xmlNodeRef && sGroup.xmlNodeRef.xmlNode) {\r\n        xml = sGroup.xmlNodeRef.xmlNode;\r\n        ap = sGroup.getPosition();\r\n        v4.set(ap.x, ap.y, ap.z, 1.0);\r\n        const cp = sGroup.getCentralPoint();\r\n        if (cp === null) {\r\n          v4.applyMatrix4(mat);\r\n        } else {\r\n          vCenter.set(cp.x, cp.y, cp.z, 0.0);\r\n          v4.add(vCenter);\r\n          v4.applyMatrix4(mat); // pos in global space\r\n          vCenter.set(cp.x, cp.y, cp.z, 1.0);\r\n          vCenter.applyMatrix4(mat);\r\n          v4.sub(vCenter);\r\n        }\r\n        xml.setAttribute('x', v4.x.toString());\r\n        xml.setAttribute('y', v4.y.toString());\r\n        xml.setAttribute('z', v4.z.toString());\r\n      }\r\n    });\r\n  }\r\n\r\n  const visual = self._getComplexVisual();\r\n  const complex = visual ? visual.getComplex() : null;\r\n  if (complex && complex.originalCML) {\r\n    updateCMLData(complex);\r\n\r\n    // serialize xml structure to string\r\n    const oSerializer = new XMLSerializer();\r\n    return oSerializer.serializeToString(complex.originalCML);\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Reproduce the RCSB PDB Molecule of the Month style by David S. Goodsell\r\n *\r\n * @see http://pdb101.rcsb.org/motm/motm-about\r\n */\r\nMiew.prototype.motm = function () {\r\n  settings.set({\r\n    fogColorEnable: true,\r\n    fogColor: 0x000000,\r\n    outline: { on: true, threshold: 0.01 },\r\n    bg: { color: 0xffffff },\r\n  });\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    const rep = [];\r\n    const complex = visual.getComplex();\r\n    const palette = palettes.get(settings.now.palette);\r\n    for (let i = 0; i < complex.getChainCount(); i++) {\r\n      const curChainName = complex._chains[i]._name;\r\n      const curChainColor = palette.getChainColor(curChainName);\r\n      rep[i] = {\r\n        selector: `chain ${curChainName}`,\r\n        mode: 'VW',\r\n        colorer: ['CB', { color: curChainColor, factor: 0.9 }],\r\n        material: 'FL',\r\n      };\r\n    }\r\n    visual.resetReps(rep);\r\n  });\r\n};\r\n\r\nMiew.prototype.VERSION = (typeof PACKAGE_VERSION !== 'undefined' && PACKAGE_VERSION) || '0.0.0-dev';\r\n\r\n// Uncomment this to get debug trace:\r\n// Miew.prototype.debugTracer = new utils.DebugTracer(Miew.prototype);\r\n\r\n_.assign(Miew, /** @lends Miew */ {\r\n  VERSION: Miew.prototype.VERSION,\r\n\r\n  registeredPlugins: [],\r\n\r\n  // export namespaces // TODO: WIP: refactoring external interface\r\n  chem,\r\n  io,\r\n  modes,\r\n  colorers,\r\n  materials,\r\n  palettes,\r\n  options,\r\n  settings,\r\n  utils,\r\n  gfx: {\r\n    Representation,\r\n  },\r\n\r\n  /**\r\n   * Third-party libraries packaged together with Miew.\r\n   *\r\n   * @property {object} lodash - [Lodash](https://lodash.com/), a modern JavaScript utility library delivering\r\n   *   modularity, performance & extras.\r\n   * @property {object} three - [three.js](https://threejs.org/), JavaScript 3D library.\r\n   *\r\n   * @example\r\n   * var _ = Miew.thirdParty.lodash;\r\n   * var opts = _.merge({ ... }, Miew.options.fromURL(window.location.search));\r\n   * var miew = new Miew(opts);\r\n   */\r\n  thirdParty: {\r\n    lodash: _,\r\n    three: THREE,\r\n  },\r\n});\r\n\r\nexport default Miew;\r\n","/* eslint-disable */\r\n// DO NOT EDIT! Automatically generated from .jison\r\n/* parser generated by jison 0.4.18 */\r\n/*\r\n  Returns a Parser object of the following structure:\r\n\r\n  Parser: {\r\n    yy: {}\r\n  }\r\n\r\n  Parser.prototype: {\r\n    yy: {},\r\n    trace: function(),\r\n    symbols_: {associative list: name ==> number},\r\n    terminals_: {associative list: number ==> name},\r\n    productions_: [...],\r\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\r\n    table: [...],\r\n    defaultActions: {...},\r\n    parseError: function(str, hash),\r\n    parse: function(input),\r\n\r\n    lexer: {\r\n        EOF: 1,\r\n        parseError: function(str, hash),\r\n        setInput: function(input),\r\n        input: function(),\r\n        unput: function(str),\r\n        more: function(),\r\n        less: function(n),\r\n        pastInput: function(),\r\n        upcomingInput: function(),\r\n        showPosition: function(),\r\n        test_match: function(regex_match_array, rule_index),\r\n        next: function(),\r\n        lex: function(),\r\n        begin: function(condition),\r\n        popState: function(),\r\n        _currentRules: function(),\r\n        topState: function(),\r\n        pushState: function(condition),\r\n\r\n        options: {\r\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\r\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\r\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\r\n        },\r\n\r\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\r\n        rules: [...],\r\n        conditions: {associative list: name ==> set},\r\n    }\r\n  }\r\n\r\n\r\n  token location info (@$, _$, etc.): {\r\n    first_line: n,\r\n    last_line: n,\r\n    first_column: n,\r\n    last_column: n,\r\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\r\n  }\r\n\r\n\r\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\r\n    text:        (matched text)\r\n    token:       (the produced terminal token, if any)\r\n    line:        (yylineno)\r\n  }\r\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\r\n    loc:         (yylloc)\r\n    expected:    (string describing the set of expected tokens)\r\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\r\n  }\r\n*/\r\nvar parser = (function(){\r\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,60],$V1=[1,62],$V2=[1,63],$V3=[1,65],$V4=[1,66],$V5=[1,67],$V6=[1,68],$V7=[1,69],$V8=[1,80],$V9=[1,72],$Va=[1,73],$Vb=[1,74],$Vc=[1,75],$Vd=[1,99],$Ve=[1,76],$Vf=[1,100],$Vg=[1,79],$Vh=[1,51],$Vi=[1,81],$Vj=[1,82],$Vk=[1,84],$Vl=[1,83],$Vm=[1,85],$Vn=[1,96],$Vo=[1,97],$Vp=[1,98],$Vq=[1,86],$Vr=[1,87],$Vs=[1,64],$Vt=[1,70],$Vu=[1,71],$Vv=[1,77],$Vw=[1,78],$Vx=[1,53],$Vy=[1,54],$Vz=[1,55],$VA=[1,61],$VB=[1,88],$VC=[1,89],$VD=[1,90],$VE=[1,91],$VF=[1,92],$VG=[1,93],$VH=[1,94],$VI=[1,95],$VJ=[1,101],$VK=[1,102],$VL=[1,103],$VM=[1,104],$VN=[1,105],$VO=[1,56],$VP=[1,57],$VQ=[1,58],$VR=[1,59],$VS=[1,115],$VT=[1,111],$VU=[1,114],$VV=[1,112],$VW=[1,113],$VX=[1,118],$VY=[1,117],$VZ=[1,134],$V_=[1,149],$V$=[1,150],$V01=[1,157],$V11=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],$V21=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,71,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],$V31=[5,6,7,9,13,15,17,18,19,20,23,25,26,27,30,33,34,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,82,83,84,85,86,87,88,89,90,91,92,93,94,95],$V41=[5,70,72],$V51=[5,74],$V61=[71,101];\r\nvar parser = {trace: function trace () { },\r\nyy: {},\r\nsymbols_: {\"error\":2,\"Program\":3,\"Command\":4,\"EOF\":5,\"RESET\":6,\"BUILD\":7,\"ALL\":8,\"HELP\":9,\"Path\":10,\"MOTM\":11,\"OneArgCommand\":12,\"GET\":13,\"STRING\":14,\"SET\":15,\"Value\":16,\"SET_SAVE\":17,\"SET_RESTORE\":18,\"SET_RESET\":19,\"PRESET\":20,\"AddRepresentation\":21,\"EditRepresentation\":22,\"REMOVE\":23,\"RepresentationReference\":24,\"HIDE\":25,\"SHOW\":26,\"LIST\":27,\"EXPAND_KEY\":28,\"SELECTOR_KEY\":29,\"SELECT\":30,\"AS\":31,\"WordAll\":32,\"SELECTOR\":33,\"WITHIN\":34,\"NUMBER\":35,\"OF\":36,\"MATERIAL\":37,\"IDENTIFIER\":38,\"ModeCMD\":39,\"ColorCMD\":40,\"VIEW\":41,\"BASE_64\":42,\"UNIT\":43,\"DSSP\":44,\"SCALE\":45,\"ROTATE\":46,\"AxesList\":47,\"TRANSLATE\":48,\"CENTER\":49,\"GetURLBranch\":50,\"Screenshot\":51,\"LINE\":52,\"ArgList\":53,\"LISTOBJ\":54,\"REMOVEOBJ\":55,\"URL\":56,\"VIEW_KEY\":57,\"SCREENSHOT\":58,\"LOAD\":59,\"Url\":60,\"FILE_KEY\":61,\"ADD\":62,\"Description\":63,\"REP\":64,\"MODE\":65,\"COLOR\":66,\"Descriptor\":67,\"RepresentationOwnProperty\":68,\"RepresentationOwnPropertyOpts\":69,\"DESC_KEY\":70,\"=\":71,\"DESC_KEY_OPTS\":72,\"AxesArg\":73,\"DESC_KEY_AXES\":74,\"Arg\":75,\"PathWoDescKey\":76,\"HEX\":77,\"BOOL\":78,\"Word\":79,\"CommandSetWoDESC_KEY\":80,\"DescKeys\":81,\"CLEAR\":82,\"FILE_LIST\":83,\"FILE_REGISTER\":84,\"FILE_DELETE\":85,\"PRESET_ADD\":86,\"PRESET_DELETE\":87,\"PRESET_UPDATE\":88,\"PRESET_RENAME\":89,\"PRESET_OPEN\":90,\"CREATE_SCENARIO\":91,\"RESET_SCENARIO\":92,\"DELETE_SCENARIO\":93,\"ADD_SCENARIO_ITEM\":94,\"LIST_SCENARIO\":95,\"PDB_KEY\":96,\"DELAY_KEY\":97,\"PRST_KEY\":98,\"DESCRIPTION_KEY\":99,\"CommandSet\":100,\".\":101,\"PresetPath\":102,\"/\":103,\"HexOrNumber\":104,\"$accept\":0,\"$end\":1},\r\nterminals_: {2:\"error\",5:\"EOF\",6:\"RESET\",7:\"BUILD\",8:\"ALL\",9:\"HELP\",11:\"MOTM\",13:\"GET\",14:\"STRING\",15:\"SET\",17:\"SET_SAVE\",18:\"SET_RESTORE\",19:\"SET_RESET\",20:\"PRESET\",23:\"REMOVE\",25:\"HIDE\",26:\"SHOW\",27:\"LIST\",28:\"EXPAND_KEY\",29:\"SELECTOR_KEY\",30:\"SELECT\",31:\"AS\",33:\"SELECTOR\",34:\"WITHIN\",35:\"NUMBER\",36:\"OF\",37:\"MATERIAL\",38:\"IDENTIFIER\",41:\"VIEW\",42:\"BASE_64\",43:\"UNIT\",44:\"DSSP\",45:\"SCALE\",46:\"ROTATE\",48:\"TRANSLATE\",49:\"CENTER\",52:\"LINE\",54:\"LISTOBJ\",55:\"REMOVEOBJ\",56:\"URL\",57:\"VIEW_KEY\",58:\"SCREENSHOT\",59:\"LOAD\",61:\"FILE_KEY\",62:\"ADD\",64:\"REP\",65:\"MODE\",66:\"COLOR\",70:\"DESC_KEY\",71:\"=\",72:\"DESC_KEY_OPTS\",74:\"DESC_KEY_AXES\",77:\"HEX\",78:\"BOOL\",82:\"CLEAR\",83:\"FILE_LIST\",84:\"FILE_REGISTER\",85:\"FILE_DELETE\",86:\"PRESET_ADD\",87:\"PRESET_DELETE\",88:\"PRESET_UPDATE\",89:\"PRESET_RENAME\",90:\"PRESET_OPEN\",91:\"CREATE_SCENARIO\",92:\"RESET_SCENARIO\",93:\"DELETE_SCENARIO\",94:\"ADD_SCENARIO_ITEM\",95:\"LIST_SCENARIO\",96:\"PDB_KEY\",97:\"DELAY_KEY\",98:\"PRST_KEY\",99:\"DESCRIPTION_KEY\",101:\".\",103:\"/\"},\r\nproductions_: [0,[3,2],[3,1],[4,1],[4,1],[4,2],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,3],[4,3],[4,1],[4,1],[4,1],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,2],[4,2],[4,1],[4,2],[4,2],[4,2],[4,4],[4,2],[4,6],[4,2],[4,1],[4,1],[4,1],[4,2],[4,2],[4,1],[4,2],[4,1],[4,2],[4,2],[4,2],[4,1],[4,2],[4,1],[4,1],[4,3],[4,3],[4,4],[4,4],[4,1],[4,2],[50,1],[50,2],[50,2],[50,3],[50,3],[51,1],[51,2],[51,3],[12,2],[12,2],[12,2],[21,1],[21,2],[21,2],[21,3],[22,2],[22,3],[39,2],[39,3],[40,2],[40,3],[24,1],[24,1],[63,1],[63,2],[63,3],[63,4],[67,1],[67,1],[67,2],[68,3],[69,3],[47,1],[47,2],[73,2],[53,1],[53,2],[75,3],[16,1],[16,1],[16,1],[16,1],[16,1],[79,1],[79,1],[32,1],[32,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[100,1],[100,1],[76,1],[76,3],[76,3],[10,1],[10,1],[10,3],[10,3],[10,3],[60,1],[102,1],[102,3],[104,1],[104,1]],\r\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\r\n/* this == yyval */\r\n\r\nvar $0 = $$.length - 1;\r\nswitch (yystate) {\r\ncase 1:\r\n return $$[$0-1]; \r\nbreak;\r\ncase 3:\r\nthis.$ = yy.miew.reset(false); yy.ClearContext(); yy.miew.resetReps(\"empty\");\r\nbreak;\r\ncase 4:\r\nthis.$ = yy.miew.rebuild();\r\nbreak;\r\ncase 5:\r\nthis.$ = yy.miew.rebuildAll(); yy.miew.rebuild();\r\nbreak;\r\ncase 6:\r\nthis.$ = yy.echo(yy.utils.help().toString());\r\nbreak;\r\ncase 7:\r\nthis.$ = yy.echo(yy.utils.help($$[$0]).toString());\r\nbreak;\r\ncase 8:\r\nthis.$ = yy.miew.motm();\r\nbreak;\r\ncase 10: case 11:\r\nthis.$ = yy.utils.propagateProp($$[$0]); yy.echo(yy.miew.get($$[$0]).toString());\r\nbreak;\r\ncase 12: case 13:\r\nthis.$ = yy.miew.set($$[$0-1], yy.utils.propagateProp($$[$0-1], $$[$0]));;\r\nbreak;\r\ncase 14:\r\nthis.$ = yy.miew.saveSettings();;\r\nbreak;\r\ncase 15:\r\nthis.$ = yy.miew.restoreSettings();;\r\nbreak;\r\ncase 16:\r\nthis.$ = yy.miew.resetSettings();;\r\nbreak;\r\ncase 17:\r\nthis.$ = yy.miew.resetReps();\r\nbreak;\r\ncase 18:\r\nthis.$ = yy.miew.applyPreset($$[$0]);\r\nbreak;\r\ncase 21:\r\nthis.$ = yy.miew.repRemove($$[$0]); yy.representations.remove($$[$0]);\r\nbreak;\r\ncase 22:\r\nthis.$ = yy.miew.repHide($$[$0]);\r\nbreak;\r\ncase 23:\r\nthis.$ = yy.miew.repHide($$[$0], false);\r\nbreak;\r\ncase 24:\r\nthis.$ = yy.echo(yy.utils.listRep(yy.miew, yy.representations, $$[$0], '-e'));\r\nbreak;\r\ncase 25:\r\nthis.$ = yy.echo(yy.utils.list(yy.miew, yy.representations));\r\nbreak;\r\ncase 26:\r\nthis.$ = yy.echo(yy.utils.list(yy.miew, yy.representations, $$[$0]));\r\nbreak;\r\ncase 27:\r\nthis.$ = yy.echo(yy.utils.listSelector(yy.miew, yy.Context));\r\nbreak;\r\ncase 28:\r\nthis.$ = yy.miew.select(yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0], true));\r\nbreak;\r\ncase 29:\r\nthis.$ = yy.Context[$$[$0].toLowerCase()] = yy.utils.checkArg($$[$0-3].toLowerCase(), $$[$0-2], true); yy.miew.select(yy.Context[$$[$0].toLowerCase()]);\r\nbreak;\r\ncase 30:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {selector : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0])});\r\nbreak;\r\ncase 31:\r\nthis.$ = yy.Context[$$[$0].toLowerCase()] = yy.miew.within(yy.utils.checkArg(\"select\", $$[$0-2], true), Number($$[$0-4]));\r\nbreak;\r\ncase 32:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {material : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 35:\r\nthis.$ = yy.echo(yy.miew.view());\r\nbreak;\r\ncase 36: case 37:\r\nthis.$ = yy.miew.view($$[$0]);\r\nbreak;\r\ncase 38:\r\nthis.$ = yy.echo(yy.miew.changeUnit());\r\nbreak;\r\ncase 39:\r\nthis.$ = yy.echo(yy.miew.changeUnit($$[$0]));\r\nbreak;\r\ncase 40:\r\nthis.$ = yy.miew.dssp();\r\nbreak;\r\ncase 41:\r\nthis.$ = yy.miew.scale($$[$0]);\r\nbreak;\r\ncase 42:\r\n for (var i = 0, n = $$[$0].length; i < n; i++) {yy.miew.rotate($$[$0][i]['x'] * Math.PI / 180.0, $$[$0][i]['y'] * Math.PI / 180.0, $$[$0][i]['z'] * Math.PI / 180.0)} \r\nbreak;\r\ncase 43:\r\n for (var i = 0, n = $$[$0].length; i < n; i++) {yy.miew.translate($$[$0][i]['x'] || 0, $$[$0][i]['y'] || 0, $$[$0][i]['z'] || 0)} \r\nbreak;\r\ncase 44:\r\nthis.$ = yy.miew.center();\r\nbreak;\r\ncase 45:\r\nthis.$ = yy.miew.center($$[$0]);\r\nbreak;\r\ncase 48: case 49:\r\nthis.$ = yy.miew.addObject({type: 'line', params: [$$[$0-1], $$[$0]]}, true);\r\nbreak;\r\ncase 50: case 51:\r\nthis.$ = yy.miew.addObject({type: 'line', params: [$$[$0-2], $$[$0-1]], opts:$$[$0].toJSO(yy.utils, 'objects', 'line')}, true);\r\nbreak;\r\ncase 52:\r\nthis.$ = yy.echo(yy.utils.listObjs(yy.miew));\r\nbreak;\r\ncase 53:\r\nthis.$ = yy.miew.removeObject($$[$0]);\r\nbreak;\r\ncase 54:\r\nthis.$ = yy.echo(yy.miew.getURL({view: false, settings: false}));\r\nbreak;\r\ncase 55:\r\nthis.$ = yy.echo(yy.miew.getURL({view: false, settings: true}));\r\nbreak;\r\ncase 56:\r\nthis.$ = yy.echo(yy.miew.getURL({view: true,  settings: false}));\r\nbreak;\r\ncase 57: case 58:\r\nthis.$ = yy.echo(yy.miew.getURL({view: true,  settings: true}));\r\nbreak;\r\ncase 59:\r\nthis.$ = yy.miew.screenshotSave();\r\nbreak;\r\ncase 60:\r\nthis.$ = yy.miew.screenshotSave('', Number($$[$0]));\r\nbreak;\r\ncase 61:\r\nthis.$ = yy.miew.screenshotSave('', Number($$[$0-1]), Number($$[$0]));\r\nbreak;\r\ncase 62: case 63: case 64:\r\nthis.$ = yy.utils.load(yy.miew, $$[$0]); yy.representations.clear();\r\nbreak;\r\ncase 65:\r\nthis.$ = yy.echo(yy.representations.add(yy.miew.repAdd()));\r\nbreak;\r\ncase 66:\r\nthis.$ = yy.echo(yy.representations.add($$[$0], yy.miew.repAdd()));\r\nbreak;\r\ncase 67:\r\nthis.$ = yy.echo(yy.representations.add(yy.miew.repAdd($$[$0])));\r\nbreak;\r\ncase 68:\r\nthis.$ = yy.echo(yy.representations.add($$[$0-1], yy.miew.repAdd($$[$0])));\r\nbreak;\r\ncase 69:\r\nthis.$ = yy.miew.rep($$[$0]); yy.miew.repCurrent($$[$0]);\r\nbreak;\r\ncase 70:\r\nthis.$ = yy.miew.rep($$[$0-1], $$[$0]); yy.miew.repCurrent($$[$0-1]);\r\nbreak;\r\ncase 71:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {mode : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 72:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {mode : new Array(yy.utils.checkArg($$[$0-2].toLowerCase(), $$[$0-1].toUpperCase()), $$[$0].toJSO(yy.utils, $$[$0-2], $$[$0-1].toUpperCase()))});\r\nbreak;\r\ncase 73:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {colorer : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 74:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {colorer : new Array(yy.utils.checkArg($$[$0-2].toLowerCase(), $$[$0-1].toUpperCase()), $$[$0].toJSO(yy.utils, $$[$0-2], $$[$0-1].toUpperCase()))});\r\nbreak;\r\ncase 75:\r\nthis.$ = Number(yy.representations.get($$[$0]));\r\nbreak;\r\ncase 76: case 92:\r\nthis.$ = Number($$[$0]);\r\nbreak;\r\ncase 77:\r\nthis.$ = $$[$0];\r\nbreak;\r\ncase 78:\r\nthis.$ = yy._.assign($$[$0-1], $$[$0]);\r\nbreak;\r\ncase 79:\r\nthis.$ = yy._.assign($$[$0-2], $$[$0-1], $$[$0]);\r\nbreak;\r\ncase 80:\r\nthis.$ = yy._.assign($$[$0-3], $$[$0-2], $$[$0-1], $$[$0]);\r\nbreak;\r\ncase 81: case 82:\r\nthis.$ = yy.CreateObjectPair($$[$0].key, $$[$0].val);\r\nbreak;\r\ncase 83:\r\nthis.$ = yy.CreateObjectPair($$[$0-1].key, new Array($$[$0-1].val, $$[$0].toJSO(yy.utils, $$[$0-1].key, $$[$0-1].val)));\r\nbreak;\r\ncase 84: case 85:\r\nthis.$ = Object.create({'key': yy.keyRemap($$[$0-2]), 'val': yy.utils.checkArg($$[$0-2], $$[$0])});\r\nbreak;\r\ncase 86:\r\nthis.$ = [$$[$0]];\r\nbreak;\r\ncase 87:\r\nthis.$ = $$[$0-1].concat($$[$0]);\r\nbreak;\r\ncase 88:\r\nthis.$ = yy.CreateObjectPair($$[$0-1].toLowerCase(), Number($$[$0]));\r\nbreak;\r\ncase 89:\r\nthis.$ = new yy.ArgList($$[$0]);\r\nbreak;\r\ncase 90:\r\nthis.$ = $$[$0-1].append($$[$0]);\r\nbreak;\r\ncase 91:\r\nthis.$ = new yy.Arg($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 93:\r\nthis.$ = parseInt($$[$0]);\r\nbreak;\r\ncase 94:\r\nthis.$ = JSON.parse($$[$0]);\r\nbreak;\r\ncase 95: case 96:\r\nthis.$ = String($$[$0]);\r\nbreak;\r\ncase 157: case 158: case 161: case 162: case 163:\r\nthis.$ = $$[$0-2] + $$[$0-1] + $$[$0] //cause of could be color word in path;\r\nbreak;\r\ncase 166:\r\nthis.$ = $$[$0-2] = $$[$0-2] + $$[$0-1] + $$[$0];\r\nbreak;\r\n}\r\n},\r\ntable: [{3:1,4:2,5:[1,3],6:[1,4],7:[1,5],9:[1,6],11:[1,7],12:8,13:[1,9],15:[1,10],17:[1,11],18:[1,12],19:[1,13],20:[1,14],21:15,22:16,23:[1,17],25:[1,18],26:[1,19],27:[1,20],30:[1,21],33:[1,22],34:[1,23],37:[1,24],39:25,40:26,41:[1,27],43:[1,28],44:[1,29],45:[1,30],46:[1,31],48:[1,32],49:[1,33],50:34,51:35,52:[1,36],54:[1,37],55:[1,38],56:[1,44],58:[1,45],59:[1,39],62:[1,40],64:[1,41],65:[1,42],66:[1,43]},{1:[3]},{5:[1,46]},{1:[2,2]},{5:[2,3]},{5:[2,4],8:[1,47]},{5:[2,6],6:$V0,7:$V1,9:$V2,10:48,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,8]},{5:[2,9]},{6:$V0,7:$V1,9:$V2,10:106,13:$V3,14:[1,107],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{6:$V0,7:$V1,9:$V2,10:108,13:$V3,14:[1,109],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,14]},{5:[2,15]},{5:[2,16]},{5:[2,17],14:$VS,16:110,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,19]},{5:[2,20]},{24:116,35:$VX,38:$VY},{24:119,35:$VX,38:$VY},{24:120,35:$VX,38:$VY},{5:[2,25],24:121,28:[1,122],29:[1,123],35:$VX,38:$VY},{14:[1,124]},{14:[1,125]},{35:[1,126]},{38:[1,127]},{5:[2,33]},{5:[2,34]},{5:[2,35],14:[1,128],42:[1,129]},{5:[2,38],35:[1,130]},{5:[2,40]},{35:[1,131]},{47:132,73:133,74:$VZ},{47:135,73:133,74:$VZ},{5:[2,44],14:[1,136]},{5:[2,46]},{5:[2,47]},{6:$V0,7:$V1,9:$V2,10:138,13:$V3,14:[1,137],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,52]},{35:[1,139]},{14:[1,143],38:[1,141],60:140,61:[1,142]},{5:[2,65],38:[1,144],63:145,67:146,68:147,69:148,70:$V_,72:$V$},{24:151,35:$VX,38:$VY},{38:[1,152]},{38:[1,153]},{5:[2,54],29:[1,154],57:[1,155]},{5:[2,59],35:[1,156]},{1:[2,1]},{5:[2,5]},{5:[2,7],101:$V01},o($V11,[2,159]),o($V11,[2,160]),o($V21,[2,97]),o($V21,[2,98]),o($V11,[2,147]),o($V11,[2,148]),o($V11,[2,149]),o($V11,[2,150]),o($V11,[2,151]),o($V11,[2,152]),o($V11,[2,153]),o($V21,[2,101]),o($V21,[2,102]),o($V21,[2,103]),o($V21,[2,104]),o($V21,[2,105]),o($V21,[2,106]),o($V21,[2,107]),o($V21,[2,108]),o($V21,[2,109]),o($V21,[2,110]),o($V21,[2,111]),o($V21,[2,112]),o($V21,[2,113]),o($V21,[2,114]),o($V21,[2,115]),o($V21,[2,116]),o($V21,[2,117]),o($V21,[2,118]),o($V21,[2,119]),o($V21,[2,120]),o($V21,[2,121]),o($V21,[2,122]),o($V21,[2,123]),o($V21,[2,124]),o($V21,[2,125]),o($V21,[2,126]),o($V21,[2,127]),o($V21,[2,128]),o($V21,[2,129]),o($V21,[2,130]),o($V21,[2,131]),o($V21,[2,132]),o($V21,[2,133]),o($V21,[2,134]),o($V21,[2,135]),o($V21,[2,136]),o($V21,[2,137]),o($V21,[2,138]),o($V21,[2,139]),o($V21,[2,140]),o($V21,[2,141]),o($V21,[2,142]),o($V21,[2,143]),o($V21,[2,144]),o($V21,[2,145]),o($V21,[2,146]),{5:[2,10],101:$V01},{5:[2,11]},{14:$VS,16:158,35:$VT,38:$VU,77:$VV,78:$VW,101:$V01},{14:$VS,16:159,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,18]},o($V31,[2,92]),o($V31,[2,93]),o($V31,[2,94]),o($V31,[2,95]),o($V31,[2,96]),{5:[2,21]},o($V41,[2,75]),o($V41,[2,76]),{5:[2,22]},{5:[2,23]},{5:[2,24]},{5:[2,26]},{5:[2,27]},{5:[2,28],31:[1,160]},{5:[2,30]},{36:[1,161]},{5:[2,32]},{5:[2,36]},{5:[2,37]},{5:[2,39]},{5:[2,41]},{5:[2,42],73:162,74:$VZ},o($V51,[2,86]),{35:[1,163]},{5:[2,43],73:162,74:$VZ},{5:[2,45]},{14:[1,164]},{6:$V0,7:$V1,9:$V2,10:165,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR,101:$V01},{5:[2,53]},{5:[2,62]},{5:[2,63]},{5:[2,64]},{5:[2,164]},{5:[2,66],63:166,67:146,68:147,69:148,70:$V_,72:$V$},{5:[2,67]},{5:[2,77],67:167,68:147,69:148,70:$V_,72:$V$},o($V41,[2,81]),o($V41,[2,82],{80:52,53:168,75:169,76:170,79:171,6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN}),{71:[1,172]},{71:[1,173]},{5:[2,69],63:174,67:146,68:147,69:148,70:$V_,72:$V$},{5:[2,71],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:175,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,73],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:176,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,55],57:[1,177]},{5:[2,56],29:[1,178]},{5:[2,60],35:[1,179]},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,35:[1,181],37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:180,80:52,81:182,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,12]},{5:[2,13]},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,32:183,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:184,80:52,81:185,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{14:[1,186]},o($V51,[2,87]),o($V51,[2,88]),{5:[2,48],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:187,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,49],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:188,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,101:$V01},{5:[2,68]},{5:[2,78],67:189,68:147,69:148,70:$V_,72:$V$},o($V41,[2,83],{80:52,76:170,79:171,75:190,6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN}),o($V31,[2,89]),{71:[1,191],101:[1,192]},o($V61,[2,156]),{14:$VS,16:193,35:$VT,38:$VU,77:$VV,78:$VW},{14:$VS,16:194,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,70]},{5:[2,72],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,74],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,57]},{5:[2,58]},{5:[2,61]},o($V11,[2,161]),o($V11,[2,162]),o($V11,[2,163]),{5:[2,29]},{5:[2,99]},{5:[2,100]},{31:[1,195]},{5:[2,50],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,51],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,79],67:196,68:147,69:148,70:$V_,72:$V$},o($V31,[2,90]),{14:$VS,16:197,35:$VT,38:$VU,77:$VV,78:$VW},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,35:[1,199],37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,79:198,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},o($V41,[2,84]),o($V31,[2,85]),{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,32:200,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:184,80:52,81:185,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,80]},o($V31,[2,91]),o($V61,[2,157]),o($V61,[2,158]),{5:[2,31]}],\r\ndefaultActions: {3:[2,2],4:[2,3],7:[2,8],8:[2,9],11:[2,14],12:[2,15],13:[2,16],15:[2,19],16:[2,20],25:[2,33],26:[2,34],29:[2,40],34:[2,46],35:[2,47],37:[2,52],46:[2,1],47:[2,5],107:[2,11],110:[2,18],116:[2,21],119:[2,22],120:[2,23],121:[2,24],122:[2,26],123:[2,27],125:[2,30],127:[2,32],128:[2,36],129:[2,37],130:[2,39],131:[2,41],136:[2,45],139:[2,53],140:[2,62],141:[2,63],142:[2,64],143:[2,164],145:[2,67],158:[2,12],159:[2,13],166:[2,68],174:[2,70],177:[2,57],178:[2,58],179:[2,61],183:[2,29],184:[2,99],185:[2,100],196:[2,80],200:[2,31]},\r\nparseError: function parseError (str, hash) {\r\n    if (hash.recoverable) {\r\n        this.trace(str);\r\n    } else {\r\n        var error = new Error(str);\r\n        error.hash = hash;\r\n        throw error;\r\n    }\r\n},\r\nparse: function parse(input) {\r\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\r\n    var args = lstack.slice.call(arguments, 1);\r\n    var lexer = Object.create(this.lexer);\r\n    var sharedState = { yy: {} };\r\n    for (var k in this.yy) {\r\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\r\n            sharedState.yy[k] = this.yy[k];\r\n        }\r\n    }\r\n    lexer.setInput(input, sharedState.yy);\r\n    sharedState.yy.lexer = lexer;\r\n    sharedState.yy.parser = this;\r\n    if (typeof lexer.yylloc == 'undefined') {\r\n        lexer.yylloc = {};\r\n    }\r\n    var yyloc = lexer.yylloc;\r\n    lstack.push(yyloc);\r\n    var ranges = lexer.options && lexer.options.ranges;\r\n    if (typeof sharedState.yy.parseError === 'function') {\r\n        this.parseError = sharedState.yy.parseError;\r\n    } else {\r\n        this.parseError = Object.getPrototypeOf(this).parseError;\r\n    }\r\n    function popStack(n) {\r\n        stack.length = stack.length - 2 * n;\r\n        vstack.length = vstack.length - n;\r\n        lstack.length = lstack.length - n;\r\n    }\r\n            function lex() {\r\n            var token;\r\n            token = tstack.pop() || lexer.lex() || EOF;\r\n            if (typeof token !== 'number') {\r\n                if (token instanceof Array) {\r\n                    tstack = token;\r\n                    token = tstack.pop();\r\n                }\r\n                token = self.symbols_[token] || token;\r\n            }\r\n            return token;\r\n        }\r\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\r\n    while (true) {\r\n        state = stack[stack.length - 1];\r\n        if (this.defaultActions[state]) {\r\n            action = this.defaultActions[state];\r\n        } else {\r\n            if (symbol === null || typeof symbol == 'undefined') {\r\n                symbol = lex();\r\n            }\r\n            action = table[state] && table[state][symbol];\r\n        }\r\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\r\n            var errStr = '';\r\n            expected = [];\r\n            for (p in table[state]) {\r\n                if (this.terminals_[p] && p > TERROR) {\r\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\r\n                }\r\n            }\r\n            if (lexer.showPosition) {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\r\n            } else {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\r\n            }\r\n            this.parseError(errStr, {\r\n                text: lexer.match,\r\n                token: this.terminals_[symbol] || symbol,\r\n                line: lexer.yylineno,\r\n                loc: yyloc,\r\n                expected: expected\r\n            });\r\n        }\r\n        if (action[0] instanceof Array && action.length > 1) {\r\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\r\n        }\r\n        switch (action[0]) {\r\n        case 1:\r\n            stack.push(symbol);\r\n            vstack.push(lexer.yytext);\r\n            lstack.push(lexer.yylloc);\r\n            stack.push(action[1]);\r\n            symbol = null;\r\n            if (!preErrorSymbol) {\r\n                yyleng = lexer.yyleng;\r\n                yytext = lexer.yytext;\r\n                yylineno = lexer.yylineno;\r\n                yyloc = lexer.yylloc;\r\n                if (recovering > 0) {\r\n                    recovering--;\r\n                }\r\n            } else {\r\n                symbol = preErrorSymbol;\r\n                preErrorSymbol = null;\r\n            }\r\n            break;\r\n        case 2:\r\n            len = this.productions_[action[1]][1];\r\n            yyval.$ = vstack[vstack.length - len];\r\n            yyval._$ = {\r\n                first_line: lstack[lstack.length - (len || 1)].first_line,\r\n                last_line: lstack[lstack.length - 1].last_line,\r\n                first_column: lstack[lstack.length - (len || 1)].first_column,\r\n                last_column: lstack[lstack.length - 1].last_column\r\n            };\r\n            if (ranges) {\r\n                yyval._$.range = [\r\n                    lstack[lstack.length - (len || 1)].range[0],\r\n                    lstack[lstack.length - 1].range[1]\r\n                ];\r\n            }\r\n            r = this.performAction.apply(yyval, [\r\n                yytext,\r\n                yyleng,\r\n                yylineno,\r\n                sharedState.yy,\r\n                action[1],\r\n                vstack,\r\n                lstack\r\n            ].concat(args));\r\n            if (typeof r !== 'undefined') {\r\n                return r;\r\n            }\r\n            if (len) {\r\n                stack = stack.slice(0, -1 * len * 2);\r\n                vstack = vstack.slice(0, -1 * len);\r\n                lstack = lstack.slice(0, -1 * len);\r\n            }\r\n            stack.push(this.productions_[action[1]][0]);\r\n            vstack.push(yyval.$);\r\n            lstack.push(yyval._$);\r\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\r\n            stack.push(newState);\r\n            break;\r\n        case 3:\r\n            return true;\r\n        }\r\n    }\r\n    return true;\r\n}};\r\n\r\n\r\n/* generated by jison-lex 0.3.4 */\r\nvar lexer = (function(){\r\nvar lexer = ({\r\n\r\nEOF:1,\r\n\r\nparseError:function parseError(str, hash) {\r\n        if (this.yy.parser) {\r\n            this.yy.parser.parseError(str, hash);\r\n        } else {\r\n            throw new Error(str);\r\n        }\r\n    },\r\n\r\n// resets the lexer, sets new input\r\nsetInput:function (input, yy) {\r\n        this.yy = yy || this.yy || {};\r\n        this._input = input;\r\n        this._more = this._backtrack = this.done = false;\r\n        this.yylineno = this.yyleng = 0;\r\n        this.yytext = this.matched = this.match = '';\r\n        this.conditionStack = ['INITIAL'];\r\n        this.yylloc = {\r\n            first_line: 1,\r\n            first_column: 0,\r\n            last_line: 1,\r\n            last_column: 0\r\n        };\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [0,0];\r\n        }\r\n        this.offset = 0;\r\n        return this;\r\n    },\r\n\r\n// consumes and returns one char from the input\r\ninput:function () {\r\n        var ch = this._input[0];\r\n        this.yytext += ch;\r\n        this.yyleng++;\r\n        this.offset++;\r\n        this.match += ch;\r\n        this.matched += ch;\r\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno++;\r\n            this.yylloc.last_line++;\r\n        } else {\r\n            this.yylloc.last_column++;\r\n        }\r\n        if (this.options.ranges) {\r\n            this.yylloc.range[1]++;\r\n        }\r\n\r\n        this._input = this._input.slice(1);\r\n        return ch;\r\n    },\r\n\r\n// unshifts one char (or a string) into the input\r\nunput:function (ch) {\r\n        var len = ch.length;\r\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\r\n\r\n        this._input = ch + this._input;\r\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\r\n        //this.yyleng -= len;\r\n        this.offset -= len;\r\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\r\n        this.match = this.match.substr(0, this.match.length - 1);\r\n        this.matched = this.matched.substr(0, this.matched.length - 1);\r\n\r\n        if (lines.length - 1) {\r\n            this.yylineno -= lines.length - 1;\r\n        }\r\n        var r = this.yylloc.range;\r\n\r\n        this.yylloc = {\r\n            first_line: this.yylloc.first_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.first_column,\r\n            last_column: lines ?\r\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\r\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\r\n              this.yylloc.first_column - len\r\n        };\r\n\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\r\n        }\r\n        this.yyleng = this.yytext.length;\r\n        return this;\r\n    },\r\n\r\n// When called from action, caches matched text and appends it on next action\r\nmore:function () {\r\n        this._more = true;\r\n        return this;\r\n    },\r\n\r\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\r\nreject:function () {\r\n        if (this.options.backtrack_lexer) {\r\n            this._backtrack = true;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n\r\n        }\r\n        return this;\r\n    },\r\n\r\n// retain first n characters of the match\r\nless:function (n) {\r\n        this.unput(this.match.slice(n));\r\n    },\r\n\r\n// displays already matched input, i.e. for error messages\r\npastInput:function () {\r\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\r\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays upcoming input, i.e. for error messages\r\nupcomingInput:function () {\r\n        var next = this.match;\r\n        if (next.length < 20) {\r\n            next += this._input.substr(0, 20-next.length);\r\n        }\r\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays the character position where the lexing error occurred, i.e. for error messages\r\nshowPosition:function () {\r\n        var pre = this.pastInput();\r\n        var c = new Array(pre.length + 1).join(\"-\");\r\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\r\n    },\r\n\r\n// test the lexed token: return FALSE when not a match, otherwise return token\r\ntest_match:function(match, indexed_rule) {\r\n        var token,\r\n            lines,\r\n            backup;\r\n\r\n        if (this.options.backtrack_lexer) {\r\n            // save context\r\n            backup = {\r\n                yylineno: this.yylineno,\r\n                yylloc: {\r\n                    first_line: this.yylloc.first_line,\r\n                    last_line: this.last_line,\r\n                    first_column: this.yylloc.first_column,\r\n                    last_column: this.yylloc.last_column\r\n                },\r\n                yytext: this.yytext,\r\n                match: this.match,\r\n                matches: this.matches,\r\n                matched: this.matched,\r\n                yyleng: this.yyleng,\r\n                offset: this.offset,\r\n                _more: this._more,\r\n                _input: this._input,\r\n                yy: this.yy,\r\n                conditionStack: this.conditionStack.slice(0),\r\n                done: this.done\r\n            };\r\n            if (this.options.ranges) {\r\n                backup.yylloc.range = this.yylloc.range.slice(0);\r\n            }\r\n        }\r\n\r\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno += lines.length;\r\n        }\r\n        this.yylloc = {\r\n            first_line: this.yylloc.last_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.last_column,\r\n            last_column: lines ?\r\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\r\n                         this.yylloc.last_column + match[0].length\r\n        };\r\n        this.yytext += match[0];\r\n        this.match += match[0];\r\n        this.matches = match;\r\n        this.yyleng = this.yytext.length;\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\r\n        }\r\n        this._more = false;\r\n        this._backtrack = false;\r\n        this._input = this._input.slice(match[0].length);\r\n        this.matched += match[0];\r\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\r\n        if (this.done && this._input) {\r\n            this.done = false;\r\n        }\r\n        if (token) {\r\n            return token;\r\n        } else if (this._backtrack) {\r\n            // recover context\r\n            for (var k in backup) {\r\n                this[k] = backup[k];\r\n            }\r\n            return false; // rule action called reject() implying the next rule should be tested instead.\r\n        }\r\n        return false;\r\n    },\r\n\r\n// return next match in input\r\nnext:function () {\r\n        if (this.done) {\r\n            return this.EOF;\r\n        }\r\n        if (!this._input) {\r\n            this.done = true;\r\n        }\r\n\r\n        var token,\r\n            match,\r\n            tempMatch,\r\n            index;\r\n        if (!this._more) {\r\n            this.yytext = '';\r\n            this.match = '';\r\n        }\r\n        var rules = this._currentRules();\r\n        for (var i = 0; i < rules.length; i++) {\r\n            tempMatch = this._input.match(this.rules[rules[i]]);\r\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\r\n                match = tempMatch;\r\n                index = i;\r\n                if (this.options.backtrack_lexer) {\r\n                    token = this.test_match(tempMatch, rules[i]);\r\n                    if (token !== false) {\r\n                        return token;\r\n                    } else if (this._backtrack) {\r\n                        match = false;\r\n                        continue; // rule action called reject() implying a rule MISmatch.\r\n                    } else {\r\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n                        return false;\r\n                    }\r\n                } else if (!this.options.flex) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (match) {\r\n            token = this.test_match(match, rules[index]);\r\n            if (token !== false) {\r\n                return token;\r\n            }\r\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n            return false;\r\n        }\r\n        if (this._input === \"\") {\r\n            return this.EOF;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n        }\r\n    },\r\n\r\n// return next match that has a token\r\nlex:function lex () {\r\n        var r = this.next();\r\n        if (r) {\r\n            return r;\r\n        } else {\r\n            return this.lex();\r\n        }\r\n    },\r\n\r\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\r\nbegin:function begin (condition) {\r\n        this.conditionStack.push(condition);\r\n    },\r\n\r\n// pop the previously active lexer condition state off the condition stack\r\npopState:function popState () {\r\n        var n = this.conditionStack.length - 1;\r\n        if (n > 0) {\r\n            return this.conditionStack.pop();\r\n        } else {\r\n            return this.conditionStack[0];\r\n        }\r\n    },\r\n\r\n// produce the lexer rule set which is active for the currently active lexer condition state\r\n_currentRules:function _currentRules () {\r\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\r\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\r\n        } else {\r\n            return this.conditions[\"INITIAL\"].rules;\r\n        }\r\n    },\r\n\r\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\r\ntopState:function topState (n) {\r\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\r\n        if (n >= 0) {\r\n            return this.conditionStack[n];\r\n        } else {\r\n            return \"INITIAL\";\r\n        }\r\n    },\r\n\r\n// alias for begin(condition)\r\npushState:function pushState (condition) {\r\n        this.begin(condition);\r\n    },\r\n\r\n// return the number of states currently on the stack\r\nstateStackSize:function stateStackSize() {\r\n        return this.conditionStack.length;\r\n    },\r\noptions: {\"case-insensitive\":true},\r\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\nvar YYSTATE=YY_START;\r\nswitch($avoiding_name_collisions) {\r\ncase 0:/* ignore whitespace */\r\nbreak;\r\ncase 1:return '';\r\nbreak;\r\ncase 2:return '';\r\nbreak;\r\ncase 3:return 42;\r\nbreak;\r\ncase 4:return 35;\r\nbreak;\r\ncase 5:return 77;\r\nbreak;\r\ncase 6:return 78;\r\nbreak;\r\ncase 7:return 78;\r\nbreak;\r\ncase 8:return 8;\r\nbreak;\r\ncase 9:return 6;\r\nbreak;\r\ncase 10:return 82;\r\nbreak;\r\ncase 11:return 7;\r\nbreak;\r\ncase 12:return 9;\r\nbreak;\r\ncase 13:return 59;\r\nbreak;\r\ncase 14:return 13\r\nbreak;\r\ncase 15:return 15\r\nbreak;\r\ncase 16:return 17\r\nbreak;\r\ncase 17:return 18\r\nbreak;\r\ncase 18:return 19\r\nbreak;\r\ncase 19:return 20\r\nbreak;\r\ncase 20:return 11\r\nbreak;\r\ncase 21:return 62\r\nbreak;\r\ncase 22:return 64\r\nbreak;\r\ncase 23:return 23\r\nbreak;\r\ncase 24:return 25\r\nbreak;\r\ncase 25:return 26\r\nbreak;\r\ncase 26:return 27\r\nbreak;\r\ncase 27:return 30\r\nbreak;\r\ncase 28:return 34\r\nbreak;\r\ncase 29:return 33\r\nbreak;\r\ncase 30:return 65\r\nbreak;\r\ncase 31:return 66\r\nbreak;\r\ncase 32:return 37\r\nbreak;\r\ncase 33:return 41\r\nbreak;\r\ncase 34:return 43\r\nbreak;\r\ncase 35:return 52\r\nbreak;\r\ncase 36:return 54\r\nbreak;\r\ncase 37:return 55\r\nbreak;\r\ncase 38:return 46\r\nbreak;\r\ncase 39:return 48\r\nbreak;\r\ncase 40:return 45\r\nbreak;\r\ncase 41:return 49\r\nbreak;\r\ncase 42:return 56\r\nbreak;\r\ncase 43:return 58;\r\nbreak;\r\ncase 44:return 44\r\nbreak;\r\ncase 45:return 83\r\nbreak;\r\ncase 46:return 84\r\nbreak;\r\ncase 47:return 85\r\nbreak;\r\ncase 48:return 86\r\nbreak;\r\ncase 49:return 87\r\nbreak;\r\ncase 50:return 88\r\nbreak;\r\ncase 51:return 89\r\nbreak;\r\ncase 52:return 90\r\nbreak;\r\ncase 53:return 91\r\nbreak;\r\ncase 54:return 92\r\nbreak;\r\ncase 55:return 93\r\nbreak;\r\ncase 56:return 94\r\nbreak;\r\ncase 57:return 95\r\nbreak;\r\ncase 58:return 70\r\nbreak;\r\ncase 59:return 70\r\nbreak;\r\ncase 60:return 72\r\nbreak;\r\ncase 61:return 72\r\nbreak;\r\ncase 62:return 74\r\nbreak;\r\ncase 63:return 74\r\nbreak;\r\ncase 64:return 74\r\nbreak;\r\ncase 65:return 31\r\nbreak;\r\ncase 66:return 36\r\nbreak;\r\ncase 67:return 96\r\nbreak;\r\ncase 68:return 97\r\nbreak;\r\ncase 69:return 98\r\nbreak;\r\ncase 70:return 99\r\nbreak;\r\ncase 71:yy_.yytext = yy.utils.unquoteString(yy_.yytext); return 14;\r\nbreak;\r\ncase 72:return 38;\r\nbreak;\r\ncase 73:return 5;\r\nbreak;\r\ncase 74:return 101;\r\nbreak;\r\ncase 75:return 103;\r\nbreak;\r\ncase 76:return '\\\\';\r\nbreak;\r\ncase 77:return 28\r\nbreak;\r\ncase 78:return 61\r\nbreak;\r\ncase 79:return 29\r\nbreak;\r\ncase 80:return 57\r\nbreak;\r\ncase 81:return 71\r\nbreak;\r\n}\r\n},\r\nrules: [/^(?:\\s+)/i,/^(?:[#].*)/i,/^(?:\\/\\/.*)/i,/^(?:([_A-Z0-9\\/\\+]+==))/i,/^(?:-?[0-9]+(\\.[0-9]+)?\\b)/i,/^(?:0[xX][0-9A-F]+\\b)/i,/^(?:false\\b)/i,/^(?:true\\b)/i,/^(?:all\\b)/i,/^(?:reset\\b)/i,/^(?:clear\\b)/i,/^(?:build\\b)/i,/^(?:help\\b)/i,/^(?:load\\b)/i,/^(?:get\\b)/i,/^(?:set\\b)/i,/^(?:set_save\\b)/i,/^(?:set_restore\\b)/i,/^(?:set_reset\\b)/i,/^(?:preset\\b)/i,/^(?:motm\\b)/i,/^(?:add\\b)/i,/^(?:rep\\b)/i,/^(?:remove\\b)/i,/^(?:hide\\b)/i,/^(?:show\\b)/i,/^(?:list\\b)/i,/^(?:select\\b)/i,/^(?:within\\b)/i,/^(?:selector\\b)/i,/^(?:mode\\b)/i,/^(?:color\\b)/i,/^(?:material\\b)/i,/^(?:view\\b)/i,/^(?:unit\\b)/i,/^(?:line\\b)/i,/^(?:listobj\\b)/i,/^(?:removeobj\\b)/i,/^(?:rotate\\b)/i,/^(?:translate\\b)/i,/^(?:scale\\b)/i,/^(?:center\\b)/i,/^(?:url\\b)/i,/^(?:screenshot\\b)/i,/^(?:dssp\\b)/i,/^(?:file_list\\b)/i,/^(?:file_register\\b)/i,/^(?:file_delete\\b)/i,/^(?:preset_add\\b)/i,/^(?:preset_delete\\b)/i,/^(?:preset_update\\b)/i,/^(?:preset_rename\\b)/i,/^(?:preset_open\\b)/i,/^(?:create_scenario\\b)/i,/^(?:reset_scenario\\b)/i,/^(?:delete_scenario\\b)/i,/^(?:add_scenario_item\\b)/i,/^(?:list_scenario\\b)/i,/^(?:s\\b)/i,/^(?:mt\\b)/i,/^(?:m\\b)/i,/^(?:c\\b)/i,/^(?:x\\b)/i,/^(?:y\\b)/i,/^(?:z\\b)/i,/^(?:as\\b)/i,/^(?:of\\b)/i,/^(?:pdb\\b)/i,/^(?:delay\\b)/i,/^(?:prst\\b)/i,/^(?:desc\\b)/i,/^(?:((?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*')))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:\\.)/i,/^(?:\\/)/i,/^(?:\\\\)/i,/^(?:-e\\b)/i,/^(?:-f\\b)/i,/^(?:-s\\b)/i,/^(?:-v\\b)/i,/^(?:=)/i],\r\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],\"inclusive\":true}}\r\n});\r\nreturn lexer;\r\n})();\r\nparser.lexer = lexer;\r\nfunction Parser () {\r\n  this.yy = {};\r\n}\r\nParser.prototype = parser;parser.Parser = Parser;\r\nreturn new Parser;\r\n})();\r\n\r\nmodule.exports = {parser: parser};\r\n","import palettes from '../gfx/palettes';\r\nimport settings from '../settings';\r\n\r\nconst modeIdDesc = {\r\n  $help: [\r\n    'Rendering mode shortcut',\r\n    '    BS - balls and sticks mode',\r\n    '    LN - lines mode',\r\n    '    LC - licorice mode',\r\n    '    VW - van der waals mode',\r\n    '    TR - trace mode',\r\n    '    TU - tube mode',\r\n    '    CA - cartoon mode',\r\n    '    SA - isosurface mode',\r\n    '    QS - quick surface mode',\r\n    '    SE - solvent excluded mode',\r\n    '    TX - text mode',\r\n  ],\r\n  BS: {\r\n    $help: [\r\n      '   Balls and sticks',\r\n      '      aromrad = <number> #aromatic radius',\r\n      '      atom = <number>    #atom radius',\r\n      '      bond = <number>    #bond radius',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      space = <number>   #space value\\n',\r\n    ],\r\n  },\r\n  CA: {\r\n    $help: [\r\n      '   Cartoon',\r\n      '      arrow = <number>   #arrow size',\r\n      '      depth = <number>   #depth of surface',\r\n      '      heightSegmentsRatio = <number>',\r\n      '      radius = <number>  #tube radius',\r\n      '      tension = <number> #',\r\n      '      width = <number>  #secondary width\\n',\r\n    ],\r\n  },\r\n  LN: {\r\n    $help: [\r\n      '   Lines',\r\n      '      atom = <number>    #atom radius',\r\n      '      chunkarom = <number>',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      offsarom = <number>\\n',\r\n    ],\r\n  },\r\n  LC: {\r\n    $help: [\r\n      '   Licorice',\r\n      '      aromrad = <number> #aromatic radius',\r\n      '      bond = <number>    #bond radius',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      space = <number>   #space value\\n',\r\n    ],\r\n  },\r\n  VW: {\r\n    $help: [\r\n      '   Van der Waals',\r\n      '      nothing\\n',\r\n    ],\r\n  },\r\n  TR: {\r\n    $help: [\r\n      '   Trace',\r\n      '      radius = <number>  #tube radius\\n',\r\n    ],\r\n  },\r\n  TU: {\r\n    $help: [\r\n      '   Tube',\r\n      '      heightSegmentsRatio = <number>',\r\n      '      radius = <number>  #tube radius',\r\n      '      tension = <number> \\n',\r\n    ],\r\n  },\r\n  SA: {\r\n    $help: [\r\n      '   Surface',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  QS: {\r\n    $help: [\r\n      '   Quick surface',\r\n      '      isoValue = <number>',\r\n      '      scale = <number>',\r\n      '      wireframe = <bool>',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  SE: {\r\n    $help: [\r\n      '   Solvent excluded surface',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  TX: {\r\n    $help: [\r\n      '   Text mode',\r\n      '      template = <format string> string that can include \"{{ id }}\"',\r\n      '          it will be replaced by value, id can be one of next:',\r\n      '          serial, name, type, sequence, residue, chain, hetatm, water\\n',\r\n      '      horizontalAlign = <string> {\"left\", \"right\", \"center\"}',\r\n      '      verticalAlign = <string> {\"top\", \"bottom\", \"middle\"}',\r\n      '      dx = <number> #offset along x',\r\n      '      dy = <number> #offset along y',\r\n      '      dz = <number> #offset along z',\r\n      '      fg = <string> #text color modificator',\r\n      '           could be keyword, named color or hex',\r\n      '      fg = <string> #back color modificator',\r\n      '           could be keyword, named color or hex',\r\n      '      showBg = <bool> #if set show background',\r\n      '           plate under text',\r\n    ],\r\n  },\r\n};\r\n\r\nconst colorDesc = {\r\n  $help: [\r\n    'Coloring mode shortcut',\r\n    '    EL - color by element',\r\n    '    CH - color by chain',\r\n    '    SQ - color by sequence',\r\n    '    RT - color by residue type',\r\n    '    SS - color by secondary structure',\r\n    '    UN - uniform',\r\n  ],\r\n  UN: {\r\n    $help: [\r\n      'Parameters of coloring modes customization',\r\n      '   Uniform',\r\n      '      color = <number|color> #RGB->HEX->dec\\n',\r\n    ],\r\n    color: {\r\n      $help: Object.keys(palettes.get(settings.now.palette).namedColors).sort().join('\\n'),\r\n    },\r\n  },\r\n};\r\n\r\nconst materialDesc = {\r\n  $help: [\r\n    'Material shortcut',\r\n    '    DF - diffuse',\r\n    '    TR - transparent',\r\n    '    SF - soft plastic',\r\n    '    PL - glossy plastic',\r\n    '    ME - metal',\r\n    '    GL - glass',\r\n  ],\r\n};\r\n\r\nconst addRepDesc = {\r\n  $help: [\r\n    'Short (packed) representation description as a set of variables',\r\n    '    s=<EXPRESSION>',\r\n    '        selector property',\r\n    '    m=<MODE_ID>[!<PARAMETER>:<VALUE>[,...]]',\r\n    '        render mode property',\r\n    '    c=<COLORER_ID>[!<PARAMETER>:<VALUE>[,...]]',\r\n    '        color mode property',\r\n    '    mt=<MATERIAL_ID>',\r\n    '        material property',\r\n  ],\r\n  s: {\r\n    $help: 'Selection expression string as it is in menu->representations->selection',\r\n  },\r\n  m: modeIdDesc,\r\n  c: colorDesc,\r\n  mt: materialDesc,\r\n};\r\n\r\nconst setGetParameterDesc = {\r\n  $help: [\r\n    'Parameters of rendering modes customization: modes',\r\n    'Parameters of colorer customization: colorers',\r\n    'Autobuild: autobuild = (<number>|<bool>)',\r\n  ],\r\n  modes: modeIdDesc,\r\n  colorers: colorDesc,\r\n};\r\n\r\nconst help = {\r\n  $help: [\r\n    'help (<cmd name>| <path to property>)',\r\n    'You can get detailed information about command options',\r\n    '   using \"help cmd.opt.opt.[...]\"\\n',\r\n    '   you can use one line comments',\r\n    '   everything started from (#|//) will be skipped',\r\n    '   Example: >build //some comment\\n',\r\n    'List of available commands:',\r\n  ],\r\n  reset: {\r\n    $help: [\r\n      'Reload current object, delete all representations',\r\n      '    Nothing will work until load new object',\r\n    ],\r\n  },\r\n  load: {\r\n    $help: [\r\n      'load (<PDBID>|<URL>|-f [<*.NC FILE URL STRING>])',\r\n      '    Load new pdb object from selected source',\r\n    ],\r\n    PDBID: {\r\n      $help: 'pdb id in remote molecule database',\r\n    },\r\n    URL: {\r\n      $help: 'url to source file',\r\n    },\r\n    f: {\r\n      $help: [\r\n        'open file system dialog to fetch local file',\r\n        'optionally you can determine trajectory file',\r\n        'via URL for *.top model',\r\n      ],\r\n    },\r\n  },\r\n  clear: {\r\n    $help: 'No args. Clear terminal',\r\n  },\r\n  add: {\r\n    $help: [\r\n      'add [<REP_NAME>] [<DESCRIPTION>]',\r\n      '    Add new item to representation set with',\r\n      '    default or <DESCRIPTION> params',\r\n    ],\r\n    REP_NAME: {\r\n      $help: 'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n    },\r\n    DESCRIPTION: addRepDesc,\r\n  },\r\n  rep: {\r\n    $help: [\r\n      'rep [<REP_NAME>|<REP_INDEX>] [<DESCRIPTION>]',\r\n      '    set current representation by name or index',\r\n      '    edit current representation by <DESCRIPTION>',\r\n    ],\r\n    REP_NAME: {\r\n      $help: [\r\n        'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n        'Must be declared before',\r\n      ],\r\n    },\r\n    REP_INDEX: {\r\n      $help: 'Index of available representation',\r\n    },\r\n    DESCRIPTION: addRepDesc,\r\n  },\r\n  remove: {\r\n    $help: [\r\n      'remove (<REP_NAME>|<REP_INDEX>)',\r\n      'Remove representation by name or index',\r\n    ],\r\n    REP_NAME: {\r\n      $help: [\r\n        'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n        'Must be declared before',\r\n      ],\r\n    },\r\n    REP_INDEX: {\r\n      $help: 'Index of available representation',\r\n    },\r\n  },\r\n  selector: {\r\n    $help: [\r\n      'selector <EXPRESSION>',\r\n      '   set selector from EXPRESSION to current representation',\r\n    ],\r\n    EXPRESSION: {\r\n      $help: 'Selection expression string as it is in menu->representations->selection',\r\n    },\r\n  },\r\n  mode: {\r\n    $help: [\r\n      'mode <MODE_ID> [<PARAMETER>=<VALUE>...]',\r\n      '   set rendering mode and apply parameters to current representation',\r\n    ],\r\n    MODE_ID: modeIdDesc,\r\n  },\r\n  color: {\r\n    $help: [\r\n      'color <COLORER_ID> [<PARAMETER>=<VALUE>...]',\r\n      '   set colorer and apply parameters to current representation',\r\n    ],\r\n    COLORER_ID: colorDesc,\r\n  },\r\n  material: {\r\n    $help: [\r\n      'material <MATERIAL_ID>',\r\n      '   set material to current representation',\r\n    ],\r\n    MATERIAL_ID: materialDesc,\r\n  },\r\n  build: {\r\n    $help: 'build help str',\r\n    add: {\r\n      $help: 'build.add',\r\n      new: {\r\n        $help: [\r\n          'add.new',\r\n          'add.new new line 1',\r\n          'add.new new line 2',\r\n          'add.new new line 3',\r\n        ],\r\n      },\r\n    },\r\n    del: {\r\n      $help: 'build.del',\r\n    },\r\n  },\r\n  list: {\r\n    $help: [\r\n      'list [-e|-s|<REP_NAME>|<REP_INDEX>]',\r\n      'Print representations if no args print list of representations',\r\n      '    -e expand list and show all representations',\r\n      '    -s show all user-registered selectors',\r\n      '    <REP_NAME>|<REP_INDEX> show only current representation',\r\n    ],\r\n  },\r\n  hide: {\r\n    $help: [\r\n      'hide (<REP_NAME>|<REP_INDEX>)',\r\n      'Hide representation referenced in args',\r\n    ],\r\n  },\r\n  show: {\r\n    $help: [\r\n      'show (<REP_NAME>|<REP_INDEX>)',\r\n      'Show representation referenced in args',\r\n    ],\r\n  },\r\n  get: {\r\n    $help: [\r\n      'get <PARAMETER>',\r\n      'Print <PARAMETER> value',\r\n      '    <PARAMETER> - path to option use get.PARAMETER to get more info',\r\n    ],\r\n    PARAMETER: setGetParameterDesc,\r\n  },\r\n  set: {\r\n    $help: [\r\n      'set <PARAMETER> <VALUE>',\r\n      'Set <PARAMETER> with <VALUE>',\r\n      '    <PARAMETER> - path to option use set.PARAMETER to get more info',\r\n    ],\r\n    PARAMETER: setGetParameterDesc,\r\n  },\r\n  set_save: {\r\n    $help: [\r\n      'set_save',\r\n      'Save current settings to cookie',\r\n    ],\r\n  },\r\n  set_restore: {\r\n    $help: [\r\n      'set_restore',\r\n      'Load and apply settings from cookie',\r\n    ],\r\n  },\r\n  set_reset: {\r\n    $help: [\r\n      'set_reset',\r\n      'Reset current settings to the defaults',\r\n    ],\r\n  },\r\n  preset: {\r\n    $help: [\r\n      'preset [<PRESET>]',\r\n      'Reset current representation or set preset to <PRESET>',\r\n    ],\r\n    PRESET: {\r\n      $help: [\r\n        'default',\r\n        'wire',\r\n        'small',\r\n        'macro',\r\n      ],\r\n    },\r\n  },\r\n  unit: {\r\n    $help: [\r\n      'unit [<unit_id>]',\r\n      'Change current biological structure view. Zero <unit_id> value means asymmetric unit,',\r\n      'positive values set an assembly with corresponding number.',\r\n      'Being called with no parameters command prints current unit information.',\r\n    ],\r\n  },\r\n  view: {\r\n    $help: [\r\n      'view [<ENCODED_VIEW>]',\r\n      'Get current encoded view or set if ENCODED_VIEW placed as argument',\r\n    ],\r\n    ENCODED_VIEW: {\r\n      $help: [\r\n        'encoded view matrix string (binary code)',\r\n      ],\r\n    },\r\n  },\r\n  rotate: {\r\n    $help: [\r\n      'rotate (x|y|z) [<DEGREES>] [(x|y|z) [<DEGREES>]]...',\r\n      'Rotate scene',\r\n    ],\r\n  },\r\n  scale: {\r\n    $help: [\r\n      'scale <SCALE>',\r\n      'Scale scene',\r\n    ],\r\n  },\r\n  select: {\r\n    $help: [\r\n      'select <SELECTOR_STRING> [as <SELECTOR_NAME>]',\r\n      'Select atoms using selector defined in SELECTOR_STRING',\r\n      '    and if SELECTOR_NAME is defined register it in viewer',\r\n      '    you can use it later as a complex selector',\r\n    ],\r\n  },\r\n  within: {\r\n    $help: [\r\n      'within <DISTANCE> of <SELECTOR_STRING> as <SELECTOR_NAME>',\r\n      'Build within named selector',\r\n      '    DISTANCE        <number>',\r\n      '    SELECTOR_STRING <string(selection language)>',\r\n      '    SELECTOR_NAME   <identifier>',\r\n    ],\r\n  },\r\n  url: {\r\n    $help: [\r\n      'url [-s] [-v]',\r\n      'Report URL encoded scene',\r\n      '    if -s set that include settings in the URL',\r\n      '    if -v set that include view in the URL',\r\n    ],\r\n  },\r\n  screenshot: {\r\n    $help: [\r\n      'screenshot [<WIDTH> [<HEIGHT>]]',\r\n      'Make a screenshot of the scene',\r\n      '    WIDTH  <number> in pixels',\r\n      '    HEIGHT <number> in pixels, equal to WIDTH by default',\r\n    ],\r\n  },\r\n  line: {\r\n    $help: [\r\n      'line <first_atom_path> <second_atom_path> [<PARAMETER>=<VALUE>]',\r\n      'Draw dashed line between two specified atoms',\r\n    ],\r\n  },\r\n  removeobj: {\r\n    $help: [\r\n      'removeobj <id>',\r\n      'Remove scene object by its index. Indices could be obtained by <listobj> command',\r\n    ],\r\n  },\r\n  listobj: {\r\n    $help: [\r\n      'listobj',\r\n      'Display the list of all existing scene objects',\r\n    ],\r\n  },\r\n};\r\n\r\nexport default help;\r\n","import _ from 'lodash';\r\nimport Miew from './Miew';\r\nimport { parser as parsercli } from './utils/MiewCLIParser';\r\nimport clihelp from './utils/MiewCLIHelp';\r\nimport logger from './utils/logger';\r\nimport utils from './utils';\r\n\r\nconst {\r\n  chem: { selectors },\r\n  modes,\r\n  colorers,\r\n  materials,\r\n  palettes,\r\n  options,\r\n  settings,\r\n} = Miew;\r\n\r\nfunction None() {\r\n}\r\n\r\nconst NULL = (function () {\r\n  const obj = new None();\r\n  return function () {\r\n    return obj;\r\n  };\r\n}());\r\n\r\nclass RepresentationMap {\r\n  constructor() {\r\n    this.representationMap = {};\r\n    this.representationID = {};\r\n  }\r\n\r\n  get(strId) {\r\n    return this.representationMap[strId] || this.representationID[strId] || '<no name>';\r\n  }\r\n\r\n  add(strId, index) {\r\n    if (strId === -1) {\r\n      return 'Can not create representation: there is no data';\r\n    }\r\n\r\n    if (index !== undefined) {\r\n      if (!this.representationMap.hasOwnProperty(strId)) {\r\n        this.representationMap[strId.toString()] = index;\r\n        this.representationID[index] = strId.toString();\r\n      } else {\r\n        return 'This name has already existed, registered without name';\r\n      }\r\n    }\r\n    return `Representation ${strId} successfully added`;\r\n  }\r\n\r\n  remove(index) {\r\n    if (index && this.representationID.hasOwnProperty(index)) {\r\n      delete this.representationMap[this.representationID[index]];\r\n      delete this.representationID[index];\r\n    }\r\n\r\n    const sortedKeys = Object.keys(this.representationID).sort();\r\n    for (const i in sortedKeys) {\r\n      if (sortedKeys.hasOwnProperty(i)) {\r\n        const id = sortedKeys[i];\r\n        if (id > index) {\r\n          this.representationID[id - 1] = this.representationID[id];\r\n          this.representationMap[this.representationID[id]] -= 1;\r\n          delete this.representationID[id];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.representationMap = {};\r\n    this.representationID = {};\r\n  }\r\n}\r\n\r\n\r\nconst representationsStorage = new RepresentationMap();\r\n\r\nfunction keyRemap(key) {\r\n  const keys = {\r\n    s: 'selector',\r\n    m: 'mode',\r\n    c: 'colorer',\r\n    mt: 'material',\r\n    mode: 'modes',\r\n    color: 'colorers',\r\n    colorer: 'colorers',\r\n    select: 'selector',\r\n    material: 'materials',\r\n    selector: 'selector',\r\n  };\r\n  const ans = keys[key];\r\n  return ans === undefined ? key : ans;\r\n}\r\n\r\nclass CLIUtils {\r\n  list(miew, repMap, key) {\r\n    let ret = '';\r\n    if (miew && repMap !== undefined) {\r\n      if (key === undefined || key === '-e') {\r\n        const count = miew.repCount();\r\n\r\n        for (let i = 0; i < count; i++) {\r\n          ret += this.listRep(miew, repMap, i, key);\r\n        }\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  listRep(miew, repMap, repIndex, key) {\r\n    let ret = '';\r\n    const rep = miew.repGet(repIndex);\r\n    if (!rep) {\r\n      logger.warn(`Rep ${repIndex} does not exist!`);\r\n      return ret;\r\n    }\r\n    const index = repIndex;\r\n    const repName = repMap.get(index);\r\n\r\n    const { mode, colorer } = rep;\r\n    const selectionStr = rep.selectorString;\r\n    const material = rep.materialPreset;\r\n\r\n    ret += `#${index} : ${mode.name}${repName === '<no name>' ? '' : `, ${repName}`}\\n`;\r\n\r\n    if (key !== undefined) {\r\n      ret += `    selection : \"${selectionStr}\"\\n`;\r\n      ret += `    mode      : (${mode.id}), ${mode.name}\\n`;\r\n      ret += `    colorer   : (${colorer.id}), ${colorer.name}\\n`;\r\n      ret += `    material  : (${material.id}), ${material.name}\\n`;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  listSelector(miew, context) {\r\n    let ret = '';\r\n\r\n    for (const k in context) {\r\n      if (context.hasOwnProperty(k)) {\r\n        ret += `${k} : \"${context[k]}\"\\n`;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  listObjs(miew) {\r\n    const objs = miew._objects;\r\n\r\n    if (!objs || !Array.isArray(objs) || objs.length === 0) {\r\n      return 'There are no objects on the scene';\r\n    }\r\n\r\n    const strList = [];\r\n    for (let i = 0, n = objs.length; i < n; ++i) {\r\n      strList[i] = `${i}: ${objs[i].toString()}`;\r\n    }\r\n\r\n    return strList.join('\\n');\r\n  }\r\n\r\n  joinHelpStr(helpData) {\r\n    if (helpData instanceof Array) {\r\n      return helpData.join('\\n');\r\n    }\r\n    return helpData;\r\n  }\r\n\r\n  help(path) {\r\n    if (_.isUndefined(path)) {\r\n      return `${this.joinHelpStr(clihelp.$help)}\\n${_.slice(_.sortBy(_.keys(clihelp)), 1).join(', ')}\\n`;\r\n    }\r\n\r\n    const helpItem = _.get(clihelp, path);\r\n    return _.isUndefined(helpItem) ? this.help() : `${this.joinHelpStr(helpItem.$help)}\\n`;\r\n  }\r\n\r\n  load(miew, arg) {\r\n    if (miew === undefined || arg === undefined || arg === '-f') {\r\n      return;\r\n    }\r\n    miew.awaitWhileCMDisInProcess();\r\n    const finish = () => miew.finishAwaitingCMDInProcess();\r\n    miew.load(arg).then(finish, finish);\r\n  }\r\n\r\n  checkArg(key, arg, modificate) {\r\n    if (key !== undefined && arg !== undefined) {\r\n      if (keyRemap(key) === 'selector') {\r\n        const res = selectors.parse(arg);\r\n\r\n        if (res.error !== undefined) {\r\n          const selExc = { message: res.error };\r\n          throw selExc;\r\n        }\r\n\r\n        if (modificate !== undefined && modificate) {\r\n          return res.selector;\r\n        }\r\n        return arg;\r\n      }\r\n\r\n      const modificators = {\r\n        colorers,\r\n        modes,\r\n        materials,\r\n      };\r\n\r\n      let modificator = key;\r\n      let temp;\r\n      while (modificator !== temp) {\r\n        temp = modificator;\r\n        modificator = keyRemap(temp);\r\n      }\r\n\r\n      if (modificators[modificator].get(arg) === undefined) {\r\n        const exc = { message: `${arg} is not existed in ${modificator}` };\r\n        throw exc;\r\n      }\r\n      return arg;\r\n    }\r\n    return NULL;\r\n  }\r\n\r\n  propagateProp(path, arg) {\r\n    if (path !== undefined) {\r\n      let argExc = {};\r\n      const adapter = options.adapters[typeof _.get(settings.defaults, path)];\r\n      if (adapter === undefined) {\r\n        const pathExc = { message: `${path} is not existed` };\r\n        throw pathExc;\r\n      }\r\n\r\n      if ((path.endsWith('.color') || path.endsWith('.baseColor')\r\n        || path.endsWith('.EL.carbon')) && typeof arg !== 'number') {\r\n        arg = palettes.get(settings.now.palette).getNamedColor(arg);\r\n      }\r\n\r\n      if (path.endsWith('.fg') || path.endsWith('.bg')) {\r\n        if (typeof arg !== 'number') {\r\n          const val = palettes.get(settings.now.palette).getNamedColor(arg, true);\r\n          if (val !== undefined) {\r\n            arg = `0x${val.toString(16)}`;\r\n          }\r\n        } else {\r\n          arg = `0x${arg.toString(16)}`;\r\n        }\r\n      }\r\n\r\n      if (path.endsWith('.template')) {\r\n        arg = arg.replace(/\\\\n/g, '\\n');// NOSONAR\r\n      }\r\n\r\n      if (arg !== undefined && adapter(arg) !== arg && adapter(arg) !== (arg > 0)) {\r\n        argExc = { message: `${path} must be a \"${typeof _.get(settings.defaults, path)}\"` };\r\n        throw argExc;\r\n      }\r\n    }\r\n    return arg;\r\n  }\r\n\r\n  unquoteString(value) {\r\n    return utils.unquoteString(value);\r\n  }\r\n}\r\n// repIndexOrRepMap could be RepresentationMap or index\r\n\r\n\r\nconst utilFunctions = new CLIUtils();\r\n\r\nfunction CreateObjectPair(a, b) {\r\n  const obj = {};\r\n  obj[a] = b;\r\n  return obj;\r\n}\r\n\r\nfunction ArgList(arg) {\r\n  if (arg instanceof this.constructor) {\r\n    return arg;\r\n  }\r\n  if (arg instanceof Array) {\r\n    this._values = arg.slice(0);\r\n  } else if (arg) {\r\n    this._values = [arg];\r\n  } else {\r\n    this._values = [];\r\n  }\r\n}\r\n\r\nArgList.prototype.append = function (value) {\r\n  const values = this._values;\r\n  values[values.length] = value;\r\n  return this;\r\n};\r\n\r\nArgList.prototype.remove = function (value) {\r\n  const values = this._values;\r\n  const index = values.indexOf(value);\r\n  if (index >= 0) {\r\n    values.splice(index, 1);\r\n  }\r\n  return this;\r\n};\r\n\r\nArgList.prototype.toJSO = function (cliUtils, cmd, arg) {\r\n  const res = {};\r\n\r\n  const list = this._values;\r\n  for (let i = 0, n = list.length; i < n; ++i) {\r\n    _.set(res, list[i].id, cliUtils.propagateProp(`${keyRemap(cmd)}.${arg}.${list[i].id}`, list[i].val));\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nfunction Arg(_id, _val) {\r\n  this.id = _id;\r\n  this.val = _val;\r\n}\r\n\r\nconst cliutils = Object.create({});\r\n\r\ncliutils.Arg = Arg;\r\ncliutils.ArgList = ArgList;\r\n\r\ncliutils.miew = null;\r\ncliutils.echo = null;\r\ncliutils.representations = representationsStorage;\r\ncliutils.utils = utilFunctions;\r\n\r\ncliutils._ = _;\r\ncliutils.CreateObjectPair = CreateObjectPair;\r\ncliutils.keyRemap = keyRemap;\r\ncliutils.Context = selectors.Context;\r\ncliutils.ClearContext = selectors.ClearContext;\r\n\r\ncliutils.NULL = NULL;\r\n\r\ncliutils.notimplemented = function () {\r\n  return this.NULL;\r\n};\r\n\r\nMiew.prototype.script = function (script, _printCallback, _errorCallback) {\r\n  parsercli.yy.miew = this;\r\n  parsercli.yy.echo = _printCallback;\r\n  parsercli.yy.error = _errorCallback;\r\n  if (this.cmdQueue === undefined) {\r\n    this.cmdQueue = [];\r\n  }\r\n\r\n  if (this.commandInAction === undefined) {\r\n    this.commandInAction = false;\r\n  }\r\n\r\n  this.cmdQueue = this.cmdQueue.concat(script.split('\\n'));\r\n};\r\n\r\nMiew.prototype.awaitWhileCMDisInProcess = function () {\r\n  this.commandInAction = true;\r\n};\r\n\r\nMiew.prototype.finishAwaitingCMDInProcess = function () {\r\n  this.commandInAction = false;\r\n};\r\n\r\nMiew.prototype.isScriptingCommandAvailable = function () {\r\n  return this.commandInAction !== undefined\r\n         && !this.commandInAction\r\n         && this.cmdQueue !== undefined\r\n         && this.cmdQueue.length > 0;\r\n};\r\n\r\nMiew.prototype.callNextCmd = function () {\r\n  if (this.isScriptingCommandAvailable()) {\r\n    const cmd = this.cmdQueue.shift();\r\n\r\n    const res = {};\r\n    res.success = false;\r\n    try {\r\n      parsercli.parse(cmd);\r\n      res.success = true;\r\n    } catch (e) {\r\n      res.error = e.message;\r\n      parsercli.yy.error(res.error);\r\n      this.finishAwaitingCMDInProcess();\r\n    }\r\n    return res;\r\n  }\r\n  return '';\r\n};\r\n\r\nparsercli.yy = cliutils;\r\n// workaround for incorrect JISON parser generator for AMD module\r\nparsercli.yy.parseError = parsercli.parseError;\r\n"],"names":["this","Timer","startTime","oldTime","elapsedTime","running","now","getElapsedTime","update","delta","newTime","p","window","performance","bind","Date","createElement","tag","id","css","element","document","style","cssText","Stats","domElement","_text","appendChild","_startTime","_prevTime","_deltas","Array","_index","_total","_count","time","length","ms","fps","textContent","toPrecision","end","on","undefined","display","_typeof","isUndefOrEqual","param","value","EventDispatcher","_handlers","prototype","addEventListener","type","callback","context","handlers","params","_checkPar","par","_","find","push","removeEventListener","self","forEach","handler","ev","remove","values","omitBy","dispatchEvent","event","apply","priorities","debug","info","report","warn","error","Logger","call","console","_priority","Object","create","constructor","instantiate","verify","number","isNumber","Error","defineProperty","get","findKey","set","level","levels","keys","message","priority","_message","String","output","log","browserType","DEFAULT","SAFARI","encodeQueryComponent","text","excludeExp","encode","code","fromCharCode","parseInt","substr","encodeURIComponent","replace","decodeQueryComponent","decodeURIComponent","getUrlParameters","url","location","search","query","substring","indexOf","result","match","exec","getUrlParametersAsDict","a","i","key","resolveURL","str","URL","href","anchor","generateRegExp","symbolStr","symbolList","n","charCodeAt","toString","listStr","join","RegExp","attrs","content","setAttribute","child","createTextNode","HTMLElement","deriveClass","cls","base","members","statics","assign","deriveDeep","obj","needZeroOwnProperties","res","copy","hexColor","color","hex","DebugTracer","namespace","enabled","enable","indent","methods","wrap","method_","name_","spaces","logger","args","name","method","Function","OutOfMemoryError","allocateTyped","TypedArrayName","size","e","RangeError","bytesToBase64","buffer","bytes","Uint8Array","binary","byteLength","btoa","bytesFromBase64","atob","arrayToBase64","array","TypedArrayClass","arrayFromBase64","slice","compareOptionsWithDefaults","opts","defOpts","optsStr","isAlmostPlainObject","o","isPlainObject","proto","getPrototypeOf","hasOwnProperty","objectsDiff","src","dst","diff","forIn","srcValue","dstValue","deepDiff","isEmpty","isEqual","forInRecursive","object","iterateThrough","prefix","newPref","enquoteString","isString","unquoteString","SyntaxError","getFileExtension","fileName","Math","max","lastIndexOf","Infinity","splitFileName","ext","dataUrlToBlob","parts","split","partsCount","Blob","getBrowser","navigator","vendor","userAgent","shotOpen","open","write","shotDownload","dataUrl","filename","msSaveBlob","link","download","innerHTML","createObjectURL","body","click","removeChild","data","blobData","copySubArrays","indices","itemSize","j","shallowCloneNode","node","newNode","cloneNode","worldPos","unquotedStringRE","enquoteHelper","correctSelectorIdentifier","test","concatTypedArraysUnsafe","first","second","mergeTypedArraysUnsafe","reduce","acc","cur","start","count","JobHandle","_shouldCancel","slaveEvent","VERSION","defaults","modes","BS","atom","bond","space","multibond","aromrad","showarom","polyComplexity","poor","low","medium","high","ultra","VW","LN","offsarom","chunkarom","lineWidth","LC","SA","zClip","probeRadius","subset","wireframe","SE","QS","isoValue","gaussLim","scale","gridSpacing","CS","probePositions","TR","radius","TU","heightSegmentsRatio","tension","CA","depth","ss","helix","width","arrow","strand","TX","template","horizontalAlign","verticalAlign","dx","dy","dz","fg","bg","showBg","VD","kSigma","kSigmaMed","kSigmaMax","frame","isoMode","colorers","EL","carbon","UN","CO","baseColor","CB","factor","SQ","gradient","TM","min","OC","HY","MO","antialias","camFov","camNear","camFar","camDistance","radiusToFit","fogNearFactor","fogFarFactor","fogAlpha","fogColor","fogColorEnable","palette","resolution","autoResolution","autoPreset","preset","presets","mode","colorer","selector","material","empty","wire","small","macro","objects","line","dashSize","gapSize","transparent","draft","clipPlane","clipPlaneFactor","clipPlaneSpeed","plugins","axes","fog","zSprites","isoSurfaceFakeOpacity","suspendRender","nowater","autobuild","fxaa","outline","threshold","thickness","ao","shadow","autoRotation","maxfps","fbxprec","autoRotationAxisFixed","zooming","picking","pick","editing","aromatic","singleUnit","stereo","interpolateViews","transparency","translationSpeed","example","good","ssaoKernelRadius","ssaoFactor","stereoBarrel","use","multiFile","Settings","old","_changed","reset","utils","path","oldValue","_notifyChange","merge","_notifyChanges","defaultValue","cloneDeep","checkpoint","deepValue","deepPath","changed","filter","applyDiffs","diffs","getDiffs","versioned","setPluginOpts","plugin","repIndex","asBoolean","toLowerCase","adapters","string","Number","cL1Ass","cOptsSep","cL2Ass","cLSep","cCommonIgnoreSymbols","getLevel1ExcludedExpr","cLevel1Ignores","getLevel2ExcludedExpr","cLevel2Ignores","cL1ExclExpr","encodeQueryComponentL1","cL2ExclExpr","encodeQueryComponentL2","ensureRepList","reps","settings","ensureRepAssign","prop","rep","addObject","options","_objects","newOpts","newObj","parseParams","sep","extractArgs","input","defaultsDict","bang","inputVal","arg","pair","adapter","actions","l","load","t","v","view","u","unit","menu","isArray","r","s","select","m","c","mt","materials","dup","ar","_fromArray","entries","entry","action","isFunction","fromAttr","attr","fromURL","_processOptsForURL","_processArgsForURL","_processObjForURL","objOpts","toURL","stringList","idx","checkAndAdd","addReps","repList","addObjects","objList","protocol","host","pathname","_processOptsForScript","_processArgsForScript","_processObjForScript","map","_processRepsForScript","index","repString","strIdx","localAdd","toScript","commandsList","command","saveQuotes","quote","trim","Atom","residue","position","role","het","serial","occupancy","temperature","charge","mask","hydrogenCount","radicalCount","valence","bonds","flags","Flags","HYDROGEN","CARBON","process","_chain","getName","_sequence","NONPOLARH","Element","fullName","weight","radiusBonding","hValency","hydrogenValency","U1","Lead","U2","Wing","U18","N","Constants","C","O","SG","D","T","byAtomicNumber","ByAtomicNumber","byName","ByName","getByName","cBondTypes","UNKNOWN","COVALENT","AROMATIC","getAtomPos","Bond","left","right","order","fixed","_left","_right","_fixed","_order","_type","distanceTo","currAtom","_forEachNeighbour","l2Atom","refPoint","currDir","posGetter","rightCount","leftCount","tmpVec","clone","checkDir","sub","dotProd","dot","checkCarbon","stages","forEachLevelOne","forEachLevelTwo","stageId","multiplyScalar","third","maxNeibs","another","secondPos","firstV","secondV","crossVectors","lengthSq","normalize","_fixDir","BondType","cNucleicControlNames","cNucleicWing1Names","cNucleicWing2Names","cCylinderSource","cCylinderTarget","types","atoms","Residue","chain","sequence","icode","_component","_icode","_mask","_atoms","_secondary","_firstAtom","_leadAtom","_wingAtom","_lastAtom","_controlPoint","_midPoint","_wingVector","_cylinders","_isValid","_het","_molecule","xyz","altLoc","tempFactor","complex","getComplex","addAtom","forEachAtom","names","_findAtomByName","_name","next","getAtomPosition","leadAtom","_findFirstAtomInList","wingStart","wingEnd","cylSource","targetList","getCylinderTargetList","cylTarget","prevLeadPos","currLeadPos","prevWingPos","prevWing","vectorA","vectorB","needToNegate","abs","angleTo","PI","negate","prevRes","prev","nextRes","chainAsNucleic","bFirstInChain","lp","THREE","x","y","z","_detectLeadWing","lerp","calcWing","asNucleic","_innerFinalize","anotherResidue","tempCount","occupCount","ResidueType","letterCode","_fullName","ALA","ARG","ASN","ASP","CYS","GLN","GLU","GLY","HIS","ILE","LEU","LYS","MET","PHE","PRO","PYL","SEC","SER","THR","TRP","TYR","VAL","A","G","I","U","DA","DC","DG","DI","DT","DU","WAT","H2O","HOH","DOD","UNK","UNL","PROTEIN","BASIC","ACIDIC","POLAR","NONPOLAR","NUCLEIC","PURINE","PYRIMIDINE","DNA","RNA","WATER","_addFlag","flag","list","StandardTypes","hydro","_addParam","ChainType","Chain","_complex","_residues","minSequence","POSITIVE_INFINITY","maxSequence","NEGATIVE_INFINITY","residues","seqNum","iCode","_determineType","curr","_finalize2","frameData","prevData","frameRes","currData","getResidueType","addResidueType","addResidue","StructuralElement","init","term","generic","genericByType","serialAtomMap","residueHash","splitUnifiedSerial","chainId","serialId","hashCode","getUnifiedSerial","Type","STRAND","BRIDGE","HELIX_310","HELIX_ALPHA","HELIX_PI","HELIX","TURN_310","TURN_ALPHA","TURN_PI","TURN","BEND","COIL","Generic","LOOP","StructuralElementType","StructuralElementGeneric","typeByPDBHelixClass","Helix","helixClass","comment","Strand","sheet","sense","atomCur","atomPrev","as","isNaN","Sheet","_width","_strands","_finalize","SGroup","saveNode","_id","_position","_charge","_repeat","_center","xmlNodeRef","nLimon","bLow","bHight","aPos","addVectors","parser","k","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","$Va","$Vb","$Vc","$Vd","trace","yy","symbols_","terminals_","productions_","performAction","anonymous","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","keyword","GetSelector","RangeList","append","Range","ValueList","table","defaultActions","parseError","hash","recoverable","parse","stack","tstack","vstack","lstack","TERROR","EOF","arguments","lexer","sharedState","setInput","yylloc","yyloc","ranges","lex","token","pop","symbol","state","yyval","len","newState","expected","errStr","showPosition","loc","first_line","last_line","first_column","last_column","range","concat","_input","_more","_backtrack","done","matched","conditionStack","offset","ch","lines","unput","oldLines","more","reject","backtrack_lexer","less","pastInput","past","upcomingInput","pre","test_match","indexed_rule","backup","matches","tempMatch","rules","_currentRules","flex","begin","condition","popState","conditions","topState","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","Parser","List","_values","splice","toJSON","includes","valuesArray","upperOnly","toUpperCase","_validate","Selector","ListSelector","RangeListSelector","ValueListSelector","caseSensitive","NoneSelector","_atom","AllSelector","none","PrefixOperator","rhs","InfixOperator","lhs","keywords","defineSelector","SelectorClass","factory","NULL_SELECTOR","defineOperator","OperatorClass","includesAtom","byResidueTypeFlag","selectors","Context","exc","ClearContext","BiologicalUnit","_selector","_boundaries","boundingBox","boundingSphere","makeEmpty","expandByPoint","bbc","getCenter","setFromCenterAndSize","radiusSquared","center","pos","lengthSquared","distanceToSquared","sqrt","Assembly","chains","matrices","oldCenter","oldRad","applyMatrix4","newRad","addScalar","subScalar","matrix","Component","_residueIndices","_cycles","_subDivs","_residueCount","resIdc","idIdc","idCount","last","subDivs","resCnt","_bonds","forEachCycle","cycle","forEachResidue","cycles","subs","currRes","endRes","_forEachSubChain","_subIdx","currIdx","lastSubIdx","subIdx","arr","boundaries","cMaxPairsForHashCode","cHashTableSize","cNumbersPerPair","cMaxNeighbours","cInvalidVal","cBigPrime","AtomPairs","maxPairsEstimate","numPairs","numMaxPairs","intBuffer","Int32Array","hashBuffer","indexA","indexB","ia","ib","codeToAdd","apI","cEstBondsMultiplier","cSpaceCode","cBondTolerance","cEpsilon","_getBondingRadius","_isAtomEligible","isHet","AutoBond","_maxRad","bBox","getDefaultBoundaries","_vBoxMin","_vBoxMax","_pairCollection","getAtoms","numAtoms","aInd","collection","numBondsForAtom","bInd","indTo","addPair","vw","getVoxelWorld","atomsNum","rA","isHydrogenA","posA","locationA","atomA","processAtom","atomB","isHydrogen","locationB","dist2","rB","maxAcceptable","forEachAtomWithinRadius","iA","iB","_addPair","bondsA","numBonds","newBond","addBond","_buildInner","_calcBoundingBox","_addExistingPairs","_findPairs","_addPairs","nAtoms","maxRad","destroy","cCrossThresh","cAromaticType","cAromaticAtoms","_coDirVectors","v1Tmp","v2Tmp","cp","v1","v2","_insertAscending","val","_anotherAtom","_cosBetween","theta","clamp","_markAromatic","Cycle","atomsList","nA","add","nextAtom","checkBond","forEachBond","_isAromatic","_isPossibleAromatic","rightIdx","leftIdx","_checkCycleSimple","_checkCycleComplex","assert","AromaticLoopsMarker","bondsData","bondMarks","_bondsData","_bondMarks","_resetCycles","_currIdx","bond1","bond2","arr1","arr2","n1","n2","i1","i2","prevBond","currRight","bondsOrder","currLeft","currVec","startAtomRef","_currStart","checkAromatic","_checkBond","_haveSameCycle","anotherAtom","anotherVec","newDir","cross","dir","newRight","_tryBond","checkCycle","forEachComponent","component","_startCycle","newCycle","addCycle","_findLoops","_getSphereSliceRadiusRange","zMin","zMax","dzMin","dzMax","rzMin","rzMax","rMin","rMax","_getCircleSliceRadiusRange","yMin","yMax","dyMin","dyMax","ryMin","ryMax","VoxelWorld","box","vCellSizeHint","_box","getSize","divide","floor","_last","_cellSize","_cellInnerR","_cellOuterR","numVoxels","_voxels","getAtomCount","voxelIdx","_findVoxel","point","zero","_zero","voxel","_voxel","xRange","_xRange","yRange","_yRange","zRange","_zRange","_forEachVoxelWithinRadiusSimple","rRangeXY","rRangeX","xVal","yVal","zVal","isInsideX","isInsideY","isInsideZ","divideScalar","clampScalar","vCenter","_vCenter","distTouch2","distInside2","d2","r2","_forEachVoxelWithinRadius","isInside","_forEachAtomInVoxel","dist","_forEachAtomWithinDistFromGroup","atomProc","voxels","processIfWithin","MINIMAL_DISTANCE","MIN_HBOND_ENERGY","MAX_HBOND_ENERGY","COUPLING_CONSTANT","MAX_COUPLING_DISTANCE","MAX_RESIDUES_THRESHOLD","HBondInfo","_hbonds","_buildVW","_build","from","to","acceptor","acc0","acc1","energy","ri","getType","preri","rj","prerj","_calcHBondEnergy","pairs","PairCollection","_residueGetCAlpha","_residueGetCO","h","predonor","donor","_residueGetNH","distanceHO","distanceHC","distanceNC","distanceNO","round","donorInfo","accInfo","BridgeType","freeze","NO_BRIDGE","PARALLEL","ANTI_PARALLEL","HelixFlag","START","MIDDLE","END","START_AND_END","StructureType","SecondaryStructureMap","_ss","_sheet","_betaPartners","_bend","getResidues","_helixFlags","_chainLengths","_chains","_buildBetaSheets","_buildAlphaHelices","inResidues","chainLength","inPreferPiHelices","stride","isBond","kappa","_kappa","_isHelixStart","isTurn","p1","p2","p3","p4","v12","v34","prevPrev","nextNext","curCA","ppCA","nnCA","ckap","_cosinusAngle","skap","atan2","bridges","lenA","chainA","b","lenB","chainB","_testBridge","found","bridge","unshift","chainI","getChain","chainJ","sort","ibi","iei","jbi","jei","ibj","iej","jbj","jej","_hasChainBreak","bulge","ladderset","Set","ladder","sheetset","toMove","_areBridgesLinked","betai","betaj","parallel","d","f","ai","aj","has","VOXEL_SIZE","helixClassMap","loopMap","Complex","_components","_helices","_sheets","structures","_residueTypes","_sgroups","_molecules","_maskNeedsUpdate","metadata","symmetry","units","_currentUnit","forEachChain","updateToFrame","resName","rt","chainName","resId","atomName","localeCompare","molecules","groups","components","maxSerial","chainShift","uniSerial","remnant","insCode","ser","addComp","comp","resCount","currStart","isConnected","setSubDivs","currSubDivs","enableEditing","_fillCmpEdit","_fillCmpNoedit","getBoundaries","getTransforms","getSelector","setCurrentUnit","newUnit","computeBoundaries","_computeBounds","_finalizeBonds","forEachSGroup","_rebuildSGroupOnAtomChange","updateStructuresMask","getBonds","finalize","getSequence","getICode","helices","sheets","needAutoBonding","autoConnector","build","other","_fillComponents","marker","markCycles","detectAromaticLoops","detectCycles","_finalizeMolecules","molecule","updater","structure","collectMask","forEachMolecule","setMask","clearMask","totalSelector","reseter","_atomNames","dict","_elements","_residueNames","_chainNames","_altlocNames","_voxelWorld","addAtoms","srcArray","dstArray","functor","elem","complexes","atomBias","bondBias","residueBias","chainBias","componentBias","bias","processBond","processResidue","processChain","processComponent","doNothing","addElement","ssMap","getSheet","item","lastCode","lastSheetIndex","lastHelixIndex","curStructure","curCode","curResidue","curSheetIndex","loopType","curSheet","addStrand","pow2ceil","Volume","dimensions","vecSize","volumeInfo","_dimVec","_volumeInfo","_dimX","_dimY","_dimZ","_rowElements","_planeElements","_totalElements","_data","getValue","setValue","addValue","boxSize","Float32Array","vl","getCellSize","vs","xSize","ySize","zSize","volMap","_voxelValue","zi","zm","zp","yi","ym","yp","xi","xm","xp","tilesX","ceil","tilesY","height","tileRow","row","texture","needsUpdate","Molecule","CSS2DObject","_element","parentNode","transp","el","getElement","op","top","op100","opacity","RCGroup","raycaster","intersects","visible","children","raycast","innerOnly","enableSubset","disableSubset","totalSubset","getSubset","precision","renderer","capabilities","getMaxPrecision","noiseWidth","noiseHeight","_noiseData","_noiseWrapS","_noiseWrapT","_noiseMinFilter","_noiseMagFilter","_noiseMapping","noiseTexture","_samplesKernel","defaultUniforms","lights","diffuse","specular","shininess","fixedColor","zOffset","zClipValue","clipPlaneValue","invModelViewMatrix","world2colorMatrix","dashedLineSize","dashedLinePeriod","projMatrixInv","viewport","samplesKernel","noiseTex","noiseTexelSize","srcTexelSize","uberOptionNames","UberMaterial","instancedPos","instancedMatrix","attrColor","attrColor2","attrAlphaColor","overrideColor","sphereSprite","cylinderSprite","fakeOpacity","prepassTransparancy","colorFromPos","shadowmap","shadowmapType","colorFromDepth","dashedLine","thickLine","fogTransparent","normalsToGBuffer","toonShading","uberOptions","setValues","uniforms","vertexShader","precisionString","fragmentShader","side","zClipCoef","noise","source","defines","extensions","createInstance","inst","USE_FOG","INSTANCED_POS","INSTANCED_MATRIX","ATTR_COLOR","ATTR_COLOR2","ATTR_ALPHA_COLOR","OVERRIDE_COLOR","SPHERE_SPRITE","fragDepth","CYLINDER_SPRITE","ZCLIP","CLIP_PLANE","FAKE_OPACITY","USE_LIGHTS","COLOR_FROM_POS","SHADOWMAP","SHADOWMAP_PCF_SHARP","SHADOWMAP_PCF_RAND","SHADOWMAP_BASIC","COLOR_FROM_DEPTH","PREPASS_TRANSP","DASHED_LINE","THICK_LINE","FOG_TRANSPARENT","drawBuffers","NORMALS_TO_G_BUFFER","TOON_SHADING","setUberOptions","shallow","updateUniforms","LAYERS","VOLUME","TRANSPARENT","PREPASS_TRANSPARENT","VOLUME_BFPLANE","COLOR_FROM_POSITION","SELECTION_LAYERS","resetTransform","quaternion","updateMatrixWorldRecursive","parent","updateMatrixWorld","addSavingWorldTransform","_worldMatrixInverse","getInverse","matrixWorld","multiply","decompose","renderDummyQuad","_material","depthWrite","_scene","_quad","_camera","render","renderScreenQuad","isIdentity","identity","equals","applyToPointsArray","w","elements","persp","ScreenQuadMaterial","srcTex","vertexScreenQuadShader","depthTest","renderScreenQuadFromTex","fragmentScreenQuadFromTex","renderScreenQuadFromTexWithDistortion","coef","fragmentScreenQuadFromTexWithDistortion","setMinimalFov","angle","aspect","fov","radToDeg","atan","tan","degToRad","updateHalfSized","camera","originalAspect","originalFov","updateProjectionMatrix","setDistanceToFit","sin","intersectVisibleObject","gfxObj","fogFarPlane","intersectObject","nearPlane","near","matrixWorldInverse","farPlane","far","extractScale","_v","te","det","determinant","_calcCylinderMatrix","posBegin","posEnd","posCenter","matScale","makeScale","matRotHalf","makeRotationX","matRotLook","vUp","lookAt","setPosition","_calcChunkMatrix","eye","target","up","rad","_forEachMeshInGroup","group","processObj","_countMeshTriangles","mesh","geom","geometry","attribs","attributes","property","currAttr","indexSize","faces","_countTriangles","totalCount","_groupHasGeometryToRender","hasGeoms","traverse","_buildDistorionMesh","widthSegments","heightSegements","calcInverseBarrel","epsilon","prevR2","curR2","dr","geo","getAttribute","setXY","copyAtList","attribute","indexList","fillArray","startIndex","endIndex","removeChildren","clearTree","dispose","destroyObject","belongToSelectLayers","layers","_getMeshesArr","root","meshTypes","meshes","applyTransformsToMeshes","mtc","mtcCount","applyMatrix","newMesh","processTransparentMaterial","prepassMat","prepassMesh","processColFromPosMaterial","colFromPosMat","colFromPosMesh","createShadowmapMaterial","receiveShadow","castShadow","shadowmapMat","shadowmapMesh","isShadowmapMesh","removeShadowmapMaterial","processObjRenderOrder","idMaterial","renderOrder","isGroup","makeVisibleMeshes","checker","applySelectionMaterial","depthFunc","getMiddlePoint","point1","point2","optionalTarget","addScaledVector","calcCylinderMatrix","calcChunkMatrix","forEachMeshInGroup","countTriangles","groupHasGeometryToRender","buildDistorionMesh","_defaultBoundaries","Visual","dataSource","gfxutils","_dataSource","release","getDataSource","_ensureArray","EntityList","entities","_list","_dict","_indices","entity","register","registerInList","registerInDict","unregisterFromList","unregisterFromDict","makeContextDependent","defineProperties","CollisionSphere","_radius","sphere","_sphere","ray","intersectSphere","distance","origin","SphereCollisionGeo","inters","chunkIdx","computeBoundingBox","tmpColor","OFFSET_SIZE","COLOR_SIZE","setArrayXYZ","setArrayXYZW","InstancedSpheresGeometry","spheresCount","sphereComplexity","useZSprites","_sphGeometry","_init","itemIdx","itemPos","itemRad","_offsets","setSphere","colorVal","_colors","g","finishUpdate","computeBoundingSphere","chunkIndices","alphaArr","_alpha","instanceCount","sphereGeo","alpha","fill","RaycastableBufferGeometry","uv1","uv2","uv3","barycoord","_barycoord","barycoordFromPoint","pA","pB","pC","intersect","intersectTriangle","uv","vA","_vA","vB","_vB","vC","_vC","intersectionPoint","_intersectionPoint","fromBufferAttribute","intersection","checkIntersection","uvA","_uvA","uvB","_uvB","uvC","_uvC","uvIntersection","normal","getNormal","face","faceIndex","intersectsSphere","intersectsBox","getX","checkBufferGeometryIntersection","MAX_IDC_16BIT","VEC_SIZE","ChunkedObjectsGeometry","chunkGeo","chunksCount","_chunkGeo","colors","chunkSize","_chunkSize","facesPerChunk","srcPos","_positions","srcNorm","_normals","srcColor","dstPos","dstNorm","dstColor","dstPtOffset","ptIdxBegin","ptIdxEnd","subarray","chunkIndex","chunkIndexSize","pointsCount","use32bitIndex","Uint32Array","Uint16Array","posOffset","setIndex","SimpleSpheresGeometry","sphGeometry","normals","geoNormals","_chunkPos","_tmpPositions","tmpPos","geoPos","centerPos","tmpVector","normMtx","Simple2CCylindersGeometry","cylGeometry","_chunkNorms","_tmpVector","botPos","topPos","firstOffset","secondOffset","tmpArray","geoNorm","lerpVectors","mtx1","getNormalMatrix","fromArray","toArray","applyMatrix3","colorVal1","colorVal2","MAX_POINTS_COUNT_16BIT","PTS_PER_TRIANGLE","CylinderBufferGeometry","radiusTop","radiusBottom","radialSegments","heightSegments","openEnded","thetaStart","thetaLength","parameters","hasTop","hasBottom","vertexCount","facesCount","heightHalf","positions","uvs","currVtxIdx","currFaceIdx","tanTheta","v3","v4","setXYZ","vx","vy","vz","cos","startTIdx","lastIdx","fTIdx","currSrcIdx","getY","getZ","nextTVtx","startBIdx","lastBIdx","fBIdx","currSrcBIdx","nextBVtx","invMatrix","sortNumber","_prepareCylinderInfo","chunksIdx","cylinderInfo","even","newPar","_assignOpacity","color1","color2","Instanced2CCylindersGeometry","_useZSprites","_cylGeometry","_collisionGeo","me","mtxOffset","setItem","_matVector1","_matVector2","_matVector3","_invmatVector1","_invmatVector2","_invmatVector3","colorIdx","_color1","_color2","cylinderIndices","cylinderGeo","TRI_SIZE","tmpPrev","tmpNext","tmpRes","simpleNormal","normalOnCut","nearRingPt","_createExtrudedChunkGeometry","shape","ringsCount","ptsCount","totalPts","ExtrudedObjectsGeometry","_ringsCount","tmpShape","_tmpShape","hasSlope","hasCut","chunkStartIdx","_setPoints","_setSlopeNormals","_setBaseNormals","_addCut","vtxIdx","mtx","nPtsInRing","_countNormalsInRing","isSlope","shiftToExtraPt","subVectors","VERTEX_PER_SEGMENT","POS_SIZE","DIR_SIZE","COL_SIZE","direction","startSegmentIdx","segmentsCount","elemSize","ThickLinesGeometry","_initVertices","segmentIdx","pos1","pos2","directions","_directions","dirIdx","startSegIdx","endSegIdx","startPos","startDir","_buffersSize","indexOffset","pointOffset","LinesGeometry","posSize","getPositionSize","BaseLinesGeometry","CylinderCollisionGeo","itemOffset","COLLISION_RAD","ChunkedLinesGeometry","enableCollision","collisionGeo","segCount","segIdx","setSegments","getSubsetSegments","setColors","getSubsetColors","TwoColorLinesGeometry","segmentIndices","_segCounts","vectors","vecCount","tempPos1","tempPos2","CrossGeometry","setSegment","POS_RAD_SIZE","IsoSurfaceGeometry","_opts","_posRad","posRad","IsoSurfaceMarchCube","pointsValuesLinear","hasIntersection","bitsInside","numCellsPerSide","vx7000000","n3","striIndicesMarchCube","edgeTable","_voxelGradientFast","grad","GridCell","_arrSize","cubeIndex","Triangle","createArray","arrSize","IsoSurface","_numTriangles","_numVertices","_volumetricData","_xAxis","_yAxis","_zAxis","_xDir","_yDir","_zDir","volData","cellSize","xAxis","yAxis","zAxis","xDir","yDir","zDir","tmp","notZero","axe","EPSILON","isoLevel","grid","ind1","ind2","vertex","valP1","valP2","isoDiffP1","diffValP2P1","mu","triangles","firstIndices","_firstIndices","secondIndices","_secondIndices","vertexList","_vertexList","normalList","_normalList","_vertexInterp","triCount","triTblIdx","triTable","_triTable","step","appendSimple","vol","getData","dim","getDimensions","stepX","getStrideX","stepY","getStrideY","stepZ","getStrideZ","gc","gcVal","gcValSize","additions","tmpTriCount","appendVertex","axis","triVertex","_origin","posMtx","globTriCount","getDirectIdx","_gradient","_polygonize","computeGradient","_doGridPosNorms","_prepareAxesAndDirs","vertexMap","idcCount","newIndices","vertices","newPositions","newNormals","norm","faceVer","oldVerCount","vMap","newVer","matchedIndex","_remapIndices","_remapVertices","colorMap","atomMap","atomWeightMap","visibilitySelector","numVerts","xs","ys","zs","colorData","strideX","strideY","strideZ","atomWeightData","atomStrideX","atomStrideY","atomStrideZ","xInv","yInv","zInv","atomLookup","atomWeights","interp","idx1","idx2","collectWeight","coefX","coefY","coefZ","newVerCount","ind","mux","muy","muz","maxWeight","dominantIdx","atomIdx","c0","c1","c2","c3","cz0","cz1","numTriangles","newTriCount","i0","VolumeSurfaceGeometry","_visibilitySelector","_calcSurface","posRadArray","itemsCount","maxPosRad","minPosRad","tmpVal","minMaxValues","_findMinMax","minCoordRad","maxCoordRad","gridPadding","radScale","padRad","bbox","surface","isoSurf","compute","vertexFusion","setColorVolTex","volTexMap","packedArrays","_findNumVoxels","_computeSurface","_makeSurface","chem","QuickSurfGeometry","_shiftByOrigin","gaussdensity","atomicNum","invIsoValue","invGridSpacing","maxVoxelX","maxVoxelY","maxVoxelZ","volTexData","texStrideX","scaledRad","atomicNumFactor","radInv","radLim","radLim2","xMin","xMax","dy2dz2","addr","texAddr","expVal","density","exp","colInd","originX","originY","originZ","AVHash","maxDistance","minX","minY","minZ","maxX","maxY","maxZ","hashFunc","minW","iDim","jDim","kDim","nCells","jkDim","cellID","preHash","cid","iIdx","cellOffsets","cellLengths","maxCellLength","subArray","cellLength","neighbourListLength","withinRadii","rExtra","out","outIdx","nearI","nearJ","nearK","loI","loJ","loK","hiI","hiJ","hiK","iOffset","jOffset","cellStart","cellEnd","dataIndex","atomIndex","baseIndex","rSum","ContactSurface","_indexList","maxRadius","scaleFactor","lastClip","volTex","weights","weightsMap","gridx","gridy","gridz","sinTable","cosTable","neighbours","mid","ngTorus","uniformArray","TypeName","innI","fillGridDim","initializeGrid","gridSize","initializeAngleTables","initializeHash","rExt","singleAtomObscures","innX","innY","innZ","innCI","ra2","obscured","ni","projectPoints","sigma","sigma2Inv","ax","ay","az","ar2","ng","iax","iay","iaz","minx","miny","minz","maxx","maxy","maxz","colIdx","cr","cg","cb","iz","iy","dzy2","zyOffset","ix","cIdx","ap","spx","spy","spz","dd","normalToLine","projectTorus","aIdx","bIdx","xa","ya","za","r1","innR2","cosA","dmp","rInt","cost","sint","px","py","pz","current","projectTorii","innIdx","fixNegatives","innInnI","getVolume","timeEnd","ContactSurfaceGeometry","contactSurface","IsoSurfaceAtomColored","radiusAt","coord","colorX","colorY","colorZ","atomType","srcAtom","IsosurfaceBuildNormals","vBoxMin","vBoxMax","_numAtoms","_probeRadius","_atomsList","_voxelList","numAtomsRefs","ATOM_VOXEL_REF_SCALE","aveRad","numCells","_numCells","_aveRad","side2","side3","xScale","_xScale","yScale","_yScale","zScale","_zScale","maxAtomsRefs","xNumVoxMult","yNumVoxMult","zNumVoxMult","radAffect","diaAffect","numVoxX","numVoxY","numVoxZ","xIndMin","yIndMin","zIndMin","xIndMax","yIndMax","zIndMax","indVoxel","indexNext","_vertices","xInd","yInd","zInd","ref","indexAtom","closest","minDist2","MAX_VALUE","forEachRelatedAtom","numVertices","numCloseAtoms","vNormalX","vNormalY","vNormalZ","koef","r25","r01","maxRadAffect","maxRadAffect2","expScale","gatherNormals","radiusColorSmoothness","KOEF_ADD","colorsClose","weightsSum","gatherColors","weightNormalized","IsoSurfaceGeo","maxNumVertices","maxNumTriangles","needVertexColors","_maxNumVertices","_maxNumTriangles","HASH_SIZE","SSIsosurfaceGeometry","_innerBuild","geoOut","getGeo","_fromGeo","numTri3","atomsColored","nm","hashLines","hashEntries","bigNum","probeRadius2","atomRadiusScale","radMax","num","numPoints","vOut","invNP","tx","ty","tz","sign","cube","indexPointValue","cTwentyFour","xb","yb","zb","v0","a0","voxelWorld","getClosestAtom","a1","a2","isTriangleVisible","indInGeo0","addVertexToGeo","indInGeo1","indInGeo2","itr","meshRes","corners","vCellStep","cNumVerts","vaEdges","vCorner","indCell","indY","indZ","getCornerCoord","indPointValues","indValues","buildEdgePoint","offs","numTri","indTri","addTriangle","numIntersectedCells","cubeValuesIndex","indCorner","letter","atomT","probeRad","vDif","aLot","fx","fy","fz","indXMin","indYMin","indZMin","indXMax","indYMax","indZMax","distToSphere","numHashEtriesAllocated","numHashEntryIndex","vAdd","oneHynberes","n815851","n37633","n2453543","r106","hashResolution","marCubeResoultion","iHash","hLineIndex","dot2","iVertAdd","getNewHashEntry","entryFirst","probeSphereRadius","distToBorder","r11","innerBlockWorkAround","probeSpRad2","sideInv","radEst","xCorner","yCorner","zCorner","ok","expandFactor","meshResolution","colorMode","useVertexColors","excludeProbe","convertToAtomsColored","getBoundingBox","rProbeRadius","calculateGridCorners","numIntersectedCellsEstim","getNumIntersectedCells","createVertexHash","probeRadForNormalsColors","createVoxels","buildGeoFromCorners","modifyExcludedFromGeo","buildNormals","buildColors","destroyVoxels","createLabel","fieldTxt","className","spanText","fontSize","strings","spanNodeP","spanNodeText","LabelsGeometry","items","xTranslation","yTranslation","deltaPos","userData","translation","textAlign","fColor","bColor","background","SuperClass","NewObjectType","rest","onBeforeRender","scene","_onBeforeRender","_update","Mesh","UberObject","ZSpriteMesh","_geometry","_group","modelViewMatrix","multiplyMatrices","uniformsNeedUpdate","ZClippedMesh","modelView","_modelView","mvLength","_mvLength","setFromMatrixColumn","localToWorld","TextMesh","initialized","srcItem","label","visibility","SimpleMesh","_viewport","ThickLineMesh","projectionMatrix","InstancedMesh","ZClipped","ZSprite","Text","Line","LineSegments","Instanced","setMatParams","_createInstancedCylinders","Geometry","geometries","initMaterial","_createLineSegmentsGeoTriplet","renderParams","thickLines","_createSimpleGeoTriplet","geoClass","_createIsoSurfaceGeoTriplet","caps","surfaceOpts","MeshCreator","_caps","_settings","TransformGroup","geoParams","transforms","_geoParams","mat","_transforms","_createMeshes","_ray","inverseMatrix","_inverseMatrix","childIntersects","ciCount","geos","meshCnt","wrapper","Name","ChemGroup","selection","_selection","_mode","_colorer","_chunksIdc","chunks","_polyComplexity","_geo","_makeGeoArgs","_mesh","chunksList","_calcChunksList","setOpacity","_changeSubsetOpacity","AtomsGroup","atomsIdc","AtomsSphereGroup","calcAtomRadius","setColor","getAtomColor","updateColor","needsColorUpdate","AtomsSurfaceGroup","selectedAtoms","getSurfaceOpts","AtomsSASSESGroupStub","adjustColor","inverseColor","getAtomText","getNode","getVisualName","colorMappings","adjust","inverse","propagateColor","rule","startsWith","templateMappings","hetatm","water","parseTemplate","AtomsTextGroup","getLabelOpts","fgColor","bgColor","_slerp","omega","oSin","AromaticGroup","radOffset","addChunk","chunksToIdx","prevVector","currVector","segmentsHeight","_segmentsHeight","leprStep","currAtomIdx","cCount","cycAtoms","chunkPoints","tmpDir","cycleRad","prevPos","currPos","upDir","currAngle","_createShape","pts","AromaticTorusGroup","torusRad","getAromRadius","radiusV","calcStickRadius","lookAtVector","points","currPoint","AromaticLinesGroup","getAromaticOffset","prevPt","getAromaticArcChunks","ResiduesGroup","chunksIdc","resIdx","NucleicItemGroup","stickRad","getResidueColor","_processItem","NucleicCylindersGroup","cyl1","cyl2","NucleicSpheresGroup","calcMatrix","_buildStructureInterpolator","Smooth","METHOD_CUBIC","clip","CLIP_CLAMP","cubicTension","scaleTo","argTrans","transformT","tt","newt","ans","_addPoints","centerPoints","topPoints","tp","_addPointsForLoneResidue","nucleic","nameFrom","nameTo","posFrom","posTo","shift","wing","cpPrev","tpPrev","cpNext","tpNext","_calcPoints","firstIdx","_prevIdx","_nextIdx","arrIdx","_extrapolate2","otherIdx","prevIdx","nextIdx","CartoonHelper","startIdx","endIdx","pointsArrays","_topInterp","_centerInterp","_shift","_valueStep","_segmentsCount","firstRad","secondRad","outMtc","currRad","topInterp","cenInterp","currentValue","mtxIdx","lerpVal","currTop","currCenter","nextCenter","_loopThrough","subDiv","subDivI","subDivN","idc","matrixHelper","prevLast","prevSecondRad","getResidueRadius","prepareMatrices","ResiduesSubseqGroup","cmpMultiplier","getHeightSegmentsRatio","getTension","chunkIdc","subdivs","ResiduesTraceGroup","chunk","getCylinderCount","bondOrder","BondsGroup","drawMultiple","drawMultiorderBonds","showAromatic","showAromaticLoops","bondsIdc","bondsCount","getBondOrder","bondIdx","BondsCylinderGroup","emptyOffset","calcSpaceFraction","normDir","leftPos","rightPos","currBondIdx","atom1","atom2","a1Pos","a2Pos","calcNormalDir","minRad","currStickRad","STEP_SIZE","BondsLinesGroup","bondDir","a1Hangs","a2Hangs","AtomsProcessor","atomCount","_checkAtom","atomsGroup","meshIdx","chSubset","subsetEl","OrphanAtomsProcessor","ResiduesProcessor","ResidueGroup","_checkResidue","residuesGroup","NucleicProcessor","ResidueProcessor","SubseqsProcessor","getMaskedSubdivSequences","jEnd","BondsProcessor","bondsGroup","AromaticProcessor","cycleIdx","perCycle","Atoms","OrphanAtoms","Residues","Nucleic","Subseqs","Bonds","Aromatic","_bakeGroup","triplet","Processor","Group","GroupsFactory","gfxTriplet","createSpheres","processors","createCrosses","create2CCylinders","create2CLines","createExtrudedChains","create2CClosedCylinders","createChunkedLines","createQuickSurface","createContactSurface","createSASSES","createLabels","Mode","groupList","depGroups","groupCount","currGroup","newGroup","getRenderParams","LinesMode","shortName","LicoriceMode","BallsAndSticksMode","VanDerWaalsMode","TraceMode","TubeMode","_residue","TUBE_RADIUS","buildGeometry","CartoonMode","secCache","getSecondary","secOpts","ARROW_END","startRad","getResidueStartRadius","endRad","getResidueEndRadius","_res","tubeRad","secHeight","secData","SurfaceMode","surfaces","surfaceNames","isSurface","QuickSurfaceMode","useBeads","getVisibilitySelector","IsoSurfaceMode","_excludeProbe","_radScale","IsoSurfaceSASMode","IsoSurfaceSESMode","ContactSurfaceMode","TextMode","lerpColor","beta","g1","b1","g2","b2","Palette","asIs","elementColors","defaultElementColor","residueColors","defaultResidueColor","chainColors","secondaryColors","defaultSecondaryColor","gradientName","gradients","defaultNamedColor","namedColors","minRangeColor","midRangeColor","maxRangeColor","defaultGradientColor","namedColorsArray","rainbow","temp","hot","cold","reds","blues","H","F","P","S","CL","FE","NI","CU","BR","HE","LI","BE","B","NE","NA","MG","AL","SI","AR","K","SC","TI","V","CR","MN","ZN","GA","GE","AS","KR","RB","SR","Y","ZR","NB","TC","RU","RH","PD","AG","CD","IN","SN","SB","TE","XE","BA","LA","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","YB","LU","HF","TA","W","RE","OS","IR","PT","AU","HG","TL","PB","BI","PO","AT","RN","FR","RA","AC","TH","PA","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR","RF","DB","BH","HS","MT","palettes","cpkPalette","jmolPalette","vmdPalette","Colorer","ElementColorer","getElementColor","ResidueTypeColorer","SequenceColorer","getGradientColor","ChainColorer","getChainColor","SecondaryStructureColorer","getSecondaryColor","secondary","UniformColorer","ConditionalColorer","parsed","_subsetCached","ConformationColorer","TemperatureColorer","OccupancyColorer","HydrophobicityColorer","hydrophobicity","MoleculeColorer","getMoleculeCount","scaleColor","CarbonColorer","colorCarbon","colorNotCarbon","neutralColor","intensity","materialList","Representation","startMaterialValues","selectorString","materialPreset","needsRebuild","setMode","markAtoms","clearAtomBits","selectionGeo","sg","matrixAutoUpdate","repSettings","selStr","valueOf","modeDiff","identify","colorerDiff","newSelectorObject","newSelector","newMode","newColorer","newMaterial","setMaterialPreset","_traverseComponentGroups","ComplexEditor","ComplexComponentEditor","complexVisual","_complexVisual","_inProgress","_componentTransforms","_bakeComponentTransform","onAtomPositionChanged","_resetComponentTransform","finalizeEdit","pivot","visual","getSelectedComponent","getSelectionGeo","selectionMask","getSelectionBit","reprNode","bbmin","bbmax","updateMatrix","ComplexFragmentEditor","_getSelectionBorderAtoms","_fragmentBoundAtoms","pivotPos","_fragmentGeo","_fragmentSelectionGeo","vg","smeshes","sm","selectionBit","makeTranslation","_bakeAtomTransform","boundAtoms","transformDirection","atomHash","ComponentEditor","FragmentEditor","lookupAndCreate","entityList","specs","Entity","ComplexVisual","_reprList","_repr","_reprListChanged","_selectionBit","_reprUsedBits","_selectionCount","_selectionGeometry","_editor","repCurrent","repAdd","desc","status","change","bits","NUM_REPRESENTATION_BITS","newSelectionBit","_getFreeReprIdx","originalSelection","buildSelectorFromMask","def","unmarkAtoms","hide","show","markAtomsAdditionally","rebuildSelectionGeometry","pickedObj","otherObj","getMolecule","resetSelectionMask","tmpMask","deselectionMask","multiple","selRule","reprList","repr","Promise","resolve","errorOccured","setTimeout","hasGeometry","buildSelectionGeometry","optimizeList","NaN","expression","all","or","and","residx","_buildSelectorFromSortedLists","editor","ComplexVisualEdit","needTraverse","forEachAtomWithinDistFromMasked","countAtomsByMask","volumeUniforms","volumeDim","tileTex","tileTexSize","tileStride","boxAngles","_isoLevel0","_flipV","_BFLeft","_BFRight","_FFLeft","_FFRight","_WFFLeft","_WFFRight","overrideUniforms","defUniforms","facesPosMaterialParams","sideType","vertexVolumeFaces","fragmentVolumeFaces","BackFacePosMaterial","backFaceParams","ShaderParams","BackFacePosMaterialFarPlane","matUniforms","aspectRatio","farZ","tanHalfFOV","matWorld2Volume","shaderParams","vertexFarPlane","fragmentFarPlane","FrontFacePosMaterial","frontFaceParams","VolumeMaterial","vertexVolume","fragmentVolume","updateDefines","ISO_MODE","STEPS_COUNT","VolumeMesh","cullFlag","_corners","edges","_edges","edgeIntersections","_edgeIntersections","constant","vert","cornerMark","edgeMark","curEdge","curEdgeInter","CheckX","CheckY","CheckZ","curEdgeIdx","curEdgeSource","nextVertex","coplanarPoint","faceIdx","_collectVertices","vRight","vDir","rightProj","_sortIndices","numIndices","vm","getTiledTextureStride","buildTiledTexture","getBox","image","getVolumeInfo","volInfo","obtuseAngle","mean","dmean","dmin","span","dmax","sd","nearClipPlaneOffset","_nearClipPlaneOffset","_pos","_norm","norm4D","_norm4D","matrixWorldToLocal","_matrixWorldToLocal","_clipPlane","_updateIsoLevel","getWorldDirection","getWorldPosition","setFromNormalAndCoplanarPoint","_updateVertices","_updateIndices","VolumeBounds","bSize","offsetVert","_getBaseVertices","_lines","projTable","_projectionTable","proj","inv","currDelta","angleValue","XY","XZ","YZ","VolumeFarPlane","volume","planeGeo","_initPlaneGeo","_plane","frustumCulled","doubleSided","matWorldToVolume","_renderer","planeCamPos","normalMatrix","volumeMatrix","DEG2RAD","VolumeVisual","setDataSource","_frame","getMesh","showFrame","_farPlane","getBoundingSphere","needShow","LoaderList","someLoaders","SomeLoader","canProbablyLoad","Loader","_source","_options","_abort","_agent","abort","FileLoader","_binary","blob","reader","FileReader","readAsArrayBuffer","readAsText","File","urlStartRegexp","XHRLoader","request","XMLHttpRequest","response","responseType","send","ImmediateLoader","ParserList","someParsers","format","formats","SomeParser","canProbablyParse","parseSync","model","_parseHeader","Remark290","_matrix","_matrixIndex","stream","readString","matrixRow","readCharCode","matrixData","matrixIndex","parseFloat","Remark350","assemblies","_assembly","assembly","addMatrix","addChain","PDBStream","_start","_nextCR","_nextLF","_next","_end","TAG_LENGTH","nameToElement","veryLong","pdbStartRegexp","remarkParsers","PDBParser","_serialAtomMap","_modelId","_compaundFound","_biomoleculeFound","_allowedChainsIDs","_lastMolId","_remarks","_remark","_compndCurrToken","fileType","_fixBondsArray","_fixChains","remark290","isUndefined","remark350","chainDict","chainObj","idChainMap","nj","readInt","readChar","chainID","resSeq","readFloat","Role","serial0","serial1","serial2","serial3","serial4","tokenIdx","chainStr","lastChar","remarkNum","remark","RemarkParser","fields","_parseSTRUCTURE","addHelix","addSheet","pars","adder","startId","endId","codeOfS","serialNumber","structureName","helLength","shWidth","shCur","shPrev","startChainID","endChainID","startSequenceNumber","iCodeStr","startICode","endSequenceNumber","endICode","cs","classification","date","title","func","tagParsers","HEADER","_parseHEADER","_parseTITLE","_parseATOM","HETATM","ENDMDL","_parseENDMDL","CONECT","_parseCONECT","COMPND","_parseCOMPND","REMARK","_parseREMARK","_parseHELIX","_parseSHEET","cOrderCharCodes","cmlStartRegexp","CMLParser","_readOnlyOneMolecule","atomId","countBonds","idxs","atomRefs2","moleculeArr","fieldData","atomRefs","placement","fieldName","_extractSGroup","_createSGroup","firstAtomRef","sgroupRef","mapEntry","cycleFuncInner","cycleFunc","x2","x3","y2","y3","z3","atomsRef","dom","parseNode","xmlNode","nodeName","nodeValue","jsonNode","existing","childNodes","molSet","atomArray","_findSuitableMolecule","DOMParser","doc","parseFromString","traversedData","_traverseData","rawData","prepareComponentCompound","ret","atomLabels","labelsCount","_extractSGroups","localBond","bondArray","_rebuidBondIndexes","addCurrBond","orderAttr","tc","labels","_breadWidthSearch","retStruct","originalCML","cml","retData","filteredData","rd","compId","molId","molID","_packLabel","breadthQueue","componentID","labeledAtoms","startID","_unpackLabel","eAtom","mainAtom","varData","currentLabel","addFunc","complexAtom","reorder","atomCharge","lLabel","atomFullNameStruct","elementType","countRef","currAtomComp","strLabel","JSON","stringify","atomSerial","added","mrvValence","_parseBond","getSGroupCount","sGrp","getSGroups","moleculaSet","_selectComponents","_parseSet","totalAtomsParsed","joinedComplex","joinComplexes","ArrayComparator","original","_original","_sum","candidate","sum","sorted","secStructToType","getFirstByte","buf","MMTFParser","_modelData","chainData","modelIndex","chainIndex","groupData","groupName","groupId","groupIndex","_updateSecStructure","atomData","xCoord","yCoord","zCoord","bFactor","formalCharge","bondData","atomIndex1","atomIndex2","helixClasses","secStruct","_ssType","_ssStruct","_ssStart","struct","mmtfData","chainsInModel0","chainsPerModel","chainIndexList","description","structureId","releaseDate","eventCallbacks","onModel","modelData","_onModel","onChain","_onChain","onGroup","_onGroup","onAtom","_onAtom","onBond","_onBond","MMTF","_updateMolecules","named","bioAssemblyList","baInfo","transformList","chainListCheck","chainNames","allChains","_chainsByName","compare","transpose","transform","primaryChainsArray","primaryChainsHash","primary","decode","_traverse","_linkAtomsToResidues","_markHeteroAtoms","_findSynonymousChains","_parseAssemblyInfo","_joinSynonymousChains","isArrayBuffer","ParsingError","column","captureStackTrace","parseLine","parseColumn","_isWhitespace","_inlineIndexOf","ch0","readCIF","newline","block","keysCount","valuesCount","_parseValue","_storeKey","_storeValue","keyIndex","cRequiredAtomFields","cSecondaryCoding","helx","turn","strn","getTypeFromId","typeId","arrize","arrayLikeObject","AtomDataError","_getOperations","operList","vector","ops","_extractOperations","assemblyGen","opsDict","groupStr","gps","grIdx","grCount","gr","gp","es","cnt","ii","nn","newMtx","CIFParser","asymDict","_toComplex","cifData","complexData","_extractAtoms","_extractSecondary","_extractAssemblies","_extractMolecules","_extractMetadata","struct_keywords","pdbx_keywords","databaserev","database_PDB_rev","date_original","molData","pdbx_description","getMolecules","atom_site","auth_seq_id","Cartn_x","Cartn_y","Cartn_z","label_atom_id","group_PDB","chainIdc","auth_asym_id","chainLabelIdc","label_asym_id","serials","iCodes","pdbx_PDB_ins_code","resNames","label_comp_id","type_symbol","tempFactors","B_iso_or_equiv","occupancies","charges","pdbx_formal_charge","altLocs","label_alt_id","models","pdbx_PDB_model_num","label_entity_id","moleculeIdx","struct_conf","_extractConfs","struct_sheet_range","_extractSheets","sheetData","sheet_id","beg_label_seq_id","end_label_seq_id","beg_label_asym_id","sheetNames","strandNames","starts","beg_auth_seq_id","ends","end_auth_seq_id","stICodes","pdbx_beg_PDB_ins_code","endICodes","pdbx_end_PDB_ins_code","findResidue","helicesData","conf_type_id","comments","details","lengths","pdbx_PDB_helix_length","pdbx_PDB_helix_class","asmGen","pdbx_struct_assembly_gen","asmIdx","assembly_id","asmOper","oper_expression","asmList","asym_id_list","pdbx_struct_oper_list","asm","assemblyOps","valueType","singular","VolumeModel","_header","_boxSize","_boxStart","extent","nstart","crs2xyz","cellDims","angles","isTypedArray","_buff","TypeError","headerFormat","arrays","_parseArray","_parseVector","_buffer","header","gamma","z1","z2","xaxis","yaxis","zaxis","_xyz2crs","shiftX","shiftY","_setOrigins","_getXYZdim","_getXYZbox","_toXYZData","_getVolumeInfo","CCP4Header","ispg","nsymbt","lksflg","customData","machine","nlabel","Ccp4Model","_typedCheck","u32","i32","f32","_fillHeader","xyz2crs","_getAxis","_setAxisIndices","_setBoxParams","xyzData","crsIdx","CCP4Parser","XYZParser","_atomsInf","_fileName","endnAtoms","endComment","startAtomsInf","words","_parseToAtomsInf","_parseAtomsInf","PubChemParser","jsonData","PC_Compounds","aids","aid","fromPairs","zip","coords","conformers","aids1","aid1","aids2","aid2","orders","SDFStream","_strings","_currentStart","_currentStringIndx","numb","curStr","getNextString","getCurrentString","setStart","probablyHaveDataToParse","chargeMap","orderMap","typeMap","sdfAndMolRegexp","sdfRegExp","fileFormat","SDF","MOL","possibleNameTags","possibleIDTags","possibleTitleTags","tagsNames","tags","buildChainID","codes","trunc","reverse","SDFParser","_format","_metadata","_currentMolProps","_compoundIndx","_assemblies","_atomsParsed","_atomsIndexes","getStringFromStart","bondsNum","bondType","countsLine","_parseAtoms","_parseBonds","_parseMOL","findNextDataItem","_parseDataItem","props","_tryToUpdateMoleculeData","tagsList","_searchTag","tagPossibleNames","_tryToFind","properties","_finalizeMetadata","_buildAssemblies","_buildMolecules","defineFormat","_parseCompound","findNextCompoundStart","DSN6Header","div","DSN6Model","i16","Int16Array","byteBuffer","counter","zBlock","yBlock","xBlock","inRange","_pointCalculate","blocks","_blockCalculate","_calculateInfoParams","dispersion","minDensity","maxDensity","DSN6Parser","ArrayBuffer","checkDataTypeOptions","GROReader","GROParser","_time","_residueNumber","_residueName","_atomName","_atomNumber","_atomPosition","_atomVelocity","filetype","readLine","getNext","positionX","positionY","positionZ","_parseTitle","_parseNumberOfAtoms","_parseAtom","un","am","nc","du","resNumberRegex","spacesRegex","splitToFields","MOL2Parser","_currPosIdx","_currStartIdx","MOL2Data","newPosIdx","_toStringFromStart","_toHeaderString","_setStart","_probablyHaveDataToParse","parsedStr","_setResidue","originAtomId","targetAtomId","currMolecule","molResidues","_fixSerialAtoms","_parseMolecule","_toStringFromHeader","_parseRawStrings","_findNextCompoundStart","ExporterList","someExporters","Exporter","exportSync","PDBResult","_resultArray","_currentStr","_tag","_fixedNumeration","_numeration","_tagStrNum","writeString","numeration","isBoolean","maxStrPos","_currentStrLength","newString","curStrLength","finish","repeat","cStr","bondsArrays","_getSubArrays","subArraySize","subArrays","matrixIndx","toFixed","Matrix4","writeMatrix","PDBExporter","_tags","_result","_tagExtractors","_extractHEADER","TITLE","_extractTITLE","_extractATOM","_extractCONECT","_extractCOMPND","_extractREMARK","_extractHELIX","SHEET","_extractSHEET","_stringForRemark350","_stringForRemark290","getResult","newTag","fixedBonds","writeBondsArray","strands","invert","startIndx","_getMoleculeChains","chainsString","writeEntireString","_Remark290","_Remark350","writeMatrices","biomolIndx","getChainName","SourceClass","FBX_POS_SIZE","FBX_NORM_SIZE","FBX_COL_SIZE","copyFbxPoint3","srcIdx","dstIdx","copyFbxPoint4","vector4","copyTransformedPoint3","setSubArray","copyFunctor","functorOpts","arridx","FBXModel","lastPos","lastNorm","lastCol","vertsCount","indsCount","shifted","setIndices","currentCount","getVerticesNumber","setShiftedIndices","setTransformedPositions","setTransformedNormals","FBXGeometry","_info","FBX1CGeometry","cl","FBX2CCylinder","_cutRawStart","_cutRawEnd","_facesPerSlice","addPerCylinder","_extendVertices","_extendIndices","getGeoParams","cutRaw","indicesPerQuad","startToShift","colorSize","part1End","part2End","_setColorRange","capSize","cap1End","cap2End","FBXInfoExtractor","_materials","_models","_extractModelsAndMaterials","_flattenModels","layersOfInterest","checkExportAbility","_collectInstancedGeoInfo","_collectGeoInfo","faceSize","overallVertsCount","combined","_reworkIndices","verticesCount","vertCount","setPositions","setNormals","_collectMaterialInfo","_addToPool","instCount","maxInstancedCount","instMatrix","objMatrix","sphereColor","instanceIndex","_getSphereInstanceMatrix","addInstance","oneCCylinder","splittingInfo","_gatherCylindersColoringInfo","twoCCylinder","needToSplit","additionalVertsCount","colorStart","colorEnd","is2Colored","_getCylinderInstanceMatrix","materialIdx","_checkExistingMaterial","findIndex","differs","_collectSpheresInfo","_collectCylindersInfo","instIdx","matVector1","matVector2","matVector3","idxOffset","defaultDefinitions","defaultProperties","defaultMaterialLayer","defaultLayerBlock","globalSettings","FBXResult","_writeHeader","_writeDefinitions","_writeObjects","_writeRelations","_writeConnections","FBXHeaderVersion","FBXVersion","timeStampVersion","creator","version","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","modelVersion","allModels","_verticesIndices","_normalLayer","_colorLayer","materialVersion","allMaterials","_materialProperties","modelsList","colorArray","layerElementColorNumber","layerElementColorVersion","layerElementColorName","colorsStr","_floatArrayToString","colorIndices","normalArray","layerElementNormalNumber","layerElementNormalVersion","layerElementNormalName","normalsStr","multiLayer","multiTake","shading","culling","geometryVersion","vertStr","FBXExporter","_version","miewVersion","_extractor","loaders","parsers","exporters","tempColor","CSS2DRenderer","_height","_widthHalf","_heightHalf","_vector","_viewMatrix","_projectionMatrix","_domElement","overflow","zIndex","pointerEvents","myNode","firstChild","lerpColorAsHex","setHex","getHexString","colorAsHex","setFromMatrixPosition","localOffset","getMaxScaleOnAxis","fogFactor","smoothstep","WebkitTransform","MozTransform","oTransform","_renderObject","VK_LEFT","VK_UP","VK_RIGHT","VK_DOWN","STATE","NONE","ROTATE","TRANSLATE","SCALE","TRANSLATE_PIVOT","FULL_STOP_THRESHOLD","matrix4","ObjectHandler","lastRotation","_rotate","q","quat","zeroPivot","makeRotationFromQuaternion","setObjects","rotate","rot","mousePrevPos","mouseCurPos","aboutAxis","mouse2rotation","setFromAxisAngle","translate","translateOnAxis","timeSinceLastUpdate","timeSinceMove","intertia","dynamicDampingFactor","intertiaThreshold","stop","eyeDirection","cameraUpDirection","cameraSidewaysDirection","moveDirection","mouseDelta","mousePrev","mouseCur","axisRotateFactor","setLength","rotateFactor","ObjectControls","objectPivot","getAltObj","hotkeysEnabled","screen","_state","_mousePrevPos","_mouseCurPos","_mainObj","_altObj","_affectedObj","_isAltObjFreeRotationAllowed","_isTranslationAllowed","_isKeysTranslatingObj","_pressedKeys","_clock","_lastUpdateTime","_listeners","mousedown","mouseup","mousemove","mousewheel","touchstartend","touchmove","getKeyBindObject","keydownup","handleResize","resetKeys","contextmenu","stopPropagation","preventDefault","innerWidth","innerHeight","getBoundingClientRect","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","enableHotkeys","allowTranslation","allow","allowAltObjFreeRotation","keysTranslateObj","isEditingAltObj","convertMouseToOnCircle","pageX","pageY","screenSize","convertMouseToViewport","rotateByMouse","aboutZAxis","getOrientation","setOrientation","getScale","setScale","curTime","_lastMouseMoveTime","speedX","speedY","altObj","button","workWithAltObj","altKey","ctrlKey","shiftKey","translatePivotByMouse","wheelDelta","detail","touches","_touchDistanceCur","_touchDistanceStart","_scaleStart","newScale","keyCode","translatePivotInWorld","setX","setY","setZ","translatePivot","setPivot","newPivot","Picker","_lastMousePos","_mouseTotalDist","_lastClickBeginTime","_lastClickPos","_clickBeginTime","touchstart","touchend","picked","pickObject","screenPos","rayCaster","unproject","fogFarValue","getMouseInViewport","curPos","timeSinceLastClickBegin","clickDist","_lastTouchdownPos","changedTouches","Axes","targetCamera","_target","_targetCamera","_object","_full","autoClear","setViewport","clear","cDataOffset","cFirstMask","cFirstShift","cSecMask1","cSecShift1","cSecMask2","cSecShift2","cThirdMask","cStrMask","cStrShift","c219","c220","cHelixIdx","cSheetIdx","secTypes","cSecNames","_createSecondary","strArray","nRes","resid","rIdx","fromUInt20ToInt20","uint20","FrameInfo","payload","callbacks","isLoading","_framesRange","frameIsReady","_frameRequest","_callbacks","_framesRequestLength","_downloadDataFn","parseBinaryData","setFrame","framesStart","framesEnd","_framesCount","onDone","onLoadStatusChanged","onFail","onError","_bufferRequestStart","_prepareBuffer","arrayBuffer","dataView","DataView","atomsCount","getUint32","framesCount","_atomsCount","maxSize","chunkedFramesCount","timeStep","iName","_timeStep","posData","coordIdx","secondaryArr","Int8Array","hiWord","loWord","_secondaryData","_currFrame","myResidues","sec","oldSec","nSec","compRes","getSec","frameIdx","_cachedResidues","_updateSecondary","_parseBuffer","vec","_vec","SceneObject","paramsStr","LinesObj","_id1","_id2","err","getAtomByFullname","_atom1","_getAtomFromName","_atom2","dynamic","_line","computeLineDistances","_raycaster","_intersects","verticesNeedUpdate","OutlineMaterial","srcDepthTex","srcTexSize","DEPTH_OUTLINE","FXAAMaterial","bgTransparent","BG_TRANSPARENT","AOMaterial","diffuseTexture","normalTexture","depthTexture","camNearFar","projMatrix","kernelRadius","depthThreshold","_kernelOffsets","AOHorBlurMaterial","aoMap","samplesOffsets","AOVertBlurWithBlendMaterial","fogNearFar","useFog","AnaglyphMaterial","srcL","srcR","View","orientation","_transitionTime","ViewInterpolator","startView","endView","_endTime","_isPaused","_srcView","_dstView","_isMoving","transTime","wasStarted","success","createView","slerp","setup","getCurrentView","MAX_COOKIE_LEN","COUNT_SUFFIX","_chunkString","chunkLen","lc","Cookies","removeCookie","cntKey","_toCount","cntVal","_getSimpleCookie","_removeSimpleCookie","setCookie","_setSimpleCookie","getCookie","cookie","_getExpirationDate","today","EXP_PERIOD_YEARS","setFullYear","toUTCString","_exists","webVRPoC","showEnterVR","cursor","currentSession","onSessionEnded","onSessionStarted","session","_gfx","xr","setReferenceSpaceType","setSession","onmouseenter","onmouseleave","onclick","sessionInit","optionalFeatures","requestSession","then","moveSceneBehindHeadset","showWebXRNotFound","stylizeElement","bottom","padding","border","borderRadius","font","isSessionSupported","supported","textDecoration","WebVRPoC","onToggle","_mainCamera","_button","_onToggle","_molContainer","_user","_scalingPivot","_controller1","_controller2","_pressedGripsCounter","_distance","startScalingByControllers","stopScalingByControllers","anotherController","gfx","createWebVRButton","_mainFog","_plugVRNodesIntoScene","_setControllersListeners","getController","_createControllerMesh","handleGripsDown","handleGripsUp","setAnimationLoop","getSession","_unplugVRNodesFromScene","cylinder","rotateX","scaler","container","EDIT_MODE","COMPLEX","COMPONENT","FRAGMENT","LOADER_NOT_FOUND","PARSER_NOT_FOUND","updateFogRange","removeExtension","hasValidResidues","hasValidRes","reportProgress","percent","TOTAL_PERCENT","chooseFogColor","Miew","settingsCookie","cookiePath","_interpolator","_container","getElementById","head","getElementsByClassName","_containerRoot","_running","_halting","_building","_needRender","_hotKeysEnabled","_cookies","restoreSettings","_spinner","_loading","_animInterval","_visuals","_curVisualName","_sourceWindow","registeredPlugins","_initOnSettingsChanged","getMaxRepresentationCount","_setContainerContents","_updateShadowCamera","shadowMatrix","OBB","halfSize","light","getOBB","frag","createDocumentFragment","_msgMode","_msgAtomInfo","_showMessage","_initGfx","_initListeners","Spinner","_onKeyDown","_onKeyUp","_objectControls","_getAltObj","_picker","_onPick","file","keepRepsInfo","job","cancel","halt","msg","_showCanvas","_requestAnimationFrame","requestAnimationFrame","arezSpritesSupported","getExtension","isAOSupported","clientWidth","clientHeight","webGLOptions","preserveDrawingBuffer","premultipliedAlpha","renderer2d","shadowMap","autoUpdate","getContext","setPixelRatio","devicePixelRatio","setSize","setClearColor","clearColor","stereoCam","selectionScene","selectionRoot","selectionPivot","light12","pixelRatio","getPixelRatio","shadowMapSize","mapSize","light3","deviceWidth","deviceHeight","offscreenBuf","minFilter","magFilter","depthBuffer","offscreenBuf2","offscreenBuf3","offscreenBuf4","volBFTex","volFFTex","volWFFTex","offscreenBuf5","offscreenBuf6","offscreenBuf7","stereoBufL","stereoBufR","_embedWebXR","stats","_fps","_onResize","_makeUniqueVisualName","baseName","random","suffix","_addVisual","_removeVisual","_forEachVisual","_releaseAllVisuals","_forEachComplexVisual","_getComplexVisual","any","_getVolumeVisual","_getVisualForComplex","getVisuals","getComplexVisualsCount","getCurrentVisual","setCurrentVisual","run","resume","_onTick","_discardComponentEdit","_discardFragmentEdit","pause","enableHotKeys","_resizeOffscreenBuffers","isAnaglyph","multi","_onUpdate","_onRender","_getBSphereRadius","_bSphereForOneVisual","_bBoxForOneVisual","_bBox","_invMatrix","_points","union","_updateFog","_setUberMaterialValues","isScriptingCommandAvailable","callNextCmd","_needRebuild","rebuild","_updateView","webVR","updateMoleculeScale","_clipPlaneUpdateValue","_fogFarUpdateValue","setRenderTarget","_renderFrame","_anaglyphMat","_size","focus","_renderShadowMap","_renderScene","setScissorTest","setScissor","cameraL","cameraR","_onBgColorChanged","_onFogColorChanged","_enableMRT","renderBuffer","textureBuffer","gl","drawBuffersWEBGL","COLOR_ATTACHMENT0","tx8","__webglTexture","bindTexture","TEXTURE_2D","fb","__webglFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT1_WEBGL","distortion","bHaveComplexes","volumeVisual","ssao","_renderWithPrepassTransparency","dstBuffer","srcBuffer","_performAO","_renderOutline","_renderSelection","_renderVolume","_performFXAA","_performDistortion","aberration","fragmentScreenQuadFromDistTex","targetBuffer","_outlineMaterial","srcDepthBuffer","srcColorBuffer","currentRenderTarget","getRenderTarget","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","setBlending","buffers","setClear","setTest","updateMatrices","_hasSelectionToRender","selPivot","selPivotChild","_checkVolumeRenderingSupport","renderTarget","oldRT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","volumeBFMat","volumeFFMat","cubeOffsetMat","world2colorMat","volumeRenderingSupported","dstBuf","tmpBuf1","tmpBuf2","tmpBuf3","overrideMaterial","colorMask","_fxaaMaterial","_aoMaterial","_horBlurMaterial","_vertBlurMaterial","_scale","normalBuffer","srcDepthTexture","tempBuffer","tempBuffer1","_lastPick","_setEditMode","_resetObjects","setNeedRender","_resetScene","resetReps","resetPivot","rebuildAll","resetView","updateSelectionMask","_export","TheExporter","io","exporter","rePdbId","rePubchem","reUrlScheme","resolveSourceShortcut","matchesPdbId","sourceType","matchesPubchem","compound","updateBinaryMode","TheParser","fileExt","animation","_fetchData","shouldCancel","notify","TheLoader","extractName","newOptions","keyCount","loader","lengthComputable","total","loaded","promise","_parseData","dataSet","spin","onLoadEnd","anything","jobIndex","_refreshTitle","_onLoad","unload","_startAnimation","fileData","_stopAnimation","_frameInfo","isPlaying","_isAnimating","_continueAnimation","_pauseAnimation","clearInterval","minFrameTime","setInterval","_updateObjsToFrame","nextFrame","disableEvents","visualName","amberFileName","resetEd","_onLoadEd","_tweakResolution","_edLoader","loadEd","_rebuildObjects","toRemove","getGeometry","changeUnit","unitIdx","currentUnitInfo","getCurrentUnit","_updateInfoPanel","rebuildActions","setNeedsRebuild","appendix","repGet","_extractRepresentation","getSelectionCount","defPreset","repCount","_setReps","applyPreset","presList","newIdx","repRemove","repHide","_editMode","getElementsByTagName","_enterComponentEditMode","editors","beginComponentEdit","_editors","_applyComponentEdit","discard","_enterFragmentEditMode","selectedVisuals","beginFragmentEdit","isFreeRotationAllowed","_applyFragmentEdit","_updateSelection","expandSelection","shrinkSelection","firstLine","secondLine","aName","coordLine","nextAltObj","setPivotResidue","amount","setPivotAtom","getSelectionCenter","_centerInVisual","setPivotSubset","_includesInCurSelection","_includesInSelector","screenshot","fov2Tan","tan2Fov","getDataURL","dataURL","currBrowser","canvas","canvasContext","drawImage","toDataURL","screenshotURI","originalTanFov2","areaOfInterestSize","areaOfInterestTanFov2","shotAspect","setDrawingBufferSize","screenshotSave","uri","save","dataString","maxPerf","_gfxScore","_autoChangeResolution","saveSettings","resetSettings","setOptions","resetCurrentUnit","getBondCount","getResidueCount","getChainCount","objData","bThrow","Ctor","LinesObject","_addSceneObject","sceneObject","objs","removeObject","getURL","getState","compact","getScript","_compareReps","compareWithDefaults","currPreset","repsDiff","emptyReps","repsInfo","objectsState","_updateShadowmapMeshes","_updateMaterials","setMaterialValues","_fogAlphaChanged","disable","evt","Boolean","sel","VIEW_VERSION","eulerOrder","euler","setFromQuaternion","interpolator","srcView","dstView","setFromEuler","isMoving","within","None","projected","fullAtomName","complexName","project","dssp","exportCML","extractRotation","extractBasis","retMat","makeBasis","updateCMLData","xml","removeAttribute","sGroup","getPosition","getCentralPoint","oSerializer","XMLSerializer","serializeToString","motm","curChainName","curChainColor","thirdParty","lodash","three","modeIdDesc","$help","colorDesc","materialDesc","addRepDesc","setGetParameterDesc","help","PDBID","REP_NAME","DESCRIPTION","REP_INDEX","EXPRESSION","MODE_ID","COLORER_ID","MATERIAL_ID","del","PARAMETER","set_save","set_restore","set_reset","PRESET","ENCODED_VIEW","removeobj","listobj","NULL","RepresentationMap","representationMap","representationID","strId","sortedKeys","representationsStorage","keyRemap","CLIUtils","miew","repMap","listRep","repName","selectionStr","strList","helpData","joinHelpStr","clihelp","sortBy","helpItem","awaitWhileCMDisInProcess","finishAwaitingCMDInProcess","modificate","selExc","modificators","modificator","argExc","pathExc","endsWith","getNamedColor","utilFunctions","CreateObjectPair","ArgList","toJSO","cliUtils","cmd","propagateProp","Arg","_val","cliutils","echo","representations","notimplemented","script","_printCallback","_errorCallback","parsercli","cmdQueue","commandInAction"],"mappings":"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AC,GAAG,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CA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AC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAC,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CA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AAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,KAAK,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,C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AAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;AAC11C,IAAI,MAAM,GAAG,CAAC,KAAK,EAAE,SAAS,KAAK,IAAI,GAAG;AAC1C,EAAE,EAAE,EAAE;AACN,QAAQ,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,mBAAmB,CAAC,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,yBAAyB,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,2BAA2B,CAAC,EAAE,CAAC,+BAA+B,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,sBAAsB,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,mBAAmB,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;AACv9C,UAAU,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,gBAAgB,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,CAAC,mBAAmB,CAAC,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACx9B,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EA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CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACnqV,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAA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AAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC;AAElB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EAAE,CAAC,OAAO,EAAE;AAEjB,KAAK,EA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"}