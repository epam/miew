{"version":3,"file":"dist/Miew.module.js","mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,MAAM,GAAI,YAAU;EACxB,IAAIC,CAAC,GAAC,SAAAA,CAASC,CAAC,EAACC,CAAC,EAACF,CAAC,EAACG,CAAC,EAAC;MAAC,KAAIH,CAAC,GAACA,CAAC,IAAE,CAAC,CAAC,EAACG,CAAC,GAACF,CAAC,CAACG,MAAM,EAACD,CAAC,EAAE,EAACH,CAAC,CAACC,CAAC,CAACE,CAAC,CAAC,CAAC,GAACD,CAAC,CAAC;MAAC,OAAOF,CAAC;IAAA,CAAC;IAACK,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,EAAE,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,GAAG,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,IAAI,GAAC,CAAC,CAAC,EAAC,GAAG,CAAC;IAACC,IAAI,GAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,GAAG,CAAC;IAACC,IAAI,GAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,GAAG,CAAC;IAACC,IAAI,GAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,EAAE,EAAC,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C,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,EAA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,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC;MAAC,CAAC,EAACtK,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAACrD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAACrD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACD,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACD,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAACD,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACA;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC7D,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACS,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACJ,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC;MAAC,GAAG,EAACI;IAAI,CAAC,EAACrE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC,EAACvE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACsE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACtE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC,EAACvE,CAAC,CAACuE,IAAI,EAAC,CAAC,CAA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G;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,CAAC,EAACjD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACI,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC;MAAC,CAAC,EAACjD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE;IAAC,CAAC,EAAC;MAAC,CAAC,EAACrD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,GAAG;IAAC,CAAC,EAAC1D,CAAC,CAAC0E,IAAI,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC,EAAC1E,CAAC,CAAC0E,IAAI,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,CAAC,EAACrE,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACI,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,CAAC,EAACjD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAA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GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC;IAAG,CAAC,EAAC;MAAC,CAAC,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,CAAC,EAACjD,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,CAAC,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,GAAG;MAAC,EAAE,EAAC,EAAE;MAAC,EAAE,EAACI,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAACC,GAAG;MAAC,EAAE,EAAC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AAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC;MAAC,EAAE,EAAC,CAAC,CAAC,EAAC,CAAC,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,GAAG,CAAC;MAAC,GAAG,EAAC,CAAC,CAAC,EAAC,EAAE,CAAC;MAAC,GAAG,E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,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;YAAC,OAAO,EAAE;YACjB;UACA,KAAK,EAAE;Y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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAMpR,iBAAQ,GAAG;EACf;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEqR,KAAK,EAAE;IACL;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACFC,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE,IAAI;MACVC,KAAK,EAAE,GAAG;MACVC,SAAS,EAAE,IAAI;MACfC,OAAO,EAAE,GAAG;MACZC,QAAQ,EAAE,IAAI;MACdC,cAAc,EAAE;QACdC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACT;IACF,CAAC;IAED;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACFN,cAAc,EAAE;QACdC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACT;IACF,CAAC;IAED;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIE,EAAE,EAAE;MACFV,SAAS,EAAE,IAAI;MACfE,QAAQ,EAAE,IAAI;MACdS,QAAQ,EAAE,GAAG;MACbC,SAAS,EAAE,EAAE;MACbf,IAAI,EAAE,IAAI;MACVgB,SAAS,EAAE;IACb,CAAC;IAED;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACFhB,IAAI,EAAE,IAAI;MACVC,KAAK,EAAE,GAAG;MACVC,SAAS,EAAE,IAAI;MACfC,OAAO,EAAE,GAAG;MACZC,QAAQ,E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ACV4T,KAAK,EAAE;QACT;MACF,CAAC;MACDN,mBAAmB,EAAE,GAAG;MACxBC,OAAO,EAAE,CAAC,GAAG;MACb3B,cAAc,EAAE;QACdC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,EAAE;QACVC,IAAI,EAAE,EAAE;QACRC,KAAK,EAAE;MACT;IACF,CAAC;IAED;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI6B,EAAE,EAAE;MACFC,QAAQ,EAAE,4CAA4C;MACtDC,eAAe,EAAE,QAAQ;MACzBC,aAAa,EAAE,QAAQ;MACvBC,EAAE,EAAE,CAAC;MACLC,EAAE,EAAE,CAAC;MACLC,EAAE,EAAE,CAAC;MACLC,EAAE,EAAE,MAAM;MACVC,EAAE,EAAE,UAAU;MACdC,MAAM,EAAE;IACV,CAAC;IAED;IACA;IACA;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACFC,MAAM,EAAE,GAAG;MACXC,SAAS,EAAE,GAAG;MACdC,SAAS,EAAE,GAAG;MACdC,KAAK,EAAE,IAAI;MACXC,OAAO,EAAE,KAAK;MACdjD,cAAc,EAAE;QACdC,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE,CAAC;QACNC,MAAM,EAAE,CAAC;QACTC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE;MACT;IACF;EACF,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE6C,QAAQ,EAAE;IACR;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACFC,MAAM,EAAE,CAAC;IACX,CAAC;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;IACIC,EAAE,EAAE;MACF9U,KAAK,EAAE;IACT,CAAC;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI+U,EAAE,EAAE;MACFvC,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f;AACF;AACA;AACA;AACA;EACEC,IAAI,EAAE,IAAI;EACV;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE;IACP1S,EAAE,EAAE,KAAK;IACTtF,KAAK,EAAE,QAAQ;IACfiY,SAAS,EAAE,GAAG;IACdC,SAAS,EAAE;EACb,CAAC;EAED;AACF;AACA;AACA;AACA;EACEC,EAAE,EAAE,KAAK;EAET;AACF;AACA;AACA;AACA;AACA;AACA;EACE1X,MAAM,EAAE;IACN6E,EAAE,EAAE,KAAK;IACT7f,IAAI,EAAE,QAAQ;IACdqa,MAAM,EAAE;EACV,CAAC;EAED;AACF;AACA;AACA;AACA;EACEsY,YAAY,EAAE,GAAG;EAEjB;AACF;AACA;AACA;AACA;EACEC,MAAM,EAAE,EAAE;EAEV;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE,CAAC;EAEV;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,qBAAqB,EAAE,IAAI;EAE3B;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE,IAAI;EAEb;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE,IAAI;EAEb;AACF;AACA;AACA;AACA;EACEC,IAAI,EAAE,MAAM;EAEZ;AACF;AACA;AACA;AACA;EACEC,OAAO,EAAE,KAAK;EAEd;AACF;AACA;AACA;AACA;EACEC,QAAQ,EAAE,KAAK;EAEf;AACF;AACA;AACA;AACA;EACEC,UAAU,EAAE,IAAI;EAEhB;AACF;AACA;AACA;AACA;EACEC,MAAM,EAAE,MAAM;EAEd;AACF;AACA;AACA;AACA;EACEC,gBAAgB,EAAE,IAAI;EAEtB;AACF;AACA;AACA;AACA;EACEC,YAAY,EAAE,SAAS;EAEvB;AACF;AACA;AACA;AACA;EACEC,gBAAgB,EAAE,CAAC;EAEnBtS,KAAK,EAAE;IACLuS,OAAO,EAAE,GAAG;IACZvuB,IAAI,EAAE,QAAQ;IACdwuB,IAAI,EAAE,IAAI;IACVC,gBAAgB,EAAE,GAAG;IACrBC,UAAU,EAAE,GAAG;IACfC,YAAY,EAAE;EAChB,CAAC;EACDC,GAAG,EAAE;IACHC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AAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EACnD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACnD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC/C,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAC/C,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACtD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAClD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACnD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACjD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACrD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAClD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1D,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACzD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACpD,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC5D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACxD,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAC3D,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAC/D;AACD;;AAEA,qEAAeP,mBAAmB;;ACxSH;AACyB;AACxB;AAEhC,MAAMQ,SAAS,GAAG,CAChB,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACpD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACtD,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EACrD,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,K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E,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9G,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9G,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9G,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9G,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAC9G,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;IAC7G;;IAEA,IAAID,MAAM,GAAG,CAAC,IAAIA,MAAM,GAAGC,KAAK,CAAC73F,MAAM,GAAG,CAAC,IACrC4J,MAAM,CAACiQ,IAAI,CAACoqB,4BAAO,CAACc,cAAc,CAAC,CAAC/kC,MAAM,GAAG,CAAC,KAAM63F,KAAK,CAAC73F,MAAM,EAAE;MACtE,MAAM,IAAI8K,KAAK,CAAC,iEAAiE,CAAC;IACpF;IACA,OAAO+sF,KAAK,CAACD,MAAM,GAAG,CAAC,CAAC;EAC1B;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEE,oBAAoBA,CAACj1E,OAAO,EAAE+sE,IAAI,EAAEb,OAAO,EAAEC,OAAO,EAAElmD,KAAK,EAAEivD,QAAQ,EAAE;IACrE,MAAMlI,KAAK,GAAGD,IAAI,GAAGA,IAAI;IACzB,MAAME,KAAK,GAAGD,KAAK,GAAGD,IAAI;IAC1B,MAAMmH,OAAO,GAAG,IAAIxuD,iGAAa,CAAC,CAAC;IACnC,MAAMyvD,IAAI,GAAG,IAAIzvD,iGAAa,CAAC,CAAC;IAChC;IACA,MAAM0vD,IAAI,GAAG,CAAC,MAAM;IACpB;;IAEA,KAAK,IAAIlwF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+nF,KAAK,EAAE/nF,CAAC,EAAE,EAAE;MAC9B8a,OAAO,CAAC9a,CAAC,CAAC,GAAGkwF,IAAI,CAAC,CAAC;IACrB;IAEA,MAAMlI,MAAM,GAAG,CAACH,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAAC/4E,CAAC,GAAG84E,OAAO,CAAC94E,CAAC,CAAC;IACnD,MAAMg6E,MAAM,GAAG,CAACL,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAACt0E,CAAC,GAAGq0E,OAAO,CAACr0E,CAAC,CAAC;IACnD,MAAMy1E,MAAM,GAAG,CAACP,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAACjzE,CAAC,GAAGgzE,OAAO,CAAChzE,CAAC,CAAC;IAEnD,KAAK,IAAI3E,CAAC,GAAG,CAAC,EAAEioC,QAAQ,GAAGvW,KAAK,CAAC9oC,MAAM,EAAEoX,CAAC,GAAGioC,QAAQ,EAAEjoC,CAAC,EAAE,EAAE;MAC1D,MAAM6c,IAAI,GAAG6U,KAAK,CAAC1xB,CAAC,CAAC;MACrB,MAAMwL,MAAM,GAAGqR,IAAI,CAACrR,MAAM,GAAGm1E,QAAQ;MAErC,MAAMG,EAAE,GAAG,CAAEjkE,IAAI,CAACu6D,KAAK,CAACv4E,CAAC,GAAG2M,MAAM,GAAImsE,OAAO,CAAC94E,CAAC,IAAI85E,MAAM;MACzD,MAAMoI,EAAE,GAAG,CAAElkE,IAAI,CAACu6D,KAAK,CAAC9zE,CAAC,GAAGkI,MAAM,GAAImsE,OAAO,CAACr0E,CAAC,IAAIu1E,MAAM;MACzD,MAAMmI,EAAE,GAAG,CAAEnkE,IAAI,CAACu6D,KAAK,CAACzyE,CAAC,GAAG6G,MAAM,GAAImsE,OAAO,CAAChzE,CAAC,IAAIo0E,MAAM;MAEzD,MAAMkI,OAAO,GAAGnwF,IAAI,CAACyN,KAAK,CAACuiF,EAAE,CAAC;MAC9B,MAAMI,OAAO,GAAGpwF,IAAI,CAACyN,KAAK,CAACwiF,EAAE,CAAC;MAC9B,MAAMI,OAAO,GAAGrwF,IAAI,CAACyN,KAAK,CAACyiF,EAAE,CAAC;MAE9B,IAAII,OAAO,GAAGtwF,IAAI,CAACyN,KAAK,CAAC,CAAEse,IAAI,CAACu6D,KAAK,CAACv4E,CAAC,GAAG2M,MAAM,GAAImsE,OAAO,CAAC94E,CAAC,IAAI85E,MAAM,CAAC;MACxE,IAAI0I,OAAO,GAAGvwF,IAAI,CAACyN,KAAK,CAAC,CAAEse,IAAI,CAACu6D,KAAK,CAAC9zE,CAAC,GAAGkI,MAAM,GAAImsE,OAAO,CAACr0E,CAAC,IAAIu1E,MAAM,CAAC;MACxE,IAAIyI,OAAO,GAAGxwF,IAAI,CAACyN,KAAK,CAAC,CAAEse,IAAI,CAACu6D,KAAK,CAACzyE,CAAC,GAAG6G,MAAM,GAAImsE,OAAO,CAAChzE,CAAC,IAAIo0E,MAAM,CAAC;MAExEqI,OAAO,EAAE;MACTC,OAAO,EAAE;MACTC,OAAO,EAAE;MACTF,OAAO,GAAIA,OAAO,IAAK5I,IAAI,GAAG,CAAE,GAAI4I,OAAO,GAAI5I,IAAI,GAAG,CAAE;MACxD6I,OAAO,GAAIA,OAAO,IAAK7I,IAAI,GAAG,CAAE,GAAI6I,OAAO,GAAI7I,IAAI,GAAG,CAAE;MACxD8I,OAAO,GAAIA,OAAO,IAAK9I,IAAI,GAAG,CAAE,GAAI8I,OAAO,GAAI9I,IAAI,GAAG,CAAE;MAExD,KAAK,IAAIl1E,CAAC,GAAG49E,OAAO,EAAE59E,CAAC,IAAI+9E,OAAO,EAAE/9E,CAAC,EAAE,EAAE;QACvC,MAAMu8E,IAAI,GAAGv8E,CAAC,GAAGm1E,KAAK;QACtB,KAAK,IAAI9zE,CAAC,GAAGw8E,OAAO,EAAEx8E,CAAC,IAAI28E,OAAO,EAAE38E,CAAC,EAAE,EAAE;UACvC,MAAMm7E,IAAI,GAAGn7E,CAAC,GAAG6zE,IAAI;UACrB,KAAK,IAAI35E,CAAC,GAAGoiF,OAAO,EAAEpiF,CAAC,IAAIuiF,OAAO,EAAEviF,CAAC,EAAE,EAAE;YACvC,MAAM0rE,GAAG,GAAGsV,IAAI,GAAGC,IAAI,GAAGjhF,CAAC;YAC3B,IAAI,CAAC8+E,cAAc,CAAChG,OAAO,EAAEC,OAAO,EAAE/4E,CAAC,EAAEyE,CAAC,EAAEqB,CAAC,EAAE6zE,IAAI,EAAEmH,OAAO,CAAC;YAC7DiB,IAAI,CAAC/hF,CAAC,GAAG8gF,OAAO,CAAC9gF,CAAC,GAAGge,IAAI,CAACu6D,KAAK,CAACv4E,CAAC;YACjC+hF,IAAI,CAACt9E,CAAC,GAAGq8E,OAAO,CAACr8E,CAAC,GAAGuZ,IAAI,CAACu6D,KAAK,CAAC9zE,CAAC;YACjCs9E,IAAI,CAACj8E,CAAC,GAAGg7E,OAAO,CAACh7E,CAAC,GAAGkY,IAAI,CAACu6D,KAAK,CAACzyE,CAAC;YACjC,MAAM48E,YAAY,GAAGzwF,IAAI,CAAC+xC,IAAI,CAAC+9C,IAAI,CAAC/hF,CAAC,GAAG+hF,IAAI,CAAC/hF,CAAC,GAAG+hF,IAAI,CAACt9E,CAAC,GAAGs9E,IAAI,CAACt9E,CAAC,GAAGs9E,IAAI,CAACj8E,CAAC,GAAGi8E,IAAI,CAACj8E,CAAC,CAAC;YACnF;YACA;YACA,MAAMpS,GAAG,GAAGgvF,YAAY,GAAG/1E,MAAM;YACjC,IAAIjZ,GAAG,GAAGkZ,OAAO,CAAC8+D,GAAG,CAAC,EAAE;cACtB9+D,OAAO,CAAC8+D,GAAG,CAAC,GAAGh4E,GAAG;YACpB;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEivF,gBAAgBA,CAACpF,cAAc,EAAEC,eAAe,EAAE;IAChD,IAAI,CAACc,SAAS,GAAGzuF,KAAK,CAACuoB,aAAa,CAACnU,UAAU,EAAE25E,SAAS,GAAG,CAAC,CAAC;IAC/D,IAAI,IAAI,CAACU,SAAS,KAAK,IAAI,EAAE;MAC3B,OAAO,CAAC,GAAG,CAAC;IACd;IACA,KAAK,IAAIxsF,CAAC,GAAG,CAAC,EAAE4T,CAAC,GAAG,CAAC,EAAE5T,CAAC,GAAG8rF,SAAS,EAAE9rF,CAAC,EAAE,EAAE;MACzC,IAAI,CAACwsF,SAAS,CAAC54E,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;MACzB,IAAI,CAAC44E,SAAS,CAAC54E,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAC/B;IAEA,IAAI,CAAC63E,cAAc,GAAGA,cAAc;IACpC,IAAI,CAACC,eAAe,GAAGA,eAAe;IAEtC,IAAI,CAACoF,sBAAsB,GAAGrF,cAAc;IAC5C,IAAI,CAACgB,WAAW,GAAG1uF,KAAK,CAACuoB,aAAa,CAACnU,UAAU,EAAE,CAAC,GAAG,IAAI,CAAC2+E,sBAAsB,CAAC;IACnF,IAAI,IAAI,CAACrE,WAAW,KAAK,IAAI,EAAE;MAC7B,OAAO,CAAC,GAAG,CAAC;IACd;IACA,KAAK,IAAIzsF,CAAC,GAAG,CAAC,EAAE4T,CAAC,GAAG,CAAC,EAAE5T,CAAC,GAAG,IAAI,CAAC8wF,sBAAsB,EAAE9wF,CAAC,EAAE,EAAE;MAC3D,IAAI,CAACysF,WAAW,CAAC74E,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;MAC/B,IAAI,CAAC64E,WAAW,CAAC74E,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACjC;IACA,IAAI,CAACm9E,iBAAiB,GAAG,CAAC;IAC1B,OAAO,CAAC;EACV;;EAEA;AACF;AACA;AACA;AACA;EACEC,eAAeA,CAAA,EAAG;IAChB,IAAI,IAAI,CAACD,iBAAiB,GAAG,IAAI,CAACD,sBAAsB,EAAE;MACxD,MAAM9wF,CAAC,GAAG,IAAI,CAAC+wF,iBAAiB;MAChC,IAAI,CAACA,iBAAiB,EAAE;MACxB,OAAO/wF,CAAC;IACV;IACA,OAAO,CAAC,GAAG,CAAC;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEuuF,cAAcA,CAACtC,MAAM,EAAEgF,IAAI,EAAE;IAC3B,IAAI14D,KAAK;IACT,MAAM24D,WAAW,GAAG,IAAI;IACxB,MAAMC,OAAO,GAAG,MAAM;IACtB,MAAMC,MAAM,GAAG,KAAK;IACpB,MAAMC,QAAQ,GAAG,OAAO;IACxB,MAAMC,IAAI,GAAG,MAAM;IAEnB,MAAMC,cAAc,GAAG,IAAI,CAACC,iBAAiB,IAAI,CAAC;IAClD,MAAMz5F,CAAC,GAAG,IAAIyoC,iGAAa,CAAC,CAAC;IAC7B,MAAM+jD,EAAE,GAAGpkF,IAAI,CAACyN,KAAK,CAAC2jF,cAAc,IAAIN,IAAI,CAAC/iF,CAAC,GAAG,IAAI,CAAC84E,OAAO,CAAC94E,CAAC,CAAC,IAAI,IAAI,CAAC+4E,OAAO,CAAC/4E,CAAC,GAAGgjF,WAAW,GAAG,IAAI,CAAClK,OAAO,CAAC94E,CAAC,CAAC,CAAC;IACnH,MAAMk2E,EAAE,GAAGjkF,IAAI,CAACyN,KAAK,CAAC2jF,cAAc,IAAIN,IAAI,CAACt+E,CAAC,GAAG,IAAI,CAACq0E,OAAO,CAACr0E,CAAC,CAAC,IAAI,IAAI,CAACs0E,OAAO,CAACt0E,CAAC,GAAGu+E,WAAW,GAAG,IAAI,CAAClK,OAAO,CAACr0E,CAAC,CAAC,CAAC;IACnH,MAAMwxE,EAAE,GAAGhkF,IAAI,CAACyN,KAAK,CAAC2jF,cAAc,IAAIN,IAAI,CAACj9E,CAAC,GAAG,IAAI,CAACgzE,OAAO,CAAChzE,CAAC,CAAC,IAAI,IAAI,CAACizE,OAAO,CAACjzE,CAAC,GAAGk9E,WAAW,GAAG,IAAI,CAAClK,OAAO,CAAChzE,CAAC,CAAC,CAAC;IACnH,IAAIy9E,KAAK,GAAGlN,EAAE,GAAG4M,OAAO,GAAGhN,EAAE,GAAGiN,MAAM,GAAGhN,EAAE,GAAGiN,QAAQ;IACtDI,KAAK,IAAK3F,SAAS,GAAG,CAAE;IACxB,MAAM4F,UAAU,GAAGD,KAAK,GAAGA,KAAK;;IAEhC;IACA;IACA,IAAI,IAAI,CAACzK,OAAO,KAAK,IAAI,IAAI,IAAI,CAACC,OAAO,KAAK,IAAI,EAAE;MAClD,KAAK1uD,KAAK,GAAG,IAAI,CAACi0D,SAAS,CAACkF,UAAU,GAAG,CAAC,CAAC,EAAEn5D,KAAK,IAAI,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACk0D,WAAW,CAACl0D,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;QAChG,MAAMqhD,GAAG,GAAG,IAAI,CAAC6S,WAAW,CAACl0D,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7CxgC,CAAC,CAACyX,IAAI,CAACy8E,MAAM,CAACzC,SAAS,CAAC5P,GAAG,CAAC,CAAC;QAC7B7hF,CAAC,CAACmW,CAAC,IAAI+iF,IAAI,CAAC/iF,CAAC;QACbnW,CAAC,CAAC4a,CAAC,IAAIs+E,IAAI,CAACt+E,CAAC;QACb5a,CAAC,CAACic,CAAC,IAAIi9E,IAAI,CAACj9E,CAAC;QACb,MAAM29E,IAAI,GAAG55F,CAAC,CAACmW,CAAC,GAAGnW,CAAC,CAACmW,CAAC,GAAGnW,CAAC,CAAC4a,CAAC,GAAG5a,CAAC,CAAC4a,CAAC,GAAG5a,CAAC,CAACic,CAAC,GAAGjc,CAAC,CAACic,CAAC;QAC9C,IAAI29E,IAAI,GAAGL,IAAI,EAAE;UACf,OAAO1X,GAAG;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAIqS,MAAM,CAACrZ,YAAY,IAAI,IAAI,CAAC6Y,cAAc,EAAE;MAC9C,OAAO,CAAC,GAAG,CAAC;IACd;IAEA,MAAMmG,QAAQ,GAAG3F,MAAM,CAACrZ,YAAY;IACpCqZ,MAAM,CAACzC,SAAS,CAACoI,QAAQ,CAAC,CAACpiF,IAAI,CAACyhF,IAAI,CAAC;;IAErC;IACA,IAAI,IAAI,CAACjK,OAAO,KAAK,IAAI,IAAI,IAAI,CAACC,OAAO,KAAK,IAAI,EAAE;MAClD1uD,KAAK,GAAG,IAAI,CAACy4D,eAAe,CAAC,CAAC;MAC9B,IAAIz4D,KAAK,GAAG,CAAC,EAAE;QACb,OAAO,CAAC,GAAG,CAAC;MACd;MACA,MAAMs5D,UAAU,GAAG,IAAI,CAACrF,SAAS,CAACkF,UAAU,GAAG,CAAC,CAAC;MACjD,IAAI,CAAClF,SAAS,CAACkF,UAAU,GAAG,CAAC,CAAC,GAAGn5D,KAAK;MACtC,IAAI,CAACk0D,WAAW,CAACl0D,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAGq5D,QAAQ;MAC1C,IAAI,CAACnF,WAAW,CAACl0D,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAGs5D,UAAU;MAE5C,IAAI,CAACrF,SAAS,CAACkF,UAAU,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IACpC;IACAzF,MAAM,CAACrZ,YAAY,EAAE;IACrB,OAAOgf,QAAQ;EACjB;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEE,qBAAqBA,CACnBjK,IAAI,EACJkK,iBAAiB,EACjB/K,OAAO,EACPC,OAAO,EACPgF,MAAM,EACNnxE,OAAO,EACP;IACA,IAAI8+D,GAAG;IACP,IAAIgX,YAAY;IAChB,IAAIoB,YAAY;IAChB,MAAMC,GAAG,GAAG,GAAG;IAEf,SAASC,oBAAoBA,CAAA,EAAG;MAC9B,IAAIF,YAAY,GAAG,GAAG,EAAE;QACtB;QACA,IAAIl3E,OAAO,CAAC8+D,GAAG,CAAC,GAAG,GAAG,EAAE;UACtB9+D,OAAO,CAAC8+D,GAAG,CAAC,GAAGoY,YAAY,CAAC,CAAC;QAC/B;QACA,IAAIA,YAAY,GAAGl3E,OAAO,CAAC8+D,GAAG,CAAC,EAAE;UAC/B9+D,OAAO,CAAC8+D,GAAG,CAAC,GAAGoY,YAAY,CAAC,CAAC;QAC/B;MACF,CAAC,MAAM,IAAIA,YAAY,GAAGl3E,OAAO,CAAC8+D,GAAG,CAAC,EAAE;QAAE;QACxC9+D,OAAO,CAAC8+D,GAAG,CAAC,GAAGoY,YAAY,CAAC,CAAC;MAC/B;IACF;IAEA,MAAMlK,KAAK,GAAGD,IAAI,GAAGA,IAAI;IACzB,MAAMG,MAAM,GAAG,CAACH,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAAC/4E,CAAC,GAAG84E,OAAO,CAAC94E,CAAC,CAAC;IACnD,MAAMg6E,MAAM,GAAG,CAACL,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAACt0E,CAAC,GAAGq0E,OAAO,CAACr0E,CAAC,CAAC;IACnD,MAAMy1E,MAAM,GAAG,CAACP,IAAI,GAAG,CAAC,KAAKZ,OAAO,CAACjzE,CAAC,GAAGgzE,OAAO,CAAChzE,CAAC,CAAC;IAEnD,MAAMm+E,WAAW,GAAIJ,iBAAiB,GAAG,CAAC,IAAKA,iBAAiB,GAAG,CAAC,CAAC;IACrE,MAAMK,OAAO,GAAG,GAAG,IAAIvK,IAAI,GAAG,CAAC,CAAC;IAEhC,KAAK,IAAI7nF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGisF,MAAM,CAACrZ,YAAY,EAAE5yE,CAAC,EAAE,EAAE;MAC5C,MAAMqhD,OAAO,GAAG4qC,MAAM,CAACzC,SAAS,CAACxpF,CAAC,CAAC;MAEnC,MAAMqyF,MAAM,GAAGN,iBAAiB,GAAGE,GAAG;MAEtC,IAAI3B,OAAO,GAAGnwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAACnzC,CAAC,GAAGmkF,MAAM,GAAIrL,OAAO,CAAC94E,CAAC,IAAI85E,MAAM,CAAC;MACrE,IAAIuI,OAAO,GAAGpwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAAC1uC,CAAC,GAAG0/E,MAAM,GAAIrL,OAAO,CAACr0E,CAAC,IAAIu1E,MAAM,CAAC;MACrE,IAAIsI,OAAO,GAAGrwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAACrtC,CAAC,GAAGq+E,MAAM,GAAIrL,OAAO,CAAChzE,CAAC,IAAIo0E,MAAM,CAAC;MAErE,IAAIqI,OAAO,GAAGtwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAACnzC,CAAC,GAAGmkF,MAAM,GAAIrL,OAAO,CAAC94E,CAAC,IAAI85E,MAAM,CAAC;MACrE,IAAI0I,OAAO,GAAGvwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAAC1uC,CAAC,GAAG0/E,MAAM,GAAIrL,OAAO,CAACr0E,CAAC,IAAIu1E,MAAM,CAAC;MACrE,IAAIyI,OAAO,GAAGxwF,IAAI,CAACyN,KAAK,CAAC,CAAEyzC,OAAO,CAACrtC,CAAC,GAAGq+E,MAAM,GAAIrL,OAAO,CAAChzE,CAAC,IAAIo0E,MAAM,CAAC;MAErEkI,OAAO,GAAIA,OAAO,IAAI,CAAC,GAAIA,OAAO,GAAG,CAAC;MACtCC,OAAO,GAAIA,OAAO,IAAI,CAAC,GAAIA,OAAO,GAAG,CAAC;MACtCC,OAAO,GAAIA,OAAO,IAAI,CAAC,GAAIA,OAAO,GAAG,CAAC;MACtCC,OAAO,GAAIA,OAAO,IAAK5I,IAAI,GAAG,CAAE,GAAI4I,OAAO,GAAI5I,IAAI,GAAG,CAAE;MACxD6I,OAAO,GAAIA,OAAO,IAAK7I,IAAI,GAAG,CAAE,GAAI6I,OAAO,GAAI7I,IAAI,GAAG,CAAE;MACxD8I,OAAO,GAAIA,OAAO,IAAK9I,IAAI,GAAG,CAAE,GAAI8I,OAAO,GAAI9I,IAAI,GAAG,CAAE;MAExD,KAAK,IAAIzD,EAAE,GAAGmM,OAAO,EAAEnM,EAAE,IAAIsM,OAAO,EAAEtM,EAAE,EAAE,EAAE;QAC1C,MAAM8K,IAAI,GAAG9K,EAAE,GAAG0D,KAAK;QACvB,KAAK,IAAI3D,EAAE,GAAGqM,OAAO,EAAErM,EAAE,IAAIwM,OAAO,EAAExM,EAAE,EAAE,EAAE;UAC1C,MAAMgL,IAAI,GAAGhL,EAAE,GAAG0D,IAAI;UACtB,KAAK,IAAItD,EAAE,GAAG+L,OAAO,EAAE/L,EAAE,IAAIkM,OAAO,EAAElM,EAAE,EAAE,EAAE;YAC1C3K,GAAG,GAAGsV,IAAI,GAAGC,IAAI,GAAG5K,EAAE;YACtB;YACA,IAAI92E,CAAC,GAAG82E,EAAE,GAAG6N,OAAO;YACpB,MAAME,OAAO,GAAGtL,OAAO,CAAC94E,CAAC,IAAI,GAAG,GAAGT,CAAC,CAAC,GAAGw5E,OAAO,CAAC/4E,CAAC,GAAGT,CAAC;YACrDA,CAAC,GAAG22E,EAAE,GAAGgO,OAAO;YAChB,MAAMG,OAAO,GAAGvL,OAAO,CAACr0E,CAAC,IAAI,GAAG,GAAGlF,CAAC,CAAC,GAAGw5E,OAAO,CAACt0E,CAAC,GAAGlF,CAAC;YACrDA,CAAC,GAAG02E,EAAE,GAAGiO,OAAO;YAChB,MAAMI,OAAO,GAAGxL,OAAO,CAAChzE,CAAC,IAAI,GAAG,GAAGvG,CAAC,CAAC,GAAGw5E,OAAO,CAACjzE,CAAC,GAAGvG,CAAC;YAErD,MAAMqhB,EAAE,GAAGwjE,OAAO,GAAGjxC,OAAO,CAACnzC,CAAC;YAC9B,MAAM6gB,EAAE,GAAGwjE,OAAO,GAAGlxC,OAAO,CAAC1uC,CAAC;YAC9B,MAAMqc,EAAE,GAAGwjE,OAAO,GAAGnxC,OAAO,CAACrtC,CAAC;YAC9B,MAAMwkC,KAAK,GAAG1pB,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;YACzC,IAAIwpB,KAAK,GAAG25C,WAAW,EAAE;cACvBvB,YAAY,GAAGzwF,IAAI,CAAC+xC,IAAI,CAACsG,KAAK,CAAC;cAC/Bw5C,YAAY,GAAG,EAAEpB,YAAY,GAAGmB,iBAAiB,CAAC;cAClDG,oBAAoB,CAAC,CAAC;YACxB,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,OAAO,CAAC;EACV;EAEAlG,WAAWA,CAAA,EAAG;IACZ,IAAIyG,EAAE;IACN,MAAMC,YAAY,GAAG,GAAG;;IAExB;IACA;;IAEA;IACA,MAAMxW,YAAY,GAAG;MACnB1K,MAAM,EAAE,IAAI,CAACD,OAAO;MACpBlN,MAAM,EAAE,IAAI,CAACnB,OAAO;MACpBniC,KAAK,EAAE,IAAI,CAACuwC,KAAK,CAACvwC;IACpB,CAAC;IACD,IAAI,CAAC6B,OAAO,GAAG,IAAI,CAAC0uC,KAAK,CAAClmE,MAAM;IAChC,IAAI,CAAC21B,KAAK,GAAGm7C,YAAY,CAACn7C,KAAK;IAC/B,IAAI,CAAC4xD,cAAc,GAAG,IAAI,CAACrhB,KAAK,CAACzjD,WAAW;IAC5C,IAAI,CAACg/D,eAAe,GAAG,IAAI,CAACvb,KAAK,CAACqK,QAAQ;IAC1C,IAAI,CAACiX,SAAS,GAAG,IAAI,CAACthB,KAAK,CAACshB,SAAS;IACrC,IAAI,CAACtlE,WAAW,GAAG,IAAI,CAACgkD,KAAK,CAAChkD,WAAW;IACzC,IAAI,CAACulE,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACC,YAAY,GAAG,IAAI,CAACxhB,KAAK,CAACwhB,YAAY;IAC3C,IAAI,CAAC5a,kBAAkB,GAAG,IAAI,CAAC5G,KAAK,CAAC4G,kBAAkB;IAEvD,IAAI,CAAC+T,MAAM,GAAG,IAAI;IAElB,IAAI,CAACO,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACqE,sBAAsB,GAAG,CAAC;IAC/B,IAAI,CAACC,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACtF,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,eAAe,GAAG,CAAC;IAExB,MAAMY,YAAY,GAAG,IAAIhrF,KAAK,CAAC,IAAI,CAACy/B,KAAK,CAAC9oC,MAAM,CAAC;IACjD,IAAI,CAACo0F,qBAAqB,CAACnQ,YAAY,EAAEoQ,YAAY,CAAC;;IAEtD;IACA,MAAMtF,OAAO,GAAG,IAAI,CAACA,OAAO,GAAG,IAAIxmD,iGAAa,CAAC,CAAC;IAClD,MAAMymD,OAAO,GAAG,IAAI,CAACA,OAAO,GAAG,IAAIzmD,iGAAa,CAAC,CAAC;IAClD,IAAI,CAACksD,cAAc,CAACJ,YAAY,EAAEtF,OAAO,EAAEC,OAAO,CAAC;IAEnD,MAAMuK,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,GAAG,IAAI,CAACmB,cAAc,IAAI,CAAC,GAAG,CAAC,CAAC;;IAEhF;IACA,MAAM9K,IAAI,GAAG2J,iBAAiB;IAC9B,MAAM1J,KAAK,GAAGD,IAAI,GAAGA,IAAI;IACzB,MAAME,KAAK,GAAGD,KAAK,GAAGD,IAAI;IAC1B,MAAM/sE,OAAO,GAAG/c,KAAK,CAACuoB,aAAa,CAAClU,YAAY,EAAE21E,KAAK,CAAC;IACxD,MAAMgL,YAAY,GAAG,IAAI,CAACzlE,WAAW,GAAG,IAAI,CAACu/D,eAAe;IAE5D,IAAI,CAACkD,oBAAoB,CAACj1E,OAAO,EAAE+sE,IAAI,EAAEb,OAAO,EAAEC,OAAO,EAAEqF,YAAY,EAAEyG,YAAY,CAAC;IAEtF,MAAMrL,QAAQ,GAAG8J,iBAAiB,GAAG,CAAC;IACtC,MAAM/D,IAAI,GAAG,IAAIhc,8BAAmB,CAAC,CAAC;IACtCghB,EAAE,GAAGhF,IAAI,CAAC3rF,MAAM,CAAC4lF,QAAQ,CAAC;IAC1B,IAAI+K,EAAE,GAAG,CAAC,EAAE;MACV,OAAOA,EAAE;IACX;IACA;IACA,MAAM5D,SAAS,GAAG,IAAIruD,iGAAa,CAAC,CAAC;IACrCquD,SAAS,CAAC3gF,CAAC,GAAG,CAAC+4E,OAAO,CAAC/4E,CAAC,GAAG84E,OAAO,CAAC94E,CAAC,IAAIw5E,QAAQ;IAChDmH,SAAS,CAACl8E,CAAC,GAAG,CAACs0E,OAAO,CAACt0E,CAAC,GAAGq0E,OAAO,CAACr0E,CAAC,IAAI+0E,QAAQ;IAChDmH,SAAS,CAAC76E,CAAC,GAAG,CAACizE,OAAO,CAACjzE,CAAC,GAAGgzE,OAAO,CAAChzE,CAAC,IAAI0zE,QAAQ;IAEhD,IAAIsL,wBAAwB,GAAG,IAAI,CAACvD,sBAAsB,CAAC5H,IAAI,EAAEH,QAAQ,EAAE5sE,OAAO,EAAE2yE,IAAI,CAAC;IACzF,IAAIhC,cAAc,GAAGtrF,IAAI,CAACyN,KAAK,CAAColF,wBAAwB,GAAGN,YAAY,CAAC;IACxE,IAAIhH,eAAe,GAAGvrF,IAAI,CAACyN,KAAK,CAAColF,wBAAwB,GAAGN,YAAY,GAAG,CAAC,CAAC;IAE7E,IAAI,CAACzG,MAAM,GAAG,IAAIT,wBAAa,CAACC,cAAc,EAAEC,eAAe,EAAE,IAAI,CAACmH,eAAe,CAAC;IAEtFJ,EAAE,GAAG,IAAI,CAAC5B,gBAAgB,CAACpF,cAAc,EAAEC,eAAe,CAAC;IAC3D,IAAI+G,EAAE,GAAG,CAAC,EAAE;MACV,OAAOA,EAAE;IACX;;IAEA;IACA,IAAIQ,wBAAwB,GAAGF,YAAY;IAC3C,IAAI,IAAI,CAACD,YAAY,EAAE;MACrBG,wBAAwB,GAAG,IAAI;IACjC;IACA,IAAI,CAAC/E,UAAU,GAAG,IAAInH,iCAAsB,CAC1CuF,YAAY,CAACr0F,MAAM,EACnBq0F,YAAY,EACZtF,OAAO,EACPC,OAAO,EACPgM,wBACF,CAAC;IACD,IAAI,CAAC/E,UAAU,CAAC5G,YAAY,CAAC,CAAC;IAE9BmL,EAAE,GAAG,IAAI,CAAC9D,mBAAmB,CAAC6C,iBAAiB,EAAExK,OAAO,EAAEC,OAAO,EAAEnsE,OAAO,EAAE+zE,SAAS,EAAEpB,IAAI,CAAC;IAC5F,IAAI,IAAI,CAACqF,YAAY,EAAE;MACrB;MACA;MACA,IAAI,CAAChB,qBAAqB,CAACjK,IAAI,EAAEkL,YAAY,EAAE/L,OAAO,EAAEC,OAAO,EAAE,IAAI,CAACgF,MAAM,EAAEnxE,OAAO,CAAC;;MAEtF;MACA,IAAI,CAACmxE,MAAM,CAACzC,SAAS,GAAG,IAAI;MAC5B,IAAI,CAACyC,MAAM,CAAC/oB,OAAO,GAAG,IAAI;MAC1B,IAAI,CAAC+oB,MAAM,CAAC3rB,QAAQ,GAAG,IAAI;MAC3B,IAAI,CAAC2rB,MAAM,CAACnnB,QAAQ,GAAG,IAAI;MAC3B,IAAI,CAACmnB,MAAM,CAACrZ,YAAY,GAAG,CAAC;MAC5B,IAAI,CAACqZ,MAAM,CAACtZ,aAAa,GAAG,CAAC;MAC7B,IAAI,CAACsZ,MAAM,GAAG,IAAI;;MAElB;MACA+G,wBAAwB,GAAG,IAAI,CAACvD,sBAAsB,CAAC5H,IAAI,EAAEH,QAAQ,EAAE5sE,OAAO,EAAE2yE,IAAI,CAAC;MACrFhC,cAAc,GAAGtrF,IAAI,CAACyN,KAAK,CAAColF,wBAAwB,GAAGN,YAAY,CAAC;MACpEhH,eAAe,GAAGvrF,IAAI,CAACyN,KAAK,CAAColF,wBAAwB,GAAGN,YAAY,GAAG,CAAC,CAAC;;MAEzE;MACA,IAAI,CAACzG,MAAM,GAAG,IAAIT,wBAAa,CAACC,cAAc,EAAEC,eAAe,EAAE,IAAI,CAACmH,eAAe,CAAC;MACtFJ,EAAE,GAAG,IAAI,CAAC5B,gBAAgB,CAACpF,cAAc,EAAEC,eAAe,CAAC;MAC3D,IAAI+G,EAAE,GAAG,CAAC,EAAE;QACV,OAAOA,EAAE;MACX;MACA;MACAA,EAAE,GAAG,IAAI,CAAC9D,mBAAmB,CAAC9G,IAAI,EAAEb,OAAO,EAAEC,OAAO,EAAEnsE,OAAO,EAAE+zE,SAAS,EAAEpB,IAAI,CAAC;IACjF;;IAEA;IACA,IAAI,CAACS,UAAU,CAAC/D,YAAY,CAAC,IAAI,CAAC8B,MAAM,CAACzC,SAAS,CAACvxF,MAAM,EAAE,IAAI,CAACg0F,MAAM,CAACzC,SAAS,EAAE,IAAI,CAACyC,MAAM,CAACnnB,QAAQ,CAAC;IACvG;IACA;IACA,IAAIomB,qBAAqB,GAAG,GAAG;IAC/B,IAAI,IAAI,CAAC4H,YAAY,EAAE;MACrB5H,qBAAqB,IAAI,GAAG;IAC9B;IACA,IAAI,IAAI,CAAC2H,eAAe,EAAE;MACxB,IAAI,CAAC3E,UAAU,CAACjD,WAAW,CACzB,IAAI,CAACgB,MAAM,CAACzC,SAAS,CAACvxF,MAAM,EAC5B,IAAI,CAACg0F,MAAM,CAACzC,SAAS,EACrB,IAAI,CAACyC,MAAM,CAAC/oB,OAAO,EACnBgoB,qBACF,CAAC;IACH;IACA,IAAI,CAACgD,UAAU,CAAC3E,aAAa,CAAC,CAAC;IAC/B,IAAI,CAAC2E,UAAU,GAAG,IAAI;;IAEtB;IACAT,IAAI,CAAC73C,OAAO,CAAC,CAAC;IAEd,OAAO68C,EAAE;EACX;AACF;;AAEA;;AAEA,sEAAe1G,oBAAoB;;ACl2BJ;AAC2B;AAE1D,SAASmH,WAAWA,CAACC,QAAQ,EAAE93E,SAAS,EAAE;EACxC,MAAM3V,IAAI,GAAGqW,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAC1CtW,IAAI,CAAC2V,SAAS,GAAGA,SAAS;EAE1B,IAAI,OAAO83E,QAAQ,KAAK,QAAQ,EAAE;IAChC,MAAMC,QAAQ,GAAGr3E,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;IAC/Co3E,QAAQ,CAACl3E,KAAK,CAACm3E,QAAQ,GAAG,MAAM;IAChC,MAAMC,OAAO,GAAGH,QAAQ,CAACrsF,KAAK,CAAC,IAAI,CAAC;IAEpC,KAAK,IAAI9G,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGqzF,OAAO,CAACr7F,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC9C,MAAMuzF,SAAS,GAAGx3E,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;MAChD,MAAMw3E,YAAY,GAAGz3E,QAAQ,CAAC6I,cAAc,CAAC0uE,OAAO,CAACtzF,CAAC,CAAC,CAAC;MACxDuzF,SAAS,CAACh2E,WAAW,CAACi2E,YAAY,CAAC;MACnCJ,QAAQ,CAAC71E,WAAW,CAACg2E,SAAS,CAAC;MAC/B,IAAIvzF,CAAC,GAAGC,CAAC,GAAG,CAAC,EAAE;QACbmzF,QAAQ,CAAC71E,WAAW,CAACxB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CAAC;MACpD;IACF;IAEAtW,IAAI,CAAC6X,WAAW,CAAC61E,QAAQ,CAAC;EAC5B,CAAC,MAAM;IACL1tF,IAAI,CAAC6X,WAAW,CAAC41E,QAAQ,CAAC;EAC5B;EACAztF,IAAI,CAACmlB,QAAQ,GAAG,IAAI2V,iGAAa,CAAC,CAAC;EACnC,OAAO96B,IAAI;AACb;AACA,MAAM+tF,cAAc,SAAS/yE,qBAAe,CAAC;EAC3CpV,WAAWA,CAAC+zD,aAAa,EAAE3+D,IAAI,EAAE;IAC/B,KAAK,CAAC,CAAC;IACP,IAAI,CAAC4wE,KAAK,GAAG5wE,IAAI;IACjB,IAAI,CAACgzF,KAAK,GAAG,EAAE;IACf,IAAI,CAAC1/B,WAAW,GAAG,KAAK;IAExB,IAAI2/B,YAAY,GAAG,CAAC,EAAE;IACtB,IAAIC,YAAY,GAAG,CAAC,EAAE;IACtB,QAAQlzF,IAAI,CAACkuB,eAAe;MAC1B,KAAK,MAAM;QACT+kE,YAAY,GAAG,CAAC;QAChB;MACF,KAAK,OAAO;QACVA,YAAY,GAAG,CAAC,GAAG;QACnB;MACF;QACE;IACJ;IAEA,QAAQjzF,IAAI,CAACmuB,aAAa;MACxB,KAAK,KAAK;QACR+kE,YAAY,GAAG,CAAC,GAAG;QACnB;MACF,KAAK,QAAQ;QACXA,YAAY,GAAG,CAAC;QAChB;MACF;QACE;IACJ;IAEA,MAAMC,QAAQ,GAAG,IAAIrzD,iGAAa,CAAC9/B,IAAI,CAACouB,EAAE,IAAI,CAAC,EAAEpuB,IAAI,CAACquB,EAAE,IAAI,CAAC,EAAEruB,IAAI,CAACsuB,EAAE,IAAI,CAAC,CAAC;IAC5E,IAAI,CAAC8kE,QAAQ,GAAG;MACd7kF,WAAW,EAAE,aAAa0kF,YAAY,MAAMC,YAAY,IAAI;MAC5DltF,MAAM,EAAEmtF;IACV,CAAC;EACH;EAEAlxB,OAAOA,CAACC,OAAO,EAAEC,OAAO,EAAEswB,QAAQ,EAAE;IAClC,MAAMzyF,IAAI,GAAG,IAAI,CAAC4wE,KAAK;IACvB,MAAM5rE,IAAI,GAAG,IAAI,CAACguF,KAAK,CAAC9wB,OAAO,CAAC,IAAIswB,WAAW,CAACC,QAAQ,EAAE,OAAO,CAAC;IAElEztF,IAAI,CAACmlB,QAAQ,CAACrb,IAAI,CAACqzD,OAAO,CAAC;IAC3Bn9D,IAAI,CAACwW,KAAK,CAAC63E,SAAS,GAAGrzF,IAAI,CAACkuB,eAAe;IAC3ClpB,IAAI,CAACwW,KAAK,CAAC2S,aAAa,GAAGnuB,IAAI,CAACmuB,aAAa;IAC7C,IAAI,CAAC6kE,KAAK,CAAC9wB,OAAO,CAAC,GAAGl9D,IAAI;EAC5B;EAEAs9D,QAAQA,CAACJ,OAAO,EAAEoxB,MAAM,EAAEC,MAAM,EAAE;IAChC,MAAMvuF,IAAI,GAAG,IAAI,CAACguF,KAAK,CAAC9wB,OAAO,CAAC;IAChCl9D,IAAI,CAAChF,IAAI,GAAG;MACVqa,KAAK,EAAEi5E,MAAM;MACb92E,UAAU,EAAE+2E;IACd,CAAC;EACH;EAEA9wB,WAAWA,CAAA,EAAG;IACZ,OAAO,IAAI;EACb;EAEAC,YAAYA,CAAA,EAAG;IACb,IAAI,CAACpP,WAAW,GAAG,IAAI;IACvB,IAAI,CAACzyC,aAAa,CAAC;MAAE/gB,IAAI,EAAE;IAAS,CAAC,CAAC;EACxC;EAEA8xC,QAAQA,CAAA,EAAG;IACT,IAAI,CAAC8wB,YAAY,CAAC,CAAC;EACrB;;EAEA;EACAlO,OAAOA,CAAA,EAAG,CACV;EAEAmO,UAAUA,CAAA,EAAG,CAEb;EAEA3N,SAASA,CAAA,EAAG;IACV,OAAO,EAAE;EACX;AACF;AAEA,gEAAe+9B,cAAc;;AC/GqC;AACN;AACQ;AACM;AACV;AACN;AACE;AAChB;AACQ;AACU;AACJ;AACZ;AAE9C,iDAAe;EACbrxB,wBAAwB;EACxB4D,qBAAqB;EACrBa,yBAAyB;EACzBsE,4BAA4B;EAC5B8B,uBAAuB;EACvBsD,oBAAoB;EACpBK,qBAAqB;EACrBO,aAAa;EACbkL,iBAAiB;EACjBgK,sBAAsB;EACtB0F,oBAAoB;EACpB0H,cAAcA,EAAAA,yBAAAA;AAChB,CAAC;;;;;;AC1BD,mDAAe;EAEbS,SAAS,EAAE,SAAS;EAEpB;AACF;AACA;AACA;EACE3pD,IAAIA,CAAC4pD,QAAQ,EAAE;IACb,IAAI,CAACD,SAAS,GAAGC,QAAQ,CAACC,YAAY,CAACC,eAAe,CAAC,OAAO,CAAC;EACjE;AACF,CAAC;;ACX8B;AAE/B,MAAMC,UAAU,GAAG,CAAC;AACpB,MAAMC,WAAW,GAAG,CAAC;AACrB,MAAMC,UAAU,GAAG,IAAIljF,UAAU,CAAC,CAChC,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAChE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,EAChE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EACnE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,CACpE,CAAC;AACF,MAAMmjF,WAAW,GAAGj0D,wGAAoB;AACxC,MAAMm0D,WAAW,GAAGn0D,wGAAoB;AACxC,MAAMo0D,eAAe,GAAGp0D,uGAAmB;AAC3C,MAAMs0D,eAAe,GAAGt0D,uGAAmB;AAC3C,MAAMu0D,aAAa,GAAGv0D,mGAAe;AACrC,MAAMw0D,YAAY,GAAG,IAAIx0D,qGAAiB,CACxCg0D,UAAU,EACVF,UAAU,EACVC,WAAW,EACX/zD,oGAAgB,EAChBA,0GAAsB,EACtBu0D,aAAa,EACbN,WAAW,EACXE,WAAW,EACXG,eAAe,EACfF,eAAe,EACf,CACF,CAAC;AACDI,YAAY,CAAChhC,WAAW,GAAG,IAAI;AAE/B,uDAAe;EACbsgC,UAAU;EACVC,WAAW;EACXS;AACF,CAAC;;AClCD;AACA;AAC+B;AACQ;AACE;AACE;AACP;;AAEpC;AACA;AACA;AACA,MAAMG,cAAc,GAAG,CACrB,IAAI30D,iGAAa,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,EACtC,IAAIA,iGAAa,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,EACtC,IAAIA,iGAAa,CAAC,QAAQ,EAAE,QAAQ,CAAC,EACrC,IAAIA,iGAAa,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,CACvC;AAED,MAAM40D,eAAe,GAAG50D,uGAAmB,CAAC1L,KAAK,CAAC,CAEhD0L,qGAAiB,CAAChO,GAAG,EACrBgO,qGAAiB,CAAC+9B,MAAM,EAExB;EACE;EACAg3B,OAAO,EAAE;IAAE90E,KAAK,EAAE,IAAI+f,+FAAW,CAAC,QAAQ;EAAE,CAAC;EAC7Cu0B,OAAO,EAAE;IAAEt0C,KAAK,EAAE;EAAI,CAAC;EAEvB+0E,QAAQ,EAAE;IAAEh1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE,IAAI+f,+FAAW,CAAC,QAAQ;EAAE,CAAC;EACzDi1D,SAAS,EAAE;IAAEj1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAG,CAAC;EACnCi+C,UAAU,EAAE;IAAEl+D,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE,IAAI+f,+FAAW,CAAC,QAAQ;EAAE,CAAC;EAC3Do+B,OAAO,EAAE;IAAEp+D,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EAClCi1E,UAAU,EAAE;IAAEl1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACrCk1E,cAAc,EAAE;IAAEn1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACzCm1E,cAAc,EAAE;IAAEp1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE,CAAC;EAAI,CAAC;EAC1Co1E,kBAAkB,EAAE;IAAEr1F,IAAI,EAAE,KAAK;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC;EAAE,CAAC;EAC/Ds1D,iBAAiB,EAAE;IAAEt1F,IAAI,EAAE,KAAK;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC;EAAE,CAAC;EAC9Du1D,cAAc,EAAE;IAAEv1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACzCu1E,gBAAgB,EAAE;IAAEx1F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EAC3Cw1E,aAAa,EAAE;IAAEz1F,IAAI,EAAE,KAAK;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC;EAAE,CAAC;EAC1D01D,QAAQ,EAAE;IAAE11F,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC;EAAE,CAAC;EACpDtT,SAAS,EAAE;IAAE1sB,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACpC;EACAuQ,QAAQ,EAAE;IAAExwB,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACnC01E,aAAa,EAAE;IAAE31F,IAAI,EAAE,KAAK;IAAEigB,KAAK,EAAE;EAAK,CAAC;EAC3C21E,QAAQ,EAAE;IAAE51F,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACpC41E,cAAc,EAAE;IAAE71F,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE;EAAK,CAAC;EAC3C61E,YAAY,EAAE;IAAE91F,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE;EAAK;AAC1C,CAAC,CAEF,CAAC;AAEF,MAAM81E,eAAe,GAAG,CACtB,WAAW,EACX,SAAS,EACT,SAAS,EACT,SAAS,EACT,UAAU,EACV,YAAY,EACZ,WAAW,EACX,YAAY,EACZ,gBAAgB,EAChB,mBAAmB,EACnB,gBAAgB,EAChB,kBAAkB,EAClB,eAAe,EACf,UAAU,EACV,WAAW,EACX,UAAU,EACV,eAAe,EACf,UAAU,EACV,gBAAgB,EAChB,cAAc,CACf;;AAED;AACA,MAAMC,WAAW,GAAG;EAClBjB,OAAO,EAAE,IAAI/0D,+FAAW,CAAC,QAAQ,CAAC;EAAE;EACpCg1D,QAAQ,EAAE,IAAIh1D,+FAAW,CAAC,QAAQ,CAAC;EAAE;EACrCi1D,SAAS,EAAE,EAAE;EAAE;EACf1gC,OAAO,EAAE,CAAC;EAAE;EACZ2J,UAAU,EAAE,IAAIl+B,+FAAW,CAAC,QAAQ,CAAC;EAAE;EACvCo+B,OAAO,EAAE,GAAG;EAAE;EACd63B,SAAS,EAAE,GAAG;EAAE;EAChBf,UAAU,EAAE,GAAG;EAAE;EACjBC,cAAc,EAAE,GAAG;EAAE;EACrBG,iBAAiB,EAAE,IAAIt1D,iGAAa,CAAC,CAAC;EACtCu1D,cAAc,EAAE,GAAG;EACnBC,gBAAgB,EAAE,GAAG;EACrBC,aAAa,EAAE,IAAIz1D,iGAAa,CAAC,CAAC;EAClC01D,QAAQ,EAAE,IAAI11D,iGAAa,CAAC,GAAG,EAAE,GAAG,CAAC;EACrCtT,SAAS,EAAE,GAAG;EACd8D,QAAQ,EAAE,GAAG;EACbmlE,aAAa,EAAEhB,cAAc;EAC7BiB,QAAQ,EAAElB,gBAAK,CAACF,YAAY;EAC5BqB,cAAc,EAAE,IAAI71D,iGAAa,CAAC,GAAG,GAAG00D,gBAAK,CAACZ,UAAU,EAAE,GAAG,GAAGY,gBAAK,CAACX,WAAW,CAAC;EAClF+B,YAAY,EAAE,IAAI91D,iGAAa,CAAC,GAAG,GAAG,KAAK,EAAE,GAAG,GAAG,KAAK,CAAC;EACzDhxB,IAAIA,CAAC4vD,MAAM,EAAE;IACX,IAAI,CAACm2B,OAAO,CAAC/lF,IAAI,CAAC4vD,MAAM,CAACm2B,OAAO,CAAC;IACjC,IAAI,CAACC,QAAQ,CAAChmF,IAAI,CAAC4vD,MAAM,CAACo2B,QAAQ,CAAC;IACnC,IAAI,CAACC,SAAS,GAAGr2B,MAAM,CAACq2B,SAAS;IACjC,IAAI,CAAC1gC,OAAO,GAAGqK,MAAM,CAACrK,OAAO;IAC7B,IAAI,CAAC2J,UAAU,CAAClvD,IAAI,CAAC4vD,MAAM,CAACV,UAAU,CAAC;IACvC,IAAI,CAACE,OAAO,GAAGQ,MAAM,CAACR,OAAO;IAC7B,IAAI,CAAC63B,SAAS,GAAGr3B,MAAM,CAACq3B,SAAS;IACjC,IAAI,CAACf,UAAU,GAAGt2B,MAAM,CAACs2B,UAAU;IACnC,IAAI,CAACC,cAAc,GAAGv2B,MAAM,CAACu2B,cAAc;IAC3C,IAAI,CAACG,iBAAiB,CAACtmF,IAAI,CAAC4vD,MAAM,CAAC02B,iBAAiB,CAAC;IACrD,IAAI,CAACC,cAAc,GAAG32B,MAAM,CAAC22B,cAAc;IAC3C,IAAI,CAACC,gBAAgB,GAAG52B,MAAM,CAAC42B,gBAAgB;IAC/C,IAAI,CAACC,aAAa,GAAG72B,MAAM,CAAC62B,aAAa;IACzC,IAAI,CAACC,QAAQ,GAAG92B,MAAM,CAAC82B,QAAQ;IAC/B,IAAI,CAAChpE,SAAS,GAAGkyC,MAAM,CAAClyC,SAAS,CAAC,CAAC;IACnC,IAAI,CAACwpE,WAAW,GAAGt3B,MAAM,CAACs3B,WAAW;IACrC,IAAI,CAAC1lE,QAAQ,GAAGouC,MAAM,CAACpuC,QAAQ;IAC/B,IAAI,CAACmlE,aAAa,GAAG/2B,MAAM,CAAC+2B,aAAa;IACzC,IAAI,CAACC,QAAQ,GAAGh3B,MAAM,CAACg3B,QAAQ;IAC/B,IAAI,CAACC,cAAc,GAAGj3B,MAAM,CAACi3B,cAAc;IAC3C,IAAI,CAACC,YAAY,GAAGl3B,MAAM,CAACk3B,YAAY;EACzC;AACF,CAAC;AAED,MAAMK,YAAY,SAASn2D,2GAAuB,CAAC;EACjDl1B,WAAWA,CAAC7K,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;;IAEb;IACA,IAAI,CAAC+xB,GAAG,GAAG,IAAI;IACf;IACA,IAAI,CAACokE,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B;IACA,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB;IACA,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB;IACA,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B;IACA,IAAI,CAAC14B,aAAa,GAAG,KAAK;IAC1B;IACA,IAAI,CAAC24B,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B;IACA,IAAI,CAAC7pE,KAAK,GAAG,KAAK;IAClB;IACA,IAAI,CAAC8E,SAAS,GAAG,KAAK;IACtB;IACA,IAAI,CAACglE,WAAW,GAAG,KAAK;IACxB;IACA,IAAI,CAACC,mBAAmB,GAAG,KAAK;IAChC;IACA,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB;IACA,IAAI,CAAC74B,SAAS,GAAG,KAAK;IACtB;IACA,IAAI,CAAC84B,aAAa,GAAG,QAAQ;IAC7B;IACA,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B;IACA,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB;IACA,IAAI,CAACC,UAAU,GAAG,KAAK;IACvB;IACA,IAAI,CAACxlE,WAAW,GAAG,IAAI;IACvB;IACA,IAAI,CAACylE,SAAS,GAAG,KAAK;IACtB;IACA,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B;IACA,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B;IACA,IAAI,CAAClB,WAAW,GAAG,KAAK;;IAExB;IACA,IAAI,CAACF,WAAW,GAAG30F,MAAM,CAACC,MAAM,CAAC60F,YAAY,CAAC5yF,SAAS,CAACyyF,WAAW,CAAC;;IAEpE;IACA,KAAK,CAACr4B,SAAS,CAAC;MACd3F,QAAQ,EAAEh4B,uGAAmB,CAACpB,KAAK,CAACg2D,eAAe,CAAC;MACpD18B,YAAY,EAAE,IAAI,CAACm/B,eAAe,CAAC,CAAC,GAAGn/B,oBAAY;MACnDG,cAAc,EAAE,IAAI,CAACg/B,eAAe,CAAC,CAAC,GAAGh/B,gCAAc;MACvD0F,MAAM,EAAE,IAAI;MACZ/rC,GAAG,EAAE,IAAI;MACTq1D,IAAI,EAAErnD,oGAAgBs3D;IACxB,CAAC,CAAC;IAEF,IAAI,CAAC35B,SAAS,CAAC19D,MAAM,CAAC;EACxB;EAEAo3F,eAAeA,CAAA,EAAG;IAChB,MAAM;MAAE3D;IAAU,CAAC,GAAGE,YAAY;IAClC,MAAMzxF,GAAG,GAAG,aAAauxF,SAAS,WAAW,GACzC,aAAaA,SAAS,WAAW;IACrC,OAAOvxF,GAAG;EACZ;EAEA6M,IAAIA,CAAC4vD,MAAM,EAAE;IACX,KAAK,CAAC5vD,IAAI,CAAC4vD,MAAM,CAAC;IAElB,IAAI,CAACvG,cAAc,GAAGuG,MAAM,CAACvG,cAAc;IAC3C,IAAI,CAACH,YAAY,GAAG0G,MAAM,CAAC1G,YAAY;IAEvC,IAAI,CAACF,QAAQ,GAAGh4B,uGAAmB,CAACpB,KAAK,CAACggC,MAAM,CAAC5G,QAAQ,CAAC;IAC1D,IAAI,CAACu/B,OAAO,GAAG;MAAE,GAAG34B,MAAM,CAAC24B;IAAQ,CAAC;IACpC,IAAI,CAACC,UAAU,GAAG54B,MAAM,CAAC44B,UAAU;IAEnC,IAAI,CAACxlE,GAAG,GAAG4sC,MAAM,CAAC5sC,GAAG;IACrB,IAAI,CAACokE,YAAY,GAAGx3B,MAAM,CAACw3B,YAAY;IACvC,IAAI,CAACC,eAAe,GAAGz3B,MAAM,CAACy3B,eAAe;IAC7C,IAAI,CAACC,SAAS,GAAG13B,MAAM,CAAC03B,SAAS;IACjC,IAAI,CAACC,UAAU,GAAG33B,MAAM,CAAC23B,UAAU;IACnC,IAAI,CAACC,cAAc,GAAG53B,MAAM,CAAC43B,cAAc;IAC3C,IAAI,CAAC14B,aAAa,GAAGc,MAAM,CAACd,aAAa;IACzC,IAAI,CAAC24B,YAAY,GAAG73B,MAAM,CAAC63B,YAAY;IACvC,IAAI,CAACC,cAAc,GAAG93B,MAAM,CAAC83B,cAAc;IAC3C,IAAI,CAAC7pE,KAAK,GAAG+xC,MAAM,CAAC/xC,KAAK;IACzB,IAAI,CAAC8E,SAAS,GAAGitC,MAAM,CAACjtC,SAAS;IACjC,IAAI,CAACglE,WAAW,GAAG/3B,MAAM,CAAC+3B,WAAW;IACrC,IAAI,CAACE,YAAY,GAAGj4B,MAAM,CAACi4B,YAAY;IACvC,IAAI,CAAC74B,SAAS,GAAGY,MAAM,CAACZ,SAAS;IACjC,IAAI,CAAC84B,aAAa,GAAGl4B,MAAM,CAACk4B,aAAa;IACzC,IAAI,CAACC,cAAc,GAAGn4B,MAAM,CAACm4B,cAAc;IAC3C,IAAI,CAACC,QAAQ,GAAGp4B,MAAM,CAACo4B,QAAQ;IAC/B,IAAI,CAACJ,mBAAmB,GAAGh4B,MAAM,CAACg4B,mBAAmB;IACrD,IAAI,CAACK,UAAU,GAAGr4B,MAAM,CAACq4B,UAAU;IACnC,IAAI,CAACC,SAAS,GAAGt4B,MAAM,CAACs4B,SAAS;IACjC,IAAI,CAACC,cAAc,GAAGv4B,MAAM,CAACu4B,cAAc;IAC3C,IAAI,CAACC,gBAAgB,GAAGx4B,MAAM,CAACw4B,gBAAgB;IAC/C,IAAI,CAAClB,WAAW,GAAGt3B,MAAM,CAACs3B,WAAW;IAErC,IAAI,CAACF,WAAW,CAAChnF,IAAI,CAAC4vD,MAAM,CAACo3B,WAAW,CAAC;IAEzC,OAAO,IAAI;EACb;;EAEA;EACA;EACAyB,cAAcA,CAAA,EAAG;IACf,MAAMC,IAAI,GAAG,IAAIvB,YAAY,CAAC,CAAC;IAC/BuB,IAAI,CAAC1oF,IAAI,CAAC,IAAI,CAAC;IACf0oF,IAAI,CAAC1B,WAAW,GAAG30F,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC00F,WAAW,CAAC;IAClD,OAAO0B,IAAI;EACb;EAEA/5B,SAASA,CAAC98C,MAAM,EAAE;IAChB,IAAI,OAAOA,MAAM,KAAK,WAAW,EAAE;MACjC;IACF;;IAEA;IACA,KAAK,CAAC88C,SAAS,CAAC98C,MAAM,CAAC;IAEvB,MAAM02E,OAAO,GAAG,CAAC,CAAC;IAClB,MAAMC,UAAU,GAAG,CAAC,CAAC;IAErB,IAAI,IAAI,CAACxlE,GAAG,EAAE;MACZulE,OAAO,CAACI,OAAO,GAAG,CAAC;IACrB;IACA,IAAI,IAAI,CAACvB,YAAY,EAAE;MACrBmB,OAAO,CAACK,aAAa,GAAG,CAAC;IAC3B;IACA,IAAI,IAAI,CAACvB,eAAe,EAAE;MACxBkB,OAAO,CAACM,gBAAgB,GAAG,CAAC;IAC9B;IACA,IAAI,IAAI,CAACvB,SAAS,EAAE;MAClBiB,OAAO,CAACO,UAAU,GAAG,CAAC;IACxB;IACA,IAAI,IAAI,CAACvB,UAAU,EAAE;MACnBgB,OAAO,CAACQ,WAAW,GAAG,CAAC;IACzB;IACA,IAAI,IAAI,CAACvB,cAAc,EAAE;MACvBe,OAAO,CAACS,gBAAgB,GAAG,CAAC;IAC9B;IACA,IAAI,IAAI,CAACl6B,aAAa,EAAE;MACtBy5B,OAAO,CAACU,cAAc,GAAG,CAAC;IAC5B;IACA,IAAI,IAAI,CAACxB,YAAY,EAAE;MACrBc,OAAO,CAACW,aAAa,GAAG,CAAC;MACzBV,UAAU,CAACW,SAAS,GAAG,IAAI;IAC7B;IACA,IAAI,IAAI,CAACzB,cAAc,EAAE;MACvBa,OAAO,CAACa,eAAe,GAAG,CAAC;MAC3BZ,UAAU,CAACW,SAAS,GAAG,IAAI;IAC7B;IACA,IAAI,IAAI,CAACtrE,KAAK,EAAE;MACd0qE,OAAO,CAACc,KAAK,GAAG,CAAC;IACnB;IACA,IAAI,IAAI,CAAC1mE,SAAS,EAAE;MAClB4lE,OAAO,CAACe,UAAU,GAAG,CAAC;IACxB;IACA,IAAI,IAAI,CAAC3B,WAAW,EAAE;MACpBY,OAAO,CAACgB,YAAY,GAAG,CAAC;IAC1B;IACA,IAAI,IAAI,CAACx6B,MAAM,EAAE;MACfw5B,OAAO,CAACiB,UAAU,GAAG,CAAC;IACxB;IACA,IAAI,IAAI,CAAC3B,YAAY,EAAE;MACrBU,OAAO,CAACkB,cAAc,GAAG,CAAC;IAC5B;IACA,IAAI,IAAI,CAACz6B,SAAS,EAAE;MAClBu5B,OAAO,CAAC1hC,SAAS,GAAG,CAAC;MACrB,IAAI,IAAI,CAACihC,aAAa,KAAK,KAAK,EAAE;QAChCS,OAAO,CAACmB,mBAAmB,GAAG,CAAC;MACjC,CAAC,MAAM,IAAI,IAAI,CAAC5B,aAAa,KAAK,QAAQ,EAAE;QAC1CS,OAAO,CAACoB,kBAAkB,GAAG,CAAC;MAChC,CAAC,MAAM;QACLpB,OAAO,CAACqB,eAAe,GAAG,CAAC;MAC7B;IACF;IACA,IAAI,IAAI,CAAC7B,cAAc,EAAE;MACvBQ,OAAO,CAACsB,gBAAgB,GAAG,CAAC;IAC9B;IACA,IAAI,IAAI,CAAC7B,QAAQ,EAAE;MACjBO,OAAO,CAACuB,mBAAmB,GAAG,CAAC;IACjC;IACA,IAAI,IAAI,CAAClC,mBAAmB,EAAE;MAC5BW,OAAO,CAACwB,cAAc,GAAG,CAAC;IAC5B;IACA,IAAI,IAAI,CAAC9B,UAAU,EAAE;MACnBM,OAAO,CAACyB,WAAW,GAAG,CAAC;IACzB;IACA,IAAI,IAAI,CAAC9B,SAAS,EAAE;MAClBK,OAAO,CAAC0B,UAAU,GAAG,CAAC;IACxB;IACA,IAAI,IAAI,CAAC9B,cAAc,EAAE;MACvBI,OAAO,CAAC2B,eAAe,GAAG,CAAC;IAC7B;IACA,IAAI,IAAI,CAAC9B,gBAAgB,EAAE;MACzBI,UAAU,CAAC2B,WAAW,GAAG,IAAI;MAC7B5B,OAAO,CAAC6B,mBAAmB,GAAG,CAAC;IACjC;IACA,IAAI,IAAI,CAAClD,WAAW,EAAE;MACpBqB,OAAO,CAAC8B,YAAY,GAAG,CAAC;IAC1B;IACA;IACA,IAAI,CAAC9B,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,UAAU,GAAGA,UAAU;EAC9B;EAEAv5B,cAAcA,CAACp9C,MAAM,EAAE;IACrB,IAAI,OAAOA,MAAM,KAAK,WAAW,EAAE;MACjC;IACF;IAEA,KAAK,MAAM1f,GAAG,IAAI0f,MAAM,EAAE;MACxB,IAAI,CAACA,MAAM,CAACrd,cAAc,CAACrC,GAAG,CAAC,EAAE;QAC/B;MACF;MAEA,IAAI,IAAI,CAAC60F,WAAW,CAAC70F,GAAG,CAAC,YAAY6+B,+FAAW,EAAE;QAChD,IAAI,CAACg2D,WAAW,CAAC70F,GAAG,CAAC,GAAG0f,MAAM,CAAC1f,GAAG,CAAC,CAACy9B,KAAK,CAAC,CAAC;MAC7C,CAAC,MAAM;QACL,IAAI,CAACo3D,WAAW,CAAC70F,GAAG,CAAC,GAAG0f,MAAM,CAAC1f,GAAG,CAAC;MACrC;IACF;EACF;EAEAy9B,KAAKA,CAAC06D,OAAO,EAAE;IACb,IAAI,CAACA,OAAO,EAAE;MACZ,OAAO,KAAK,CAAC16D,KAAK,CAAC,CAAC;IACtB;IACA,OAAO,IAAI,CAAC64D,cAAc,CAAC,CAAC;EAC9B;EAEA8B,cAAcA,CAAA,EAAG;IACf,MAAM92F,IAAI,GAAG,IAAI;IAEjBszF,eAAe,CAACjiF,OAAO,CAAEnP,CAAC,IAAK;MAC7B,IAAIlC,IAAI,CAACu1D,QAAQ,CAACx0D,cAAc,CAACmB,CAAC,CAAC,EAAE;QACnC,IAAIlC,IAAI,CAACuzF,WAAW,CAACrxF,CAAC,CAAC,YAAYq7B,+FAAW,IACrCv9B,IAAI,CAACuzF,WAAW,CAACrxF,CAAC,CAAC,YAAYq7B,iGAAa,EAAE;UACrDv9B,IAAI,CAACu1D,QAAQ,CAACrzD,CAAC,CAAC,CAACsb,KAAK,GAAGxd,IAAI,CAACuzF,WAAW,CAACrxF,CAAC,CAAC,CAACi6B,KAAK,CAAC,CAAC;QACtD,CAAC,MAAM;UACLn8B,IAAI,CAACu1D,QAAQ,CAACrzD,CAAC,CAAC,CAACsb,KAAK,GAAGxd,IAAI,CAACuzF,WAAW,CAACrxF,CAAC,CAAC;QAC9C;MACF;IACF,CAAC,CAAC;EACJ;AACF;AAEAwxF,YAAY,CAAC5yF,SAAS,CAACyyF,WAAW,GAAGA,WAAW;AAEhD,2DAAeG,YAAY;;AC9XwB;AAEnD,6BAAe,SAAS,WAACqD,UAAU,EAAE;EACnC,MAAMC,aAAa,SAASD,UAAU,CAAC;IACrC1uF,WAAWA,CAAA,EAAU;MACnB,KAAK,CAAC,GAAA1H,SAAO,CAAC;MACd,IAAI,CAACs2F,cAAc,GAAGD,aAAa,CAACl2F,SAAS,CAACm2F,cAAc;IAC9D;IAEAA,cAAcA,CAAC/F,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,EAAE6D,QAAQ,EAAE99D,QAAQ,EAAEs8D,KAAK,EAAE;MACjE,IAAI,CAACo+B,eAAe,CAACjG,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,EAAE6D,QAAQ,EAAE99D,QAAQ,EAAEs8D,KAAK,CAAC;MACxE,IAAI,CAACq+B,OAAO,CAAC,CAAC;IAChB;IAEAD,eAAeA,CAAA,EAAG,CAClB;IAEAC,OAAOA,CAAA,EAAG;MACR,MAAM;QAAE36F;MAAS,CAAC,GAAG,IAAI;MACzB,IAAI,CAACA,QAAQ,EAAE;QACb;MACF;MAEA,IAAIA,QAAQ,YAAYi3F,oBAAY,EAAE;QACpCj3F,QAAQ,CAACq6F,cAAc,CAAC,CAAC;MAC3B;IACF;EACF;EAEA,OAAOE,aAAa;AACtB;;AC9B+B;AACO;AAEtC,MAAMviC,IAAI,GAAG4iC,UAAU,CAAC95D,8FAAU,CAAC;AAEnC,MAAM+5D,WAAW,SAAS7iC,IAAI,CAAC;EAC7BpsD,WAAWA,CAAA,EAAU;IACnB,KAAK,CAAC,GAAA1H,SAAO,CAAC;IACd,IAAI,CAAC42F,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI;EAC3B;EAEAL,eAAeA,CAACjG,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,EAAE+gC,SAAS,EAAEtjC,SAAS,EAAEujC,MAAM,EAAE;IACrEjjC,IAAI,CAAC3zD,SAAS,CAACq2F,eAAe,CAACz2F,IAAI,CAAC,IAAI,EAAEwwF,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,CAAC;IAClE,MAAM;MAAEj6D;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAACA,QAAQ,EAAE;MACb;IACF;IAEA,IAAIA,QAAQ,CAAC84D,QAAQ,CAACq9B,kBAAkB,EAAE;MACxC;MACA;MACA,IAAI,CAAC+E,eAAe,CAACC,gBAAgB,CAAClhC,MAAM,CAACY,kBAAkB,EAAE,IAAI,CAACzD,WAAW,CAAC;MAClF;MACAp3D,QAAQ,CAAC84D,QAAQ,CAACq9B,kBAAkB,CAACp1E,KAAK,CAACjR,IAAI,CAAC,IAAI,CAACorF,eAAe,CAAC,CAAC7jC,MAAM,CAAC,CAAC;MAC9Er3D,QAAQ,CAAC84D,QAAQ,CAACo9B,cAAc,CAACn1E,KAAK,GAAGk5C,MAAM,CAACW,IAAI;MACpD56D,QAAQ,CAACo7F,kBAAkB,GAAG,IAAI;IACpC;EACF;AACF;AAEA,yDAAeP,WAAW;;AC/BK;AACO;AAEtC,MAAM7iC,iBAAI,GAAG4iC,UAAU,CAAC95D,8FAAU,CAAC;AAEnC,MAAMu6D,YAAY,SAASrjC,iBAAI,CAAC;EAC9BpsD,WAAWA,CAACkyD,QAAQ,EAAE99D,QAAQ,EAAE;IAC9B,KAAK,CAAC89D,QAAQ,EAAE99D,QAAQ,CAAC;IACzB,IAAI,CAAC86F,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI;EAC3B;EAEA,OAAOO,SAAS,UAAG,IAAIx6D,iGAAa,CAAC,CAAC;EAEtC,OAAOgN,OAAO,UAAG,IAAIhN,iGAAa,CAAC,CAAC;EAEpC,OAAOy6D,UAAU,UAAG,IAAIz6D,iGAAa,CAAC,CAAC;EAEvC45D,eAAeA,CAACjG,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,EAAE;IACvCjC,iBAAI,CAAC3zD,SAAS,CAACq2F,eAAe,CAACz2F,IAAI,CAAC,IAAI,EAAEwwF,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,CAAC;IAElE,MAAM+C,GAAG,GAAG,IAAI,CAACc,QAAQ;IACzB,MAAM;MAAE99D;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAACg9D,GAAG,CAACrvC,KAAK,IAAI,CAAC3tB,QAAQ,CAAC82F,WAAW,EAAE;MACvC;IACF;IAEA,MAAMC,SAAS,GAAG,GAAG;IAErB,MAAMyE,SAAS,GAAGH,YAAY,CAACE,UAAU;IACzC,MAAME,QAAQ,GAAGJ,YAAY,CAACC,SAAS;IACvC,MAAM16F,MAAM,GAAGy6F,YAAY,CAACvtD,OAAO;IAEnC0tD,SAAS,CAACL,gBAAgB,CAAC,IAAI,CAAC/jC,WAAW,EAAE6C,MAAM,CAACY,kBAAkB,CAAC;IACvE,MAAMlrD,CAAC,GAAG8rF,QAAQ,CAACC,mBAAmB,CAACF,SAAS,EAAE,CAAC,CAAC,CAACjjG,MAAM,CAAC,CAAC;IAC7DqI,MAAM,CAACkP,IAAI,CAACktD,GAAG,CAACprB,cAAc,CAAChxC,MAAM,CAAC;IAEtC,IAAI,CAAC+6F,YAAY,CAAC/6F,MAAM,CAAC;IACzBZ,QAAQ,CAAC82F,WAAW,CAACd,UAAU,GAAG/7B,MAAM,CAACl+C,QAAQ,CAACzH,CAAC,GAAG1T,MAAM,CAAC0T,CAAC,GAC1D3E,CAAC,IAAIonF,SAAS,GAAG/5B,GAAG,CAACprB,cAAc,CAACz2B,MAAM,CAAC;EACjD;AACF;AAEA,0DAAekgF,YAAY;;AC3CJ;AACQ;AACU;AACT;AAEhC,MAAMO,QAAQ,SAAS96D,+FAAW,CAAC;EACjCl1B,WAAWA,CAACkyD,QAAQ,EAAEpG,SAAS,EAAE;IAC/B,KAAK,CAAC,CAAC;IACP,IAAI,CAACoG,QAAQ,GAAGA,QAAQ;IAExB,MAAMv6D,IAAI,GAAG,IAAI;IACjBA,IAAI,CAACs4F,WAAW,GAAG,KAAK;IACxB,IAAI,CAAC/9B,QAAQ,CAACnkD,gBAAgB,CAAC,QAAQ,EAAE,MAAM;MAC7CpW,IAAI,CAAC2b,MAAM,CAAC,CAAC;IACf,CAAC,CAAC;EACJ;EAEA2rB,IAAIA,CAAA,EAAG;IACL,MAAM;MAAE+qB;IAAS,CAAC,GAAG,IAAI;IACzB,KAAK,IAAIt1D,CAAC,GAAGs1D,QAAQ,CAACr9D,MAAM,GAAG,CAAC,EAAE+H,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;MAC7C,IAAI,CAACpB,MAAM,CAAC02D,QAAQ,CAACt1D,CAAC,CAAC,CAAC;IAC1B;IAEA,MAAM;MAAE0zF,KAAK;MAAEI;IAAS,CAAC,GAAG,IAAI,CAACt2B,QAAQ;IACzC,KAAK,IAAIx9D,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGyzF,KAAK,CAACz7F,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC5C,MAAMw7F,OAAO,GAAG9H,KAAK,CAAC1zF,CAAC,CAAC;MACxB,IAAI,CAACw7F,OAAO,EAAE;QACZ;MACF;MACA,MAAMrrC,IAAI,GAAGpyD,KAAK,CAAC0sB,gBAAgB,CAAC+wE,OAAO,CAAC;MAC5C,MAAMC,KAAK,GAAG,IAAIlnC,eAAW,CAACpE,IAAI,CAAC;MACnCsrC,KAAK,CAAC3H,QAAQ,GAAGtyF,wGAAO,CAACsyF,QAAQ,CAAC;MAClC,MAAMh4E,EAAE,GAAG2/E,KAAK,CAAC/mC,UAAU,CAAC,CAAC;MAC7B54C,EAAE,CAACI,KAAK,CAACw/E,UAAU,GAAG,SAAS;MAC/BD,KAAK,CAACr8B,MAAM,GAAGo8B,OAAO;MACtB,IAAI,CAACr6F,GAAG,CAACs6F,KAAK,CAAC;IACjB;IACA,IAAI,CAACF,WAAW,GAAG,IAAI;EACzB;EAEA38E,MAAMA,CAAA,EAAG;IACP,MAAM89C,GAAG,GAAG,IAAI,CAACc,QAAQ;IACzB,IAAI,CAACd,GAAG,CAAC1I,WAAW,EAAE;MACpB;IACF;IACA,MAAM;MAAEsB;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAAC,IAAI,CAACimC,WAAW,EAAE;MACrB,IAAI,CAAChxD,IAAI,CAAC,CAAC;IACb;IAEA,KAAK,IAAIvqC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmL,KAAK,GAAGmqD,QAAQ,CAACt1D,CAAC,CAAC;MACzB,MAAMmwD,IAAI,GAAGhlD,KAAK,CAACi0D,MAAM;MACzBj0D,KAAK,CAACsQ,QAAQ,CAACjM,IAAI,CAAC2gD,IAAI,CAACtlC,QAAQ,CAAC;MAClC1f,KAAK,CAAC2oF,QAAQ,CAAC/4E,KAAK,GAAGo1C,IAAI,CAACzvD,IAAI,CAACqa,KAAK;MACtC5P,KAAK,CAAC2oF,QAAQ,CAAC52E,UAAU,GAAGizC,IAAI,CAACzvD,IAAI,CAACwc,UAAU;IAClD;EACF;AACF;AAEA,sDAAeo+E,QAAQ;;AC5DQ;AACO;AAEtC,MAAM5jC,eAAI,GAAG4iC,UAAU,CAAC95D,8FAAU,CAAC;AAEnC,MAAMm7D,UAAU,SAASjkC,eAAI,CAAC;EAC5BpsD,WAAWA,CAACkyD,QAAQ,EAAE99D,QAAQ,EAAE;IAC9B,KAAK,CAAC89D,QAAQ,EAAE99D,QAAQ,CAAC;IACzB,IAAI,CAAC86F,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI;EAC3B;AACF;AAEA,wDAAekB,UAAU;;ACbM;AACO;AAEtC,MAAMjkC,kBAAI,GAAG4iC,UAAU,CAAC95D,8FAAU,CAAC;AACnC,MAAMo7D,SAAS,GAAG,IAAIp7D,iGAAa,CAAC,CAAC;AAErC,MAAMq7D,aAAa,SAASnkC,kBAAI,CAAC;EAC/B0iC,eAAeA,CAACjG,QAAQ,EAAEgG,KAAK,EAAExgC,MAAM,EAAE+gC,SAAS,EAAEtjC,SAAS,EAAEujC,MAAM,EAAE;IACrE,MAAM;MAAEj7F;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAACA,QAAQ,CAAC82F,WAAW,EAAE;MACzB;IACF;IAEA92F,QAAQ,CAAC82F,WAAW,CAACP,aAAa,CAACzmF,IAAI,CAACmqD,MAAM,CAACmiC,gBAAgB,CAAC,CAAC/kC,MAAM,CAAC,CAAC;IACzEo9B,QAAQ,CAACl1C,OAAO,CAAC28C,SAAS,CAAC;IAC3Bl8F,QAAQ,CAAC82F,WAAW,CAACN,QAAQ,CAAC73F,GAAG,CAACu9F,SAAS,CAAChhF,KAAK,EAAEghF,SAAS,CAAC3+E,MAAM,CAAC;EACtE;AACF;AAEA,2DAAe4+E,aAAa;;ACnBG;AACO;AAEtC,MAAMnkC,kBAAI,GAAG4iC,UAAU,CAAC95D,8FAAU,CAAC;AAEnC,MAAMu7D,aAAa,SAASrkC,kBAAI,CAAC;EAC/BpsD,WAAWA,CAAA,EAAU;IACnB,KAAK,CAAC,GAAA1H,SAAO,CAAC;IACd,IAAI,CAAC42F,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,aAAa,GAAG,IAAI;EAC3B;AACF;AAEA,2DAAesB,aAAa;;ACbG;AACO;AACE;AACE;AACR;AACI;AACM;AACA;AAE5C,6CAAe;EACbC,QAAQ,EAAEjB,mBAAY;EACtBkB,OAAO,EAAE1B,kBAAW;EACpB2B,IAAI,EAAEZ,eAAQ;EACd/9B,IAAI,EAAE+8B,UAAU,CAAC95D,8FAAU,CAAC;EAC5B88B,YAAY,EAAEg9B,UAAU,CAAC95D,sGAAkB,CAAC;EAC5Ck3B,IAAI,EAAEikC,iBAAU;EAChBE,aAAa;EACbM,SAAS,EAAEJ,oBAAaA;AAC1B,CAAC;;AClBiD;AACpB;AACoC;AAElE,SAASO,YAAYA,CAAC77F,MAAM,EAAE+3D,QAAQ,EAAE;EACtC,OAAO,UAAU94D,QAAQ,EAAE;IACzBA,QAAQ,CAACy+D,SAAS,CAAC19D,MAAM,CAAC;IAC1Bf,QAAQ,CAAC++D,cAAc,CAACjG,QAAQ,CAAC;EACnC,CAAC;AACH;AAEA,SAAS+jC,yBAAyBA,CAACh6B,WAAW,EAAEgG,SAAS,EAAE;EACzD,SAASi0B,QAAQA,CAACx3F,CAAC,EAAE6N,CAAC,EAAE;IACtB,OAAO,IAAIupF,UAAU,CAACjxB,4BAA4B,CAACnmE,CAAC,EAAE6N,CAAC,EAAE0vD,WAAW,EAAEgG,SAAS,CAAC;EAClF;EACA,OAAO;IACLi0B,QAAQ;IACR36F,MAAM,EAAE0gE,WAAW,GAAG85B,MAAM,CAACJ,OAAO,GAAGI,MAAM,CAACF,SAAS;IACvDM,YAAY,EAAEH,YAAY,CAAC;MACzBzF,eAAe,EAAE,IAAI;MACrBC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE,IAAI;MAChBC,cAAc,EAAE,IAAI;MACpBE,cAAc,EAAE30B;IAClB,CAAC;EACH,CAAC;AACH;AAEA,SAASm6B,6BAA6BA,CAAChgC,GAAG,EAAEigC,YAAY,EAAE;EACxD,MAAMC,UAAU,GAAGlgC,GAAG,CAAC34D,SAAS,YAAY2qE,6BAAkB;EAC9D,MAAMxhD,SAAS,GAAGyvE,YAAY,CAACzvE,SAAS,IAAI,CAAC;EAC7C,OAAO;IACLsvE,QAAQ,EAAE9/B,GAAG;IACb76D,MAAM,EAAE+6F,UAAU,GAAGP,MAAM,CAACR,aAAa,GAAGQ,MAAM,CAAC/+B,YAAY;IAC/Dm/B,YAAY,EAAEH,YAAY,CAAC;MACzB/9B,MAAM,EAAE,KAAK;MACbu4B,SAAS,EAAE,IAAI;MACfE,cAAc,EAAE,IAAI;MACpBU,SAAS,EAAEkF;IACb,CAAC,EAAE;MACD1vE;IACF,CAAC;EACH,CAAC;AACH;AAEA,SAAS2vE,uBAAuBA,CAACC,QAAQ,EAAE;EACzC,OAAO;IACLN,QAAQ,EAAEM,QAAQ;IAClBj7F,MAAM,EAAEw6F,MAAM,CAAC3kC,IAAI;IACnB+kC,YAAY,EAAEH,YAAY,CAAC;MACzBxF,SAAS,EAAE,IAAI;MACfE,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;AACH;AAEA,SAAS+F,2BAA2BA,CAACD,QAAQ,EAAEE,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;EAC3E,MAAMM,WAAW,GAAG;IAClBzvE,SAAS,EAAE,CAAC,CAACmvE,YAAY,CAACnvE,SAAS;IACnC2pE,WAAW,EAAEp2F,QAAQ,CAAC2d,GAAG,CAACgU,qBAAqB;IAC/CrF,KAAK,EAAEsvE,YAAY,CAACtvE;EACtB,CAAC;EACD,OAAO;IACLmvE,QAAQ,EAAEM,QAAQ;IAClBj7F,MAAM,EAAEw6F,MAAM,CAACL,QAAQ;IACvBS,YAAY,EAAEH,YAAY,CAAC;MACzBxF,SAAS,EAAE,IAAI;MACfE,cAAc,EAAE,KAAK;MACrBxpE,SAAS,EAAEyvE,WAAW,CAACzvE,SAAS;MAChC2pE,WAAW,EAAE8F,WAAW,CAAC9F,WAAW;MACpC9pE,KAAK,EAAE4vE,WAAW,CAAC5vE;IACrB,CAAC;EACH,CAAC;AACH;AAEA,MAAM6vE,WAAW,CAAC;EAChB,OAAOC,aAAaA,CAACH,IAAI,EAAEj8F,QAAQ,EAAE;IACnC,MAAMwhE,WAAW,GAAGxhE,QAAQ,CAAC2d,GAAG,CAAC+T,QAAQ;IACzC,SAAS+pE,QAAQA,CAACx3F,CAAC,EAAE6N,CAAC,EAAE;MACtB,OAAO,IAAIupF,UAAU,CAACh6B,wBAAwB,CAACp9D,CAAC,EAAE6N,CAAC,EAAE0vD,WAAW,CAAC;IACnE;IACA,OAAO;MACLi6B,QAAQ;MACR36F,MAAM,EAAE0gE,WAAW,GAAG85B,MAAM,CAACJ,OAAO,GAAGI,MAAM,CAACF,SAAS;MACvDM,YAAY,EAAEH,YAAY,CAAC;QACzB1F,YAAY,EAAE,IAAI;QAClBE,SAAS,EAAE,IAAI;QACfE,cAAc,EAAE,IAAI;QACpBC,YAAY,EAAE10B;MAChB,CAAC;IACH,CAAC;EACH;EAEA,OAAO66B,uBAAuBA,CAACC,KAAK,EAAEC,SAAS,EAAE;IAC/C,OAAOf,yBAAyB,CAAC,KAAK,EAAE,KAAK,CAAC;EAChD;EAEA,OAAOgB,iBAAiBA,CAACP,IAAI,EAAEj8F,QAAQ,EAAE;IACvC,OAAOw7F,yBAAyB,CAACx7F,QAAQ,CAAC2d,GAAG,CAAC+T,QAAQ,EAAE,IAAI,CAAC;EAC/D;EAEA,OAAO+qE,aAAaA,CAACH,KAAK,EAAEC,SAAS,EAAEX,YAAY,EAAE;IACnD,OAAOD,6BAA6B,CAACN,UAAU,CAACxrB,qBAAqB,EAAE+rB,YAAY,CAAC;EACtF;EAEA,OAAOc,aAAaA,CAACJ,KAAK,EAAEC,SAAS,EAAEX,YAAY,EAAE;IACnD,OAAOD,6BAA6B,CAACN,UAAU,CAACjrB,aAAa,EAAEwrB,YAAY,CAAC;EAC9E;EAEA,OAAOe,oBAAoBA,CAACL,KAAK,EAAEC,SAAS,EAAE;IAC5C,OAAOT,uBAAuB,CAACT,UAAU,CAACnvB,uBAAuB,CAAC;EACpE;EAEA,OAAO0wB,kBAAkBA,CAACN,KAAK,EAAEC,SAAS,EAAEX,YAAY,EAAE;IACxD,OAAOD,6BAA6B,CAACN,UAAU,CAAC7rB,oBAAoB,EAAEosB,YAAY,CAAC;EACrF;EAEA,OAAOiB,kBAAkBA,CAACZ,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IACtD,OAAOI,2BAA2B,CAACX,UAAU,CAAC/f,iBAAiB,EAAE2gB,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;EAChG;EAEA,OAAOkB,oBAAoBA,CAACb,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IACxD,OAAOI,2BAA2B,CAACX,UAAU,CAAC/V,sBAAsB,EAAE2W,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;EACrG;EAEA,OAAOmB,YAAYA,CAACd,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IAChD,OAAOI,2BAA2B,CAACX,UAAU,CAACrQ,oBAAoB,EAAEiR,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;EACnG;EAEA,OAAOoB,YAAYA,CAACV,KAAK,EAAEC,SAAS,EAAE;IACpC,OAAO;MACLd,QAAQ,EAAEJ,UAAU,CAAC3I,cAAc;MACnC5xF,MAAM,EAAEw6F,MAAM,CAACH,IAAI;MACnBO,YAAYA,CAAA,EAAG,CACf;IACF,CAAC;EACH;AACF;AAEA,yDAAeS,WAAW;;AC3IK;AACI;AAEnC,MAAMc,cAAc,SAASx9D,kGAAc,CAAC;EAC1C,OAAOy9D,cAAc,UAAG,IAAIz9D,iGAAa,CAAC,CAAC;EAE3C,OAAO09D,IAAI,UAAG,IAAI19D,6FAAS,CAAC,CAAC;EAE7Bl1B,WAAWA,CAACkyD,QAAQ,EAAE4gC,SAAS,EAAE1+F,QAAQ,EAAE2+F,UAAU,EAAE;IACrD,KAAK,CAAC,CAAC;IACP,IAAI,CAAC3D,SAAS,GAAGl9B,QAAQ;IACzB,IAAI,CAAC8gC,UAAU,GAAGF,SAAS;IAC3B,MAAMG,GAAG,GAAG7+F,QAAQ,CAACu4F,cAAc,CAAC,CAAC;IACrCmG,SAAS,CAAC3B,YAAY,CAAC8B,GAAG,CAAC;IAC3B,IAAI,CAACnnC,SAAS,GAAGmnC,GAAG;IACpB,IAAI,CAACC,WAAW,GAAGH,UAAU,CAACpmG,MAAM,GAAG,CAAC,GAAGomG,UAAU,GAAG,CAAC,IAAI79D,iGAAa,CAAC,CAAC,CAAC;IAC7E,MAAM67D,MAAM,GAAG,IAAI,CAACoC,aAAa,CAACjhC,QAAQ,CAAC;IAC3C,KAAK,IAAIx9D,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGo8F,MAAM,CAACpkG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAACmB,GAAG,CAACk7F,MAAM,CAACr8F,CAAC,CAAC,CAAC;IACrB;EACF;EAEAk1D,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAMiM,GAAG,GAAG28B,cAAc,CAACE,IAAI;IAC/B,MAAMQ,aAAa,GAAGV,cAAc,CAACC,cAAc;IACnD,MAAM;MAAE3oC;IAAS,CAAC,GAAG,IAAI;IACzB+L,GAAG,CAAC7xD,IAAI,CAAC2lD,SAAS,CAACkM,GAAG,CAAC;IACvB,KAAK,IAAIrhE,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmL,KAAK,GAAGmqD,QAAQ,CAACt1D,CAAC,CAAC;MAEzB,IAAI,CAAC0/D,QAAQ,CAAC/B,oBAAoB,CAACxyD,KAAK,CAAC,EAAE;QACzC;MACF;MAEAA,KAAK,CAACurD,iBAAiB,CAAC,CAAC;MACzB,MAAMmX,GAAG,GAAG1iE,KAAK,CAAC2rD,WAAW;MAC7B4nC,aAAa,CAAClvF,IAAI,CAACq+D,GAAG,CAAC,CAAC9W,MAAM,CAAC,CAAC;MAChC5B,SAAS,CAACkM,GAAG,CAAC7xD,IAAI,CAAC6xD,GAAG,CAAC,CAACzuB,YAAY,CAAC8rD,aAAa,CAAC;MACnD,MAAMC,eAAe,GAAG,EAAE;MAC1B,IAAI,CAACjE,SAAS,CAACxlC,OAAO,CAACC,SAAS,EAAEwpC,eAAe,CAAC;MAElD,KAAK,IAAI/qF,CAAC,GAAG,CAAC,EAAEgrF,OAAO,GAAGD,eAAe,CAAC1mG,MAAM,EAAE2b,CAAC,GAAGgrF,OAAO,EAAE,EAAEhrF,CAAC,EAAE;QAClE,MAAM+tD,MAAM,GAAGg9B,eAAe,CAAC/qF,CAAC,CAAC;QACjC,IAAI+tD,MAAM,CAAC7hB,KAAK,EAAE;UAChB6hB,MAAM,CAAC7hB,KAAK,CAAClN,YAAY,CAACi7B,GAAG,CAAC;UAC9BlM,MAAM,CAACJ,QAAQ,GAAGF,GAAG,CAACG,MAAM,CAACjjC,UAAU,CAACojC,MAAM,CAAC7hB,KAAK,CAAC;QACvD;QACA6hB,MAAM,CAACv5C,MAAM,GAAGjd,KAAK;QACrBiqD,UAAU,CAACA,UAAU,CAACn9D,MAAM,CAAC,GAAG0pE,MAAM;MACxC;IACF;IACAxM,SAAS,CAACkM,GAAG,CAAC7xD,IAAI,CAAC6xD,GAAG,CAAC;EACzB;EAEA3L,SAASA,CAAC4N,YAAY,EAAE;IACtB,MAAMu7B,IAAI,GAAG,IAAI,CAACnE,SAAS,CAAChlC,SAAS,CAAC4N,YAAY,CAAC;IACnD,MAAM/1C,MAAM,GAAG,EAAE;IACjB,IAAIunB,MAAM,GAAG,CAAC;IAEd,KAAK,IAAI90C,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG4+F,IAAI,CAAC5mG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC3C,MAAMq8F,MAAM,GAAG,IAAI,CAACoC,aAAa,CAACI,IAAI,CAAC7+F,CAAC,CAAC,CAAC;MAC1C,KAAK,IAAI4T,CAAC,GAAG,CAAC,EAAEkrF,OAAO,GAAGzC,MAAM,CAACpkG,MAAM,EAAE2b,CAAC,GAAGkrF,OAAO,EAAE,EAAElrF,CAAC,EAAE;QACzD2Z,MAAM,CAACunB,MAAM,EAAE,CAAC,GAAGunD,MAAM,CAACzoF,CAAC,CAAC;MAC9B;IACF;IAEA,OAAO2Z,MAAM;EACf;EAEAkxE,aAAaA,CAACjhC,QAAQ,EAAE;IACtB,MAAM6gC,UAAU,GAAG,IAAI,CAACG,WAAW;IACnC,MAAM9mC,IAAI,GAAG,IAAI,CAAC4mC,UAAU,CAACz8F,MAAM;IACnC,MAAMnC,QAAQ,GAAG,IAAI,CAAC03D,SAAS;IAC/B,MAAMilC,MAAM,GAAG,EAAE;IACjB,KAAK,IAAIr8F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGo+F,UAAU,CAACpmG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MACjD,MAAMwkE,IAAI,GAAG,IAAI9M,IAAI,CAAC8F,QAAQ,EAAE99D,QAAQ,CAAC;MACzC8kE,IAAI,CAAC5xB,YAAY,CAACyrD,UAAU,CAACr+F,CAAC,CAAC,CAAC;MAChCq8F,MAAM,CAACr8F,CAAC,CAAC,GAAGwkE,IAAI;IAClB;IAEA,OAAO63B,MAAM;EACf;AACF;AAEA,4DAAe2B,cAAc;;ACpFO;AACqB;AAEzD,SAASe,OAAOA,CAACC,IAAI,EAAEv7F,IAAI,EAAE;EAC3B,MAAMhD,MAAM,GAAG,CAACu+F,IAAI,CAAC,CAACh9F,MAAM,CAACyB,IAAI,CAAC;EAClC,OAAOu7F,IAAI,CAAChgF,IAAI,CAAC,GAAGve,MAAM,CAAC;AAC7B;AAEA,MAAMw+F,SAAS,SAASjqC,WAAO,CAAC;EAC9B1pD,WAAWA,CAAC8yF,SAAS,EAAEc,SAAS,EAAE39F,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,EAAE;IACrF,KAAK,CAAC,CAAC;IACP,IAAI,IAAI,CAAC4L,WAAW,KAAK2zF,SAAS,EAAE;MAClC,MAAM,IAAIl8F,KAAK,CAAC,qCAAqC,CAAC;IACxD;IACA,IAAI,CAACo8F,UAAU,GAAGD,SAAS;IAC3B,IAAI,CAACE,KAAK,GAAG/9F,IAAI;IACjB,IAAI,CAACg+F,QAAQ,GAAG99F,OAAO;IACvB,IAAI,CAAC+9F,UAAU,GAAGJ,SAAS,CAACK,MAAM;IAClC,IAAI,CAACC,eAAe,GAAGhzE,cAAc;IACrC,IAAI,CAACizE,IAAI,GAAG,KAAKV,OAAO,CAACX,SAAS,CAAC5B,QAAQ,EAAE,IAAI,CAACkD,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC;IACpE,IAAI,CAACC,KAAK,GAAG,IAAI3B,qBAAc,CAAC,IAAI,CAACyB,IAAI,EAAErB,SAAS,EAAE1+F,QAAQ,EAAE2+F,UAAU,CAAC;IAC3E,IAAI,CAACl9F,GAAG,CAAC,IAAI,CAACw+F,KAAK,CAAC;IACpB,IAAI,CAAC/8C,MAAM,CAAC,CAAC;EACf;EAEA88C,YAAYA,CAAA,EAAG;IACb,MAAM,IAAI38F,KAAK,CAAC,wDAAwD,CAAC;EAC3E;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE2yD,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzBA,SAAS,GAAGA,SAAS,KAAK/4C,SAAS,GAAG+4C,SAAS,GAAG,KAAK;IACvD,MAAMoqC,UAAU,GAAG,IAAI,CAACC,eAAe,CAAC9kE,IAAI,EAAEy6B,SAAS,CAAC;IACxD,IAAIoqC,UAAU,CAAC3nG,MAAM,KAAK,CAAC,EAAE;MAC3B,OAAO,EAAE;IACX;IACA,OAAO,IAAI,CAAC0nG,KAAK,CAACjqC,SAAS,CAACkqC,UAAU,CAAC;EACzC;EAEAE,oBAAoBA,CAAC/kE,IAAI,EAAEta,KAAK,EAAE+0C,SAAS,EAAE;IAC3C,MAAMoqC,UAAU,GAAG,IAAI,CAACC,eAAe,CAAC9kE,IAAI,EAAEy6B,SAAS,CAAC;IACxD,IAAIoqC,UAAU,CAAC3nG,MAAM,KAAK,CAAC,EAAE;MAC3B;IACF;IACA,IAAI,CAACwnG,IAAI,CAACp8B,UAAU,CAACu8B,UAAU,EAAEn/E,KAAK,CAAC;EACzC;EAEA80C,YAAYA,CAACx6B,IAAI,EAAEy6B,SAAS,EAAE;IAC5BA,SAAS,GAAGA,SAAS,KAAK/4C,SAAS,GAAG+4C,SAAS,GAAG,IAAI;IACtD,IAAI,CAACsqC,oBAAoB,CAAC/kE,IAAI,EAAE,GAAG,EAAEy6B,SAAS,CAAC;EACjD;EAEAC,aAAaA,CAAC16B,IAAI,EAAEy6B,SAAS,EAAE;IAC7BA,SAAS,GAAGA,SAAS,KAAK/4C,SAAS,GAAG+4C,SAAS,GAAG,IAAI;IACtD,IAAI,CAACsqC,oBAAoB,CAAC/kE,IAAI,EAAE,GAAG,EAAEy6B,SAAS,CAAC;EACjD;AACF;AAEA,uDAAeypC,SAAS;;AChEY;AAEpC,MAAMc,UAAU,SAASd,gBAAS,CAAC;EACjC/pC,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAM;MAAEr0B;IAAM,CAAC,GAAG,IAAI,CAACo+D,UAAU;IACjC,MAAMx9B,MAAM,GAAG,EAAE;IACjB,IAAI,CAACg+B,KAAK,CAACzqC,OAAO,CAACC,SAAS,EAAEwM,MAAM,CAAC;IACrC,MAAMq+B,QAAQ,GAAG,IAAI,CAACV,UAAU;IAChC;IACA,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG0hE,MAAM,CAAC1pE,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAAC2hE,MAAM,CAAC3hE,CAAC,CAAC,CAACgE,cAAc,CAAC,UAAU,CAAC,EAAE;QACzC;MACF;MACA,MAAMk2E,OAAO,GAAG8lB,QAAQ,CAACr+B,MAAM,CAAC3hE,CAAC,CAAC,CAAC4hE,QAAQ,CAAC;MAC5C,IAAIsY,OAAO,GAAGn5C,KAAK,CAAC9oC,MAAM,EAAE;QAC1B0pE,MAAM,CAAC3hE,CAAC,CAAC,CAACksB,IAAI,GAAG6U,KAAK,CAACm5C,OAAO,CAAC;QAC/B9kB,UAAU,CAAChxD,IAAI,CAACu9D,MAAM,CAAC3hE,CAAC,CAAC,CAAC;MAC5B;IACF;EACF;EAEA6/F,eAAeA,CAAC9kE,IAAI,EAAE;IACpB,MAAM6kE,UAAU,GAAG,EAAE;IACrB,MAAM;MAAE7+D;IAAM,CAAC,GAAG,IAAI,CAACo+D,UAAU;IACjC,MAAMa,QAAQ,GAAG,IAAI,CAACV,UAAU;IAChC,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+/F,QAAQ,CAAC/nG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMksB,IAAI,GAAG6U,KAAK,CAACi/D,QAAQ,CAAChgG,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACksB,IAAI,CAAC6O,IAAI,GAAGA,IAAI,MAAM,CAAC,EAAE;QAC5B6kE,UAAU,CAACx7F,IAAI,CAACpE,CAAC,CAAC;MACpB;IACF;IACA,OAAO4/F,UAAU;EACnB;AACF;AAEA,wDAAeG,UAAU;;ACnCa;AAEtC,MAAME,gBAAgB,SAASF,iBAAU,CAAC;EACxCL,YAAYA,CAAA,EAAG;IACb,OAAO,CAAC,IAAI,CAACP,UAAU,CAACI,MAAM,CAACtnG,MAAM,EAAE,IAAI,CAACunG,eAAe,CAAC;EAC9D;EAEA58C,MAAMA,CAAA,EAAG;IACP,MAAMo9C,QAAQ,GAAG,IAAI,CAACb,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEx+D,KAAK;MAAE31B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IACzC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,KAAK,IAAIz/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+/F,QAAQ,CAAC/nG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMksB,IAAI,GAAG6U,KAAK,CAACi/D,QAAQ,CAAChgG,CAAC,CAAC,CAAC;MAC/B08D,GAAG,CAACiG,OAAO,CAAC3iE,CAAC,EAAEksB,IAAI,CAACzQ,QAAQ,EAAEpa,IAAI,CAAC6+F,cAAc,CAACh0E,IAAI,CAAC,CAAC;MACxDwwC,GAAG,CAACsG,QAAQ,CAAChjE,CAAC,EAAEuB,OAAO,CAAC4+F,YAAY,CAACj0E,IAAI,EAAE9gB,MAAM,CAAC,CAAC;IACrD;IACAsxD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEA1I,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;IACA,MAAMm2D,QAAQ,GAAG,IAAI,CAACb,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEx+D;IAAM,CAAC,GAAG,IAAI,CAACo+D,UAAU;IACjC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAMe,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IACvD,MAAMm7D,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,KAAK,IAAIz/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+/F,QAAQ,CAAC/nG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMksB,IAAI,GAAG6U,KAAK,CAACi/D,QAAQ,CAAChgG,CAAC,CAAC,CAAC;MAC/B08D,GAAG,CAACiG,OAAO,CAAC3iE,CAAC,EAAE6pC,SAAS,CAACpM,UAAU,CAACuiE,QAAQ,CAAChgG,CAAC,CAAC,CAAC,EAAEqB,IAAI,CAAC6+F,cAAc,CAACh0E,IAAI,CAAC,CAAC;MAC5E,IAAIk0E,WAAW,EAAE;QACf1jC,GAAG,CAACsG,QAAQ,CAAChjE,CAAC,EAAE6pC,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE2qB,IAAI,CAAC,CAAC;MACxD;IACF;IACAwwC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;AACF;AAEA,8DAAe2tD,gBAAgB;;ACzCmB;AAElD,MAAMK,iBAAiB,SAASL,uBAAgB,CAAC;EAC/CP,YAAYA,CAAA,EAAG;IACb,MAAMa,aAAa,GAAG,EAAE;IACxB,MAAM;MAAEx/D,KAAK;MAAEw+D;IAAO,CAAC,GAAG,IAAI,CAACJ,UAAU;IACzC,MAAMl/F,CAAC,GAAGs/F,MAAM,CAACtnG,MAAM;IACvB,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC1BugG,aAAa,CAACvgG,CAAC,CAAC,GAAG+gC,KAAK,CAACw+D,MAAM,CAACv/F,CAAC,CAAC,CAAC;IACrC;IACA,MAAMU,IAAI,GAAG,IAAI,CAAC0+F,KAAK,CAACoB,cAAc,CAAC,CAAC;IACxC9/F,IAAI,CAACqgC,KAAK,GAAGw/D,aAAa;IAC1B,OAAO,CAACtgG,CAAC,EAAES,IAAI,CAAC;EAClB;AACF;AACA,+DAAe4/F,iBAAiB;;ACfhC;;AAEkD;AAElD,MAAMG,oBAAoB,SAASR,uBAAgB,CAAC;EAClDP,YAAYA,CAAA,EAAG;IACb,MAAMa,aAAa,GAAG,EAAE;IACxB,MAAM;MAAEx/D,KAAK;MAAEw+D;IAAO,CAAC,GAAG,IAAI,CAACJ,UAAU;IACzC,MAAMl/F,CAAC,GAAGs/F,MAAM,CAACtnG,MAAM;IACvB,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC1BugG,aAAa,CAACvgG,CAAC,CAAC,GAAG+gC,KAAK,CAACw+D,MAAM,CAACv/F,CAAC,CAAC,CAAC;IACrC;IACA,MAAMU,IAAI,GAAG,IAAI,CAAC0+F,KAAK,CAACoB,cAAc,CAAC,CAAC;IACxC9/F,IAAI,CAACqgC,KAAK,GAAGw/D,aAAa;IAC1B7/F,IAAI,CAACw+F,SAAS,GAAG,IAAI,CAACC,UAAU;IAChCz+F,IAAI,CAACkyF,SAAS,GAAG,IAAI,CAACyM,QAAQ;IAC9B,OAAO,CAACp/F,CAAC,EAAES,IAAI,CAAC;EAClB;AACF;AAEA,kEAAe+/F,oBAAoB;;ACpBG;AACH;AAEnC,SAASC,WAAWA,CAAC3lF,KAAK,EAAE;EAC1B,IAAI9V,CAAC,GAAI8V,KAAK,IAAI,EAAE,GAAI,GAAG;EAC3B,IAAIzI,CAAC,GAAIyI,KAAK,IAAI,CAAC,GAAI,GAAG;EAC1B,IAAIlI,CAAC,GAAGkI,KAAK,GAAG,GAAG;EAEnB,IAAI,MAAM,GAAG9V,CAAC,GAAG,MAAM,GAAGqN,CAAC,GAAG,MAAM,GAAGO,CAAC,GAAG,GAAG,EAAE;IAC9C5N,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,EAAE;IACdqN,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,EAAE;IACdO,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,EAAE;EAChB,CAAC,MAAM;IACL5N,CAAC,GAAG,GAAG,GAAI,CAAC,GAAG,GAAGA,CAAC,IAAI,CAAC,GAAG,EAAG;IAC9BqN,CAAC,GAAG,GAAG,GAAI,CAAC,GAAG,GAAGA,CAAC,IAAI,CAAC,GAAG,EAAG;IAC9BO,CAAC,GAAG,GAAG,GAAI,CAAC,GAAG,GAAGA,CAAC,IAAI,CAAC,GAAG,EAAG;EAChC;EAEA,OAAQ5N,CAAC,IAAI,EAAE,GAAKqN,CAAC,IAAI,CAAE,GAAGO,CAAC;AACjC;AAEA,SAAS8tF,YAAYA,CAAC5lF,KAAK,EAAE;EAC3B,MAAM9V,CAAC,GAAI8V,KAAK,IAAI,EAAE,GAAI,GAAG;EAC7B,MAAMzI,CAAC,GAAIyI,KAAK,IAAI,CAAC,GAAI,GAAG;EAC5B,MAAMlI,CAAC,GAAGkI,KAAK,GAAG,GAAG;EAErB,OAAS,GAAG,GAAG9V,CAAC,IAAK,EAAE,GAAM,GAAG,GAAGqN,CAAC,IAAK,CAAE,GAAI,GAAG,GAAGO,CAAE;AACzD;AAEA,SAAS+tF,WAAWA,CAAC10E,IAAI,EAAE;EACzB,IAAIA,IAAI,CAAC/F,IAAI,CAAC06E,OAAO,CAAC,CAAC,KAAK,IAAI,EAAE;IAChC,OAAO30E,IAAI,CAAC/F,IAAI,CAAC06E,OAAO,CAAC,CAAC;EAC5B;EAEA,OAAO30E,IAAI,CAACwP,aAAa,CAAC,CAAC;AAC7B;AAEA,MAAMolE,aAAa,GAAG;EACpB3xD,IAAIA,CAACxnC,CAAC,EAAE;IACN,OAAOA,CAAC;EACV,CAAC;EACDo5F,MAAM,EAAEL,WAAW;EACnBM,OAAO,EAAEL;AACX,CAAC;AAED,SAASM,cAAcA,CAAClmF,KAAK,EAAEmmF,IAAI,EAAE;EACnC,IAAIp9E,MAAM;EACV,IAAIg9E,aAAa,CAAC98F,cAAc,CAACk9F,IAAI,CAAC,EAAE;IACtCp9E,MAAM,GAAG/lB,KAAK,CAACunB,QAAQ,CAACw7E,aAAa,CAACI,IAAI,CAAC,CAACnmF,KAAK,CAAC,CAAC;EACrD,CAAC,MAAM;IACL,MAAMnZ,GAAG,GAAGQ,QAAQ,CAAC8+F,IAAI,EAAE,EAAE,CAAC;IAC9B,IAAI,CAACzhG,MAAM,CAACyP,KAAK,CAACtN,GAAG,CAAC,IAAIs/F,IAAI,CAAC9hG,WAAW,CAAC,CAAC,CAAC+hG,UAAU,CAAC,IAAI,CAAC,EAAE;MAC7Dr9E,MAAM,GAAG/lB,KAAK,CAACunB,QAAQ,CAAC1jB,GAAG,CAAC;IAC9B,CAAC,MAAM;MACLkiB,MAAM,GAAG,SAAS;IACpB;EACF;EACA,OAAOA,MAAM;AACf;AAEA,MAAMs9E,gBAAgB,GAAG;EACvBxmE,MAAMA,CAAC51B,CAAC,EAAE;IACR,OAAOA,CAAC,CAAC41B,MAAM;EACjB,CAAC;EACDzU,IAAIA,CAACnhB,CAAC,EAAE;IACN,OAAOA,CAAC,CAAC02B,aAAa,CAAC,CAAC;EAC1B,CAAC;EACDyzB,IAAIA,CAACnqD,CAAC,EAAE;IACN,OAAOA,CAAC,CAACkT,OAAO,CAACiO,IAAI;EACvB,CAAC;EACDsU,OAAOA,CAACz1B,CAAC,EAAE;IACT,OAAOA,CAAC,CAACy1B,OAAO,CAACnwB,OAAO,CAAC,CAAC,CAACyxB,OAAO,CAAC,CAAC;EACtC,CAAC;EACDmF,QAAQA,CAACl8B,CAAC,EAAE;IACV,OAAOA,CAAC,CAACy1B,OAAO,CAAC6H,WAAW,CAAC,CAAC;EAChC,CAAC;EACDrB,KAAKA,CAACj8B,CAAC,EAAE;IACP,OAAOA,CAAC,CAACy1B,OAAO,CAAC2H,QAAQ,CAAC,CAAC,CAACrG,OAAO,CAAC,CAAC;EACvC,CAAC;EACDslE,MAAMA,CAACr8F,CAAC,EAAE;IACR,OAAOA,CAAC,CAACw2B,KAAK,CAAC,CAAC;EAClB,CAAC;EACD8lE,KAAKA,CAACt8F,CAAC,EAAE;IACP,OAAOA,CAAC,CAACy1B,OAAO,CAACnwB,OAAO,CAAC,CAAC,CAACyxB,OAAO,CAAC,CAAC,KAAK,KAAK,IAAI/2B,CAAC,CAACy1B,OAAO,CAACnwB,OAAO,CAAC,CAAC,CAACyxB,OAAO,CAAC,CAAC,KAAK,KAAK;EAC3F;AACF,CAAC;AAED,MAAMwlE,aAAa,GAAG,SAAAA,CAAUr1E,IAAI,EAAEvpB,GAAG,EAAE;EACzC,OAAOA,GAAG,CAAC4E,OAAO,CAAC,sBAAsB,EAAGwG,CAAC,IAAK;IAChD,IAAIpM,GAAG,GAAGoM,CAAC,CAACxG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;IAC/B5F,GAAG,GAAGA,GAAG,CAACkiB,SAAS,CAAC,CAAC,EAAEliB,GAAG,CAAC1J,MAAM,GAAG,CAAC,CAAC,CAACmH,WAAW,CAAC,CAAC;IAEpD,IAAIgiG,gBAAgB,CAACp9F,cAAc,CAACrC,GAAG,CAAC,EAAE;MACxC,OAAOy/F,gBAAgB,CAACz/F,GAAG,CAAC,CAACuqB,IAAI,CAAC;IACpC;IACA,OAAO,MAAM;EACf,CAAC,CAAC;AACJ,CAAC;AAED,MAAMs1E,cAAc,SAASzB,iBAAU,CAAC;EACtCL,YAAYA,CAAA,EAAG;IACb,MAAMh/F,IAAI,GAAG,IAAI,CAAC0+F,KAAK,CAACqC,YAAY,CAAC,CAAC;IACtC,OAAO,CAAC,IAAI,CAACtC,UAAU,CAACI,MAAM,CAACtnG,MAAM,EAAEyI,IAAI,CAAC;EAC9C;EAEAkiD,MAAMA,CAAA,EAAG;IACP,MAAMliD,IAAI,GAAG,IAAI,CAAC0+F,KAAK,CAACqC,YAAY,CAAC,CAAC;IACtC,MAAMzB,QAAQ,GAAG,IAAI,CAACb,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEx+D,KAAK;MAAE31B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IACzC,MAAM59F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,KAAK,IAAIz/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+/F,QAAQ,CAAC/nG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMksB,IAAI,GAAG6U,KAAK,CAACi/D,QAAQ,CAAChgG,CAAC,CAAC,CAAC;MAC/B,MAAM0F,IAAI,GAAGhF,IAAI,CAACiuB,QAAQ,GAAG4yE,aAAa,CAACr1E,IAAI,EAAExrB,IAAI,CAACiuB,QAAQ,CAAC,GAAGiyE,WAAW,CAAC10E,IAAI,CAAC;MACnF,IAAI,CAACxmB,IAAI,EAAE;QACT;MACF;MACA,MAAMqV,KAAK,GAAGxZ,OAAO,CAAC4+F,YAAY,CAACj0E,IAAI,EAAE9gB,MAAM,CAAC;MAChD,MAAMs2F,OAAO,GAAGt/F,QAAQ,CAAC6+F,cAAc,CAAClmF,KAAK,EAAEra,IAAI,CAACuuB,EAAE,CAAC,CAACpL,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MACzE,MAAM89E,OAAO,GAAGjhG,IAAI,CAACyuB,MAAM,GAAG/sB,QAAQ,CAAC6+F,cAAc,CAAClmF,KAAK,EAAEra,IAAI,CAACwuB,EAAE,CAAC,CAACrL,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,aAAa;MACvG64C,GAAG,CAACiG,OAAO,CAAC3iE,CAAC,EAAEksB,IAAI,CAACzQ,QAAQ,EAAE/V,IAAI,CAAC;MACnCg3D,GAAG,CAACsG,QAAQ,CAAChjE,CAAC,EAAE0hG,OAAO,EAAEC,OAAO,CAAC;IACnC;IACAjlC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEA1I,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;IACA,MAAMnpC,IAAI,GAAG,IAAI,CAAC0+F,KAAK,CAACqC,YAAY,CAAC,CAAC;IACtC,MAAMzB,QAAQ,GAAG,IAAI,CAACb,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEx+D;IAAM,CAAC,GAAG,IAAI,CAACo+D,UAAU;IACjC,MAAM59F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAMW,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IACvD,KAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+/F,QAAQ,CAAC/nG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMksB,IAAI,GAAG6U,KAAK,CAACi/D,QAAQ,CAAChgG,CAAC,CAAC,CAAC;MAC/B,MAAM0F,IAAI,GAAGhF,IAAI,CAACiuB,QAAQ,GAAG4yE,aAAa,CAACr1E,IAAI,EAAExrB,IAAI,CAACiuB,QAAQ,CAAC,GAAGiyE,WAAW,CAAC10E,IAAI,CAAC;MACnF,IAAI,CAACxmB,IAAI,EAAE;QACT;MACF;MACA,MAAMqV,KAAK,GAAG8uB,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE2qB,IAAI,CAAC;MACnD,MAAMw1E,OAAO,GAAGt/F,QAAQ,CAAC6+F,cAAc,CAAClmF,KAAK,EAAEra,IAAI,CAACuuB,EAAE,CAAC,CAACpL,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MACzE,MAAM89E,OAAO,GAAGjhG,IAAI,CAACyuB,MAAM,GAAG/sB,QAAQ,CAAC6+F,cAAc,CAAClmF,KAAK,EAAEra,IAAI,CAACwuB,EAAE,CAAC,CAACrL,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,aAAa;MACvG64C,GAAG,CAACiG,OAAO,CAAC3iE,CAAC,EAAE6pC,SAAS,CAACpM,UAAU,CAACuiE,QAAQ,CAAChgG,CAAC,CAAC,CAAC,EAAE0F,IAAI,CAAC;MACvD,IAAI06F,WAAW,EAAE;QACf1jC,GAAG,CAACsG,QAAQ,CAAChjE,CAAC,EAAE0hG,OAAO,EAAEC,OAAO,CAAC;MACnC;IACF;IACAjlC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;AACF;AAEA,4DAAekvD,cAAc;;ACzJE;AACO;AAEtC,SAASI,MAAMA,CAACC,KAAK,EAAE5nD,EAAE,EAAEC,EAAE,EAAEzsC,CAAC,EAAE;EAChC,MAAMq0F,IAAI,GAAG3hG,IAAI,CAAC0K,GAAG,CAACg3F,KAAK,CAAC;EAC5B,OAAO5nD,EAAE,CAAC7a,KAAK,CAAC,CAAC,CAACQ,cAAc,CAACz/B,IAAI,CAAC0K,GAAG,CAAC,CAAC,CAAC,GAAG4C,CAAC,IAAIo0F,KAAK,CAAC,GAAGC,IAAI,CAAC,CAAC7iC,eAAe,CAAC/kB,EAAE,EAAE/5C,IAAI,CAAC0K,GAAG,CAAC4C,CAAC,GAAGo0F,KAAK,CAAC,GAAGC,IAAI,CAAC;AACpH;AAEA,MAAMC,aAAa,SAAShC,iBAAU,CAAC;EACrC1mD,WAAWA,CAAC2oD,SAAS,EAAEC,QAAQ,EAAE;IAC/B,MAAMC,WAAW,GAAG,IAAI,CAAC/C,UAAU,CAACI,MAAM;IAE1C,MAAM4C,UAAU,GAAG,IAAI3hE,iGAAa,CAAC,CAAC;IACtC,MAAM4hE,UAAU,GAAG,IAAI5hE,iGAAa,CAAC,CAAC;IACtC,MAAM6hE,cAAc,GAAG,IAAI,CAACC,eAAe;IAC3C,MAAMC,QAAQ,GAAG,GAAG,GAAGF,cAAc;IACrC,MAAM9gG,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAE7B,MAAM;MAAElrD,MAAM;MAAE/oC;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAC1C,IAAIv9B,QAAQ,GAAG,CAAC;IAChB,IAAI4gC,WAAW,GAAGN,WAAW,CAACtgC,QAAQ,CAAC;IAEvC,KAAK,IAAI4iB,IAAI,GAAG,CAAC,EAAEie,MAAM,GAAGtuD,MAAM,CAACl8C,MAAM,EAAEusF,IAAI,GAAGie,MAAM,EAAE,EAAEje,IAAI,EAAE;MAChE,MAAMvwC,KAAK,GAAGE,MAAM,CAACqwC,IAAI,CAAC;MAC1B,MAAMke,QAAQ,GAAGzuD,KAAK,CAAClT,KAAK;MAC5B,MAAM4hE,WAAW,GAAG,EAAE;MACtB,MAAMC,MAAM,GAAG,EAAE;MACjB,MAAM;QAAEtiG;MAAO,CAAC,GAAG2zC,KAAK;MACxB,MAAM4uD,QAAQ,GAAG5uD,KAAK,CAACp5B,MAAM,GAAGmnF,SAAS;MACzC,MAAM/hG,CAAC,GAAGyiG,QAAQ,CAACzqG,MAAM;MACzB,IAAI+H,CAAC,GAAG,CAAC;MACT,MAAM8iG,OAAO,GAAGJ,QAAQ,CAACziG,CAAC,GAAG,CAAC,CAAC,CAACwb,QAAQ;MACxC,IAAIsnF,OAAO,GAAGL,QAAQ,CAAC1iG,CAAC,CAAC,CAACyb,QAAQ;MAClC0mF,UAAU,CAACj0B,UAAU,CAAC40B,OAAO,EAAExiG,MAAM,CAAC;MACtC8hG,UAAU,CAACl0B,UAAU,CAAC60B,OAAO,EAAEziG,MAAM,CAAC;MACtC,MAAM0iG,KAAK,GAAGZ,UAAU,CAAChjE,KAAK,CAAC,CAAC,CAAC8d,KAAK,CAACilD,UAAU,CAAC,CAAC7hE,SAAS,CAAC,CAAC;MAE9D,OAAOtgC,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QACjB,MAAM6hG,KAAK,GAAGM,UAAU,CAAC79D,OAAO,CAAC89D,UAAU,CAAC;QAC5CQ,MAAM,CAAC5iG,CAAC,CAAC,GAAG4hG,MAAM,CAACC,KAAK,EAAEM,UAAU,EAAEC,UAAU,EAAE,GAAG,CAAC,CAAC9hE,SAAS,CAAC,CAAC;QAClEyiE,OAAO,GAAGL,QAAQ,CAAC,CAAC1iG,CAAC,GAAG,CAAC,IAAIC,CAAC,CAAC,CAACwb,QAAQ;QACxC0mF,UAAU,CAAC3yF,IAAI,CAAC4yF,UAAU,CAAC;QAC3BA,UAAU,CAACl0B,UAAU,CAAC60B,OAAO,EAAEziG,MAAM,CAAC;MACxC;MAEA,KAAKN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QACtB,IAAI0iG,QAAQ,CAAC1iG,CAAC,CAAC,CAACiI,KAAK,KAAKu6F,WAAW,EAAE;UACrC;QACF;QACA,MAAM/jF,KAAK,GAAGmkF,MAAM,CAAC5iG,CAAC,CAAC;QACvB,MAAM6d,GAAG,GAAG+kF,MAAM,CAAC,CAAC5iG,CAAC,GAAG,CAAC,IAAIC,CAAC,CAAC;QAC/B,MAAM8a,KAAK,GAAGxZ,OAAO,CAAC4+F,YAAY,CAACuC,QAAQ,CAAC1iG,CAAC,CAAC,EAAEoL,MAAM,CAAC;QACvD,MAAM63F,SAAS,GAAGxkF,KAAK,CAAC6lB,OAAO,CAACzmB,GAAG,CAAC;QAEpC,KAAK,IAAIjK,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIyuF,cAAc,EAAE,EAAEzuF,CAAC,EAAE;UACxC+uF,WAAW,CAAC/uF,CAAC,CAAC,GAAGguF,MAAM,CAACqB,SAAS,EAAExkF,KAAK,EAAEZ,GAAG,EAAEjK,CAAC,GAAG2uF,QAAQ,CAAC,CAAC3iE,cAAc,CAACijE,QAAQ,CAAC,CAAC1hG,GAAG,CAACb,MAAM,CAAC;QACnG;QAEA2hG,QAAQ,CAACrgC,QAAQ,EAAE,EAAE7mD,KAAK,EAAE4nF,WAAW,EAAEriG,MAAM,EAAE0iG,KAAK,CAAC;QACvDR,WAAW,GAAGN,WAAW,CAACtgC,QAAQ,CAAC;MACrC;IACF;EACF;AACF;AAEA,2DAAemgC,aAAa;;ACjEG;AACO;AACM;AAE5C,SAASmB,YAAYA,CAACpnC,GAAG,EAAE7yC,KAAK,EAAE;EAChC,MAAMk6E,GAAG,GAAG,EAAE;EACd,KAAK,IAAInjG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGipB,KAAK,EAAE,EAAEjpB,CAAC,EAAE;IAC9B,MAAMgF,CAAC,GAAG,CAAC,CAAC,GAAGhF,CAAC,GAAGipB,KAAK,GAAG9oB,IAAI,CAACC,EAAE;IAClC+iG,GAAG,CAAC/+F,IAAI,CAAC,IAAIo8B,iGAAa,CAACrgC,IAAI,CAACge,GAAG,CAACnZ,CAAC,CAAC,GAAG82D,GAAG,EAAE37D,IAAI,CAAC0K,GAAG,CAAC7F,CAAC,CAAC,GAAG82D,GAAG,EAAE,CAAC,CAAC,CAAC;EACtE;EACA,OAAOqnC,GAAG;AACZ;AACA,MAAM;EAAE5jC;AAAgB,CAAC,GAAGG,QAAQ;AAEpC,MAAM0jC,kBAAkB,SAASrB,oBAAa,CAAC;EAC7Cn/C,MAAMA,CAAA,EAAG;IACP,MAAMy/C,cAAc,GAAG,IAAI,CAACC,eAAe;IAC3C,MAAMe,QAAQ,GAAG,IAAI,CAACjE,KAAK,CAACkE,aAAa,CAAC,CAAC;IAC3C,MAAMC,OAAO,GAAG,IAAI/iE,iGAAa,CAAC6iE,QAAQ,EAAEA,QAAQ,CAAC;IACrD,MAAMrB,SAAS,GAAG,IAAI,CAAC5C,KAAK,CAACoE,eAAe,CAAC,CAAC,GAAG,CAAC,GAAGH,QAAQ;IAC7D,MAAMI,YAAY,GAAG,IAAIjjE,iGAAa,CAAC,CAAC;IACxC,MAAMkjE,GAAG,GAAG,EAAE;IACd,MAAMhnC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,IAAI,CAACpmD,WAAW,CAAC2oD,SAAS,EAAE,CAACpgC,QAAQ,EAAE7mD,KAAK,EAAE4oF,MAAM,EAAErjG,MAAM,EAAE0iG,KAAK,KAAK;MACtE,KAAK,IAAIpvF,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIyuF,cAAc,EAAE,EAAEzuF,CAAC,EAAE;QACxC,MAAMgwF,SAAS,GAAGD,MAAM,CAAC/vF,CAAC,CAAC;QAC3B,MAAMmrB,OAAO,GAAG6kE,SAAS,CAACxkE,KAAK,CAAC,CAAC,CAACE,GAAG,CAACh/B,MAAM,CAAC,CAAC48C,KAAK,CAAC8lD,KAAK,CAAC;QAC1DS,YAAY,CAACx1D,UAAU,CAAC21D,SAAS,EAAE7kE,OAAO,CAAC;QAC3C2kE,GAAG,CAAC9vF,CAAC,CAAC,GAAG2rD,eAAe,CAACqkC,SAAS,EAAEH,YAAY,EAAET,KAAK,EAAEO,OAAO,CAAC;MACnE;MACA7mC,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAE8hC,GAAG,CAAC;MAC1BhnC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAE7mD,KAAK,CAAC;IAC/B,CAAC,CAAC;IACF2hD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEAotD,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC4C,eAAe,GAAG,IAAI,CAAC9C,eAAe;IAC3C,OAAO,CAAC0D,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC1D,eAAe,CAAC,EAAE,IAAI,CAAC8C,eAAe,GAAG,CAAC,EAAE,IAAI,CAACnD,UAAU,CAACI,MAAM,CAACtnG,MAAM,CAAC;EAC3G;AACF;AAEA,gEAAemrG,kBAAkB;;AC1CW;AAE5C,MAAMS,kBAAkB,SAAS9B,oBAAa,CAAC;EAC7Cn/C,MAAMA,CAAA,EAAG;IACP,MAAM8Z,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAMuC,SAAS,GAAG,IAAI,CAAC5C,KAAK,CAAC0E,iBAAiB,CAAC,CAAC;IAChD,IAAI,CAACzqD,WAAW,CAAC2oD,SAAS,EAAE,CAACpgC,QAAQ,EAAE7mD,KAAK,EAAE4oF,MAAM,KAAK;MACvD,IAAII,MAAM,GAAGJ,MAAM,CAAC,CAAC,CAAC,CAAC;MACvB,KAAK,IAAI/vF,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,IAAI,CAAC0uF,eAAe,EAAE,EAAE1uF,CAAC,EAAE;QAC9C,MAAMgwF,SAAS,GAAGD,MAAM,CAAC/vF,CAAC,CAAC;QAC3B8oD,GAAG,CAACmS,UAAU,CAACjN,QAAQ,EAAEhuD,CAAC,GAAG,CAAC,EAAEmwF,MAAM,EAAEH,SAAS,CAAC;QAClDG,MAAM,GAAGH,SAAS;MACpB;MACAlnC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAE7mD,KAAK,CAAC;IAC/B,CAAC,CAAC;IACF2hD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEAotD,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC4C,eAAe,GAAG,IAAI,CAAClD,KAAK,CAAC4E,oBAAoB,CAAC,CAAC;IACxD,OAAO,CAAC,IAAI,CAAC7E,UAAU,CAACI,MAAM,CAACtnG,MAAM,EAAE,IAAI,CAACqqG,eAAe,EAAE,IAAI,CAAC;EACpE;AACF;AAEA,gEAAeuB,kBAAkB;;ACxBG;AAEpC,MAAMI,aAAa,SAAShF,gBAAS,CAAC;EACpC/pC,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAM;MAAE7rB;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,MAAMx9B,MAAM,GAAG,EAAE;IACjB,IAAI,CAACg+B,KAAK,CAACzqC,OAAO,CAACC,SAAS,EAAEwM,MAAM,CAAC;IACrC,MAAMuiC,SAAS,GAAG,IAAI,CAAC5E,UAAU;IACjC;IACA,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG0hE,MAAM,CAAC1pE,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAAC2hE,MAAM,CAAC3hE,CAAC,CAAC,CAACgE,cAAc,CAAC,UAAU,CAAC,EAAE;QACzC;MACF;MACA,MAAMmgG,MAAM,GAAGD,SAAS,CAACviC,MAAM,CAAC3hE,CAAC,CAAC,CAAC4hE,QAAQ,CAAC;MAC5C,IAAIuiC,MAAM,GAAG56D,QAAQ,CAACtxC,MAAM,EAAE;QAC5B0pE,MAAM,CAAC3hE,CAAC,CAAC,CAACy6B,OAAO,GAAG8O,QAAQ,CAAC46D,MAAM,CAAC;QACpC/uC,UAAU,CAAChxD,IAAI,CAACu9D,MAAM,CAAC3hE,CAAC,CAAC,CAAC;MAC5B;IACF;EACF;EAEA6/F,eAAeA,CAAC9kE,IAAI,EAAE;IACpB,MAAM6kE,UAAU,GAAG,EAAE;IACrB,MAAM;MAAEr2D;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,MAAM3rD,MAAM,GAAG,IAAI,CAAC8rD,UAAU;IAC9B,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGuzC,MAAM,CAACv7C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,MAAMqlB,GAAG,GAAGkkB,QAAQ,CAACiK,MAAM,CAACxzC,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACqlB,GAAG,CAACic,KAAK,GAAGvG,IAAI,MAAM,CAAC,EAAE;QAC5B6kE,UAAU,CAACx7F,IAAI,CAACpE,CAAC,CAAC;MACpB;IACF;IACA,OAAO4/F,UAAU;EACnB;AACF;AAEA,2DAAeqE,aAAa;;ACnCgB;AAE5C,MAAMG,gBAAgB,SAASH,oBAAa,CAAC;EAC3C/uC,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAM;MAAE7rB;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,MAAMx9B,MAAM,GAAG,EAAE;IACjB,IAAI,CAACg+B,KAAK,CAACzqC,OAAO,CAACC,SAAS,EAAEwM,MAAM,CAAC;IACrC,MAAMuiC,SAAS,GAAG,IAAI,CAAC5E,UAAU;IACjC;IACA,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG0hE,MAAM,CAAC1pE,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAAC2hE,MAAM,CAAC3hE,CAAC,CAAC,CAACgE,cAAc,CAAC,UAAU,CAAC,EAAE;QACzC;MACF;MACA,MAAMmgG,MAAM,GAAGD,SAAS,CAAC/jG,IAAI,CAACyN,KAAK,CAAC+zD,MAAM,CAAC3hE,CAAC,CAAC,CAAC4hE,QAAQ,GAAG,CAAC,CAAC,CAAC;MAC5D,IAAIuiC,MAAM,GAAG56D,QAAQ,CAACtxC,MAAM,EAAE;QAC5B0pE,MAAM,CAAC3hE,CAAC,CAAC,CAACy6B,OAAO,GAAG8O,QAAQ,CAAC46D,MAAM,CAAC;QACpC/uC,UAAU,CAAChxD,IAAI,CAACu9D,MAAM,CAAC3hE,CAAC,CAAC,CAAC;MAC5B;IACF;EACF;EAEA4iD,MAAMA,CAAA,EAAG;IACP,MAAM;MAAErZ,QAAQ;MAAEn+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAC5C,MAAM59F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM4E,QAAQ,GAAG,IAAI,CAACjF,KAAK,CAACoE,eAAe,CAAC,CAAC;IAC7C,IAAI5hC,QAAQ,GAAG,CAAC;IAEhB,MAAMpuB,MAAM,GAAG,IAAI,CAAC2rD,UAAU,CAACI,MAAM;IACrC,KAAK,IAAIv/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGuzC,MAAM,CAACv7C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,MAAMqlB,GAAG,GAAGkkB,QAAQ,CAACiK,MAAM,CAACxzC,CAAC,CAAC,CAAC;MAC/B,MAAM+a,KAAK,GAAGxZ,OAAO,CAAC+iG,eAAe,CAACj/E,GAAG,EAAEja,MAAM,CAAC;MAClD,IAAI,CAACm5F,YAAY,CAAC3iC,QAAQ,EAAE,EAAEv8C,GAAG,CAAC2c,UAAU,CAAC,CAAC,CAAC,EAAE3c,GAAG,CAAC2c,UAAU,CAAC,CAAC,CAAC,EAAEqiE,QAAQ,EAAEtpF,KAAK,CAAC;IACtF;IACA2hD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEAutD,eAAeA,CAAC9kE,IAAI,EAAE;IACpB,MAAM6kE,UAAU,GAAG,EAAE;IACrB,IAAIh+B,QAAQ,GAAG,CAAC;IAChB,MAAM;MAAEr4B;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,MAAM3rD,MAAM,GAAG,IAAI,CAAC8rD,UAAU;IAE9B,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGuzC,MAAM,CAACv7C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,MAAMqlB,GAAG,GAAGkkB,QAAQ,CAACiK,MAAM,CAACxzC,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACqlB,GAAG,CAACic,KAAK,GAAGvG,IAAI,MAAM,CAAC,EAAE;QAC5B6kE,UAAU,CAACh+B,QAAQ,EAAE,CAAC,GAAG,CAAC,GAAG5hE,CAAC;QAC9B4/F,UAAU,CAACh+B,QAAQ,EAAE,CAAC,GAAG,CAAC,GAAG5hE,CAAC,GAAG,CAAC;MACpC;IACF;IACA,OAAO4/F,UAAU;EACnB;EAEAh2D,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;IACA,MAAMN,QAAQ,GAAGM,SAAS,CAACR,WAAW,CAAC,CAAC;IACxC,MAAM;MAAEj+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAClC,MAAM59F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM4E,QAAQ,GAAG,IAAI,CAACjF,KAAK,CAACoE,eAAe,CAAC,CAAC;IAC7C,IAAI5hC,QAAQ,GAAG,CAAC;IAEhB,MAAMpuB,MAAM,GAAG,IAAI,CAAC2rD,UAAU,CAACI,MAAM;IACrC,KAAK,IAAIv/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGuzC,MAAM,CAACv7C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,MAAMqlB,GAAG,GAAGkkB,QAAQ,CAACiK,MAAM,CAACxzC,CAAC,CAAC,CAAC;MAC/B,MAAM+a,KAAK,GAAGxZ,OAAO,CAAC+iG,eAAe,CAACj/E,GAAG,EAAEja,MAAM,CAAC;MAClD,IAAI,CAACm5F,YAAY,CAAC3iC,QAAQ,EAAE,EAAEv8C,GAAG,CAAC2c,UAAU,CAAC,CAAC,CAAC,EAAE3c,GAAG,CAAC2c,UAAU,CAAC,CAAC,CAAC,EAAEqiE,QAAQ,EAAEtpF,KAAK,CAAC;IACtF;IACA2hD,GAAG,CAAC0G,YAAY,CAAC,CAAC;EACpB;AACF;AAEA,8DAAeghC,gBAAgB;;ACzEmB;AAElD,MAAMI,qBAAqB,SAASJ,uBAAgB,CAAC;EACnD1E,YAAYA,CAAA,EAAG;IACb,OAAO,CAAC,IAAI,CAACP,UAAU,CAACI,MAAM,CAACtnG,MAAM,EAAE,IAAI,CAACunG,eAAe,CAAC;EAC9D;EAEA+E,YAAYA,CAAC3iC,QAAQ,EAAE6iC,IAAI,EAAEC,IAAI,EAAEL,QAAQ,EAAEtpF,KAAK,EAAE;IAClD,MAAM2hD,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB/iC,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAE6iC,IAAI,EAAEC,IAAI,EAAEL,QAAQ,CAAC;IAC3C3nC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAE7mD,KAAK,EAAEA,KAAK,CAAC;EACtC;AACF;AAEA,mEAAeypF,qBAAqB;;ACdc;AAElD,MAAMG,mBAAmB,SAASP,uBAAgB,CAAC;EACjD1E,YAAYA,CAAA,EAAG;IACb,OAAO,CAAC,IAAI,CAACP,UAAU,CAACI,MAAM,CAACtnG,MAAM,GAAG,CAAC,EAAE,IAAI,CAACunG,eAAe,CAAC;EAClE;EAEA+E,YAAYA,CAAC3iC,QAAQ,EAAE6iC,IAAI,EAAEC,IAAI,EAAEL,QAAQ,EAAEtpF,KAAK,EAAE;IAClD,MAAM2hD,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,IAAI9iF,GAAG,GAAGilD,QAAQ,GAAG,CAAC;IACtBlF,GAAG,CAACiG,OAAO,CAAChmD,GAAG,EAAE8nF,IAAI,EAAEJ,QAAQ,CAAC;IAChC3nC,GAAG,CAACsG,QAAQ,CAACrmD,GAAG,EAAE5B,KAAK,CAAC;IACxB4B,GAAG,EAAE;IACL+/C,GAAG,CAACiG,OAAO,CAAChmD,GAAG,EAAE+nF,IAAI,EAAEL,QAAQ,CAAC;IAChC3nC,GAAG,CAACsG,QAAQ,CAACrmD,GAAG,EAAE5B,KAAK,CAAC;EAC1B;AACF;AAEA,iEAAe4pF,mBAAmB;;;;AClBH;AACuB;AAChB;AACL;AAEjC,MAAM;EAAEn/D,WAAWA,2BAAAA;AAAC,CAAC,GAAG42C,IAAI;AAE5B,MAAMwoB,UAAU,GAAGllC,QAAQ,CAACH,eAAe;AAE3C,SAASslC,2BAA2BA,CAAClB,MAAM,EAAEx1E,OAAO,EAAE;EACpD,MAAMwG,IAAI,GAAG3qB,iBAAM,CAAC25F,MAAM,EAAE;IAC1Bx3F,MAAM,EAAEnC,aAAM,CAAC0B,YAAY;IAC3BW,IAAI,EAAErC,aAAM,CAAC6B,UAAU;IACvBO,YAAY,EAAE+hB,OAAO;IACrB7hB,OAAO,EAAE;EACX,CAAC,CAAC;EAEF,OAAO,UAAUmB,CAAC,EAAEq3F,QAAQ,EAAE;IAC5B,IAAIC,UAAU,GAAGD,QAAQ;IACzB,IAAIC,UAAU,KAAK,IAAI,EAAE;MACvB;MACAA,UAAU,GAAG,SAAAA,CAAUC,EAAE,EAAE;QACzB,OAAO,CAACA,EAAE,IAAKrB,MAAM,CAAC1rG,MAAM,GAAG,CAAC,GAAI,CAAC,CAAC,GAAG,CAAC,KAAK0rG,MAAM,CAAC1rG,MAAM,GAAG,CAAC,CAAC;MACnE,CAAC;IACH;IACA,MAAMgtG,IAAI,GAAGF,UAAU,CAACt3F,CAAC,CAAC;IAC1B,MAAMy3F,GAAG,GAAGvwE,IAAI,CAACswE,IAAI,CAAC;IACtB,OAAO,IAAIzkE,iGAAa,CAAC0kE,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC;EAClD,CAAC;AACH;AAEA,SAASC,UAAUA,CAACC,YAAY,EAAEC,SAAS,EAAE1oF,GAAG,EAAE8d,OAAO,EAAE;EACzD,IAAI,CAACA,OAAO,CAACwH,QAAQ,EAAE;IACrBmjE,YAAY,CAACzoF,GAAG,CAAC,GAAGyoF,YAAY,CAACzoF,GAAG,GAAG,CAAC,CAAC;IACzC0oF,SAAS,CAAC1oF,GAAG,CAAC,GAAG0oF,SAAS,CAAC1oF,GAAG,GAAG,CAAC,CAAC;IACnC;EACF;EACA,MAAMq9B,EAAE,GAAGvf,OAAO,CAACoH,aAAa;EAChCujE,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACq9B,EAAE,CAAC9rC,CAAC,EAAE8rC,EAAE,CAACrnC,CAAC,EAAEqnC,EAAE,CAAChmC,CAAC,CAAC;EACtC,MAAMsxF,EAAE,GAAGtrD,EAAE,CAAC5a,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAACs5B,OAAO,CAACsH,WAAW,CAAC;EAC9CsjE,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAAC2oF,EAAE,CAACp3F,CAAC,EAAEo3F,EAAE,CAAC3yF,CAAC,EAAE2yF,EAAE,CAACtxF,CAAC,CAAC;AACrC;AAEA,SAASuxF,wBAAwBA,CAACH,YAAY,EAAEC,SAAS,EAAE1oF,GAAG,EAAE8d,OAAO,EAAE;EACvE,MAAM+qE,OAAO,GAAG,CAAC/qE,OAAO,CAACyD,KAAK,CAAC9C,KAAK,GAAGoK,yBAAW,CAACnK,KAAK,CAAC8M,OAAO,MAAM,CAAC;EACvE,MAAMs9D,QAAQ,GAAGD,OAAO,GAAG,MAAM,GAAG,GAAG;EACvC,MAAME,MAAM,GAAGF,OAAO,GAAG,MAAM,GAAG,GAAG;EAErC,IAAIG,OAAO;EACX,IAAIC,KAAK;EACTnrE,OAAO,CAACsI,WAAW,CAAE7W,IAAI,IAAK;IAC5B,MAAM/F,IAAI,GAAG+F,IAAI,CAACwP,aAAa,CAAC,CAAC;IACjC,IAAI,CAACiqE,OAAO,IAAIx/E,IAAI,KAAKs/E,QAAQ,EAAE;MACjCE,OAAO,GAAGz5E,IAAI,CAACzQ,QAAQ;IACzB,CAAC,MAAM,IAAI,CAACmqF,KAAK,IAAIz/E,IAAI,KAAKu/E,MAAM,EAAE;MACpCE,KAAK,GAAG15E,IAAI,CAACzQ,QAAQ;IACvB;EACF,CAAC,CAAC;;EAEF;EACA,IAAI,EAAEkqF,OAAO,IAAIC,KAAK,CAAC,EAAE;IACvBD,OAAO,GAAGlrE,OAAO,CAACgH,UAAU,CAAChmB,QAAQ;IACrCmqF,KAAK,GAAGnrE,OAAO,CAACmH,SAAS,CAACnmB,QAAQ;EACpC;EAEA,IAAIkqF,OAAO,IAAIC,KAAK,EAAE;IACpB,MAAMC,KAAK,GAAGD,KAAK,CAACxmE,KAAK,CAAC,CAAC,CAACE,GAAG,CAACqmE,OAAO,CAAC;IAExC,MAAMG,IAAI,GAAGrrE,OAAO,CAACsH,WAAW;IAChC,MAAMiY,EAAE,GAAGvf,OAAO,CAACoH,aAAa;IAChC,MAAMyjE,EAAE,GAAGtrD,EAAE,CAAC5a,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC2kG,IAAI,CAAC;IAE/B,MAAMC,MAAM,GAAG/rD,EAAE,CAAC5a,KAAK,CAAC,CAAC,CAACE,GAAG,CAACumE,KAAK,CAAC;IACpC,MAAMG,MAAM,GAAGD,MAAM,CAAC3mE,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC2kG,IAAI,CAAC;IACvCV,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACopF,MAAM,CAAC73F,CAAC,EAAE63F,MAAM,CAACpzF,CAAC,EAAEozF,MAAM,CAAC/xF,CAAC,CAAC;IAClDqxF,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAACqpF,MAAM,CAAC93F,CAAC,EAAE83F,MAAM,CAACrzF,CAAC,EAAEqzF,MAAM,CAAChyF,CAAC,CAAC;IAC/C,EAAE2I,GAAG;IACLyoF,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACopF,MAAM,CAAC73F,CAAC,EAAE63F,MAAM,CAACpzF,CAAC,EAAEozF,MAAM,CAAC/xF,CAAC,CAAC;IAClDqxF,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAACqpF,MAAM,CAAC93F,CAAC,EAAE83F,MAAM,CAACrzF,CAAC,EAAEqzF,MAAM,CAAChyF,CAAC,CAAC;IAC/C,EAAE2I,GAAG;IAELyoF,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACq9B,EAAE,CAAC9rC,CAAC,EAAE8rC,EAAE,CAACrnC,CAAC,EAAEqnC,EAAE,CAAChmC,CAAC,CAAC;IACtCqxF,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAAC2oF,EAAE,CAACp3F,CAAC,EAAEo3F,EAAE,CAAC3yF,CAAC,EAAE2yF,EAAE,CAACtxF,CAAC,CAAC;IACnC,EAAE2I,GAAG;IAEL,MAAMspF,MAAM,GAAGjsD,EAAE,CAAC5a,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC0kG,KAAK,CAAC;IACpC,MAAMK,MAAM,GAAGD,MAAM,CAAC7mE,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC2kG,IAAI,CAAC;IACvCV,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACspF,MAAM,CAAC/3F,CAAC,EAAE+3F,MAAM,CAACtzF,CAAC,EAAEszF,MAAM,CAACjyF,CAAC,CAAC;IAClDqxF,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAACupF,MAAM,CAACh4F,CAAC,EAAEg4F,MAAM,CAACvzF,CAAC,EAAEuzF,MAAM,CAAClyF,CAAC,CAAC;IAC/C,EAAE2I,GAAG;IACLyoF,YAAY,CAACzoF,GAAG,CAAC,GAAG,CAACspF,MAAM,CAAC/3F,CAAC,EAAE+3F,MAAM,CAACtzF,CAAC,EAAEszF,MAAM,CAACjyF,CAAC,CAAC;IAClDqxF,SAAS,CAAC1oF,GAAG,CAAC,GAAG,CAACupF,MAAM,CAACh4F,CAAC,EAAEg4F,MAAM,CAACvzF,CAAC,EAAEuzF,MAAM,CAAClyF,CAAC,CAAC;EACjD;AACF;AAEA,SAASmyF,WAAWA,CAAC58D,QAAQ,EAAE68D,QAAQ,EAAEv8B,OAAO,EAAE90B,UAAU,EAAE;EAC5D,MAAMx5B,IAAI,GAAGw5B,UAAU,CAACt2B,KAAK;EAC7B,MAAMkf,KAAK,GAAGoX,UAAU,CAACl3B,GAAG;EAC5B,SAASwoF,QAAQA,CAAC1pF,GAAG,EAAE;IACrB,OAAOA,GAAG,GAAGpB,IAAI,IAAIguB,QAAQ,CAAC5sB,GAAG,GAAG,CAAC,CAAC,CAACslB,QAAQ,GAAGtlB,GAAG,GAAG,CAAC,GAAGA,GAAG;EACjE;EACA,SAAS2pF,QAAQA,CAAC3pF,GAAG,EAAE;IACrB,OAAOA,GAAG,GAAGghB,KAAK,IAAI4L,QAAQ,CAAC5sB,GAAG,GAAG,CAAC,CAAC,CAACslB,QAAQ,GAAGtlB,GAAG,GAAG,CAAC,GAAGA,GAAG;EAClE;EAEA,MAAM0oF,SAAS,GAAG,EAAE;EACpB,MAAMD,YAAY,GAAG,EAAE;EACvB,IAAImB,MAAM,GAAG,CAAC;EACd,SAASC,aAAaA,CAAC5xD,OAAO,EAAE6xD,QAAQ,EAAE;IACxC,MAAMzsD,EAAE,GAAGzQ,QAAQ,CAACqL,OAAO,CAAC,CAAC/S,aAAa,CAACzC,KAAK,CAAC,CAAC,CAAC4F,IAAI,CAACuE,QAAQ,CAACk9D,QAAQ,CAAC,CAAC5kE,aAAa,EAAE,CAAC,IAAI,CAAC;IAChG,MAAMyjE,EAAE,GAAGtrD,EAAE,CAAC5a,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAACooC,QAAQ,CAACqL,OAAO,CAAC,CAAC7S,WAAW,CAAC;IACxDqjE,YAAY,CAACmB,MAAM,CAAC,GAAG,CAACvsD,EAAE,CAAC9rC,CAAC,EAAE8rC,EAAE,CAACrnC,CAAC,EAAEqnC,EAAE,CAAChmC,CAAC,CAAC;IACzCqxF,SAAS,CAACkB,MAAM,EAAE,CAAC,GAAG,CAACjB,EAAE,CAACp3F,CAAC,EAAEo3F,EAAE,CAAC3yF,CAAC,EAAE2yF,EAAE,CAACtxF,CAAC,CAAC;IACxCoxF,YAAY,CAACmB,MAAM,CAAC,GAAG,CAACvsD,EAAE,CAAC9rC,CAAC,EAAE8rC,EAAE,CAACrnC,CAAC,EAAEqnC,EAAE,CAAChmC,CAAC,CAAC;IACzCqxF,SAAS,CAACkB,MAAM,EAAE,CAAC,GAAG,CAACjB,EAAE,CAACp3F,CAAC,EAAEo3F,EAAE,CAAC3yF,CAAC,EAAE2yF,EAAE,CAACtxF,CAAC,CAAC;EAC1C;;EAEA;EACA,MAAM0yF,OAAO,GAAGL,QAAQ,CAACD,QAAQ,CAAC;EAClC,MAAMO,OAAO,GAAGL,QAAQ,CAACz8B,OAAO,CAAC;EACjC,IAAI68B,OAAO,KAAKC,OAAO,EAAE;IACvBpB,wBAAwB,CAACH,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAEh9D,QAAQ,CAAC68D,QAAQ,CAAC,CAAC;IAC7E,OAAO;MAAEhB,YAAY;MAAEC;IAAU,CAAC;EACpC;;EAEA;EACA;;EAEA;EACA,IAAIe,QAAQ,KAAKM,OAAO,EAAE;IACxB;IACAF,aAAa,CAACJ,QAAQ,EAAEE,QAAQ,CAACF,QAAQ,CAAC,CAAC;EAC7C,CAAC,MAAM;IACLjB,UAAU,CAACC,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAE,EAAEh9D,QAAQ,CAAC88D,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC;IAC1EvB,UAAU,CAACC,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAE,EAAEh9D,QAAQ,CAACm9D,OAAO,CAAC,CAAC;EAClE;;EAEA;EACA,KAAK,IAAI/pF,GAAG,GAAGypF,QAAQ,EAAEzpF,GAAG,IAAIktD,OAAO,EAAE,EAAEltD,GAAG,EAAE;IAC9CwoF,UAAU,CAACC,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAE,EAAEh9D,QAAQ,CAAC5sB,GAAG,CAAC,CAAC;EAC9D;;EAEA;EACA,IAAIgqF,OAAO,KAAKL,QAAQ,CAACK,OAAO,CAAC,EAAE;IACjC;IACAH,aAAa,CAAC38B,OAAO,EAAEw8B,QAAQ,CAACx8B,OAAO,CAAC,CAAC;EAC3C,CAAC,MAAM;IACLs7B,UAAU,CAACC,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAE,EAAEh9D,QAAQ,CAACo9D,OAAO,CAAC,CAAC;IAChExB,UAAU,CAACC,YAAY,EAAEC,SAAS,EAAEkB,MAAM,EAAEh9D,QAAQ,CAAC+8D,QAAQ,CAACK,OAAO,CAAC,CAAC,CAAC;EAC1E;EACA,OAAO;IAAEvB,YAAY;IAAEC;EAAU,CAAC;AACpC;AAEA,MAAMuB,aAAa,CAAC;EAClBt7F,WAAWA,CAACi+B,QAAQ,EAAEs9D,QAAQ,EAAEC,MAAM,EAAEt4B,aAAa,EAAErgD,OAAO,EAAE4mB,UAAU,EAAE;IAC1E,MAAMgyD,YAAY,GAAGZ,WAAW,CAAC58D,QAAQ,EAAEs9D,QAAQ,EAAEC,MAAM,EAAE/xD,UAAU,CAAC;IACxE,IAAI,CAACiyD,UAAU,GAAGnC,2BAA2B,CAACkC,YAAY,CAAC1B,SAAS,EAAEl3E,OAAO,CAAC;IAC9E,IAAI,CAAC84E,aAAa,GAAGpC,2BAA2B,CAACkC,YAAY,CAAC3B,YAAY,EAAEj3E,OAAO,CAAC;IAEpF,IAAI,CAAC+4E,MAAM,GAAG,GAAG,IAAIJ,MAAM,GAAGD,QAAQ,GAAG,CAAC,CAAC;IAC3C,IAAI,CAACM,UAAU,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAACD,MAAM,KAAK,CAAC,IAAIJ,MAAM,GAAGD,QAAQ,GAAG,CAAC,CAAC,IAAIr4B,aAAa,GAAG,CAAC,CAAC,CAAC;IAC/F,IAAI,CAAC44B,cAAc,GAAG54B,aAAa;EACrC;EAEA64B,eAAeA,CAAC1qF,GAAG,EAAE2qF,QAAQ,EAAEC,SAAS,EAAE;IACxC,MAAMC,QAAQ,GAAG,IAAI,CAACJ,cAAc;IACpC,MAAMK,MAAM,GAAG,IAAInmG,KAAK,CAACkmG,QAAQ,CAAC;IAClC,MAAME,OAAO,GAAG,IAAIlnE,iGAAa,CAAC,CAAC,EAAE,CAAC,CAAC;IAEvC,MAAMmnE,SAAS,GAAG,IAAI,CAACX,UAAU;IACjC,MAAMY,SAAS,GAAG,IAAI,CAACX,aAAa;IAEpC,IAAIY,YAAY,GAAG,IAAI,CAACX,MAAM,GAAG,IAAI,CAACC,UAAU,IAAIK,QAAQ,GAAG,CAAC,CAAC,GAAG7qF,GAAG;IAEvE,KAAK,IAAImrF,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGN,QAAQ,EAAE,EAAEM,MAAM,EAAE;MAChD,MAAMC,OAAO,GAAG5nG,IAAI,CAACuM,GAAG,CAAC,GAAG,EAAEo7F,MAAM,IAAIN,QAAQ,GAAG,CAAC,CAAC,CAAC;MACtDE,OAAO,CAAClgC,WAAW,CAAC8/B,QAAQ,EAAEC,SAAS,EAAEQ,OAAO,CAAC;MAEjD,MAAMC,OAAO,GAAGL,SAAS,CAACE,YAAY,EAAE,IAAI,CAAC;MAC7C,MAAMI,UAAU,GAAGL,SAAS,CAACC,YAAY,EAAE,IAAI,CAAC;MAChDA,YAAY,IAAI,IAAI,CAACV,UAAU;MAC/B,MAAMe,UAAU,GAAGN,SAAS,CAACC,YAAY,EAAE,IAAI,CAAC;MAEhDJ,MAAM,CAACK,MAAM,CAAC,GAAGlD,UAAU,CAACqD,UAAU,CAAC7oE,KAAK,CAAC,CAAC,EAAE8oE,UAAU,CAAC9oE,KAAK,CAAC,CAAC,EAAE4oE,OAAO,CAAC5oE,KAAK,CAAC,CAAC,CAACE,GAAG,CAAC2oE,UAAU,CAAC,EAAEP,OAAO,CAAC;IAC/G;IAEA,OAAOD,MAAM;EACf;AACF;AAEA,2DAAeb,aAAa;;AC9LG;AACa;AACA;AAE5C,SAAS1D,+BAAYA,CAACpnC,GAAG,EAAE7yC,KAAK,EAAE;EAChC,MAAMk6E,GAAG,GAAG,EAAE;EAEd,KAAK,IAAInjG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGipB,KAAK,EAAE,EAAEjpB,CAAC,EAAE;IAC9B;IACA,MAAMgF,CAAC,GAAG7E,IAAI,CAACC,EAAE,GAAG,GAAG,GAAG,CAAC,GAAGD,IAAI,CAACC,EAAE,GAAGJ,CAAC,GAAGipB,KAAK;IAEjDk6E,GAAG,CAAC/+F,IAAI,CAAC,IAAIo8B,iGAAa,CAACrgC,IAAI,CAACge,GAAG,CAACnZ,CAAC,CAAC,GAAG82D,GAAG,EAAE37D,IAAI,CAAC0K,GAAG,CAAC7F,CAAC,CAAC,GAAG82D,GAAG,EAAE,CAAC,CAAC,CAAC;EACtE;EACA,OAAOqnC,GAAG;AACZ;AAEA,SAASgF,YAAYA,CAACC,MAAM,EAAE7+D,QAAQ,EAAE84D,cAAc,EAAEl0E,OAAO,EAAE9sB,IAAI,EAAEuf,QAAQ,EAAE;EAC/E,KAAK,IAAIynF,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAGF,MAAM,CAACnwG,MAAM,EAAEowG,OAAO,GAAGC,OAAO,EAAE,EAAED,OAAO,EAAE;IAC3E,MAAM/zD,IAAI,GAAG8zD,MAAM,CAACC,OAAO,CAAC,CAAC75F,GAAG;IAChC,MAAM;MAAEumC;IAAW,CAAC,GAAGqzD,MAAM,CAACC,OAAO,CAAC;IACtC,KAAK,IAAIroG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq0C,IAAI,CAACr8C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC3C,MAAMuoG,GAAG,GAAG,CAACj0D,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK,EAAE61B,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG,CAAC;MACxC,MAAM2qF,YAAY,GAAG,IAAI5B,oBAAa,CAACr9D,QAAQ,EAAEg/D,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAElG,cAAc,EAAEl0E,OAAO,EAAE4mB,UAAU,CAAC;MACrG,IAAI0zD,QAAQ,GAAG,IAAI;MACnB,MAAM5B,QAAQ,GAAGvyD,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK,GAAG,CAAC;MAClC,MAAMqoF,MAAM,GAAGxyD,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG,GAAG,CAAC,GAAG,CAAC;MAClC,IAAI6qF,aAAa,GAAGrnG,IAAI,CAACsnG,gBAAgB,CAACp/D,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACzD,KAAK,IAAI5sB,GAAG,GAAGkqF,QAAQ,EAAElqF,GAAG,IAAImqF,MAAM,EAAE,EAAEnqF,GAAG,EAAE;QAC7C,MAAMwnF,MAAM,GAAIxnF,GAAG,GAAG,CAAC,GAAG,CAAE;QAC5B,MAAM43B,OAAO,GAAGhL,QAAQ,CAAC46D,MAAM,CAAC;QAChC,MAAMmD,QAAQ,GAAGjmG,IAAI,CAACsnG,gBAAgB,CAACp0D,OAAO,EAAE53B,GAAG,GAAG,CAAC,CAAC;QACxD,MAAM4qF,SAAS,GAAGlmG,IAAI,CAACsnG,gBAAgB,CAACp0D,OAAO,EAAE,CAAC,GAAI53B,GAAG,GAAG,CAAE,CAAC;QAE/D,MAAM+mF,GAAG,GAAG8E,YAAY,CAACnB,eAAe,CAAC1qF,GAAG,GAAG4rF,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEjB,QAAQ,EAAEC,SAAS,CAAC;QAC/E7D,GAAG,CAACj8C,OAAO,CAACghD,QAAQ,KAAK,IAAI,GAAG/E,GAAG,CAAC,CAAC,CAAC,GAAG+E,QAAQ,CAAC;;QAElD;QACA,MAAMp7B,QAAQ,GAAIi6B,QAAQ,CAACp5F,CAAC,KAAKq5F,SAAS,CAACr5F,CAAC,IAAMo5F,QAAQ,CAAC30F,CAAC,KAAK40F,SAAS,CAAC50F,CAAE;QAC7E;QACA,MAAM26D,MAAM,GAAIg6B,QAAQ,CAACp5F,CAAC,KAAKw6F,aAAa,CAACx6F,CAAC,IAAMo5F,QAAQ,CAAC30F,CAAC,KAAK+1F,aAAa,CAAC/1F,CAAE;QAEnFiO,QAAQ,CAAC2zB,OAAO,EAAEmvD,GAAG,EAAEr2B,QAAQ,EAAEC,MAAM,CAAC;QAExCm7B,QAAQ,GAAG/E,GAAG,CAACrB,cAAc,CAAC;QAC9BqG,aAAa,GAAGnB,SAAS;MAC3B;IACF;EACF;AACF;AAEA,MAAMqB,mBAAmB,SAAS3E,oBAAa,CAAC;EAC9CvE,YAAYA,CAAA,EAAG;IACb,MAAMmJ,aAAa,GAAG,IAAI,CAACzJ,KAAK,CAAC0J,sBAAsB,CAAC,CAAC;IACzD,IAAI,CAACxG,eAAe,GAAG,IAAI,CAAC9C,eAAe,GAAGqJ,aAAa,GAAG,CAAC;IAC/D,OAAO,CAAC3F,+BAAY,CAAC,GAAG,EAAE,IAAI,CAAC1D,eAAe,CAAC,EAAE,IAAI,CAAC8C,eAAe,GAAG,CAAC,EAAE,IAAI,CAACnD,UAAU,CAACI,MAAM,CAACtnG,MAAM,GAAG,CAAC,CAAC;EAC/G;EAEA2qD,MAAMA,CAAA,EAAG;IACP,MAAM;MAAErZ,QAAQ;MAAEn+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAC5C,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAMlxE,OAAO,GAAG9sB,IAAI,CAAC0nG,UAAU,CAAC,CAAC;IACjC,MAAMrsC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,IAAI79B,QAAQ,GAAG,CAAC;IAChB,MAAMonC,QAAQ,GAAG,EAAE;IACnBb,YAAY,CAAC,IAAI,CAAChJ,UAAU,CAAC8J,OAAO,EAAE1/D,QAAQ,EAAE,IAAI,CAAC+4D,eAAe,EAAEn0E,OAAO,EAAE9sB,IAAI,EAAE,UAACkzC,OAAO,EAAEmvD,GAAG,EAAuC;MAAA,IAArCr2B,QAAQ,GAAAzpE,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;MAAA,IAAE0pE,MAAM,GAAA1pE,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;MAClI,MAAMmX,KAAK,GAAGxZ,OAAO,CAAC+iG,eAAe,CAAC/vD,OAAO,EAAEnpC,MAAM,CAAC;MACtD49F,QAAQ,CAACpnC,QAAQ,CAAC,GAAGrtB,OAAO,CAAC30B,MAAM;MACnC88C,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAE8hC,GAAG,EAAEr2B,QAAQ,EAAEC,MAAM,CAAC;MAC5C5Q,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAE,EAAE7mD,KAAK,CAAC;IACjC,CAAC,CAAC;IACF,IAAI,CAACukF,UAAU,GAAG0J,QAAQ;IAC1BtsC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEA1I,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;IACA,MAAM;MAAEz+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAClC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAMlxE,OAAO,GAAG9sB,IAAI,CAAC0nG,UAAU,CAAC,CAAC;IACjC,MAAMrsC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM11D,QAAQ,GAAGF,SAAS,CAACR,WAAW,CAAC,CAAC;IACxC,IAAIu4B,QAAQ,GAAG,CAAC;IAChB,MAAMw+B,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IACvD4mG,YAAY,CAAC,IAAI,CAAChJ,UAAU,CAAC8J,OAAO,EAAEl/D,QAAQ,EAAE,IAAI,CAACu4D,eAAe,EAAEn0E,OAAO,EAAE9sB,IAAI,EAAE,CAACkzC,OAAO,EAAEmvD,GAAG,KAAK;MACrGhnC,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAE8hC,GAAG,CAAC;MAC1B,IAAItD,WAAW,EAAE;QACf1jC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAErgE,OAAO,CAAC+iG,eAAe,CAAC/vD,OAAO,EAAEnpC,MAAM,CAAC,CAAC;MAClE;MACAw2D,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFlF,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;AACF;AAEA,iEAAes2D,mBAAmB;;ACjGE;AAEpC,MAAMM,kBAAkB,SAASjK,gBAAS,CAAC;EACzCS,YAAYA,CAAA,EAAG;IACb,MAAM0I,MAAM,GAAG,IAAI,CAACjJ,UAAU,CAAC8J,OAAO;IACtC,IAAI9kC,WAAW,GAAG,CAAC;IACnB,KAAK,IAAIkkC,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAGF,MAAM,CAACnwG,MAAM,EAAEowG,OAAO,GAAGC,OAAO,EAAE,EAAED,OAAO,EAAE;MAC3E,MAAM/zD,IAAI,GAAG8zD,MAAM,CAACC,OAAO,CAAC,CAAC75F,GAAG;MAChC,KAAK,IAAIxO,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq0C,IAAI,CAACr8C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC3CmkE,WAAW,IAAI7vB,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG,GAAGy2B,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK;MAC5C;IACF;IACA,OAAO,CAAC0lD,WAAW,EAAE,IAAI,CAACq7B,eAAe,CAAC;EAC5C;EAEA58C,MAAMA,CAAA,EAAG;IACP,MAAM;MAAErZ,QAAQ;MAAEn+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAC5C,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,IAAI79B,QAAQ,GAAG,CAAC;IAChB,MAAMonC,QAAQ,GAAG,EAAE;IACnB,MAAMZ,MAAM,GAAG,IAAI,CAACjJ,UAAU,CAAC8J,OAAO;IACtC,MAAM5E,QAAQ,GAAGhjG,IAAI,CAACmiG,eAAe,CAAC,CAAC;IAEvC,KAAK,IAAI6E,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAGF,MAAM,CAACnwG,MAAM,EAAEowG,OAAO,GAAGC,OAAO,EAAE,EAAED,OAAO,EAAE;MAC3E,MAAM/zD,IAAI,GAAG8zD,MAAM,CAACC,OAAO,CAAC,CAAC75F,GAAG;MAChC,KAAK,IAAIxO,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq0C,IAAI,CAACr8C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC3C,MAAM6mG,QAAQ,GAAGvyD,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK;QAC9B,MAAMqoF,MAAM,GAAGxyD,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG;QAC1B,IAAI4mB,OAAO,GAAG8E,QAAQ,CAACs9D,QAAQ,CAAC;QAChC,KAAK,IAAIlqF,GAAG,GAAGkqF,QAAQ,GAAG,CAAC,EAAElqF,GAAG,IAAImqF,MAAM,EAAE,EAAEnqF,GAAG,EAAE;UACjD,MAAM43B,OAAO,GAAGhL,QAAQ,CAAC5sB,GAAG,CAAC;UAC7BqsF,QAAQ,CAACpnC,QAAQ,CAAC,GAAG;YAAEz2C,KAAK,EAAEsZ,OAAO,CAAC7kB,MAAM;YAAEwL,MAAM,EAAEmpB,OAAO,CAAC30B;UAAO,CAAC;UACtE88C,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAEn9B,OAAO,CAAC5C,aAAa,EAAE0S,OAAO,CAAC1S,aAAa,EAAEwiE,QAAQ,CAAC;UAC7E3nC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAErgE,OAAO,CAAC+iG,eAAe,CAAC7/D,OAAO,EAAEr5B,MAAM,CAAC,EAAE7J,OAAO,CAAC+iG,eAAe,CAAC/vD,OAAO,EAAEnpC,MAAM,CAAC,CAAC;UAC1Gw2D,QAAQ,EAAE;UACVn9B,OAAO,GAAG8P,OAAO;QACnB;MACF;IACF;IAEA,IAAI,CAAC+qD,UAAU,GAAG0J,QAAQ;IAC1BtsC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEA1I,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;;IAEA,MAAMN,QAAQ,GAAGM,SAAS,CAACR,WAAW,CAAC,CAAC;IACxC,MAAM;MAAEj+B;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IAClC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,IAAI79B,QAAQ,GAAG,CAAC;IAChB,MAAMwmC,MAAM,GAAG,IAAI,CAACjJ,UAAU,CAAC8J,OAAO;IACtC,MAAM5E,QAAQ,GAAGhjG,IAAI,CAACmiG,eAAe,CAAC,CAAC;IACvC,MAAMpD,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IAEvD,KAAK,IAAI8mG,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAGF,MAAM,CAACnwG,MAAM,EAAEowG,OAAO,GAAGC,OAAO,EAAE,EAAED,OAAO,EAAE;MAC3E,MAAM/zD,IAAI,GAAG8zD,MAAM,CAACC,OAAO,CAAC,CAAC75F,GAAG;MAChC,KAAK,IAAIxO,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq0C,IAAI,CAACr8C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC3C,MAAM6mG,QAAQ,GAAGvyD,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK;QAC9B,MAAMqoF,MAAM,GAAGxyD,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG;QAC1B,IAAI4mB,OAAO,GAAG8E,QAAQ,CAACs9D,QAAQ,CAAC;QAChC,KAAK,IAAIlqF,GAAG,GAAGkqF,QAAQ,GAAG,CAAC,EAAElqF,GAAG,IAAImqF,MAAM,EAAE,EAAEnqF,GAAG,EAAE;UACjD,MAAM43B,OAAO,GAAGhL,QAAQ,CAAC5sB,GAAG,CAAC;UAC7B+/C,GAAG,CAACiG,OAAO,CAACf,QAAQ,EAAEn9B,OAAO,CAAC5C,aAAa,EAAE0S,OAAO,CAAC1S,aAAa,EAAEwiE,QAAQ,CAAC;UAC7E,IAAIjE,WAAW,EAAE;YACf1jC,GAAG,CAACsG,QAAQ,CAACpB,QAAQ,EAAErgE,OAAO,CAAC+iG,eAAe,CAAC7/D,OAAO,EAAEr5B,MAAM,CAAC,EAAE7J,OAAO,CAAC+iG,eAAe,CAAC/vD,OAAO,EAAEnpC,MAAM,CAAC,CAAC;UAC5G;UACAw2D,QAAQ,EAAE;UACVn9B,OAAO,GAAG8P,OAAO;QACnB;MACF;IACF;IAEAmoB,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;EAEA4iB,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAMuM,MAAM,GAAG,EAAE;IACjB,MAAM;MAAEp4B;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,IAAI,CAACQ,KAAK,CAACzqC,OAAO,CAACC,SAAS,EAAEwM,MAAM,CAAC;IACrC,MAAMugC,WAAW,GAAG,IAAI,CAAC5C,UAAU;IACnC;IACA,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG0hE,MAAM,CAAC1pE,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAAC2hE,MAAM,CAAC3hE,CAAC,CAAC,CAACgE,cAAc,CAAC,UAAU,CAAC,EAAE;QACzC;MACF;MACA,MAAM;QAAE49D;MAAS,CAAC,GAAGD,MAAM,CAAC3hE,CAAC,CAAC;MAC9B,MAAMmpG,KAAK,GAAGjH,WAAW,CAAC/hG,IAAI,CAACyN,KAAK,CAACg0D,QAAQ,GAAG,CAAC,CAAC,CAAC;MACnD,MAAMuiC,MAAM,GAAGviC,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAGunC,KAAK,CAACh+E,KAAK,GAAGg+E,KAAK,CAAC/9E,MAAM;MAC9D,IAAI+4E,MAAM,GAAG56D,QAAQ,CAACtxC,MAAM,EAAE;QAC5B0pE,MAAM,CAAC3hE,CAAC,CAAC,CAACy6B,OAAO,GAAG8O,QAAQ,CAAC46D,MAAM,CAAC;QACpC/uC,UAAU,CAAChxD,IAAI,CAACu9D,MAAM,CAAC3hE,CAAC,CAAC,CAAC;MAC5B;IACF;EACF;EAEA6/F,eAAeA,CAAC9kE,IAAI,EAAE;IACpB,MAAM6kE,UAAU,GAAG,EAAE;IACrB,MAAMsC,WAAW,GAAG,IAAI,CAAC5C,UAAU;IACnC,MAAM;MAAE/1D;IAAS,CAAC,GAAG,IAAI,CAAC41D,UAAU;IACpC,KAAK,IAAIn/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGiiG,WAAW,CAACjqG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAClD,MAAMmpG,KAAK,GAAGjH,WAAW,CAACliG,CAAC,CAAC;MAC5B,IAAIupC,QAAQ,CAAC4/D,KAAK,CAACh+E,KAAK,CAAC,CAACmW,KAAK,GAAGvG,IAAI,EAAE;QACtC6kE,UAAU,CAACx7F,IAAI,CAACpE,CAAC,GAAG,CAAC,CAAC;MACxB;MACA,IAAIupC,QAAQ,CAAC4/D,KAAK,CAAC/9E,MAAM,CAAC,CAACkW,KAAK,GAAGvG,IAAI,EAAE;QACvC6kE,UAAU,CAACx7F,IAAI,CAACpE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MAC5B;IACF;IACA,OAAO4/F,UAAU;EACnB;AACF;AAEA,gEAAesJ,kBAAkB;;ACtHG;AACE;AAEtC,SAASE,gBAAgBA,CAACrwF,SAAS,EAAE;EACnC,OAAOA,SAAS,GAAG,CAAC,GAAG,CAAC,GAAGA,SAAS;AACtC;AAEA,MAAMswF,UAAU,SAASpK,gBAAS,CAAC;EACjCS,YAAYA,CAAA,EAAG;IACb,MAAM4J,YAAY,GAAG,IAAI,CAAClK,KAAK,CAACmK,mBAAmB,CAAC,CAAC;IACrD,MAAMC,YAAY,GAAG,IAAI,CAACpK,KAAK,CAACqK,iBAAiB,CAAC,CAAC;IACnD,MAAMC,QAAQ,GAAG,IAAI,CAACvK,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEpkE;IAAM,CAAC,GAAG,IAAI,CAACgkE,UAAU;IACjC,IAAIwK,UAAU,GAAG,CAAC;IAClB,KAAK,IAAI3pG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGypG,QAAQ,CAACzxG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C2pG,UAAU,IAAI,IAAI,CAACC,YAAY,CAACzuE,KAAK,CAACuuE,QAAQ,CAAC1pG,CAAC,CAAC,CAAC,EAAEspG,YAAY,EAAEE,YAAY,CAAC;IACjF;IACA,OAAO,CAACG,UAAU,EAAE,IAAI,CAACnK,eAAe,CAAC;EAC3C;EAEAoK,YAAYA,CAACz9E,IAAI,EAAEm9E,YAAY,EAAEE,YAAY,EAAE;IAC7C,IAAIzwF,SAAS,GAAG,CAAC;IACjB,IAAIuwF,YAAY,KAAK,CAACE,YAAY,IAAIr9E,IAAI,CAAC+R,KAAK,KAAKR,SAAI,CAAC6C,QAAQ,CAAC/C,QAAQ,CAAC,EAAE;MAC5EzkB,SAAS,GAAGqwF,gBAAgB,CAACj9E,IAAI,CAAC8R,MAAM,CAAC;IAC3C;IACA,OAAOllB,SAAS;EAClB;EAEAm8C,OAAOA,CAACC,SAAS,EAAEC,UAAU,EAAE;IAC7B,MAAM;MAAEj6B;IAAM,CAAC,GAAG,IAAI,CAACgkE,UAAU;IACjC,MAAMx9B,MAAM,GAAG,EAAE;IACjB,IAAI,CAACg+B,KAAK,CAACzqC,OAAO,CAACC,SAAS,EAAEwM,MAAM,CAAC;IACrC,MAAM+nC,QAAQ,GAAG,IAAI,CAACpK,UAAU;IAChC;IACA,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG0hE,MAAM,CAAC1pE,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,IAAI,CAAC2hE,MAAM,CAAC3hE,CAAC,CAAC,CAACgE,cAAc,CAAC,UAAU,CAAC,EAAE;QACzC;MACF;MACA,MAAM;QAAE49D;MAAS,CAAC,GAAGD,MAAM,CAAC3hE,CAAC,CAAC;MAC9B,MAAM6pG,OAAO,GAAGH,QAAQ,CAACvpG,IAAI,CAACyN,KAAK,CAACg0D,QAAQ,GAAG,CAAC,CAAC,CAAC;MAClD,IAAIioC,OAAO,GAAG1uE,KAAK,CAACljC,MAAM,EAAE;QAC1B,MAAMk0B,IAAI,GAAGgP,KAAK,CAAC0uE,OAAO,CAAC;QAC3BloC,MAAM,CAAC3hE,CAAC,CAAC,CAACksB,IAAI,GAAG01C,QAAQ,GAAG,CAAC,KAAK,CAAC,GAAGz1C,IAAI,CAAC2R,KAAK,GAAG3R,IAAI,CAAC4R,MAAM;QAC9Dq3B,UAAU,CAAChxD,IAAI,CAACu9D,MAAM,CAAC3hE,CAAC,CAAC,CAAC;MAC5B;IACF;EACF;EAEA6/F,eAAeA,CAAC9kE,IAAI,EAAEy6B,SAAS,EAAE;IAC/B,MAAMoqC,UAAU,GAAG,EAAE;IACrB,MAAM;MAAEzkE;IAAM,CAAC,GAAG,IAAI,CAACgkE,UAAU;IACjC,MAAM+C,WAAW,GAAG,IAAI,CAAC5C,UAAU;IACnC,KAAK,IAAIt/F,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGiiG,WAAW,CAACjqG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAClD,MAAMmsB,IAAI,GAAGgP,KAAK,CAAC+mE,WAAW,CAACliG,CAAC,CAAC,CAAC;MAClC,IAAKmsB,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,GAAGA,IAAI,KAAM,CAACy6B,SAAS,IAAKrpC,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAGA,IAAK,CAAC,EAAE;QACzE6kE,UAAU,CAACx7F,IAAI,CAAC,CAAC,GAAGpE,CAAC,CAAC;MACxB;MACA,IAAKmsB,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAGA,IAAI,KAAM,CAACy6B,SAAS,IAAKrpC,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,GAAGA,IAAK,CAAC,EAAE;QACzE6kE,UAAU,CAACx7F,IAAI,CAAC,CAAC,GAAGpE,CAAC,GAAG,CAAC,CAAC;MAC5B;IACF;IACA,OAAO4/F,UAAU;EACnB;AACF;AAEA,wDAAeyJ,UAAU;;ACjEM;AACO;AAEtC,MAAMS,kBAAkB,SAAST,iBAAU,CAAC;EAC1CzmD,MAAMA,CAAA,EAAG;IACP,MAAM8mD,QAAQ,GAAG,IAAI,CAACvK,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEpkE,KAAK;MAAE/vB;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IACzC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM6J,YAAY,GAAGjoG,IAAI,CAACkoG,mBAAmB,CAAC,CAAC;IAC/C,MAAMC,YAAY,GAAGnoG,IAAI,CAACooG,iBAAiB,CAAC,CAAC;IAE7C,MAAMpF,QAAQ,GAAGhjG,IAAI,CAACmiG,eAAe,CAAC,CAAC;IACvC,MAAMuG,WAAW,GAAG1oG,IAAI,CAAC2oG,iBAAiB,CAAC,CAAC;IAC5C,IAAIC,OAAO;IACX,MAAMC,OAAO,GAAG,IAAI1pE,iGAAa,CAAC,CAAC;IACnC,MAAM2pE,QAAQ,GAAG,IAAI3pE,iGAAa,CAAC,CAAC;IACpC,IAAI4pE,WAAW,GAAG,CAAC;IACnB,MAAMlI,WAAW,GAAG,EAAE;IACtB,KAAK,IAAIliG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGypG,QAAQ,CAACzxG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmsB,IAAI,GAAGgP,KAAK,CAACuuE,QAAQ,CAAC1pG,CAAC,CAAC,CAAC;MAC/B,MAAMqqG,KAAK,GAAGl+E,IAAI,CAAC2R,KAAK;MACxB,MAAMwsE,KAAK,GAAGn+E,IAAI,CAAC4R,MAAM;MACzB,MAAMwsE,KAAK,GAAGF,KAAK,CAAC5uF,QAAQ;MAC5B,MAAM+uF,KAAK,GAAGF,KAAK,CAAC7uF,QAAQ;MAC5BwuF,OAAO,GAAG99E,IAAI,CAAC0T,aAAa,CAAC,CAAC;MAC9B,MAAMjC,KAAK,GAAG,IAAI,CAACgsE,YAAY,CAACz9E,IAAI,EAAEm9E,YAAY,EAAEE,YAAY,CAAC;MACjE,MAAMiB,MAAM,GAAGtqG,IAAI,CAACuM,GAAG,CAACrL,IAAI,CAAC6+F,cAAc,CAACmK,KAAK,CAAC,EAAEhpG,IAAI,CAAC6+F,cAAc,CAACoK,KAAK,CAAC,CAAC;MAC/E,MAAM1oD,IAAI,GAAG,CAAC,GAAG6oD,MAAM,GAAG7sE,KAAK;MAC/B,MAAM8sE,YAAY,GAAGpB,YAAY,GAAGnpG,IAAI,CAACuM,GAAG,CAAC23F,QAAQ,EAAEziD,IAAI,GAAG,GAAG,IAAI,GAAG,GAAGmoD,WAAW,CAAC,CAAC,GAAG1F,QAAQ;MAEnG,KAAK,IAAIzwF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgqB,KAAK,EAAE,EAAEhqB,CAAC,EAAE;QAC9B,MAAM7T,KAAK,GAAG6hD,IAAI,IAAIhkB,KAAK,GAAG,CAAC,KAAK,CAAC,GACjC,CAAC,CAAEhqB,CAAC,GAAG,CAAC,GAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,GACzC,CAAE,CAACA,CAAC,GAAG,CAAC,IAAI,CAAC,GAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7CsuF,WAAW,CAACkI,WAAW,CAAC,GAAGj+E,IAAI,CAACvM,MAAM;QACtCsqF,OAAO,CAAC16F,IAAI,CAAC+6F,KAAK,CAAC;QACnBL,OAAO,CAACjrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACvCoqG,QAAQ,CAAC36F,IAAI,CAACg7F,KAAK,CAAC;QACpBL,QAAQ,CAAClrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACxC28D,GAAG,CAACiG,OAAO,CAACynC,WAAW,EAAEF,OAAO,EAAEC,QAAQ,EAAEO,YAAY,CAAC;QACzDhuC,GAAG,CAACsG,QAAQ,CAAConC,WAAW,EAAE,EAAE7oG,OAAO,CAAC4+F,YAAY,CAACkK,KAAK,EAAEj/F,MAAM,CAAC,EAAE7J,OAAO,CAAC4+F,YAAY,CAACmK,KAAK,EAAEl/F,MAAM,CAAC,CAAC;MACvG;IACF;IAEAsxD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;IACd,IAAI,CAACgtD,UAAU,GAAG4C,WAAW;EAC/B;EAEAt4D,aAAaA,CAACC,SAAS,EAAE;IACvB,MAAM6/D,QAAQ,GAAG,IAAI,CAACvK,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEpkE;IAAM,CAAC,GAAG,IAAI,CAACgkE,UAAU;IACjC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM6J,YAAY,GAAGjoG,IAAI,CAACkoG,mBAAmB,CAAC,CAAC;IAC/C,MAAMC,YAAY,GAAGnoG,IAAI,CAACooG,iBAAiB,CAAC,CAAC;IAE7C,MAAMpF,QAAQ,GAAGhjG,IAAI,CAACmiG,eAAe,CAAC,CAAC;IACvC,MAAMuG,WAAW,GAAG1oG,IAAI,CAAC2oG,iBAAiB,CAAC,CAAC;IAC5C,IAAIC,OAAO;IACX,MAAMC,OAAO,GAAG,IAAI1pE,iGAAa,CAAC,CAAC;IACnC,MAAM2pE,QAAQ,GAAG,IAAI3pE,iGAAa,CAAC,CAAC;IACpC,IAAI4pE,WAAW,GAAG,CAAC;IACnB,MAAMhK,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IACvD,KAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGypG,QAAQ,CAACzxG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmsB,IAAI,GAAGgP,KAAK,CAACuuE,QAAQ,CAAC1pG,CAAC,CAAC,CAAC;MAC/B,MAAMqqG,KAAK,GAAGl+E,IAAI,CAAC2R,KAAK;MACxB,MAAMwsE,KAAK,GAAGn+E,IAAI,CAAC4R,MAAM;MACzB,MAAMwsE,KAAK,GAAG1gE,SAAS,CAACpM,UAAU,CAAC4sE,KAAK,CAACpiG,KAAK,CAAC,CAACm3B,KAAK,CAAC,CAAC;MACvD,MAAMorE,KAAK,GAAG3gE,SAAS,CAACpM,UAAU,CAAC6sE,KAAK,CAACriG,KAAK,CAAC;MAC/CgiG,OAAO,GAAG99E,IAAI,CAAC0T,aAAa,CAAC,CAAC;MAC9B,MAAMjC,KAAK,GAAG,IAAI,CAACgsE,YAAY,CAACz9E,IAAI,EAAEm9E,YAAY,EAAEE,YAAY,CAAC;MACjE,MAAMiB,MAAM,GAAGtqG,IAAI,CAACuM,GAAG,CAACrL,IAAI,CAAC6+F,cAAc,CAACmK,KAAK,CAAC,EAAEhpG,IAAI,CAAC6+F,cAAc,CAACoK,KAAK,CAAC,CAAC;MAC/E,MAAM1oD,IAAI,GAAG,CAAC,GAAG6oD,MAAM,GAAG7sE,KAAK;MAC/B,MAAM8sE,YAAY,GAAGpB,YAAY,GAAGnpG,IAAI,CAACuM,GAAG,CAAC23F,QAAQ,EAAEziD,IAAI,GAAG,GAAG,IAAI,GAAG,GAAGmoD,WAAW,CAAC,CAAC,GAAG1F,QAAQ;MAEnG,KAAK,IAAIzwF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgqB,KAAK,EAAE,EAAEhqB,CAAC,EAAE;QAC9B,MAAM7T,KAAK,GAAG6hD,IAAI,IAAIhkB,KAAK,GAAG,CAAC,KAAK,CAAC,GACjC,CAAC,CAAEhqB,CAAC,GAAG,CAAC,GAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,GACzC,CAAE,CAACA,CAAC,GAAG,CAAC,IAAI,CAAC,GAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7Cs2F,OAAO,CAAC16F,IAAI,CAAC+6F,KAAK,CAAC;QACnBL,OAAO,CAACjrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACvCoqG,QAAQ,CAAC36F,IAAI,CAACg7F,KAAK,CAAC;QACpBL,QAAQ,CAAClrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACxC28D,GAAG,CAACiG,OAAO,CAACynC,WAAW,EAAEF,OAAO,EAAEC,QAAQ,EAAEO,YAAY,CAAC;QACzD,IAAItK,WAAW,EAAE;UACf1jC,GAAG,CAACsG,QAAQ,CAAConC,WAAW,EAAEvgE,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE8oG,KAAK,CAAC,EAAExgE,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE+oG,KAAK,CAAC,CAAC;QAC3G;QACAF,WAAW,EAAE;MACf;IACF;IACA1tC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;AACF;AAEA,gEAAew3D,kBAAkB;;ACjGF;AACO;AAEtC,MAAMa,SAAS,GAAG,IAAI;AAEtB,MAAMC,eAAe,SAASvB,iBAAU,CAAC;EACvCzmD,MAAMA,CAAA,EAAG;IACP,MAAM8mD,QAAQ,GAAG,IAAI,CAACvK,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEpkE,KAAK;MAAE/vB;IAAO,CAAC,GAAG,IAAI,CAAC+zF,UAAU;IACzC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM6J,YAAY,GAAGjoG,IAAI,CAACkoG,mBAAmB,CAAC,CAAC;IAC/C,MAAMC,YAAY,GAAGnoG,IAAI,CAACooG,iBAAiB,CAAC,CAAC;IAE7C,MAAMoB,OAAO,GAAG,IAAIrqE,iGAAa,CAAC,CAAC;IAEnC,MAAM0pE,OAAO,GAAG,IAAI1pE,iGAAa,CAAC,CAAC;IACnC,MAAM2pE,QAAQ,GAAG,IAAI3pE,iGAAa,CAAC,CAAC;IACpC,IAAI4pE,WAAW,GAAG,CAAC;IACnB,MAAMlI,WAAW,GAAG,EAAE;IACtB,KAAK,IAAIliG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGypG,QAAQ,CAACzxG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmsB,IAAI,GAAGgP,KAAK,CAACuuE,QAAQ,CAAC1pG,CAAC,CAAC,CAAC;MAC/B,MAAMqqG,KAAK,GAAGl+E,IAAI,CAAC2R,KAAK;MACxB,MAAMwsE,KAAK,GAAGn+E,IAAI,CAAC4R,MAAM;MACzB,MAAMwsE,KAAK,GAAGF,KAAK,CAAC5uF,QAAQ;MAC5B,MAAM+uF,KAAK,GAAGF,KAAK,CAAC7uF,QAAQ;MAC5B,MAAMqvF,OAAO,GAAGT,KAAK,CAAClvE,KAAK,CAACljC,MAAM,KAAK,CAAC;MACxC,MAAM8yG,OAAO,GAAGT,KAAK,CAACnvE,KAAK,CAACljC,MAAM,KAAK,CAAC;MACxC4yG,OAAO,CAAC38B,UAAU,CAACs8B,KAAK,EAAED,KAAK,CAAC;MAChC,MAAMnlG,GAAG,GAAGylG,OAAO,CAAC5yG,MAAM,CAAC,CAAC;MAC5B,MAAMgyG,OAAO,GAAG99E,IAAI,CAAC0T,aAAa,CAAC,CAAC;MAEpC,MAAMjC,KAAK,GAAG,IAAI,CAACgsE,YAAY,CAACz9E,IAAI,EAAEm9E,YAAY,EAAEE,YAAY,CAAC;MAEjE,KAAK,IAAI51F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgqB,KAAK,EAAE,EAAEhqB,CAAC,EAAE;QAC9Bs2F,OAAO,CAAC16F,IAAI,CAAC+6F,KAAK,CAAC;QACnBJ,QAAQ,CAAC36F,IAAI,CAACg7F,KAAK,CAAC;QACpB,IAAIzqG,KAAK,GAAI69B,KAAK,GAAG,CAAC,KAAK,CAAC,GACxB,CAAC,CAAEhqB,CAAC,GAAG,CAAC,GAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,GACzC,CAAE,CAACA,CAAC,GAAG,CAAC,IAAI,CAAC,GAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAE;QAC7CsuF,WAAW,CAACkI,WAAW,CAAC,GAAGj+E,IAAI,CAACvM,MAAM;QACtC,IAAIge,KAAK,KAAK,CAAC,IAAK,CAACktE,OAAO,IAAI,CAACC,OAAQ,EAAE;UACzChrG,KAAK,IAAI,GAAG;UACZA,KAAK,IAAI,CAAC,CAAC;QACb;QAEA,IAAI,CAAC+qG,OAAO,IAAI,CAACC,OAAO,IAAIntE,KAAK,GAAG,CAAC,IAAI79B,KAAK,KAAK,CAAC,EAAE;UACpDmqG,OAAO,CAAC1iC,WAAW,CAAC+iC,KAAK,EAAEC,KAAK,EAAEG,SAAS,GAAIvlG,GAAI,CAAC;UACpD+kG,QAAQ,CAAC3iC,WAAW,CAAC+iC,KAAK,EAAEC,KAAK,EAAE,GAAG,GAAGG,SAAS,GAAIvlG,GAAI,CAAC;QAC7D;QAEArF,KAAK,IAAI4qG,SAAS;QAElBT,OAAO,CAACjrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACvCoqG,QAAQ,CAAClrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACxC28D,GAAG,CAACiG,OAAO,CAACynC,WAAW,EAAEF,OAAO,EAAEC,QAAQ,CAAC;QAC3CztC,GAAG,CAACsG,QAAQ,CAAConC,WAAW,EAAE,EAAE7oG,OAAO,CAAC4+F,YAAY,CAACkK,KAAK,EAAEj/F,MAAM,CAAC,EAAE7J,OAAO,CAAC4+F,YAAY,CAACmK,KAAK,EAAEl/F,MAAM,CAAC,CAAC;MACvG;IACF;IACAsxD,GAAG,CAACpqB,QAAQ,CAAC,CAAC;IACd,IAAI,CAACgtD,UAAU,GAAG4C,WAAW;EAC/B;EAEAt4D,aAAaA,CAACC,SAAS,EAAE;IACvB;IACA;IACA,MAAM6/D,QAAQ,GAAG,IAAI,CAACvK,UAAU,CAACI,MAAM;IACvC,MAAM;MAAEpkE;IAAM,CAAC,GAAG,IAAI,CAACgkE,UAAU;IACjC,MAAM99F,IAAI,GAAG,IAAI,CAAC+9F,KAAK;IACvB,MAAM79F,OAAO,GAAG,IAAI,CAAC89F,QAAQ;IAC7B,MAAM3iC,GAAG,GAAG,IAAI,CAAC+iC,IAAI;IACrB,MAAM6J,YAAY,GAAGjoG,IAAI,CAACkoG,mBAAmB,CAAC,CAAC;IAC/C,MAAMC,YAAY,GAAGnoG,IAAI,CAACooG,iBAAiB,CAAC,CAAC;IAE7C,MAAMoB,OAAO,GAAG,IAAIrqE,iGAAa,CAAC,CAAC;IAEnC,MAAM0pE,OAAO,GAAG,IAAI1pE,iGAAa,CAAC,CAAC;IACnC,MAAM2pE,QAAQ,GAAG,IAAI3pE,iGAAa,CAAC,CAAC;IACpC,IAAI4pE,WAAW,GAAG,CAAC;IACnB,MAAMhK,WAAW,GAAGv2D,SAAS,CAACw2D,gBAAgB,CAAC9+F,OAAO,CAAC;IACvD,KAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGypG,QAAQ,CAACzxG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAMmsB,IAAI,GAAGgP,KAAK,CAACuuE,QAAQ,CAAC1pG,CAAC,CAAC,CAAC;MAC/B,MAAMqqG,KAAK,GAAGl+E,IAAI,CAAC2R,KAAK;MACxB,MAAMwsE,KAAK,GAAGn+E,IAAI,CAAC4R,MAAM;MACzB,MAAMwsE,KAAK,GAAG1gE,SAAS,CAACpM,UAAU,CAAC4sE,KAAK,CAACpiG,KAAK,CAAC,CAACm3B,KAAK,CAAC,CAAC;MACvD,MAAMorE,KAAK,GAAG3gE,SAAS,CAACpM,UAAU,CAAC6sE,KAAK,CAACriG,KAAK,CAAC;MAC/C,MAAM6iG,OAAO,GAAGT,KAAK,CAAClvE,KAAK,CAACljC,MAAM,KAAK,CAAC;MACxC,MAAM8yG,OAAO,GAAGT,KAAK,CAACnvE,KAAK,CAACljC,MAAM,KAAK,CAAC;MACxC4yG,OAAO,CAAC38B,UAAU,CAACs8B,KAAK,EAAED,KAAK,CAAC;MAChC,MAAMnlG,GAAG,GAAGylG,OAAO,CAAC5yG,MAAM,CAAC,CAAC;MAC5B,MAAMgyG,OAAO,GAAG99E,IAAI,CAAC0T,aAAa,CAAC,CAAC;MAEpC,MAAMjC,KAAK,GAAG,IAAI,CAACgsE,YAAY,CAACz9E,IAAI,EAAEm9E,YAAY,EAAEE,YAAY,CAAC;MAEjE,KAAK,IAAI51F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgqB,KAAK,EAAE,EAAEhqB,CAAC,EAAE;QAC9Bs2F,OAAO,CAAC16F,IAAI,CAAC+6F,KAAK,CAAC;QACnBJ,QAAQ,CAAC36F,IAAI,CAACg7F,KAAK,CAAC;QACpB,IAAIzqG,KAAK,GAAI69B,KAAK,GAAG,CAAC,KAAK,CAAC,GACxB,CAAC,CAAEhqB,CAAC,GAAG,CAAC,GAAI,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC,GACzC,CAAE,CAACA,CAAC,GAAG,CAAC,IAAI,CAAC,GAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAE;QAC7C,IAAIgqB,KAAK,KAAK,CAAC,IAAK,CAACktE,OAAO,IAAI,CAACC,OAAQ,EAAE;UACzChrG,KAAK,IAAI,GAAG;UACZA,KAAK,IAAI,CAAC,CAAC;QACb;QAEA,IAAI,CAAC+qG,OAAO,IAAI,CAACC,OAAO,IAAIntE,KAAK,GAAG,CAAC,IAAI79B,KAAK,KAAK,CAAC,EAAE;UACpDmqG,OAAO,CAAC1iC,WAAW,CAAC+iC,KAAK,EAAEC,KAAK,EAAEG,SAAS,GAAIvlG,GAAI,CAAC;UACpD+kG,QAAQ,CAAC3iC,WAAW,CAAC+iC,KAAK,EAAEC,KAAK,EAAE,GAAG,GAAGG,SAAS,GAAIvlG,GAAI,CAAC;QAC7D;QAEArF,KAAK,IAAI4qG,SAAS;QAElBT,OAAO,CAACjrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACvCoqG,QAAQ,CAAClrC,eAAe,CAACgrC,OAAO,EAAElqG,KAAK,CAAC;QACxC28D,GAAG,CAACiG,OAAO,CAACynC,WAAW,EAAEF,OAAO,EAAEC,QAAQ,CAAC;QAC3C,IAAI/J,WAAW,EAAE;UACf1jC,GAAG,CAACsG,QAAQ,CAAConC,WAAW,EAAEvgE,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE8oG,KAAK,CAAC,EAAExgE,SAAS,CAACs2D,YAAY,CAAC5+F,OAAO,EAAE+oG,KAAK,CAAC,CAAC;QAC3G;QACAF,WAAW,EAAE;MACf;IACF;IACA1tC,GAAG,CAACpqB,QAAQ,CAAC,CAAC;EAChB;AACF;AAEA,6DAAes4D,eAAe;;AC9HoB;AACE;AACM;AACZ;AACQ;AACA;AACM;AACJ;AACA;AACF;AACA;AACN;AAEhD,6CAAe;EACb3K,gBAAgB;EAChBK,iBAAiB;EACjBG,oBAAoB;EACpBe,cAAc;EACd4B,kBAAkB;EAClBS,kBAAkB;EAClBW,qBAAqB;EACrBG,mBAAmB;EACnBiE,mBAAmB;EACnBM,kBAAkB;EAClBY,kBAAkB;EAClBc,eAAeA,EAAAA,sBAAAA;AACjB,CAAC;;AC1BmC;AAEpC,MAAMI,cAAc,SAASh2C,WAAO,CAAC;EACnC1pD,WAAWA,CAACy0F,UAAU,EAAE3B,SAAS,EAAEx7D,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IACzF,KAAK,CAAC,CAAC;IACP,MAAMuD,IAAI,GAAG,IAAI;IACjB,IAAI,CAAC8lC,QAAQ,GAAGnG,OAAO;IACvB,IAAI,CAACw8D,KAAK,GAAG/9F,IAAI;IACjB,MAAM0/B,KAAK,GAAG6B,OAAO,CAACyU,QAAQ,CAAC,CAAC;IAChC,MAAMgnD,UAAU,GAAGz7D,OAAO,CAACuP,aAAa,CAAC,CAAC;IAE1CvP,OAAO,CAAC4a,gBAAgB,CAAEC,SAAS,IAAK;MACtC,MAAMuiD,QAAQ,GAAG,EAAE;MACnB,IAAI1oF,SAAS,GAAG,CAAC;MACjBmmC,SAAS,CAAC1a,WAAW,CAAE7W,IAAI,IAAK;QAC9B,IAAI,CAACjpB,IAAI,CAACgoG,UAAU,CAAC/+E,IAAI,EAAE6O,IAAI,CAAC,EAAE;UAChC;QACF;QACAilE,QAAQ,CAAC1oF,SAAS,EAAE,CAAC,GAAG4U,IAAI,CAACjkB,KAAK;MACpC,CAAC,CAAC;MACF,IAAIqP,SAAS,KAAK,CAAC,EAAE;QACnB;MACF;MACA,MAAM4zF,UAAU,GAAG,IAAInL,UAAU,CAAC3B,SAAS,EAAE;QAC3Cr9D,KAAK;QACLw+D,MAAM,EAAES,QAAQ;QAChB50F,MAAM,EAAEw3B;MACV,CAAC,EAAErhC,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,CAAC;MACvDwrG,UAAU,CAAC9pE,UAAU,GAAGqc,SAAS;MACjCx6C,IAAI,CAAC9B,GAAG,CAAC+pG,UAAU,CAAC;IACtB,CAAC,CAAC;EACJ;EAEAD,UAAUA,CAAC/+E,IAAI,EAAE6O,IAAI,EAAE;IACrB,OAAO7O,IAAI,CAAC6O,IAAI,GAAGA,IAAI;EACzB;EAEA26B,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzB,MAAMG,WAAW,GAAG,EAAE;IACtB,MAAM;MAAEL;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI61C,OAAO,GAAG,CAAC;IACf,KAAK,IAAInrG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIs1D,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,EAAE;QACzB,MAAM01C,QAAQ,GAAG91C,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,CAAC36B,IAAI,EAAEy6B,SAAS,CAAC;QACvD,KAAK,IAAI5hD,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAGq9F,QAAQ,CAACnzG,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAC/C,MAAMy3F,QAAQ,GAAGD,QAAQ,CAACx3F,CAAC,CAAC;UAC5By3F,QAAQ,CAACjqE,UAAU,GAAGk0B,QAAQ,CAACt1D,CAAC,CAAC,CAACohC,UAAU;UAC5Cu0B,WAAW,CAACw1C,OAAO,EAAE,CAAC,GAAGE,QAAQ;QACnC;MACF;IACF;IACA,OAAO11C,WAAW;EACpB;AACF;AAEA,gEAAeq1C,cAAc;;ACvDiB;AAE9C,MAAMM,oBAAoB,SAASN,yBAAc,CAAC;EAChDC,UAAUA,CAAC/+E,IAAI,EAAE6O,IAAI,EAAE;IACrB,IAAI,EAAE7O,IAAI,CAAC6O,IAAI,GAAGA,IAAI,CAAC,EAAE;MACvB,OAAO,KAAK;IACd;IAEA,MAAM;MAAEI;IAAM,CAAC,GAAGjP,IAAI;IACtB,KAAK,IAAIlsB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGk7B,KAAK,CAACljC,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC5C,IAAKm7B,KAAK,CAACn7B,CAAC,CAAC,CAAC89B,KAAK,CAAC/C,IAAI,GAAGA,IAAI,IAAMI,KAAK,CAACn7B,CAAC,CAAC,CAAC+9B,MAAM,CAAChD,IAAI,GAAGA,IAAK,EAAE;QACjE,OAAO,KAAK;MACd;IACF;IACA,OAAO,IAAI;EACb;AACF;AAEA,sEAAeuwE,oBAAoB;;AClBC;AAEpC,MAAMC,iBAAiB,SAASv2C,WAAO,CAAC;EACtC1pD,WAAWA,CAACkgG,YAAY,EAAEpN,SAAS,EAAEx7D,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IAC3F,KAAK,CAAC,CAAC;IACP,MAAMuD,IAAI,GAAG,IAAI;IACjB,IAAI,CAAC8lC,QAAQ,GAAGnG,OAAO;IACvB,MAAM2G,QAAQ,GAAG3G,OAAO,CAACyG,WAAW,CAAC,CAAC;IACtC,MAAMg1D,UAAU,GAAGz7D,OAAO,CAACuP,aAAa,CAAC,CAAC;IAE1CvP,OAAO,CAAC4a,gBAAgB,CAAEC,SAAS,IAAK;MACtC,IAAI0mB,WAAW,GAAG,CAAC;MACnB,MAAM3wB,MAAM,GAAG,EAAE;MACjBiK,SAAS,CAACpT,cAAc,CAAE5P,OAAO,IAAK;QACpC,IAAIx3B,IAAI,CAACwoG,aAAa,CAAChxE,OAAO,EAAEM,IAAI,CAAC,EAAE;UACrCyY,MAAM,CAAC2wB,WAAW,EAAE,CAAC,GAAG1pC,OAAO,CAAC7a,MAAM;QACxC;MACF,CAAC,CAAC;MAEF,IAAIukD,WAAW,KAAK,CAAC,EAAE;QACrB;MACF;MACA,MAAMunC,aAAa,GAAG,IAAIF,YAAY,CAACpN,SAAS,EAAE;QAChD70D,QAAQ;QACRg2D,MAAM,EAAE/rD,MAAM;QACdpoC,MAAM,EAAEw3B;MACV,CAAC,EAAErhC,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,CAAC;MACvDgsG,aAAa,CAACtqE,UAAU,GAAGqc,SAAS;MACpCx6C,IAAI,CAAC9B,GAAG,CAACuqG,aAAa,CAAC;IACzB,CAAC,CAAC;EACJ;EAEAC,YAAYA,CAAClxE,OAAO,EAAEM,IAAI,EAAE;IAC1B,OAAON,OAAO,CAAC6G,KAAK,GAAGvG,IAAI;EAC7B;EAEA26B,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzB,MAAMG,WAAW,GAAG,EAAE;IACtB,MAAM;MAAEL;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI61C,OAAO,GAAG,CAAC;IACf,KAAK,IAAInrG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIs1D,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,EAAE;QACzB,MAAM01C,QAAQ,GAAG91C,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,CAAC36B,IAAI,EAAEy6B,SAAS,CAAC;QACvD,KAAK,IAAI5hD,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAGq9F,QAAQ,CAACnzG,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAC/C,MAAMy3F,QAAQ,GAAGD,QAAQ,CAACx3F,CAAC,CAAC;UAC5By3F,QAAQ,CAACjqE,UAAU,GAAGk0B,QAAQ,CAACt1D,CAAC,CAAC,CAACohC,UAAU;UAC5Cu0B,WAAW,CAACw1C,OAAO,EAAE,CAAC,GAAGE,QAAQ;QACnC;MACF;IACF;IACA,OAAO11C,WAAW;EACpB;AACF;AAEA,mEAAe41C,iBAAiB;;ACtDmB;AAEnD,MAAMM,gBAAgB,SAASD,4BAAgB,CAAC;EAC9CH,aAAaA,CAAChxE,OAAO,EAAEM,IAAI,EAAE;IAC3B,OAAOA,IAAI,GAAGN,OAAO,CAAC6G,KAAK,IAAI7G,OAAO,CAACuH,UAAU,KAAK,IAAI;EAC5D;AACF;AACA,kEAAe6pE,gBAAgB;;ACPK;AAEpC,MAAMC,gBAAgB,SAAS92C,WAAO,CAAC;EACrC1pD,WAAWA,CAACkgG,YAAY,EAAEpN,SAAS,EAAEx7D,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IAC3F,KAAK,CAAC,CAAC;IACP,MAAMuD,IAAI,GAAG,IAAI;IACjB,IAAI,CAAC8lC,QAAQ,GAAGnG,OAAO;IACvB,MAAM2G,QAAQ,GAAG3G,OAAO,CAACyG,WAAW,CAAC,CAAC;IACtC,MAAMg1D,UAAU,GAAGz7D,OAAO,CAACuP,aAAa,CAAC,CAAC;IAE1CvP,OAAO,CAAC4a,gBAAgB,CAAEC,SAAS,IAAK;MACtC,MAAM5J,OAAO,GAAG4J,SAAS,CAAC9I,wBAAwB,CAAC5Z,IAAI,CAAC;MAExD,IAAIopC,WAAW,GAAG,CAAC;MACnB,MAAM3wB,MAAM,GAAG,EAAE;MACjB,KAAK,IAAI60D,OAAO,GAAG,CAAC,EAAEC,OAAO,GAAGz0D,OAAO,CAAC57C,MAAM,EAAEowG,OAAO,GAAGC,OAAO,EAAE,EAAED,OAAO,EAAE;QAC5E,MAAM/zD,IAAI,GAAGT,OAAO,CAACw0D,OAAO,CAAC,CAAC75F,GAAG;QACjC,KAAK,IAAIxO,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq0C,IAAI,CAACr8C,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;UAC3C,KAAK,IAAI4T,CAAC,GAAG0gC,IAAI,CAACt0C,CAAC,CAAC,CAACye,KAAK,EAAEstF,IAAI,GAAGz3D,IAAI,CAACt0C,CAAC,CAAC,CAAC6d,GAAG,EAAEjK,CAAC,IAAIm4F,IAAI,EAAE,EAAEn4F,CAAC,EAAE;YAC9D4/B,MAAM,CAAC2wB,WAAW,EAAE,CAAC,GAAG56B,QAAQ,CAAC31B,CAAC,CAAC,CAACgM,MAAM;UAC5C;QACF;MACF;MAEA,IAAIukD,WAAW,KAAK,CAAC,EAAE;QACrB;MACF;MACA,MAAMunC,aAAa,GAAG,IAAIF,YAAY,CAACpN,SAAS,EAAE;QAChD70D,QAAQ;QACRg2D,MAAM,EAAE/rD,MAAM;QACdy1D,OAAO,EAAEp1D,OAAO;QAChBzoC,MAAM,EAAEw3B;MACV,CAAC,EAAErhC,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,CAAC;MACvDgsG,aAAa,CAACtqE,UAAU,GAAGqc,SAAS;MACpCx6C,IAAI,CAAC9B,GAAG,CAACuqG,aAAa,CAAC;IACzB,CAAC,CAAC;EACJ;EAEAh2C,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzB,MAAMG,WAAW,GAAG,EAAE;IACtB,MAAM;MAAEL;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI61C,OAAO,GAAG,CAAC;IACf,KAAK,IAAInrG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIs1D,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,EAAE;QACzB,MAAM01C,QAAQ,GAAG91C,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,CAAC36B,IAAI,EAAEy6B,SAAS,CAAC;QACvD,KAAK,IAAI5hD,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAGq9F,QAAQ,CAACnzG,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAC/C,MAAMy3F,QAAQ,GAAGD,QAAQ,CAACx3F,CAAC,CAAC;UAC5By3F,QAAQ,CAACjqE,UAAU,GAAGk0B,QAAQ,CAACt1D,CAAC,CAAC,CAACohC,UAAU;UAC5Cu0B,WAAW,CAACw1C,OAAO,EAAE,CAAC,GAAGE,QAAQ;QACnC;MACF;IACF;IACA,OAAO11C,WAAW;EACpB;AACF;AAEA,kEAAem2C,gBAAgB;;ACxDK;AAEpC,MAAME,cAAc,SAASh3C,WAAO,CAAC;EACnC1pD,WAAWA,CAAC+9F,UAAU,EAAEjL,SAAS,EAAEx7D,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IACzF,KAAK,CAAC,CAAC;IACP,MAAMuD,IAAI,GAAG,IAAI;IACjB,IAAI,CAAC8lC,QAAQ,GAAGnG,OAAO;IACvB,MAAMzH,KAAK,GAAGyH,OAAO,CAACynB,QAAQ,CAAC,CAAC;IAChC,MAAMg0C,UAAU,GAAGz7D,OAAO,CAACuP,aAAa,CAAC,CAAC;IAE1CvP,OAAO,CAAC4a,gBAAgB,CAAEC,SAAS,IAAK;MACtC,MAAMisD,QAAQ,GAAG,EAAE;MACnB,IAAIC,UAAU,GAAG,CAAC;MAClBlsD,SAAS,CAAC9hB,WAAW,CAAExP,IAAI,IAAK;QAC9B,MAAMk+E,KAAK,GAAGl+E,IAAI,CAAC2R,KAAK;QACxB,MAAMwsE,KAAK,GAAGn+E,IAAI,CAAC4R,MAAM;QACzB,IAAI,EAAEssE,KAAK,CAACtvE,IAAI,GAAGA,IAAI,CAAC,IAAI,EAAEuvE,KAAK,CAACvvE,IAAI,GAAGA,IAAI,CAAC,EAAE;UAChD;QACF;QACA2uE,QAAQ,CAACC,UAAU,EAAE,CAAC,GAAGx9E,IAAI,CAACvM,MAAM;MACtC,CAAC,CAAC;MACF,IAAI+pF,UAAU,KAAK,CAAC,EAAE;QACpB;MACF;MACA,MAAMsC,UAAU,GAAG,IAAI5C,UAAU,CAACjL,SAAS,EAAE;QAC3CjjE,KAAK;QACLokE,MAAM,EAAEmK,QAAQ;QAChBt+F,MAAM,EAAEw3B;MACV,CAAC,EAAErhC,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,CAAC;MACvDusG,UAAU,CAAC7qE,UAAU,GAAGqc,SAAS;MACjCx6C,IAAI,CAAC9B,GAAG,CAAC8qG,UAAU,CAAC;IACtB,CAAC,CAAC;EACJ;EAEAv2C,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzB,MAAMG,WAAW,GAAG,EAAE;IACtB,MAAM;MAAEL;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI61C,OAAO,GAAG,CAAC;IACf,KAAK,IAAInrG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIs1D,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,EAAE;QACzB,MAAM01C,QAAQ,GAAG91C,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,CAAC36B,IAAI,EAAEy6B,SAAS,CAAC;QACvD,KAAK,IAAI5hD,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAGq9F,QAAQ,CAACnzG,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAC/C,MAAMy3F,QAAQ,GAAGD,QAAQ,CAACx3F,CAAC,CAAC;UAC5By3F,QAAQ,CAACjqE,UAAU,GAAGk0B,QAAQ,CAACt1D,CAAC,CAAC,CAACohC,UAAU;UAC5Cu0B,WAAW,CAACw1C,OAAO,EAAE,CAAC,GAAGE,QAAQ;QACnC;MACF;IACF;IACA,OAAO11C,WAAW;EACpB;AACF;AAEA,gEAAeq2C,cAAc;;ACpDO;AAEpC,MAAME,iBAAiB,SAASl3C,WAAO,CAAC;EACtC1pD,WAAWA,CAACy2F,aAAa,EAAE3D,SAAS,EAAEx7D,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IAC5F,KAAK,CAAC,CAAC;IACP,MAAMuD,IAAI,GAAG,IAAI;IACjB,IAAI,CAAC8lC,QAAQ,GAAGnG,OAAO;IACvB,MAAM7B,KAAK,GAAG6B,OAAO,CAACyU,QAAQ,CAAC,CAAC;IAChC,MAAMgnD,UAAU,GAAGz7D,OAAO,CAACuP,aAAa,CAAC,CAAC;IAC1C,IAAI,CAAC9wC,IAAI,CAACooG,iBAAiB,CAAC,CAAC,EAAE;MAC7B;IACF;IAEA7mE,OAAO,CAAC4a,gBAAgB,CAAEC,SAAS,IAAK;MACtC,MAAMuiD,QAAQ,GAAG,EAAE;MACnB,IAAI77B,WAAW,GAAG,CAAC;MACnB,MAAMhwB,MAAM,GAAG,EAAE;MACjB,IAAIg4D,QAAQ,GAAG,CAAC;MAChB1uD,SAAS,CAACzJ,YAAY,CAAEC,KAAK,IAAK;QAChC,MAAMyuD,QAAQ,GAAGzuD,KAAK,CAAClT,KAAK;QAC5B,IAAIqrE,QAAQ,GAAG,CAAC;QAChB,KAAK,IAAIpsG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGyiG,QAAQ,CAACzqG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;UAC/C,IAAI,CAAC0iG,QAAQ,CAAC1iG,CAAC,CAAC,CAAC+6B,IAAI,GAAGA,IAAI,MAAM,CAAC,EAAE;YACnC,EAAEqxE,QAAQ;YACVpM,QAAQ,CAAC77B,WAAW,EAAE,CAAC,GAAGu+B,QAAQ,CAAC1iG,CAAC,CAAC,CAACiI,KAAK;UAC7C;QACF;QACA,IAAImkG,QAAQ,GAAG,CAAC,EAAE;UAChBj4D,MAAM,CAACg4D,QAAQ,EAAE,CAAC,GAAGl4D,KAAK;QAC5B;MACF,CAAC,CAAC;MAEF,MAAMi3D,UAAU,GAAG,IAAInJ,aAAa,CAAC3D,SAAS,EAAE;QAC9CjqD,MAAM;QACNpT,KAAK;QACLw+D,MAAM,EAAES,QAAQ;QAChB50F,MAAM,EAAEw3B;MACV,CAAC,EAAErhC,OAAO,EAAEF,IAAI,EAAEg9F,UAAU,EAAE7xE,cAAc,EAAE9sB,QAAQ,CAAC;MACvDwrG,UAAU,CAAC9pE,UAAU,GAAGqc,SAAS;MACjCx6C,IAAI,CAAC9B,GAAG,CAAC+pG,UAAU,CAAC;IACtB,CAAC,CAAC;EACJ;EAEAx1C,SAASA,CAAC36B,IAAI,EAAEy6B,SAAS,EAAE;IACzB,MAAMG,WAAW,GAAG,EAAE;IACtB,MAAM;MAAEL;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI61C,OAAO,GAAG,CAAC;IACf,KAAK,IAAInrG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,IAAIs1D,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,EAAE;QACzB,MAAM01C,QAAQ,GAAG91C,QAAQ,CAACt1D,CAAC,CAAC,CAAC01D,SAAS,CAAC36B,IAAI,EAAEy6B,SAAS,CAAC;QACvD,KAAK,IAAI5hD,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAGq9F,QAAQ,CAACnzG,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAC/C,MAAMy3F,QAAQ,GAAGD,QAAQ,CAACx3F,CAAC,CAAC;UAC5By3F,QAAQ,CAACjqE,UAAU,GAAGk0B,QAAQ,CAACt1D,CAAC,CAAC,CAACohC,UAAU;UAC5Cu0B,WAAW,CAACw1C,OAAO,EAAE,CAAC,GAAGE,QAAQ;QACnC;MACF;IACF;IACA,OAAO11C,WAAW;EACpB;AACF;AAEA,mEAAeu2C,iBAAiB;;AC7Dc;AACY;AACN;AACF;AACA;AACJ;AACM;AAEpD,iDAAe;EACbG,KAAK,EAAErB,yBAAc;EACrBsB,WAAW,EAAEhB,+BAAoB;EACjCiB,QAAQ,EAAEhB,4BAAiB;EAC3BiB,OAAO,EAAEX,2BAAgB;EACzBY,OAAO,EAAEX,2BAAgB;EACzBY,KAAK,EAAEV,yBAAc;EACrBW,QAAQ,EAAET,4BAAiBA;AAC7B,CAAC;;AChBkD;AACrB;AACoB;AAElD,SAASW,UAAUA,CAACC,OAAO,EAAEC,SAAS,EAAE93C,KAAK,EAAE;EAC7C,OAAO,UAAUryB,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,EAAE;IACvE,OAAO,IAAIqtG,SAAS,CAAC93C,KAAK,EAAE63C,OAAO,EAAElqE,OAAO,EAAErhC,OAAO,EAAEF,IAAI,EAAEmrB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,CAAC;EAC9F,CAAC;AACH;AAEA,MAAMstG,aAAa,CAAC;EAClB,OAAOC,YAAYA,CAACjQ,IAAI,EAAEj8F,QAAQ,EAAE;IAClC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACC,aAAa,CAACH,IAAI,EAAEj8F,QAAQ,CAAC;IAE5D,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACP,KAAK,EAAEjhD,MAAM,CAAC60C,gBAAgB,CAAC;EAC1E;EAEA,OAAOkN,oBAAoBA,CAACnQ,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IACxD,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACO,aAAa,CAACT,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAE1E,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACN,WAAW,EAAElhD,MAAM,CAAC60C,gBAAgB,CAAC;EAChF;EAEA,OAAOmN,cAAcA,CAACpQ,IAAI,EAAEj8F,QAAQ,EAAE;IACpC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACK,iBAAiB,CAACP,IAAI,EAAEj8F,QAAQ,CAAC;IAEhE,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACF,KAAK,EAAEthD,MAAM,CAAC0+C,kBAAkB,CAAC;EAC5E;EAEA,OAAOuD,UAAUA,CAACrQ,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IAC9C,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACM,aAAa,CAACR,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAE1E,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACF,KAAK,EAAEthD,MAAM,CAACw/C,eAAe,CAAC;EACzE;EAEA,OAAO0C,aAAaA,CAACtQ,IAAI,EAAEj8F,QAAQ,EAAE;IACnC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACQ,oBAAoB,CAACV,IAAI,EAAEj8F,QAAQ,CAAC;IAEnE,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACH,OAAO,EAAErhD,MAAM,CAACw9C,mBAAmB,CAAC;EAC/E;EAEA,OAAO2E,WAAWA,CAACvQ,IAAI,EAAEj8F,QAAQ,EAAE;IACjC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACE,uBAAuB,CAACJ,IAAI,EAAEj8F,QAAQ,CAAC;IAEtE,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACH,OAAO,EAAErhD,MAAM,CAAC89C,kBAAkB,CAAC;EAC9E;EAEA,OAAOsE,cAAcA,CAACxQ,IAAI,EAAEj8F,QAAQ,EAAE;IACpC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACC,aAAa,CAACH,IAAI,EAAEj8F,QAAQ,CAAC;IAE5D,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACJ,OAAO,EAAEphD,MAAM,CAACu5C,mBAAmB,CAAC;EAC/E;EAEA,OAAO8I,gBAAgBA,CAACzQ,IAAI,EAAEj8F,QAAQ,EAAE;IACtC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACK,iBAAiB,CAACP,IAAI,EAAEj8F,QAAQ,CAAC;IAEhE,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACJ,OAAO,EAAEphD,MAAM,CAACo5C,qBAAqB,CAAC;EACjF;EAEA,OAAOkJ,WAAWA,CAAC1Q,IAAI,EAAEj8F,QAAQ,EAAE;IACjC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACQ,oBAAoB,CAACV,IAAI,EAAEj8F,QAAQ,CAAC;IAEnE,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACD,QAAQ,EAAEvhD,MAAM,CAACg4C,kBAAkB,CAAC;EAC/E;EAEA,OAAOuK,WAAWA,CAAC3Q,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IAC/C,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACS,kBAAkB,CAACX,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAE/E,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACD,QAAQ,EAAEvhD,MAAM,CAACy4C,kBAAkB,CAAC;EAC/E;EAEA,OAAO+J,YAAYA,CAAC5Q,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IAChD,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACU,kBAAkB,CAACZ,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAE/E,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACP,KAAK,EAAEjhD,MAAM,CAACk1C,iBAAiB,CAAC;EAC3E;EAEA,OAAOuN,iBAAiBA,CAAC7Q,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IACrD,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACW,oBAAoB,CAACb,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAEjF,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACP,KAAK,EAAEjhD,MAAM,CAACk1C,iBAAiB,CAAC;EAC3E;EAEA,OAAOwN,gBAAgBA,CAAC9Q,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,EAAE;IACpD,MAAMuQ,UAAU,GAAGhQ,kBAAW,CAACY,YAAY,CAACd,IAAI,EAAEj8F,QAAQ,EAAE47F,YAAY,CAAC;IAEzE,OAAOkQ,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACP,KAAK,EAAEjhD,MAAM,CAACq1C,oBAAoB,CAAC;EAC9E;EAEA,OAAOsN,aAAaA,CAAC/Q,IAAI,EAAEj8F,QAAQ,EAAE;IACnC,MAAMmsG,UAAU,GAAGhQ,kBAAW,CAACa,YAAY,CAACf,IAAI,EAAEj8F,QAAQ,CAAC;IAE3D,OAAO8rG,UAAU,CAACK,UAAU,EAAEN,UAAU,CAACP,KAAK,EAAEjhD,MAAM,CAACo2C,cAAc,CAAC;EACxE;AACF;AAEA,2DAAewL,aAAa;;AChGL;AAC6C;AACpC;AACG;AACU;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMgB,IAAI,CAAC;EACT1iG,WAAWA,CAAC5K,IAAI,EAAE;IAChB,IAAI,IAAI,CAAC4K,WAAW,KAAK0iG,IAAI,EAAE;MAC7B,MAAM,IAAIjrG,KAAK,CAAC,qCAAqC,CAAC;IACxD;IACA;AACJ;AACA;AACA;IACI,IAAI,CAACrC,IAAI,GAAGc,wGAAO,CAACzD,KAAK,CAAConB,UAAU,CAAC,IAAI,CAACpkB,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAAC,IAAI,CAAC7M,EAAE,CAAC,EAAE,IAAI,CAAC,EAAEze,IAAI,CAAC;EACrF;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEutG,QAAQA,CAAA,EAAG;IACT,MAAMrmF,IAAI,GAAG7pB,KAAK,CAAC0pB,WAAW,CAAC,IAAI,CAAC/mB,IAAI,EAAE,IAAI,CAACK,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAAC,IAAI,CAAC7M,EAAE,CAAC,CAAC;IAC3E,IAAI,CAAC3d,0GAAS,CAAComB,IAAI,CAAC,EAAE;MACpB,OAAO,CAAC,IAAI,CAACzI,EAAE,EAAEyI,IAAI,CAAC;IACxB;IACA,OAAO,IAAI,CAACzI,EAAE;EAChB;EAEA+uF,aAAaA,CAACtrE,OAAO,EAAErhC,OAAO,EAAEw5B,IAAI,EAAEr7B,QAAQ,EAAE;IAC9C,MAAM8sB,cAAc,GAAG,IAAI,CAAC9rB,IAAI,CAAC8rB,cAAc,GAAG,IAAI,CAAC9rB,IAAI,CAAC8rB,cAAc,CAAC,IAAI,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC,GAAG,CAAC;IAC5G,MAAMha,SAAS,GAAG,IAAI,CAAC+2F,SAAS;IAChC,MAAMn3F,UAAU,GAAGI,SAAS,CAACnf,MAAM;IACnC,MAAM+jE,KAAK,GAAG,IAAI0D,QAAQ,CAAC1K,OAAO,CAAC,CAAC;IACpC,MAAM/xD,IAAI,GAAG,IAAI;IACjB,KAAK,IAAIjD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgX,UAAU,EAAE,EAAEhX,CAAC,EAAE;MACnC,IAAIouG,SAAS,GAAGh3F,SAAS,CAACpX,CAAC,CAAC;MAC5B,IAAI28F,YAAY,GAAG,CAAC,CAAC;MACrB,IAAIn7F,0GAAS,CAAC4sG,SAAS,CAAC,EAAE;QACxBzR,YAAY,GAAGyR,SAAS,CAAC,CAAC,CAAC,CAACzqG,IAAI,CAAC,IAAI,CAAC;QACtC,CAACyqG,SAAS,CAAC,GAAGA,SAAS;MACzB;MACA,MAAMn5C,KAAK,GAAGtlB,oBAAO,CAACy+D,SAAS,CAAC,CAAC,IAAI,EAAE,IAAI,CAACrtG,QAAQ,EAAE47F,YAAY,CAAC;MACnE,MAAM0R,QAAQ,GAAG,IAAIp5C,KAAK,CAACryB,OAAO,EAAErhC,OAAO,EAAE0B,IAAI,EAAEupB,cAAc,EAAEuO,IAAI,EAAEr7B,QAAQ,CAAC;MAClF,IAAI2uG,QAAQ,CAAC/4C,QAAQ,CAACr9D,MAAM,GAAG,CAAC,EAAE;QAChC+jE,KAAK,CAAC76D,GAAG,CAACktG,QAAQ,CAAC;MACrB;IACF;IACA,OAAOryC,KAAK;EACd;AACF;AAEA+E,0BAAoB,CAACitC,IAAI,CAACjqG,SAAS,CAAC;;AAEpC;AACA;AACA;AACA;AACAiqG,IAAI,CAACjqG,SAAS,CAACob,EAAE,GAAG,IAAI;;AAExB;AACA;AACA;AACA;AACA6uF,IAAI,CAACjqG,SAAS,CAACoqG,SAAS,GAAG,EAAE;AAE7B,iDAAeH,IAAI;;ACnFO;AAE1B,SAASM,eAAeA,CAAA,EAAG;EACzB,OAAO;IACLphF,SAAS,EAAE,IAAI,CAACxsB,IAAI,CAACwsB;EACvB,CAAC;AACH;AAEA,MAAMqhF,SAAS,SAASP,UAAI,CAAC;EAC3B,OAAO7uF,EAAE,GAAG,IAAI;EAEhB7T,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAACytG,SAAS,GAAG,IAAI,CAACA,SAAS,CAACzqG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C,MAAM0nD,MAAM,GAAG,IAAI,CAAC+iD,SAAS;IAC7B,KAAK,IAAInuG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGmrD,MAAM,CAACnzD,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7CorD,MAAM,CAACprD,CAAC,CAAC,GAAG,CAACorD,MAAM,CAACprD,CAAC,CAAC,EAAEsuG,eAAe,CAAC;IAC1C;EACF;EAEA/E,mBAAmBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAAC7oG,IAAI,CAAC2rB,SAAS;EAC5B;EAEA6zE,cAAcA,CAAA,EAAG;IACf,OAAO,IAAI,CAACx/F,IAAI,CAACwrB,IAAI;EACvB;EAEA43E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACpjG,IAAI,CAACssB,QAAQ;EAC3B;EAEAg3E,oBAAoBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACtjG,IAAI,CAACusB,SAAS;EAC5B;EAEAw8E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAAC/oG,IAAI,CAAC6rB,QAAQ;EAC3B;AACF;AAEAgiF,SAAS,CAACxqG,SAAS,CAACob,EAAE,GAAG,IAAI;AAC7BovF,SAAS,CAACxqG,SAAS,CAACoiB,IAAI,GAAG,OAAO;AAClCooF,SAAS,CAACxqG,SAAS,CAACyqG,SAAS,GAAG,OAAO;AACvCD,SAAS,CAACxqG,SAAS,CAACoqG,SAAS,GAAG,CAC9B,aAAa,EACb,YAAY,EACZ,sBAAsB,CACvB;AAED,sDAAeI,SAAS;;AClDxB;AAC0B;AAE1B,MAAME,YAAY,SAAST,UAAI,CAAC;EAC9B,OAAO7uF,EAAE,GAAG,IAAI;EAEhB+gF,cAAcA,CAACjxD,KAAK,EAAE;IACpB,OAAO,IAAI,CAACvuC,IAAI,CAACyrB,IAAI;EACvB;EAEAq3E,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAAC9iG,IAAI,CAACyrB,IAAI;EACvB;EAEA69E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACtpG,IAAI,CAAC0rB,KAAK;EACxB;EAEAk3E,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC5iG,IAAI,CAAC4rB,OAAO;EAC1B;EAEAm9E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAAC/oG,IAAI,CAAC6rB,QAAQ;EAC3B;EAEAg9E,mBAAmBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAAC7oG,IAAI,CAAC2rB,SAAS;EAC5B;AACF;AAEAoiF,YAAY,CAAC1qG,SAAS,CAACob,EAAE,GAAG,IAAI;AAChCsvF,YAAY,CAAC1qG,SAAS,CAACoiB,IAAI,GAAG,UAAU;AACxCsoF,YAAY,CAAC1qG,SAAS,CAACyqG,SAAS,GAAG,UAAU;AAC7CC,YAAY,CAAC1qG,SAAS,CAACoqG,SAAS,GAAG,CACjC,cAAc,EACd,gBAAgB,EAChB,aAAa,CACd;AAED,yDAAeM,YAAY;;ACxC3B;AAC0B;AAE1B,MAAMC,kBAAkB,SAASV,UAAI,CAAC;EACpC,OAAO7uF,EAAE,GAAG,IAAI;EAEhB+gF,cAAcA,CAACh0E,IAAI,EAAE;IACnB,OAAOA,IAAI,CAAChU,OAAO,CAAC2C,MAAM,GAAG,IAAI,CAACna,IAAI,CAACwrB,IAAI;EAC7C;EAEAs3E,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAAC9iG,IAAI,CAACyrB,IAAI;EACvB;EAEAm3E,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAAC5iG,IAAI,CAAC4rB,OAAO;EAC1B;EAEAm9E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAAC/oG,IAAI,CAAC6rB,QAAQ;EAC3B;EAEAy9E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACtpG,IAAI,CAAC0rB,KAAK;EACxB;EAEAm9E,mBAAmBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAAC7oG,IAAI,CAAC2rB,SAAS;EAC5B;AACF;AAEAqiF,kBAAkB,CAAC3qG,SAAS,CAACob,EAAE,GAAG,IAAI;AACtCuvF,kBAAkB,CAAC3qG,SAAS,CAACoiB,IAAI,GAAG,kBAAkB;AACtDuoF,kBAAkB,CAAC3qG,SAAS,CAACyqG,SAAS,GAAG,OAAO;AAChDE,kBAAkB,CAAC3qG,SAAS,CAACoqG,SAAS,GAAG,CACvC,cAAc,EACd,gBAAgB,EAChB,aAAa,CACd;AAED,+DAAeO,kBAAkB;;ACxCP;AAE1B,MAAMC,eAAe,SAASX,UAAI,CAAC;EACjC,OAAO7uF,EAAE,GAAG,IAAI;EAEhB+gF,cAAcA,CAACh0E,IAAI,EAAE;IACnB,OAAOA,IAAI,CAAChU,OAAO,CAAC2C,MAAM;EAC5B;AACF;AAEA8zF,eAAe,CAAC5qG,SAAS,CAACob,EAAE,GAAG,IAAI;AACnCwvF,eAAe,CAAC5qG,SAAS,CAACoiB,IAAI,GAAG,eAAe;AAChDwoF,eAAe,CAAC5qG,SAAS,CAACyqG,SAAS,GAAG,KAAK;AAC3CG,eAAe,CAAC5qG,SAAS,CAACoqG,SAAS,GAAG,CAAC,cAAc,CAAC;AAEtD,4DAAeQ,eAAe;;ACfJ;AAE1B,MAAMC,SAAS,SAASZ,UAAI,CAAC;EAC3B,OAAO7uF,EAAE,GAAG,IAAI;EAEhBqkF,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAAC9iG,IAAI,CAACma,MAAM;EACzB;AACF;AAEA+zF,SAAS,CAAC7qG,SAAS,CAACob,EAAE,GAAG,IAAI;AAC7ByvF,SAAS,CAAC7qG,SAAS,CAACoiB,IAAI,GAAG,OAAO;AAClCyoF,SAAS,CAAC7qG,SAAS,CAACyqG,SAAS,GAAG,OAAO;AACvCI,SAAS,CAAC7qG,SAAS,CAACoqG,SAAS,GAAG,CAAC,aAAa,CAAC;AAE/C,sDAAeS,SAAS;;ACfO;AACL;AAE1B,MAAMC,QAAQ,SAASb,UAAI,CAAC;EAC1B,OAAO7uF,EAAE,GAAG,IAAI;EAEhBwpF,gBAAgBA,CAACmG,QAAQ,EAAE;IACzB,OAAO,IAAI,CAACC,WAAW;EACzB;EAEAjG,sBAAsBA,CAAA,EAAG;IACvB,OAAO,IAAI,CAACpoG,IAAI,CAACwtB,mBAAmB;EACtC;EAEA66E,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACroG,IAAI,CAACytB,OAAO;EAC1B;EAEA+/E,aAAaA,CAACtrE,OAAO,EAAErhC,OAAO,EAAEw5B,IAAI,EAAEr7B,QAAQ,EAAE;IAC9C,MAAMo8D,GAAG,GAAG,IAAI,CAACp7D,IAAI,CAACma,MAAM;IAC5B,IAAI,CAACk0F,WAAW,GAAG,IAAIvuE,iGAAa,CAACs7B,GAAG,EAAEA,GAAG,CAAC;IAE9C,OAAOkyC,UAAI,CAACjqG,SAAS,CAACmqG,aAAa,CAACvqG,IAAI,CAAC,IAAI,EAAEi/B,OAAO,EAAErhC,OAAO,EAAEw5B,IAAI,EAAEr7B,QAAQ,CAAC;EAClF;AACF;AAEAmvG,QAAQ,CAAC9qG,SAAS,CAACob,EAAE,GAAG,IAAI;AAC5B0vF,QAAQ,CAAC9qG,SAAS,CAACoiB,IAAI,GAAG,MAAM;AAChC0oF,QAAQ,CAAC9qG,SAAS,CAACyqG,SAAS,GAAG,MAAM;AACrCK,QAAQ,CAAC9qG,SAAS,CAACoqG,SAAS,GAAG,CAAC,eAAe,CAAC;AAEhD,qDAAeU,QAAQ;;AC/BQ;AACL;AAE1B,MAAMG,WAAW,SAAShB,UAAI,CAAC;EAC7B,OAAO7uF,EAAE,GAAG,IAAI;EAEhB7T,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX;IACA,IAAI,CAACuuG,QAAQ,GAAG,CAAC,CAAC;EACpB;EAEAC,qBAAqBA,CAACz0E,OAAO,EAAE;IAC7B,MAAMrP,MAAM,GAAGqP,OAAO,CAAC8H,YAAY,CAAC,CAAC;IACrC,IAAI,CAACnX,MAAM,IAAI,CAACA,MAAM,CAACqf,OAAO,EAAE;MAC9B,OAAO,IAAI,CAACskE,WAAW;IACzB;IACA,MAAMI,OAAO,GAAG,IAAI,CAACF,QAAQ,CAAC7jF,MAAM,CAACqf,OAAO,CAAC;IAC7C,IAAI,CAAC0kE,OAAO,EAAE;MACZ,OAAO,IAAI,CAACJ,WAAW;IACzB;IACA,IAAI3jF,MAAM,CAACof,IAAI,KAAK/P,OAAO,EAAE;MAC3B,OAAO00E,OAAO,CAAC1wF,KAAK;IACtB;IACA,OAAO0wF,OAAO,CAAC7uG,MAAM;EACvB;EAEA8uG,mBAAmBA,CAAC30E,OAAO,EAAE;IAC3B,MAAMrP,MAAM,GAAGqP,OAAO,CAAC8H,YAAY,CAAC,CAAC;IACrC,IAAInX,MAAM,KAAK,IAAI,IAAI,CAACA,MAAM,CAACqf,OAAO,EAAE;MACtC,OAAO,IAAI,CAACskE,WAAW;IACzB;IACA,MAAMI,OAAO,GAAG,IAAI,CAACF,QAAQ,CAAC7jF,MAAM,CAACqf,OAAO,CAAC;IAC7C,IAAI,CAAC0kE,OAAO,EAAE;MACZ,OAAO,IAAI,CAACJ,WAAW;IACzB;IACA,IAAI3jF,MAAM,CAACof,IAAI,KAAK/P,OAAO,EAAE;MAC3B,OAAO,IAAI,CAAC40E,SAAS;IACvB;IACA,OAAOF,OAAO,CAAC7uG,MAAM;EACvB;EAEAqoG,gBAAgBA,CAACluE,OAAO,EAAE74B,GAAG,EAAE;IAC7B,MAAM0tG,QAAQ,GAAG,IAAI,CAACJ,qBAAqB,CAACz0E,OAAO,CAAC;IACpD,IAAI74B,GAAG,KAAK,CAAC,EAAE;MACb,OAAO0tG,QAAQ;IACjB;IAEA,MAAMC,MAAM,GAAG,IAAI,CAACH,mBAAmB,CAAC30E,OAAO,CAAC;IAChD,IAAI74B,GAAG,KAAK,CAAC,EAAE;MACb,OAAO2tG,MAAM;IACf;IAEA,OAAOD,QAAQ,CAAClwE,KAAK,CAAC,CAAC,CAAC4F,IAAI,CAACuqE,MAAM,EAAE3tG,GAAG,GAAG,GAAG,CAAC;EACjD;EAEA4hG,eAAeA,CAACgM,IAAI,EAAE;IACpB,OAAO,IAAI,CAAC9uG,IAAI,CAACma,MAAM;EACzB;EAEAiuF,sBAAsBA,CAAA,EAAG;IACvB,OAAO,IAAI,CAACpoG,IAAI,CAACwtB,mBAAmB;EACtC;EAEA66E,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACroG,IAAI,CAACytB,OAAO;EAC1B;EAEA+/E,aAAaA,CAACtrE,OAAO,EAAErhC,OAAO,EAAEw5B,IAAI,EAAEr7B,QAAQ,EAAE;IAC9C,MAAM+vG,OAAO,GAAG,IAAI,CAAC/uG,IAAI,CAACma,MAAM;IAChC,MAAM60F,SAAS,GAAG,IAAI,CAAChvG,IAAI,CAAC2tB,KAAK;IAEjC,IAAI,CAAC0gF,WAAW,GAAG,IAAIvuE,iGAAa,CAACivE,OAAO,EAAEA,OAAO,CAAC;IACtD,IAAI,CAACJ,SAAS,GAAG,IAAI7uE,iGAAa,CAACkvE,SAAS,EAAED,OAAO,CAAC;IACtD,MAAMR,QAAQ,GAAG,CAAC,CAAC;IACnB,MAAMU,OAAO,GAAG,IAAI,CAACjvG,IAAI,CAAC4tB,EAAE;IAC5B;IACA,KAAK,MAAM4I,IAAI,IAAIy4E,OAAO,EAAE;MAC1BV,QAAQ,CAAC/3E,IAAI,CAAC,GAAG;QACf52B,MAAM,EAAE,IAAIkgC,iGAAa,CAACkvE,SAAS,EAAEC,OAAO,CAACz4E,IAAI,CAAC,CAACtc,KAAK,CAAC;QACzD6D,KAAK,EAAE,IAAI+hB,iGAAa,CAACkvE,SAAS,EAAEC,OAAO,CAACz4E,IAAI,CAAC,CAAC1I,KAAK;MACzD,CAAC;IACH;IACA,IAAI,CAACygF,QAAQ,GAAGA,QAAQ;IACxB;;IAEA,OAAOjB,UAAI,CAACjqG,SAAS,CAACmqG,aAAa,CAACvqG,IAAI,CAAC,IAAI,EAAEi/B,OAAO,EAAErhC,OAAO,EAAEw5B,IAAI,EAAEr7B,QAAQ,CAAC;EAClF;AACF;AAEAsvG,WAAW,CAACjrG,SAAS,CAACob,EAAE,GAAG,IAAI;AAC/B6vF,WAAW,CAACjrG,SAAS,CAACoiB,IAAI,GAAG,SAAS;AACtC6oF,WAAW,CAACjrG,SAAS,CAACyqG,SAAS,GAAG,SAAS;AAC3CQ,WAAW,CAACjrG,SAAS,CAACoqG,SAAS,GAAG,CAChC,eAAe,EACf,gBAAgB,EAChB,kBAAkB,CACnB;AAED,wDAAea,WAAW;;ACnGI;AACJ;AAE1B,MAAM;EAAEj+D,SAASA,uBAAAA;AAAC,CAAC,GAAGqrC,IAAI;AAE1B,SAASkyB,2BAAeA,CAAA,EAAG;EACzB,OAAO;IACL9gF,SAAS,EAAE,IAAI,CAAC9sB,IAAI,CAAC8sB,SAAS;IAC9BH,KAAK,EAAE,IAAI,CAAC3sB,IAAI,CAAC2sB;EACnB,CAAC;AACH;AAEA,MAAMuiF,WAAW,SAAS5B,UAAI,CAAC;EAC7B1iG,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAACytG,SAAS,GAAG,IAAI,CAACA,SAAS,CAACzqG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C,MAAMmsG,QAAQ,GAAG,IAAI,CAACC,YAAY;IAClC,MAAM1kD,MAAM,GAAG,IAAI,CAAC+iD,SAAS;IAC7B,KAAK,IAAInuG,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG4vG,QAAQ,CAAC53G,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/CorD,MAAM,CAACA,MAAM,CAACnzD,MAAM,CAAC,GAAG,CAAC43G,QAAQ,CAAC7vG,CAAC,CAAC,EAAEsuG,2BAAe,CAAC;IACxD;EACF;EAEApO,cAAcA,CAACh0E,IAAI,EAAE;IACnB,OAAOA,IAAI,CAAChU,OAAO,CAAC2C,MAAM;EAC5B;EAEAk1F,qBAAqBA,CAAA,EAAG;IACtB,IAAI73B,kBAAkB,GAAG,IAAI;IAC7B,IAAI,IAAI,CAACx3E,IAAI,CAAC6sB,MAAM,KAAK,EAAE,EAAE;MAC3B,MAAMlI,GAAG,GAAG0rB,qBAAS,CAACzuC,KAAK,CAAC,IAAI,CAAC5B,IAAI,CAAC6sB,MAAM,CAAC;MAC7C,IAAI,CAAClI,GAAG,CAACviB,KAAK,EAAE;QACdo1E,kBAAkB,GAAG7yD,GAAG,CAAC9lB,QAAQ;MACnC;IACF;IACA,OAAO24E,kBAAkB;EAC3B;AACF;AAEA03B,WAAW,CAAC7rG,SAAS,CAACisG,SAAS,GAAG,IAAI;AACtCJ,WAAW,CAAC7rG,SAAS,CAAC+rG,YAAY,GAAG,EAAE;AAEvC,wDAAeF,WAAW;;AC1Cc;AAExC,MAAMK,gBAAgB,SAASL,iBAAW,CAAC;EACzC,OAAOzwF,EAAE,GAAG,IAAI;EAEhBqhF,cAAcA,CAAA,EAAG;IACf,OAAO;MACL0P,QAAQ,EAAE,KAAK;MACfviF,QAAQ,EAAE,IAAI,CAACjtB,IAAI,CAACitB,QAAQ;MAC5BC,QAAQ,EAAE,IAAI,CAACltB,IAAI,CAACktB,QAAQ,CAAC,IAAI,CAAC7sB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MAC1DuqD,QAAQ,EAAE,IAAI,CAACj7E,IAAI,CAACX,KAAK;MACzB8tB,WAAW,EAAE,IAAI,CAACntB,IAAI,CAACmtB,WAAW,CAAC,IAAI,CAAC9sB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MAChE/D,KAAK,EAAE,IAAI,CAAC3sB,IAAI,CAAC2sB,KAAK;MACtB6qD,kBAAkB,EAAE,IAAI,CAAC63B,qBAAqB,CAAC;IACjD,CAAC;EACH;AACF;AAEAE,gBAAgB,CAAClsG,SAAS,CAACob,EAAE,GAAG,IAAI;AACpC8wF,gBAAgB,CAAClsG,SAAS,CAACoiB,IAAI,GAAG,eAAe;AACjD8pF,gBAAgB,CAAClsG,SAAS,CAACyqG,SAAS,GAAG,YAAY;AACnDyB,gBAAgB,CAAClsG,SAAS,CAAC+rG,YAAY,GAAG,CAAC,cAAc,CAAC;AAE1D,6DAAeG,gBAAgB;;ACvBS;AAExC,MAAME,cAAc,SAASP,iBAAW,CAAC;EACvCtkG,WAAWA,CAACwnF,YAAY,EAAEpyF,IAAI,EAAE;IAC9B,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAAC0vG,aAAa,GAAGtd,YAAY;EACnC;EAEAoN,cAAcA,CAACh0E,IAAI,EAAE;IACnB,OAAOA,IAAI,CAAChU,OAAO,CAAC2C,MAAM;EAC5B;EAEA2lF,cAAcA,CAAA,EAAG;IACf,OAAO;MACL3yE,WAAW,EAAE,IAAI,CAACntB,IAAI,CAAC8rB,cAAc,CAAC,IAAI,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MACnEuqD,QAAQ,EAAE,IAAI,CAAC00B,SAAS;MACxBhjF,KAAK,EAAE,IAAI,CAAC3sB,IAAI,CAAC2sB,KAAK;MACtB6qD,kBAAkB,EAAE,IAAI,CAAC63B,qBAAqB,CAAC,CAAC;MAChDziF,WAAW,EAAE,IAAI,CAAC5sB,IAAI,CAAC4sB,WAAW;MAClCwlE,YAAY,EAAE,IAAI,CAACsd;IACrB,CAAC;EACH;AACF;AAEAD,cAAc,CAACpsG,SAAS,CAACob,EAAE,GAAG,IAAI;AAClCgxF,cAAc,CAACpsG,SAAS,CAACoiB,IAAI,GAAG,SAAS;AACzCgqF,cAAc,CAACpsG,SAAS,CAACyqG,SAAS,GAAG,SAAS;AAC9C2B,cAAc,CAACpsG,SAAS,CAAC+rG,YAAY,GAAG,CAAC,kBAAkB,CAAC;AAE5DK,cAAc,CAACpsG,SAAS,CAACssG,SAAS,GAAG,CAAC;AACtCF,cAAc,CAACpsG,SAAS,CAACqsG,aAAa,GAAG,KAAK;AAE9C,2DAAeD,cAAc;;AChCiB;AAE9C,MAAMG,iBAAiB,SAASH,oBAAc,CAAC;EAC7C,OAAOhxF,EAAE,GAAG,IAAI;EAEhB7T,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAAC,KAAK,EAAEA,IAAI,CAAC;EACpB;AACF;AAEA4vG,iBAAiB,CAACvsG,SAAS,CAACob,EAAE,GAAG,IAAI;AACrCmxF,iBAAiB,CAACvsG,SAAS,CAACoiB,IAAI,GAAG,4BAA4B;AAC/DmqF,iBAAiB,CAACvsG,SAAS,CAACyqG,SAAS,GAAG,KAAK;AAE7C,8DAAe8B,iBAAiB;;ACdc;AAE9C,MAAMC,iBAAiB,SAASJ,oBAAc,CAAC;EAC7C,OAAOhxF,EAAE,GAAG,IAAI;EAEhB7T,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAAC,IAAI,EAAEA,IAAI,CAAC;EACnB;AACF;AAEA6vG,iBAAiB,CAACxsG,SAAS,CAACob,EAAE,GAAG,IAAI;AACrCoxF,iBAAiB,CAACxsG,SAAS,CAACoiB,IAAI,GAAG,0BAA0B;AAC7DoqF,iBAAiB,CAACxsG,SAAS,CAACyqG,SAAS,GAAG,KAAK;AAE7C,8DAAe+B,iBAAiB;;ACdQ;AAExC,MAAMC,kBAAkB,SAASZ,iBAAW,CAAC;EAC3C,OAAOzwF,EAAE,GAAG,IAAI;EAEhBqhF,cAAcA,CAAA,EAAG;IACf,OAAO;MACLlzE,WAAW,EAAE,IAAI,CAAC5sB,IAAI,CAAC4sB,WAAW;MAClCquD,QAAQ,EAAE,IAAI,CAACj7E,IAAI,CAAC8rB,cAAc,CAAC,IAAI,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MAChEpiB,WAAW,EAAE,IAAI,CAACtO,IAAI,CAAC8rB,cAAc,CAAC,IAAI,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MACnEvD,WAAW,EAAE,GAAG,GAAG,IAAI,CAACntB,IAAI,CAAC8rB,cAAc,CAAC,IAAI,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC;MACzEzD,QAAQ,EAAE,IAAI,CAACjtB,IAAI,CAACitB,QAAQ;MAC5BI,cAAc,EAAE,IAAI,CAACrtB,IAAI,CAACqtB,cAAc;MACxCV,KAAK,EAAE,IAAI,CAAC3sB,IAAI,CAAC2sB,KAAK;MACtB6qD,kBAAkB,EAAE,IAAI,CAAC63B,qBAAqB,CAAC;IACjD,CAAC;EACH;AACF;AAEAS,kBAAkB,CAACzsG,SAAS,CAACob,EAAE,GAAG,IAAI;AACtCqxF,kBAAkB,CAACzsG,SAAS,CAACoiB,IAAI,GAAG,iBAAiB;AACrDqqF,kBAAkB,CAACzsG,SAAS,CAACyqG,SAAS,GAAG,cAAc;AACvDgC,kBAAkB,CAACzsG,SAAS,CAACisG,SAAS,GAAG,IAAI;AAC7CQ,kBAAkB,CAACzsG,SAAS,CAAC+rG,YAAY,GAAG,CAAC,mBAAmB,CAAC;AAEjE,+DAAeU,kBAAkB;;ACzBV;AACG;AAE1B,MAAMC,QAAQ,SAASzC,UAAI,CAAC;EAC1B,OAAO7uF,EAAE,GAAG,IAAI;EAEhBuxF,kBAAkBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAAChwG,IAAI,CAACiuB,QAAQ;EAC3B;EAEA8yE,YAAYA,CAAA,EAAG;IACb,OAAOjgG,wGAAO,CAAC,IAAI,CAACd,IAAI,EAAE;MACxB2jE,MAAM,EAAE,IAAI;MACZq8B,WAAW,EAAE,IAAI;MACjBzuE,WAAW,EAAE;IACf,CAAC,CAAC;EACJ;AACF;AAEAw+E,QAAQ,CAAC1sG,SAAS,CAACob,EAAE,GAAG,IAAI;AAC5BsxF,QAAQ,CAAC1sG,SAAS,CAACoiB,IAAI,GAAG,WAAW;AACrCsqF,QAAQ,CAAC1sG,SAAS,CAACyqG,SAAS,GAAG,MAAM;AACrCiC,QAAQ,CAAC1sG,SAAS,CAACoqG,SAAS,GAAG,CAAC,eAAe,CAAC;AAEhD,qDAAesC,QAAQ;;ACxBsB;AAEH;AACM;AACY;AACN;AACZ;AACF;AACM;AACU;AACE;AACA;AACE;AACpB;AAExC,MAAMzkF,KAAK,GAAG,IAAIk0C,gBAAU,CAAC,CAC3BquC,eAAS,EACTE,kBAAY,EACZC,wBAAkB,EAClBC,qBAAe,EACfC,eAAS,EACTC,cAAQ,EACRG,iBAAW,EACXiB,sBAAgB,EAChBK,uBAAiB,EACjBC,uBAAiB,EACjBC,wBAAkB,EAClBC,cAAQ,CACT,CAAC;AAEF,gDAAezkF,KAAK;;AC9BG;AAEvB,SAASjf,KAAKA,CAACmB,CAAC,EAAElJ,CAAC,EAAE6N,CAAC,EAAE;EACtB,OAAO3E,CAAC,IAAI2E,CAAC,GAAG3E,CAAC,GAAG,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG2E,CAAC;AACnC;AAEA,SAAS89F,SAASA,CAACv2B,EAAE,EAAEC,EAAE,EAAE1W,KAAK,EAAE;EAChC,MAAMitC,IAAI,GAAG,CAAC,GAAGjtC,KAAK;EACtB,MAAM0hB,EAAE,GAAIjL,EAAE,IAAI,EAAE,GAAI,IAAI;EAC5B,MAAMy2B,EAAE,GAAIz2B,EAAE,IAAI,CAAC,GAAI,IAAI;EAC3B,MAAM02B,EAAE,GAAG12B,EAAE,GAAG,IAAI;EACpB,MAAM34B,EAAE,GAAI44B,EAAE,IAAI,EAAE,GAAI,IAAI;EAC5B,MAAM02B,EAAE,GAAI12B,EAAE,IAAI,CAAC,GAAI,IAAI;EAC3B,MAAM22B,EAAE,GAAG32B,EAAE,GAAG,IAAI;EACpB,MAAMp1E,CAAC,GAAG2rG,IAAI,GAAGvrB,EAAE,GAAG1hB,KAAK,GAAGliB,EAAE;EAChC,MAAMnvC,CAAC,GAAGs+F,IAAI,GAAGC,EAAE,GAAGltC,KAAK,GAAGotC,EAAE;EAChC,MAAMl+F,CAAC,GAAG+9F,IAAI,GAAGE,EAAE,GAAGntC,KAAK,GAAGqtC,EAAE;EAChC,OAAQ/rG,CAAC,IAAI,EAAE,GAAKqN,CAAC,IAAI,CAAE,GAAGO,CAAC;AACjC;AAEA,MAAMo+F,OAAO,CAAC;EACZ3lG,WAAWA,CAAC6a,IAAI,EAAEhH,EAAE,EAAE;IACpB,IAAI,CAACgH,IAAI,GAAGA,IAAI,IAAI,QAAQ;IAC5B,IAAI,CAAChH,EAAE,GAAGA,EAAE,IAAI,IAAI;EACtB;EAEA+xF,eAAeA,CAAC/qF,IAAI,EAAgB;IAAA,IAAdgrF,IAAI,GAAAvtG,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;IAChC,MAAMmX,KAAK,GAAG,IAAI,CAACq2F,aAAa,CAACjrF,IAAI,CAAC;IACtC,OAAOpL,KAAK,KAAK0B,SAAS,IAAI,CAAC00F,IAAI,GAAG,IAAI,CAACE,mBAAmB,GAAGt2F,KAAK;EACxE;EAEAupF,eAAeA,CAACn+E,IAAI,EAAgB;IAAA,IAAdgrF,IAAI,GAAAvtG,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;IAChC,MAAMmX,KAAK,GAAG,IAAI,CAACu2F,aAAa,CAACnrF,IAAI,CAAC;IACtC,OAAOpL,KAAK,KAAK0B,SAAS,IAAI,CAAC00F,IAAI,GAAG,IAAI,CAACI,mBAAmB,GAAGx2F,KAAK;EACxE;EAEAy2F,aAAaA,CAACrrF,IAAI,EAAE;IAClB,IAAI8a,KAAK,GAAG9a,IAAI,CAAClV,UAAU,CAAC,CAAC,CAAC;IAC9BgwB,KAAK,GAAG,CAAC,CAACA,KAAK,GAAG,CAAC,GAAG,CAAC,GAAGA,KAAK,IAAI,GAAG,GAAGA,KAAK,GAAG,GAAG,GAAGA,KAAK,IAAI,IAAI,IAChE,IAAI,CAACwwE,WAAW,CAACx5G,MAAM;IAC3B,OAAO,IAAI,CAACw5G,WAAW,CAACxwE,KAAK,CAAC;EAChC;EAEAywE,iBAAiBA,CAAClxG,IAAI,EAAgB;IAAA,IAAd2wG,IAAI,GAAAvtG,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;IAClC,MAAMmX,KAAK,GAAG,IAAI,CAAC42F,eAAe,CAACnxG,IAAI,CAAC;IACxC,OAAOua,KAAK,KAAK0B,SAAS,IAAI,CAAC00F,IAAI,GAAG,IAAI,CAACS,qBAAqB,GAAG72F,KAAK;EAC1E;EAEA82F,kBAAkBA,CAAC5pG,KAAK,EAAE;IACxB,MAAM;MAAEo8D;IAAO,CAAC,GAAG,IAAI;IACvB,MAAMj/D,GAAG,GAAGi/D,MAAM,CAACpsE,MAAM;IACzB,OAAOgQ,KAAK,GAAG,CAAC,GAAGo8D,MAAM,CAAEp8D,KAAK,GAAG7C,GAAG,GAAIA,GAAG,CAAC,GAAGi/D,MAAM,CAACp8D,KAAK,GAAG7C,GAAG,CAAC;EACtE;EAEA0sG,gBAAgBA,CAACrxF,KAAK,EAAEsxF,YAAY,EAAE;IACpC,MAAM5hF,QAAQ,GAAG,IAAI,CAAC6hF,SAAS,CAACD,YAAY,CAAC;IAC7C,IAAI,CAAC5hF,QAAQ,EAAE;MACb,OAAO,IAAI,CAAC8hF,iBAAiB;IAC/B;IACA,MAAM7hG,KAAK,GAAG+f,QAAQ,CAACl4B,MAAM;IAC7B,MAAMgQ,KAAK,GAAGwY,KAAK,IAAIrQ,KAAK,GAAG,CAAC,CAAC;IACjC,IAAImL,IAAI,GAAGpb,IAAI,CAACyN,KAAK,CAAC3F,KAAK,CAAC;IAC5B,MAAM01B,KAAK,GAAG5wB,KAAK,CAACwO,IAAI,GAAG,CAAC,EAAE,CAAC,EAAEnL,KAAK,GAAG,CAAC,CAAC;IAC3CmL,IAAI,GAAGxO,KAAK,CAACwO,IAAI,EAAE,CAAC,EAAEnL,KAAK,GAAG,CAAC,CAAC;IAChC,OAAOugG,SAAS,CAACxgF,QAAQ,CAAC5U,IAAI,CAAC,EAAE4U,QAAQ,CAACwN,KAAK,CAAC,EAAE11B,KAAK,GAAGsT,IAAI,CAAC;EACjE;EAEA22F,aAAaA,CAAC/rF,IAAI,EAAgB;IAAA,IAAdgrF,IAAI,GAAAvtG,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;IAC9B,MAAMmX,KAAK,GAAG,IAAI,CAACo3F,WAAW,CAAChsF,IAAI,CAAC;IACpC,OAAOpL,KAAK,KAAK0B,SAAS,IAAI,CAAC00F,IAAI,GAAG,IAAI,CAACc,iBAAiB,GAAGl3F,KAAK;EACtE;AACF;AAEAvZ,yGAAQ,CAACyvG,OAAO,CAACltG,SAAS,EAAE;EAC1BsgE,MAAM,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;EAE1D+tC,aAAa,EAAE,QAAQ;EACvBC,aAAa,EAAE,QAAQ;EACvBC,aAAa,EAAE,QAAQ;EAEvBjB,mBAAmB,EAAE,QAAQ;EAC7BD,aAAa,EAAE,CAAC,CAAC;EAEjBG,mBAAmB,EAAE,QAAQ;EAC7BD,aAAa,EAAE,CAAC,CAAC;EAEjBG,WAAW,EAAE,CAAC,QAAQ,CAAC;EAEvBG,qBAAqB,EAAE,QAAQ;EAC/BD,eAAe,EAAE,CAAC,CAAC;EAEnBY,oBAAoB,EAAE,QAAQ;EAE9BN,iBAAiB,EAAE,QAAQ;EAC3BO,gBAAgB,EAAE,CAChB;EACA,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,KAAK,EAAsB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,iBAAiB,EAAU,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,sBAAsB,EAAK,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,iBAAiB,EAAU,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,mBAAmB,EAAQ,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,kBAAkB,EAAS,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,iBAAiB,EAAU,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,KAAK,EAAsB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,YAAY,EAAe,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,aAAa,EAAc,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,cAAc,EAAa,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,QAAQ,EAAmB,QAAQ,CAAC,EACrC,CAAC,UAAU,EAAiB,QAAQ,CAAC,EACrC,CAAC,MAAM,EAAqB,QAAQ,CAAC,EACrC,CAAC,SAAS,EAAkB,QAAQ,CAAC,EACrC,CAAC,gBAAgB,EAAW,QAAQ,CAAC,EACrC,CAAC,WAAW,EAAgB,QAAQ,CAAC,EACrC,CAAC,eAAe,EAAY,QAAQ,CAAC,EACrC,CAAC,OAAO,EAAoB,QAAQ;EACpC,oCACD;EAEDL,WAAW,EAAE,CAAC,CAAC;EACf;;EAEAH,SAAS,EAAE;IACTS,OAAO,EAAE,CACP,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACDC,IAAI,EAAE,CACJ,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACDC,GAAG,EAAE,CACH,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACDC,IAAI,EAAE,CACJ,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACD,UAAU,EAAE,CACV,QAAQ;IAAE;IACV,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACDC,IAAI,EAAE,CACJ,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA,CACX;IACDC,KAAK,EAAE,CACL,QAAQ;IAAE;IACV,QAAQ,CAAE;IAAA;EAEd;AACF,CAAC,CAAC;AAEF,MAAM;EAAEN,gBAAgB;EAAEL;AAAY,CAAC,GAAGlB,OAAO,CAACltG,SAAS;AAE3D,KAAK,IAAI/D,CAAC,GAAG,CAAC,EAAE;IAAE/H;EAAO,CAAC,GAAGu6G,gBAAgB,EAAExyG,CAAC,GAAG/H,MAAM,EAAE,EAAE+H,CAAC,EAAE;EAC9D,MAAM,CAACmmB,IAAI,EAAE1F,KAAK,CAAC,GAAG+xF,gBAAgB,CAACxyG,CAAC,CAAC;EACzCmyG,WAAW,CAAChsF,IAAI,CAAC,GAAG1F,KAAK;AAC3B;AAEA,uDAAewwF,OAAO;;ACnSU;AAEhC,MAAM9/E,OAAO,GAAG,IAAI8/E,gBAAO,CAAC,KAAK,EAAE,IAAI,CAAC;;AAExC;AACA9/E,OAAO,CAACigF,aAAa,GAAG;EACtB;EACA77F,CAAC,EAAE,QAAQ;EACXvC,CAAC,EAAE,QAAQ;EACXO,CAAC,EAAE,QAAQ;EACXC,CAAC,EAAE,QAAQ;EACXJ,CAAC,EAAE,QAAQ;EACXW,CAAC,EAAE,QAAQ;EACXV,CAAC,EAAE,QAAQ;EACX0/F,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZljF,EAAE,EAAE,QAAQ;EACZmjF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZrgG,CAAC,EAAE;EACH;AACF,CAAC;AAED,iDAAeqe,OAAO;;ACxBU;AAC6B;AAE7D,MAAMA,mBAAO,GAAG,IAAI8/E,gBAAO,CAAC,MAAM,EAAE,IAAI,CAAC;AAEzC9/E,mBAAO,CAACkzC,MAAM,GAAG,CACf;AACA,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ,CAAE;AACV,qCACD;;AAED;AACAlzC,mBAAO,CAACigF,aAAa,GAAG;EACtB;EACA77F,CAAC,EAAE,QAAQ;EACXzB,CAAC,EAAE,QAAQ;EACXL,CAAC,EAAE,QAAQ;EACX2/F,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZr/F,CAAC,EAAE,QAAQ;EACXjB,CAAC,EAAE,QAAQ;EACXO,CAAC,EAAE,QAAQ;EACXC,CAAC,EAAE,QAAQ;EACXJ,CAAC,EAAE,QAAQ;EACXmgG,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ5/F,CAAC,EAAE,QAAQ;EACXV,CAAC,EAAE,QAAQ;EACX0/F,EAAE,EAAE,QAAQ;EACZa,EAAE,EAAE,QAAQ;EACZv9F,CAAC,EAAE,QAAQ;EACX+X,EAAE,EAAE,QAAQ;EACZylF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ5/F,CAAC,EAAE,QAAQ;EACX6/F,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZhB,EAAE,EAAE,QAAQ;EACZljF,EAAE,EAAE,QAAQ;EACZmjF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZe,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ3mF,EAAE,EAAE,QAAQ;EACZ0lF,EAAE,EAAE,QAAQ;EACZkB,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZt7F,CAAC,EAAE,QAAQ;EACXu7F,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZlkF,EAAE,EAAE,QAAQ;EACZmkF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZriG,CAAC,EAAE,QAAQ;EACXsiG,EAAE,EAAE,QAAQ;EACZtnF,EAAE,EAAE,QAAQ;EACZunF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ7lF,EAAE,EAAE,QAAQ;EACZ8lF,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZtgG,CAAC,EAAE,QAAQ;EACXugG,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ1kG,CAAC,EAAE,QAAQ;EACX2kG,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZp7E,EAAE,EAAE,QAAQ;EACZq7E,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE;EACJ;AACF,CAAC;AAEDnnF,mBAAO,CAACogF,mBAAmB,GAAG,QAAQ;;AAEtC;AACApgF,mBAAO,CAACmgF,aAAa,GAAG;EACtB;EACA1rE,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbG,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACb/zB,CAAC,EAAE,QAAQ;EACXF,CAAC,EAAE,QAAQ;EACXmB,CAAC,EAAE,QAAQ;EACXrB,CAAC,EAAE,QAAQ;EACXW,CAAC,EAAE,QAAQ;EACXb,CAAC,EAAE,QAAQ;EACXs0B,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE;EACN;AACF,CAAC;AAEDpW,mBAAO,CAACsgF,WAAW,GAAG;AACpB;AACA,UAAU;AAAE;AACZ;AACA,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;;AAEZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;;AAEZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU;AAAE;AACZ,UAAU,CAAE;AAAA,CACb;AAED,MAAMzlE,iCAAqB,GAAG1B,sBAAiB,CAACW,IAAI;AAEpD9Z,mBAAO,CAACwgF,eAAe,GAAG;EACxB,CAAC3lE,iCAAqB,CAACX,WAAW,GAAG,QAAQ;EAC7C,CAACW,iCAAqB,CAACV,QAAQ,GAAG,QAAQ;EAC1C,CAACU,iCAAqB,CAACZ,SAAS,GAAG,QAAQ;EAC3C,CAACY,iCAAqB,CAACd,MAAM,GAAG,QAAQ;EACxC,CAACc,iCAAqB,CAACL,IAAI,GAAG,QAAQ;EACtC4sE,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE;AACP,CAAC;AAED,kDAAernF,mBAAO;;AC7OU;AAC6B;AAE7D,MAAMA,kBAAO,GAAG,IAAI8/E,gBAAO,CAAC,KAAK,EAAE,IAAI,CAAC;AAExC9/E,kBAAO,CAACkzC,MAAM,GAAG,CACf;AACA,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ;AAAE;AACV,QAAQ,CAAE;AACV,qCACD;AAEDlzC,kBAAO,CAACkgF,mBAAmB,GAAG,QAAQ;;AAEtC;AACAlgF,kBAAO,CAACigF,aAAa,GAAG;EACtB;EACA77F,CAAC,EAAE,QAAQ;EACXvC,CAAC,EAAE,QAAQ;EACXO,CAAC,EAAE,QAAQ;EACXC,CAAC,EAAE,QAAQ;EACXO,CAAC,EAAE,QAAQ;EACXV,CAAC,EAAE;EACH;AACF,CAAC;AAED8d,kBAAO,CAACogF,mBAAmB,GAAG,QAAQ;;AAEtC;AACApgF,kBAAO,CAACmgF,aAAa,GAAG;EACtB;EACA1rE,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbG,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACb/zB,CAAC,EAAE,QAAQ;EACXF,CAAC,EAAE,QAAQ;EACXmB,CAAC,EAAE,QAAQ;EACXV,CAAC,EAAE,QAAQ;EACXb,CAAC,EAAE,QAAQ;EACXs0B,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZE,EAAE,EAAE,QAAQ;EACZC,EAAE,EAAE,QAAQ;EACZ,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACd,IAAI,EAAE,QAAQ;EACdC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE,QAAQ;EACbC,GAAG,EAAE;EACL;AACF,CAAC;AAEDvW,kBAAO,CAACsgF,WAAW,GAAG,CAAC,QAAQ,CAAC,CAACzvG,MAAM,CAACmvB,kBAAO,CAACkzC,MAAM,CAAC;AAEvD,MAAMr4B,gCAAqB,GAAG1B,sBAAiB,CAACW,IAAI;AAEpD9Z,kBAAO,CAACwgF,eAAe,GAAG;EACxB,CAAC3lE,gCAAqB,CAACX,WAAW,GAAG,QAAQ;EAC7C,CAACW,gCAAqB,CAACZ,SAAS,GAAG,QAAQ;EAC3C,CAACY,gCAAqB,CAACV,QAAQ,GAAG,QAAQ;EAC1C,CAACU,gCAAqB,CAACd,MAAM,GAAG,QAAQ;EACxC,CAACc,gCAAqB,CAACb,MAAM,GAAG,QAAQ;EACxC,CAACa,gCAAqB,CAACL,IAAI,GAAG;AAChC,CAAC;AAED,iDAAexa,kBAAO;;ACnGuB;AAEE;AACE;AACF;AAE/C,MAAMynF,QAAQ,GAAG,IAAI14C,gBAAU,CAAC,CAC9Bu4C,UAAU,EACVC,WAAW,EACXC,UAAU,CACX,CAAC;AAEF,mDAAeC,QAAQ;;ACZA;AACe;AACN;AACG;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,OAAO,CAAC;EACZvtG,WAAWA,CAAC5K,IAAI,EAAE;IAChB,IAAI,IAAI,CAAC4K,WAAW,KAAKutG,OAAO,EAAE;MAChC,MAAM,IAAI91G,KAAK,CAAC,qCAAqC,CAAC;IACxD;IACA;AACJ;AACA;AACA;IACI,IAAI,CAACrC,IAAI,GAAGc,wGAAO,CAACzD,KAAK,CAAConB,UAAU,CAACpkB,QAAQ,CAAC2d,GAAG,CAACgR,QAAQ,CAAC,IAAI,CAACvQ,EAAE,CAAC,EAAE,IAAI,CAAC,EAAEze,IAAI,CAAC;IACjF;AACJ;AACA;AACA;IACI,IAAI,CAACywB,OAAO,GAAGynF,YAAQ,CAACztF,KAAK;EAC/B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE8iF,QAAQA,CAAA,EAAG;IACT,MAAMrmF,IAAI,GAAG7pB,KAAK,CAAC0pB,WAAW,CAAC,IAAI,CAAC/mB,IAAI,EAAEK,QAAQ,CAAC2d,GAAG,CAACgR,QAAQ,CAAC,IAAI,CAACvQ,EAAE,CAAC,CAAC;IACzE,IAAI,CAAC3d,0GAAS,CAAComB,IAAI,CAAC,EAAE;MACpB,OAAO,CAAC,IAAI,CAACzI,EAAE,EAAEyI,IAAI,CAAC;IACxB;IACA,OAAO,IAAI,CAACzI,EAAE;EAChB;AACF;;AAEA;AACA;AACA;AACA;;AAEA05F,OAAO,CAAC90G,SAAS,CAACob,EAAE,GAAG,IAAI;AAE3B,uDAAe05F,OAAO;;AC1DU;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,cAAc,SAASD,gBAAO,CAAC;EACnC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,MAAMvoC,IAAI,GAAG0rB,IAAI,CAAChU,OAAO,CAACiO,IAAI;IAC9B,IAAI3lB,IAAI,KAAK,GAAG,IAAI,IAAI,CAACE,IAAI,CAACkvB,MAAM,IAAI,CAAC,EAAE;MACzC,OAAO,IAAI,CAAClvB,IAAI,CAACkvB,MAAM;IACzB;IACA,OAAO,IAAI,CAACuB,OAAO,CAAC+/E,eAAe,CAAC1wG,IAAI,CAAC;EAC3C;EAEA8jG,eAAeA,CAACwK,QAAQ,EAAE/lE,QAAQ,EAAE;IAClC,OAAO,IAAI,CAAC5X,OAAO,CAACogF,mBAAmB;EACzC;AACF;AAEAuH,cAAc,CAAC/0G,SAAS,CAACob,EAAE,GAAG,IAAI;AAClC25F,cAAc,CAAC/0G,SAAS,CAACoiB,IAAI,GAAG,SAAS;AACzC2yF,cAAc,CAAC/0G,SAAS,CAACyqG,SAAS,GAAG,SAAS;AAE9C,8DAAesK,cAAc;;AClCG;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,SAASF,gBAAO,CAAC;EACvC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,OAAO,IAAI,CAAC5X,OAAO,CAACmzE,eAAe,CAAC7pE,OAAO,CAACyD,KAAK,CAACmF,KAAK,CAAC;EAC1D;AACF;AAEA01E,kBAAkB,CAACh1G,SAAS,CAACob,EAAE,GAAG,IAAI;AACtC45F,kBAAkB,CAACh1G,SAAS,CAACoiB,IAAI,GAAG,cAAc;AAClD4yF,kBAAkB,CAACh1G,SAAS,CAACyqG,SAAS,GAAG,SAAS;AAElD,kEAAeuK,kBAAkB;;AC1BD;AAEhC,MAAMC,eAAe,SAASH,gBAAO,CAAC;EACpC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,MAAM9H,KAAK,GAAGxG,OAAO,CAACqB,MAAM;IAC5B,IAAImF,KAAK,CAACgI,WAAW,KAAKxpC,MAAM,CAACypC,iBAAiB,IAAIjI,KAAK,CAACkI,WAAW,KAAK1pC,MAAM,CAAC2pC,iBAAiB,EAAE;MACpG,OAAO,IAAI,CAACjY,OAAO,CAAC8gF,iBAAiB;IACvC;IACA,MAAMvlG,GAAG,GAAGu0B,KAAK,CAACgI,WAAW;IAC7B,MAAMx8B,GAAG,GAAGw0B,KAAK,CAACkI,WAAW,GAAGz8B,GAAG,GAAGu0B,KAAK,CAACkI,WAAW,GAAGz8B,GAAG,GAAG,CAAC;IACjE,OAAO,IAAI,CAACykB,OAAO,CAAC2gF,gBAAgB,CAAC,CAACr3E,OAAO,CAACuB,SAAS,GAAGtvB,GAAG,KAAKD,GAAG,GAAGC,GAAG,CAAC,EAAE,IAAI,CAAChM,IAAI,CAACyvB,QAAQ,CAAC;EACnG;AACF;AAEA6oF,eAAe,CAACj1G,SAAS,CAACob,EAAE,GAAG,IAAI;AACnC65F,eAAe,CAACj1G,SAAS,CAACoiB,IAAI,GAAG,UAAU;AAC3C6yF,eAAe,CAACj1G,SAAS,CAACyqG,SAAS,GAAG,UAAU;AAEhD,+DAAewK,eAAe;;ACxBE;AAEhC,MAAMC,YAAY,SAASJ,gBAAO,CAAC;EACjC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,OAAO,IAAI,CAAC5X,OAAO,CAACqgF,aAAa,CAAC/2E,OAAO,CAAC2H,QAAQ,CAAC,CAAC,CAACiB,KAAK,CAAC;EAC7D;AACF;AAEA41E,YAAY,CAACl1G,SAAS,CAACob,EAAE,GAAG,IAAI;AAChC85F,YAAY,CAACl1G,SAAS,CAACoiB,IAAI,GAAG,OAAO;AACrC8yF,YAAY,CAACl1G,SAAS,CAACyqG,SAAS,GAAG,OAAO;AAE1C,4DAAeyK,YAAY;;AClBK;AACiB;AAEjD,MAAMC,yBAAyB,SAASL,gBAAO,CAAC;EAC9C,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,IAAItO,OAAO,CAACyD,KAAK,CAAC9C,KAAK,GAAGoK,gBAAW,CAACnK,KAAK,CAACiN,GAAG,EAAE;MAC/C,OAAO,IAAI,CAACnX,OAAO,CAACugF,iBAAiB,CAAC,KAAK,CAAC;IAC9C;IACA,IAAIj3E,OAAO,CAACyD,KAAK,CAAC9C,KAAK,GAAGoK,gBAAW,CAACnK,KAAK,CAACkN,GAAG,EAAE;MAC/C,OAAO,IAAI,CAACpX,OAAO,CAACugF,iBAAiB,CAAC,KAAK,CAAC;IAC9C;IACA,MAAMyH,SAAS,GAAG1+E,OAAO,CAAC8H,YAAY,CAAC,CAAC;IACxC,IAAI42E,SAAS,EAAE;MACb,IAAIp+F,KAAK,GAAG,IAAI,CAACoW,OAAO,CAACugF,iBAAiB,CAACyH,SAAS,CAAC34G,IAAI,EAAE,IAAI,CAAC;MAChE,IAAIua,KAAK,KAAK0B,SAAS,EAAE;QACvB1B,KAAK,GAAG,IAAI,CAACoW,OAAO,CAACugF,iBAAiB,CAACyH,SAAS,CAAC1uE,OAAO,CAAC;MAC3D;MACA,OAAO1vB,KAAK;IACd;IACA,OAAO,IAAI,CAACoW,OAAO,CAACygF,qBAAqB;EAC3C;AACF;AAEAsH,yBAAyB,CAACn1G,SAAS,CAACob,EAAE,GAAG,IAAI;AAC7C+5F,yBAAyB,CAACn1G,SAAS,CAACoiB,IAAI,GAAG,qBAAqB;AAChE+yF,yBAAyB,CAACn1G,SAAS,CAACyqG,SAAS,GAAG,WAAW;AAE3D,yEAAe0K,yBAAyB;;ACjCR;AAEhC,MAAME,cAAc,SAASP,gBAAO,CAAC;EACnC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAAClxD,KAAK,EAAElG,QAAQ,EAAE;IAC5B,OAAO,IAAI,CAACroC,IAAI,CAACqa,KAAK;EACxB;EAEAupF,eAAeA,CAACwK,QAAQ,EAAE/lE,QAAQ,EAAE;IAClC,OAAO,IAAI,CAACroC,IAAI,CAACqa,KAAK;EACxB;AACF;AAEAq+F,cAAc,CAACr1G,SAAS,CAACob,EAAE,GAAG,IAAI;AAClCi6F,cAAc,CAACr1G,SAAS,CAACoiB,IAAI,GAAG,SAAS;AACzCizF,cAAc,CAACr1G,SAAS,CAACyqG,SAAS,GAAG,SAAS;AAE9C,8DAAe4K,cAAc;;AClBG;AACa;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,SAASR,gBAAO,CAAC;EACvC,OAAO15F,EAAE,GAAG,IAAI;EAEhB7T,WAAWA,CAAC5K,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX,MAAM44G,MAAM,GAAGvoE,cAAS,CAACzuC,KAAK,CAAC,IAAI,CAAC5B,IAAI,CAAC6sB,MAAM,CAAC;IAChD,IAAI,CAACgsF,aAAa,GAAGD,MAAM,CAACx2G,KAAK,GAAGiuC,cAAS,CAAC5B,IAAI,CAAC,CAAC,GAAGmqE,MAAM,CAAC/5G,QAAQ;EACxE;EAEA4gG,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,OAAO,IAAI,CAACwwE,aAAa,CAACvqE,YAAY,CAAC9iB,IAAI,CAAC,GAAG,IAAI,CAACxrB,IAAI,CAACqa,KAAK,GAAG,IAAI,CAACra,IAAI,CAACqvB,SAAS;EACtF;EAEAu0E,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,MAAMxb,MAAM,GAAG,IAAI,CAACgsF,aAAa;IACjC,MAAMx4E,KAAK,GAAGtG,OAAO,CAAC8G,MAAM;IAC5B,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG8gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC5C,IAAI,CAACutB,MAAM,CAACyhB,YAAY,CAACjO,KAAK,CAAC/gC,CAAC,CAAC,CAAC,EAAE;QAClC,OAAO,IAAI,CAACU,IAAI,CAACqvB,SAAS;MAC5B;IACF;IACA,OAAO,IAAI,CAACrvB,IAAI,CAACqa,KAAK;EACxB;AACF;AAEAs+F,kBAAkB,CAACt1G,SAAS,CAACob,EAAE,GAAG,IAAI;AACtCk6F,kBAAkB,CAACt1G,SAAS,CAACoiB,IAAI,GAAG,aAAa;AACjDkzF,kBAAkB,CAACt1G,SAAS,CAACyqG,SAAS,GAAG,aAAa;AAEtD,kEAAe6K,kBAAkB;;AC1CD;AAEhC,MAAMG,mBAAmB,SAASX,gBAAO,CAAC;EACxC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,OAAO,IAAI,CAAC5X,OAAO,CAACqgF,aAAa,CAACjvG,MAAM,CAACiT,YAAY,CAAC0W,IAAI,CAACxI,QAAQ,CAAC,CAAC;EACvE;EAEA4gF,eAAeA,CAACwK,QAAQ,EAAE/lE,QAAQ,EAAE;IAClC,OAAO,IAAI,CAAC5X,OAAO,CAACogF,mBAAmB;EACzC;AACF;AAEAiI,mBAAmB,CAACz1G,SAAS,CAACob,EAAE,GAAG,IAAI;AACvCq6F,mBAAmB,CAACz1G,SAAS,CAACoiB,IAAI,GAAG,cAAc;AACnDqzF,mBAAmB,CAACz1G,SAAS,CAACyqG,SAAS,GAAG,cAAc;AAExD,mEAAegL,mBAAmB;;AClBF;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,SAASZ,gBAAO,CAAC;EACvC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,MAAM;MAAEroC;IAAK,CAAC,GAAG,IAAI;IACrB,IAAIuvB,MAAM,GAAG,CAAC;IACd,IAAI/D,IAAI,CAAC2O,WAAW,IAAIn6B,IAAI,EAAE;MAC5B,IAAIA,IAAI,CAACgM,GAAG,KAAKhM,IAAI,CAAC+L,GAAG,EAAE;QACzBwjB,MAAM,GAAG/D,IAAI,CAAC2O,WAAW,GAAGn6B,IAAI,CAAC+L,GAAG,GAAG,CAAC,GAAG,CAAC;MAC9C,CAAC,MAAM;QACLwjB,MAAM,GAAG,CAAC/D,IAAI,CAAC2O,WAAW,GAAGn6B,IAAI,CAACgM,GAAG,KAAKhM,IAAI,CAAC+L,GAAG,GAAG/L,IAAI,CAACgM,GAAG,CAAC;MAChE;MACA,OAAO,IAAI,CAACykB,OAAO,CAAC2gF,gBAAgB,CAAC7hF,MAAM,EAAEvvB,IAAI,CAACyvB,QAAQ,CAAC;IAC7D;IACA,OAAO,IAAI,CAACgB,OAAO,CAACohF,oBAAoB;EAC1C;EAEAjO,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,MAAM;MAAEroC;IAAK,CAAC,GAAG,IAAI;IACrB,IAAI,CAACA,IAAI,EAAE;MACT,OAAO,IAAI,CAACywB,OAAO,CAACohF,oBAAoB;IAC1C;IACA,IAAI93E,OAAO,CAACI,WAAW,EAAE;MACvB,IAAI5K,MAAM,GAAG,CAAC;MACd,IAAIvvB,IAAI,CAACgM,GAAG,KAAKhM,IAAI,CAAC+L,GAAG,EAAE;QACzBwjB,MAAM,GAAGwK,OAAO,CAACI,WAAW,GAAGn6B,IAAI,CAAC+L,GAAG,GAAG,CAAC,GAAG,CAAC;MACjD,CAAC,MAAM;QACLwjB,MAAM,GAAG,CAACwK,OAAO,CAACI,WAAW,GAAGn6B,IAAI,CAACgM,GAAG,KAAKhM,IAAI,CAAC+L,GAAG,GAAG/L,IAAI,CAACgM,GAAG,CAAC;MACnE;MACA,OAAO,IAAI,CAACykB,OAAO,CAAC2gF,gBAAgB,CAAC7hF,MAAM,EAAEvvB,IAAI,CAACyvB,QAAQ,CAAC;IAC7D;IACA,OAAO,IAAI,CAACgB,OAAO,CAACohF,oBAAoB;EAC1C;AACF;AAEAkH,kBAAkB,CAAC11G,SAAS,CAACob,EAAE,GAAG,IAAI,CAAC,CAAC;AACxCs6F,kBAAkB,CAAC11G,SAAS,CAACoiB,IAAI,GAAG,aAAa;AACjDszF,kBAAkB,CAAC11G,SAAS,CAACyqG,SAAS,GAAG,aAAa;AAEtD,kEAAeiL,kBAAkB;;ACrDD;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,gBAAgB,SAASb,gBAAO,CAAC;EACrC,OAAO15F,EAAE,GAAG,IAAI;EAEhBw6F,oBAAoBA,CAAC/gG,SAAS,EAAElY,IAAI,EAAE;IACpC,IAAIkY,SAAS,KAAK6D,SAAS,EAAE;MAC3B,MAAMwT,MAAM,GAAG,CAAC,GAAGrX,SAAS;MAC5B,OAAO,IAAI,CAACuY,OAAO,CAAC2gF,gBAAgB,CAAC7hF,MAAM,EAAEvvB,IAAI,CAACyvB,QAAQ,CAAC;IAC7D;IACA,OAAO,IAAI,CAACgB,OAAO,CAACohF,oBAAoB;EAC1C;EAEApS,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,MAAM;MAAEroC;IAAK,CAAC,GAAG,IAAI;IACrB,OAAO,IAAI,CAACi5G,oBAAoB,CAACztF,IAAI,CAACtT,SAAS,EAAElY,IAAI,CAAC;EACxD;EAEA4jG,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,MAAM;MAAEroC;IAAK,CAAC,GAAG,IAAI;IACrB,OAAO,IAAI,CAACi5G,oBAAoB,CAACl/E,OAAO,CAAC7hB,SAAS,EAAElY,IAAI,CAAC;EAC3D;AACF;AAEAg5G,gBAAgB,CAAC31G,SAAS,CAACob,EAAE,GAAG,IAAI,CAAC,CAAC;AACtCu6F,gBAAgB,CAAC31G,SAAS,CAACoiB,IAAI,GAAG,WAAW;AAC7CuzF,gBAAgB,CAAC31G,SAAS,CAACyqG,SAAS,GAAG,WAAW;AAElD,gEAAekL,gBAAgB;;ACxCC;AAEhC,MAAME,qBAAqB,SAASf,gBAAO,CAAC;EAC1C,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,IAAIhuB,KAAK,GAAG,IAAI,CAACoW,OAAO,CAACogF,mBAAmB;IAC5C,IAAI92E,OAAO,CAACyD,KAAK,CAAC27E,cAAc,KAAKp9F,SAAS,EAAE;MAC9C;MACA,MAAM/P,GAAG,GAAG,CAAC,GAAG;MAChB,MAAMD,GAAG,GAAG,GAAG;MACfsO,KAAK,GAAG,IAAI,CAACoW,OAAO,CAAC2gF,gBAAgB,CAAC,CAACr3E,OAAO,CAACyD,KAAK,CAAC27E,cAAc,GAAGntG,GAAG,KAAKD,GAAG,GAAGC,GAAG,CAAC,EAAE,IAAI,CAAChM,IAAI,CAACyvB,QAAQ,CAAC;IAC/G;IACA,OAAOpV,KAAK;EACd;AACF;AAEA6+F,qBAAqB,CAAC71G,SAAS,CAACob,EAAE,GAAG,IAAI;AACzCy6F,qBAAqB,CAAC71G,SAAS,CAACoiB,IAAI,GAAG,gBAAgB;AACvDyzF,qBAAqB,CAAC71G,SAAS,CAACyqG,SAAS,GAAG,gBAAgB;AAE5D,qEAAeoL,qBAAqB;;ACzBJ;AAEhC,MAAME,eAAe,SAASjB,gBAAO,CAAC;EACpC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE0W,OAAO,EAAE;IAC1B,OAAO,IAAI,CAAC0hE,eAAe,CAACp4E,IAAI,CAACuO,OAAO,EAAEmI,OAAO,CAAC;EACpD;EAEA0hE,eAAeA,CAAC7pE,OAAO,EAAEsO,QAAQ,EAAE;IACjC,MAAMukB,QAAQ,GAAG7yB,OAAO,CAAC0H,SAAS;IAClC,MAAM/xB,KAAK,GAAG24B,QAAQ,CAACiiB,gBAAgB,CAAC,CAAC;IACzC,IAAI56C,KAAK,GAAG,CAAC,EAAE;MACb,OAAO,IAAI,CAAC+gB,OAAO,CAAC2gF,gBAAgB,CAAC,CAACxkD,QAAQ,CAACrlD,KAAK,GAAG,CAAC,KAAKmI,KAAK,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC1P,IAAI,CAACyvB,QAAQ,CAAC;IAC9F;IACA,OAAO,IAAI,CAACgB,OAAO,CAAC2gF,gBAAgB,CAAC,CAAC,EAAE,IAAI,CAACpxG,IAAI,CAACyvB,QAAQ,CAAC;EAC7D;AACF;AAEA2pF,eAAe,CAAC/1G,SAAS,CAACob,EAAE,GAAG,IAAI;AACnC26F,eAAe,CAAC/1G,SAAS,CAACoiB,IAAI,GAAG,UAAU;AAC3C2zF,eAAe,CAAC/1G,SAAS,CAACyqG,SAAS,GAAG,UAAU;AAEhD,+DAAesL,eAAe;;ACvBE;AACG;AAEnC,SAASC,UAAUA,CAACpyG,CAAC,EAAEsoB,MAAM,EAAE;EAC7B,MAAMo1D,EAAE,GAAI19E,CAAC,IAAI,EAAE,GAAI,IAAI;EAC3B,MAAMkpG,EAAE,GAAIlpG,CAAC,IAAI,CAAC,GAAI,IAAI;EAC1B,MAAMmpG,EAAE,GAAGnpG,CAAC,GAAG,IAAI;EACnB,MAAM1C,CAAC,GAAGgrB,MAAM,GAAGo1D,EAAE;EACrB,MAAM/yE,CAAC,GAAG2d,MAAM,GAAG4gF,EAAE;EACrB,MAAMh+F,CAAC,GAAGod,MAAM,GAAG6gF,EAAE;EACrB,OAAQ7rG,CAAC,IAAI,EAAE,GAAKqN,CAAC,IAAI,CAAE,GAAGO,CAAC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMmnG,aAAa,SAASnB,gBAAO,CAAC;EAClC,OAAO15F,EAAE,GAAG,IAAI;EAEhBghF,YAAYA,CAACj0E,IAAI,EAAE6c,QAAQ,EAAE;IAC3B,MAAMkxE,WAAW,GAAG,IAAI,CAACv5G,IAAI,CAACqa,KAAK;IACnC,MAAMm/F,cAAc,GAAGH,UAAU,CAACE,WAAW,EAAE,IAAI,CAACv5G,IAAI,CAACuvB,MAAM,CAAC;IAChE,OAAQ/D,IAAI,CAACkP,KAAK,GAAGZ,SAAI,CAACa,KAAK,CAACE,MAAM,GAAI0+E,WAAW,GAAGC,cAAc;EACxE;EAEA5V,eAAeA,CAACwK,QAAQ,EAAE/lE,QAAQ,EAAE;IAClC,OAAO,IAAI,CAACroC,IAAI,CAACqa,KAAK;EACxB;AACF;AAEAi/F,aAAa,CAACj2G,SAAS,CAACob,EAAE,GAAG,IAAI;AACjC66F,aAAa,CAACj2G,SAAS,CAACoiB,IAAI,GAAG,QAAQ;AACvC6zF,aAAa,CAACj2G,SAAS,CAACyqG,SAAS,GAAG,QAAQ;AAE5C,6DAAewL,aAAa;;ACzCiB;AAEU;AACQ;AACN;AACN;AAC0B;AACtB;AACQ;AACE;AACF;AACJ;AACU;AACZ;AACJ;AAErD,MAAMtqF,QAAQ,GAAG,IAAIwwC,gBAAU,CAAC,CAC9B44C,uBAAc,EACdC,2BAAkB,EAClBC,wBAAe,EACfC,qBAAY,EACZC,kCAAyB,EACzBE,uBAAc,EACdC,2BAAkB,EAClBG,4BAAmB,EACnBC,2BAAkB,EAClBC,yBAAgB,EAChBE,8BAAqB,EACrBE,wBAAe,EACfE,sBAAa,CACd,CAAC;AAEF,mDAAetqF,QAAQ;;AChCQ;AACc;AAE7C,SAASyqF,YAAYA,CAACC,SAAS,EAAE;EAC/B,OAAO,IAAI55E,+FAAW,CAAC45E,SAAS,EAAEA,SAAS,EAAEA,SAAS,CAAC;AACzD;AAEA,MAAMC,YAAY,GAAG,CACnB;EACEl7F,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,SAAS;EACfqoF,SAAS,EAAE,SAAS;EACpBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,CAAC;IACZ1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,cAAc;EACpBqoF,SAAS,EAAE,MAAM;EACjBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,EAAE;IACb1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,gBAAgB;EACtBqoF,SAAS,EAAE,QAAQ;EACnBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,IAAI,CAAC;IAC3B3kB,QAAQ,EAAE2kB,YAAY,CAAC,IAAI,CAAC;IAC5B1kB,SAAS,EAAE,GAAG;IACd1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,OAAO;EACbqoF,SAAS,EAAE,OAAO;EAClBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,IAAI,CAAC;IAC3B3kB,QAAQ,EAAE2kB,YAAY,CAAC,IAAI,CAAC;IAC5B1kB,SAAS,EAAE,EAAE;IACb1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,aAAa;EACnBqoF,SAAS,EAAE,aAAa;EACxBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,CAAC;IACZ1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,IAAI;IACjBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,OAAO;EACbqoF,SAAS,EAAE,OAAO;EAClBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,IAAI,CAAC;IAC3B3kB,QAAQ,EAAE2kB,YAAY,CAAC,IAAI,CAAC;IAC5B1kB,SAAS,EAAE,GAAG;IACd1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,IAAI;IACjBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,UAAU;EAChBqoF,SAAS,EAAE,UAAU;EACrBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,CAAC;IACZ1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,KAAK;IACb/rC,GAAG,EAAE,KAAK;IACV8kC,UAAU,EAAE,KAAK;IACjBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,MAAM;EACZqoF,SAAS,EAAE,MAAM;EACjBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,CAAC;IACZ1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,IAAI;IACZ/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE,KAAK;IAClBykE,WAAW,EAAE;EACf;AACF,CAAC,EAAE;EACDv3E,EAAE,EAAE,IAAI;EACRgH,IAAI,EAAE,MAAM;EACZqoF,SAAS,EAAE,MAAM;EACjBhY,WAAW,EAAE;IACXjB,OAAO,EAAE4kB,YAAY,CAAC,GAAG,CAAC;IAC1B3kB,QAAQ,EAAE2kB,YAAY,CAAC,GAAG,CAAC;IAC3B1kB,SAAS,EAAE,CAAC;IACZ1gC,OAAO,EAAE;EACX,CAAC;EACD1zC,MAAM,EAAE;IACNk9C,MAAM,EAAE,KAAK;IACb/rC,GAAG,EAAE,IAAI;IACT8kC,UAAU,EAAE,IAAI;IAChBrlC,WAAW,EAAE;EACf;AACF,CAAC,CACF;AAED,MAAMkG,SAAS,GAAG,IAAI+nC,gBAAU,CAACm6C,YAAY,CAAC;AAE9C,oDAAeliF,SAAS;;ACrKxB;AACA;AACA;AACA;AACA;AACA;AACA;AAC+B;AACmB;AAChB;AAElC,SAASmiF,cAAcA,CAACx8C,IAAI,EAAEy8C,SAAS,EAAE;EACvC,MAAMle,MAAM,GAAG,EAAE;EACjBv+B,IAAI,CAAC9jD,QAAQ,CAAEoO,MAAM,IAAK;IACxB,KAAK,IAAIpoB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGu6G,SAAS,CAACtiH,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACzC,IAAIooB,MAAM,YAAYmyF,SAAS,CAACv6G,CAAC,CAAC,EAAE;QAClCq8F,MAAM,CAACA,MAAM,CAACpkG,MAAM,CAAC,GAAGmwB,MAAM;QAC9B;MACF;IACF;EACF,CAAC,CAAC;EACF,OAAOi0E,MAAM;AACf;;AAEA;AACA,SAASme,oBAAoBA,CAACh2C,IAAI,EAAEnjD,MAAM,EAAEo5F,KAAK,EAAE;EACjD,MAAM/6G,QAAQ,GAAG8kE,IAAI,CAAC9kE,QAAQ,CAACu4F,cAAc,CAAC,CAAC;EAC/Cv4F,QAAQ,CAACy+D,SAAS,CAAC98C,MAAM,CAAC;EAE1B,MAAMq5F,OAAO,GAAG,IAAIl2C,IAAI,CAACl5D,WAAW,CAACk5D,IAAI,CAAChH,QAAQ,EAAE99D,QAAQ,CAAC;EAC7Dg7G,OAAO,CAACh7G,QAAQ,CAACs0D,WAAW,GAAG,IAAI;EACnC0mD,OAAO,CAAC9nE,YAAY,CAAC4xB,IAAI,CAACtxB,MAAM,CAAC;EACjCwnE,OAAO,CAAC98C,MAAM,CAACv/D,GAAG,CAACo8G,KAAK,CAAC;EACzB,OAAOC,OAAO;AAChB;AAEA,SAASC,cAAcA,CAAC78C,IAAI,EAAEy8C,SAAS,EAAEK,IAAI,EAAE;EAC7C,MAAMve,MAAM,GAAGie,cAAc,CAACx8C,IAAI,EAAEy8C,SAAS,CAAC;EAE9C,KAAK,IAAIv6G,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGo8F,MAAM,CAACpkG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;IAC7C,MAAMwkE,IAAI,GAAG63B,MAAM,CAACr8F,CAAC,CAAC;IACtB,IAAI,CAACwkE,IAAI,CAACp5D,MAAM,EAAE;MAChB;IACF;IACAwvG,IAAI,CAACp2C,IAAI,CAAC;EACZ;AACF;AAEA,SAASq2C,uBAAuBA,CAAC/8C,IAAI,EAAE4lC,GAAG,EAAE;EAC1C,MAAM8D,QAAQ,GAAG9D,GAAG,CAACzrG,MAAM;EAC3B,IAAIuvG,QAAQ,GAAG,CAAC,EAAE;IAChB;EACF;EAEA,MAAM+S,SAAS,GAAG,CAAC/5E,8FAAU,EAAEA,sGAAkB,EAAEA,8FAAU,CAAC;EAC9Dm6E,cAAc,CAAC78C,IAAI,EAAEy8C,SAAS,EAAG/1C,IAAI,IAAK;IACxCA,IAAI,CAAC5xB,YAAY,CAAC8wD,GAAG,CAAC,CAAC,CAAC,CAAC;IACzB,KAAK,IAAI9vF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4zF,QAAQ,EAAE,EAAE5zF,CAAC,EAAE;MACjC,MAAM8mG,OAAO,GAAG,IAAIl2C,IAAI,CAACl5D,WAAW,CAACk5D,IAAI,CAAChH,QAAQ,EAAEgH,IAAI,CAAC9kE,QAAQ,CAAC;MAClE8kE,IAAI,CAACp5D,MAAM,CAACjK,GAAG,CAACu5G,OAAO,CAAC;MACxBA,OAAO,CAAC9nE,YAAY,CAAC8wD,GAAG,CAAC9vF,CAAC,CAAC,CAAC;IAC9B;EACF,CAAC,CAAC;AACJ;AAEA,MAAMknG,0BAA0B,GAAI,YAAY;EAC9C,MAAMC,SAAS,GAAG;IAChB3jB,mBAAmB,EAAE,IAAI;IACzBD,WAAW,EAAE,KAAK;IAClBllE,WAAW,EAAE,KAAK;IAClBslE,cAAc,EAAE,KAAK;IACrBh5B,MAAM,EAAE,KAAK;IACbC,SAAS,EAAE,KAAK;IAChBhsC,GAAG,EAAE;EACP,CAAC;EAED,OAAO,UAAUsrC,IAAI,EAAEp+D,QAAQ,EAAE;IAC/B,IAAI,EAAEA,QAAQ,YAAYi3F,oBAAY,CAAC,EAAE;MACvC;IACF;IAEAgkB,cAAc,CAAC78C,IAAI,EAAE,CAACt9B,8FAAU,EAAEA,sGAAkB,CAAC,EAAGgkC,IAAI,IAAK;MAC/DA,IAAI,CAAC9kE,QAAQ,CAACy+D,SAAS,CAAC;QAAEi5B,mBAAmB,EAAE,KAAK;QAAED,WAAW,EAAE;MAAM,CAAC,CAAC;MAC3E3yB,IAAI,CAAC9kE,QAAQ,CAACs0D,WAAW,GAAG,IAAI;MAChCwQ,IAAI,CAAC5G,MAAM,CAACv/D,GAAG,CAACqhE,QAAQ,CAAC3J,MAAM,CAACE,WAAW,CAAC;MAE5C,MAAM+kD,iBAAiB,GAAGR,oBAAoB,CAACh2C,IAAI,EAAEu2C,SAAS,EAAEr7C,QAAQ,CAAC3J,MAAM,CAACG,mBAAmB,CAAC;MACpGsO,IAAI,CAACp5D,MAAM,CAACjK,GAAG,CAAC65G,iBAAiB,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC;AACH,CAAC,CAAC,CAAE;AAEJ,MAAMC,yBAAyB,GAAI,YAAY;EAC7C,MAAMF,SAAS,GAAG;IAChB1jB,YAAY,EAAE,IAAI;IAClBplE,WAAW,EAAE,KAAK;IAClBslE,cAAc,EAAE,KAAK;IACrBh5B,MAAM,EAAE,KAAK;IACbC,SAAS,EAAE,KAAK;IAChBhsC,GAAG,EAAE,KAAK;IACV8rC,aAAa,EAAE,KAAK;IACpBq5B,cAAc,EAAE,KAAK;IACrBb,SAAS,EAAE,KAAK;IAChBC,UAAU,EAAE,KAAK;IACjBC,cAAc,EAAE,KAAK;IACrBG,WAAW,EAAE;EACf,CAAC;EAED,OAAO,UAAUr5B,IAAI,EAAEp+D,QAAQ,EAAE;IAC/B,IAAI,EAAEA,QAAQ,YAAYi3F,oBAAY,CAAC,EAAE;MACvC;IACF;IAEAgkB,cAAc,CAAC78C,IAAI,EAAE,CAACt9B,8FAAU,EAAEA,sGAAkB,CAAC,EAAGgkC,IAAI,IAAK;MAC/D,MAAM02C,cAAc,GAAGV,oBAAoB,CAACh2C,IAAI,EAAEu2C,SAAS,EAAEr7C,QAAQ,CAAC3J,MAAM,CAACK,mBAAmB,CAAC;MACjGoO,IAAI,CAACp5D,MAAM,CAACjK,GAAG,CAAC+5G,cAAc,CAAC;IACjC,CAAC,CAAC;EACJ,CAAC;AACH,CAAC,CAAC,CAAE;AAEJ,MAAMC,uBAAuB,GAAI,YAAY;EAC3C,MAAMJ,SAAS,GAAG;IAChBxjB,cAAc,EAAE,IAAI;IACpBC,QAAQ,EAAE,IAAI;IACdj5B,MAAM,EAAE,KAAK;IACbC,SAAS,EAAE,KAAK;IAChBhsC,GAAG,EAAE;EACP,CAAC;EAED,OAAO,UAAUsrC,IAAI,EAAEp+D,QAAQ,EAAE;IAC/B,IAAI,EAAEA,QAAQ,YAAYi3F,oBAAY,CAAC,EAAE;MACvC;IACF;IACAgkB,cAAc,CAAC78C,IAAI,EAAE,CAACt9B,8FAAU,EAAEA,sGAAkB,CAAC,EAAGgkC,IAAI,IAAK;MAC/D,IAAI,CAACA,IAAI,CAACi2B,aAAa,IAAIj2B,IAAI,CAAC9kE,QAAQ,CAAC8+D,SAAS,EAAE;QAAE;QACpDgG,IAAI,CAAC9kE,QAAQ,CAACy+D,SAAS,CAAC;UAAEK,SAAS,EAAE;QAAM,CAAC,CAAC;MAC/C;MACA,IAAI,CAACgG,IAAI,CAAC9kE,QAAQ,CAAC6+D,MAAM,EAAE;QAAE;QAC3B;MACF;MACA,IAAI,CAACiG,IAAI,CAACg2B,UAAU,EAAE;QAAE;QACtB;MACF;MACA,IAAI,CAAC96B,QAAQ,CAAC/B,oBAAoB,CAAC6G,IAAI,CAAC,EAAE;QAAE;QAC1C;MACF;MAEA,MAAM42C,aAAa,GAAGZ,oBAAoB,CAACh2C,IAAI,EAAEu2C,SAAS,EAAEr7C,QAAQ,CAAC3J,MAAM,CAACM,SAAS,CAAC;MACtF+kD,aAAa,CAACC,eAAe,GAAG,IAAI;MACpC72C,IAAI,CAACp5D,MAAM,CAACjK,GAAG,CAACi6G,aAAa,CAAC;IAChC,CAAC,CAAC;EACJ,CAAC;AACH,CAAC,CAAC,CAAE;AAEJ,SAASE,uBAAuBA,CAACx9C,IAAI,EAAEp+D,QAAQ,EAAE;EAC/C,IAAI,EAAEA,QAAQ,YAAYi3F,oBAAY,CAAC,EAAE;IACvC;EACF;EAEAgkB,cAAc,CAAC78C,IAAI,EAAE,CAACt9B,8FAAU,EAAEA,sGAAkB,CAAC,EAAGgkC,IAAI,IAAK;IAC/D,IAAIA,IAAI,CAAC62C,eAAe,EAAE;MACxB72C,IAAI,CAACp5D,MAAM,CAACxM,MAAM,CAAC4lE,IAAI,CAAC;IAC1B;EACF,CAAC,CAAC;AACJ;AAEA,SAAS+2C,kBAAkBA,CAACv/C,KAAK,EAAEpgC,OAAO,EAAE;EAC1C,SAAS4/E,UAAUA,CAACpzF,MAAM,EAAE;IAC1B,IAAIA,MAAM,YAAYoY,8FAAU,EAAE;MAChC5E,OAAO,CAACxT,MAAM,CAAC;IACjB;IACA,KAAK,IAAIpoB,CAAC,GAAG,CAAC,EAAEhI,CAAC,GAAGowB,MAAM,CAACktC,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGhI,CAAC,EAAEgI,CAAC,EAAE,EAAE;MACtDw7G,UAAU,CAACpzF,MAAM,CAACktC,QAAQ,CAACt1D,CAAC,CAAC,CAAC;IAChC;EACF;EACAw7G,UAAU,CAACx/C,KAAK,CAAC;AACnB;AAEA,SAASy/C,mBAAmBA,CAACj3C,IAAI,EAAE;EACjC,MAAMf,IAAI,GAAGe,IAAI,CAAChH,QAAQ;EAC1B,IAAIiG,IAAI,YAAYjjC,iHAA6B,EAAE;IACjD,MAAMk7E,OAAO,GAAGj4C,IAAI,CAAC6B,UAAU;IAC/B,KAAK,MAAMq2C,QAAQ,IAAID,OAAO,EAAE;MAC9B,IAAIA,OAAO,CAAC13G,cAAc,CAAC23G,QAAQ,CAAC,IAAID,OAAO,CAACC,QAAQ,CAAC,YAAYn7E,kHAA8B,EAAE;QACnG,MAAMo7E,QAAQ,GAAGF,OAAO,CAACC,QAAQ,CAAC;QAClC,MAAMh2C,SAAS,GAAGlC,IAAI,CAACx7D,KAAK,GAAGw7D,IAAI,CAACx7D,KAAK,CAAC2E,KAAK,CAAC3U,MAAM,GAAG,CAAC,GAAG,CAAC;QAC9D,OAAO0tE,SAAS,GAAGi2C,QAAQ,CAAChvG,KAAK,CAAC3U,MAAM,GAAG2jH,QAAQ,CAACpxF,QAAQ;MAC9D;IACF;IACA,OAAO,CAAC;EACV;EACA,IAAIi5C,IAAI,YAAYjjC,wGAAoB,EAAE;IACxC,OAAOijC,IAAI,CAACx7D,KAAK,GAAGw7D,IAAI,CAACx7D,KAAK,CAAC2E,KAAK,CAAC3U,MAAM,GAAG,CAAC,GAAG,CAAC;EACrD;EACA,OAAOwrE,IAAI,CAACo4C,KAAK,GAAGp4C,IAAI,CAACo4C,KAAK,CAAC5jH,MAAM,GAAG,CAAC;AAC3C;AAEA,SAAS6jH,cAAcA,CAAC9/C,KAAK,EAAE;EAC7B,IAAI+/C,UAAU,GAAG,CAAC;EAClBR,kBAAkB,CAACv/C,KAAK,EAAGwI,IAAI,IAAK;IAClCu3C,UAAU,IAAIN,mBAAmB,CAACj3C,IAAI,CAAC;EACzC,CAAC,CAAC;EACF,OAAOu3C,UAAU;AACnB;AAEA,gDAAe;EACblB,uBAAuB;EACvBC,0BAA0B;EAC1BG,yBAAyB;EACzBE,uBAAuB;EACvBG,uBAAuB;EACvBC,kBAAkB;EAClBO;AACF,CAAC;;ACrNsB;AACQ;AACmB;AAChB;AACE;AACD;AACC;AACT;AAE3B,MAAM;EAAE/qE,SAASA,0BAAAA;AAAC,CAAC,GAAGqrC,IAAI;AAE1B,MAAM6/B,cAAc,CAAC;EACnB3wG,WAAWA,CAACrD,KAAK,EAAE5G,IAAI,EAAEE,OAAO,EAAEhC,QAAQ,EAAE;IAC1C,MAAM28G,mBAAmB,GAAG;MAC1B/pF,SAAS,EAAEpxB,QAAQ,CAAC2d,GAAG,CAACwT,KAAK,CAACC,SAAS;MACvCwlE,cAAc,EAAE52F,QAAQ,CAAC2d,GAAG,CAACwQ,EAAE,CAAC+C,WAAW;MAC3CusC,SAAS,EAAEz9D,QAAQ,CAAC2d,GAAG,CAAClD,MAAM,CAAC6E,EAAE;MACjCi3E,aAAa,EAAEv2F,QAAQ,CAAC2d,GAAG,CAAClD,MAAM,CAAChb;IACrC,CAAC;IACD,IAAI,CAACyH,KAAK,GAAGA,KAAK;IAClB,IAAI,CAAC5G,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAChC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC48G,cAAc,GAAG,EAAE;IACxB,IAAI,CAAC/rG,KAAK,GAAG,CAAC;IACd,IAAI,CAAC1Q,QAAQ,GAAG,IAAIi3F,oBAAY,CAAC,CAAC;IAClC,IAAI,CAACj3F,QAAQ,CAACy+D,SAAS,CAAC+9C,mBAAmB,CAAC;IAC5C,IAAI,CAACx8G,QAAQ,CAAC++D,cAAc,CAAC;MAAEztC,QAAQ,EAAEjwB,QAAQ,CAAC2d,GAAG,CAACsS;IAAS,CAAC,CAAC;IACjE,IAAI,CAACorF,cAAc,GAAGjkF,aAAS,CAAChN,KAAK;IACrC,IAAI,CAACkxF,YAAY,GAAG,IAAI;IACxB,IAAI,CAAChnD,OAAO,GAAG,IAAI;;IAEnB;IACA,IAAI,CAACinD,OAAO,CAACj7G,IAAI,CAAC;EACpB;EAEAusD,SAASA,CAAChrB,OAAO,EAAE;IACjB,IAAI,CAACxyB,KAAK,GAAGwyB,OAAO,CAACgrB,SAAS,CAAC,IAAI,CAACruD,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC0I,KAAK,CAAC;IAC9D,IAAI,CAACo0G,YAAY,GAAG,IAAI;IACxB,OAAO,IAAI,CAACjsG,KAAK;EACnB;EAEAmsG,WAAWA,CAAC35E,OAAO,EAAE;IACnBA,OAAO,CAACqrB,aAAa,CAAC,CAAC,IAAI,IAAI,CAAChmD,KAAK,CAAC;IACtC,IAAI,CAACmI,KAAK,GAAG,CAAC;EAChB;EAEAksG,OAAOA,CAACj7G,IAAI,EAAE;IACZ,IAAI,CAACA,IAAI,GAAGA,IAAI;EAClB;EAEAm7G,iBAAiBA,CAACjrF,MAAM,EAAE;IACxB,IAAI,CAAC6qF,cAAc,GAAG7qF,MAAM;IAC5B,IAAI,CAAC7xB,QAAQ,CAAC++D,cAAc,CAACltC,MAAM,CAACilE,WAAW,CAAC;IAChD,IAAI,CAAC92F,QAAQ,CAACy+D,SAAS,CAAC5sC,MAAM,CAAClQ,MAAM,CAAC;EACxC;EAEA5jB,KAAKA,CAAA,EAAG;IACN,IAAI,CAACi/D,GAAG,GAAG,IAAI;IACf,IAAI,CAAC+/C,YAAY,GAAG,IAAI;EAC1B;EAEAvO,aAAaA,CAACtrE,OAAO,EAAE;IACrB,IAAI,CAACnlC,KAAK,CAAC,CAAC;IACZ,IAAI,CAAC4+G,YAAY,GAAG,KAAK;IAEzB,IAAIt7G,QAAQ,CAAC2d,GAAG,CAACwU,EAAE,EAAE;MACnB,IAAI,CAACxzB,QAAQ,CAACy+D,SAAS,CAAC;QAAEy5B,gBAAgB,EAAE72F,QAAQ,CAAC2d,GAAG,CAACwU;MAAG,CAAC,CAAC;IAChE;IAEA,IAAI,CAACwpC,GAAG,GAAG,IAAI,CAACr7D,IAAI,CAAC6sG,aAAa,CAACtrE,OAAO,EAAE,IAAI,CAACrhC,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC0G,KAAK,EAAE,IAAI,CAACvI,QAAQ,CAAC;IAEzF,IAAI,IAAI,CAACA,QAAQ,CAAC82F,WAAW,CAACzhC,OAAO,GAAG,IAAI,IAAIh0D,QAAQ,CAAC2d,GAAG,CAACqV,YAAY,KAAK,SAAS,EAAE;MACvFioF,SAAS,CAAClB,0BAA0B,CAAC,IAAI,CAACp+C,GAAG,EAAE,IAAI,CAACh9D,QAAQ,CAAC;IAC/D;IACA,IAAI,CAACg9D,GAAG,CAACrH,OAAO,GAAG,IAAI,CAACA,OAAO;IAE/BqK,QAAQ,CAAC7B,qBAAqB,CAAC,IAAI,CAACnB,GAAG,EAAE,IAAI,CAAC0/C,cAAc,CAACj9F,EAAE,CAAC;IAChE68F,SAAS,CAACf,yBAAyB,CAAC,IAAI,CAACv+C,GAAG,EAAE,IAAI,CAACh9D,QAAQ,CAAC;IAE5D,IAAIqB,QAAQ,CAAC2d,GAAG,CAAClD,MAAM,CAAC6E,EAAE,EAAE;MAC1B27F,SAAS,CAACb,uBAAuB,CAAC,IAAI,CAACz+C,GAAG,EAAE,IAAI,CAACh9D,QAAQ,CAAC;IAC5D;IAEA,OAAO,IAAI,CAACg9D,GAAG;EACjB;EAEAggD,sBAAsBA,CAAC3hF,IAAI,EAAE;IAC3B,IAAI4hF,EAAE,GAAG,IAAI;IAEb,IAAI,IAAI,CAACjgD,GAAG,IAAK,WAAW,IAAI,IAAI,CAACA,GAAI,EAAE;MACzC,MAAM2/B,MAAM,GAAG,IAAI,CAAC3/B,GAAG,CAAChH,SAAS,CAAC36B,IAAI,CAAC;MACvC,IAAIshE,MAAM,IAAIA,MAAM,CAACpkG,MAAM,GAAG,CAAC,EAAE;QAC/B0kH,EAAE,GAAG,IAAIn8E,+FAAW,CAAC,CAAC;QACtBm8E,EAAE,CAACC,gBAAgB,GAAG,KAAK;QAC3BD,EAAE,CAACzpE,MAAM,GAAG,IAAI,CAACwpB,GAAG,CAACxpB,MAAM;QAE3B,KAAK,IAAIt/B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyoF,MAAM,CAACpkG,MAAM,EAAE2b,CAAC,EAAE,EAAE;UACtC,MAAM7F,CAAC,GAAGsuF,MAAM,CAACzoF,CAAC,CAAC;UACnB+oG,EAAE,CAACx7G,GAAG,CAAC4M,CAAC,CAAC;QACX;MACF;IACF;IAEA,IAAI4uG,EAAE,EAAE;MACNA,EAAE,CAACtnD,OAAO,GAAG,IAAI,CAACA,OAAO;IAC3B;IAEA,IAAI,CAAConD,YAAY,GAAGE,EAAE;IACtB,OAAO,IAAI,CAACF,YAAY;EAC1B;;EAEA;AACF;AACA;AACA;EACEI,OAAOA,CAACC,WAAW,EAAE;IACnB,MAAMl1F,IAAI,GAAG,CAAC,CAAC;IAEf,MAAMm1F,MAAM,GAAGx6G,MAAM,CAAC,IAAI,CAAChD,QAAQ,CAAC;IACpC,IAAI,CAACu9G,WAAW,IAAIC,MAAM,CAACC,OAAO,CAAC,CAAC,KAAKz6G,MAAM,CAACu6G,WAAW,CAACv9G,QAAQ,CAAC,CAACy9G,OAAO,CAAC,CAAC,EAAE;MAC/Ep1F,IAAI,CAACroB,QAAQ,GAAGw9G,MAAM;IACxB;IAEA,MAAME,QAAQ,GAAG,IAAI,CAAC57G,IAAI,CAAC4sG,QAAQ,CAAC,CAAC;IACrC,IAAI,CAAC6O,WAAW,IAAIx7G,KAAK,CAACsQ,OAAO,CAACqrG,QAAQ,CAAC,IAAIA,QAAQ,KAAKH,WAAW,CAACz7G,IAAI,EAAE;MAC5EumB,IAAI,CAACvmB,IAAI,GAAG47G,QAAQ;IACtB;IAEA,MAAMC,WAAW,GAAG,IAAI,CAAC37G,OAAO,CAAC0sG,QAAQ,CAAC,CAAC;IAC3C,IAAI,CAAC6O,WAAW,IAAIx7G,KAAK,CAACsQ,OAAO,CAACsrG,WAAW,CAAC,IAAIA,WAAW,KAAKJ,WAAW,CAACv7G,OAAO,EAAE;MACrFqmB,IAAI,CAACrmB,OAAO,GAAG27G,WAAW;IAC5B;IAEA,IAAI,CAACJ,WAAW,IAAI,IAAI,CAACV,cAAc,CAACj9F,EAAE,KAAK29F,WAAW,CAACp9G,QAAQ,EAAE;MACnEkoB,IAAI,CAACloB,QAAQ,GAAG,IAAI,CAAC08G,cAAc,CAACj9F,EAAE;IACxC;IAEA,OAAOyI,IAAI;EACb;;EAEA;AACF;AACA;EACEu1F,MAAMA,CAACL,WAAW,EAAEl6E,OAAO,EAAEvhC,IAAI,EAAE0Z,KAAK,EAAE;IACxC,MAAM6M,IAAI,GAAG,CAAC,CAAC;;IAEf;IACA,IAAIk1F,WAAW,CAACv9G,QAAQ,EAAE;MACxB,MAAM69G,iBAAiB,GAAGrsE,wBAAS,CAACzuC,KAAK,CAACw6G,WAAW,CAACv9G,QAAQ,CAAC,CAACA,QAAQ;MACxE,MAAM89G,WAAW,GAAG96G,MAAM,CAAC66G,iBAAiB,CAAC;MAC7C,IAAI,IAAI,CAACjB,cAAc,KAAKkB,WAAW,EAAE;QACvCz1F,IAAI,CAACroB,QAAQ,GAAG89G,WAAW;QAC3B,IAAI,CAAClB,cAAc,GAAGkB,WAAW;QACjC,IAAI,CAAC99G,QAAQ,GAAG69G,iBAAiB;QACjC,IAAI,CAACxvD,SAAS,CAAChrB,OAAO,CAAC;MACzB;IACF;;IAEA;IACA,IAAIk6E,WAAW,CAACz7G,IAAI,EAAE;MACpB,MAAMi8G,OAAO,GAAGR,WAAW,CAACz7G,IAAI;MAChC,IAAI,CAACG,0GAAS,CAAC,IAAI,CAACH,IAAI,CAAC4sG,QAAQ,CAAC,CAAC,EAAEqP,OAAO,CAAC,EAAE;QAC7C11F,IAAI,CAACvmB,IAAI,GAAGi8G,OAAO;QACnB,IAAI,CAAChB,OAAO,CAACj7G,IAAI,CAAC;MACpB;IACF;;IAEA;IACA,IAAIy7G,WAAW,CAACv7G,OAAO,EAAE;MACvB,MAAMg8G,UAAU,GAAGT,WAAW,CAACv7G,OAAO;MACtC,IAAI,CAACC,0GAAS,CAAC,IAAI,CAACD,OAAO,CAAC0sG,QAAQ,CAAC,CAAC,EAAEsP,UAAU,CAAC,EAAE;QACnD31F,IAAI,CAACrmB,OAAO,GAAGg8G,UAAU;QACzB,IAAI,CAACh8G,OAAO,GAAGwZ,KAAK;MACtB;IACF;;IAEA;IACA,IAAI+hG,WAAW,CAACp9G,QAAQ,EAAE;MACxB,MAAM89G,WAAW,GAAGV,WAAW,CAACp9G,QAAQ;MACxC,IAAI,CAAC8B,0GAAS,CAAC,IAAI,CAAC46G,cAAc,CAACj9F,EAAE,EAAEq+F,WAAW,CAAC,EAAE;QACnD51F,IAAI,CAACloB,QAAQ,GAAG89G,WAAW;QAC3B,IAAI,CAAChB,iBAAiB,CAACrkF,aAAS,CAAC/5B,GAAG,CAAC0+G,WAAW,CAACp9G,QAAQ,CAAC,CAAC;MAC7D;IACF;IAEA,OAAOkoB,IAAI;EACb;EAEAxH,IAAIA,CAACi1C,OAAO,EAAE;IACZ,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,IAAI,CAACqH,GAAG,EAAE;MACZ,IAAI,CAACA,GAAG,CAACrH,OAAO,GAAGA,OAAO;IAC5B;IACA,IAAI,IAAI,CAAConD,YAAY,EAAE;MACrB,IAAI,CAACA,YAAY,CAACpnD,OAAO,GAAGA,OAAO;IACrC;EACF;AACF;AAEA,yDAAe4mD,cAAc;;ACxME;AACK;AACE;AACjB;AAErB,SAASwB,wBAAwBA,CAAC3/C,IAAI,EAAErgB,SAAS,EAAE78B,QAAQ,EAAE;EAC3D,MAAM;IAAE00C;EAAS,CAAC,GAAGwI,IAAI;EACzB,IAAI,CAACxI,QAAQ,EAAE;IACb;EACF;EAEA,KAAK,IAAIt1D,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq1D,QAAQ,CAACr9D,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;IAC/C,MAAMmL,KAAK,GAAGmqD,QAAQ,CAACt1D,CAAC,CAAC;IACzB,IAAImL,KAAK,CAACi2B,UAAU,KAAKqc,SAAS,EAAE;MAClC78B,QAAQ,CAACzV,KAAK,CAAC;IACjB;IACA,IAAIA,KAAK,YAAYu0D,QAAQ,CAAC1K,OAAO,EAAE;MACrCyoD,wBAAwB,CAACtyG,KAAK,EAAEsyC,SAAS,EAAE78B,QAAQ,CAAC;IACtD;EACF;AACF;AAEA,SAAS88F,aAAaA,CAAA,EAAG,CACzB;AAEA,MAAMC,sBAAsB,SAASD,aAAa,CAAC;EACjDpyG,WAAWA,CAACsyG,aAAa,EAAE;IACzB,KAAK,CAAC,CAAC;IACP,IAAI,CAACC,cAAc,GAAGD,aAAa;IACnC,IAAI,CAACE,WAAW,GAAG,KAAK;EAC1B;EAEAz1G,KAAKA,CAAA,EAAG;IACN,MAAMu6B,OAAO,GAAG,IAAI,CAACi7E,cAAc,CAACh7E,UAAU,CAAC,CAAC;;IAEhD;IACA,IAAI,CAACk7E,oBAAoB,GAAG,EAAE;IAC9B,KAAK,IAAI/9G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4iC,OAAO,CAAC2mB,WAAW,CAACtxD,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACnD,MAAMy9C,SAAS,GAAG7a,OAAO,CAAC2mB,WAAW,CAACvpD,CAAC,CAAC;MACxC,IAAI,CAAC+9G,oBAAoB,CAACtgE,SAAS,CAAC79B,MAAM,CAAC,GAAG,IAAI4gB,kGAAc,CAAC,CAAC;IACpE;IAEA,IAAI,CAACs9E,WAAW,GAAG,IAAI;IAEvB,OAAO,IAAI;EACb;EAEA33G,KAAKA,CAAA,EAAG;IACN,IAAI,CAAC,IAAI,CAAC23G,WAAW,EAAE;MACrB;IACF;IAEA,MAAMl7E,OAAO,GAAG,IAAI,CAACi7E,cAAc,CAACh7E,UAAU,CAAC,CAAC;IAEhD,KAAK,IAAI7iC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4iC,OAAO,CAAC2mB,WAAW,CAACtxD,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACnD,IAAI,CAACg+G,uBAAuB,CAACp7E,OAAO,CAAC2mB,WAAW,CAACvpD,CAAC,CAAC,CAAC;IACtD;IAEA4iC,OAAO,CAAC+pB,qBAAqB,CAAC,CAAC;IAE/B,IAAI,CAACsxD,wBAAwB,CAAC,CAAC;IAE/B,IAAI,CAACJ,cAAc,CAACK,YAAY,CAAC,CAAC;EACpC;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,IAAI,CAACL,WAAW,EAAE;MACrB;IACF;IAEA,IAAI,CAACG,wBAAwB,CAAC,CAAC;IAE/B,IAAI,CAACJ,cAAc,CAACK,YAAY,CAAC,CAAC;EACpC;EAEAE,SAASA,CAAA,EAAG;IACV,MAAM/4F,GAAG,GAAG;MACVyM,OAAO,EAAE,EAAE;MACXusF,KAAK,EAAE,IAAI79E,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAClC,CAAC;IAED,MAAM89E,MAAM,GAAG,IAAI,CAACT,cAAc;IAClC,MAAMpgE,SAAS,GAAG6gE,MAAM,CAACC,oBAAoB,CAAC,CAAC;IAE/C,IAAI9gE,SAAS,KAAK,IAAI,EAAE;MACtB,OAAOp4B,GAAG;IACZ;IAEA,MAAM65E,SAAS,GAAG,IAAI,CAAC2e,cAAc,CAACW,eAAe,CAAC,CAAC;IACvD,MAAMC,aAAa,GAAG,CAAC,IAAIH,MAAM,CAACI,eAAe,CAAC,CAAC;IACnD,IAAI1+G,CAAC;IACL,IAAI4T,CAAC;IACL,IAAI+qG,QAAQ;IACZ,IAAIjiD,GAAG;;IAEP;IACA+gD,wBAAwB,CAACa,MAAM,EAAE7gE,SAAS,EAAGtyC,KAAK,IAAK;MACrDka,GAAG,CAACyM,OAAO,CAAC1tB,IAAI,CAAC+G,KAAK,CAAC;IACzB,CAAC,CAAC;;IAEF;IACA,KAAKnL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGk/F,SAAS,CAAC5pC,QAAQ,CAACr9D,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAC9C2+G,QAAQ,GAAGzf,SAAS,CAAC5pC,QAAQ,CAACt1D,CAAC,CAAC;MAChC,KAAK4T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+qG,QAAQ,CAACrpD,QAAQ,CAACr9D,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAC7C8oD,GAAG,GAAGiiD,QAAQ,CAACrpD,QAAQ,CAAC1hD,CAAC,CAAC;QAC1B,IAAI8oD,GAAG,CAAC14D,cAAc,CAAC,YAAY,CAAC,IAAI04D,GAAG,CAACt7B,UAAU,KAAKqc,SAAS,EAAE;UACpEp4B,GAAG,CAACyM,OAAO,CAAC1tB,IAAI,CAACs4D,GAAG,CAAC;QACvB;MACF;IACF;;IAEA;IACAr3C,GAAG,CAACyM,OAAO,CAAC1tB,IAAI,CAAC,IAAI,CAAC25G,oBAAoB,CAACtgE,SAAS,CAAC79B,MAAM,CAAC,CAAC;IAE7D,MAAMg/F,KAAK,GAAG,IAAIp+E,iGAAa,CAAC/gC,MAAM,CAACyqF,SAAS,EAAEzqF,MAAM,CAACyqF,SAAS,EAAEzqF,MAAM,CAACyqF,SAAS,CAAC;IACrF,MAAM20B,KAAK,GAAG,IAAIr+E,iGAAa,CAAC,CAAC/gC,MAAM,CAACyqF,SAAS,EAAE,CAACzqF,MAAM,CAACyqF,SAAS,EAAE,CAACzqF,MAAM,CAACyqF,SAAS,CAAC;IAExFzsC,SAAS,CAACpT,cAAc,CAAE5P,OAAO,IAAK;MACpC,MAAMsG,KAAK,GAAGtG,OAAO,CAAC8G,MAAM;MAC5B,KAAK3tB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmtB,KAAK,CAAC9oC,MAAM,EAAE,EAAE2b,CAAC,EAAE;QACjC,IAAImtB,KAAK,CAACntB,CAAC,CAAC,CAACmnB,IAAI,GAAG0jF,aAAa,EAAE;UACjCG,KAAK,CAAClyG,GAAG,CAACq0B,KAAK,CAACntB,CAAC,CAAC,CAAC6H,QAAQ,CAAC;UAC5BojG,KAAK,CAACpyG,GAAG,CAACs0B,KAAK,CAACntB,CAAC,CAAC,CAAC6H,QAAQ,CAAC;QAC9B;MACF;IACF,CAAC,CAAC;IAEF4J,GAAG,CAACg5F,KAAK,CAAC72C,WAAW,CAACo3C,KAAK,EAAEC,KAAK,EAAE,GAAG,CAAC;IACxC,OAAOx5F,GAAG;EACZ;EAEA24F,uBAAuBA,CAACvgE,SAAS,EAAE;IACjC,MAAMhwC,CAAC,GAAG,IAAI,CAACswG,oBAAoB,CAACtgE,SAAS,CAAC79B,MAAM,CAAC;IACrD,IAAInS,CAAC,KAAK,EAAEA,CAAC,CAACgO,QAAQ,CAACvN,CAAC,KAAK,CAAC,IAAIT,CAAC,CAACgO,QAAQ,CAAC9I,CAAC,KAAK,CAAC,IAAIlF,CAAC,CAACgO,QAAQ,CAACzH,CAAC,KAAK,CAAC,CAAC,IACtE,EAAEvG,CAAC,CAAC+oD,UAAU,CAACtoD,CAAC,KAAK,CAAC,IAAIT,CAAC,CAAC+oD,UAAU,CAAC7jD,CAAC,KAAK,CAAC,IAAIlF,CAAC,CAAC+oD,UAAU,CAACxiD,CAAC,KAAK,CAAC,IAAIvG,CAAC,CAAC+oD,UAAU,CAACzjD,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;MACrGtF,CAAC,CAACqxG,YAAY,CAAC,CAAC;MAEhBrhE,SAAS,CAACpT,cAAc,CAAE5P,OAAO,IAAK;QACpC,MAAMsG,KAAK,GAAGtG,OAAO,CAAC8G,MAAM;QAC5B,KAAK,IAAI3tB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmtB,KAAK,CAAC9oC,MAAM,EAAE,EAAE2b,CAAC,EAAE;UACrCmtB,KAAK,CAACntB,CAAC,CAAC,CAAC6H,QAAQ,CAACm3B,YAAY,CAACnlC,CAAC,CAACylC,MAAM,CAAC;QAC1C;MACF,CAAC,CAAC;IACJ;EACF;EAEA+qE,wBAAwBA,CAAA,EAAG;IACzB,MAAMK,MAAM,GAAG,IAAI,CAACT,cAAc;IAClC,MAAM3e,SAAS,GAAG,IAAI,CAAC2e,cAAc,CAACW,eAAe,CAAC,CAAC;IACvD,IAAIx+G,CAAC;IACL,IAAI4T,CAAC;IACL,IAAI+qG,QAAQ;IACZ,IAAIjiD,GAAG;IAEP,KAAK18D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+9G,oBAAoB,CAAC9lH,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACrD08D,GAAG,GAAG,IAAI,CAACqhD,oBAAoB,CAAC/9G,CAAC,CAAC;MAClC08D,GAAG,CAACjhD,QAAQ,CAACpd,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MACzBq+D,GAAG,CAAClG,UAAU,CAACn4D,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAChC;;IAEA;IACA,KAAK2B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGs+G,MAAM,CAAChpD,QAAQ,CAACr9D,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAC3C2+G,QAAQ,GAAGL,MAAM,CAAChpD,QAAQ,CAACt1D,CAAC,CAAC;MAC7B,KAAK4T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+qG,QAAQ,CAACrpD,QAAQ,CAACr9D,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAC7C8oD,GAAG,GAAGiiD,QAAQ,CAACrpD,QAAQ,CAAC1hD,CAAC,CAAC;QAC1B,IAAI8oD,GAAG,CAAC14D,cAAc,CAAC,YAAY,CAAC,EAAE;UACpC04D,GAAG,CAACjhD,QAAQ,CAACpd,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;UACzBq+D,GAAG,CAAClG,UAAU,CAACn4D,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC;MACF;IACF;;IAEA;IACA,KAAK2B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGk/F,SAAS,CAAC5pC,QAAQ,CAACr9D,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAC9C2+G,QAAQ,GAAGzf,SAAS,CAAC5pC,QAAQ,CAACt1D,CAAC,CAAC;MAChC,KAAK4T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+qG,QAAQ,CAACrpD,QAAQ,CAACr9D,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAC7C8oD,GAAG,GAAGiiD,QAAQ,CAACrpD,QAAQ,CAAC1hD,CAAC,CAAC;QAC1B,IAAI8oD,GAAG,CAAC14D,cAAc,CAAC,YAAY,CAAC,EAAE;UACpC04D,GAAG,CAACjhD,QAAQ,CAACpd,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;UACzBq+D,GAAG,CAAClG,UAAU,CAACn4D,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC;MACF;IACF;EACF;AACF;AAEA,MAAM0gH,qBAAqB,SAASrB,aAAa,CAAC;EAChDpyG,WAAWA,CAACsyG,aAAa,EAAE;IACzB,KAAK,CAAC,CAAC;IACP,IAAI,CAACC,cAAc,GAAGD,aAAa;IACnC,IAAI,CAACE,WAAW,GAAG,KAAK;EAC1B;EAEAz1G,KAAKA,CAAA,EAAG;IACN,MAAMi2G,MAAM,GAAG,IAAI,CAACT,cAAc;IAClC,MAAM3e,SAAS,GAAG,IAAI,CAAC2e,cAAc,CAACW,eAAe,CAAC,CAAC;IAEvD,MAAMz9E,KAAK,GAAG,IAAI,CAACi+E,wBAAwB,CAAC,CAAC;IAC7C,IAAIj+E,KAAK,CAAC9oC,MAAM,GAAG,CAAC,IAAI8oC,KAAK,CAAC9oC,MAAM,GAAG,CAAC,EAAE;MACxC6qB,MAAM,CAAChgB,KAAK,CAAC,sDAAsD,CAAC;MACpE,OAAO,KAAK;IACd;IAEA,IAAI,CAACm8G,mBAAmB,GAAGl+E,KAAK;IAEhC,MAAM09E,aAAa,GAAG,CAAC,IAAIH,MAAM,CAACI,eAAe,CAAC,CAAC;;IAEnD;IACAJ,MAAM,CAAC7oD,aAAa,CAACgpD,aAAa,EAAE,IAAI,CAAC;;IAEzC;IACA,KAAK,IAAI3mH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGonG,SAAS,CAAC5pC,QAAQ,CAACr9D,MAAM,EAAE,EAAEH,CAAC,EAAE;MAClDonG,SAAS,CAAC5pC,QAAQ,CAACx9D,CAAC,CAAC,CAACu9D,OAAO,GAAG,KAAK;IACvC;;IAEA;IACA,MAAM6pD,QAAQ,GAAGn+E,KAAK,CAAC,CAAC,CAAC,CAACtlB,QAAQ,CAAC2jB,KAAK,CAAC,CAAC;IAE1C,IAAI2B,KAAK,CAAC9oC,MAAM,KAAK,CAAC,EAAE;MACtBinH,QAAQ,CAACl6E,IAAI,CAACjE,KAAK,CAAC,CAAC,CAAC,CAACtlB,QAAQ,EAAE,GAAG,CAAC;IACvC;IAEA,IAAI,CAAC0jG,YAAY,GAAG,IAAI3+E,+FAAW,CAAC,CAAC;IACrC89E,MAAM,CAACn9G,GAAG,CAAC,IAAI,CAACg+G,YAAY,CAAC;IAC7B,IAAI,CAACA,YAAY,CAAC1jG,QAAQ,CAACjM,IAAI,CAAC0vG,QAAQ,CAAC;IAEzC,IAAI,CAACE,qBAAqB,GAAG,IAAI5+E,+FAAW,CAAC,CAAC;IAC9C0+D,SAAS,CAAC/9F,GAAG,CAAC,IAAI,CAACi+G,qBAAqB,CAAC;IACzC,IAAI,CAACA,qBAAqB,CAAC3jG,QAAQ,CAACjM,IAAI,CAAC0vG,QAAQ,CAAC;IAElD,MAAMx4G,MAAM,GAAGw4G,QAAQ,CAAC9/E,KAAK,CAAC,CAAC;IAC/B14B,MAAM,CAAC69B,MAAM,CAAC,CAAC;IAEf,KAAK,IAAIvkC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGs+G,MAAM,CAAChpD,QAAQ,CAACr9D,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAC/C,MAAMsS,CAAC,GAAGgsG,MAAM,CAAChpD,QAAQ,CAACt1D,CAAC,CAAC;MAC5B,IAAI,EAAE,WAAW,IAAIsS,CAAC,CAAC,EAAE;QACvB;MACF;MAEA,MAAM+sG,EAAE,GAAG,IAAI7+E,+FAAW,CAAC,CAAC;MAC5B,IAAI,CAAC2+E,YAAY,CAACh+G,GAAG,CAACk+G,EAAE,CAAC;MAEzB,MAAM1C,EAAE,GAAG,IAAIn8E,+FAAW,CAAC,CAAC;MAC5B,IAAI,CAAC4+E,qBAAqB,CAACj+G,GAAG,CAACw7G,EAAE,CAAC;MAElC,MAAMtgB,MAAM,GAAG/pF,CAAC,CAACojD,SAAS,CAAC+oD,aAAa,EAAE,IAAI,CAAC;MAC/C,KAAK,IAAI7qG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyoF,MAAM,CAACpkG,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACtC,MAAM7F,CAAC,GAAGsuF,MAAM,CAACzoF,CAAC,CAAC;QACnByrG,EAAE,CAACl+G,GAAG,CAAC4M,CAAC,CAAC;QACTA,CAAC,CAAC0N,QAAQ,CAACjM,IAAI,CAAC9I,MAAM,CAAC;MACzB;MAEA,MAAM44G,OAAO,GAAGhtG,CAAC,CAACojD,SAAS,CAAC+oD,aAAa,EAAE,IAAI,CAAC;MAChD,KAAK,IAAIjsG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8sG,OAAO,CAACrnH,MAAM,EAAEua,CAAC,EAAE,EAAE;QACvC,MAAM+sG,EAAE,GAAGD,OAAO,CAAC9sG,CAAC,CAAC;QACrBmqG,EAAE,CAACx7G,GAAG,CAACo+G,EAAE,CAAC;QACVA,EAAE,CAAC9jG,QAAQ,CAACjM,IAAI,CAAC9I,MAAM,CAAC;MAC1B;IACF;IAEAg5D,QAAQ,CAACxB,sBAAsB,CAAC,IAAI,CAACkhD,qBAAqB,CAAC;IAE3D,IAAI,CAACtB,WAAW,GAAG,IAAI;IACvB,OAAO,IAAI;EACb;EAEA33G,KAAKA,CAAA,EAAG;IACN,IAAI,CAAC,IAAI,CAAC23G,WAAW,EAAE;MACrB;IACF;IAEA,MAAMQ,MAAM,GAAG,IAAI,CAACT,cAAc;IAClC,MAAM2B,YAAY,GAAGlB,MAAM,CAACI,eAAe,CAAC,CAAC;IAE7C,MAAMv5G,CAAC,GAAG,IAAI,CAACg6G,YAAY,CAAC1jG,QAAQ;IACpC,MAAM1N,CAAC,GAAG,IAAI,CAACoxG,YAAY,CAACjsE,MAAM,CAAC9T,KAAK,CAAC,CAAC;IAC1CrxB,CAAC,CAACipD,QAAQ,CAAC,IAAIx2B,iGAAa,CAAC,CAAC,CAACi/E,eAAe,CAAC,CAACt6G,CAAC,CAAC+I,CAAC,EAAE,CAAC/I,CAAC,CAACwN,CAAC,EAAE,CAACxN,CAAC,CAAC6O,CAAC,CAAC,CAAC;IAEjE,IAAI,CAAC0rG,kBAAkB,CAAC3xG,CAAC,EAAE,CAAC,IAAIyxG,YAAY,CAAC;;IAE7C;IACAlB,MAAM,CAAC/oD,YAAY,CAAC,CAAC,IAAIiqD,YAAY,EAAE,IAAI,CAAC;IAE5ClB,MAAM,CAACz7E,UAAU,CAAC,CAAC,CAAC8pB,qBAAqB,CAAC,CAAC;IAE3C2xD,MAAM,CAACJ,YAAY,CAAC,CAAC;EACvB;EAEAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,IAAI,CAACL,WAAW,EAAE;MACrB;IACF;IAEA,MAAMQ,MAAM,GAAG,IAAI,CAACT,cAAc;IAClC,MAAM3e,SAAS,GAAG,IAAI,CAAC2e,cAAc,CAACW,eAAe,CAAC,CAAC;IAEvD,IAAI,CAACW,YAAY,CAAC/zG,MAAM,CAACxM,MAAM,CAAC,IAAI,CAACugH,YAAY,CAAC;;IAElD;IACAb,MAAM,CAAC/oD,YAAY,CAAC,CAAC,IAAI+oD,MAAM,CAACI,eAAe,CAAC,CAAC,EAAE,IAAI,CAAC;;IAExD;IACA,KAAK,IAAI1+G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGk/F,SAAS,CAAC5pC,QAAQ,CAACr9D,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAClD,MAAM0qB,IAAI,GAAGw0E,SAAS,CAAC5pC,QAAQ,CAACt1D,CAAC,CAAC;MAClC,IAAI0qB,IAAI,CAAC2qC,OAAO,EAAE;QAChB6pC,SAAS,CAACtgG,MAAM,CAAC8rB,IAAI,CAAC;MACxB,CAAC,MAAM;QACLA,IAAI,CAAC2qC,OAAO,GAAG,IAAI;MACrB;IACF;IAEAipD,MAAM,CAACJ,YAAY,CAAC,CAAC;EACvB;EAEAyB,qBAAqBA,CAAA,EAAG;IACtB,OAAQ,IAAI,CAACV,mBAAmB,CAAChnH,MAAM,GAAG,CAAC;EAC7C;EAEAmmH,SAASA,CAAA,EAAG;IACV,MAAM/4F,GAAG,GAAG;MACVyM,OAAO,EAAE,EAAE;MACXusF,KAAK,EAAE,IAAI79E,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAClC,CAAC;IAEDnb,GAAG,CAACyM,OAAO,CAAC1tB,IAAI,CAAC,IAAI,CAAC+6G,YAAY,EAAE,IAAI,CAACC,qBAAqB,CAAC;IAE/D,MAAMQ,UAAU,GAAG,IAAI,CAACX,mBAAmB;IAC3C,IAAIW,UAAU,CAAC3nH,MAAM,KAAK,CAAC,EAAE;MAC3B,IAAI2nH,UAAU,CAAC,CAAC,CAAC,CAACzkF,KAAK,CAACljC,MAAM,KAAK,CAAC,EAAE;QACpC;QACA,MAAMk0B,IAAI,GAAGyzF,UAAU,CAAC,CAAC,CAAC,CAACzkF,KAAK,CAAC,CAAC,CAAC;QACnC9V,GAAG,CAACmxD,IAAI,GAAG,IAAIh2C,iGAAa,CAAC,CAAC,CAAC0tC,UAAU,CAAC/hD,IAAI,CAAC4R,MAAM,CAACtiB,QAAQ,EAAE0Q,IAAI,CAAC2R,KAAK,CAACriB,QAAQ,CAAC;QACpF4J,GAAG,CAACmxD,IAAI,CAACl2C,SAAS,CAAC,CAAC;QACpBjb,GAAG,CAACmxD,IAAI,CAACqpC,kBAAkB,CAAC,IAAI,CAAChC,cAAc,CAAC/mD,WAAW,CAAC;MAC9D;IACF,CAAC,MAAM,IAAI8oD,UAAU,CAAC3nH,MAAM,KAAK,CAAC,EAAE;MAClC;MACAotB,GAAG,CAACmxD,IAAI,GAAG,IAAIh2C,iGAAa,CAAC,CAAC,CAAC0tC,UAAU,CAAC0xC,UAAU,CAAC,CAAC,CAAC,CAACnkG,QAAQ,EAAEmkG,UAAU,CAAC,CAAC,CAAC,CAACnkG,QAAQ,CAAC;MACzF4J,GAAG,CAACmxD,IAAI,CAACl2C,SAAS,CAAC,CAAC;MACpBjb,GAAG,CAACmxD,IAAI,CAACqpC,kBAAkB,CAAC,IAAI,CAAChC,cAAc,CAAC/mD,WAAW,CAAC;IAC9D;IAEA,OAAOzxC,GAAG;EACZ;EAEA25F,wBAAwBA,CAAA,EAAG;IACzB,MAAMp8E,OAAO,GAAG,IAAI,CAACi7E,cAAc,CAACh7E,UAAU,CAAC,CAAC;IAEhD,MAAM47E,aAAa,GAAG,CAAC,IAAI,IAAI,CAACZ,cAAc,CAACa,eAAe,CAAC,CAAC;IAChE,MAAMoB,QAAQ,GAAG,CAAC,CAAC;IAEnBl9E,OAAO,CAACjH,WAAW,CAAExP,IAAI,IAAK;MAC5B,IAAIA,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,GAAG0jF,aAAa,EAAE;QACnC,IAAI,CAACtyF,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,MAAM,CAAC,EAAE;UAC5CqB,QAAQ,CAAC3zF,IAAI,CAAC2R,KAAK,CAAC71B,KAAK,CAAC,GAAG,CAAC;QAChC;MACF,CAAC,MAAM,IAAIkkB,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,EAAE;QAC3CqB,QAAQ,CAAC3zF,IAAI,CAAC4R,MAAM,CAAC91B,KAAK,CAAC,GAAG,CAAC;MACjC;IACF,CAAC,CAAC;IAEF,MAAM84B,KAAK,GAAG,EAAE;IAChB,MAAMjvB,IAAI,GAAGjQ,MAAM,CAACiQ,IAAI,CAACguG,QAAQ,CAAC;IAClC,KAAK,IAAI9/G,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG6R,IAAI,CAAC7Z,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC3C,MAAM2c,GAAG,GAAG7K,IAAI,CAAC9R,CAAC,CAAC;MACnB+gC,KAAK,CAAC38B,IAAI,CAACw+B,OAAO,CAACrB,MAAM,CAAC5kB,GAAG,CAAC,CAAC;IACjC;IAEA,OAAOokB,KAAK;EACd;EAEA2+E,kBAAkBA,CAACxsE,MAAM,EAAEnY,IAAI,EAAE;IAC/B,IAAI,CAAC8iF,cAAc,CAACh7E,UAAU,CAAC,CAAC,CAACE,WAAW,CAAE7W,IAAI,IAAK;MACrD,IAAIA,IAAI,CAAC6O,IAAI,GAAGA,IAAI,EAAE;QACpB7O,IAAI,CAACzQ,QAAQ,CAACm3B,YAAY,CAACM,MAAM,CAAC;MACpC;IACF,CAAC,CAAC;EACJ;AACF;AAEA,wDAAe;EACb6sE,eAAe,EAAEpC,sBAAsB;EACvCqC,cAAc,EAAEjB;AAClB,CAAC;;AC/XsB;AACQ;AACH;AACQ;AACV;AACQ;AACI;AACN;AACM;AACA;AACE;AACU;AACpB;AACsB;AACZ;AAExC,MAAM;EAAEhuE,SAASA,yBAAAA;AAAC,CAAC,GAAGqrC,IAAI;AAE1B,SAAS8jC,eAAeA,CAACC,UAAU,EAAEC,KAAK,EAAE;EAC1C,IAAI,CAAC9+G,KAAK,CAACsQ,OAAO,CAACwuG,KAAK,CAAC,EAAE;IACzBA,KAAK,GAAG,CAACA,KAAK,CAAC;EACjB;EACA,MAAM,CAACjhG,EAAE,EAAEze,IAAI,CAAC,GAAG0/G,KAAK;EACxB,MAAMC,MAAM,GAAGF,UAAU,CAAC/hH,GAAG,CAAC+gB,EAAE,CAAC,IAAIghG,UAAU,CAACh1F,KAAK;EACrD,OAAO,IAAIk1F,MAAM,CAAC3/G,IAAI,CAAC;AACzB;AAEA,MAAM4/G,aAAa,SAAS1gD,UAAM,CAAC;EACjCt0D,WAAWA,CAAC6a,IAAI,EAAE05C,UAAU,EAAE;IAC5B,KAAK,CAAC15C,IAAI,EAAE05C,UAAU,CAAC;IACvB,IAAI,CAAC92B,QAAQ,GAAG82B,UAAU;;IAE1B;IACA,IAAI,CAAC0gD,SAAS,GAAG,EAAE;IACnB;IACA,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAE5B,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,eAAe,GAAG,CAAC;IAExB,IAAI,CAACC,kBAAkB,GAAG,IAAIrgF,+FAAW,CAAC,CAAC;EAC7C;EAEA6R,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAACtJ,QAAQ,CAACsJ,aAAa,CAAC,CAAC;EACtC;EAEA0tB,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAAC8gD,kBAAkB,CAACz1G,MAAM,EAAE;MAClC,IAAI,CAACy1G,kBAAkB,CAACjiH,MAAM,CAAC,IAAI,CAACiiH,kBAAkB,CAAC;IACzD;IACAjhD,UAAM,CAAC77D,SAAS,CAACg8D,OAAO,CAACp8D,IAAI,CAAC,IAAI,CAAC;EACrC;EAEAk/B,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACkG,QAAQ;EACtB;EAEA+3E,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACF,eAAe;EAC7B;EAEApC,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACqC,kBAAkB;EAChC;EAEAnC,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACgC,aAAa;EAC3B;EAEAK,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAACC,OAAO;EACrB;EAEArjH,SAASA,CAACq5B,IAAI,EAAE;IACd;IACA,IAAI,IAAI,CAAC+R,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACklB,aAAa,CAAC,CAAC,CAAC,CAAC;IACjC;IACA,IAAI,CAACwyD,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACE,aAAa,GAAG,CAAC;IACtB,IAAI,CAACJ,SAAS,CAACtoH,MAAM,GAAG++B,IAAI,CAAC/+B,MAAM;IACnC,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG+2B,IAAI,CAAC/+B,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC3C,MAAMX,GAAG,GAAG23B,IAAI,CAACh3B,CAAC,CAAC;MAEnB,IAAIT,QAAQ;MACZ,IAAI48G,cAAc;MAClB,IAAI,OAAO98G,GAAG,CAACE,QAAQ,KAAK,QAAQ,EAAE;QACpC48G,cAAc,GAAG98G,GAAG,CAACE,QAAQ;QAC7B,CAAC;UAAEA;QAAS,CAAC,GAAGwxC,uBAAS,CAACzuC,KAAK,CAAC65G,cAAc,CAAC;MACjD,CAAC,MAAM,IAAI,OAAO98G,GAAG,CAACE,QAAQ,KAAK,WAAW,EAAE;QAC9C48G,cAAc,GAAGp7G,QAAQ,CAAC2d,GAAG,CAAC8S,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC,CAAClyB,QAAQ;QACzD,CAAC;UAAEA;QAAS,CAAC,GAAGwxC,uBAAS,CAACzuC,KAAK,CAAC65G,cAAc,CAAC;MACjD,CAAC,MAAM;QACL,CAAC;UAAE58G;QAAS,CAAC,GAAGF,GAAG;QACnB88G,cAAc,GAAG58G,QAAQ,CAACtB,QAAQ,CAAC,CAAC;MACtC;MACA,MAAMoD,IAAI,GAAG6+G,eAAe,CAACl0F,SAAK,EAAE3sB,GAAG,CAACgC,IAAI,CAAC;MAC7C,MAAME,OAAO,GAAG2+G,eAAe,CAACxwF,YAAQ,EAAErwB,GAAG,CAACkC,OAAO,CAAC;MACtD,MAAM7B,QAAQ,GAAGy4B,aAAS,CAAC/5B,GAAG,CAACiB,GAAG,CAACK,QAAQ,CAAC,IAAIy4B,aAAS,CAAChN,KAAK;MAE/D,IAAI,CAACo1F,SAAS,CAACvgH,CAAC,CAAC,GAAG,IAAIi8G,kBAAc,CAACj8G,CAAC,EAAEqB,IAAI,EAAEE,OAAO,EAAEhC,QAAQ,CAAC;MAClE,IAAI,CAACghH,SAAS,CAACvgH,CAAC,CAAC,CAACw8G,iBAAiB,CAAC98G,QAAQ,CAAC;MAC7C,IAAI,CAAC6gH,SAAS,CAACvgH,CAAC,CAAC,CAACm8G,cAAc,GAAGA,cAAc;MAEjD,IAAI,IAAI,CAACpzE,QAAQ,EAAE;QACjB,IAAI,CAACA,QAAQ,CAAC6kB,SAAS,CAACruD,QAAQ,EAAE,CAAC,IAAIS,CAAC,CAAC;MAC3C;MAEA,IAAI,CAAC2gH,aAAa,IAAI,CAAC,IAAI3gH,CAAC;IAC9B;IACA,IAAI,CAACwgH,KAAK,GAAGxpF,IAAI,CAAC/+B,MAAM,GAAG,CAAC,GAAG,IAAI,CAACsoH,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI;IAEvD,IAAI,CAACG,aAAa,GAAG1pF,IAAI,CAAC/+B,MAAM;IAChC,IAAI,CAAC0oH,aAAa,IAAI,CAAC,IAAI,IAAI,CAACD,aAAa,CAAC,CAAC;IAC/C,IAAI,CAACE,eAAe,GAAG,CAAC;IAExB,IAAI,IAAI,CAAC73E,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,CAACnqB,MAAM,CAAC,CAAC;IACxB;EACF;;EAEA;AACF;AACA;AACA;EACEqiG,QAAQA,CAAA,EAAG;IACT,OAAO,IAAI,CAACV,SAAS,CAACtoH,MAAM;EAC9B;;EAEA;AACF;AACA;AACA;AACA;EACEqH,UAAUA,CAAC2I,KAAK,EAAE;IAChB,IAAIA,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAG,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,EAAE;MAC/C,IAAI,CAACuoH,KAAK,GAAG,IAAI,CAACD,SAAS,CAACt4G,KAAK,CAAC;IACpC,CAAC,MAAM;MACLA,KAAK,GAAG,IAAI,CAACs4G,SAAS,CAACpqG,OAAO,CAAC,IAAI,CAACqqG,KAAK,CAAC;IAC5C;IACA,OAAOv4G,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE5I,GAAGA,CAAC4I,KAAK,EAAE5I,GAAG,EAAE;IACd;IACA,IAAI,CAACA,GAAG,KAAK4I,KAAK,KAAKwU,SAAS,IAAIxU,KAAK,YAAYpG,MAAM,CAAC,EAAE;MAC5DxC,GAAG,GAAG4I,KAAK;MACXA,KAAK,GAAG,IAAI,CAAC3I,UAAU,CAAC,CAAC;IAC3B;;IAEA;IACA,IAAI2I,KAAK,GAAG,CAAC,IAAIA,KAAK,GAAG,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,EAAE;MAC9C6qB,MAAM,CAAChgB,KAAK,CAAC,OAAOmF,KAAK,kBAAkB,CAAC;MAC5C,OAAO,IAAI;IACb;;IAEA;IACA,IAAIA,KAAK,KAAK,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,EAAE;MACnC,MAAMotB,GAAG,GAAG,IAAI,CAACjkB,MAAM,CAAC/B,GAAG,CAAC;MAC5ByjB,MAAM,CAACjB,IAAI,CAAC,OAAO5Z,KAAK,kDAAkD,CAAC;MAC3E,OAAO;QAAEi5G,IAAI,EAAE77F,GAAG,CAAC67F,IAAI;QAAEj5G,KAAK;QAAEk5G,MAAM,EAAE;MAAU,CAAC;IACrD;;IAEA;IACA,MAAMvlG,MAAM,GAAG,IAAI,CAAC2kG,SAAS,CAACt4G,KAAK,CAAC;IACpC,MAAMi5G,IAAI,GAAG;MACX3hH,QAAQ,EAAEqc,MAAM,CAACugG,cAAc;MAC/B96G,IAAI,EAAEua,MAAM,CAACva,IAAI,CAAC4sG,QAAQ,CAAC,CAAC;MAC5B1sG,OAAO,EAAEqa,MAAM,CAACra,OAAO,CAAC0sG,QAAQ,CAAC,CAAC;MAClCvuG,QAAQ,EAAEkc,MAAM,CAACwgG,cAAc,CAACj9F;IAClC,CAAC;;IAED;IACA,IAAI9f,GAAG,EAAE;MACP;MACA,MAAMuoB,IAAI,GAAGhM,MAAM,CAACuhG,MAAM,CACxB99G,GAAG,EACH,IAAI,CAAC0pC,QAAQ,EACbm3E,eAAe,CAACl0F,SAAK,EAAE3sB,GAAG,CAACgC,IAAI,CAAC,EAChC6+G,eAAe,CAACxwF,YAAQ,EAAErwB,GAAG,CAACkC,OAAO,CACvC,CAAC;;MAED;MACA,IAAI,CAACC,0GAAS,CAAComB,IAAI,CAAC,EAAE;QACpBhM,MAAM,CAACygG,YAAY,GAAG,IAAI;QAC1B,KAAK,MAAM16G,GAAG,IAAIimB,IAAI,EAAE;UACtB,IAAIA,IAAI,CAAC5jB,cAAc,CAACrC,GAAG,CAAC,EAAE;YAC5Bu/G,IAAI,CAACv/G,GAAG,CAAC,GAAGimB,IAAI,CAACjmB,GAAG,CAAC;YACrBmhB,MAAM,CAACpB,KAAK,CAAC,OAAOzZ,KAAK,KAAKtG,GAAG,eAAeimB,IAAI,CAACjmB,GAAG,CAAC,EAAE,CAAC;UAC9D;QACF;;QAEA;QACA,IAAIimB,IAAI,CAACvmB,IAAI,IAAIua,MAAM,CAACva,IAAI,CAAC2uG,SAAS,KAChCjvG,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,KAAK,OAAO,IAAIrwB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,KAAK,MAAM,CAAC,EAAE;UAChFtO,MAAM,CAAClB,MAAM,CAAC,+DAA+D,CAAC;UAC9E7gB,QAAQ,CAAC1C,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC;QACtC;QACA,OAAO;UAAE6iH,IAAI;UAAEj5G,KAAK;UAAEk5G,MAAM,EAAE;QAAU,CAAC;MAC3C;IACF;IACA,OAAO;MAAED,IAAI;MAAEj5G,KAAK;MAAEk5G,MAAM,EAAE;IAAG,CAAC;EACpC;;EAEA;AACF;AACA;AACA;AACA;EACEC,MAAMA,CAACn5G,KAAK,EAAE;IACZ;IACA,IAAIA,KAAK,KAAKwU,SAAS,IAAIxU,KAAK,YAAYpG,MAAM,EAAE;MAClDoG,KAAK,GAAG,IAAI,CAAC3I,UAAU,CAAC,CAAC;IAC3B;;IAEA;IACA,IAAI2I,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,EAAE;MAC/C,OAAO,IAAI;IACb;IAEA,OAAO,IAAI,CAACsoH,SAAS,CAACt4G,KAAK,CAAC;EAC9B;EAEAo5G,eAAeA,CAAA,EAAG;IAChB,IAAIC,IAAI,GAAG,IAAI,CAACX,aAAa;IAC7B,KAAK,IAAI3gH,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIsgH,aAAa,CAACiB,uBAAuB,EAAE,EAAEvhH,CAAC,EAAEshH,IAAI,KAAK,CAAC,EAAE;MAC3E,IAAI,CAACA,IAAI,GAAG,CAAC,MAAM,CAAC,EAAE;QACpB,OAAOthH,CAAC;MACV;IACF;IACA,OAAO,CAAC,CAAC;EACX;;EAEA;AACF;AACA;AACA;AACA;EACEoB,MAAMA,CAAC/B,GAAG,EAAE;IACV,IAAI,IAAI,CAACkhH,SAAS,CAACtoH,MAAM,IAAIqoH,aAAa,CAACiB,uBAAuB,EAAE;MAClE,OAAO,IAAI;IACb;IAEA,MAAMC,eAAe,GAAG,IAAI,CAACH,eAAe,CAAC,CAAC;IAC9C,IAAIG,eAAe,GAAG,CAAC,EAAE;MACvB,OAAO,IAAI,CAAC,CAAC;IACf;IAEA,MAAMC,iBAAiB,GAAG,IAAI,CAACC,qBAAqB,CAAC,CAAC,IAAI,IAAI,CAAChB,aAAa,CAAC;;IAE7E;IACA,MAAMiB,GAAG,GAAG5gH,QAAQ,CAAC2d,GAAG,CAAC8S,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC;IAC3C,MAAMyvF,IAAI,GAAG1/G,wGAAO,CAAC;MACnBjC,QAAQ,EAAEoiH,GAAG,CAACpiH,QAAQ;MACtB8B,IAAI,EAAEsgH,GAAG,CAACtgH,IAAI;MACdE,OAAO,EAAEogH,GAAG,CAACpgH,OAAO;MACpB7B,QAAQ,EAAEiiH,GAAG,CAACjiH;IAChB,CAAC,EAAEL,GAAG,CAAC;IAEP,MAAME,QAAQ,GAAI,OAAO2hH,IAAI,CAAC3hH,QAAQ,KAAK,QAAQ,GAAIwxC,uBAAS,CAACzuC,KAAK,CAAC4+G,IAAI,CAAC3hH,QAAQ,CAAC,CAACA,QAAQ,GAAG2hH,IAAI,CAAC3hH,QAAQ;IAC9G,MAAMqc,MAAM,GAAG,IAAIqgG,kBAAc,CAC/B,IAAI,CAACyE,aAAa,EAClBR,eAAe,CAACl0F,SAAK,EAAEk1F,IAAI,CAAC7/G,IAAI,CAAC,EACjC6+G,eAAe,CAACxwF,YAAQ,EAAEwxF,IAAI,CAAC3/G,OAAO,CAAC,EACvChC,QACF,CAAC;IACDqc,MAAM,CAACugG,cAAc,GAAG58G,QAAQ,CAACtB,QAAQ,CAAC,CAAC;IAC3C2d,MAAM,CAAC4gG,iBAAiB,CAACrkF,aAAS,CAAC/5B,GAAG,CAAC8iH,IAAI,CAACxhH,QAAQ,CAAC,CAAC;IACtDkc,MAAM,CAACgyC,SAAS,CAAC,IAAI,CAAC7kB,QAAQ,CAAC;IAC/B,IAAI,CAACw3E,SAAS,CAACn8G,IAAI,CAACwX,MAAM,CAAC;;IAE3B;IACA,IAAI,CAAC8kG,aAAa,GAAGc,eAAe;IACpC,IAAI,CAACb,aAAa,IAAI,CAAC,IAAI,IAAI,CAACD,aAAa;;IAE7C;IACA,IAAI,CAAC33E,QAAQ,CAAC6kB,SAAS,CAAC6zD,iBAAiB,EAAE,CAAC,IAAI,IAAI,CAACf,aAAa,CAAC;IAEnE,OAAO;MAAEQ,IAAI;MAAEj5G,KAAK,EAAE,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,GAAG;IAAE,CAAC;EACnD;;EAEA;AACF;AACA;AACA;EACEyG,SAASA,CAACuJ,KAAK,EAAE;IACf,IAAIA,KAAK,KAAKwU,SAAS,EAAE;MACvBxU,KAAK,GAAG,IAAI,CAAC3I,UAAU,CAAC,CAAC;IAC3B;;IAEA;IACA,IAAI8Q,KAAK,GAAG,IAAI,CAACmwG,SAAS,CAACtoH,MAAM;IACjC,IAAIgQ,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAImI,KAAK,IAAIA,KAAK,IAAI,CAAC,EAAE;MAAE;MAC/C;IACF;IAEA,MAAMwL,MAAM,GAAG,IAAI,CAAC2kG,SAAS,CAACt4G,KAAK,CAAC;IACpC2T,MAAM,CAAC2gG,WAAW,CAAC,IAAI,CAACxzE,QAAQ,CAAC;IACjC,IAAI,CAAC43E,aAAa,IAAI,EAAE,CAAC,IAAI/kG,MAAM,CAAC3T,KAAK,CAAC;IAE1C,IAAI,CAACs4G,SAAS,CAACjyE,MAAM,CAACrmC,KAAK,EAAE,CAAC,CAAC;;IAE/B;IACA,IAAI2T,MAAM,KAAK,IAAI,CAAC4kG,KAAK,EAAE;MACzB,EAAEpwG,KAAK;MACPnI,KAAK,GAAGA,KAAK,GAAGmI,KAAK,GAAGnI,KAAK,GAAGmI,KAAK,GAAG,CAAC;MACzC,IAAI,CAACowG,KAAK,GAAG,IAAI,CAACD,SAAS,CAACt4G,KAAK,CAAC;IACpC;IACA,IAAI,CAACw4G,gBAAgB,GAAG,IAAI;EAC9B;;EAEA;AACF;AACA;AACA;AACA;EACE5hH,OAAOA,CAACoJ,KAAK,EAAE25G,IAAI,EAAE;IACnB,IAAIA,IAAI,KAAKnlG,SAAS,EAAE;MACtBmlG,IAAI,GAAG,IAAI;IACb;;IAEA;IACA,IAAI35G,KAAK,GAAG,CAAC,IAAIA,KAAK,IAAI,IAAI,CAACs4G,SAAS,CAACtoH,MAAM,EAAE;MAC/C;IACF;IAEA,MAAM2jB,MAAM,GAAG,IAAI,CAAC2kG,SAAS,CAACt4G,KAAK,CAAC;IACpC2T,MAAM,CAACwE,IAAI,CAAC,CAACwhG,IAAI,CAAC;EACpB;;EAEA;AACF;AACA;AACA;AACA;EACE1iH,MAAMA,CAACK,QAAQ,EAAE2C,MAAM,EAAE;IACvB,IAAIA,MAAM,EAAE;MACV,IAAI,CAAC0+G,eAAe,IAAI,IAAI,CAAC73E,QAAQ,CAACilB,qBAAqB,CAACzuD,QAAQ,EAAE,CAAC,IAAI,IAAI,CAACmhH,aAAa,CAAC;IAChG,CAAC,MAAM;MACL,IAAI,CAACE,eAAe,GAAG,IAAI,CAAC73E,QAAQ,CAAC6kB,SAAS,CAACruD,QAAQ,EAAE,CAAC,IAAI,IAAI,CAACmhH,aAAa,CAAC;IACnF;IACA,IAAI,CAAC33E,QAAQ,CAAC8jB,oBAAoB,CAAC,CAAC;IACpC,IAAI,CAACg1D,wBAAwB,CAAC,CAAC;EACjC;EAEAC,kBAAkBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAAClB,eAAe,KAAK,CAAC,EAAE;MAC9B,IAAI,CAACA,eAAe,GAAG,CAAC;MACxB,IAAI,IAAI,CAAC73E,QAAQ,EAAE;QACjB,IAAI,CAACA,QAAQ,CAACklB,aAAa,CAAC,CAAC,IAAI,IAAI,CAACyyD,aAAa,CAAC;MACtD;IACF;EACF;EAEAqB,mBAAmBA,CAACC,SAAS,EAAE;IAC7B,MAAM/+G,IAAI,GAAG,IAAI;IACjB,MAAM;MAAEipB;IAAK,CAAC,GAAG81F,SAAS;IAC1B,IAAI;MAAEvnF,OAAO;MAAEwG,KAAK;MAAEqsB;IAAS,CAAC,GAAG00D,SAAS;IAC5C,MAAMn0D,OAAO,GAAG,CAAC,IAAI,IAAI,CAAC6yD,aAAa;IACvC,MAAM5yD,SAAS,GAAG,CAACD,OAAO;IAE1B,IAAI3hC,IAAI,EAAE;MACRuO,OAAO,GAAGvO,IAAI,CAACuO,OAAO;MACtBwG,KAAK,GAAGxG,OAAO,CAACqB,MAAM;MACtBwxB,QAAQ,GAAG7yB,OAAO,CAAC0H,SAAS;MAE5B,IAAIjW,IAAI,CAAC6O,IAAI,GAAG8yB,OAAO,EAAE;QACvB3hC,IAAI,CAAC6O,IAAI,IAAI+yB,SAAS;QACtBrzB,OAAO,CAAC6G,KAAK,IAAIwsB,SAAS;QAC1B7sB,KAAK,CAACK,KAAK,IAAIwsB,SAAS;QACxB,IAAIR,QAAQ,EAAE;UACZA,QAAQ,CAACvyB,IAAI,IAAI+yB,SAAS;QAC5B;QACA,IAAI,CAAC8yD,eAAe,EAAE;MACxB,CAAC,MAAM;QACL10F,IAAI,CAAC6O,IAAI,IAAI8yB,OAAO;QACpB,IAAI,CAAC+yD,eAAe,EAAE;;QAEtB;QACAnmF,OAAO,CAAC0I,WAAW,CAAC,CAAC;QACrB;QACAlC,KAAK,CAACkC,WAAW,CAAC,CAAC;QACnB,IAAImqB,QAAQ,EAAE;UACZA,QAAQ,CAACnqB,WAAW,CAAC,CAAC;QACxB;MACF;IACF,CAAC,MAAM,IAAI1I,OAAO,EAAE;MAClBwG,KAAK,GAAGxG,OAAO,CAACqB,MAAM;MACtBwxB,QAAQ,GAAG7yB,OAAO,CAAC0H,SAAS;MAE5B,IAAI1H,OAAO,CAAC6G,KAAK,GAAGusB,OAAO,EAAE;QAC3BpzB,OAAO,CAAC6G,KAAK,IAAIwsB,SAAS;QAC1B7sB,KAAK,CAACK,KAAK,IAAIwsB,SAAS;QACxBrzB,OAAO,CAACsI,WAAW,CAAE/9B,CAAC,IAAK;UACzB,IAAIA,CAAC,CAAC+1B,IAAI,GAAG8yB,OAAO,EAAE;YACpB7oD,CAAC,CAAC+1B,IAAI,IAAI+yB,SAAS;YACnB7qD,IAAI,CAAC29G,eAAe,EAAE;UACxB;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLnmF,OAAO,CAAC6G,KAAK,IAAIusB,OAAO;QACxBpzB,OAAO,CAACsI,WAAW,CAAE/9B,CAAC,IAAK;UACzB,IAAI,EAAEA,CAAC,CAAC+1B,IAAI,GAAG8yB,OAAO,CAAC,EAAE;YACvB7oD,CAAC,CAAC+1B,IAAI,IAAI8yB,OAAO;YACjB5qD,IAAI,CAAC29G,eAAe,EAAE;UACxB;QACF,CAAC,CAAC;;QAEF;QACA3/E,KAAK,CAACkC,WAAW,CAAC,CAAC;QACnB,IAAImqB,QAAQ,EAAE;UACZA,QAAQ,CAACnqB,WAAW,CAAC,CAAC;QACxB;MACF;IACF,CAAC,MAAM,IAAIlC,KAAK,IAAIqsB,QAAQ,EAAE;MAC5B,MAAM/9C,GAAG,GAAG0xB,KAAK,IAAIqsB,QAAQ;MAC7B,IAAI/9C,GAAG,CAAC+xB,KAAK,GAAGusB,OAAO,EAAE;QACvBt+C,GAAG,CAAC+xB,KAAK,IAAIwsB,SAAS;QACtBv+C,GAAG,CAAC86B,cAAc,CAAEplC,CAAC,IAAK;UACxB,IAAIA,CAAC,CAACq8B,KAAK,GAAGusB,OAAO,EAAE;YACrB5oD,CAAC,CAACq8B,KAAK,IAAIwsB,SAAS;YACpB7oD,CAAC,CAAC89B,WAAW,CAAE/9B,CAAC,IAAK;cACnB,IAAIA,CAAC,CAAC+1B,IAAI,GAAG8yB,OAAO,EAAE;gBACpB7oD,CAAC,CAAC+1B,IAAI,IAAI+yB,SAAS;gBACnB7qD,IAAI,CAAC29G,eAAe,EAAE;cACxB;YACF,CAAC,CAAC;YACF37G,CAAC,CAACq8B,KAAK,IAAIwsB,SAAS;UACtB;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLv+C,GAAG,CAAC+xB,KAAK,IAAIusB,OAAO;QACpBt+C,GAAG,CAAC86B,cAAc,CAAEplC,CAAC,IAAK;UACxB,IAAI,EAAEA,CAAC,CAACq8B,KAAK,GAAGusB,OAAO,CAAC,EAAE;YACxB5oD,CAAC,CAACq8B,KAAK,IAAIusB,OAAO;YAClB5oD,CAAC,CAAC89B,WAAW,CAAE/9B,CAAC,IAAK;cACnB,IAAI,EAAEA,CAAC,CAAC+1B,IAAI,GAAG8yB,OAAO,CAAC,EAAE;gBACvB7oD,CAAC,CAAC+1B,IAAI,IAAI8yB,OAAO;gBACjB5qD,IAAI,CAAC29G,eAAe,EAAE;cACxB;YACF,CAAC,CAAC;YACF,MAAMqB,QAAQ,GAAGhhF,KAAK,GAAGh8B,CAAC,CAACo9B,WAAW,CAAC,CAAC,GAAGp9B,CAAC,CAACm9B,QAAQ,CAAC,CAAC;YACvD,IAAI6/E,QAAQ,EAAE;cACZA,QAAQ,CAAC9+E,WAAW,CAAC,CAAC;YACxB;UACF;QACF,CAAC,CAAC;MACJ;IACF,CAAC,MAAM;MACL,IAAI,CAAC2+E,kBAAkB,CAAC,CAAC;IAC3B;EACF;EAEAI,eAAeA,CAAA,EAAG;IAChB,MAAMj/G,IAAI,GAAG,IAAI;IACjB,MAAMw7G,aAAa,GAAG,CAAC,IAAI,IAAI,CAACiC,aAAa;IAC7C,MAAMyB,OAAO,GAAG,CAAC,IAAI,EAAE;;IAEvB;IACA,IAAI,CAACp5E,QAAQ,CAACpN,WAAW,CAAExP,IAAI,IAAK;MAClC,IAAIA,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,GAAG0jF,aAAa,EAAE;QACnC,IAAI,CAACtyF,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,MAAM,CAAC,EAAE;UAC5CtyF,IAAI,CAAC4R,MAAM,CAAChD,IAAI,IAAIonF,OAAO;QAC7B;MACF,CAAC,MAAM,IAAIh2F,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,EAAE;QAC3CtyF,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,IAAIonF,OAAO;MAC5B;IACF,CAAC,CAAC;;IAEF;IACA,MAAMC,eAAe,GAAG,CAACD,OAAO;IAChC,IAAI,CAACp5E,QAAQ,CAAChG,WAAW,CAAE7W,IAAI,IAAK;MAClC,IAAIA,IAAI,CAAC6O,IAAI,GAAGonF,OAAO,EAAE;QACvBj2F,IAAI,CAAC6O,IAAI,GAAI7O,IAAI,CAAC6O,IAAI,GAAGqnF,eAAe,GAAI3D,aAAa;QACzD,EAAEx7G,IAAI,CAAC29G,eAAe;MACxB;IACF,CAAC,CAAC;IAEF,IAAI,CAAC73E,QAAQ,CAAC8jB,oBAAoB,CAAC,CAAC;EACtC;EAEAw1D,eAAeA,CAAA,EAAG;IAChB,MAAMp/G,IAAI,GAAG,IAAI;IACjB,MAAMw7G,aAAa,GAAG,CAAC,IAAI,IAAI,CAACiC,aAAa;IAC7C,MAAMyB,OAAO,GAAG,CAAC,IAAI,EAAE;;IAEvB;IACA,IAAI,CAACp5E,QAAQ,CAACpN,WAAW,CAAExP,IAAI,IAAK;MAClC,IAAIA,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,GAAG0jF,aAAa,EAAE;QACnC,IAAI,CAACtyF,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,MAAM,CAAC,EAAE;UAC5CtyF,IAAI,CAAC2R,KAAK,CAAC/C,IAAI,IAAIonF,OAAO;QAC5B;MACF,CAAC,MAAM,IAAIh2F,IAAI,CAAC4R,MAAM,CAAChD,IAAI,GAAG0jF,aAAa,EAAE;QAC3CtyF,IAAI,CAAC4R,MAAM,CAAChD,IAAI,IAAIonF,OAAO;MAC7B;IACF,CAAC,CAAC;;IAEF;IACA,IAAI,CAACp5E,QAAQ,CAAChG,WAAW,CAAE7W,IAAI,IAAK;MAClC,IAAKA,IAAI,CAAC6O,IAAI,GAAG0jF,aAAa,IAAMvyF,IAAI,CAACiP,KAAK,CAACljC,MAAM,KAAK,CAAE,EAAE;QAC5Di0B,IAAI,CAAC6O,IAAI,IAAIonF,OAAO;MACtB;IACF,CAAC,CAAC;;IAEF;IACA,MAAMC,eAAe,GAAG,EAAE3D,aAAa,GAAG0D,OAAO,CAAC;IAClD,IAAI,CAACp5E,QAAQ,CAAChG,WAAW,CAAE7W,IAAI,IAAK;MAClC,IAAIA,IAAI,CAAC6O,IAAI,GAAGonF,OAAO,EAAE;QACvBj2F,IAAI,CAAC6O,IAAI,IAAIqnF,eAAe;QAC5B,EAAEn/G,IAAI,CAAC29G,eAAe;MACxB;IACF,CAAC,CAAC;IAEF,IAAI,CAAC73E,QAAQ,CAAC8jB,oBAAoB,CAAC,CAAC;EACtC;EAEA0xD,oBAAoBA,CAAA,EAAG;IACrB,MAAME,aAAa,GAAG,CAAC,IAAI,IAAI,CAACiC,aAAa;IAE7C,IAAIjjE,SAAS,GAAG,IAAI;IACpB,IAAI6kE,QAAQ,GAAG,KAAK;;IAEpB;IACA,IAAI,CAACv5E,QAAQ,CAAChG,WAAW,CAAE7W,IAAI,IAAK;MAClC,IAAIA,IAAI,CAAC6O,IAAI,GAAG0jF,aAAa,EAAE;QAC7B,IAAIhhE,SAAS,KAAK,IAAI,EAAE;UACtBA,SAAS,GAAGvxB,IAAI,CAACuO,OAAO,CAAC2G,UAAU;QACrC,CAAC,MAAM,IAAIqc,SAAS,KAAKvxB,IAAI,CAACuO,OAAO,CAAC2G,UAAU,EAAE;UAChDkhF,QAAQ,GAAG,IAAI;QACjB;MACF;IACF,CAAC,CAAC;IAEF,OAAOA,QAAQ,GAAG,IAAI,GAAG7kE,SAAS;EACpC;EAEA8kE,kBAAkBA,CAACjiH,MAAM,EAAE0uC,YAAY,EAAEwzE,OAAO,EAAE;IAChDliH,MAAM,CAACjC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IACzB,IAAI+R,KAAK,GAAG,CAAC;IAEb,IAAI,CAAC24B,QAAQ,CAAChG,WAAW,CAAE7W,IAAI,IAAK;MAClC,IAAI8iB,YAAY,CAAC9iB,IAAI,EAAEs2F,OAAO,CAAC,EAAE;QAC/BliH,MAAM,CAACa,GAAG,CAAC+qB,IAAI,CAACzQ,QAAQ,CAAC;QACzBrL,KAAK,EAAE;MACT;IACF,CAAC,CAAC;IACF,IAAIA,KAAK,KAAK,CAAC,EAAE;MACf,OAAO,KAAK;IACd;IACA9P,MAAM,CAAC4gD,YAAY,CAAC9wC,KAAK,CAAC;IAC1B9P,MAAM,CAACsyC,YAAY,CAAC,IAAI,CAACM,MAAM,CAAC;IAChC,OAAO,IAAI;EACb;EAEAmpE,YAAYA,CAAA,EAAG;IACb,IAAI,IAAI,CAACoE,gBAAgB,EAAE;MACzB,OAAO,IAAI;IACb;IACA,MAAMgC,QAAQ,GAAG,IAAI,CAAClC,SAAS;IAC/B,KAAK,IAAIvgH,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGwiH,QAAQ,CAACxqH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/C,MAAM0iH,IAAI,GAAGD,QAAQ,CAACziH,CAAC,CAAC;MACxB,IAAI0iH,IAAI,CAACrG,YAAY,EAAE;QACrB,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd;;EAEA;AACF;AACA;EACEz+G,OAAOA,CAAA,EAAG;IACR,MAAMqF,IAAI,GAAG,IAAI;;IAEjB;IACAy8D,QAAQ,CAACrC,SAAS,CAAC,IAAI,CAAC;IAExB,OAAO,IAAIslD,OAAO,CAAGC,OAAO,IAAK;MAC/B;MACA,MAAMhgF,OAAO,GAAG3/B,IAAI,CAAC8lC,QAAQ;MAC7B,IAAI,CAACnG,OAAO,EAAE;QACZggF,OAAO,CAAC,CAAC;QACT;MACF;MAEA,IAAIC,YAAY,GAAG,KAAK;MACxBC,UAAU,CAAC,MAAM;QACf/gG,OAAO,CAAChC,IAAI,CAAC,OAAO,CAAC;QACrB,MAAM0iG,QAAQ,GAAGx/G,IAAI,CAACs9G,SAAS;QAC/B,MAAMpvF,OAAO,GAAGynF,YAAQ,CAACx6G,GAAG,CAAC2C,QAAQ,CAAC2d,GAAG,CAACyS,OAAO,CAAC,IAAIynF,YAAQ,CAACztF,KAAK;QACpE,IAAI43F,WAAW,GAAG,KAAK;QACvB,KAAK,IAAI/iH,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGwiH,QAAQ,CAACxqH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;UAC/C,MAAM0iH,IAAI,GAAGD,QAAQ,CAACziH,CAAC,CAAC;UACxB0iH,IAAI,CAACnhH,OAAO,CAAC4vB,OAAO,GAAGA,OAAO;UAE9B,IAAIuxF,IAAI,CAACrG,YAAY,EAAE;YACrBqG,IAAI,CAACjlH,KAAK,CAAC,CAAC;YAEZ,IAAI;cACFilH,IAAI,CAACxU,aAAa,CAACtrE,OAAO,CAAC;YAC7B,CAAC,CAAC,OAAO7xB,CAAC,EAAE;cACV,IAAIA,CAAC,YAAYhT,KAAK,CAACsoB,gBAAgB,EAAE;gBACvCq8F,IAAI,CAACrG,YAAY,GAAG,KAAK;gBACzBqG,IAAI,CAACjlH,KAAK,CAAC,CAAC;gBACZqlB,MAAM,CAAChgB,KAAK,CAAC,0DAA0D4/G,IAAI,CAACz6G,KAAK,GAAG,CAAC,EAAE,CAAC;gBACxF46G,YAAY,GAAG,IAAI;cACrB,CAAC,MAAM;gBACL,MAAM9xG,CAAC;cACT;YACF;YAEA,IAAIiyG,KAAsB,EAAE,EAE3B;UACH;UAEAD,WAAW,GAAGF,YAAY,IAAIE,WAAW,IAAIrjD,QAAQ,CAACF,wBAAwB,CAACkjD,IAAI,CAAChmD,GAAG,CAAC;UAExF,IAAIgmD,IAAI,CAAChmD,GAAG,EAAE;YACZz5D,IAAI,CAAC9B,GAAG,CAACuhH,IAAI,CAAChmD,GAAG,CAAC;UACpB;QACF;QAEAz5D,IAAI,CAACw9G,gBAAgB,GAAG,KAAK;QAE7B1+F,OAAO,CAACu3B,OAAO,CAAC,OAAO,CAAC;QACxBspE,OAAO,CAAC,CAAC;MACX,CAAC,EAAE,EAAE,CAAC;IACR,CAAE,CAAC;EACL;EAEAK,eAAeA,CAAA,EAAG;IAChB;IACA,MAAMR,QAAQ,GAAG,IAAI,CAAClC,SAAS;IAC/B,KAAK,IAAIvgH,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGwiH,QAAQ,CAACxqH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC/CyiH,QAAQ,CAACziH,CAAC,CAAC,CAACq8G,YAAY,GAAG,IAAI;IACjC;EACF;EAEAwF,wBAAwBA,CAAA,EAAG;IACzB,MAAM9mF,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC2lF,aAAa;IAEpChhD,QAAQ,CAACrC,SAAS,CAAC,IAAI,CAACwjD,kBAAkB,CAAC;IAE3C,KAAK,IAAI7gH,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,CAACsgH,SAAS,CAACtoH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MACrD,MAAM0iH,IAAI,GAAG,IAAI,CAACnC,SAAS,CAACvgH,CAAC,CAAC;MAC9B,MAAM28G,EAAE,GAAG+F,IAAI,CAAChG,sBAAsB,CAAC3hF,IAAI,CAAC;MAC5C,IAAI,CAAC4hF,EAAE,EAAE;QACP;MACF;MAEA,IAAI,CAACkE,kBAAkB,CAAC1/G,GAAG,CAACw7G,EAAE,CAAC;MAC/B,KAAK,IAAI/oG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+oG,EAAE,CAACrnD,QAAQ,CAACr9D,MAAM,EAAE2b,CAAC,EAAE,EAAE;QAC3C,MAAM7F,CAAC,GAAG4uG,EAAE,CAACrnD,QAAQ,CAAC1hD,CAAC,CAAC;;QAExB;QACA;QACA,IAAI,IAAI,CAACotG,OAAO,IAAI,IAAI,CAACA,OAAO,CAACjD,oBAAoB,EAAE;UACrD,MAAMtwG,CAAC,GAAG,IAAI,CAACuzG,OAAO,CAACjD,oBAAoB,CAAChwG,CAAC,CAACqzB,UAAU,CAACxhB,MAAM,CAAC;UAChE,IAAInS,CAAC,EAAE;YACLM,CAAC,CAAC0N,QAAQ,CAACjM,IAAI,CAAC/B,CAAC,CAACgO,QAAQ,CAAC;YAC3B1N,CAAC,CAACyoD,UAAU,CAAChnD,IAAI,CAAC/B,CAAC,CAAC+oD,UAAU,CAAC;UACjC;QACF;MACF;MAEAkJ,QAAQ,CAACxB,sBAAsB,CAACy+C,EAAE,CAAC;IACrC;EACF;EAEAuG,6BAA6BA,CAACniF,KAAK,EAAEwI,QAAQ,EAAEiJ,MAAM,EAAE;IACrD,MAAM5P,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,SAASo6E,YAAYA,CAACpkH,IAAI,EAAE;MAC1B,MAAM+kB,MAAM,GAAG,EAAE;MACjB,IAAIhsB,CAAC,GAAG,CAAC;MACT,IAAIqzB,KAAK,GAAGi4F,GAAG;MACf,IAAIzvE,IAAI,GAAGyvE,GAAG;MACd,KAAK,IAAIpjH,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGlB,IAAI,CAAC9G,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC3C,MAAMygB,KAAK,GAAG1hB,IAAI,CAACiB,CAAC,CAAC;QACrB,IAAIygB,KAAK,KAAKkzB,IAAI,GAAG,CAAC,EAAE;UACtBA,IAAI,GAAGlzB,KAAK;QACd,CAAC,MAAM;UACL,IAAI,CAAChhB,MAAM,CAACyP,KAAK,CAACic,KAAK,CAAC,EAAE;YACxBrH,MAAM,CAAChsB,CAAC,EAAE,CAAC,GAAG,IAAIi5C,uBAAS,CAACvnC,KAAK,CAAC2hB,KAAK,EAAEwoB,IAAI,CAAC;UAChD;UACAxoB,KAAK,GAAGwoB,IAAI,GAAGlzB,KAAK;QACtB;MACF;MACA,IAAI,CAAChhB,MAAM,CAACyP,KAAK,CAACic,KAAK,CAAC,EAAE;QACxBrH,MAAM,CAAChsB,CAAC,CAAC,GAAG,IAAIi5C,uBAAS,CAACvnC,KAAK,CAAC2hB,KAAK,EAAEwoB,IAAI,CAAC;MAC9C;MACA,OAAO7vB,MAAM;IACf;IAEA,IAAIu/F,UAAU,GAAG,IAAI;IACrB,IAAI7wE,MAAM,CAACv6C,MAAM,KAAK2qC,OAAO,CAAC2iB,OAAO,CAACttD,MAAM,EAAE;MAC5CorH,UAAU,GAAGtyE,uBAAS,CAAC+vB,GAAG,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,IAAIvhE,QAAQ;MACZ,IAAIizC,MAAM,CAACv6C,MAAM,GAAG,CAAC,EAAE;QACrBsH,QAAQ,GAAGwxC,uBAAS,CAAC9P,KAAK,CAACuR,MAAM,CAAC;QAClC6wE,UAAU,GAAGA,UAAU,GAAGtyE,uBAAS,CAACt3B,EAAE,CAAC4pG,UAAU,EAAE9jH,QAAQ,CAAC,GAAGA,QAAQ,CAAC;MAC1E;MACA,IAAIsC,MAAM,CAACiQ,IAAI,CAACy3B,QAAQ,CAAC,CAACtxC,MAAM,GAAG,CAAC,EAAE;QACpC,KAAK,MAAM0O,EAAE,IAAI4iC,QAAQ,EAAE;UACzB,IAAIA,QAAQ,CAACvlC,cAAc,CAAC2C,EAAE,CAAC,EAAE;YAC/BpH,QAAQ,GAAGwxC,uBAAS,CAACuyE,GAAG,CACtBvyE,uBAAS,CAAC9P,KAAK,CAACt6B,EAAE,CAAC,EACnBoqC,uBAAS,CAACwyE,MAAM,CAACJ,YAAY,CAAC55E,QAAQ,CAAC5iC,EAAE,CAAC,CAAC,CAC7C,CAAC;YACD08G,UAAU,GAAGA,UAAU,GAAGtyE,uBAAS,CAACt3B,EAAE,CAAC4pG,UAAU,EAAE9jH,QAAQ,CAAC,GAAGA,QAAQ;UACzE;QACF;MACF;MACA,IAAIwhC,KAAK,CAAC9oC,MAAM,GAAG,CAAC,EAAE;QACpBsH,QAAQ,GAAGwxC,uBAAS,CAACnW,MAAM,CAACuoF,YAAY,CAACpiF,KAAK,CAAC,CAAC;QAChDsiF,UAAU,GAAGA,UAAU,GAAGtyE,uBAAS,CAACt3B,EAAE,CAAC4pG,UAAU,EAAE9jH,QAAQ,CAAC,GAAGA,QAAQ;MACzE;MAEA,IAAI,CAAC8jH,UAAU,EAAE;QACfA,UAAU,GAAGtyE,uBAAS,CAAC5B,IAAI,CAAC,CAAC;MAC/B;IACF;IAEA,OAAOk0E,UAAU;EACnB;EAEA3B,qBAAqBA,CAAC3mF,IAAI,EAAE;IAC1B,MAAM6H,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAC7B,MAAMyJ,MAAM,GAAG,EAAE;IACjB,MAAMjJ,QAAQ,GAAG,CAAC,CAAC;IACnB,MAAMxI,KAAK,GAAG,EAAE;IAEhB6B,OAAO,CAAC0nB,YAAY,CAAErpB,KAAK,IAAK;MAC9B,IAAIA,KAAK,CAACK,KAAK,GAAGvG,IAAI,EAAE;QACtByX,MAAM,CAACpuC,IAAI,CAAC68B,KAAK,CAACoC,KAAK,CAAC;MAC1B;IACF,CAAC,CAAC;IAEFT,OAAO,CAACyH,cAAc,CAAE5P,OAAO,IAAK;MAClC,IAAIA,OAAO,CAAC6G,KAAK,GAAGvG,IAAI,IAAI,EAAEN,OAAO,CAACqB,MAAM,CAACwF,KAAK,GAAGvG,IAAI,CAAC,EAAE;QAC1D,MAAMpzB,CAAC,GAAG8yB,OAAO,CAACqB,MAAM,CAACuH,KAAK;QAC9B,IAAI,EAAE17B,CAAC,IAAI4hC,QAAQ,CAAC,EAAE;UACpBA,QAAQ,CAAC5hC,CAAC,CAAC,GAAG,CAAC8yB,OAAO,CAAC7a,MAAM,CAAC;QAChC,CAAC,MAAM;UACL2pB,QAAQ,CAAC5hC,CAAC,CAAC,CAACvD,IAAI,CAACq2B,OAAO,CAAC7a,MAAM,CAAC;QAClC;MACF;IACF,CAAC,CAAC;IAEFgjB,OAAO,CAACG,WAAW,CAAE7W,IAAI,IAAK;MAC5B,IAAIA,IAAI,CAAC6O,IAAI,GAAGA,IAAI,IAAI,EAAE7O,IAAI,CAACuO,OAAO,CAAC6G,KAAK,GAAGvG,IAAI,CAAC,EAAE;QACpDgG,KAAK,CAAC38B,IAAI,CAAC8nB,IAAI,CAAC0O,MAAM,CAAC;MACzB;IACF,CAAC,CAAC;IAEF,OAAO,IAAI,CAACsoF,6BAA6B,CAACniF,KAAK,EAAEwI,QAAQ,EAAEiJ,MAAM,CAAC;EACpE;EAEAgxE,mBAAmBA,CAAC5nF,OAAO,EAAE;IAC3B,MAAM6iF,aAAa,GAAG,CAAC,IAAI,IAAI,CAACiC,aAAa;IAC7C,IAAI,CAAC33E,QAAQ,CAACsB,cAAc,CAAE5P,OAAO,IAAK;MACxC,IAAIA,OAAO,CAAC6G,KAAK,GAAGm9E,aAAa,EAAE;QACjC7iF,OAAO,CAACnB,OAAO,CAAC;MAClB;IACF,CAAC,CAAC;EACJ;EAEAgpF,kBAAkBA,CAAA,EAAG;IACnB,IAAI,IAAI,CAACzC,OAAO,EAAE;MAChB,OAAO,IAAI;IACb;IAEA,MAAM0C,MAAM,GAAG,IAAIzD,iBAAiB,CAACF,eAAe,CAAC,IAAI,CAAC;IAC1D,IAAI,CAAC2D,MAAM,CAACr7G,KAAK,CAAC,CAAC,EAAE;MACnB,OAAO,IAAI;IACb;IAEA,IAAI,CAAC24G,OAAO,GAAG0C,MAAM;IACrB,OAAOA,MAAM;EACf;EAEAC,iBAAiBA,CAAA,EAAG;IAClB,IAAI,IAAI,CAAC3C,OAAO,EAAE;MAChB,OAAO,IAAI;IACb;IAEA,MAAM0C,MAAM,GAAG,IAAIzD,iBAAiB,CAACD,cAAc,CAAC,IAAI,CAAC;IACzD,IAAI,CAAC0D,MAAM,CAACr7G,KAAK,CAAC,CAAC,EAAE;MACnB,OAAO,IAAI;IACb;IAEA,IAAI,CAAC24G,OAAO,GAAG0C,MAAM;IACrB,OAAOA,MAAM;EACf;;EAEA;EACAxF,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC8C,OAAO,GAAG,IAAI;EACrB;EAEA4C,iBAAiBA,CAACviG,MAAM,EAA6C;IAAA,IAA3CwiG,YAAY,GAAAjgH,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,KAAK;IAAA,IAAEg4B,OAAO,GAAAh4B,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG6Y,SAAS;IACjE,KAAK,IAAIzc,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,CAACsgH,SAAS,CAACtoH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MACrD,MAAMX,GAAG,GAAG,IAAI,CAACkhH,SAAS,CAACvgH,CAAC,CAAC;MAC7BX,GAAG,CAACK,QAAQ,CAACy+D,SAAS,CAAC98C,MAAM,CAAC;MAC9B,IAAIwiG,YAAY,EAAE;QAChBxkH,GAAG,CAACq9D,GAAG,CAAC1iD,QAAQ,CAAEoO,MAAM,IAAK;UAC3B,IAAIA,MAAM,YAAYoY,8FAAU,EAAE;YAChCpY,MAAM,CAAC1oB,QAAQ,CAACy+D,SAAS,CAAC98C,MAAM,CAAC;YAEjC,IAAIua,OAAO,KAAKnf,SAAS,EAAE;cACzBmf,OAAO,CAACxT,MAAM,CAAC;YACjB;YAEAA,MAAM,CAAC1oB,QAAQ,CAACs0D,WAAW,GAAG,IAAI;UACpC;QACF,CAAC,CAAC;MACJ;IACF;EACF;EAEAyK,cAAcA,CAACp9C,MAAM,EAAE;IACrB,KAAK,IAAIrhB,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,CAACsgH,SAAS,CAACtoH,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MACrD,MAAMX,GAAG,GAAG,IAAI,CAACkhH,SAAS,CAACvgH,CAAC,CAAC;MAC7BX,GAAG,CAACK,QAAQ,CAAC++D,cAAc,CAACp9C,MAAM,CAAC;IACrC;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE7hB,MAAMA,CAACD,QAAQ,EAAEsb,MAAM,EAAE;IACvB,MAAMg9B,EAAE,GAAG,IAAI,CAAC9O,QAAQ,CAAC+O,aAAa,CAAC,CAAC;IACxC,IAAID,EAAE,KAAK,IAAI,EAAE;MACf,OAAO,KAAK;IACd;;IAEA;IACA,MAAM4mE,aAAa,GAAG,CAAC,IAAI,IAAI,CAACiC,aAAa;IAC7C,IAAI,CAAC33E,QAAQ,CAAC6kB,SAAS,CAACruD,QAAQ,EAAEk/G,aAAa,CAAC;;IAEhD;IACA,IAAI5mE,EAAE,EAAE;MACNA,EAAE,CAAC8J,+BAA+B,CAAC,IAAI,CAAC5Y,QAAQ,EAAE01E,aAAa,EAAEh/G,MAAM,CAACob,MAAM,CAAC,EAAGqR,IAAI,IAAK;QACzFA,IAAI,CAAC6O,IAAI,IAAI0jF,aAAa;MAC5B,CAAC,CAAC;IACJ;;IAEA;IACA,IAAI,CAACmC,eAAe,GAAG,IAAI,CAAC73E,QAAQ,CAAC0kB,gBAAgB,CAACgxD,aAAa,CAAC;;IAEpE;IACA,IAAI,CAAC11E,QAAQ,CAAC8jB,oBAAoB,CAAC,CAAC;IAEpC,OAAO,IAAI,CAAC60D,qBAAqB,CAACjD,aAAa,CAAC;EAClD;AACF;AACA;AACA6B,aAAa,CAACiB,uBAAuB,GAAG,EAAE;AAE1C,wDAAejB,aAAa;;;;;;;;;;;;;;AC/2B5B;AACA;AAC+B;AACoB;AACE;AACZ;AACE;AACQ;AACE;AACf;AAEtC,MAAM8D,cAAc,GAAG5jF,uGAAmB,CAAC1L,KAAK,CAAC,CAC/C;EACEuvF,SAAS,EAAE;IAAE7jH,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG;EAAE,CAAC;EAClE8jF,OAAO,EAAE;IAAE9jH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACnC8jG,WAAW,EAAE;IAAE/jH,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,GAAG,EAAE,GAAG;EAAE,CAAC;EAC/DgkF,UAAU,EAAE;IAAEhkH,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,GAAG,EAAE,GAAG;EAAE,CAAC;EAE9DikF,SAAS,EAAE;IAAEjkH,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC;EAC5D3hB,KAAK,EAAE;IAAEre,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC;EAExDkkF,UAAU,EAAE;IAAElkH,IAAI,EAAE,IAAI;IAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG;EAAE,CAAC;EACpEmkF,MAAM,EAAE;IAAEnkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAI,CAAC;EACjCmkG,OAAO,EAAE;IAAEpkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACnCokG,QAAQ,EAAE;IAAErkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACpCqkG,OAAO,EAAE;IAAEtkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACnCskG,QAAQ,EAAE;IAAEvkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACpCukG,QAAQ,EAAE;IAAExkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK,CAAC;EACpCwkG,SAAS,EAAE;IAAEzkH,IAAI,EAAE,GAAG;IAAEigB,KAAK,EAAE;EAAK;AACtC,CAAC,CACF,CAAC;AAEF,SAASykG,gBAAgBA,CAACzkH,MAAM,EAAE0kH,WAAW,EAAE;EAC7C,MAAM3sD,QAAQ,GAAGh4B,uGAAmB,CAACpB,KAAK,CAAC+lF,WAAW,CAAC;EACvD,KAAK,MAAMhgH,CAAC,IAAI1E,MAAM,EAAE;IACtB,IAAI+3D,QAAQ,CAACx0D,cAAc,CAACmB,CAAC,CAAC,EAAE;MAC9BqzD,QAAQ,CAACrzD,CAAC,CAAC,CAACsb,KAAK,GAAGhgB,MAAM,CAAC0E,CAAC,CAAC;IAC/B;EACF;EACA,OAAOqzD,QAAQ;AACjB;AAEA,SAAS4sD,sBAAsBA,CAAC3kH,MAAM,EAAE4kH,QAAQ,EAAE;EAChD,OAAO;IACL7sD,QAAQ,EAAE0sD,gBAAgB,CAACzkH,MAAM,EAAE,CAAC,CAAC,CAAC;IACtCi4D,YAAY,EAAEorD,2BAAiB;IAC/BjrD,cAAc,EAAEkrD,uCAAmB;IACnC9xF,WAAW,EAAE,KAAK;IAClB0mC,SAAS,EAAE,KAAK;IAChBrB,UAAU,EAAE,KAAK;IACjBuwB,IAAI,EAAEw9B;EACR,CAAC;AACH;AAEA,MAAMC,mBAAmB,SAAS9kF,wGAAoB,CAAC;EACrDl1B,WAAWA,CAAC7K,MAAM,EAAE;IAClB,MAAM+kH,cAAc,GAAGJ,sBAAsB,CAAC3kH,MAAM,EAAE+/B,kGAAc,CAAC;IACrE,KAAK,CAACglF,cAAc,CAAC;EACvB;AACF;AAEA,MAAME,YAAY,CAAC;EACjBp6G,WAAWA,CAAC7K,MAAM,EAAE+3D,QAAQ,EAAEE,YAAY,EAAEG,cAAc,EAAE;IAC1D,IAAI,CAACL,QAAQ,GAAG0sD,gBAAgB,CAACzkH,MAAM,EAAE+3D,QAAQ,CAAC;IAClD,IAAI,CAACE,YAAY,GAAGA,YAAY;IAChC,IAAI,CAACG,cAAc,GAAGA,cAAc;IACpC,IAAI,CAAC5mC,WAAW,GAAG,KAAK;IACxB,IAAI,CAAC0mC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACrB,UAAU,GAAG,KAAK;IACvB,IAAI,CAACuwB,IAAI,GAAGrnD,mGAAe;EAC7B;AACF;AAEA,MAAMolF,2BAA2B,SAASplF,wGAAoB,CAAC;EAC7Dl1B,WAAWA,CAAC7K,MAAM,EAAE;IAClB,MAAMolH,WAAW,GAAGrlF,uGAAmB,CAAC1L,KAAK,CAAC,CAC5C;MACEgxF,WAAW,EAAE;QAAEtlH,IAAI,EAAE,GAAG;QAAEigB,KAAK,EAAE;MAAI,CAAC;MACtCslG,IAAI,EAAE;QAAEvlH,IAAI,EAAE,GAAG;QAAEigB,KAAK,EAAE;MAAI,CAAC;MAC/BulG,UAAU,EAAE;QAAExlH,IAAI,EAAE,GAAG;QAAEigB,KAAK,EAAE;MAAI,CAAC;MACrCwlG,eAAe,EAAE;QAAEzlH,IAAI,EAAE,KAAK;QAAEigB,KAAK,EAAE,IAAI+f,iGAAa,CAAC;MAAE;IAC7D,CAAC,CACF,CAAC;IAEF,MAAM0lF,YAAY,GAAG,IAAIR,YAAY,CAACjlH,MAAM,EAAEolH,WAAW,EAAE3B,8BAAc,EAAEC,0CAAgB,CAAC;IAC5F,KAAK,CAAC+B,YAAY,CAAC;EACrB;AACF;AAEA,MAAMC,oBAAoB,SAAS3lF,wGAAoB,CAAC;EACtDl1B,WAAWA,CAAC7K,MAAM,EAAE;IAClB,MAAM2lH,eAAe,GAAGhB,sBAAsB,CAAC3kH,MAAM,EAAE+/B,mGAAe,CAAC;IACvE,KAAK,CAAC4lF,eAAe,CAAC;EACxB;AACF;AAEA,MAAMC,cAAc,SAAS7lF,wGAAoB,CAAC;EAChDl1B,WAAWA,CAAC7K,MAAM,EAAE;IAClB,MAAMylH,YAAY,GAAG,IAAIR,YAAY,CAACjlH,MAAM,EAAE2jH,cAAc,EAAEJ,8BAAY,EAAEC,sCAAc,CAAC;IAC3FiC,YAAY,CAACj0F,WAAW,GAAG,IAAI;IAC/Bi0F,YAAY,CAACvtD,SAAS,GAAG,IAAI;IAE7B,KAAK,CAACutD,YAAY,CAAC;IACnB,IAAI,CAACI,aAAa,CAAC,CAAC;EACtB;EAEAA,aAAaA,CAAA,EAAG;IACd,IAAI,CAACvuB,OAAO,GAAG;MACbwuB,QAAQ,EAAExlH,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAACoD,EAAE,CAACK,OAAO;MACvC+2F,WAAW,EAAEzlH,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAACoD,EAAE,CAAC5C,cAAc,CAACzrB,QAAQ,CAAC2d,GAAG,CAAC0S,UAAU,CAAC,GAAG;IAC/E,CAAC;IACD,IAAI,CAAC4iC,WAAW,GAAG,IAAI;EACzB;AACF;AAEA,6DAAe;EACbsxD,mBAAmB;EACnBM,2BAA2B;EAC3BO,oBAAoB;EACpBE;AACF,CAAC;;ACxH8B;AACuB;AACnB;AAEnC,MAAMI,UAAU,SAASjmF,8FAAU,CAAC;EAClCywB,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEjB3lD,WAAWA,CAAA,EAAG;IACZ,MAAMoxD,GAAG,GAAG,IAAIl8B,wGAAoB,CAAC,CAAC;IACtC,KAAK,CAACk8B,GAAG,CAAC;IACV,IAAI,CAACvqC,SAAS,GAAG,IAAIqO,+FAAW,CAAC,CAAC;IAClC,MAAMha,IAAI,GAAG,IAAIga,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAC7C,IAAI,CAACha,IAAI,GAAGA,IAAI;IAEhB,IAAI,CAACmgG,QAAQ,GAAG,CACd,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACtB,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACtB,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CACzC;IAED,IAAI,CAAC9K,KAAK,GAAG,CACX;MAAEtxF,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAAE,CAAC,EAClD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE,CAAC,EACjD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;IAAE,CAAC,EAClD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE,CAAC,EACjD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE,CAAC,EAClD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE,CAAC,EACjD;MAAEjW,OAAO,EAAE,EAAE;MAAEgtD,IAAI,EAAE,IAAI/2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;IAAE,CAAC,CAClD;IAED,IAAI,CAAC42C,QAAQ,GAAG,CACd,IAAI52C,iGAAa,CAAC,CAACha,IAAI,CAACtY,CAAC,EAAE,CAACsY,IAAI,CAAC7T,CAAC,EAAE,CAAC6T,IAAI,CAACxS,CAAC,CAAC,EAC5C,IAAIwsB,iGAAa,CAAC,CAACha,IAAI,CAACtY,CAAC,EAAEsY,IAAI,CAAC7T,CAAC,EAAE,CAAC6T,IAAI,CAACxS,CAAC,CAAC,EAC3C,IAAIwsB,iGAAa,CAACha,IAAI,CAACtY,CAAC,EAAE,CAACsY,IAAI,CAAC7T,CAAC,EAAE,CAAC6T,IAAI,CAACxS,CAAC,CAAC,EAC3C,IAAIwsB,iGAAa,CAACha,IAAI,CAACtY,CAAC,EAAEsY,IAAI,CAAC7T,CAAC,EAAE,CAAC6T,IAAI,CAACxS,CAAC,CAAC,EAC1C,IAAIwsB,iGAAa,CAAC,CAACha,IAAI,CAACtY,CAAC,EAAE,CAACsY,IAAI,CAAC7T,CAAC,EAAE6T,IAAI,CAACxS,CAAC,CAAC,EAC3C,IAAIwsB,iGAAa,CAAC,CAACha,IAAI,CAACtY,CAAC,EAAEsY,IAAI,CAAC7T,CAAC,EAAE6T,IAAI,CAACxS,CAAC,CAAC,EAC1C,IAAIwsB,iGAAa,CAACha,IAAI,CAACtY,CAAC,EAAE,CAACsY,IAAI,CAAC7T,CAAC,EAAE6T,IAAI,CAACxS,CAAC,CAAC,EAC1C,IAAIwsB,iGAAa,CAACha,IAAI,CAACtY,CAAC,EAAEsY,IAAI,CAAC7T,CAAC,EAAE6T,IAAI,CAACxS,CAAC,CAAC,EACzC,IAAIwsB,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAAE;IAClC,IAAIA,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAChC,IAAIA,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAChC,IAAIA,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAChC,IAAIA,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAChC,IAAIA,iGAAa,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CACjC;IAEDk8B,GAAG,CAACzgD,YAAY,CAAC,UAAU,EAAE,IAAIukB,yGAAqB,CAAC,IAAIpuB,YAAY,CAAC,IAAI,CAACglE,QAAQ,CAACn/E,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAEtG,IAAI,CAACkuB,IAAI,GAAG,YAAY;EAC1B;EAEA,OAAOygG,QAAQ,UAAG;EAChB;EACA,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACrB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACpB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EACpB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EACrB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACpB,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACnB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EACnB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CACrB;EAED,OAAOC,MAAM,UAAG;EACd;EACA,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACjB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EACjB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACjB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAChB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAChB;EAED,OAAOC,kBAAkB,GAAI,YAAY;IACvC,MAAMC,iBAAiB,GAAG,EAAE;IAC5B,KAAK,IAAInzG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAE,EAAEA,CAAC,EAAE;MAC3BmzG,iBAAiB,CAAC3iH,IAAI,CAAC,IAAIo8B,iGAAa,CAAC,CAAC,CAAC;IAC7C;IACA,OAAOumF,iBAAiB;EAC1B,CAAC,CAAC,CAAC;EAEHC,eAAeA,CAAA,EAAG;IAChB;IACA;IACA;IACA;IACA,MAAMlsG,OAAO,GAAG2rG,UAAU,CAACG,QAAQ;IACnC,MAAMK,KAAK,GAAGR,UAAU,CAACI,MAAM;IAC/B,MAAME,iBAAiB,GAAGN,UAAU,CAACK,kBAAkB;IAEvD,IAAI9mH,CAAC;IAEL,MAAMu3E,IAAI,GAAG,IAAI,CAACplD,SAAS,CAACi0C,MAAM;IAClC,MAAMtyD,CAAC,GAAG,IAAI,CAACqe,SAAS,CAAC+0F,QAAQ;IAEjC,MAAMC,IAAI,GAAG,IAAI,CAAC/vC,QAAQ;IAC1B,MAAM;MAAE5wD;IAAK,CAAC,GAAG,IAAI;IAErB,MAAM4gG,UAAU,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC3C,MAAMC,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAErD,MAAMC,OAAO,GAAG,IAAI9mF,iGAAa,CAAC,CAAC;IACnC,IAAI+mF,YAAY,GAAG,IAAI;IAEvB,SAASC,MAAMA,CAAA,EAAG;MAChB,IAAIjwC,IAAI,CAACrpE,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC;MAC1B,MAAMA,CAAC,GAAG,EAAEqpE,IAAI,CAAC/3C,GAAG,CAAC8nF,OAAO,CAAC,GAAGxzG,CAAC,CAAC,GAAGyjE,IAAI,CAACrpE,CAAC;MAC3C,IAAI,CAACsY,IAAI,CAACtY,CAAC,IAAIA,CAAC,IAAIA,CAAC,IAAIsY,IAAI,CAACtY,CAAC,EAAE;QAC/Bq5G,YAAY,CAAClpH,GAAG,CAAC6P,CAAC,EAAEo5G,OAAO,CAAC30G,CAAC,EAAE20G,OAAO,CAACtzG,CAAC,CAAC;QACzC,IAAI9F,CAAC,KAAKsY,IAAI,CAACtY,CAAC,EAAE,OAAO,CAAC;QAC1B,IAAIA,CAAC,KAAK,CAACsY,IAAI,CAACtY,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5B,OAAO,CAAC;MACV;MACA,OAAO,CAAC;IACV;IAEA,SAASu5G,MAAMA,CAAA,EAAG;MAChB,IAAIlwC,IAAI,CAAC5kE,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC;MAC1B,MAAMA,CAAC,GAAG,EAAE4kE,IAAI,CAAC/3C,GAAG,CAAC8nF,OAAO,CAAC,GAAGxzG,CAAC,CAAC,GAAGyjE,IAAI,CAAC5kE,CAAC;MAC3C,IAAI,CAAC6T,IAAI,CAAC7T,CAAC,IAAIA,CAAC,IAAIA,CAAC,IAAI6T,IAAI,CAAC7T,CAAC,EAAE;QAC/B40G,YAAY,CAAClpH,GAAG,CAACipH,OAAO,CAACp5G,CAAC,EAAEyE,CAAC,EAAE20G,OAAO,CAACtzG,CAAC,CAAC;QACzC,IAAIrB,CAAC,KAAK6T,IAAI,CAAC7T,CAAC,EAAE,OAAO,CAAC;QAC1B,IAAIA,CAAC,KAAK,CAAC6T,IAAI,CAAC7T,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5B,OAAO,CAAC;MACV;MACA,OAAO,CAAC;IACV;IAEA,SAAS+0G,MAAMA,CAAA,EAAG;MAChB,IAAInwC,IAAI,CAACvjE,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC;MAC1B,MAAMA,CAAC,GAAG,EAAEujE,IAAI,CAAC/3C,GAAG,CAAC8nF,OAAO,CAAC,GAAGxzG,CAAC,CAAC,GAAGyjE,IAAI,CAACvjE,CAAC;MAC3C,IAAI,CAACwS,IAAI,CAACxS,CAAC,IAAIA,CAAC,IAAIA,CAAC,IAAIwS,IAAI,CAACxS,CAAC,EAAE;QAC/BuzG,YAAY,CAAClpH,GAAG,CAACipH,OAAO,CAACp5G,CAAC,EAAEo5G,OAAO,CAAC30G,CAAC,EAAEqB,CAAC,CAAC;QACzC,IAAIA,CAAC,KAAKwS,IAAI,CAACxS,CAAC,EAAE,OAAO,CAAC;QAC1B,IAAIA,CAAC,KAAK,CAACwS,IAAI,CAACxS,CAAC,EAAE,OAAO,CAAC,CAAC;QAC5B,OAAO,CAAC;MACV;MACA,OAAO,CAAC;IACV;;IAEA;IACA,KAAK,IAAI2zG,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAG,EAAE,EAAE,EAAEA,UAAU,EAAE;MACtD,MAAMC,aAAa,GAAGX,KAAK,CAACU,UAAU,CAAC;MACvCJ,YAAY,GAAGR,iBAAiB,CAACY,UAAU,CAAC;MAE5CL,OAAO,CAACjpH,GAAG,CAACupH,aAAa,CAAC,CAAC,CAAC,EAAEA,aAAa,CAAC,CAAC,CAAC,EAAEA,aAAa,CAAC,CAAC,CAAC,CAAC;MACjEN,OAAO,CAACtwD,QAAQ,CAACxwC,IAAI,CAAC;;MAEtB;MACA,IAAIkiB,IAAI,GAAG,CAAC;MACZ,IAAIk/E,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEl/E,IAAI,GAAG8+E,MAAM,CAAC,CAAC;MAC3C,IAAII,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEl/E,IAAI,GAAG++E,MAAM,CAAC,CAAC;MAC3C,IAAIG,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,EAAEl/E,IAAI,GAAGg/E,MAAM,CAAC,CAAC;;MAE3C;MACA,IAAIh/E,IAAI,KAAK,CAAC,CAAC,EAAE;QACf0+E,UAAU,CAACQ,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;MAClC,CAAC,MAAM,IAAIl/E,IAAI,KAAK,CAAC,EAAE;QACrB0+E,UAAU,CAACQ,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;MAClC,CAAC,MAAM,IAAIl/E,IAAI,KAAK,CAAC,EAAE;QACrB;QACA2+E,QAAQ,CAACM,UAAU,CAAC,GAAG,CAAC;MAC1B;IACF;IAEA,MAAME,IAAI,GAAG;MACXt9F,OAAO,EAAE,EAAE;MACXgtD,IAAI,EAAEA,IAAI,CAACn4C,KAAK,CAAC,CAAC,CAACmF,MAAM,CAAC;IAC5B,CAAC;IAED,IAAIujF,UAAU,GAAG,CAAC;;IAElB;IACA,KAAK9nH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MACtB,IAAIonH,UAAU,CAACpnH,CAAC,CAAC,KAAK,CAAC,EAAE;QACvB;QACAmnH,IAAI,CAACW,UAAU,CAAC,CAACzpH,GAAG,CAACyc,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE8a,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE8a,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACg3D,QAAQ,CAACxwC,IAAI,CAAC;QAChFqhG,IAAI,CAACt9F,OAAO,CAACnmB,IAAI,CAAC0jH,UAAU,EAAE,CAAC;QAC/B;QACAT,QAAQ,CAACvsG,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QAC3BqnH,QAAQ,CAACvsG,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QAC3BqnH,QAAQ,CAACvsG,OAAO,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;MAC7B;IACF;;IAEA;IACA,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAE,EAAEA,CAAC,EAAE;MACvB,IAAIqnH,QAAQ,CAACrnH,CAAC,CAAC,KAAK,CAAC,EAAE;QACrB;QACAmnH,IAAI,CAACW,UAAU,CAAC,CAACt4G,IAAI,CAACu3G,iBAAiB,CAAC/mH,CAAC,CAAC,CAAC;QAC3C6nH,IAAI,CAACt9F,OAAO,CAACnmB,IAAI,CAAC0jH,UAAU,EAAE,CAAC;MACjC;IACF;IAEA,IAAI,CAACjM,KAAK,CAAC,CAAC,CAAC,GAAGgM,IAAI;IAEpB,MAAMjgG,IAAI,GAAG,IAAI4Y,iGAAa,CAAC,CAAC;IAChC,MAAMunF,aAAa,GAAG,IAAIvnF,iGAAa,CAAC,CAAC;IACzC,IAAI,CAACrO,SAAS,CAAC41F,aAAa,CAACA,aAAa,CAAC;IAC3C,KAAK/nH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmnH,IAAI,CAAClvH,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAChC,IAAI,CAAC2mH,QAAQ,CAAC3mH,CAAC,CAAC,GAAG,KAAK;MACxB,IAAIA,CAAC,GAAG,CAAC,EAAE;QACT;QACA4nB,IAAI,CAACsmD,UAAU,CAACi5C,IAAI,CAACnnH,CAAC,CAAC,EAAE+nH,aAAa,CAAC;QACvC,IAAI,CAACpB,QAAQ,CAAC3mH,CAAC,CAAC,GAAIu3E,IAAI,CAAC/3C,GAAG,CAAC5X,IAAI,CAAC,IAAI,GAAI;MAC5C,CAAC,MAAM,IAAI5nB,CAAC,GAAG,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE;QACtC;QACA,IAAI,CAAC0uH,QAAQ,CAAC3mH,CAAC,CAAC,GAAG,IAAI;MACzB;IACF;;IAEA;IACA,MAAMgpE,SAAS,GAAG,IAAI,CAACxL,QAAQ,CAACb,YAAY,CAAC,UAAU,CAAC;IACxD,IAAIhgD,GAAG,GAAG,CAAC;IACX,KAAK3c,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmnH,IAAI,CAAClvH,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAChCgpE,SAAS,CAACp8D,KAAK,CAAC+P,GAAG,EAAE,CAAC,GAAGwqG,IAAI,CAACnnH,CAAC,CAAC,CAACkO,CAAC;MAClC86D,SAAS,CAACp8D,KAAK,CAAC+P,GAAG,EAAE,CAAC,GAAGwqG,IAAI,CAACnnH,CAAC,CAAC,CAAC2S,CAAC;MAClCq2D,SAAS,CAACp8D,KAAK,CAAC+P,GAAG,EAAE,CAAC,GAAGwqG,IAAI,CAACnnH,CAAC,CAAC,CAACgU,CAAC;IACpC;IACAg1D,SAAS,CAAChV,WAAW,GAAG,IAAI;EAC9B;EAEAg0D,gBAAgBA,CAACH,IAAI,EAAEvyF,MAAM,EAAE;IAC7B,IAAIt1B,CAAC;IACL,MAAMmnH,IAAI,GAAG,IAAI,CAAC/vC,QAAQ;IAC1BywC,IAAI,CAACt9F,OAAO,GAAG,EAAE;IACjB,KAAKvqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmnH,IAAI,CAAClvH,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAChC,IAAI,IAAI,CAAC2mH,QAAQ,CAAC3mH,CAAC,CAAC,IAAIs1B,MAAM,CAAC6xF,IAAI,CAACnnH,CAAC,CAAC,CAAC,EAAE;QACvC6nH,IAAI,CAACt9F,OAAO,CAACnmB,IAAI,CAACpE,CAAC,CAAC;MACtB;IACF;EACF;EAEAioH,YAAYA,CAACJ,IAAI,EAAElqF,KAAK,EAAE;IACxB,IAAI39B,CAAC;IACL,IAAI4T,CAAC;IACL,MAAMuzG,IAAI,GAAG,IAAI,CAAC/vC,QAAQ;IAC1B,MAAMle,KAAK,GAAG,EAAE;IAEhB,MAAM/b,GAAG,GAAG,IAAI3c,iGAAa,CAAC,CAAC;IAC/B,KAAKxgC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACxCm9C,GAAG,CAAC+wB,UAAU,CAACi5C,IAAI,CAACU,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC,CAAC,EAAEmnH,IAAI,CAACU,IAAI,CAACt9F,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5D4yB,GAAG,CAAC7c,SAAS,CAAC,CAAC;MACf6c,GAAG,CAACD,KAAK,CAACvf,KAAK,CAAC;MAChBwf,GAAG,CAAC5Y,MAAM,CAAC,CAAC;MACZ20B,KAAK,CAACl5D,CAAC,CAAC,GAAG6nH,IAAI,CAACtwC,IAAI,CAAC/3C,GAAG,CAAC2d,GAAG,CAAC;IAC/B;;IAEA;IACA,KAAKn9C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,GAAG,CAAC,EAAE,EAAE+H,CAAC,EAAE;MAC5C,KAAK4T,CAAC,GAAG5T,CAAC,GAAG,CAAC,EAAE4T,CAAC,GAAGi0G,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAC5C,IAAIslD,KAAK,CAACtlD,CAAC,CAAC,GAAGslD,KAAK,CAACl5D,CAAC,CAAC,EAAE;UACvB;UACA,IAAIyN,CAAC,GAAGyrD,KAAK,CAACl5D,CAAC,CAAC;UAChBk5D,KAAK,CAACl5D,CAAC,CAAC,GAAGk5D,KAAK,CAACtlD,CAAC,CAAC;UACnBslD,KAAK,CAACtlD,CAAC,CAAC,GAAGnG,CAAC;UAEZA,CAAC,GAAGo6G,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC;UACnB6nH,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAAC3W,CAAC,CAAC;UACjCi0G,IAAI,CAACt9F,OAAO,CAAC3W,CAAC,CAAC,GAAGnG,CAAC;QACrB;MACF;IACF;EACF;EAEAy6G,cAAcA,CAAA,EAAG;IACf;IACA;IACA;IACA;IACA;;IAEA,IAAIloH,CAAC;IACL,IAAImoH,OAAO;IACX,IAAIN,IAAI;IACR,MAAMV,IAAI,GAAG,IAAI,CAAC/vC,QAAQ;IAC1B,MAAM;MAAE5wD;IAAK,CAAC,GAAG,IAAI;IAErB,IAAI,CAACwhG,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAACtgE,CAAC,KAAK,CAACwS,IAAI,CAACxS,CAAC,CAAC;IACtE,IAAI,CAACg0G,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAACtgE,CAAC,KAAKwS,IAAI,CAACxS,CAAC,CAAC;IACrE,IAAI,CAACg0G,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAAC3hE,CAAC,KAAK,CAAC6T,IAAI,CAAC7T,CAAC,CAAC;IACtE,IAAI,CAACq1G,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAAC3hE,CAAC,KAAK6T,IAAI,CAAC7T,CAAC,CAAC;IACrE,IAAI,CAACq1G,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAACpmE,CAAC,KAAK,CAACsY,IAAI,CAACtY,CAAC,CAAC;IACtE,IAAI,CAAC85G,gBAAgB,CAAC,IAAI,CAACnM,KAAK,CAAC,CAAC,CAAC,EAAGvnC,MAAM,IAAKA,MAAM,CAACpmE,CAAC,KAAKsY,IAAI,CAACtY,CAAC,CAAC;IAErE,MAAMmzC,OAAO,GAAG,IAAI7gB,iGAAa,CAAC,CAAC;IACnC,MAAM4nF,MAAM,GAAG,IAAI5nF,iGAAa,CAAC,CAAC;IAClC,MAAM6nF,IAAI,GAAG,IAAI7nF,iGAAa,CAAC,CAAC;IAEhC,KAAK2nF,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAACtM,KAAK,CAAC5jH,MAAM,EAAE,EAAEkwH,OAAO,EAAE;MACxDN,IAAI,GAAG,IAAI,CAAChM,KAAK,CAACsM,OAAO,CAAC;MAE1B,IAAIN,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,KAAK,CAAC,EAAE;MAE/BopD,OAAO,CAAChjD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MACpB,KAAK2B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE,EAAE+H,CAAC,EAAE;QACxCqhD,OAAO,CAAClgD,GAAG,CAACgmH,IAAI,CAACU,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC,CAAC,CAAC;MACpC;MACAqhD,OAAO,CAACzhB,cAAc,CAAC,GAAG,GAAGioF,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,CAAC;MACjDmwH,MAAM,CAACl6C,UAAU,CAACi5C,IAAI,CAACU,IAAI,CAACt9F,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE82B,OAAO,CAAC;MACjD+mE,MAAM,CAAC9nF,SAAS,CAAC,CAAC;MAElB,MAAMgoF,SAAS,GAAG,EAAE;MACpB,KAAKtoH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE,EAAE+H,CAAC,EAAE;QACxCqoH,IAAI,CAACn6C,UAAU,CAACi5C,IAAI,CAACU,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC,CAAC,EAAEqhD,OAAO,CAAC;QAC/CinE,SAAS,CAACtoH,CAAC,CAAC,GAAGqoH,IAAI,CAAC7oF,GAAG,CAAC4oF,MAAM,CAAC;MACjC;MACA,KAAKpoH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,EAAE,EAAE+H,CAAC,EAAE;QACxC,IAAIsoH,SAAS,CAACtoH,CAAC,CAAC,GAAGsoH,SAAS,CAAC,CAAC,CAAC,EAAE;UAC/B;UACA,IAAI76G,CAAC,GAAG66G,SAAS,CAAC,CAAC,CAAC;UACpBA,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAACtoH,CAAC,CAAC;UAC3BsoH,SAAS,CAACtoH,CAAC,CAAC,GAAGyN,CAAC;UAEhB,CAACA,CAAC,CAAC,GAAGo6G,IAAI,CAACt9F,OAAO;UAClBs9F,IAAI,CAACt9F,OAAO,CAAC,CAAC,CAAC,GAAGs9F,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC;UACjC6nH,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,CAAC,GAAGyN,CAAC;QACrB;MACF;MAEA,IAAI,CAACw6G,YAAY,CAACJ,IAAI,EAAEO,MAAM,CAAC;IACjC;IAEA,IAAIG,UAAU,GAAG,CAAC;IAClB,KAAKJ,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAACtM,KAAK,CAAC5jH,MAAM,EAAE,EAAEkwH,OAAO,EAAE;MACxDN,IAAI,GAAG,IAAI,CAAChM,KAAK,CAACsM,OAAO,CAAC;MAC1B,IAAIN,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,IAAI,CAAC,EAAE;QAC5BswH,UAAU,IAAI,CAAC,IAAIV,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,GAAG,CAAC,CAAC;MAC7C;IACF;IACA,IAAIyO,MAAM,GAAG,CAAC;IACd,MAAM6jB,OAAO,GAAG,IAAIs7C,WAAW,CAAC0iD,UAAU,CAAC;IAC3C,KAAKJ,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAACtM,KAAK,CAAC5jH,MAAM,EAAE,EAAEkwH,OAAO,EAAE;MACxDN,IAAI,GAAG,IAAI,CAAChM,KAAK,CAACsM,OAAO,CAAC;MAC1B,KAAKnoH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6nH,IAAI,CAACt9F,OAAO,CAACtyB,MAAM,GAAG,CAAC,EAAE,EAAE+H,CAAC,EAAE;QAC5CuqB,OAAO,CAAC7jB,MAAM,CAAC,GAAGmhH,IAAI,CAACt9F,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QACnCA,OAAO,CAAC7jB,MAAM,GAAG,CAAC,CAAC,GAAGmhH,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,GAAG,CAAC,CAAC;QACzCuqB,OAAO,CAAC7jB,MAAM,GAAG,CAAC,CAAC,GAAGmhH,IAAI,CAACt9F,OAAO,CAACvqB,CAAC,GAAG,CAAC,CAAC;QACzC0G,MAAM,IAAI,CAAC;MACb;IACF;IAEA,IAAI,CAAC82D,QAAQ,CAACuI,QAAQ,CAAC,IAAIvlC,yGAAqB,CAACjW,OAAO,EAAE,CAAC,CAAC,CAAC;EAC/D;EAEAi+F,aAAaA,CAAC3oD,UAAU,EAAE;IACxB,MAAM4oD,EAAE,GAAG,IAAIpC,sBAAc,CAACA,cAAc,CAAC,CAAC;IAC9C,MAAMvwC,GAAG,GAAGjW,UAAU,CAAC/N,aAAa,CAAC,CAAC;IACtC,MAAMjM,MAAM,GAAGga,UAAU,CAACzM,qBAAqB,CAAC,CAAC;IACjD,MAAMK,OAAO,GAAGoM,UAAU,CAACxM,iBAAiB,CAAC,CAAC;IAC9C,MAAMwoB,IAAI,GAAGhc,UAAU,CAAC9N,MAAM,CAAC,CAAC;IAChC02D,EAAE,CAACjwD,QAAQ,CAAC6rD,SAAS,CAAC5jG,KAAK,CAACpiB,GAAG,CAACy3E,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC;IACvD2yC,EAAE,CAACjwD,QAAQ,CAAC8rD,OAAO,CAAC7jG,KAAK,GAAGgzC,OAAO;IACnCg1D,EAAE,CAACjwD,QAAQ,CAAC+rD,WAAW,CAAC9jG,KAAK,CAACpiB,GAAG,CAACo1D,OAAO,CAACi1D,KAAK,CAAC9tG,KAAK,EAAE64C,OAAO,CAACi1D,KAAK,CAACzrG,MAAM,CAAC;IAC5EwrG,EAAE,CAACjwD,QAAQ,CAACgsD,UAAU,CAAC/jG,KAAK,CAACpiB,GAAG,CAACwnD,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC;IACtDhkD,MAAM,CAACJ,MAAM,CAAC,IAAI,CAACwvD,UAAU,EAAE4O,UAAU,CAAC7N,aAAa,CAAC,CAAC,CAAC;IAE1D,MAAM22D,OAAO,GAAG,IAAI,CAAC13D,UAAU;IAC/Bw3D,EAAE,CAACjwD,QAAQ,CAAC35C,KAAK,CAAC4B,KAAK,CAACjR,IAAI,CAACm5G,OAAO,CAAC9pG,KAAK,CAAC;IAC3C4pG,EAAE,CAACjwD,QAAQ,CAACisD,SAAS,CAAChkG,KAAK,CAACpiB,GAAG,CAACsqH,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC,EAAED,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC,EAAED,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC,CAAC;IAEvG,IAAI,CAAClpH,QAAQ,GAAG+oH,EAAE;IAElB5sC,IAAI,CAAC58B,OAAO,CAAC,IAAI,CAACl/C,KAAK,CAAC;IACxB87E,IAAI,CAACjqC,SAAS,CAAC,IAAI,CAACn2B,QAAQ,CAAC;EAC/B;EAEAotG,eAAeA,CAAA,EAAG;IAChB,MAAM;MAAEx5F,MAAM;MAAEC,SAAS;MAAEC;IAAU,CAAC,GAAGxuB,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAACoD,EAAE;IAC9D,MAAMu5F,OAAO,GAAG,IAAI,CAAC13D,UAAU;IAC/B,MAAM63D,IAAI,GAAGH,OAAO,CAACI,KAAK,GAAGJ,OAAO,CAACK,IAAI;IACzC,MAAMC,IAAI,GAAGN,OAAO,CAACO,IAAI,GAAGP,OAAO,CAACK,IAAI;IACxC,MAAMzmG,KAAK,GAAIzqB,CAAC,IAAK,CAACgxH,IAAI,GAAGhxH,CAAC,GAAG6wH,OAAO,CAACQ,EAAE,IAAIF,IAAI;IACnD,IAAI,CAACvpH,QAAQ,CAAC84D,QAAQ,CAACksD,UAAU,CAACjkG,KAAK,CAACpiB,GAAG,CAACkkB,KAAK,CAAC8M,MAAM,CAAC,EAAE9M,KAAK,CAAC+M,SAAS,CAAC,EAAE/M,KAAK,CAACgN,SAAS,CAAC,CAAC;EAChG;EAEA,OAAO65F,oBAAoB,GAAG,GAAG;EAEjC,OAAOC,IAAI,UAAG,IAAI7oF,iGAAa,CAAC,CAAC;EAEjC,OAAO8oF,KAAK,UAAG,IAAI9oF,iGAAa,CAAC,CAAC;EAElC,OAAO+oF,OAAO,UAAG,IAAI/oF,iGAAa,CAAC,CAAC;EAEpC,OAAOipF,mBAAmB,UAAG,IAAIjpF,iGAAa,CAAC,CAAC;EAEhD,OAAOkpF,UAAU,UAAG,IAAIlpF,+FAAW,CAAC,CAAC;EAErC5iC,OAAOA,CAAC+7D,MAAM,EAAE;IACd,MAAMgwD,mBAAmB,GAAGlD,UAAU,CAAC2C,oBAAoB;IAC3D,MAAMr3E,GAAG,GAAG00E,UAAU,CAAC4C,IAAI;IAC3B,MAAM9xC,IAAI,GAAGkvC,UAAU,CAAC6C,KAAK;IAC7B,MAAMM,MAAM,GAAGnD,UAAU,CAAC8C,OAAO;IACjC,MAAMM,kBAAkB,GAAGpD,UAAU,CAACgD,mBAAmB;IACzD,MAAMt3F,SAAS,GAAGs0F,UAAU,CAACiD,UAAU;IAEvC,IAAI,CAACb,eAAe,CAAC,CAAC;;IAEtB;IACAlvD,MAAM,CAACmwD,iBAAiB,CAACvyC,IAAI,CAAC;IAC9B5d,MAAM,CAACowD,gBAAgB,CAACh4E,GAAG,CAAC;IAC5BA,GAAG,CAACktB,eAAe,CAACsY,IAAI,EAAE5d,MAAM,CAACW,IAAI,GAAGqvD,mBAAmB,CAAC;;IAE5D;IACAE,kBAAkB,CAACr6G,IAAI,CAAC,IAAI,CAACsnD,WAAW,CAAC,CAACC,MAAM,CAAC,CAAC;IAClDhlB,GAAG,CAACa,YAAY,CAACi3E,kBAAkB,CAAC;;IAEpC;IACAD,MAAM,CAACvrH,GAAG,CAACk5E,IAAI,CAACrpE,CAAC,EAAEqpE,IAAI,CAAC5kE,CAAC,EAAE4kE,IAAI,CAACvjE,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACzC41G,MAAM,CAACh3E,YAAY,CAACi3E,kBAAkB,CAAC;IACvCtyC,IAAI,CAAC/nE,IAAI,CAACo6G,MAAM,CAAC;IACjBryC,IAAI,CAACj3C,SAAS,CAAC,CAAC;IAEhBnO,SAAS,CAAC63F,6BAA6B,CAACzyC,IAAI,EAAExlC,GAAG,CAAC;IAElD,IAAI,CAAC,IAAI,CAAC5f,SAAS,CAAC+lC,MAAM,CAAC/lC,SAAS,CAAC,EAAE;MACrC,IAAI,CAACA,SAAS,GAAGA,SAAS,CAACiN,KAAK,CAAC,CAAC;MAClC,IAAI,CAAC4nF,eAAe,CAAC,CAAC;MACtB,IAAI,CAACkB,cAAc,CAAC,CAAC;IACvB;EACF;AACF;AAEA,qDAAezB,UAAU;;AC9aM;AACG;AAElC,SAASwD,aAAaA,CAACjnH,KAAK,EAAE;EAC5B,MAAM/C,CAAC,GAAG+C,KAAK,CAAC/K,MAAM;EACtB,MAAM2qB,MAAM,GAAG,IAAIxQ,YAAY,CAACnS,CAAC,GAAG,CAAC,CAAC;EACtC,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;IAC1B,MAAM4T,CAAC,GAAG,CAAC,GAAG5T,CAAC;IACf,MAAMjI,CAAC,GAAGiL,KAAK,CAAChD,CAAC,CAAC;IAClB4iB,MAAM,CAAChP,CAAC,CAAC,GAAG7b,CAAC,CAACmW,CAAC;IACf0U,MAAM,CAAChP,CAAC,GAAG,CAAC,CAAC,GAAG7b,CAAC,CAAC4a,CAAC;IACnBiQ,MAAM,CAAChP,CAAC,GAAG,CAAC,CAAC,GAAG7b,CAAC,CAACic,CAAC;EACrB;EACA,OAAO4O,MAAM;AACf;AAEA,MAAMsnG,YAAY,CAAC;EACjB,OAAOC,gBAAgB,GAAG;IAAE;IAC1BC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;IACZC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;IACZC,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;EACb,CAAC;EAEDh/G,WAAWA,CAACyrC,IAAI,EAAE4xE,OAAO,EAAE;IACzB,MAAM;MAAE9pG;IAAM,CAAC,GAAG8pG,OAAO,CAAC,CAAC;IAC3B,MAAM;MAAEC;IAAY,CAAC,GAAGD,OAAO,CAAC,CAAC;;IAEjC,MAAM4B,KAAK,GAAG,IAAI/pF,iGAAa,CAAC,CAAC;IACjCuW,IAAI,CAACkI,OAAO,CAACsrE,KAAK,CAAC;IACnBA,KAAK,CAAC3qF,cAAc,CAAC,GAAG,CAAC;IAEzB,MAAM4qF,UAAU,GAAG,IAAI,CAACC,gBAAgB,CAAC5rG,KAAK,EAAE+pG,WAAW,CAAC;IAE5D,MAAMprD,QAAQ,GAAG,IAAIh9B,wGAAoB,CAAC,CAAC;IAC3C,MAAM42C,QAAQ,GAAG,EAAE;IAEnB,KAAK,IAAIp3E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1Bo3E,QAAQ,CAAChzE,IAAI,CAAComH,UAAU,CAACxqH,CAAC,CAAC,CAACo/B,KAAK,CAAC,CAAC,CAAC43B,QAAQ,CAACuzD,KAAK,CAAC,CAAC;MACpDnzC,QAAQ,CAAChzE,IAAI,CAAComH,UAAU,CAAC,CAACxqH,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAACo/B,KAAK,CAAC,CAAC,CAAC43B,QAAQ,CAACuzD,KAAK,CAAC,CAAC;IAChE;IACA,MAAMt7G,WAAW,GAAG,IAAIuxB,iGAAa,CAAC,CAAC,GAAG+pF,KAAK,CAACr8G,CAAC,IAAI,CAAC,GAAG2Q,KAAK,CAAC3Q,CAAC,GAAG2Q,KAAK,CAAClM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClF,KAAK,IAAI3S,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1Bo3E,QAAQ,CAAChzE,IAAI,CAACgzE,QAAQ,CAACp3E,CAAC,CAAC,CAACo/B,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC8N,WAAW,CAAC,CAAC;IACrD;IACA,KAAK,IAAIjP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1Bo3E,QAAQ,CAAChzE,IAAI,CAACgzE,QAAQ,CAACp3E,CAAC,GAAG,CAAC,CAAC,CAACo/B,KAAK,CAAC,CAAC,CAAC;MACtCg4C,QAAQ,CAAChzE,IAAI,CAACgzE,QAAQ,CAACp3E,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAACo/B,KAAK,CAAC,CAAC,CAAC;IAC5C;IACA,MAAM9+B,MAAM,GAAG,IAAIkgC,iGAAa,CAAC,CAAC;IAClCuW,IAAI,CAACnF,SAAS,CAACtxC,MAAM,CAAC;IACtB82E,QAAQ,CAAC9iE,OAAO,CAAEggE,MAAM,IAAKA,MAAM,CAACnzE,GAAG,CAACb,MAAM,CAAC,CAAC,CAAC,CAAC;;IAElD,MAAMoqH,YAAY,GAAGT,aAAa,CAAC7yC,QAAQ,CAAC;IAC5C5Z,QAAQ,CAACvhD,YAAY,CAAC,UAAU,EAAE,IAAIukB,yGAAqB,CAACkqF,YAAY,EAAE,CAAC,CAAC,CAAC;IAE7E,IAAI,CAACC,MAAM,GAAG,IAAInqF,sGAAkB,CAACg9B,QAAQ,EAAE,IAAIh9B,2GAAuB,CAAC;MAAEzlB,KAAK,EAAE;IAAS,CAAC,CAAC,CAAC;IAChG,IAAI,CAAC4vG,MAAM,CAAC/sD,MAAM,CAACv/D,GAAG,CAACqhE,QAAQ,CAAC3J,MAAM,CAACC,MAAM,CAAC;EAChD;;EAEA;EACAy0D,gBAAgBA,CAAC5rG,KAAK,EAAE+pG,WAAW,EAAE;IACnC,MAAMiC,SAAS,GAAGX,YAAY,CAACC,gBAAgB;IAE/C,MAAMW,IAAI,GAAIA,CAAC7iH,KAAK,EAAE8iH,GAAG,KAAK;MAAE;MAC9B,MAAMC,SAAS,GAAGnsG,KAAK,CAACgsG,SAAS,CAAC5iH,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5C,MAAMgjH,UAAU,GAAG,CAAC,GAAG,IAAIF,GAAG,GAAG,CAAC,CAAC,GAAGA,GAAG,GAAGnC,WAAW,CAACiC,SAAS,CAAC5iH,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7E,OAAOgjH,UAAU,GAAGD,SAAS;IAC/B,CAAE;IAEF,MAAMR,UAAU,GAAG,CACjB,IAAIhqF,iGAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIsqF,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACvF,IAAItqF,iGAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIsqF,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EACxF,IAAItqF,iGAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIsqF,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EACvF,IAAItqF,iGAAa,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIsqF,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAGA,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACzF;IAED,OAAON,UAAU;EACnB;EAEAU,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACP,MAAM;EACpB;AACF;AAEA,uDAAeT,YAAY;;ACpFI;AACuB;AACjB;AACH;;AAElC;AACA;AACA;AACA;AACA,MAAMiB,cAAc,CAAC;EACnB;EACA7/G,WAAWA,CAAC8/G,MAAM,EAAExwG,KAAK,EAAEqC,MAAM,EAAE;IACjC,MAAMouG,QAAQ,GAAG,IAAI,CAACC,aAAa,CAAC1wG,KAAK,EAAEqC,MAAM,CAAC;IAElD,MAAMshF,GAAG,GAAG,IAAI8nB,sBAAc,CAACT,2BAA2B,CAAC,CAAC;IAC5D,IAAI,CAAC2F,MAAM,GAAG,IAAIlvB,MAAM,CAAC3kC,IAAI,CAAC2zD,QAAQ,EAAE9sB,GAAG,CAAC;IAC5C,IAAI,CAACgtB,MAAM,CAACC,aAAa,GAAG,KAAK;IACjC,IAAI,CAACD,MAAM,CAACE,WAAW,GAAG,IAAI;IAC9B,MAAMC,gBAAgB,GAAG,IAAIlrF,iGAAa,CAAC,CAAC;IAE5C,IAAI,CAAC+qF,MAAM,CAACnxB,eAAe,GAAG,UAAUuxB,SAAS,EAAEp0D,MAAM,EAAEoC,MAAM,EAAE+gC,SAAS,EAAEtjC,SAAS,EAAEujC,MAAM,EAAE;MAC/F,MAAM;QAAEj7F;MAAS,CAAC,GAAG,IAAI;MACzB,IAAI,CAAC0rH,MAAM,IAAI,CAAC1rH,QAAQ,EAAE;QACxB;MACF;;MAEA;MACA,MAAMksH,WAAW,GAAG,IAAIprF,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,EAAEm5B,MAAM,CAACc,GAAG,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;MACnEmxD,WAAW,CAACh5E,YAAY,CAAC+mB,MAAM,CAAC7C,WAAW,CAAC;;MAE5C;MACA,IAAI,CAAC5jB,MAAM,CAAC+kB,QAAQ,CAAC,CAAC;MACtB,IAAI,CAAC/kB,MAAM,CAACusE,eAAe,CAACmM,WAAW,CAAC19G,CAAC,EAAE09G,WAAW,CAACj5G,CAAC,EAAEi5G,WAAW,CAAC53G,CAAC,CAAC;MACxE,IAAI,CAAC8iD,WAAW,CAACtnD,IAAI,CAAC,IAAI,CAAC0jC,MAAM,CAAC;MAClC,IAAI,CAAC0nD,eAAe,CAACC,gBAAgB,CAAClhC,MAAM,CAACY,kBAAkB,EAAE,IAAI,CAACzD,WAAW,CAAC;MAClF,IAAI,CAAC+0D,YAAY,CAACnkD,eAAe,CAAC,IAAI,CAACkzB,eAAe,CAAC;;MAEvD;MACA,MAAMkxB,YAAY,GAAGV,MAAM,CAACt0D,WAAW;MACvC40D,gBAAgB,CAACl8G,IAAI,CAACs8G,YAAY,CAAC,CAAC/0D,MAAM,CAAC,CAAC;;MAE5C;MACAr3D,QAAQ,CAAC84D,QAAQ,CAACstD,WAAW,CAACrlG,KAAK,GAAGk5C,MAAM,CAACR,MAAM;MACnDz5D,QAAQ,CAAC84D,QAAQ,CAACutD,IAAI,CAACtlG,KAAK,GAAGk5C,MAAM,CAACc,GAAG;MACzC/6D,QAAQ,CAAC84D,QAAQ,CAACwtD,UAAU,CAACvlG,KAAK,GAAGtgB,IAAI,CAACo5D,GAAG,CAAC/4B,mGAAe,CAACurF,OAAO,GAAG,GAAG,GAAGpyD,MAAM,CAACP,GAAG,CAAC;MACzF15D,QAAQ,CAAC84D,QAAQ,CAACytD,eAAe,CAACxlG,KAAK,GAAGirG,gBAAgB;IAC5D,CAAC;;IAED;IACA,IAAI,CAACH,MAAM,CAAC3tD,MAAM,CAACv/D,GAAG,CAACqhE,QAAQ,CAAC3J,MAAM,CAACI,cAAc,CAAC;EACxD;EAEAm1D,aAAaA,CAAC1wG,KAAK,EAAEqC,MAAM,EAAE;IAC3B,MAAMouG,QAAQ,GAAG,IAAI7qF,wGAAoB,CAAC,CAAC;IAE3C5lB,KAAK,GAAGA,KAAK,IAAI,CAAC;IAClBqC,MAAM,GAAGA,MAAM,IAAI,CAAC;IAEpB,MAAMm6D,QAAQ,GAAG,IAAIhlE,YAAY,CAAC,CAChC,CAAC,GAAG,GAAGwI,KAAK,EAAE,GAAG,GAAGqC,MAAM,EAAE,CAAC,EAC7B,GAAG,GAAGrC,KAAK,EAAE,GAAG,GAAGqC,MAAM,EAAE,CAAC,EAC5B,CAAC,GAAG,GAAGrC,KAAK,EAAE,CAAC,GAAG,GAAGqC,MAAM,EAAE,CAAC,EAC9B,GAAG,GAAGrC,KAAK,EAAE,CAAC,GAAG,GAAGqC,MAAM,EAAE,CAAC,CAC9B,CAAC;IAEFouG,QAAQ,CAACpvG,YAAY,CAAC,UAAU,EAAE,IAAIukB,yGAAqB,CAAC42C,QAAQ,EAAE,CAAC,CAAC,CAAC;IACzEi0C,QAAQ,CAACtlD,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAErC,OAAOslD,QAAQ;EACjB;EAEAH,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACK,MAAM;EACpB;AACF;AAEA,yDAAeJ,cAAc;;AC5EE;AACW;AACI;AACI;AACpB;AACI;AAElC,MAAMa,YAAY,SAASpsD,UAAM,CAAC;EAChCt0D,WAAWA,CAAC6a,IAAI,EAAE05C,UAAU,EAAE;IAC5B,KAAK,CAAC15C,IAAI,EAAE05C,UAAU,CAAC;IACvB,IAAI,CAAC8/B,KAAK,GAAG,IAAI8mB,cAAU,CAAC,CAAC;IAC7B,IAAI,CAAC9mB,KAAK,CAAC6oB,aAAa,CAAC3oD,UAAU,CAAC;IACpC,IAAI,CAAC1+D,GAAG,CAAC,IAAI,CAACw+F,KAAK,CAAC;IAEpB,IAAI,CAACssB,MAAM,GAAG,IAAI/B,gBAAY,CAAC,IAAI,CAAC73E,aAAa,CAAC,CAAC,CAACjB,WAAW,EAAE,IAAI,CAACuuD,KAAK,CAAC1uC,UAAU,CAAC;IACvF,IAAI,CAAC9vD,GAAG,CAAC,IAAI,CAAC8qH,MAAM,CAACf,OAAO,CAAC,CAAC,CAAC;IAC/B,IAAI,CAACgB,SAAS,CAACnrH,QAAQ,CAAC2d,GAAG,CAACsN,KAAK,CAACoD,EAAE,CAACI,KAAK,CAAC;IAE3C,IAAI,CAAC28F,SAAS,GAAG,IAAIhB,kBAAc,CAAC,IAAI,CAACxrB,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;IACrD,IAAI,CAACx+F,GAAG,CAAC,IAAI,CAACgrH,SAAS,CAACjB,OAAO,CAAC,CAAC,CAAC;EACpC;EAEA74E,aAAaA,CAAA,EAAG;IACd,MAAMyM,GAAG,GAAG,IAAI,CAACghB,WAAW,CAAC/N,MAAM,CAAC,CAAC;IACrC,MAAMqP,MAAM,GAAG,IAAI5gC,gGAAY,CAAC,CAAC;IACjCse,GAAG,CAACstE,iBAAiB,CAAChrD,MAAM,CAAC;IAE7B,OAAO;MACLhwB,WAAW,EAAE0N,GAAG;MAChBxN,cAAc,EAAE8vB;IAClB,CAAC;EACH;EAEA8pD,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACvrB,KAAK;EACnB;EAEAusB,SAASA,CAACG,QAAQ,EAAE;IAClB,IAAI,CAACJ,MAAM,CAACf,OAAO,CAAC,CAAC,CAACxrH,QAAQ,CAAC21D,OAAO,GAAGg3D,QAAQ;EACnD;AACF;AAEA,uDAAeL,YAAY;;AC1CqB;;AAEhD;AACA;AACA;AACA;AACA,MAAMM,UAAU,SAASpsD,gBAAU,CAAC;EAClC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE50D,WAAWA,CAAA,EAAmB;IAAA,IAAlBihH,WAAW,GAAA3oH,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,EAAE;IAC1B,KAAK,CAAC2oH,WAAW,EAAE,CAAC,OAAO,CAAC,CAAC;EAC/B;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEtrG,IAAIA,CAACm/F,KAAK,EAAE;IACV,IAAIrhH,IAAI,GAAG,EAAE;IACb,IAAIqhH,KAAK,CAAC5/G,IAAI,EAAE;MACdzB,IAAI,GAAG,IAAI,CAACshE,KAAK,CAACv/B,KAAK,CAACs/E,KAAK,CAAC5/G,IAAI,CAACpB,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;IACzD,CAAC,MAAM,IAAIghH,KAAK,CAAChhD,MAAM,EAAE;MACvB,OAAO,IAAI,CAACgB,KAAK,CAAC9qC,MAAM,CAAEk3F,UAAU,IAAKA,UAAU,CAACC,eAAe,IAAID,UAAU,CAACC,eAAe,CAACrM,KAAK,CAAChhD,MAAM,CAAC,CAAC;IAClH;IACA,OAAO,CAAC,GAAGrgE,IAAI,CAAC;EAClB;AACF;AAEA,yDAAeutH,UAAU;;ACvCiC;AACU;AAErD,MAAMI,MAAM,SAAShsG,qBAAe,CAAC;EAClDpV,WAAWA,CAAC8zD,MAAM,EAAE96D,OAAO,EAAE;IAC3B,KAAK,CAAC,CAAC;IACP,IAAI,CAACqoH,OAAO,GAAGvtD,MAAM;IACrB,IAAI,CAACwtD,QAAQ,GAAGtoH,OAAO,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACuoH,MAAM,GAAG,KAAK;IACnB,IAAI,CAACC,MAAM,GAAG,IAAI;EACpB;EAEA7rH,IAAIA,CAAA,EAAG;IACL,OAAO0hH,OAAO,CAACz7G,MAAM,CAAC,IAAInE,KAAK,CAAC,6CAA6C,CAAC,CAAC;EACjF;EAEAgqH,KAAKA,CAAA,EAAG;IACN,IAAI,CAACF,MAAM,GAAG,IAAI;IAClB,IAAI,IAAI,CAACC,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACC,KAAK,CAAC,CAAC;IACrB;EACF;EAEA,OAAOC,WAAWA,CAACL,OAAO,EAAE;IAC1B,OAAOlwG,SAAS;EAClB;AACF;AAEAskD,0BAAoB,CAAC2rD,MAAM,CAAC3oH,SAAS,CAAC;;AC5BR;AAEf,MAAMkpH,UAAU,SAASP,MAAM,CAAC;EAC7CphH,WAAWA,CAAC8zD,MAAM,EAAE96D,OAAO,EAAE;IAC3B,KAAK,CAAC86D,MAAM,EAAE96D,OAAO,CAAC;IAEtBA,OAAO,GAAG,IAAI,CAACsoH,QAAQ;IACvB,IAAI,CAACM,OAAO,GAAG5oH,OAAO,CAACsiB,MAAM,KAAK,IAAI;EACxC;EAEA3lB,IAAIA,CAAA,EAAG;IACL,OAAO,IAAI0hH,OAAO,CAAC,CAACC,OAAO,EAAE17G,MAAM,KAAK;MACtC,IAAI,IAAI,CAAC2lH,MAAM,EAAE;QACf,MAAM,IAAI9pH,KAAK,CAAC,iBAAiB,CAAC;MACpC;MAEA,MAAMoqH,IAAI,GAAG,IAAI,CAACR,OAAO;MACzB,MAAMS,MAAM,GAAG,IAAI,CAACN,MAAM,GAAG,IAAIO,UAAU,CAAC,CAAC;MAE7CD,MAAM,CAAC/zG,gBAAgB,CAAC,MAAM,EAAE,MAAM;QACpCupG,OAAO,CAACwK,MAAM,CAACtpG,MAAM,CAAC;MACxB,CAAC,CAAC;MACFspG,MAAM,CAAC/zG,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACrCnS,MAAM,CAACkmH,MAAM,CAACtqH,KAAK,CAAC;MACtB,CAAC,CAAC;MACFsqH,MAAM,CAAC/zG,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACrCnS,MAAM,CAAC,IAAInE,KAAK,CAAC,iBAAiB,CAAC,CAAC;MACtC,CAAC,CAAC;MACFqqH,MAAM,CAAC/zG,gBAAgB,CAAC,UAAU,EAAGmI,KAAK,IAAK;QAC7C,IAAI,CAACD,aAAa,CAACC,KAAK,CAAC;MAC3B,CAAC,CAAC;MAEF,IAAI,IAAI,CAAC0rG,OAAO,EAAE;QAChBE,MAAM,CAACE,iBAAiB,CAACH,IAAI,CAAC;MAChC,CAAC,MAAM;QACLC,MAAM,CAACG,UAAU,CAACJ,IAAI,CAAC;MACzB;IACF,CAAC,CAAC;EACJ;EAEA,OAAOV,eAAeA,CAACrtD,MAAM,EAAE;IAC7B,OAAQouD,IAAI,IAAIpuD,MAAM,YAAYouD,IAAI,IAAMrkG,IAAI,IAAIi2C,MAAM,YAAYj2C,IAAK;EAC7E;EAEA,OAAO6jG,WAAWA,CAAC5tD,MAAM,EAAE;IACzB,OAAOA,MAAM,IAAIA,MAAM,CAACj5C,IAAI;EAC9B;AACF;AAEA8mG,UAAU,CAACnsF,KAAK,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;;ACjDZ;AACO;;AAE9B;AACA,MAAM2sF,cAAc,GAAG,qBAAqB;AAE7B,MAAMC,SAAS,SAAShB,MAAM,CAAC;EAC5CphH,WAAWA,CAAC8zD,MAAM,EAAE96D,OAAO,EAAE;IAC3B,KAAK,CAAC86D,MAAM,EAAE96D,OAAO,CAAC;IAEtBA,OAAO,GAAG,IAAI,CAACsoH,QAAQ;IACvB,IAAI,CAACM,OAAO,GAAI5oH,OAAO,CAACsiB,MAAM,KAAK,IAAK;EAC1C;EAEA3lB,IAAIA,CAAA,EAAG;IACL,OAAO,IAAI0hH,OAAO,CAAC,CAACC,OAAO,EAAE17G,MAAM,KAAK;MACtC,IAAI,IAAI,CAAC2lH,MAAM,EAAE;QACf,MAAM,IAAI9pH,KAAK,CAAC,iBAAiB,CAAC;MACpC;MAEA,MAAM0gB,GAAG,GAAG,IAAI,CAACkpG,OAAO;MACxB,MAAMgB,OAAO,GAAG,IAAI,CAACb,MAAM,GAAG,IAAI1zG,cAAc,CAAC,CAAC;MAElDu0G,OAAO,CAACt0G,gBAAgB,CAAC,MAAM,EAAE,MAAM;QACrC,IAAIs0G,OAAO,CAACxM,MAAM,KAAK,GAAG,EAAE;UAC1ByB,OAAO,CAAC+K,OAAO,CAACx0G,QAAQ,CAAC;QAC3B,CAAC,MAAM;UACLjS,MAAM,CAAC,IAAInE,KAAK,CAAC,QAAQ4qH,OAAO,CAACxM,MAAM,mBAAmB19F,GAAG,EAAE,CAAC,CAAC;QACnE;MACF,CAAC,CAAC;MACFkqG,OAAO,CAACt0G,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACtCnS,MAAM,CAAC,IAAInE,KAAK,CAAC,qBAAqB,CAAC,CAAC;MAC1C,CAAC,CAAC;MACF4qH,OAAO,CAACt0G,gBAAgB,CAAC,OAAO,EAAE,MAAM;QACtCnS,MAAM,CAAC,IAAInE,KAAK,CAAC,iBAAiB,CAAC,CAAC;MACtC,CAAC,CAAC;MACF4qH,OAAO,CAACt0G,gBAAgB,CAAC,UAAU,EAAGmI,KAAK,IAAK;QAC9C,IAAI,CAACD,aAAa,CAACC,KAAK,CAAC;MAC3B,CAAC,CAAC;MAEFmsG,OAAO,CAACp0G,IAAI,CAAC,KAAK,EAAEkK,GAAG,CAAC;MACxB,IAAI,IAAI,CAACypG,OAAO,EAAE;QAChBS,OAAO,CAACr0G,YAAY,GAAG,aAAa;MACtC,CAAC,MAAM;QACLq0G,OAAO,CAACr0G,YAAY,GAAG,MAAM;MAC/B;MACAq0G,OAAO,CAACn0G,IAAI,CAAC,CAAC;IAChB,CAAC,CAAC;EACJ;EAEA,OAAOizG,eAAeA,CAACrtD,MAAM,EAAE;IAC7B,OAAO59D,2GAAU,CAAC49D,MAAM,CAAC,IAAIquD,cAAc,CAACxiG,IAAI,CAACm0C,MAAM,CAAC;EAC1D;EAEA,OAAO4tD,WAAWA,CAAC5tD,MAAM,EAAE;IACzB,IAAIA,MAAM,EAAE;MACV,MAAMzrB,IAAI,GAAG,CAACyrB,MAAM,CAACjpD,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,IAAIipD,MAAM,CAACx2C,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,IAAIw2C,MAAM,CAACnnE,MAAM,GAAG,CAAC,IAAI,CAAC;MAC9F,OAAOmnE,MAAM,CAAC17D,KAAK,CAAC07D,MAAM,CAACx2C,WAAW,CAAC,GAAG,EAAE+qB,IAAI,CAAC,GAAG,CAAC,EAAEA,IAAI,CAAC;IAC9D;IACA,OAAOl3B,SAAS;EAClB;AACF;AAEAixG,SAAS,CAAC5sF,KAAK,GAAG,CAAC,KAAK,CAAC;;AC/DK;AAEf,MAAM8sF,eAAe,SAASlB,MAAM,CAAC;EAClDzrH,IAAIA,CAAA,EAAG;IACL,OAAO,IAAI0hH,OAAO,CAAEC,OAAO,IAAK;MAC9B,IAAI,IAAI,CAACiK,MAAM,EAAE;QACf,MAAM,IAAI9pH,KAAK,CAAC,iBAAiB,CAAC;MACpC;MACA6/G,OAAO,CAAC,IAAI,CAAC+J,OAAO,CAAC;IACvB,CAAC,CAAC;EACJ;EAEA,OAAOF,eAAeA,CAACE,OAAO,EAAE;IAC9B,OAAO,KAAK;EACd;AACF;AAEAiB,eAAe,CAAC9sF,KAAK,GAAG,CAAC,WAAW,CAAC;;ACjBS;AAEA;AACF;AACY;AAExD,8CAAe,IAAIwrF,kBAAU,CAAC;AAC5B;AACAW,UAAU,EACVS,SAAS,EACTE,eAAe,CAChB,CAAC;;ACX8C;;AAEhD;AACA;AACA;AACA;AACA,MAAMC,UAAU,SAAS3tD,gBAAU,CAAC;EAClC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE50D,WAAWA,CAAA,EAAmB;IAAA,IAAlBwiH,WAAW,GAAAlqH,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,EAAE;IAC1B,KAAK,CAACkqH,WAAW,EAAE,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;EAC/C;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE7sG,IAAIA,CAACm/F,KAAK,EAAE;IACV,IAAIrhH,IAAI,GAAG,EAAE;IACb,IAAIqhH,KAAK,CAAC2N,MAAM,EAAE;MAChBhvH,IAAI,GAAG,IAAI,CAACshE,KAAK,CAAC2tD,OAAO,CAAC5N,KAAK,CAAC2N,MAAM,CAAC3uH,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;IAC7D,CAAC,MAAM,IAAIghH,KAAK,CAACr3F,GAAG,EAAE;MACpBhqB,IAAI,GAAG,IAAI,CAACshE,KAAK,CAAC23B,UAAU,CAACooB,KAAK,CAACr3F,GAAG,CAAC3pB,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;IAC7D;IACA;IACA,IAAIL,IAAI,CAAC9G,MAAM,KAAK,CAAC,IAAI,CAACmoH,KAAK,CAAC2N,MAAM,IAAI3N,KAAK,CAACh2F,IAAI,EAAE;MACpD,OAAO,IAAI,CAACg2C,KAAK,CAAC9qC,MAAM,CAAE24F,UAAU,IAAKA,UAAU,CAACC,gBAAgB,IAAID,UAAU,CAACC,gBAAgB,CAAC9N,KAAK,CAACh2F,IAAI,CAAC,CAAC;IAClH;IACA,OAAO,CAAC,GAAGrrB,IAAI,CAAC;EAClB;AACF;AAEA,yDAAe8uH,UAAU;;AC5C2C;AAErD,MAAM3kH,MAAM,CAAC;EAC1BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,IAAI,CAACotD,KAAK,GAAGtnC,IAAI;IACjB,IAAI,CAACwiG,QAAQ,GAAGtoH,OAAO,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACuoH,MAAM,GAAG,KAAK;EACrB;EAEAsB,SAASA,CAAA,EAAG;IACV,MAAM,IAAIprH,KAAK,CAAC,8CAA8C,CAAC;EACjE;EAEAT,KAAKA,CAAA,EAAG;IACN,OAAO,IAAIqgH,OAAO,CAAC,CAACC,OAAO,EAAE17G,MAAM,KAAK;MACtC47G,UAAU,CAAC,MAAM;QACf,IAAI;UACF,IAAI,IAAI,CAAC+J,MAAM,EAAE;YACf,OAAO3lH,MAAM,CAAC,IAAInE,KAAK,CAAC,iBAAiB,CAAC,CAAC;UAC7C;UACA,OAAO6/G,OAAO,CAAC,IAAI,CAACuL,SAAS,CAAC,CAAC,CAAC;QAClC,CAAC,CAAC,OAAOrrH,KAAK,EAAE;UACd,OAAOoE,MAAM,CAACpE,KAAK,CAAC;QACtB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;EAEA;EACAsrH,QAAQA,CAAA,EAAG;IACT,IAAI,CAACC,KAAK,CAACC,YAAY,CAAC,IAAI,CAAC58D,KAAK,CAAC;IACnC,OAAO,IAAI,CAAC28D,KAAK;EACnB;EAEAtB,KAAKA,CAAA,EAAG;IACN,IAAI,CAACF,MAAM,GAAG,IAAI;EACpB;AACF;AAEA9rD,0BAAoB,CAAC73D,MAAM,CAACnF,SAAS,CAAC;;ACvCP;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA,MAAMwqH,SAAS,CAAC;EACdjjH,WAAWA,CAAA,EAAG;IACZ;IACA,IAAI,CAACmnC,QAAQ,GAAG,EAAE;;IAElB;IACA,IAAI,CAAC+7E,OAAO,GAAG,IAAI;IACnB;IACA,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;EACxB;;EAEA;AACF;AACA;AACA;;EAEEnsH,KAAKA,CAACosH,MAAM,EAAE;IACZ;IACA,IAAIx7E,MAAM,GAAG,IAAI,CAACs7E,OAAO;IAEzB,IAAIE,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,SAAS,EAAE;MAC3C,MAAMC,SAAS,GAAGF,MAAM,CAACG,YAAY,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;MAChD,MAAMC,UAAU,GAAGJ,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC,CAACzzB,KAAK,CAAC,KAAK,CAAC;MAChE,MAAMioH,WAAW,GAAG3sH,QAAQ,CAAC0sH,UAAU,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/C,IAAI,IAAI,CAACN,OAAO,KAAK,IAAI,IAAIO,WAAW,KAAK,IAAI,CAACN,YAAY,EAAE;QAC9D;QACA,IAAI,CAACA,YAAY,GAAGM,WAAW;QAC/B,IAAI,CAACP,OAAO,GAAGt7E,MAAM,GAAG,IAAI1S,iGAAa,CAAC,CAAC;QAC3C,IAAI,CAACiS,QAAQ,CAAC,IAAI,CAACA,QAAQ,CAACx6C,MAAM,CAAC,GAAGi7C,MAAM;MAC9C;MAEA,MAAM;QAAEklB;MAAS,CAAC,GAAGllB,MAAM;MAC3BklB,QAAQ,CAACw2D,SAAS,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MAC/C12D,QAAQ,CAACw2D,SAAS,GAAG,CAAC,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MACnD12D,QAAQ,CAACw2D,SAAS,GAAG,CAAC,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MACnD12D,QAAQ,CAACw2D,SAAS,GAAG,EAAE,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;IACtD;EACF;AACF;AAEAP,SAAS,CAACxqH,SAAS,CAACob,EAAE,GAAG,GAAG;AAE5B,oDAAeovG,SAAS;;AClDO;AACE;AAEjC,MAAM;EAAEh8E,QAAQA,oBAAAA;AAAC,CAAC,GAAG6pC,IAAI;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA,MAAM6yC,SAAS,CAAC;EACd3jH,WAAWA,CAACs3B,OAAO,EAAE;IACnB;IACA,IAAI,CAACmG,QAAQ,GAAGnG,OAAO;IACvB;IACA,IAAI,CAACssF,UAAU,GAAG,EAAE;;IAEpB;IACA,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB;IACA,IAAI,CAACX,OAAO,GAAG,IAAI;IACnB;IACA,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;EACxB;;EAEA;AACF;AACA;AACA;;EAEEnsH,KAAKA,CAACosH,MAAM,EAAE;IACZ;IACA,IAAIU,QAAQ,GAAG,IAAI,CAACD,SAAS;IAC7B;IACA,IAAIj8E,MAAM,GAAG,IAAI,CAACs7E,OAAO;IAEzB,IAAIY,QAAQ,IAAIV,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,SAAS,EAAE;MACvD,MAAMC,SAAS,GAAGF,MAAM,CAACG,YAAY,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC;MAChD,MAAMC,UAAU,GAAGJ,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC,CAACzzB,KAAK,CAAC,KAAK,CAAC;MAChE,MAAMioH,WAAW,GAAG3sH,QAAQ,CAAC0sH,UAAU,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/C,IAAI,IAAI,CAACN,OAAO,KAAK,IAAI,IAAIO,WAAW,KAAK,IAAI,CAACN,YAAY,EAAE;QAC9D;QACA,IAAI,CAACA,YAAY,GAAGM,WAAW;QAC/B,IAAI,CAACP,OAAO,GAAGt7E,MAAM,GAAG,IAAI1S,iGAAa,CAAC,CAAC;QAC3C4uF,QAAQ,CAACn8E,SAAS,CAACC,MAAM,CAAC;MAC5B;MAEA,MAAM;QAAEklB;MAAS,CAAC,GAAGllB,MAAM;MAC3BklB,QAAQ,CAACw2D,SAAS,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MAC/C12D,QAAQ,CAACw2D,SAAS,GAAG,CAAC,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MACnD12D,QAAQ,CAACw2D,SAAS,GAAG,CAAC,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;MACnD12D,QAAQ,CAACw2D,SAAS,GAAG,EAAE,CAAC,GAAGI,UAAU,CAACF,UAAU,CAAC,CAAC,CAAC,CAAC;IACtD,CAAC,MAAM,IAAIM,QAAQ,IAAIV,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,SAAS,EAAE;MAC9D,MAAMr2F,OAAO,GAAGo2F,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC7nH,KAAK,CAAC,GAAG,CAAC;MACpD,KAAK,IAAI9G,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGq4B,OAAO,CAACrgC,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC9C,MAAMihC,KAAK,GAAG3I,OAAO,CAACt4B,CAAC,CAAC,CAACu6B,IAAI,CAAC,CAAC;QAC/B,IAAI0G,KAAK,CAAChpC,MAAM,GAAG,CAAC,EAAE;UACpBm3H,QAAQ,CAACp8E,QAAQ,CAAC/R,KAAK,CAAC;QAC1B;MACF;IACF,CAAC,MAAM,IAAIytF,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,cAAc,EAAE;MACvD;MACA,IAAI,CAACH,OAAO,GAAG,IAAI;MACnB,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;MACtB,IAAI,CAACU,SAAS,GAAGC,QAAQ,GAAG,IAAI78E,kBAAQ,CAAC,IAAI,CAACxJ,QAAQ,CAAC;MACvD,IAAI,CAACmmF,UAAU,CAAC9qH,IAAI,CAACgrH,QAAQ,CAAC;IAChC;EACF;AACF;AAEAH,SAAS,CAAClrH,SAAS,CAACob,EAAE,GAAG,GAAG;AAE5B,oDAAe8vG,SAAS;;ACzExB;AACA,MAAMI,SAAS,CAAC;EACd;AACF;AACA;AACA;EACE/jH,WAAWA,CAAC8e,IAAI,EAAE;IAChB;IACA,IAAI,CAACsnC,KAAK,GAAGtnC,IAAI,CAAC,CAAC;IACnB;IACA,IAAI,CAACklG,MAAM,GAAG,CAAC,CAAC,CAAC;IACjB;IACA,IAAI,CAACC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IACnB;IACA,IAAI,CAACC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IACnB;IACA,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;IACjB;IACA,IAAI,CAACC,IAAI,GAAGtlG,IAAI,CAACnyB,MAAM,CAAC,CAAC;;IAEzB,IAAI,CAACwP,IAAI,CAAC,CAAC;EACb;;EAEA;AACF;AACA;AACA;EACEkoH,QAAQA,CAAA,EAAG;IACT,OAAO,IAAI,CAACj+D,KAAK,CAAChuD,KAAK,CAAC,IAAI,CAAC4rH,MAAM,EAAE,IAAI,CAACG,KAAK,CAAC;EAClD;;EAEA;AACF;AACA;AACA;AACA;EACEG,QAAQA,CAAC79E,GAAG,EAAE;IACZA,GAAG,GAAG,IAAI,CAACu9E,MAAM,GAAGv9E,GAAG,GAAG,CAAC;IAC3B,OAAOA,GAAG,GAAG,IAAI,CAAC09E,KAAK,GAAG,IAAI,CAAC/9D,KAAK,CAAC3f,GAAG,CAAC,GAAG,GAAG;EACjD;;EAEA;AACF;AACA;AACA;AACA;EACE88E,YAAYA,CAAC98E,GAAG,EAAE;IAChBA,GAAG,GAAG,IAAI,CAACu9E,MAAM,GAAGv9E,GAAG,GAAG,CAAC;IAC3B,OAAOA,GAAG,GAAG,IAAI,CAAC09E,KAAK,GAAG,IAAI,CAAC/9D,KAAK,CAACzgD,UAAU,CAAC8gC,GAAG,CAAC,GAAG,EAAE;EAC3D;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE48E,UAAUA,CAACtmH,KAAK,EAAEwV,GAAG,EAAE;IACrB,MAAMilC,IAAI,GAAG,IAAI,CAACwsE,MAAM,GAAGjnH,KAAK,GAAG,CAAC;IACpC,MAAM06C,EAAE,GAAG,IAAI,CAACusE,MAAM,GAAGzxG,GAAG;IAC5B,OAAO,IAAI,CAAC6zC,KAAK,CAAChuD,KAAK,CAACo/C,IAAI,EAAEC,EAAE,GAAG,IAAI,CAAC0sE,KAAK,GAAG1sE,EAAE,GAAG,IAAI,CAAC0sE,KAAK,CAAC;EAClE;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEI,OAAOA,CAACxnH,KAAK,EAAEwV,GAAG,EAAE;IAClB,OAAOzb,QAAQ,CAAC,IAAI,CAACusH,UAAU,CAACtmH,KAAK,EAAEwV,GAAG,CAAC,EAAE,EAAE,CAAC;EAClD;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEiyG,SAASA,CAACznH,KAAK,EAAEwV,GAAG,EAAE;IACpB,OAAOmxG,UAAU,CAAC,IAAI,CAACL,UAAU,CAACtmH,KAAK,EAAEwV,GAAG,CAAC,CAAC;EAChD;;EAEA;AACF;AACA;AACA;EACEA,GAAGA,CAAA,EAAG;IACJ,OAAO,IAAI,CAACyxG,MAAM,IAAI,IAAI,CAACI,IAAI;EACjC;;EAEA;AACF;AACA;EACEjoH,IAAIA,CAAA,EAAG;IACL,MAAMgX,KAAK,GAAG,IAAI,CAACgxG,KAAK,GAAG,CAAC;IAC5B,IAAI,CAACH,MAAM,GAAG7wG,KAAK,GAAG,IAAI,CAACixG,IAAI,GAAGjxG,KAAK,GAAG,IAAI,CAACixG,IAAI;;IAEnD;IACA;;IAEA,IAAI,IAAI,CAACJ,MAAM,GAAG,IAAI,CAACC,OAAO,EAAE;MAC9B,IAAI,CAACA,OAAO,GAAG,CAAC,IAAI,CAAC79D,KAAK,CAACv7C,OAAO,CAAC,IAAI,EAAE,IAAI,CAACm5G,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,CAACI,IAAI,GAAG,CAAC,IAAI,CAAC;IACjF;IACA,IAAI,IAAI,CAACJ,MAAM,GAAG,IAAI,CAACE,OAAO,EAAE;MAC9B,IAAI,CAACA,OAAO,GAAG,CAAC,IAAI,CAAC99D,KAAK,CAACv7C,OAAO,CAAC,IAAI,EAAE,IAAI,CAACm5G,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,CAACI,IAAI,GAAG,CAAC,IAAI,CAAC;IACjF;IACA,IAAI,CAACD,KAAK,GAAG,IAAI,CAACF,OAAO,GAAG,CAAC,GAAG,IAAI,CAACC,OAAO,GAAG,IAAI,CAACD,OAAO,GAAG,IAAI,CAACC,OAAO;EAC5E;AACF;AAEA,wDAAeH,SAAS;;AChHO;AACR;AACO;AACA;AACU;AACA;AACJ;AAEpC,MAAM;EACJ/lE,OAAO;EACPptB,OAAO;EACPiQ,KAAK;EACLS,KAAK;EACLN,MAAM;EACN5O,IAAI;EACJ42B,QAAQA,oBAAAA;AACV,CAAC,GAAG8nB,IAAI;AAER,MAAM2zC,UAAU,GAAG,CAAC;AAEpB,SAASC,aAAaA,CAAC7pG,IAAI,EAAE;EAC3B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAM8pG,QAAQ,GAAG9pG,IAAI,CAACoU,IAAI,CAAC,CAAC,CAACtiC,MAAM,KAAK,CAAC;EACzC,OAAOkuB,IAAI,CAACziB,KAAK,CAAC,CAAC,EAAEusH,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC11F,IAAI,CAAC,CAAC;AAC/C;;AAEA;AACA,MAAM21F,cAAc,GAAG,uDAAuD;AAE9E,MAAMC,aAAa,GAAG;EACpB;EACA,GAAG,EAAE5B,aAAS;EACd,GAAG,EAAEU,aAASA;AAChB,CAAC;AAED,MAAMmB,SAAS,SAASlnH,MAAM,CAAC;EAC7BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IAEpB,IAAI,CAACykC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACjN,MAAM,GAAG,IAAI;IAClB,IAAI,CAACgzE,QAAQ,GAAG,IAAI;IACpB,IAAI,CAAC5pD,MAAM,GAAG,IAAI;IAClB,IAAI,CAACmrE,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,cAAc,GAAG,KAAK;IAC3B,IAAI,CAACC,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACC,iBAAiB,GAAG,IAAI;IAC7B,IAAI,CAACC,UAAU,GAAG,CAAC,CAAC;IAEpB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAACC,OAAO,GAAG,IAAI;IAEnB,IAAI,CAAC/mE,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC1nB,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC0uF,gBAAgB,GAAG,EAAE;IAE1B,IAAI,CAACjE,QAAQ,CAACkE,QAAQ,GAAG,KAAK;EAChC;EAEA,OAAO5C,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAI8lG,cAAc,CAACjlG,IAAI,CAACb,IAAI,CAAC;EACtD;EAEAib,SAASA,CAAA,EAAG;IACV,IAAI,CAAC0rF,cAAc,CAAC,CAAC;IACrB,IAAI,CAACC,UAAU,CAAC,CAAC;;IAEjB;IACA,MAAMC,SAAS,GAAG,IAAI,CAACN,QAAQ,CAAC,GAAG,CAAC;IACpC,IAAI,CAAC5nF,QAAQ,CAACihB,QAAQ,GAAGxoD,8GAAa,CAACyvH,SAAS,CAAC,GAAG,EAAE,GAAGA,SAAS,CAACx+E,QAAQ;;IAE3E;IACA,MAAM0+E,SAAS,GAAG,IAAI,CAACR,QAAQ,CAAC,GAAG,CAAC;IACpC,IAAI,CAAC5nF,QAAQ,CAACkhB,KAAK,GAAG,IAAI,CAAClhB,QAAQ,CAACkhB,KAAK,CAACjoD,MAAM,CAACR,8GAAa,CAAC2vH,SAAS,CAAC,GAAG,EAAE,GAAGA,SAAS,CAACjC,UAAU,CAAC;;IAEtG;IACA,IAAI,CAAC7hE,kBAAkB,CAAC,CAAC;;IAEzB;IACA,IAAI,CAACtkB,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,IAAI;MACrBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;EACJ;EAEAhjE,kBAAkBA,CAAA,EAAG;IACnB;IACA,MAAM+jE,SAAS,GAAG,CAAC,CAAC;IACpB,IAAIpxH,CAAC;IACL,MAAMwyC,MAAM,GAAG,IAAI,CAACzJ,QAAQ,CAACwc,OAAO;IACpC,KAAKvlD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwyC,MAAM,CAACv6C,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAClC,MAAMqxH,QAAQ,GAAG7+E,MAAM,CAACxyC,CAAC,CAAC;MAC1B,MAAMmX,SAAS,GAAGk6G,QAAQ,CAAChuF,KAAK;MAChC+tF,SAAS,CAACj6G,SAAS,CAAC,GAAGk6G,QAAQ;IACjC;;IAEA;IACA,KAAKrxH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC6pD,UAAU,CAAC5xD,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC3C,MAAM+N,CAAC,GAAG,IAAI,CAAC87C,UAAU,CAAC7pD,CAAC,CAAC;MAC5B,IAAIupC,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAI31B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG7F,CAAC,CAACw3C,OAAO,CAACttD,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACzC,MAAMuS,IAAI,GAAGpY,CAAC,CAACw3C,OAAO,CAAC3xC,CAAC,CAAC;QACzB,MAAMqtB,KAAK,GAAGmwF,SAAS,CAACjrG,IAAI,CAAC;QAC7BojB,QAAQ,GAAGA,QAAQ,CAACvnC,MAAM,CAACi/B,KAAK,CAAC+H,SAAS,CAACtlC,KAAK,CAAC,CAAC,CAAC;MACrD;MACA,MAAM4pD,QAAQ,GAAG,IAAIgH,kBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAEh7B,CAAC,CAACs1B,KAAK,EAAErjC,CAAC,GAAG,CAAC,CAAC;MAC5DstD,QAAQ,CAAC/jB,QAAQ,GAAGA,QAAQ;MAC5B,IAAI,CAACR,QAAQ,CAAC8gB,UAAU,CAAC7pD,CAAC,CAAC,GAAGstD,QAAQ;IACxC;EACF;EAEA0jE,UAAUA,CAAA,EAAG;IACX,MAAMM,UAAU,GAAG,CAAC,CAAC;IACrB,MAAM1uF,OAAO,GAAG,IAAI,CAACmG,QAAQ;;IAE7B;IACA,KAAK,IAAI/oC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4iC,OAAO,CAAC2iB,OAAO,CAACttD,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC/C,MAAMihC,KAAK,GAAG2B,OAAO,CAAC2iB,OAAO,CAACvlD,CAAC,CAAC;MAChCsxH,UAAU,CAACrwF,KAAK,CAACoC,KAAK,CAACpyB,UAAU,CAAC,CAAC,CAAC,CAAC,GAAGgwB,KAAK;IAC/C;EACF;;EAEA;EACA8vF,cAAcA,CAAA,EAAG;IACf,MAAMpmF,aAAa,GAAG,IAAI,CAAC0lF,cAAc,GAAG,CAAC,CAAC;IAC9C,MAAMztF,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,MAAMhI,KAAK,GAAG6B,OAAO,CAACrB,MAAM;IAC5B,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAE6iF,EAAE,GAAG9hD,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,GAAG6iF,EAAE,EAAE,EAAE7iF,CAAC,EAAE;MAC9C,MAAMksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;MACrB2qC,aAAa,CAACze,IAAI,CAAC0O,MAAM,CAAC,GAAG1O,IAAI;IACnC;IAEA,MAAMiP,KAAK,GAAGyH,OAAO,CAACmR,MAAM;IAC5B,MAAM;MAAEjxB;IAAO,CAAC,GAAG,IAAI;IACvB,KAAK,IAAIlP,CAAC,GAAG,CAAC,EAAE29G,EAAE,GAAGp2F,KAAK,CAACljC,MAAM,EAAE2b,CAAC,GAAG29G,EAAE,EAAE,EAAE39G,CAAC,EAAE;MAC9C,MAAMuY,IAAI,GAAGgP,KAAK,CAACvnB,CAAC,CAAC;MACrB,IAAIuY,IAAI,CAAC4R,MAAM,GAAG5R,IAAI,CAAC2R,KAAK,EAAE;QAC5Bhb,MAAM,CAACpB,KAAK,CAAC,8BAA8B,CAAC;MAC9C;MACAyK,IAAI,CAAC2R,KAAK,GAAG6M,aAAa,CAACxe,IAAI,CAAC2R,KAAK,CAAC,IAAI,IAAI;MAC9C3R,IAAI,CAAC4R,MAAM,GAAG4M,aAAa,CAACxe,IAAI,CAAC4R,MAAM,CAAC,IAAI,IAAI;IAClD;EACF;EAEAyzF,UAAUA,CAAC9C,MAAM,EAAE;IACjB,IAAI,IAAI,CAAC4B,QAAQ,KAAK,CAAC,EAAE;MACvB;IACF;;IAEA;IACA,MAAM31F,GAAG,GAAG+zF,MAAM,CAACG,YAAY,CAAC,CAAC,CAAC,KAAK,IAAI;;IAE3C;IACA;IACA,MAAMj0F,MAAM,GAAGD,GAAG,GAAG+zF,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,GAAGnB,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;IAClE,IAAI1pG,IAAI,GAAGuoG,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC;IACpC,MAAMh2G,MAAM,GAAG+1G,MAAM,CAACkB,QAAQ,CAAC,EAAE,CAAC;IAClC,MAAMrlE,OAAO,GAAGmkE,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAChD,MAAMk3F,OAAO,GAAG/C,MAAM,CAACkB,QAAQ,CAAC,EAAE,CAAC;IACnC,MAAM8B,MAAM,GAAGhD,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACrC,MAAMnmF,KAAK,GAAGglF,MAAM,CAACkB,QAAQ,CAAC,EAAE,CAAC;IACjC,MAAM1hH,CAAC,GAAGwgH,MAAM,CAACoB,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;IAClC,MAAMn9G,CAAC,GAAG+7G,MAAM,CAACoB,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;IAClC,MAAM97G,CAAC,GAAG06G,MAAM,CAACoB,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;IAClC,MAAMl3G,SAAS,GAAG81G,MAAM,CAACoB,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;IAC1C,MAAMntF,UAAU,GAAG+rF,MAAM,CAACoB,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;IAC3C,MAAM53G,OAAO,GAAGw2G,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC,IAAIy1F,aAAa,CAAC7pG,IAAI,CAAC;IACvE,MAAM2U,MAAM,GAAG4zF,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC;IAC1C;IACA;IACA,IAAI,IAAI,CAAC9uH,QAAQ,CAAC2d,GAAG,CAACkU,OAAO,EAAE;MAC7B,IAAI23B,OAAO,KAAK,KAAK,IAAIA,OAAO,KAAK,KAAK,EAAE;QAC1C;MACF;IACF;;IAEA;IACA;IACApkC,IAAI,GAAGA,IAAI,CAACoU,IAAI,CAAC,CAAC;IAElB,MAAM/5B,IAAI,GAAG07B,iBAAO,CAACkB,SAAS,CAACllB,OAAO,CAAC;IACvC,MAAMwiB,IAAI,GAAGwB,iBAAO,CAACY,IAAI,CAAC3W,IAAI,CAAC,CAAC,CAAC;;IAEjC;IACA;IACA,IAAI8a,KAAK,GAAG,IAAI,CAACnF,MAAM;IACvB,IAAI,CAACmF,KAAK,IAAIA,KAAK,CAAClF,OAAO,CAAC,CAAC,KAAK01F,OAAO,EAAE;MACzC,IAAI,CAAC31F,MAAM,GAAGmF,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAAC3G,QAAQ,CAACqvF,OAAO,CAAC,IAAI,IAAI,CAAC1oF,QAAQ,CAACiK,QAAQ,CAACy+E,OAAO,CAAC;MACxF,IAAI,CAAC3iB,QAAQ,GAAG,IAAI;IACtB;IAEA,IAAIr0E,OAAO,GAAG,IAAI,CAACq0E,QAAQ;IAC3B,IAAI,CAACr0E,OAAO,IAAIA,OAAO,CAAC6H,WAAW,CAAC,CAAC,KAAKovF,MAAM,IAAIj3F,OAAO,CAAC+H,QAAQ,CAAC,CAAC,KAAKkH,KAAK,EAAE;MAChF,IAAI,CAAColE,QAAQ,GAAGr0E,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAACsgB,OAAO,EAAEmnE,MAAM,EAAEhoF,KAAK,CAAC;IACpE;IAEA,MAAMhH,GAAG,GAAG,IAAIlC,iGAAa,CAACtyB,CAAC,EAAEyE,CAAC,EAAEqB,CAAC,CAAC;IACtCymB,OAAO,CAACgI,OAAO,CAACtc,IAAI,EAAE3lB,IAAI,EAAEkiC,GAAG,EAAEhI,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEjiB,MAAM,EAAEC,SAAS,EAAE+pB,UAAU,EAAE7H,MAAM,CAAC;EAC5F;EAEA62F,YAAYA,CAAA,EAAG;IACb,IAAI,CAACrB,QAAQ,IAAI,CAAC;EACpB;EAEAsB,YAAYA,CAAClD,MAAM,EAAE;IACnB;IACA,MAAMmD,OAAO,GAAGnD,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;IACrC,MAAMiC,OAAO,GAAGpD,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACtC,MAAMkC,OAAO,GAAGrD,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACtC,MAAMmC,OAAO,GAAGtD,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACtC,MAAMoC,OAAO,GAAGvD,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACtC;;IAEA,MAAMjtF,OAAO,GAAG,IAAI,CAACmG,QAAQ;;IAE7B;IACA,IAAI+oF,OAAO,IAAIA,OAAO,GAAGD,OAAO,EAAE;MAChCjvF,OAAO,CAACuW,OAAO,CAAC04E,OAAO,EAAEC,OAAO,EAAE,CAAC,EAAEp0F,cAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAAE,IAAI,CAAC;IACnE;IACA,IAAIy0F,OAAO,IAAIA,OAAO,GAAGF,OAAO,EAAE;MAChCjvF,OAAO,CAACuW,OAAO,CAAC04E,OAAO,EAAEE,OAAO,EAAE,CAAC,EAAEr0F,cAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAAE,IAAI,CAAC;IACnE;IACA,IAAI00F,OAAO,IAAIA,OAAO,GAAGH,OAAO,EAAE;MAChCjvF,OAAO,CAACuW,OAAO,CAAC04E,OAAO,EAAEG,OAAO,EAAE,CAAC,EAAEt0F,cAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAAE,IAAI,CAAC;IACnE;IACA,IAAI20F,OAAO,IAAIA,OAAO,GAAGJ,OAAO,EAAE;MAChCjvF,OAAO,CAACuW,OAAO,CAAC04E,OAAO,EAAEI,OAAO,EAAE,CAAC,EAAEv0F,cAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAAE,IAAI,CAAC;IACnE;EACF;EAEA40F,YAAYA,CAACxD,MAAM,EAAE;IACnB;IACA,MAAM/rH,GAAG,GAAG+rH,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC;IACrC,MAAMwD,QAAQ,GAAGxvH,GAAG,CAACwT,OAAO,CAAC,GAAG,CAAC;IACjC,IAAI,CAAC06G,gBAAgB,GAAGsB,QAAQ,GAAG,CAAC,GAAGxvH,GAAG,CAACkhB,SAAS,CAAC,CAAC,EAAEsuG,QAAQ,CAAC,CAAC53F,IAAI,CAAC,CAAC,GAAG,IAAI,CAACs2F,gBAAgB;IAChG;;IAEA;IACA,IAAI,IAAI,CAACA,gBAAgB,KAAK,QAAQ,EAAE;MACtC,IAAI,CAAC1uF,SAAS,GAAG;QAAEviB,MAAM,EAAE,EAAE;QAAE2lC,OAAO,EAAE;MAAG,CAAC;MAC5C,IAAI,CAACpjB,SAAS,CAACviB,MAAM,GAAGxd,QAAQ,CAACO,GAAG,CAACkhB,SAAS,CAACsuG,QAAQ,GAAG,CAAC,EAAExvH,GAAG,CAACwT,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC;MACnF,IAAI,CAAC0zC,UAAU,CAACzlD,IAAI,CAAC,IAAI,CAAC+9B,SAAS,CAAC;MACpC;IACF,CAAC,MAAM,IAAI,IAAI,CAAC0uF,gBAAgB,KAAK,UAAU,IAAI,IAAI,CAAC1uF,SAAS,IAAI,IAAI,EAAE;MACzE,IAAI,CAACA,SAAS,CAACkB,KAAK,GAAG1gC,GAAG,CAACkhB,SAAS,CAACsuG,QAAQ,GAAG,CAAC,EAAExvH,GAAG,CAACwT,OAAO,CAAC,GAAG,CAAC,CAAC,CAACokB,IAAI,CAAC,CAAC;MAC3E;IACF,CAAC,MAAM,IAAI,IAAI,CAACs2F,gBAAgB,KAAK,OAAO,IAAI,IAAI,CAAC1uF,SAAS,IAAI,IAAI,EAAE;MACtE,IAAIiwF,QAAQ,GAAGzvH,GAAG,CAACkhB,SAAS,CAACsuG,QAAQ,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC53F,IAAI,CAAC,CAAC;MACrD,MAAM83F,QAAQ,GAAGD,QAAQ,CAACA,QAAQ,CAACn6H,MAAM,GAAG,CAAC,CAAC;MAC9C,IAAIo6H,QAAQ,KAAK,GAAG,IAAIA,QAAQ,KAAK,GAAG,EAAE;QACxCD,QAAQ,GAAGA,QAAQ,CAAC1uH,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAClC;MACA0uH,QAAQ,GAAGA,QAAQ,CAAC7qH,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;MACvC,MAAMirC,MAAM,GAAG4/E,QAAQ,CAACtrH,KAAK,CAAC,GAAG,CAAC;MAClC,IAAI,CAACq7B,SAAS,CAACojB,OAAO,GAAG,IAAI,CAACpjB,SAAS,CAACojB,OAAO,CAACvjD,MAAM,CAACwwC,MAAM,CAAC;IAChE;EACF;EAEA8/E,YAAYA,CAAC5D,MAAM,EAAE;IACnB;IACA,MAAM6D,SAAS,GAAG7D,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;IACvC;;IAEA;IACA,IAAI2C,MAAM,GAAG,IAAI,CAAC7B,QAAQ,CAAC4B,SAAS,CAAC;IACrC,IAAI/wH,8GAAa,CAACgxH,MAAM,CAAC,EAAE;MACzB,MAAMC,YAAY,GAAGtC,aAAa,CAACoC,SAAS,CAAC;MAC7C,IAAI/wH,6GAAY,CAACixH,YAAY,CAAC,EAAE;QAC9B,IAAI,CAAC9B,QAAQ,CAAC4B,SAAS,CAAC,GAAGC,MAAM,GAAG,IAAIC,YAAY,CAAC,IAAI,CAAC1pF,QAAQ,CAAC;MACrE;IACF;;IAEA;IACA,IAAI,CAACvnC,8GAAa,CAACgxH,MAAM,CAAC,EAAE;MAC1BA,MAAM,CAAClwH,KAAK,CAACosH,MAAM,CAAC;IACtB;EACF;EAEAgE,WAAWA,CAAChE,MAAM,EAAE;IAClB;IACA,MAAMiE,MAAM,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IAC/B;IACA,IAAI,CAACC,eAAe,CAAClE,MAAM,EAAEiE,MAAM,EAAGpjH,GAAG,IAAK;MAC5C,IAAI,CAACw5B,QAAQ,CAACqhB,QAAQ,CAAC76C,GAAG,CAAC;MAC3B,IAAI,CAACw5B,QAAQ,CAAC2gB,UAAU,CAACtlD,IAAI,CAACmL,GAAG,CAAC;IACpC,CAAC,CAAC;EACJ;EAEAsjH,WAAWA,CAACnE,MAAM,EAAE;IAClB;IACA,MAAMiE,MAAM,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IAC/B;IACA,IAAI,CAACC,eAAe,CAAClE,MAAM,EAAEiE,MAAM,EAAGpjH,GAAG,IAAK;MAC5C,IAAI,CAACw5B,QAAQ,CAACohB,QAAQ,CAAC56C,GAAG,CAAC;IAC7B,CAAC,CAAC;EACJ;EAEAqjH,eAAeA,CAAClE,MAAM,EAAEoE,IAAI,EAAEC,KAAK,EAAE;IACnC,MAAMC,OAAO,GAAG,CAAC;IACjB,MAAM91D,UAAU,GAAG,CAAC;IACpB,MAAM+1D,KAAK,GAAG,CAAC;IACf,MAAM91D,QAAQ,GAAG,CAAC;;IAElB;IACA;IACA,MAAM+1D,OAAO,GAAG,IAAI;IACpB,MAAMC,YAAY,GAAGzE,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC;IAC1C,MAAMuD,aAAa,GAAG1E,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC,CAAC,CAAC;IACxD,MAAM8R,OAAO,GAAGqiF,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAChD,MAAM84F,SAAS,GAAG3E,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACxC,MAAMzjF,UAAU,GAAGsiF,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACzC,MAAMyD,OAAO,GAAG5E,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACtC,MAAM0D,KAAK,GAAG7E,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACpC,MAAM2D,MAAM,GAAG9E,MAAM,CAACmB,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACrC;IACA;IACA,MAAM4D,YAAY,GAAG/E,MAAM,CAACC,UAAU,CAACmE,IAAI,CAACE,OAAO,CAAC,EAAEF,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAChiH,UAAU,CAAC,CAAC,CAAC;IACpF,MAAMyiH,UAAU,GAAGhF,MAAM,CAACC,UAAU,CAACmE,IAAI,CAACG,KAAK,CAAC,EAAEH,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAChiH,UAAU,CAAC,CAAC,CAAC;IAChF,MAAM0iH,mBAAmB,GAAGjF,MAAM,CAACmB,OAAO,CAACiD,IAAI,CAAC51D,UAAU,CAAC,EAAE41D,IAAI,CAAC51D,UAAU,CAAC,GAAG,CAAC,CAAC;IAClF,IAAI02D,QAAQ,GAAGlF,MAAM,CAACC,UAAU,CAACmE,IAAI,CAAC51D,UAAU,CAAC,GAAG,CAAC,EAAE41D,IAAI,CAAC51D,UAAU,CAAC,GAAG,CAAC,CAAC;IAC5E,IAAI22D,UAAU,GAAG,CAAC;IAElB,IAAID,QAAQ,CAAC37H,MAAM,GAAG,CAAC,EAAE;MACvB47H,UAAU,GAAGD,QAAQ,CAAC3iH,UAAU,CAAC,CAAC,CAAC;IACrC;IACA,MAAM6iH,iBAAiB,GAAGpF,MAAM,CAACmB,OAAO,CAACiD,IAAI,CAAC31D,QAAQ,CAAC,EAAE21D,IAAI,CAAC31D,QAAQ,CAAC,GAAG,CAAC,CAAC;IAC5Ey2D,QAAQ,GAAGlF,MAAM,CAACC,UAAU,CAACmE,IAAI,CAAC31D,QAAQ,CAAC,GAAG,CAAC,EAAE21D,IAAI,CAAC31D,QAAQ,CAAC,GAAG,CAAC,CAAC;IACpE,IAAI42D,QAAQ,GAAG,CAAC;IAChB,IAAIH,QAAQ,CAAC37H,MAAM,GAAG,CAAC,EAAE;MACvB87H,QAAQ,GAAGH,QAAQ,CAAC3iH,UAAU,CAAC,CAAC,CAAC;IACnC;IAEA,IAAI1B,GAAG;IACP,IAAIykH,EAAE,GAAG,IAAI,CAAC9uE,MAAM;IACpB,IAAIwpE,MAAM,CAACG,YAAY,CAAC,CAAC,CAAC,KAAKqE,OAAO,EAAE;MACtC,IAAIc,EAAE,KAAK,IAAI,IAAIA,EAAE,CAACj4F,OAAO,CAAC,CAAC,KAAKq3F,aAAa,EAAE;QACjDY,EAAE,GAAG,IAAI;QACT,IAAI,CAAC9uE,MAAM,GAAG,IAAI;MACpB;MACA,IAAI8uE,EAAE,KAAK,IAAI,EAAE;QACf,IAAI,CAAC9uE,MAAM,GAAG31C,GAAG,GAAG,IAAIq9B,eAAK,CAACwmF,aAAa,EAAEE,OAAO,CAAC;QACrDP,KAAK,CAACxjH,GAAG,CAAC;MACZ,CAAC,MAAM;QACLA,GAAG,GAAGykH,EAAE;MACV;MACA,MAAMvlG,MAAM,GAAG,IAAI6d,gBAAM,CACvB/8B,GAAG,EACH,IAAI,CAACw5B,QAAQ,CAACiC,gBAAgB,CAACyoF,YAAY,EAAEE,mBAAmB,EAAEE,UAAU,CAAC,EAC7E,IAAI,CAAC9qF,QAAQ,CAACiC,gBAAgB,CAAC0oF,UAAU,EAAEI,iBAAiB,EAAEC,QAAQ,CAAC,EACvE3nF,UAAU,EACVmnF,KAAK,EACLC,MACF,CAAC;MACDjkH,GAAG,CAACy9B,SAAS,CAACve,MAAM,CAAC;MACrB,IAAI,CAACsa,QAAQ,CAAC2gB,UAAU,CAACtlD,IAAI,CAACqqB,MAAM,CAAC;IACvC,CAAC,MAAM;MACLlf,GAAG,GAAG,IAAI48B,eAAK,CACbC,UAAU,EACV,IAAI,CAACrD,QAAQ,CAACiC,gBAAgB,CAACyoF,YAAY,EAAEE,mBAAmB,EAAEE,UAAU,CAAC,EAC7E,IAAI,CAAC9qF,QAAQ,CAACiC,gBAAgB,CAAC0oF,UAAU,EAAEI,iBAAiB,EAAEC,QAAQ,CAAC,EACvEZ,YAAY,EACZC,aAAa,EACb/mF,OAAO,EACPgnF,SACF,CAAC;MACDN,KAAK,CAACxjH,GAAG,CAAC;IACZ;EACF;EAEA0kH,YAAYA,CAACvF,MAAM,EAAE;IACnB,MAAM;MAAE3kE;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClCghB,QAAQ,CAACmqE,cAAc,GAAGxF,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAC1DwvB,QAAQ,CAACoqE,IAAI,GAAGzF,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAEhD,MAAMpb,EAAE,GAAGuvG,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAC3CwvB,QAAQ,CAAC5qC,EAAE,GAAGA,EAAE;IAChB,IAAIA,EAAE,EAAE;MACN,IAAI,CAAC4pB,QAAQ,CAAC5iB,IAAI,GAAGhH,EAAE;IACzB;IACA4qC,QAAQ,CAACgkE,MAAM,GAAG,KAAK;EACzB;EAEAqG,WAAWA,CAAC1F,MAAM,EAAE;IAClB,MAAM;MAAE3kE;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClCghB,QAAQ,CAACsqE,KAAK,GAAGtqE,QAAQ,CAACsqE,KAAK,IAAI,EAAE;IAErC,MAAMzuH,IAAI,GAAG8oH,MAAM,CAACmB,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC;IACvC9lE,QAAQ,CAACsqE,KAAK,CAACzuH,IAAI,GAAG,CAAC,CAAC,GAAG8oH,MAAM,CAACC,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;EAC7D;EAEA,OAAO+5F,UAAU,WAAG;IAClBC,MAAM,EAAEnE,SAAS,CAACrsH,SAAS,CAACkwH,YAAY;IACxC,QAAQ,EAAE7D,SAAS,CAACrsH,SAAS,CAACqwH,WAAW;IACzC,QAAQ,EAAEhE,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxCgD,MAAM,EAAEpE,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACtCiD,MAAM,EAAErE,SAAS,CAACrsH,SAAS,CAAC4tH,YAAY;IACxC+C,MAAM,EAAEtE,SAAS,CAACrsH,SAAS,CAAC6tH,YAAY;IACxC+C,MAAM,EAAEvE,SAAS,CAACrsH,SAAS,CAACmuH,YAAY;IACxC0C,MAAM,EAAExE,SAAS,CAACrsH,SAAS,CAACuuH,YAAY;IACxC;IACA,QAAQ,EAAElC,SAAS,CAACrsH,SAAS,CAAC2uH,WAAW;IACzC,QAAQ,EAAEtC,SAAS,CAACrsH,SAAS,CAAC8uH,WAAW;IAEzC;IACA,QAAQ,EAAEzC,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH,UAAU;IACxC,QAAQ,EAAEpB,SAAS,CAACrsH,SAAS,CAACytH;EAChC,CAAC;EAEDrD,SAASA,CAAA,EAAG;IACV,MAAMO,MAAM,GAAG,IAAIW,iBAAS,CAAC,IAAI,CAAC39D,KAAK,CAAC;IACxC,MAAM5tC,MAAM,GAAG,IAAI,CAACilB,QAAQ,GAAG,IAAIugB,iBAAO,CAAC,CAAC;;IAE5C;IACA,OAAO,CAAColE,MAAM,CAAC7wG,GAAG,CAAC,CAAC,EAAE;MACpB,MAAMqB,GAAG,GAAGwvG,MAAM,CAACC,UAAU,CAAC,CAAC,EAAEoB,UAAU,CAAC;MAC5C,MAAMnV,IAAI,GAAGwV,SAAS,CAACkE,UAAU,CAACp1G,GAAG,CAAC;MACtC,IAAI1d,6GAAY,CAACo5G,IAAI,CAAC,EAAE;QACtBA,IAAI,CAACj3G,IAAI,CAAC,IAAI,EAAE+qH,MAAM,CAAC;MACzB;MACAA,MAAM,CAACjnH,IAAI,CAAC,CAAC;IACf;;IAEA;IACA,IAAI,CAAC49B,SAAS,CAAC,CAAC;;IAEhB;IACA,IAAI,CAACgrF,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACnrE,MAAM,GAAG,IAAI;IAClB,IAAI,CAAC4pD,QAAQ,GAAG,IAAI;IACpB,IAAI,CAAChzE,MAAM,GAAG,IAAI;IAClB,IAAI,CAACiN,QAAQ,GAAG,IAAI;IAEpB,IAAIjlB,MAAM,CAACgf,YAAY,CAAC,CAAC,KAAK,CAAC,EAAE;MAC/B,MAAM,IAAI//B,KAAK,CAAC,uCAAuC,CAAC;IAC1D;IAEA,OAAO+gB,MAAM;EACf;AACF;AAEAssG,SAAS,CAACpC,OAAO,GAAG,CAAC,KAAK,CAAC;AAC3BoC,SAAS,CAACp4B,UAAU,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;AAEvC,wDAAeo4B,SAAS;;AChdD;AACQ;AACD;AACA;AAE9B,MAAM;EACJ9mE,OAAO;EACPptB,OAAO;EACPgR,MAAM;EACNxP,IAAIA,gBAAAA;AACN,CAAC,GAAG0+C,IAAI;AAER,MAAMy4C,eAAe,GAAG;EACtB3hH,CAAC,EAAE,CAAC;EACJG,CAAC,EAAE,CAAC;EACJS,CAAC,EAAE,CAAC;EACJL,CAAC,EAAE;AACL,CAAC;AAED,MAAMqhH,cAAc,GAAG,6CAA6C;AAEpE,MAAMC,SAAS,SAAS7rH,MAAM,CAAC;EAC7BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACykC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAAC+lE,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACuhB,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACI,UAAU,GAAG,CAAC,CAAC;IACpB,IAAI,CAACsE,oBAAoB,GAAG,KAAK;IACjC,IAAI,CAACpI,QAAQ,CAACkE,QAAQ,GAAG,KAAK;EAChC;EAEA,OAAO5C,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAI0qG,cAAc,CAAC7pG,IAAI,CAACb,IAAI,CAAC;EACtD;EAEA6qG,kBAAkBA,CAACl0F,KAAK,EAAE5F,KAAK,EAAE;IAC/B,MAAM/qB,KAAK,GAAG2wB,KAAK,CAAC9oC,MAAM;IAC1B,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC9B,MAAMiY,MAAM,GAAG8oB,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE;MAE1B,MAAM+1G,UAAU,GAAG/5F,KAAK,CAACljC,MAAM;MAC/B,KAAK,IAAI2b,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGshH,UAAU,EAAEthH,CAAC,EAAE,EAAE;QACnC,MAAMuhH,IAAI,GAAGh6F,KAAK,CAACvnB,CAAC,CAAC,CAACwhH,SAAS,CAACtuH,KAAK,CAAC,GAAG,CAAC;QAC1C,IAAIquH,IAAI,CAAC,CAAC,CAAC,KAAKl9G,MAAM,EAAE;UACtBkjB,KAAK,CAACvnB,CAAC,CAAC,CAAC6K,KAAK,GAAGze,CAAC;QACpB;QAEA,IAAIm1H,IAAI,CAAC,CAAC,CAAC,KAAKl9G,MAAM,EAAE;UACtBkjB,KAAK,CAACvnB,CAAC,CAAC,CAACiK,GAAG,GAAG7d,CAAC;QAClB;MACF;IACF;EACF;EAEAq1H,aAAaA,CAAC/nE,QAAQ,EAAEgoE,WAAW,EAAE;IACnC,MAAMjnB,QAAQ,GAAG,IAAInhE,gBAAM,CACzBogB,QAAQ,CAACnuC,EAAE,EACXmuC,QAAQ,CAACioE,SAAS,EAClB,IAAI/0F,iGAAa,CAACwuF,UAAU,CAAC1hE,QAAQ,CAACp/C,CAAC,CAAC,EAAE8gH,UAAU,CAAC1hE,QAAQ,CAAC36C,CAAC,CAAC,EAAE,CAAC,CAAC,EACpE26C,QAAQ,CAACkoE,QAAQ,EACjBloE,QACF,CAAC;IACD,IAAIA,QAAQ,CAACmoE,SAAS,KAAK,UAAU,EAAE;MACrCpnB,QAAQ,CAAC7gE,OAAO,GAAG,IAAIhN,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC/C;IACA,IAAI8sB,QAAQ,CAACooE,SAAS,KAAK,uBAAuB,EAAE;MAClDrnB,QAAQ,CAAC/gE,OAAO,GAAGlrC,QAAQ,CAACkrD,QAAQ,CAACioE,SAAS,EAAE,EAAE,CAAC,IAAI,CAAC;IAC1D;IACA,IAAIjoE,QAAQ,CAACooE,SAAS,KAAK,4BAA4B,EAAE;MACvDrnB,QAAQ,CAAC9gE,OAAO,GAAGnrC,QAAQ,CAACkrD,QAAQ,CAACioE,SAAS,EAAE,EAAE,CAAC,IAAI,CAAC;IAC1D;IACAD,WAAW,CAAClxH,IAAI,CAACiqG,QAAQ,CAAC;EAC5B;EAEAsnB,cAAcA,CAACroE,QAAQ,EAAEgoE,WAAW,EAAE;IACpC,IAAI,CAACh0H,KAAK,CAACsQ,OAAO,CAAC0jH,WAAW,CAAC,EAAE;MAC/BA,WAAW,GAAG,EAAE;IAClB;IAEA,IAAIhoE,QAAQ,EAAE;MACZ,IAAIhsD,KAAK,CAACsQ,OAAO,CAAC07C,QAAQ,CAAC,EAAE;QAC3B,MAAMl9C,KAAK,GAAGk9C,QAAQ,CAACr1D,MAAM;QAC7B,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;UAC9B,IAAIstD,QAAQ,CAACttD,CAAC,CAAC,CAACstD,QAAQ,EAAE;YACxBgoE,WAAW,GAAGA,WAAW,CAACtzH,MAAM,CAAC,IAAI,CAAC2zH,cAAc,CAACroE,QAAQ,CAACttD,CAAC,CAAC,CAACstD,QAAQ,CAAC,CAAC;UAC7E;UACA,IAAI,CAAC+nE,aAAa,CAAC/nE,QAAQ,CAACttD,CAAC,CAAC,EAAEs1H,WAAW,CAAC;QAC9C;MACF,CAAC,MAAM;QACL,IAAIhoE,QAAQ,CAACA,QAAQ,EAAE;UACrB,IAAIA,QAAQ,CAACA,QAAQ,EAAE;YACrBgoE,WAAW,GAAGA,WAAW,CAACtzH,MAAM,CAAC,IAAI,CAAC2zH,cAAc,CAACroE,QAAQ,CAACA,QAAQ,CAAC,CAAC;UAC1E;QACF;QACA,IAAI,CAAC+nE,aAAa,CAAC/nE,QAAQ,EAAEgoE,WAAW,CAAC;MAC3C;IACF;IAEA,OAAOA,WAAW;EACpB;EAEAM,eAAeA,CAACtoE,QAAQ,EAAEvsB,KAAK,EAAE;IAC/B,MAAMu0F,WAAW,GAAG,IAAI,CAACK,cAAc,CAACroE,QAAQ,CAAC;IAEjD,MAAMl9C,KAAK,GAAG2wB,KAAK,CAAC9oC,MAAM;IAC1B,IAAI+H,CAAC;IACL,IAAI4T,CAAC;IAEL,KAAK5T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B,MAAMiY,MAAM,GAAG8oB,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE;MAC1B,KAAKvL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0hH,WAAW,CAACr9H,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACvC,MAAMiiH,YAAY,GAAGP,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,CAACz6B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACxD,IAAI+uH,YAAY,KAAK59G,MAAM,EAAE;UAC3B,IAAI,CAAC8oB,KAAK,CAAC/gC,CAAC,CAAC,CAAC81H,SAAS,EAAE;YACvB/0F,KAAK,CAAC/gC,CAAC,CAAC,CAAC81H,SAAS,GAAG,EAAE;UACzB;UACA/0F,KAAK,CAAC/gC,CAAC,CAAC,CAAC81H,SAAS,CAAC1xH,IAAI,CAACkxH,WAAW,CAAC1hH,CAAC,CAAC,CAAC;QACzC;MACF;IACF;IACA;IACA,IAAIokE,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,IAAI+9C,QAAQ,GAAG,IAAI;IACnB,MAAMloF,MAAM,GAAG,SAAS;IACxB,MAAMC,IAAI,GAAG,IAAItN,iGAAa,CAACqN,MAAM,EAAEA,MAAM,EAAEA,MAAM,CAAC;IACtD,MAAME,MAAM,GAAG,IAAIvN,iGAAa,CAAC,CAACqN,MAAM,EAAE,CAACA,MAAM,EAAE,CAACA,MAAM,CAAC;IAE3D,SAASmoF,cAAcA,CAACjlH,CAAC,EAAE;MACzBglH,QAAQ,GAAG/9C,OAAO,CAACjnE,CAAC,CAAC;MACrB,IAAIglH,QAAQ,EAAE;QACZT,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,CAACn9B,IAAI,CAAC2xH,QAAQ,CAAC/wH,CAAC,CAAC;MACxC;IACF;IAEA,SAASixH,SAASA,CAACllH,CAAC,EAAE;MACpBglH,QAAQ,GAAG/9C,OAAO,CAACjnE,CAAC,CAAC;MACrB,IAAIglH,QAAQ,EAAE;QACZjoF,IAAI,CAACzvC,GAAG,CAAC8B,IAAI,CAACuM,GAAG,CAACohC,IAAI,CAAC5/B,CAAC,EAAE6nH,QAAQ,CAAC7nH,CAAC,CAAC,EAAE/N,IAAI,CAACuM,GAAG,CAACohC,IAAI,CAACn7B,CAAC,EAAEojH,QAAQ,CAACpjH,CAAC,CAAC,EAAExS,IAAI,CAACuM,GAAG,CAACohC,IAAI,CAAC95B,CAAC,EAAE+hH,QAAQ,CAAC/hH,CAAC,CAAC,CAAC;QAClG+5B,MAAM,CAAC1vC,GAAG,CAAC8B,IAAI,CAACsM,GAAG,CAACshC,MAAM,CAAC7/B,CAAC,EAAE6nH,QAAQ,CAAC7nH,CAAC,CAAC,EAAE/N,IAAI,CAACsM,GAAG,CAACshC,MAAM,CAACp7B,CAAC,EAAEojH,QAAQ,CAACpjH,CAAC,CAAC,EAAExS,IAAI,CAACsM,GAAG,CAACshC,MAAM,CAAC/5B,CAAC,EAAE+hH,QAAQ,CAAC/hH,CAAC,CAAC,CAAC;QAC1GgiH,cAAc,CAACjlH,CAAC,CAAC;MACnB;IACF;IAEA,KAAK/Q,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACjCg4E,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,GAAG,CAAC,CAAC;MACzB64D,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACjR,CAAC,GAAG6yB,KAAK,CAAC/gC,CAAC,CAAC,CAACk2H,EAAE;MACpC,IAAIn1F,KAAK,CAAC/gC,CAAC,CAAC,CAACm2H,EAAE,EAAE;QACfn+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACjR,CAAC,GAAG6yB,KAAK,CAAC/gC,CAAC,CAAC,CAACm2H,EAAE;MACtC;MACAn+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACjR,CAAC,GAAG8gH,UAAU,CAACh3C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACjR,CAAC,CAAC;MAC3D8pE,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACxM,CAAC,GAAGouB,KAAK,CAAC/gC,CAAC,CAAC,CAACo2H,EAAE;MACpC,IAAIr1F,KAAK,CAAC/gC,CAAC,CAAC,CAACq2H,EAAE,EAAE;QACfr+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACxM,CAAC,GAAGouB,KAAK,CAAC/gC,CAAC,CAAC,CAACq2H,EAAE;MACtC;MACAr+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACxM,CAAC,GAAGq8G,UAAU,CAACh3C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACxM,CAAC,CAAC;MAC3DqlE,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACnL,CAAC,GAAG,KAAK;MAC9B,IAAI+sB,KAAK,CAAC/gC,CAAC,CAAC,CAACs2H,EAAE,EAAE;QACft+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACnL,CAAC,GAAG+sB,KAAK,CAAC/gC,CAAC,CAAC,CAACs2H,EAAE;MACtC;MACAt+C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACnL,CAAC,GAAGg7G,UAAU,CAACh3C,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACnL,CAAC,CAAC;MAC3DgkE,OAAO,CAACj3C,KAAK,CAAC/gC,CAAC,CAAC,CAACmf,EAAE,CAAC,CAACna,CAAC,GAAG+7B,KAAK,CAAC/gC,CAAC,CAAC;IACnC;IAEA,IAAIu2H,QAAQ;IACZ,KAAK3iH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0hH,WAAW,CAACr9H,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACvC,IAAI0hH,WAAW,CAAC1hH,CAAC,CAAC,CAAC45B,OAAO,KAAK,IAAI,EAAE;QACnCM,IAAI,CAACzvC,GAAG,CAACwvC,MAAM,EAAEA,MAAM,EAAEA,MAAM,CAAC;QAChCE,MAAM,CAAC1vC,GAAG,CAAC,CAACwvC,MAAM,EAAE,CAACA,MAAM,EAAE,CAACA,MAAM,CAAC;QACrC0oF,QAAQ,GAAGjB,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,CAACz6B,KAAK,CAAC,GAAG,CAAC;QAC3CwuH,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,GAAG,EAAE;QAC1Bg1F,QAAQ,CAACjiH,OAAO,CAAC2hH,SAAS,CAAC;QAE3BX,WAAW,CAAC1hH,CAAC,CAAC,CAAC45B,OAAO,CAACS,UAAU,CAACH,IAAI,EAAEC,MAAM,CAAC;QAC/CunF,WAAW,CAAC1hH,CAAC,CAAC,CAAC45B,OAAO,CAAC5N,cAAc,CAAC,GAAG,CAAC;MAC5C,CAAC,MAAM;QACL22F,QAAQ,GAAGjB,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,CAACz6B,KAAK,CAAC,GAAG,CAAC;QAC3CwuH,WAAW,CAAC1hH,CAAC,CAAC,CAAC2tB,MAAM,GAAG,EAAE;QAC1Bg1F,QAAQ,CAACjiH,OAAO,CAAC0hH,cAAc,CAAC;MAClC;IACF;IACAh+C,OAAO,GAAG,IAAI;EAChB;EAEAw+C,aAAaA,CAACC,GAAG,EAAE;IACjB,SAAS7kH,OAAOA,CAAC/Z,CAAC,EAAE;MAClB,OAAOgK,MAAM,CAACkC,SAAS,CAAC9F,QAAQ,CAACkI,KAAK,CAACtO,CAAC,CAAC,KAAK,gBAAgB;IAChE;IAEA,SAAS6+H,SAASA,CAACC,OAAO,EAAE7yG,MAAM,EAAE;MAClC,IAAI6yG,OAAO,CAACC,QAAQ,KAAK,OAAO,IAAID,OAAO,CAACE,SAAS,CAACt8F,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;QACnE;MACF;MAEA,MAAMu8F,QAAQ,GAAG,CAAC,CAAC;MACnBA,QAAQ,CAACH,OAAO,GAAGA,OAAO;MAC1B,MAAMI,QAAQ,GAAGjzG,MAAM,CAAC6yG,OAAO,CAACC,QAAQ,CAAC;MACzC,IAAIG,QAAQ,EAAE;QACZ,IAAI,CAACnlH,OAAO,CAACmlH,QAAQ,CAAC,EAAE;UACtBjzG,MAAM,CAAC6yG,OAAO,CAACC,QAAQ,CAAC,GAAG,CAACG,QAAQ,EAAED,QAAQ,CAAC;QACjD,CAAC,MAAM;UACLhzG,MAAM,CAAC6yG,OAAO,CAACC,QAAQ,CAAC,CAACxyH,IAAI,CAAC0yH,QAAQ,CAAC;QACzC;MACF,CAAC,MAAM;QACLhzG,MAAM,CAAC6yG,OAAO,CAACC,QAAQ,CAAC,GAAGE,QAAQ;MACrC;MAEA,IAAI7+H,MAAM;MACV,IAAI+H,CAAC;MACL,IAAI22H,OAAO,CAACrxD,UAAU,EAAE;QACtB,CAAC;UAAErtE;QAAO,CAAC,GAAG0+H,OAAO,CAACrxD,UAAU;QAChC,KAAKtlE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/H,MAAM,EAAE+H,CAAC,EAAE,EAAE;UAC3B,MAAM+8D,SAAS,GAAG45D,OAAO,CAACrxD,UAAU,CAACtlE,CAAC,CAAC;UACvC82H,QAAQ,CAAC/5D,SAAS,CAAC65D,QAAQ,CAAC,GAAG75D,SAAS,CAAC85D,SAAS;QACpD;MACF;MAEA,CAAC;QAAE5+H;MAAO,CAAC,GAAG0+H,OAAO,CAACK,UAAU;MAChC,KAAKh3H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/H,MAAM,EAAE+H,CAAC,EAAE,EAAE;QAC3B02H,SAAS,CAACC,OAAO,CAACK,UAAU,CAACh3H,CAAC,CAAC,EAAE82H,QAAQ,CAAC;MAC5C;IACF;IAEA,MAAMhzG,MAAM,GAAG,CAAC,CAAC;IACjB,IAAI2yG,GAAG,CAACO,UAAU,CAAC/+H,MAAM,EAAE;MACzBy+H,SAAS,CAACD,GAAG,CAACO,UAAU,CAAC,CAAC,CAAC,EAAElzG,MAAM,CAAC;IACtC;IAEA,OAAOA,MAAM;EACf;EAEAmzG,qBAAqBA,CAAC7sG,IAAI,EAAE8sG,MAAM,EAAE;IAClC,KAAK,MAAMv1H,GAAG,IAAIyoB,IAAI,EAAE;MACtB,IAAIzoB,GAAG,KAAK,SAAS,EAAE;QACrB;MACF,CAAC,MAAM,IAAIA,GAAG,KAAK,UAAU,EAAE;QAC7B,IAAIyoB,IAAI,CAACkjC,QAAQ,EAAE;UACjB,IAAIljC,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,IAAI/sG,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,CAACjrG,IAAI,EAAE;YAC3DgrG,MAAM,CAAC9yH,IAAI,CAACgmB,IAAI,CAAC;UACnB;UACA,IAAI9oB,KAAK,CAACsQ,OAAO,CAACwY,IAAI,CAACkjC,QAAQ,CAAC,EAAE;YAChC,KAAK,IAAIttD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoqB,IAAI,CAACkjC,QAAQ,CAACr1D,MAAM,EAAE+H,CAAC,EAAE,EAAE;cAC7C,IAAIoqB,IAAI,CAACkjC,QAAQ,CAACttD,CAAC,CAAC,CAACm3H,SAAS,IAAI/sG,IAAI,CAACkjC,QAAQ,CAACttD,CAAC,CAAC,CAACm3H,SAAS,CAACjrG,IAAI,EAAE;gBACjEgrG,MAAM,CAAC9yH,IAAI,CAAC;kBAAEkpD,QAAQ,EAAEljC,IAAI,CAACkjC,QAAQ,CAACttD,CAAC;gBAAE,CAAC,CAAC;cAC7C;YACF;UACF;QACF;MACF,CAAC,MAAM,IAAIoqB,IAAI,CAACzoB,GAAG,CAAC,IAAIyoB,IAAI,CAACzoB,GAAG,CAAC,KAAK,IAAI,IAAI,OAAQyoB,IAAI,CAACzoB,GAAG,CAAE,KAAK,QAAQ,EAAE;QAC7E,IAAI,CAACs1H,qBAAqB,CAAC7sG,IAAI,CAACzoB,GAAG,CAAC,EAAEu1H,MAAM,CAAC;MAC/C;IACF;EACF;EAEAE,iBAAiBA,CAAC1xH,IAAI,EAAE;IACtB,MAAM9N,MAAM,GAAG,IAAIy/H,SAAS,CAAC,CAAC;IAC9B,MAAMC,GAAG,GAAG1/H,MAAM,CAAC2/H,eAAe,CAAC7xH,IAAI,EAAE,iBAAiB,CAAC;IAC3D,MAAM8xH,aAAa,GAAG,IAAI,CAAChB,aAAa,CAACc,GAAG,CAAC;IAC7C,IAAIG,OAAO;IACX,MAAMx0H,IAAI,GAAG,IAAI;IAEjB,SAASy0H,wBAAwBA,CAACttG,IAAI,EAAE;MACtC,IAAI2W,KAAK,GAAG,EAAE;MACd,IAAI3W,IAAI,CAACkjC,QAAQ,IAAIljC,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,IAAI/sG,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,CAACjrG,IAAI,EAAE;QAC5E,IAAI,CAAC5qB,KAAK,CAACsQ,OAAO,CAACwY,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,CAACjrG,IAAI,CAAC,EAAE;UAChD6U,KAAK,CAAC38B,IAAI,CAACgmB,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,CAACjrG,IAAI,CAAC;QAC1C,CAAC,MAAM;UACL6U,KAAK,GAAG3W,IAAI,CAACkjC,QAAQ,CAAC6pE,SAAS,CAACjrG,IAAI;QACtC;MACF,CAAC,MAAM,IAAI,CAAC9B,IAAI,CAACkjC,QAAQ,EAAE;QACzB,MAAMqqE,GAAG,GAAG,CAAC,CAAC;QACdA,GAAG,CAACC,UAAU,GAAG,IAAI;QACrBD,GAAG,CAACE,WAAW,GAAG,CAAC;QACnB,OAAOF,GAAG;MACZ;MAEA,IAAIvtG,IAAI,CAACkjC,QAAQ,CAACA,QAAQ,EAAE;QAC1BrqD,IAAI,CAAC2yH,eAAe,CAACxrG,IAAI,CAACkjC,QAAQ,CAACA,QAAQ,EAAEvsB,KAAK,CAAC;MACrD;MAEA,IAAI7U,IAAI;MACR,IAAI9b,KAAK,GAAG2wB,KAAK,CAAC9oC,MAAM;MACxB,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;QAC9BksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;QACfksB,IAAI,CAAC+6F,KAAK,GAAG,EAAE;MACjB;MAEA,IAAI6Q,SAAS,GAAG,EAAE;MAClB,IAAI1tG,IAAI,CAACkjC,QAAQ,CAACyqE,SAAS,IAAI3tG,IAAI,CAACkjC,QAAQ,CAACyqE,SAAS,CAAC5rG,IAAI,EAAE;QAC3D,IAAI,CAAC7qB,KAAK,CAACsQ,OAAO,CAACwY,IAAI,CAACkjC,QAAQ,CAACyqE,SAAS,CAAC5rG,IAAI,CAAC,EAAE;UAChD2rG,SAAS,CAAC1zH,IAAI,CAACgmB,IAAI,CAACkjC,QAAQ,CAACyqE,SAAS,CAAC5rG,IAAI,CAAC;QAC9C,CAAC,MAAM;UACL2rG,SAAS,GAAG1tG,IAAI,CAACkjC,QAAQ,CAACyqE,SAAS,CAAC5rG,IAAI;QAC1C;MACF;MACA,IAAIA,IAAI;MACR/b,KAAK,GAAG0nH,SAAS,CAAC7/H,MAAM;MACxBgL,IAAI,CAACgyH,kBAAkB,CAACl0F,KAAK,EAAE+2F,SAAS,CAAC;MAEzC,SAASE,WAAWA,CAAC/vH,KAAK,EAAE;QAC1BkkB,IAAI,GAAG2rG,SAAS,CAAC7vH,KAAK,CAAC;QACvBikB,IAAI,GAAG6U,KAAK,CAAC5U,IAAI,CAAC1N,KAAK,CAAC;QACxB,IAAI,CAACyN,IAAI,EAAE;UACT,OAAO,KAAK;QACd;QACAA,IAAI,CAAC+6F,KAAK,CAAC7iH,IAAI,CAAC+nB,IAAI,CAACtO,GAAG,CAAC;QACzBqO,IAAI,GAAG6U,KAAK,CAAC5U,IAAI,CAACtO,GAAG,CAAC;QACtB,IAAI,CAACqO,IAAI,EAAE;UACT,OAAO,KAAK;QACd;QACAA,IAAI,CAAC+6F,KAAK,CAAC7iH,IAAI,CAAC+nB,IAAI,CAAC1N,KAAK,CAAC;QAC3B,OAAO,IAAI;MACb;MAEA,KAAK,IAAIze,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;QAC9B,IAAI,CAACg4H,WAAW,CAACh4H,CAAC,CAAC,EAAE;UACnB;UACA;QACF;QACA,MAAMi4H,SAAS,GAAG9rG,IAAI,CAACwqG,OAAO,CAACh6D,YAAY,CAAC,OAAO,CAAC;QACpD,MAAMu7D,EAAE,GAAG91H,QAAQ,CAAC61H,SAAS,EAAE,EAAE,CAAC;QAClC;QACAH,SAAS,CAAC93H,CAAC,CAAC,CAAC49B,KAAK,GAAG,CAAC;QACtBk6F,SAAS,CAAC93H,CAAC,CAAC,CAACQ,IAAI,GAAGk9B,cAAI,CAAC6C,QAAQ,CAACjD,OAAO;QACzC,IAAI46F,EAAE,GAAG,CAAC,EAAE;UACVJ,SAAS,CAAC93H,CAAC,CAAC,CAAC49B,KAAK,GAAGs6F,EAAE;QACzB,CAAC,MAAM;UACL;UACA,MAAMt6F,KAAK,GAAGi3F,eAAe,CAACoD,SAAS,CAAC;UACxC,IAAIr6F,KAAK,KAAKnhB,SAAS,EAAE;YACvBq7G,SAAS,CAAC93H,CAAC,CAAC,CAAC49B,KAAK,GAAGA,KAAK;YAC1B,IAAIq6F,SAAS,KAAK,GAAG,EAAE;cACrBH,SAAS,CAAC93H,CAAC,CAAC,CAACQ,IAAI,GAAGk9B,cAAI,CAAC6C,QAAQ,CAAC/C,QAAQ;YAC5C;UACF;QACF;MACF;MAEAptB,KAAK,GAAG2wB,KAAK,CAAC9oC,MAAM;MACpB,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;QAC9BksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;QACfksB,IAAI,CAAC+6F,KAAK,CAACt2G,IAAI,CAAC,CAAC;MACnB;MAEA,MAAMwnH,MAAM,GAAGl1H,IAAI,CAACm1H,iBAAiB,CAACr3F,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;;MAEjD,MAAMs3F,SAAS,GAAG,CAAC,CAAC;MACpBA,SAAS,CAACt3F,KAAK,GAAGA,KAAK;MACvBs3F,SAAS,CAACl9F,KAAK,GAAG28F,SAAS;MAC3BO,SAAS,CAACF,MAAM,GAAGA,MAAM,CAACP,UAAU;MACpCS,SAAS,CAACjoH,KAAK,GAAGjQ,IAAI,CAACuM,GAAG,CAAC,CAAC,EAAEyrH,MAAM,CAACN,WAAW,CAAC,CAAC,CAAC;MACnDQ,SAAS,CAAC1uF,IAAI,GAAG,CAAC,CAAC;MACnB0uF,SAAS,CAACC,WAAW,GAAGhB,GAAG;MAE3B,OAAOe,SAAS;IAClB;IAEA,IAAIb,aAAa,CAACe,GAAG,EAAE;MACrBd,OAAO,GAAGD,aAAa,CAACe,GAAG;IAC7B,CAAC,MAAM;MACLd,OAAO,GAAGD,aAAa;IACzB;IACA,MAAMgB,OAAO,GAAG,EAAE;IAClB,MAAMC,YAAY,GAAG,EAAE;IACvB,IAAI,CAACxB,qBAAqB,CAACQ,OAAO,EAAEgB,YAAY,CAAC;IACjD,IAAI,IAAI,CAACzD,oBAAoB,IAAIyD,YAAY,CAACxgI,MAAM,GAAG,CAAC,EAAE;MACxDwgI,YAAY,CAACnqF,MAAM,CAAC,CAAC,EAAEmqF,YAAY,CAACxgI,MAAM,GAAG,CAAC,CAAC;IACjD;IACAwgI,YAAY,CAACnkH,OAAO,CAAEzC,CAAC,IAAK;MAC1B,MAAM6mH,EAAE,GAAGhB,wBAAwB,CAAC7lH,CAAC,CAAC;MACtC,IAAI6mH,EAAE,CAAC33F,KAAK,CAAC9oC,MAAM,GAAG,CAAC,EAAE;QACvBugI,OAAO,CAACp0H,IAAI,CAACs0H,EAAE,CAAC;MAClB;IACF,CAAC,CAAC;IACF,OAAOF,OAAO;EAChB;EAEAG,UAAUA,CAACC,MAAM,EAAEC,KAAK,EAAE;IACxB,MAAMhzB,KAAK,GAAG,EAAE;IAChB,OAAO,CAACgzB,KAAK,IAAIhzB,KAAK,IAAI+yB,MAAM;EAClC;EAEAE,YAAYA,CAAC9gI,CAAC,EAAE;IACd,MAAM6tG,KAAK,GAAG,EAAE;IAChB,MAAM9qE,IAAI,GAAG,CAAC,CAAC,IAAI8qE,KAAK,IAAI,CAAC;IAC7B,OAAO;MAAEgzB,KAAK,EAAE7gI,CAAC,KAAK6tG,KAAK;MAAE+yB,MAAM,EAAE5gI,CAAC,GAAG+iC;IAAK,CAAC;EACjD;EAEAq9F,iBAAiBA,CAACr3F,KAAK,EAAEg4F,KAAK,EAAE;IAC9B,MAAMnB,UAAU,GAAG,IAAIt2H,KAAK,CAACy/B,KAAK,CAAC9oC,MAAM,CAAC;IAE1C,IAAIknB,EAAE;IACN,KAAKA,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGy4G,UAAU,CAAC3/H,MAAM,EAAEknB,EAAE,EAAE,EAAE;MACzCy4G,UAAU,CAACz4G,EAAE,CAAC,GAAG,IAAI,CAACw5G,UAAU,CAAC,CAAC,EAAEI,KAAK,CAAC;IAC5C;IAEA,MAAMC,YAAY,GAAG,EAAE;IACvB,IAAIC,WAAW,GAAG,CAAC;IACnB,IAAIC,YAAY,GAAGn4F,KAAK,CAAC9oC,MAAM;IAE/B,OAAOihI,YAAY,GAAG,CAAC,EAAE;MACvBD,WAAW,EAAE;MAEb,IAAIE,OAAO,GAAG,CAAC,CAAC;MAChB,KAAKh6G,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGy4G,UAAU,CAAC3/H,MAAM,EAAEknB,EAAE,EAAE,EAAE;QACzC,IAAI,IAAI,CAAC25G,YAAY,CAAClB,UAAU,CAACz4G,EAAE,CAAC,CAAC,CAACy5G,MAAM,KAAK,CAAC,EAAE;UAClDO,OAAO,GAAGh6G,EAAE;UACZ;QACF;MACF;MAEA,IAAIg6G,OAAO,GAAG,CAAC,EAAE;QACf;MACF;;MAEA;MACAH,YAAY,CAAC50H,IAAI,CAAC28B,KAAK,CAACo4F,OAAO,CAAC,CAAC;MACjCvB,UAAU,CAACuB,OAAO,CAAC,GAAG,IAAI,CAACR,UAAU,CAACM,WAAW,EAAEF,KAAK,CAAC;MACzDG,YAAY,EAAE;MAEd,OAAOF,YAAY,CAAC/gI,MAAM,GAAG,CAAC,EAAE;QAC9B,MAAM0xC,IAAI,GAAGqvF,YAAY,CAACnzB,KAAK,CAAC,CAAC;QACjC,IAAI,CAACl8D,IAAI,EAAE;UACT;QACF;QAEA,KAAK,IAAI3pC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2pC,IAAI,CAACs9E,KAAK,CAAChvH,MAAM,EAAE+H,CAAC,EAAE,EAAE;UAC1C,IAAI43H,UAAU,CAACjuF,IAAI,CAACs9E,KAAK,CAACjnH,CAAC,CAAC,CAAC,KAAKi5H,WAAW,EAAE;YAC7CD,YAAY,CAAC50H,IAAI,CAAC28B,KAAK,CAAC4I,IAAI,CAACs9E,KAAK,CAACjnH,CAAC,CAAC,CAAC,CAAC;YACvC43H,UAAU,CAACjuF,IAAI,CAACs9E,KAAK,CAACjnH,CAAC,CAAC,CAAC,GAAGi5H,WAAW;YACvCC,YAAY,EAAE;UAChB;QACF;MACF;IACF;IACA,MAAMvB,GAAG,GAAG,CAAC,CAAC;IACdA,GAAG,CAACC,UAAU,GAAGA,UAAU;IAC3BD,GAAG,CAACE,WAAW,GAAGoB,WAAW;IAC7B,OAAOtB,GAAG;EACZ;EAEAyB,UAAUA,CAACC,KAAK,EAAEC,QAAQ,EAAE17F,KAAK,EAAEp9B,IAAI,EAAE;IACvC,IAAI64H,KAAK,IAAI,CAAC,EAAE;MACd,MAAM7mH,CAAC,GAAG,CAACrS,IAAI,CAACuM,GAAG,CAAC2sH,KAAK,EAAEC,QAAQ,CAAC,EAAEn5H,IAAI,CAACsM,GAAG,CAAC4sH,KAAK,EAAEC,QAAQ,CAAC,CAAC;MAChE,IAAI,CAACvwF,QAAQ,CAACoQ,OAAO,CAAC3mC,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEorB,KAAK,EAAEp9B,IAAI,EAAE,IAAI,CAAC;IACtD;EACF;EAEAuwH,cAAcA,CAAA,EAAG;IACf,MAAMpmF,aAAa,GAAG,IAAI,CAAC0lF,cAAc,GAAG,CAAC,CAAC;IAC9C,MAAMztF,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,MAAMhI,KAAK,GAAG6B,OAAO,CAACrB,MAAM;IAC5B,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAE6iF,EAAE,GAAG9hD,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,GAAG6iF,EAAE,EAAE,EAAE7iF,CAAC,EAAE;MAC9C,MAAMksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;MACrB2qC,aAAa,CAACze,IAAI,CAAC0O,MAAM,CAAC,GAAG1O,IAAI;IACnC;IAEA,MAAMiP,KAAK,GAAGyH,OAAO,CAACmR,MAAM;IAC5B,MAAM;MAAEjxB;IAAO,CAAC,GAAG,IAAI;IACvB,KAAK,IAAIlP,CAAC,GAAG,CAAC,EAAE29G,EAAE,GAAGp2F,KAAK,CAACljC,MAAM,EAAE2b,CAAC,GAAG29G,EAAE,EAAE,EAAE39G,CAAC,EAAE;MAC9C,MAAMuY,IAAI,GAAGgP,KAAK,CAACvnB,CAAC,CAAC;MACrB,IAAIuY,IAAI,CAAC4R,MAAM,GAAG5R,IAAI,CAAC2R,KAAK,EAAE;QAC5Bhb,MAAM,CAACpB,KAAK,CAAC,8BAA8B,CAAC;MAC9C;MACAyK,IAAI,CAAC2R,KAAK,GAAG6M,aAAa,CAACxe,IAAI,CAAC2R,KAAK,CAAC,IAAI,IAAI;MAC9C3R,IAAI,CAAC4R,MAAM,GAAG4M,aAAa,CAACxe,IAAI,CAAC4R,MAAM,CAAC,IAAI,IAAI;IAClD;EACF;EAEAw7F,SAASA,CAACC,OAAO,EAAE;IACjB,MAAM52F,OAAO,GAAG,IAAI,CAACmG,QAAQ,GAAG,IAAIugB,iBAAO,CAAC,CAAC;IAC7C,MAAMl/B,IAAI,GAAGovG,OAAO;IACpB,MAAMC,YAAY,GAAGrvG,IAAI,CAACuf,IAAI;IAC9B,MAAM;MAAE5I,KAAK;MAAEo3F;IAAO,CAAC,GAAG/tG,IAAI;IAC9B,IAAI8B,IAAI,GAAG,IAAI;IACf,IAAIlsB,CAAC;IACL,IAAI4T,CAAC;IACL,MAAMxD,KAAK,GAAG2wB,KAAK,CAAC9oC,MAAM;IAE1B,SAASyhI,OAAOA,CAAC10H,CAAC,EAAE;MAClBA,CAAC,CAACyoC,UAAU,GAAGvhB,IAAI;MACnB,IAAIA,IAAI,CAACgqG,EAAE,EAAE;QACXhqG,IAAI,CAACiqG,EAAE,GAAGjqG,IAAI,CAACgqG,EAAE;QACjB,OAAOhqG,IAAI,CAACgqG,EAAE;MAChB;MACA,IAAIhqG,IAAI,CAACkqG,EAAE,EAAE;QACXlqG,IAAI,CAACmqG,EAAE,GAAGnqG,IAAI,CAACkqG,EAAE;QACjB,OAAOlqG,IAAI,CAACkqG,EAAE;MAChB;MACA,IAAI,CAAElqG,IAAI,CAACoqG,EAAG,EAAE;QACdpqG,IAAI,CAACoqG,EAAE,GAAG,KAAK;MACjB;MACApqG,IAAI,CAACytG,WAAW,GAAG30H,CAAC;IACtB;IAEA,IAAIwtC,MAAM,GAAG,CAAC,CAAC;IACf;IACA,MAAMonF,OAAO,GAAG,EAAE;IAClB,KAAK55H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B45H,OAAO,CAACx1H,IAAI,CAACpE,CAAC,CAAC;IACjB;IACA45H,OAAO,CAACjpH,IAAI,CAAC,CAAC3L,CAAC,EAAE6N,CAAC,KAAKslH,MAAM,CAACnzH,CAAC,CAAC,GAAGmzH,MAAM,CAACtlH,CAAC,CAAC,CAAC;IAC7C,KAAK7S,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B,MAAM65H,UAAU,GAAG,CAAC;MACpB,MAAMC,MAAM,GAAG3B,MAAM,CAACyB,OAAO,CAAC55H,CAAC,CAAC,CAAC;MACjC,IAAI,IAAI,CAAC84H,YAAY,CAACgB,MAAM,CAAC,CAACjB,KAAK,KAAK,IAAI,CAACC,YAAY,CAACW,YAAY,CAAC,CAACZ,KAAK,EAAE;QAC7E3sG,IAAI,GAAG6U,KAAK,CAAC64F,OAAO,CAAC55H,CAAC,CAAC,CAAC;QACxB,MAAM+5H,kBAAkB,GAAG7tG,IAAI,CAAC8tG,WAAW;QAE3C,IAAI9tG,IAAI,CAAC4pG,SAAS,EAAE;UAClB,MAAMmE,QAAQ,GAAG/tG,IAAI,CAAC4pG,SAAS,CAAC79H,MAAM;UACtC,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmiI,QAAQ,EAAE,EAAEniI,CAAC,EAAE;YACjC8qC,OAAO,CAACgnB,QAAQ,CAACxlD,IAAI,CAAC8nB,IAAI,CAAC4pG,SAAS,CAACh+H,CAAC,CAAC,CAAC;UAC1C;QACF;QAEA,IAAIo0B,IAAI,CAACiqG,EAAE,IAAIjqG,IAAI,CAACgqG,EAAE,EAAE;UACtB,MAAMgE,YAAY,GAAG,IAAI,CAACpB,YAAY,CAACgB,MAAM,CAAC,CAAClB,MAAM;UACrD;UACA,MAAMnH,OAAO,GAAG,GAAG,CAAC,CAAC;UACrB,MAAMC,MAAM,GAAGwI,YAAY;UAC3B,MAAMxwF,KAAK,GAAG,GAAG;UACjB,IAAIywF,QAAQ,GAAGD,YAAY,CAACj8H,QAAQ,CAAC,CAAC;UACtC,IAAIk8H,QAAQ,CAACliI,MAAM,KAAK,CAAC,EAAE;YACzBkiI,QAAQ,GAAG,IAAIA,QAAQ,EAAE;UAC3B;UACA,MAAM5vE,OAAO,GAAG,IAAI4vE,QAAQ,EAAE;UAC9B,IAAIl5F,KAAK,GAAGuR,MAAM,CAACi/E,OAAO,CAAC;UAC3B,IAAI,CAACxwF,KAAK,IAAIA,KAAK,CAAClF,OAAO,CAAC,CAAC,KAAK01F,OAAO,EAAE;YACzCj/E,MAAM,CAACi/E,OAAO,CAAC,GAAGxwF,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAAC3G,QAAQ,CAACqvF,OAAO,CAAC,IAAI,IAAI,CAAC1oF,QAAQ,CAACiK,QAAQ,CAACy+E,OAAO,CAAC;YAC5F,IAAI,CAAC3iB,QAAQ,GAAG,IAAI;UACtB;UAEA,IAAIr0E,OAAO,GAAG,IAAI,CAACq0E,QAAQ;UAC3B,IAAI,CAACr0E,OAAO,IAAIA,OAAO,CAAC6H,WAAW,CAAC,CAAC,KAAKovF,MAAM,IAAIj3F,OAAO,CAAC+H,QAAQ,CAAC,CAAC,KAAKkH,KAAK,EAAE;YAChF,IAAI,CAAColE,QAAQ,GAAGr0E,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAACsgB,OAAO,EAAEmnE,MAAM,EAAEhoF,KAAK,CAAC;UACpE;;UAEA;UACA,IAAIhH,GAAG,GAAG,IAAI;UACd,IAAIxW,IAAI,CAACiqG,EAAE,EAAE;YACXzzF,GAAG,GAAG,IAAIlC,iGAAa,CAACwuF,UAAU,CAAC9iG,IAAI,CAACiqG,EAAE,CAAC,EAAEnH,UAAU,CAAC9iG,IAAI,CAACmqG,EAAE,CAAC,EAAErH,UAAU,CAAC9iG,IAAI,CAACoqG,EAAE,CAAC,CAAC;UACxF,CAAC,MAAM,IAAIpqG,IAAI,CAACgqG,EAAE,EAAE;YAClBxzF,GAAG,GAAG,IAAIlC,iGAAa,CAACwuF,UAAU,CAAC9iG,IAAI,CAACgqG,EAAE,CAAC,EAAElH,UAAU,CAAC9iG,IAAI,CAACkqG,EAAE,CAAC,EAAE,CAAC,CAAC;UACtE;UACA,IAAIl+G,OAAO,GAAGgkB,iBAAO,CAACe,MAAM,CAAC/Q,IAAI,CAAC8tG,WAAW,CAACr6H,WAAW,CAAC,CAAC,CAAC;UAC5D,IAAI,CAACuY,OAAO,EAAE;YACZA,OAAO,GAAI7V,IAAI,CAACC,KAAK,CAACD,IAAI,CAAC+3H,SAAS,CAACl+F,iBAAO,CAACe,MAAM,CACjDp7B,MAAM,CAACiQ,IAAI,CAACoqB,iBAAO,CAACe,MAAM,CAAC,CAACp7B,MAAM,CAACiQ,IAAI,CAACoqB,iBAAO,CAACe,MAAM,CAAC,CAAChlC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAE;YACzEigB,OAAO,CAACiK,MAAM,IAAI,CAAC;YACnBjK,OAAO,CAACiO,IAAI,GAAG+F,IAAI,CAAC8tG,WAAW,CAACr6H,WAAW,CAAC,CAAC;YAC7CuY,OAAO,CAACikB,QAAQ,GAAG,SAAS;YAC5BD,iBAAO,CAACe,MAAM,CAAC/Q,IAAI,CAAC8tG,WAAW,CAACr6H,WAAW,CAAC,CAAC,CAAC,GAAGuY,OAAO;UAC1D;UACA,MAAMmiH,UAAU,GAAGj4H,QAAQ,CAAC8pB,IAAI,CAAC/M,EAAE,CAAC5X,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;UAC9D,MAAM+yH,KAAK,GAAG7/F,OAAO,CAACgI,OAAO,CAC3Bs3F,kBAAkB,EAClB7hH,OAAO,EACPwqB,GAAG,EACHxG,iBAAO,CAACY,IAAI,CAACC,EAAE,EACf,IAAI,EACJs9F,UAAU,EACV,GAAG,EACH,GAAG,EACH,GAAG,EACHR,UACF,CAAC;UACD,IAAI3tG,IAAI,CAAC8O,aAAa,EAAE;YACtBs/F,KAAK,CAACt/F,aAAa,GAAG54B,QAAQ,CAAC8pB,IAAI,CAAC8O,aAAa,EAAE,EAAE,CAAC;UACxD;UACA,IAAI9O,IAAI,CAACquG,UAAU,EAAE;YACnBD,KAAK,CAACp/F,OAAO,GAAG94B,QAAQ,CAAC8pB,IAAI,CAACquG,UAAU,EAAE,EAAE,CAAC;UAC/C;UACAb,OAAO,CAACY,KAAK,CAAC;QAChB;MACF;IACF;IACA9nF,MAAM,GAAG,IAAI,CAAC;IACd,KAAKxyC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoqB,IAAI,CAAC+Q,KAAK,CAACljC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACtC,MAAMkkF,EAAE,GAAG95D,IAAI,CAAC+Q,KAAK,CAACn7B,CAAC,CAAC;MACxB,IAAI,IAAI,CAAC84H,YAAY,CAACX,MAAM,CAACj0C,EAAE,CAACzlE,KAAK,CAAC,CAAC,CAACo6G,KAAK,KAAK,IAAI,CAACC,YAAY,CAACW,YAAY,CAAC,CAACZ,KAAK,IAChF,IAAI,CAACC,YAAY,CAACX,MAAM,CAACj0C,EAAE,CAACrmE,GAAG,CAAC,CAAC,CAACg7G,KAAK,KAAK,IAAI,CAACC,YAAY,CAACW,YAAY,CAAC,CAACZ,KAAK,EAAE;QACxF3sG,IAAI,GAAG6U,KAAK,CAACmjD,EAAE,CAACzlE,KAAK,CAAC;QACtB,IAAI,CAACyN,IAAI,IAAI,CAAE6U,KAAK,CAACmjD,EAAE,CAACrmE,GAAG,CAAE,EAAE;UAC7B,SAAS,CAAC;QACZ;QACA,IAAI,CAACu7G,UAAU,CACbh3H,QAAQ,CAAC8pB,IAAI,CAAC/M,EAAE,CAAC5X,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAC3CnF,QAAQ,CAAC2+B,KAAK,CAACmjD,EAAE,CAACrmE,GAAG,CAAC,CAACsB,EAAE,CAAC5X,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EACpD28E,EAAE,CAACtmD,KAAK,EACRsmD,EAAE,CAAC1jF,IACL,CAAC;MACH;IACF;IAEA,KAAKR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+oC,QAAQ,CAAC0hB,cAAc,CAAC,CAAC,EAAEzqD,CAAC,EAAE,EAAE;MACnD,MAAMw6H,IAAI,GAAG,IAAI,CAACzxF,QAAQ,CAAC2hB,UAAU,CAAC,CAAC,CAAC1qD,CAAC,CAAC;MAC1C,KAAK4T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4mH,IAAI,CAACj5F,MAAM,CAACtpC,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACvC4mH,IAAI,CAACj5F,MAAM,CAAC3tB,CAAC,CAAC,GAAG4mH,IAAI,CAACj5F,MAAM,CAAC3tB,CAAC,CAAC,CAAC+lH,WAAW;MAC7C;IACF;IACA,KAAK35H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B,IAAI,IAAI,CAAC84H,YAAY,CAACX,MAAM,CAACn4H,CAAC,CAAC,CAAC,CAAC64H,KAAK,KAAK,IAAI,CAACC,YAAY,CAACW,YAAY,CAAC,CAACZ,KAAK,EAAE;QAChF3sG,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;QACfksB,IAAI,CAACytG,WAAW,GAAG,IAAI;QACvB,OAAOztG,IAAI,CAACytG,WAAW;MACzB;IACF;IACA,IAAI,CAAC5wF,QAAQ,CAACuvF,WAAW,GAAGluG,IAAI,CAACkuG,WAAW;IAC5C,IAAI,CAACvH,cAAc,CAAC,CAAC;IACrBnuF,OAAO,CAAC0P,QAAQ,CAAC;MACf0a,eAAe,EAAE,KAAK;MACtBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;IACF,IAAI,CAACA,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACtnF,QAAQ,GAAG,IAAI;IACpB,OAAOnG,OAAO;EAChB;EAEAurF,SAASA,CAAA,EAAG;IACV,MAAM9+D,SAAS,GAAG,EAAE;IACpB,MAAMpsD,IAAI,GAAG,IAAI;IACjB,MAAMw3H,WAAW,GAAG,IAAI,CAACrD,iBAAiB,CAAC,IAAI,CAAC1lE,KAAK,CAAC;IACtD+oE,WAAW,CAACnmH,OAAO,CAAE4iH,MAAM,IAAK;MAC9BA,MAAM,CAACvtF,IAAI,GAAG,CAAC;MACf,IAAIutF,MAAM,CAAC9mH,KAAK,KAAK,CAAC,EAAE;QACtB8mH,MAAM,CAAC9mH,KAAK,GAAG,CAAC;MAClB;MACA,KAAK,IAAIpQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGk3H,MAAM,CAAC9mH,KAAK,EAAEpQ,CAAC,EAAE,EAAE;QACrCk3H,MAAM,CAACvtF,IAAI,GAAI3pC,CAAC,GAAG,CAAE;QACrBqvD,SAAS,CAACjrD,IAAI,CAACnB,IAAI,CAACs2H,SAAS,CAACrC,MAAM,EAAE,KAAK,CAAC,CAAC;MAC/C;IACF,CAAC,CAAC;IAEF,IAAIwD,gBAAgB,GAAG,CAAC;IACxBrrE,SAAS,CAAC/6C,OAAO,CAAE3M,CAAC,IAAK;MACvB+yH,gBAAgB,IAAI/yH,CAAC,CAACm7B,YAAY,CAAC,CAAC;IACtC,CAAC,CAAC;IACF,IAAI43F,gBAAgB,IAAI,CAAC,EAAE;MACzB,MAAM,IAAI33H,KAAK,CAAC,uCAAuC,CAAC;IAC1D;IAEA,IAAIssD,SAAS,CAACp3D,MAAM,GAAG,CAAC,EAAE;MACxB,MAAM0iI,aAAa,GAAG,IAAIrxE,iBAAO,CAAC,CAAC;MACnCqxE,aAAa,CAACvrE,aAAa,CAACC,SAAS,CAAC;MACtCsrE,aAAa,CAACrC,WAAW,GAAGjpE,SAAS,CAAC,CAAC,CAAC,CAACipE,WAAW;MACpD,OAAOqC,aAAa;IACtB;IACA,IAAItrE,SAAS,CAACp3D,MAAM,KAAK,CAAC,EAAE;MAC1B,OAAOo3D,SAAS,CAAC,CAAC,CAAC;IACrB;IACA,OAAO,IAAI/F,iBAAO,CAAC,CAAC;EACtB;AACF;AAEAyrE,SAAS,CAAC/G,OAAO,GAAG,CAAC,KAAK,CAAC;AAC3B+G,SAAS,CAAC/8B,UAAU,GAAG,CAAC,MAAM,CAAC;AAE/B,wDAAe+8B,SAAS;;;;;ACtpBO;AACR;AACO;AACA;AACa;AACkB;AAE7D,MAAM;EACJzrE,OAAO;EACPxgB,KAAK;EACLtO,IAAI;EACJ0B,OAAO;EACPiQ,KAAK;EACLS,KAAK;EACLN,MAAM;EACN5O,IAAI;EACJ6U,QAAQ;EACR+hB,QAAQA,qBAAAA;AACV,CAAC,GAAG8nB,IAAI;AAER,MAAMw+C,eAAe,CAAC;EACpBtvH,WAAWA,CAACuvH,QAAQ,EAAE;IACpB,IAAI,CAACC,SAAS,GAAGx5H,KAAK,CAACwhD,IAAI,CAAC+3E,QAAQ,CAAC;IACrC,IAAI,CAACC,SAAS,CAACnqH,IAAI,CAAC,CAAC;IAErB,IAAI,CAACoqH,IAAI,GAAG,CAAC;IACb,KAAK,IAAI/6H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC86H,SAAS,CAAC7iI,MAAM,EAAE,EAAE+H,CAAC,EAAE;MAC9C,IAAI,CAAC+6H,IAAI,IAAI,IAAI,CAACD,SAAS,CAAC96H,CAAC,CAAC;IAChC;EACF;EAEA68G,OAAOA,CAACme,SAAS,EAAE;IACjB,MAAM51H,GAAG,GAAG41H,SAAS,CAAC/iI,MAAM;IAC5B,IAAImN,GAAG,KAAK,IAAI,CAAC01H,SAAS,CAAC7iI,MAAM,EAAE;MACjC,OAAO,KAAK;IACd;IAEA,IAAIoW,GAAG,GAAG,CAAC;IACX,IAAIrO,CAAC;IACL,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoF,GAAG,EAAE,EAAEpF,CAAC,EAAE;MACxBqO,GAAG,IAAI2sH,SAAS,CAACh7H,CAAC,CAAC;IACrB;IAEA,IAAIqO,GAAG,KAAK,IAAI,CAAC0sH,IAAI,EAAE;MACrB,OAAO,KAAK;IACd;IAEA,MAAME,MAAM,GAAG35H,KAAK,CAACwhD,IAAI,CAACk4E,SAAS,CAAC;IACpCC,MAAM,CAACtqH,IAAI,CAAC,CAAC;IAEb,KAAK3Q,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoF,GAAG,EAAE,EAAEpF,CAAC,EAAE;MACxB,IAAIi7H,MAAM,CAACj7H,CAAC,CAAC,KAAK,IAAI,CAAC86H,SAAS,CAAC96H,CAAC,CAAC,EAAE;QACnC,OAAO,KAAK;MACd;IACF;IAEA,OAAO,IAAI;EACb;AACF;AAEA46H,eAAe,CAAC72H,SAAS,CAACuH,WAAW,GAAGsvH,eAAe;AAEvD,MAAM5uF,gCAAqB,GAAG1B,sBAAiB,CAACW,IAAI;;AAEpD;AACA,MAAMiwF,eAAe,GAAG,CACtBlvF,gCAAqB,CAACV,QAAQ;AAAE;AAChCU,gCAAqB,CAACJ,IAAI;AAAE;AAC5BI,gCAAqB,CAACX,WAAW;AAAE;AACnCW,gCAAqB,CAACd,MAAM;AAAE;AAC9Bc,gCAAqB,CAACZ,SAAS;AAAE;AACjCY,gCAAqB,CAACb,MAAM;AAAE;AAC9Ba,gCAAqB,CAACL,IAAI;AAAE;AAC5BK,gCAAqB,CAACH,IAAI,CAAE;AAAA,CAC7B;AAED,SAASsvF,YAAYA,CAACC,GAAG,EAAE;EACzB,MAAMz0G,KAAK,GAAG,IAAIrV,UAAU,CAAC8pH,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;EACvC,OAAOz0G,KAAK,CAAC,CAAC,CAAC;AACjB;AAEA,MAAM00G,UAAU,SAASnyH,MAAM,CAAC;EAC9BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACsoH,QAAQ,CAACkE,QAAQ,GAAG,MAAM;EACjC;EAEA,OAAO5C,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B;IACA;IACA,OAAO5oB,gHAAe,CAAC4oB,IAAI,CAAC,IAAK,CAAC+wG,YAAY,CAAC/wG,IAAI,CAAC,GAAG,CAAC,MAAM,IAAK;EACrE;EAEAmxG,QAAQA,CAACC,UAAU,EAAE,CACrB;EAEAC,QAAQA,CAACC,SAAS,EAAE;IAClB,IAAIA,SAAS,CAAC5kH,UAAU,KAAK,CAAC,EAAE;MAC9B;IACF;IAEA,MAAMmqB,KAAK,GAAG,IAAI6H,gBAAK,CAAC,IAAI,CAACC,QAAQ,EAAE2yF,SAAS,CAACvkH,SAAS,CAAC;IAC3D,IAAI,CAAC4xB,QAAQ,CAACwc,OAAO,CAACm2E,SAAS,CAACzkH,UAAU,CAAC,GAAGgqB,KAAK;IACnDA,KAAK,CAACrhB,MAAM,GAAG87G,SAAS,CAACzkH,UAAU;EACrC;EAEA0kH,QAAQA,CAACC,SAAS,EAAE;IAClB,IAAIA,SAAS,CAAC9kH,UAAU,KAAK,CAAC,EAAE;MAC9B;IACF;IAEA,IAAI,IAAI,CAAC/V,QAAQ,CAAC2d,GAAG,CAACkU,OAAO,EAAE;MAC7B;MACA,IAAIgpG,SAAS,CAAClkH,SAAS,KAAK,KAAK,IAAIkkH,SAAS,CAAClkH,SAAS,KAAK,KAAK,EAAE;QAClE;MACF;IACF;IAEA,MAAMupB,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAACq2E,SAAS,CAAC3kH,UAAU,CAAC;IACzD,MAAMkqB,KAAK,GAAG,CAACy6F,SAAS,CAAC9jH,OAAO,CAAC7G,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG2qH,SAAS,CAAC9jH,OAAO;IACvE,MAAM2iB,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAAC2xF,SAAS,CAAClkH,SAAS,EAAEkkH,SAAS,CAACpkH,OAAO,EAAE2pB,KAAK,CAAC;IAC/E1G,OAAO,CAAC7a,MAAM,GAAGg8G,SAAS,CAACrkH,UAAU;IAErC,IAAI,CAACskH,mBAAmB,CAAC,IAAI,CAAC9yF,QAAQ,EAAEtO,OAAO,EAAEmhG,SAAS,CAAC;EAC7D;EAEAE,OAAOA,CAACC,QAAQ,EAAE;IAChB,IAAIA,QAAQ,CAACjlH,UAAU,KAAK,CAAC,EAAE;MAC7B;IACF;IAEA,MAAM6B,MAAM,GAAG,CAACojH,QAAQ,CAACpjH,MAAM,CAAC1H,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG8qH,QAAQ,CAACpjH,MAAM;IACpE,MAAMuT,IAAI,GAAG,IAAIsO,eAAI,CACnBuhG,QAAQ,CAACxkH,UAAU;IAAE;IACrBwkH,QAAQ,CAAC3jH,QAAQ,EACjB8jB,kBAAO,CAACkB,SAAS,CAAC2+F,QAAQ,CAAC7jH,OAAO,CAACvY,WAAW,CAAC,CAAC,CAAC,EACjD,IAAI6gC,iGAAa,CAACu7F,QAAQ,CAACxjH,MAAM,EAAEwjH,QAAQ,CAACvjH,MAAM,EAAEujH,QAAQ,CAACtjH,MAAM,CAAC,EACpEyjB,kBAAO,CAACY,IAAI,CAACi/F,QAAQ,CAAC3jH,QAAQ,CAAC,EAC/B,KAAK;IAAE;IACP2jH,QAAQ,CAAC9jH,MAAM,EACfU,MAAM,EACNojH,QAAQ,CAACnjH,SAAS,EAClBmjH,QAAQ,CAACrjH,OAAO,EAChBqjH,QAAQ,CAAC1jH,YACX,CAAC;IAED,IAAI,CAAC0wB,QAAQ,CAACxH,MAAM,CAACw6F,QAAQ,CAAC/jH,SAAS,CAAC,GAAGkU,IAAI;IAC/CA,IAAI,CAACjkB,KAAK,GAAG8zH,QAAQ,CAAC/jH,SAAS;IAE/B,IAAI,CAACq4G,cAAc,CAAC0L,QAAQ,CAAC9jH,MAAM,CAAC,GAAGiU,IAAI;EAC7C;EAEA8vG,OAAOA,CAACC,QAAQ,EAAE;IAChB,MAAMt+F,KAAK,GAAGx9B,IAAI,CAACsM,GAAG,CAACwvH,QAAQ,CAACpjH,UAAU,EAAEojH,QAAQ,CAACnjH,UAAU,CAAC;IAChE,IAAI6kB,KAAK,IAAI,IAAI,CAACoL,QAAQ,CAACxH,MAAM,CAACtpC,MAAM,EAAE;MACxC;IACF;IACA,MAAMsjB,IAAI,GAAGpb,IAAI,CAACuM,GAAG,CAACuvH,QAAQ,CAACpjH,UAAU,EAAEojH,QAAQ,CAACnjH,UAAU,CAAC;IAC/D,IAAI,CAACiwB,QAAQ,CAACoQ,OAAO,CACnB,IAAI,CAACpQ,QAAQ,CAACxH,MAAM,CAAChmB,IAAI,CAAC,EAC1B,IAAI,CAACwtB,QAAQ,CAACxH,MAAM,CAAC5D,KAAK,CAAC,EAC3Bs+F,QAAQ,CAACljH,SAAS,EAClB2kB,eAAI,CAAC6C,QAAQ,CAACjD,OAAO,EACrB,IACF,CAAC;EACH;EAEAu+F,mBAAmBA,CAACj5F,OAAO,EAAEnI,OAAO,EAAEmhG,SAAS,EAAE;IAC/C,MAAMM,YAAY,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAEtC,IAAI,CAAC16H,8GAAa,CAACo6H,SAAS,CAAC,IAAIA,SAAS,CAAC/jH,SAAS,KAAK,IAAI,CAACskH,OAAO,EAAE;MACrE1hG,OAAO,CAAC+G,UAAU,GAAG,IAAI,CAAC46F,SAAS;MACnC,IAAI,IAAI,CAACA,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,CAAC5xF,IAAI,GAAG/P,OAAO;MAC/B;MACA;IACF;IAEA,IAAI,CAACj5B,8GAAa,CAACo6H,SAAS,CAAC,EAAE;MAC7B;MACA,MAAMp7H,IAAI,GAAG06H,eAAe,CAACU,SAAS,CAAC/jH,SAAS,CAAC;MACjD,IAAI,CAACskH,OAAO,GAAGP,SAAS,CAAC/jH,SAAS;MAClC,IAAI,CAACwkH,QAAQ,GAAG5hG,OAAO;MAEvB,IAAI6hG,MAAM,GAAG,IAAI;MACjB,QAAQ,IAAI,CAACH,OAAO;QAClB,KAAK,CAAC,CAAC,CAAC,CAAC;QACT,KAAK,CAAC;UAAE;UACN;QACF,KAAK,CAAC,CAAC,CAAC;QACR,KAAK,CAAC,CAAC,CAAC;QACR,KAAK,CAAC;UAAE;UACNG,MAAM,GAAG,IAAInwF,gBAAK,CAAC+vF,YAAY,CAAC,IAAI,CAACC,OAAO,CAAC,EAAE1hG,OAAO,EAAEA,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;UAC9EmI,OAAO,CAAC4mB,QAAQ,CAACplD,IAAI,CAACk4H,MAAM,CAAC;UAC7B;QACF,KAAK,CAAC;UAAE;YAAE;YACR,MAAM/vF,KAAK,GAAG,IAAIK,gBAAK,CAAC,EAAE,EAAE,CAAC,CAAC;YAC9BhK,OAAO,CAAC6mB,OAAO,CAACrlD,IAAI,CAACmoC,KAAK,CAAC;YAC3B+vF,MAAM,GAAG,IAAIhwF,iBAAM,CAACC,KAAK,EAAE9R,OAAO,EAAEA,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;YAC3D;UACF;QACA;UACE,IAAIj6B,IAAI,KAAKic,SAAS,EAAE;YACtB6/G,MAAM,GAAG,IAAIhyF,sBAAiB,CAAC9pC,IAAI,EAAEi6B,OAAO,EAAEA,OAAO,CAAC;UACxD;UACA;MACJ;MAEA,IAAI,CAAC2hG,SAAS,GAAGE,MAAM;MACvB7hG,OAAO,CAAC+G,UAAU,GAAG86F,MAAM;MAC3B,IAAIA,MAAM,EAAE;QACV15F,OAAO,CAAC8mB,UAAU,CAACtlD,IAAI,CAACk4H,MAAM,CAAC;MACjC;IACF;EACF;EAEAC,gBAAgBA,CAACC,QAAQ,EAAE;IACzB,MAAMr8D,QAAQ,GAAGq8D,QAAQ,CAACrc,UAAU;IACpC,IAAI,CAAChgD,QAAQ,EAAE;MACb;IACF;IAEA,MAAMs8D,cAAc,GAAGD,QAAQ,CAAC5lH,cAAc,CAAC,CAAC,CAAC;IACjD,KAAK,IAAI5W,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmgE,QAAQ,CAACloE,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACxC,MAAMugE,MAAM,GAAGJ,QAAQ,CAACngE,CAAC,CAAC;MAC1B,MAAMwyC,MAAM,GAAG+tB,MAAM,CAACm8D,cAAc;MACpC,IAAInzF,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAI31B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4+B,MAAM,CAACv6C,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACtC,MAAMqD,UAAU,GAAGu7B,MAAM,CAAC5+B,CAAC,CAAC;QAC5B;QACA,IAAIqD,UAAU,IAAIwlH,cAAc,EAAE;UAChC;QACF;QACA,MAAMx7F,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAACtuC,UAAU,CAAC;QAC/CsyB,QAAQ,GAAGA,QAAQ,CAACvnC,MAAM,CAACi/B,KAAK,CAAC+H,SAAS,CAACtlC,KAAK,CAAC,CAAC,CAAC;MACrD;MACA,MAAM4pD,QAAQ,GAAG,IAAIgH,mBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAEw3B,MAAM,CAACo8D,WAAW,EAAE38H,CAAC,GAAG,CAAC,CAAC;MACvEstD,QAAQ,CAAC/jB,QAAQ,GAAGA,QAAQ;MAC5B,IAAI,CAACR,QAAQ,CAAC8gB,UAAU,CAAC7pD,CAAC,CAAC,GAAGstD,QAAQ;IACxC;EACF;;EAEA;EACAsvE,SAASA,CAACJ,QAAQ,EAAE;IAClB,MAAMv5H,IAAI,GAAG,IAAI;;IAEjB;IACA,MAAM;MAAE8mD;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClCghB,QAAQ,CAAC5qC,EAAE,GAAGq9G,QAAQ,CAACK,WAAW;IAClC9yE,QAAQ,CAACsqE,KAAK,GAAG,EAAE;IACnBtqE,QAAQ,CAACsqE,KAAK,CAAC,CAAC,CAAC,GAAGmI,QAAQ,CAACnI,KAAK;IAClCtqE,QAAQ,CAACoqE,IAAI,GAAGqI,QAAQ,CAACM,WAAW;IACpC/yE,QAAQ,CAACgkE,MAAM,GAAG,MAAM;;IAExB;IACA,MAAMgP,cAAc,GAAG;MACrBxmH,OAAOA,CAACymH,SAAS,EAAE;QACjB/5H,IAAI,CAACs4H,QAAQ,CAACyB,SAAS,CAAC;MAC1B,CAAC;MACDxmH,OAAOA,CAACklH,SAAS,EAAE;QACjBz4H,IAAI,CAACw4H,QAAQ,CAACC,SAAS,CAAC;MAC1B,CAAC;MACDjlH,OAAOA,CAACmlH,SAAS,EAAE;QACjB34H,IAAI,CAAC04H,QAAQ,CAACC,SAAS,CAAC;MAC1B,CAAC;MACDllH,MAAMA,CAACqlH,QAAQ,EAAE;QACf94H,IAAI,CAAC64H,OAAO,CAACC,QAAQ,CAAC;MACxB,CAAC;MACDplH,MAAMA,CAACslH,QAAQ,EAAE;QACfh5H,IAAI,CAAC+4H,OAAO,CAACC,QAAQ,CAAC;MACxB;IACF,CAAC;;IAED;IACA,IAAI,CAACE,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAEpB;IACAvrH,uBAAa,CAAC0rH,QAAQ,EAAEO,cAAc,CAAC;IAEvC,IAAI,CAAClB,mBAAmB,CAAC,IAAI,CAAC9yF,QAAQ,CAAC;IACvC,IAAI,CAACwzF,gBAAgB,CAACC,QAAQ,CAAC;EACjC;;EAEA;EACA;EACA;EACA;EACA;EACAS,oBAAoBA,CAAA,EAAG;IACrB,KAAK,IAAIj9H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+oC,QAAQ,CAACxH,MAAM,CAACtpC,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACpD,MAAMksB,IAAI,GAAG,IAAI,CAAC6c,QAAQ,CAACxH,MAAM,CAACvhC,CAAC,CAAC;MACpC,MAAMy6B,OAAO,GAAG,IAAI,CAACsO,QAAQ,CAACC,SAAS,CAAC9c,IAAI,CAACuO,OAAO,CAAC;MACrDvO,IAAI,CAACuO,OAAO,GAAGA,OAAO;MACtBA,OAAO,CAAC8G,MAAM,CAACn9B,IAAI,CAAC8nB,IAAI,CAAC;IAC3B;EACF;EAEAgxG,qBAAqBA,CAAA,EAAG;IACtB,MAAMC,KAAK,GAAG,CAAC,CAAC;IAChB,KAAK,IAAIn9H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+oC,QAAQ,CAACwc,OAAO,CAACttD,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACrD,MAAMihC,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAACvlD,CAAC,CAAC;MACtC,MAAMmmB,IAAI,GAAG8a,KAAK,CAAClF,OAAO,CAAC,CAAC;MAC5B,IAAI,CAACohG,KAAK,CAACn5H,cAAc,CAACmiB,IAAI,CAAC,EAAE;QAC/Bg3G,KAAK,CAACh3G,IAAI,CAAC,GAAG,EAAE;MAClB;MAEAg3G,KAAK,CAACh3G,IAAI,CAAC,CAAC/hB,IAAI,CAAC68B,KAAK,CAACrhB,MAAM,CAAC;IAChC;IAEA,OAAOu9G,KAAK;EACd;;EAEA;EACAC,kBAAkBA,CAACZ,QAAQ,EAAE;IAC3B,IAAIx8H,CAAC;IACL,IAAI4T,CAAC;IACL,IAAI9b,CAAC;IACL,MAAMo3H,UAAU,GAAG,EAAE;IACrB,MAAM;MAAEpsG;IAAO,CAAC,GAAG,IAAI;IAEvB,KAAK9iB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGw8H,QAAQ,CAACa,eAAe,CAACplI,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACpD,MAAMs9H,MAAM,GAAGd,QAAQ,CAACa,eAAe,CAACr9H,CAAC,CAAC;MAC1C,IAAIs9H,MAAM,CAACC,aAAa,CAACtlI,MAAM,KAAK,CAAC,EAAE;QACrC;MACF;MAEA,MAAMu6C,MAAM,GAAG8qF,MAAM,CAACC,aAAa,CAAC,CAAC,CAAC,CAACb,cAAc;MACrD,MAAMc,cAAc,GAAG,IAAI5C,eAAe,CAACpoF,MAAM,CAAC;;MAElD;MACA,MAAMirF,UAAU,GAAG,CAAC,CAAC;MACrB,KAAK7pH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4+B,MAAM,CAACv6C,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAClC6pH,UAAU,CAAC,IAAI,CAAC10F,QAAQ,CAACwc,OAAO,CAAC/S,MAAM,CAAC5+B,CAAC,CAAC,CAAC,CAACmoB,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;MAC5D;;MAEA;MACA,MAAM2hG,SAAS,GAAG,EAAE;MACpB,IAAIv3G,IAAI;MACR,KAAKA,IAAI,IAAIs3G,UAAU,EAAE;QACvB,IAAIA,UAAU,CAACz5H,cAAc,CAACmiB,IAAI,CAAC,EAAE;UACnC;UACA7kB,KAAK,CAACyC,SAAS,CAACK,IAAI,CAAC+B,KAAK,CAACu3H,SAAS,EAAE,IAAI,CAACC,aAAa,CAACx3G,IAAI,CAAC,CAAC;QACjE;MACF;MACA,IAAI,CAACq3G,cAAc,CAAC3gB,OAAO,CAAC6gB,SAAS,CAAC,EAAE;QACtC;QACA56G,MAAM,CAACpB,KAAK,CAAC,sEAAsE,CAAC;MACtF;MAEA,MAAM1c,CAAC,GAAG,IAAIutC,mBAAQ,CAAC,IAAI,CAACxJ,QAAQ,CAAC;;MAErC;MACA,KAAK5iB,IAAI,IAAIs3G,UAAU,EAAE;QACvB,IAAIA,UAAU,CAACz5H,cAAc,CAACmiB,IAAI,CAAC,EAAE;UACnCnhB,CAAC,CAACguC,QAAQ,CAAC7sB,IAAI,CAAC;QAClB;MACF;;MAEA;MACAnhB,CAAC,CAACiuC,SAAS,CAAC,IAAIzS,iGAAa,CAAC,CAAC,CAACmnC,SAAS,CAAC21D,MAAM,CAACC,aAAa,CAAC,CAAC,CAAC,CAACrqF,MAAM,CAAC,CAAC0qF,SAAS,CAAC,CAAC,CAAC;MACtF,KAAKhqH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0pH,MAAM,CAACC,aAAa,CAACtlI,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAChD,MAAMuI,SAAS,GAAGmhH,MAAM,CAACC,aAAa,CAAC3pH,CAAC,CAAC;QAEzC,IAAI,CAAC4pH,cAAc,CAAC3gB,OAAO,CAAC1gG,SAAS,CAACugH,cAAc,CAAC,EAAE;UACrD;UACA;UACA55G,MAAM,CAACpB,KAAK,CAAC,gFAAgF,CAAC;UAC9F;QACF;QAEA,MAAM3T,CAAC,GAAG,IAAIyyB,iGAAa,CAAC,CAAC,CAACmnC,SAAS,CAACxrD,SAAS,CAAC+2B,MAAM,CAAC,CAAC0qF,SAAS,CAAC,CAAC;;QAErE;QACA,KAAK9lI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkN,CAAC,CAACytC,QAAQ,CAACx6C,MAAM,EAAE,EAAEH,CAAC,EAAE;UACtC,IAAIkN,CAAC,CAACytC,QAAQ,CAAC36C,CAAC,CAAC,CAACogE,MAAM,CAACnqD,CAAC,CAAC,EAAE;YAC3B;UACF;QACF;QAEA,IAAIjW,CAAC,KAAKkN,CAAC,CAACytC,QAAQ,CAACx6C,MAAM,EAAE;UAC3B+M,CAAC,CAACiuC,SAAS,CAACllC,CAAC,CAAC;QAChB;MACF;MAEA/I,CAAC,CAACstC,QAAQ,CAAC,CAAC;MACZ48E,UAAU,CAAC9qH,IAAI,CAACY,CAAC,CAAC;IACpB;IAEA,OAAOkqH,UAAU;EACnB;;EAEA;EACA2O,gBAAgBA,CAACrB,QAAQ,EAAE;IACzB,MAAMC,cAAc,GAAGD,QAAQ,CAAC5lH,cAAc,CAAC,CAAC,CAAC;IACjD,KAAK,IAAI5W,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGw8H,QAAQ,CAACrc,UAAU,CAACloH,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACnD,MAAMugE,MAAM,GAAGi8D,QAAQ,CAACrc,UAAU,CAACngH,CAAC,CAAC;MACrC,IAAIugE,MAAM,CAAC//D,IAAI,KAAK,SAAS,EAAE;QAC7B,KAAK,IAAIoT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2sD,MAAM,CAACm8D,cAAc,CAACzkI,MAAM,EAAE,EAAE2b,CAAC,EAAE;UACrD,MAAMqD,UAAU,GAAGspD,MAAM,CAACm8D,cAAc,CAAC9oH,CAAC,CAAC;UAC3C;UACA,IAAIqD,UAAU,IAAIwlH,cAAc,EAAE;YAChC;UACF;UACA,MAAMx7F,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAACtuC,UAAU,CAAC;UAC/C,KAAK,IAAInf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmpC,KAAK,CAAC+H,SAAS,CAAC/wC,MAAM,EAAE,EAAEH,CAAC,EAAE;YAC/C,MAAMutB,GAAG,GAAG4b,KAAK,CAAC+H,SAAS,CAAClxC,CAAC,CAAC;YAC9B,KAAK,IAAIiW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsX,GAAG,CAACkc,MAAM,CAACtpC,MAAM,EAAE,EAAE8V,CAAC,EAAE;cAC1CsX,GAAG,CAACkc,MAAM,CAACxzB,CAAC,CAAC,CAAC4sB,GAAG,GAAG,IAAI;YAC1B;UACF;QACF;MACF;IACF;EACF;;EAEA;EACAmjG,qBAAqBA,CAAA,EAAG;IACtB,IAAI99H,CAAC;IACL,IAAI4T,CAAC;IAEL,MAAMmqH,kBAAkB,GAAG,EAAE;IAC7B,MAAMC,iBAAiB,GAAG,CAAC,CAAC;;IAE5B;IACA,KAAKh+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC+oC,QAAQ,CAACwc,OAAO,CAACttD,MAAM,EAAE,EAAE+H,CAAC,EAAE;MACjD,MAAMihC,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAACvlD,CAAC,CAAC;MACtC,MAAMmmB,IAAI,GAAG8a,KAAK,CAAClF,OAAO,CAAC,CAAC;MAC5B,IAAI,CAACiiG,iBAAiB,CAACh6H,cAAc,CAACmiB,IAAI,CAAC,EAAE;QAC3C;QACA63G,iBAAiB,CAAC73G,IAAI,CAAC,GAAG8a,KAAK;QAC/BA,KAAK,CAACrhB,MAAM,GAAGm+G,kBAAkB,CAAC9lI,MAAM,CAAC,CAAC;QAC1C8lI,kBAAkB,CAAC35H,IAAI,CAAC68B,KAAK,CAAC;QAC9B;MACF;;MAEA;MACA,MAAMg9F,OAAO,GAAGD,iBAAiB,CAAC73G,IAAI,CAAC;MACvC,KAAKvS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqtB,KAAK,CAAC+H,SAAS,CAAC/wC,MAAM,EAAE,EAAE2b,CAAC,EAAE;QAC3C,MAAM6mB,OAAO,GAAGwG,KAAK,CAAC+H,SAAS,CAACp1B,CAAC,CAAC;QAClCqqH,OAAO,CAACj1F,SAAS,CAAC5kC,IAAI,CAACq2B,OAAO,CAAC;QAC/BA,OAAO,CAACqB,MAAM,GAAGmiG,OAAO;MAC1B;IACF;;IAEA;IACA;IACA,IAAI,CAACl1F,QAAQ,CAACwc,OAAO,GAAGw4E,kBAAkB;EAC5C;EAEA5P,SAASA,CAAA,EAAG;IACV,MAAMqO,QAAQ,GAAG1rH,qBAAW,CAAC,IAAI,CAAC4gD,KAAK,CAAC;IAExC,IAAI,CAAC3oB,QAAQ,GAAG,IAAIugB,kBAAO,CAAC,CAAC;IAC7B,IAAI,CAAC+mE,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC;;IAE1B,IAAI,CAACuM,SAAS,CAACJ,QAAQ,CAAC;IACxB,IAAI,CAACS,oBAAoB,CAAC,CAAC;IAC3B,IAAI,CAACY,gBAAgB,CAACrB,QAAQ,CAAC;IAC/B,IAAI,CAACmB,aAAa,GAAG,IAAI,CAACT,qBAAqB,CAAC,CAAC;IACjD57H,KAAK,CAACyC,SAAS,CAACK,IAAI,CAAC+B,KAAK,CAAC,IAAI,CAAC4iC,QAAQ,CAACkhB,KAAK,EAAE,IAAI,CAACmzE,kBAAkB,CAACZ,QAAQ,CAAC,CAAC;IAClF,IAAI,CAACsB,qBAAqB,CAAC,CAAC;IAE5B,IAAI,CAAC/0F,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,KAAK;MACtBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;IAEF,OAAO,IAAI,CAACtnF,QAAQ;EACtB;AACF;AAEAsyF,UAAU,CAACrN,OAAO,GAAG,CAAC,MAAM,CAAC;AAC7BqN,UAAU,CAACrjC,UAAU,GAAG,CAAC,OAAO,CAAC;AACjCqjC,UAAU,CAACz0G,MAAM,GAAG,IAAI;AAExB,yDAAey0G,UAAU;;AC/dzB,MAAM6C,YAAY,SAASn7H,KAAK,CAAC;EAC/BuI,WAAWA,CAACmX,OAAO,EAAE7c,IAAI,EAAEu4H,MAAM,EAAE;IACjC,KAAK,CAAC,QAAQv4H,IAAI,IAAIu4H,MAAM,KAAK17G,OAAO,EAAE,CAAC;IAE3C,IAAI1f,KAAK,CAACq7H,iBAAiB,EAAE;MAC3Br7H,KAAK,CAACq7H,iBAAiB,CAAC,IAAI,EAAEF,YAAY,CAAC;IAC7C;IAEA,IAAI,CAAC/3G,IAAI,GAAG,cAAc;IAC1B,IAAI,CAACk4G,SAAS,GAAGz4H,IAAI;IACrB,IAAI,CAAC04H,WAAW,GAAGH,MAAM;EAC3B;AACF;AAEA,2DAAeD,YAAY;;ACdJ;AACmB;;AAE1C;;AAEA,SAASK,aAAaA,CAAC53H,EAAE,EAAE;EACzB,OAAOA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,EAAE,IAAIA,EAAE,KAAK,CAAC;AACxD;AAEA,SAAS63H,cAAcA,CAACC,GAAG,EAAE97H,GAAG,EAAEga,GAAG,EAAE;EACrC,MAAMvX,GAAG,GAAGzC,GAAG,CAAC1K,MAAM;EACtB,IAAI0O,EAAE,GAAG,CAAC,CAAC;EACX,OAAOgW,GAAG,GAAGvX,GAAG,EAAE;IAChBuB,EAAE,GAAGhE,GAAG,CAACsO,UAAU,CAAC0L,GAAG,CAAC;IACxB,IAAIhW,EAAE,KAAK83H,GAAG,IAAI93H,EAAE,KAAK,EAAE,EAAE;MAC3B;IACF;IACA,EAAEgW,GAAG;EACP;EACA,OAAOhW,EAAE,KAAK83H,GAAG,GAAG9hH,GAAG,GAAG,CAAC,CAAC;AAC9B;AAEe,SAAS+hH,OAAOA,CAACt/D,MAAM,EAAE;EACtC,IAAIp/D,CAAC,GAAG,CAAC;EACT,IAAI4T,CAAC,GAAG,CAAC;EACT,MAAM3T,CAAC,GAAGm/D,MAAM,CAACnnE,MAAM;EACvB,IAAImrB,IAAI,GAAGggG,GAAG;EACd,IAAIub,OAAO,GAAG,IAAI;EAClB,IAAI/4H,IAAI,GAAG,CAAC;EACZ,IAAIu4H,MAAM,GAAG,CAAC;EACd,IAAI91H,KAAK;EACT,IAAIvD,KAAK,GAAG,CAAC,CAAC,CAAC;EACf,MAAMgf,MAAM,GAAG,CAAC,CAAC;EACjB,IAAI86G,KAAK,GAAG,CAAC,CAAC;EACd,IAAI9sH,IAAI,GAAG,EAAE;EACb,IAAI+sH,SAAS,GAAG,CAAC;EACjB,IAAIl9H,GAAG,GAAG,EAAE;EACZ,IAAI0f,MAAM,GAAG,EAAE;EACf,IAAIy9G,WAAW,GAAG,CAAC;EACnB,IAAIr+G,KAAK;EAET,SAASs+G,WAAWA,CAAA,EAAG;IACrB,IAAIn9H,GAAG;IACP,IAAI,CAACwhB,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,EAAE,MAAMpjB,CAAC,GAAG,CAAC,IAAIC,CAAC,IAAIs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAACjR,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;MAAE;MAC7F;MACA,EAAEm+H,MAAM;MACR,EAAEn+H,CAAC;MACH,OAAOyc,SAAS;IAClB;IACA,IAAIkiH,OAAO,IAAIv7G,IAAI,KAAK,EAAE,EAAE;MAAE;MAC5B;MACAxP,CAAC,GAAG5T,CAAC;MACL,IAAI4G,KAAK,GAAG,CAAC;MACb,GAAG;QACDgN,CAAC,GAAG4qH,cAAc,CAAC,EAAE,EAAEp/D,MAAM,EAAExrD,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACvC,IAAIA,CAAC,KAAK,CAAC,CAAC,EAAE;UACZ,MAAM,IAAIsqH,oBAAY,CAAC,+BAA+B,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;QACvE;QACA,EAAEv3H,KAAK;MACT,CAAC,QAASgN,CAAC,GAAG,CAAC,GAAG3T,CAAC,IAAIm/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,GAAG,CAAC,CAAC,KAAKwP,IAAI,IAAKxP,CAAC,GAAG,CAAC,IAAI3T,CAAC;MACvE2B,GAAG,GAAGw9D,MAAM,CAACv7C,SAAS,CAAC7jB,CAAC,GAAG,CAAC,EAAE4T,CAAC,CAAC,CAACrM,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;MACnDvH,CAAC,GAAG4T,CAAC,GAAG,CAAC;MACThO,IAAI,IAAIgB,KAAK;MACbu3H,MAAM,GAAG,CAAC;MACVQ,OAAO,GAAG,KAAK;MACf,OAAO/8H,GAAG;IACZ;IACA,IAAIwhB,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,EAAE,EAAE;MAAE;MAChC;MACAxP,CAAC,GAAG5T,CAAC;MACL,GAAG;QACD4T,CAAC,GAAG4qH,cAAc,CAACp7G,IAAI,EAAEg8C,MAAM,EAAExrD,CAAC,GAAG,CAAC,CAAC;QACvC,IAAIA,CAAC,KAAK,CAAC,CAAC,EAAE;UACZ,MAAM,IAAIsqH,oBAAY,CAAC,kCAAkC,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;QAC1E;MACF,CAAC,QAAQvqH,CAAC,GAAG,CAAC,GAAG3T,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,GAAG,CAAC,CAAC,CAAC;MAC9DhS,GAAG,GAAGw9D,MAAM,CAACv7C,SAAS,CAAC7jB,CAAC,GAAG,CAAC,EAAE4T,CAAC,CAAC;MAChCuqH,MAAM,IAAIvqH,CAAC,GAAG5T,CAAC,GAAG,CAAC;MACnBA,CAAC,GAAG4T,CAAC,GAAG,CAAC;MACT,OAAOhS,GAAG;IACZ,CAAC,CAAC;IACF;IACAgS,CAAC,GAAG5T,CAAC;IACL,OAAO4T,CAAC,GAAG3T,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,CAAC,CAAC,EAAE;MACpD,EAAEA,CAAC;IACL;IACAhS,GAAG,GAAGw9D,MAAM,CAACv7C,SAAS,CAAC7jB,CAAC,EAAE4T,CAAC,CAAC;IAC5BuqH,MAAM,IAAIvqH,CAAC,GAAG5T,CAAC;IACfA,CAAC,GAAG4T,CAAC;IACL;IACA,MAAMm5E,GAAG,GAAGttF,MAAM,CAACmC,GAAG,CAAC;IACvB,IAAI,CAACnC,MAAM,CAACyP,KAAK,CAAC69E,GAAG,CAAC,EAAE;MACtB,OAAOA,GAAG;IACZ;IACA;IACA,OAAOnrF,GAAG;EACZ;EAEA,SAASo9H,SAASA,CAAC9/G,GAAG,EAAE;IACtBpN,IAAI,CAAC+sH,SAAS,EAAE,CAAC,GAAG3/G,GAAG;EACzB;EAEA,SAAS+/G,WAAWA,CAACr9H,GAAG,EAAE;IACxB,MAAMs9H,QAAQ,GAAGJ,WAAW,GAAGD,SAAS;IACxCx9G,MAAM,CAAC69G,QAAQ,CAAC,CAAC96H,IAAI,CAACxC,GAAG,CAAC;IAC1B,EAAEk9H,WAAW;IACb,OAAOl9H,GAAG;EACZ;EAEA,OAAO5B,CAAC,IAAIC,CAAC,EAAE;IACbmjB,IAAI,GAAGg8C,MAAM,CAACnuD,UAAU,CAACjR,CAAC,CAAC,CAAC,CAAC;IAC7B,IAAIojB,IAAI,KAAK,EAAE,EAAE,CAAE;MACjB;IAAA,CACD,MAAM,IAAIA,IAAI,KAAK,EAAE,EAAE;MAAE;MACxB;MACAu7G,OAAO,GAAG,IAAI;MACd,EAAE/4H,IAAI;MACNu4H,MAAM,GAAG,CAAC;IACZ,CAAC,MAAM;MACL;MACA,IAAI/6G,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,CAAC,EAAE,CAAE;QAC/B;MAAA,CACD,MAAM,IAAIA,IAAI,KAAK,EAAE,EAAE;QAAE;QACxB;QACApjB,CAAC,GAAGw+H,cAAc,CAAC,EAAE,EAAEp/D,MAAM,EAAEp/D,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACvC,IAAIA,CAAC,KAAK,CAAC,CAAC,EAAE;UACZ;QACF,CAAC,MAAM;UACL,SAAS,CAAC;QACZ;MACF,CAAC,MAAM,IAAI8E,KAAK,KAAK,CAAC,EAAE;QAAE;QACxB,IAAI,CAACse,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,GAAG,KAAKg8C,MAAM,CAACr4D,MAAM,CAAC/G,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACZ,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;UAAE;UACvFwU,CAAC,GAAG5T,CAAC,GAAG,CAAC;UACTqI,KAAK,GAAGuL,CAAC;UACT,OAAOA,CAAC,GAAG3T,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,CAAC,CAAC,EAAE;YACpD,EAAEA,CAAC;UACL;UACAuqH,MAAM,IAAIvqH,CAAC,GAAG5T,CAAC;UACfA,CAAC,GAAG4T,CAAC;UACL,IAAIvL,KAAK,GAAGrI,CAAC,EAAE;YACb;YACA8jB,MAAM,CAACs7C,MAAM,CAACv7C,SAAS,CAACxb,KAAK,EAAErI,CAAC,CAAC,CAAC,GAAG4+H,KAAK,GAAG,CAAC,CAAC;YAC/C95H,KAAK,GAAG,CAAC,CAAC,CAAC;YACX,SAAS,CAAC;UACZ,CAAC,MAAM;YACL,MAAM,IAAIo5H,oBAAY,CAAC,yBAAyB,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;UACjE;QACF,CAAC,MAAM,IAAI1+H,MAAM,CAACyP,KAAK,CAACkU,IAAI,CAAC,EAAE;UAAE;UAC/B;QACF,CAAC,MAAM;UAAE;UACP,MAAM,IAAI86G,oBAAY,CAAC,iCAAiCp5H,KAAK,EAAE,EAAEc,IAAI,EAAEu4H,MAAM,CAAC;QAChF;MACF,CAAC,MAAM,IAAIr5H,KAAK,KAAK,CAAC,EAAE;QAAE;QACxB,IAAI,CAACse,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,GAAG,KAAKg8C,MAAM,CAACr4D,MAAM,CAAC/G,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACZ,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;UAAE;UACvF0F,KAAK,GAAG,CAAC,CAAC,CAAC;UACX,SAAS,CAAC;QACZ,CAAC,MAAM,IAAIse,IAAI,KAAK,EAAE,EAAE;UAAE;UACxBxP,CAAC,GAAG5T,CAAC,GAAG,CAAC;UACTqI,KAAK,GAAGuL,CAAC;UACT,OAAOA,CAAC,GAAG3T,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,CAAC,CAAC,EAAE;YACpD,EAAEA,CAAC;UACL;UACAuqH,MAAM,IAAIvqH,CAAC,GAAG5T,CAAC;UACfA,CAAC,GAAG4T,CAAC;UACL,IAAIvL,KAAK,GAAGrI,CAAC,EAAE;YACb;YACA2B,GAAG,GAAGy9D,MAAM,CAACv7C,SAAS,CAACxb,KAAK,EAAErI,CAAC,CAAC;YAChC8E,KAAK,GAAG,CAAC,CAAC,CAAC;YACX,SAAS,CAAC;UACZ,CAAC,MAAM;YACL,MAAM,IAAIo5H,oBAAY,CAAC,kBAAkB,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;UAC1D;QACF,CAAC,MAAM,IAAI,CAAC/6G,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,GAAG,KAAKg8C,MAAM,CAACr4D,MAAM,CAAC/G,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACZ,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;UAAE;UAC9FY,CAAC,IAAI,CAAC;UACNm+H,MAAM,IAAI,CAAC;UACX,IAAIn+H,CAAC,GAAGC,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAACjR,CAAC,CAAC,CAAC,EAAE;YACjD,MAAM,IAAIk+H,oBAAY,CAAC,iCAAiCp5H,KAAK,EAAE,EAAEc,IAAI,EAAEu4H,MAAM,CAAC;UAChF,CAAC,MAAM;YACL;YACArsH,IAAI,GAAG,EAAE;YACT+sH,SAAS,GAAG,CAAC;YACbx9G,MAAM,GAAG,EAAE;YACXy9G,WAAW,GAAG,CAAC;YACfh6H,KAAK,GAAG,CAAC,CAAC,CAAC;YACX,SAAS,CAAC;UACZ;QACF,CAAC,MAAM,IAAIrF,MAAM,CAACyP,KAAK,CAACkU,IAAI,CAAC,EAAE;UAAE;UAC/B;QACF,CAAC,MAAM;UAAE;UACP,MAAM,IAAI86G,oBAAY,CAAC,iCAAiCp5H,KAAK,EAAE,EAAEc,IAAI,EAAEu4H,MAAM,CAAC;QAChF;MACF,CAAC,MAAM,IAAIr5H,KAAK,KAAK,CAAC,EAAE;QAAE;QACxB,IAAIrF,MAAM,CAACyP,KAAK,CAACkU,IAAI,CAAC,EAAE;UACtB;QACF;QACA3C,KAAK,GAAGs+G,WAAW,CAAC,CAAC;QACrBv9H,sGAAK,CAACo9H,KAAK,EAAEj9H,GAAG,EAAE8e,KAAK,CAAC;QACxB3b,KAAK,GAAG,CAAC,CAAC,CAAC;QACX;MACF,CAAC,MAAM,IAAIA,KAAK,KAAK,CAAC,EAAE;QAAE;QACxB,IAAIse,IAAI,KAAK,EAAE,EAAE;UAAE;UACjBxP,CAAC,GAAG5T,CAAC,GAAG,CAAC;UACTqI,KAAK,GAAGuL,CAAC;UACT,OAAOA,CAAC,GAAG3T,CAAC,IAAI,CAACs+H,aAAa,CAACn/D,MAAM,CAACnuD,UAAU,CAAC2C,CAAC,CAAC,CAAC,EAAE;YACpD,EAAEA,CAAC;UACL;UACAuqH,MAAM,IAAIvqH,CAAC,GAAG5T,CAAC;UACfA,CAAC,GAAG4T,CAAC;UACL,IAAIvL,KAAK,GAAGrI,CAAC,EAAE;YACb;YACAg/H,SAAS,CAAC5/D,MAAM,CAACv7C,SAAS,CAACxb,KAAK,EAAErI,CAAC,CAAC,CAAC;YACrC,SAAS,CAAC;UACZ,CAAC,MAAM;YACL,MAAM,IAAIk+H,oBAAY,CAAC,kBAAkB,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;UAC1D;QACF,CAAC,MAAM;UAAE;UACP,IAAIU,SAAS,GAAG,CAAC,EAAE;YACjB,KAAK,IAAIK,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAGL,SAAS,EAAE,EAAEK,QAAQ,EAAE;cACvDz+G,KAAK,GAAG,EAAE;cACVY,MAAM,CAAC69G,QAAQ,CAAC,GAAGz+G,KAAK;cACxBjf,sGAAK,CAACo9H,KAAK,EAAE9sH,IAAI,CAACotH,QAAQ,CAAC,EAAEz+G,KAAK,CAAC;YACrC;YACA3b,KAAK,GAAG,CAAC;YACT,SAAS,CAAC;UACZ;UACA,MAAM,IAAIo5H,oBAAY,CAAC,qCAAqC,EAAEt4H,IAAI,EAAEu4H,MAAM,CAAC;QAC7E;MACF,CAAC,MAAM,IAAIr5H,KAAK,KAAK,CAAC,EAAE;QAAE;QACxB,IAAI,CAACse,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,GAAG,KAAKg8C,MAAM,CAACr4D,MAAM,CAAC/G,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACZ,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;UAAE;UACvF0F,KAAK,GAAG,CAAC,CAAC,CAAC;QACb,CAAC,MAAM,IAAIse,IAAI,KAAK,EAAE,EAAE;UAAE;UACxBte,KAAK,GAAG,CAAC,CAAC,CAAC;QACb,CAAC,MAAM,IAAI,CAACse,IAAI,KAAK,EAAE,IAAIA,IAAI,KAAK,GAAG,KAAKg8C,MAAM,CAACr4D,MAAM,CAAC/G,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAACZ,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;UAAE;UAC9F0F,KAAK,GAAG,CAAC,CAAC,CAAC;QACb,CAAC,MAAM,IAAIrF,MAAM,CAACyP,KAAK,CAACkU,IAAI,CAAC,EAAE;UAAE;UAC/Bte,KAAK,GAAG,CAAC;QACX,CAAC,MAAM;UAAE;UACPm6H,WAAW,CAACF,WAAW,CAAC,CAAC,CAAC;QAC5B;QACA,SAAS,CAAC;MACZ,CAAC,MAAM;QAAE;QACP,MAAM,IAAIb,oBAAY,CAAC,6BAA6Bp5H,KAAK,EAAE,EAAEc,IAAI,EAAEu4H,MAAM,CAAC;MAC5E;MAEAQ,OAAO,GAAG,KAAK;MACf,EAAER,MAAM;IACV;IACA,EAAEn+H,CAAC;EACL;EAEA,IAAI8E,KAAK,KAAK,CAAC,EAAE;IAAE;IACjB,MAAM,IAAIo5H,oBAAY,CAAC,mCAAmCp5H,KAAK,EAAE,EAAEc,IAAI,EAAEu4H,MAAM,CAAC;EAClF;EAEA,OAAOr6G,MAAM;AACf;;AC/P+B;AACR;AACO;AACA;AAC+B;AAC7B;AAEhC,MAAM;EACJwlC,OAAO;EACPptB,OAAO;EACPiQ,KAAK;EACLS,KAAK;EACLN,MAAM;EACNiG,QAAQ;EACR+hB,QAAQA,oBAAAA;AACV,CAAC,GAAG8nB,IAAI;AAER,MAAM+iD,mBAAmB,GAAG,CAC1B,aAAa,EACb,SAAS,EACT,SAAS,EACT,SAAS,EACT,eAAe,CAChB;AAED,MAAMC,gBAAgB,GAAG;EACvBC,IAAI,EAAE,OAAO;EACbC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE;AACR,CAAC;AAED,SAASC,aAAaA,CAACxpG,MAAM,EAAE;EAC7B,MAAMypG,MAAM,GAAG,WAAW,CAAC17G,IAAI,CAACiS,MAAM,CAAC;EACvC,IAAI,CAACypG,MAAM,EAAE;IACX,OAAO,IAAI;EACb;EAEA,OAAOL,gBAAgB,CAACK,MAAM,CAAC,CAAC,CAAC,CAACrgI,WAAW,CAAC,CAAC,CAAC;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA,SAASsgI,MAAMA,CAACC,eAAe,EAAE;EAC/B,IAAIA,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAKljH,SAAS,IAAIjb,0GAAS,CAACm+H,eAAe,CAAC,EAAE;IAC3F,OAAOA,eAAe;EACxB;EACA,OAAO,CAACA,eAAe,CAAC;AAC1B;AAEA,SAAS3P,uBAAaA,CAAC7pG,IAAI,EAAE;EAC3B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAM8pG,QAAQ,GAAG9pG,IAAI,CAACoU,IAAI,CAAC,CAAC,CAACtiC,MAAM,KAAK,CAAC;EACzC,OAAOkuB,IAAI,CAACziB,KAAK,CAAC,CAAC,EAAEusH,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC11F,IAAI,CAAC,CAAC;AAC/C;AAEA,MAAMqlG,aAAa,SAAS78H,KAAK,CAAC;EAChCuI,WAAWA,CAACmX,OAAO,EAAE;IACnB,KAAK,CAAC,CAAC;IACP,IAAI,CAAC0D,IAAI,GAAG,eAAe;IAC3B,IAAI,CAAC1D,OAAO,GAAGA,OAAO;EACxB;AACF;AAEA,SAASo9G,cAAcA,CAACC,QAAQ,EAAE;EAChC,IAAI,CAACA,QAAQ,EAAE;IACb,OAAO,IAAI;EACb;EACA,MAAMv3B,GAAG,GAAGm3B,MAAM,CAACI,QAAQ,CAAC3gH,EAAE,CAAC;EAC/B,MAAM;IAAE+zB,MAAM;IAAE6sF;EAAO,CAAC,GAAGD,QAAQ;EACnC,IAAI,CAACv3B,GAAG,IAAI,CAACr1D,MAAM,IAAI,CAAC6sF,MAAM,EAAE;IAC9B,OAAO,IAAI;EACb;EAEA,MAAMC,GAAG,GAAG,EAAE;EACd,KAAK,IAAIhgI,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGsoG,GAAG,CAACtwG,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;IAC1C,MAAM6tE,GAAG,GAAG,IAAIrtC,iGAAa,CAAC,CAAC;IAC/B,MAAM;MAAE43B;IAAS,CAAC,GAAGyV,GAAG;IAExB,KAAK,IAAIp/D,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAE,EAAEA,GAAG,EAAE;MAChC,MAAMqgH,UAAU,GAAG57E,MAAM,CAACzkC,GAAG,GAAG,CAAC,CAAC;MAClC2pD,QAAQ,CAAC3pD,GAAG,CAAC,GAAGixH,MAAM,CAAC5Q,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC9uH,CAAC,CAAC;MACxCo4D,QAAQ,CAAC3pD,GAAG,GAAG,CAAC,CAAC,GAAGixH,MAAM,CAAC5Q,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC9uH,CAAC,CAAC;MAC5Co4D,QAAQ,CAAC3pD,GAAG,GAAG,CAAC,CAAC,GAAGixH,MAAM,CAAC5Q,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC9uH,CAAC,CAAC;MAC5Co4D,QAAQ,CAAC3pD,GAAG,GAAG,EAAE,CAAC,GAAGixH,MAAM,CAACK,MAAM,CAACtxH,GAAG,GAAG,CAAC,CAAC,CAAC,CAACzO,CAAC,CAAC;IACjD;IACAggI,GAAG,CAACz3B,GAAG,CAACvoG,CAAC,CAAC,CAAC,GAAG6tE,GAAG;EACnB;EACA,OAAOmyD,GAAG;AACZ;AAEA,SAASC,kBAAkBA,CAACC,WAAW,EAAEC,OAAO,EAAE;EAChDD,WAAW,GAAG1+H,2GAAU,CAAC0+H,WAAW,CAAC,GAAGA,WAAW,GAAG,GAAGA,WAAW,EAAE;EACtE,MAAMloI,CAAC,GAAGkoI,WAAW,CAAC34H,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;EACpE,MAAM64H,QAAQ,GAAGpoI,CAAC,CAAC8O,KAAK,CAAC,GAAG,CAAC;EAC7B,MAAMu5H,GAAG,GAAG,EAAE;EAEd,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEC,OAAO,GAAGH,QAAQ,CAACnoI,MAAM,EAAEqoI,KAAK,GAAGC,OAAO,EAAE,EAAED,KAAK,EAAE;IACvE,MAAME,EAAE,GAAGJ,QAAQ,CAACE,KAAK,CAAC,CAACx5H,KAAK,CAAC,GAAG,CAAC;IACrC,MAAM25H,EAAE,GAAG,EAAE;IACb,IAAI9jH,GAAG,GAAG,CAAC;IACX,KAAK,IAAI3c,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGugI,EAAE,CAACvoI,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MACzC,MAAMqP,CAAC,GAAGmxH,EAAE,CAACxgI,CAAC,CAAC;MACf,IAAIqP,CAAC,CAAC6+B,QAAQ,CAAC,GAAG,CAAC,EAAE;QACnB,MAAMwyF,EAAE,GAAGrxH,CAAC,CAACvI,KAAK,CAAC,GAAG,CAAC;QACvB,IAAI8M,CAAC,GAAGxR,QAAQ,CAACs+H,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;QAC3B,MAAM3yH,CAAC,GAAG3L,QAAQ,CAACs+H,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;QAC7B,OAAO9sH,CAAC,IAAI7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;UAClB6sH,EAAE,CAAC9jH,GAAG,EAAE,CAAC,GAAGwjH,OAAO,CAACvsH,CAAC,CAAC;QACxB;MACF,CAAC,MAAM;QACL6sH,EAAE,CAAC9jH,GAAG,EAAE,CAAC,GAAGwjH,OAAO,CAAC9wH,CAAC,CAAC;MACxB;IACF;IACAgxH,GAAG,CAACj8H,IAAI,CAACq8H,EAAE,CAAC;EACd;;EAEA;EACA,MAAMhuF,QAAQ,GAAG,EAAE;EACnB,IAAIkuF,GAAG,GAAG,CAAC;EACX,SAAS3mH,QAAQA,CAACuI,KAAK,EAAEsrD,GAAG,EAAE;IAC5B,KAAK,IAAI+yD,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGR,GAAG,CAAC99G,KAAK,CAAC,CAACtqB,MAAM,EAAE2oI,EAAE,GAAGC,EAAE,EAAE,EAAED,EAAE,EAAE;MACtD,MAAME,MAAM,GAAGjzD,GAAG,GAAGA,GAAG,CAACzuC,KAAK,CAAC,CAAC,GAAG,IAAIoB,iGAAa,CAAC,CAAC;MACtDsgG,MAAM,CAACjmC,gBAAgB,CAACwlC,GAAG,CAAC99G,KAAK,CAAC,CAACq+G,EAAE,CAAC,EAAEE,MAAM,CAAC;MAC/C,IAAIv+G,KAAK,KAAK,CAAC,EAAE;QACfkwB,QAAQ,CAACkuF,GAAG,EAAE,CAAC,GAAGG,MAAM;MAC1B,CAAC,MAAM;QACL9mH,QAAQ,CAACuI,KAAK,GAAG,CAAC,EAAEu+G,MAAM,CAAC;MAC7B;IACF;EACF;EACA9mH,QAAQ,CAACqmH,GAAG,CAACpoI,MAAM,GAAG,CAAC,CAAC;EACxB,OAAOw6C,QAAQ;AACjB;AAEA,MAAMsuF,SAAS,SAAS73H,MAAM,CAAC;EAC7BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAAC08H,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAAC91E,SAAS,GAAG,EAAE;IACnB,IAAI,CAAC0hE,QAAQ,CAACkE,QAAQ,GAAG,KAAK;EAChC;EAEA,OAAO5C,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAI,YAAY,CAACa,IAAI,CAACb,IAAI,CAAC;EACpD;EAEA+jG,SAASA,CAAA,EAAG;IACV,IAAI,CAACrrG,MAAM,CAACnB,IAAI,CAAC,oBAAoB,CAAC;IACtC,MAAMyI,IAAI,GAAGs0G,OAAO,CAAC,IAAI,CAAChtE,KAAK,CAAC;IAChC,OAAO,IAAI,CAACuvE,UAAU,CAAC72G,IAAI,CAAC;EAC9B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE62G,UAAUA,CAACC,OAAO,EAAE;IAClB,MAAMt+F,OAAO,GAAG,IAAI0mB,iBAAO,CAAC,CAAC;IAC7B,MAAM63E,WAAW,GAAGD,OAAO,CAACr/H,MAAM,CAACiQ,IAAI,CAACovH,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IACpD,IAAI,CAACE,aAAa,CAACx+F,OAAO,EAAEu+F,WAAW,CAAC;IACxC,IAAI,CAACE,iBAAiB,CAACz+F,OAAO,EAAEu+F,WAAW,CAAC;IAC5C,IAAI,CAACG,kBAAkB,CAAC1+F,OAAO,EAAEu+F,WAAW,CAAC;IAC7C,IAAI,CAACI,iBAAiB,CAAC3+F,OAAO,EAAEu+F,WAAW,CAAC;IAC5C,IAAI,CAACK,gBAAgB,CAAC5+F,OAAO,EAAEu+F,WAAW,CAAC;IAC3Cv+F,OAAO,CAAC0P,QAAQ,CAAC;MACf0a,eAAe,EAAE,IAAI;MACrBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV;IACnC,CAAC,CAAC;IAEF,OAAOkP,OAAO;EAChB;;EAEA;AACF;AACA;AACA;AACA;AACA;;EAEE4+F,gBAAgBA,CAAC5+F,OAAO,EAAEu+F,WAAW,EAAE;IACrC,MAAM;MAAEp3E;IAAS,CAAC,GAAGnnB,OAAO;IAC5BmnB,QAAQ,CAAC5qC,EAAE,GAAGgiH,WAAW,CAAC5oG,KAAK,CAACpZ,EAAE;IAClC4qC,QAAQ,CAACmqE,cAAc,GAAGiN,WAAW,CAACM,eAAe,CAACC,aAAa;IACnE,MAAMC,WAAW,GAAGR,WAAW,CAACS,gBAAgB;IAChD73E,QAAQ,CAACoqE,IAAI,GAAIwN,WAAW,IAAIA,WAAW,CAACE,aAAa,GAAIF,WAAW,CAACE,aAAa,GAAG,EAAE;IAC3F93E,QAAQ,CAACgkE,MAAM,GAAG,KAAK;IACvBhkE,QAAQ,CAACsqE,KAAK,GAAG,EAAE;IACnBtqE,QAAQ,CAACsqE,KAAK,CAAC,CAAC,CAAC,GAAG8M,WAAW,CAAC7E,MAAM,CAACjI,KAAK;EAC9C;;EAEA;AACF;AACA;AACA;AACA;EACEkN,iBAAiBA,CAAC3+F,OAAO,EAAEu+F,WAAW,EAAE;IACtC,MAAMW,OAAO,GAAGX,WAAW,CAAC5gE,MAAM;IAClC,MAAMr9B,KAAK,GAAGw8F,MAAM,CAACoC,OAAO,CAACC,gBAAgB,CAAC;IAC9C,MAAM3xH,KAAK,GAAG8yB,KAAK,CAACjrC,MAAM;IAC1B,IAAI+H,CAAC;;IAEL;IACA,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B,IAAI,IAAI,CAACkrD,SAAS,CAAClrD,CAAC,CAAC,EAAE;QAAE;QACvB,IAAI,CAACkrD,SAAS,CAAClrD,CAAC,CAAC,CAACmmB,IAAI,GAAG+c,KAAK,CAACljC,CAAC,CAAC;MACnC,CAAC,MAAM;QAAE;QACP,IAAI,CAACkrD,SAAS,CAAClrD,CAAC,CAAC,GAAG;UAAEmmB,IAAI,EAAE+c,KAAK,CAACljC,CAAC,CAAC;UAAEupC,QAAQ,EAAE;QAAG,CAAC;MACtD;IACF;;IAEA;IACA,MAAM2hB,SAAS,GAAGtoB,OAAO,CAACmoB,YAAY,CAAC,CAAC;IACxC,KAAK/qD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAEpQ,CAAC,EAAE,EAAE;MAC1B,MAAMstD,QAAQ,GAAG,IAAI,CAACpC,SAAS,CAAClrD,CAAC,CAAC;MAClCkrD,SAAS,CAAClrD,CAAC,CAAC,GAAG,IAAIs0D,kBAAQ,CAAC1xB,OAAO,EAAE0qB,QAAQ,CAACnnC,IAAI,EAAEnmB,CAAC,GAAG,CAAC,CAAC;MAC1DkrD,SAAS,CAAClrD,CAAC,CAAC,CAACupC,QAAQ,GAAG+jB,QAAQ,CAAC/jB,QAAQ;IAC3C;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE63F,aAAaA,CAACx+F,OAAO,EAAEu+F,WAAW,EAAE;IAClC,MAAMpF,QAAQ,GAAGoF,WAAW,CAACa,SAAS;IACtC,IAAI,CAACjG,QAAQ,EAAE;MACb,MAAM,IAAI6D,aAAa,CAAC,gDAAgD,CAAC;IAC3E;IAEA,KAAK,IAAI/wH,CAAC,GAAG,CAAC,EAAE5O,CAAC,GAAGk/H,mBAAmB,CAAClnI,MAAM,EAAE4W,CAAC,GAAG5O,CAAC,EAAE,EAAE4O,CAAC,EAAE;MAC1D,IAAI,CAACktH,QAAQ,CAACoD,mBAAmB,CAACtwH,CAAC,CAAC,CAAC,EAAE;QACrC,MAAM,IAAI+wH,aAAa,CAAC,qCAAqCT,mBAAmB,CAACtwH,CAAC,CAAC,aAAa,CAAC;MACnG;IACF;IAEA,MAAM;MAAEmyH;IAAS,CAAC,GAAG,IAAI;IACzB;IACA,MAAMxtF,MAAM,GAAGksF,MAAM,CAAC3D,QAAQ,CAACkG,WAAW,CAAC;IAC3C,MAAM/zH,CAAC,GAAGwxH,MAAM,CAAC3D,QAAQ,CAACmG,OAAO,CAAC;IAClC,MAAMvvH,CAAC,GAAG+sH,MAAM,CAAC3D,QAAQ,CAACoG,OAAO,CAAC;IAClC,MAAMnuH,CAAC,GAAG0rH,MAAM,CAAC3D,QAAQ,CAACqG,OAAO,CAAC;IAClC,MAAMl/F,KAAK,GAAGw8F,MAAM,CAAC3D,QAAQ,CAACsG,aAAa,CAAC;IAC5C,MAAMjyH,KAAK,GAAG8yB,KAAK,CAACjrC,MAAM;IAC1B;IACA,MAAM+jE,KAAK,GAAG0jE,MAAM,CAAC3D,QAAQ,CAACuG,SAAS,CAAC,IAAI,EAAE;IAC9C,MAAMC,QAAQ,GAAG7C,MAAM,CAAC3D,QAAQ,CAACyG,YAAY,CAAC,IAAI,EAAE;IACpD,MAAMC,aAAa,GAAG/C,MAAM,CAAC3D,QAAQ,CAAC2G,aAAa,CAAC,IAAI,EAAE;IAC1D,MAAMC,OAAO,GAAGjD,MAAM,CAAC3D,QAAQ,CAAC58G,EAAE,CAAC,IAAI,EAAE;IACzC,MAAMyjH,MAAM,GAAGlD,MAAM,CAAC3D,QAAQ,CAAC8G,iBAAiB,CAAC,IAAI,EAAE;IACvD,MAAMC,QAAQ,GAAGpD,MAAM,CAAC3D,QAAQ,CAACgH,aAAa,CAAC,IAAI,EAAE;IACrD,MAAM3qE,QAAQ,GAAGsnE,MAAM,CAAC3D,QAAQ,CAACiH,WAAW,CAAC,IAAI,EAAE;IACnD,MAAMC,WAAW,GAAGvD,MAAM,CAAC3D,QAAQ,CAACmH,cAAc,CAAC,IAAI,EAAE;IACzD,MAAMC,WAAW,GAAGzD,MAAM,CAAC3D,QAAQ,CAACnjH,SAAS,CAAC,IAAI,EAAE;IACpD,MAAMwqH,OAAO,GAAG1D,MAAM,CAAC3D,QAAQ,CAACsH,kBAAkB,CAAC,IAAI,EAAE;IACzD,MAAMC,OAAO,GAAG5D,MAAM,CAAC3D,QAAQ,CAACwH,YAAY,CAAC,IAAI,EAAE;IACnD,MAAMC,MAAM,GAAG9D,MAAM,CAAC3D,QAAQ,CAAC0H,kBAAkB,CAAC,IAAI,EAAE;IACxD,MAAMv4E,SAAS,GAAGw0E,MAAM,CAAC3D,QAAQ,CAAC2H,eAAe,CAAC,IAAI,EAAE;IAExD,IAAIziG,KAAK,GAAG,IAAI;IAChB,IAAIxG,OAAO,GAAG,IAAI;IAClB,KAAK,IAAIz6B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAE,EAAEpQ,CAAC,EAAE;MAC9B,MAAMquH,KAAK,GAAGmV,MAAM,CAACxjI,CAAC,CAAC,IAAI,CAAC;MAC5B,IAAIquH,KAAK,KAAK,CAAC,EAAE;QACf;MACF;MACA,MAAMoD,OAAO,GAAGlvH,MAAM,CAACggI,QAAQ,CAACviI,CAAC,CAAC,IAAI,GAAG,CAAC;MAE1C,IAAI,CAACihC,KAAK,IAAIA,KAAK,CAAClF,OAAO,CAAC,CAAC,KAAK01F,OAAO,EAAE;QACzCxwF,KAAK,GAAG2B,OAAO,CAACR,QAAQ,CAACqvF,OAAO,CAAC,IAAI7uF,OAAO,CAACoQ,QAAQ,CAACy+E,OAAO,CAAC;MAChE;MACAuP,QAAQ,CAACz+H,MAAM,CAACkgI,aAAa,CAACziI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,GAAGyxH,OAAO;MACnD,MAAMC,MAAM,GAAGl+E,MAAM,CAACxzC,CAAC,CAAC;MACxB,MAAM0pC,KAAK,GAAGnnC,MAAM,CAACqgI,MAAM,CAAC5iI,CAAC,CAAC,IAAI,GAAG,CAAC;MACtC,MAAMuqD,OAAO,GAAGhoD,MAAM,CAACugI,QAAQ,CAAC9iI,CAAC,CAAC,IAAI,EAAE,CAAC;MACzC,IAAI,CAACy6B,OAAO,IAAIA,OAAO,CAAC6H,WAAW,CAAC,CAAC,KAAKovF,MAAM,IAAIj3F,OAAO,CAAC+H,QAAQ,CAAC,CAAC,KAAKkH,KAAK,EAAE;QAChFjP,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAACsgB,OAAO,EAAEmnE,MAAM,EAAEhoF,KAAK,CAAC;;QAElD;QACA,MAAMi6F,WAAW,GAAGz4E,SAAS,CAAClrD,CAAC,CAAC,GAAG,CAAC;QACpC,IAAIugE,MAAM,GAAG,IAAI,CAACrV,SAAS,CAACy4E,WAAW,CAAC;QACxC,IAAI,CAACpjE,MAAM,EAAE;UAAE;UACb,IAAI,CAACrV,SAAS,CAACy4E,WAAW,CAAC,GAAG;YAAEx9G,IAAI,EAAE,EAAE;YAAEojB,QAAQ,EAAE;UAAG,CAAC;UACxDg3B,MAAM,GAAG,IAAI,CAACrV,SAAS,CAACy4E,WAAW,CAAC;QACtC;QACApjE,MAAM,CAACh3B,QAAQ,CAACnlC,IAAI,CAACq2B,OAAO,CAAC;MAC/B;MAEA,MAAMtU,IAAI,GAAG+c,KAAK,CAACljC,CAAC,CAAC;MACrB,MAAMkY,OAAO,GAAGkgD,QAAQ,CAACp4D,CAAC,CAAC,IAAIgwH,uBAAa,CAAC7pG,IAAI,CAAC;MAClD,MAAM3lB,IAAI,GAAG07B,iBAAO,CAACkB,SAAS,CAACllB,OAAO,CAAC;MACvC,MAAMwiB,IAAI,GAAGwB,iBAAO,CAACY,IAAI,CAAC3W,IAAI,CAACoU,IAAI,CAAC,CAAC,CAAC;MACtC,MAAMmI,GAAG,GAAG,IAAIlC,iGAAa,CAACtyB,CAAC,CAAClO,CAAC,CAAC,EAAE2S,CAAC,CAAC3S,CAAC,CAAC,EAAEgU,CAAC,CAAChU,CAAC,CAAC,CAAC;MAC/C,MAAM26B,GAAG,GAAGqhC,KAAK,CAACh8D,CAAC,CAAC,KAAK,QAAQ,IAAI,KAAK;MAC1C,MAAM46B,MAAM,GAAG+nG,OAAO,CAAC3iI,CAAC,CAAC,IAAIA,CAAC;MAC9B,MAAM2iC,UAAU,GAAGsgG,WAAW,CAACjjI,CAAC,CAAC,IAAI,GAAG;MACxC,MAAM4Y,SAAS,GAAGuqH,WAAW,CAACnjI,CAAC,CAAC,IAAI,GAAG;MACvC,MAAM2Y,MAAM,GAAGpW,MAAM,CAAC+gI,OAAO,CAACtjI,CAAC,CAAC,IAAI,EAAE,CAAC;MACvC,MAAM86B,MAAM,GAAGsoG,OAAO,CAACpjI,CAAC,CAAC,IAAI,CAAC;MAE9By6B,OAAO,CAACgI,OAAO,CACbtc,IAAI,EACJ3lB,IAAI,EACJkiC,GAAG,EACHhI,IAAI,EACJC,GAAG,EACHC,MAAM,EACNjiB,MAAM,EACNC,SAAS,EACT+pB,UAAU,EACV7H,MACF,CAAC;IACH;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEumG,iBAAiBA,CAACz+F,OAAO,EAAEu+F,WAAW,EAAE;IACtC,IAAIA,WAAW,CAACyC,WAAW,EAAE;MAC3B,IAAI,CAACC,aAAa,CAACjhG,OAAO,EAAEu+F,WAAW,CAACyC,WAAW,CAAC;IACtD;IACA,IAAIzC,WAAW,CAAC2C,kBAAkB,EAAE;MAClC,IAAI,CAACC,cAAc,CAACnhG,OAAO,EAAEu+F,WAAW,CAAC2C,kBAAkB,CAAC;IAC9D;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEC,cAAcA,CAACnhG,OAAO,EAAEohG,SAAS,EAAE;IACjC,MAAM;MAAEhD;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAACgD,SAAS,CAACC,QAAQ,IAAI,CAACD,SAAS,CAAC7kH,EAAE,IAAI,CAAC6kH,SAAS,CAACE,gBAAgB,IAAI,CAACF,SAAS,CAACG,gBAAgB,IACjG,CAACH,SAAS,CAACI,iBAAiB,EAAE;MACjC;IACF;IACA;IACA,MAAMr3E,MAAM,GAAGnqB,OAAO,CAAC6mB,OAAO;IAE9B,SAASyG,QAAQA,CAAC/pC,IAAI,EAAE;MACtB,MAAMlmB,CAAC,GAAG8sD,MAAM,CAAC90D,MAAM;MACvB,KAAK,IAAI+H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QAC1B,IAAI+sD,MAAM,CAAC/sD,CAAC,CAAC,CAACqjC,KAAK,KAAKld,IAAI,EAAE;UAC5B,OAAO4mC,MAAM,CAAC/sD,CAAC,CAAC;QAClB;MACF;MACA+sD,MAAM,CAAC9sD,CAAC,CAAC,GAAG,IAAI2sC,eAAK,CAACzmB,IAAI,EAAE,CAAC,CAAC;MAC9B,OAAO4mC,MAAM,CAAC9sD,CAAC,CAAC;IAClB;IAEA,MAAMokI,UAAU,GAAG3E,MAAM,CAACsE,SAAS,CAACC,QAAQ,CAAC;IAC7C,MAAMK,WAAW,GAAG5E,MAAM,CAACsE,SAAS,CAAC7kH,EAAE,CAAC;IACxC,MAAMolH,MAAM,GAAG7E,MAAM,CAACsE,SAAS,CAACQ,eAAe,CAAC;IAChD,MAAMC,IAAI,GAAG/E,MAAM,CAACsE,SAAS,CAACU,eAAe,CAAC;IAC9C,MAAMlyF,MAAM,GAAGktF,MAAM,CAACsE,SAAS,CAACI,iBAAiB,CAAC;IAClD,MAAMO,QAAQ,GAAGjF,MAAM,CAACsE,SAAS,CAACY,qBAAqB,CAAC,IAAI,EAAE;IAC9D,MAAMC,SAAS,GAAGnF,MAAM,CAACsE,SAAS,CAACc,qBAAqB,CAAC,IAAI,EAAE;IAE/D,KAAK,IAAI9kI,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGqkI,WAAW,CAACrsI,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAClD,MAAMihC,KAAK,GAAG2B,OAAO,CAACR,QAAQ,CAAC4+F,QAAQ,CAACxuF,MAAM,CAACxyC,CAAC,CAAC,CAAC,CAAC;MACnD,MAAMusC,KAAK,GAAG2jB,QAAQ,CAACm0E,UAAU,CAACrkI,CAAC,CAAC,CAAC;MACrC,MAAM6mG,QAAQ,GAAG09B,MAAM,CAACvkI,CAAC,CAAC;MAC1B,MAAM8mG,MAAM,GAAG29B,IAAI,CAACzkI,CAAC,CAAC;MACtB,MAAM6zH,UAAU,GAAG8Q,QAAQ,CAAC3kI,CAAC,CAAC,IAAI,GAAG;MACrC,MAAM+zH,QAAQ,GAAG8Q,SAAS,CAAC7kI,CAAC,CAAC,IAAI,GAAG;MAEpC,MAAMye,KAAK,GAAGwiB,KAAK,CAACuI,WAAW,CAACq9D,QAAQ,EAAEgtB,UAAU,CAAC;MACrD,MAAMh2G,GAAG,GAAGojB,KAAK,CAACuI,WAAW,CAACs9D,MAAM,EAAEitB,QAAQ,CAAC;;MAE/C;MACA,IAAI,CAACt1G,KAAK,IAAI,CAACZ,GAAG,EAAE;QAClB;MACF;MAEA,MAAM4Q,MAAM,GAAG,IAAI6d,gBAAM,CAACC,KAAK,EAAE9tB,KAAK,CAAC,CAAC,CAAC,EAAEZ,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC;MACjE,MAAM0rB,QAAQ,GAAGtI,KAAK,CAACoI,WAAW,CAAC,CAAC;MACpC,KAAK,IAAIpkC,CAAC,GAAGwZ,KAAK,CAAC,CAAC,CAAC,EAAExZ,CAAC,IAAI4Y,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE5Y,CAAC,EAAE;QACvCskC,QAAQ,CAACtkC,CAAC,CAAC,CAACu8B,UAAU,GAAG/S,MAAM;MACjC;MACA8d,KAAK,CAACS,SAAS,CAACve,MAAM,CAAC;MACvBmU,OAAO,CAAC8mB,UAAU,CAACtlD,IAAI,CAACqqB,MAAM,CAAC;IACjC;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEo1G,aAAaA,CAACjhG,OAAO,EAAEmiG,WAAW,EAAE;IAClC,MAAM;MAAE/D;IAAS,CAAC,GAAG,IAAI;IACzB,IAAI,CAAC+D,WAAW,CAACC,YAAY,IAAI,CAACD,WAAW,CAACb,gBAAgB,IAAI,CAACa,WAAW,CAACZ,gBAAgB,IAC1F,CAACY,WAAW,CAACX,iBAAiB,EAAE;MACnC;IACF;IAEA,MAAMtjG,KAAK,GAAG4+F,MAAM,CAACqF,WAAW,CAACC,YAAY,CAAC;IAC9C,MAAMT,MAAM,GAAG7E,MAAM,CAACqF,WAAW,CAACP,eAAe,CAAC;IAClD,MAAMG,QAAQ,GAAGjF,MAAM,CAACqF,WAAW,CAACH,qBAAqB,CAAC,IAAI,EAAE;IAChE,MAAMH,IAAI,GAAG/E,MAAM,CAACqF,WAAW,CAACL,eAAe,CAAC;IAChD,MAAMG,SAAS,GAAGnF,MAAM,CAACqF,WAAW,CAACD,qBAAqB,CAAC,IAAI,EAAE;IACjE,MAAMG,QAAQ,GAAGvF,MAAM,CAACqF,WAAW,CAACG,OAAO,CAAC,IAAI,EAAE;IAClD,MAAMC,OAAO,GAAGzF,MAAM,CAACqF,WAAW,CAACK,qBAAqB,CAAC,IAAI,EAAE;IAC/D,MAAMlJ,YAAY,GAAGwD,MAAM,CAACqF,WAAW,CAACM,oBAAoB,CAAC,IAAI,EAAE;IACnE,MAAMniG,KAAK,GAAGw8F,MAAM,CAACqF,WAAW,CAAC5lH,EAAE,CAAC,IAAI,EAAE;IAC1C,MAAMqzB,MAAM,GAAGktF,MAAM,CAACqF,WAAW,CAACX,iBAAiB,CAAC;IAEpD,KAAK,IAAIpkI,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG6gC,KAAK,CAAC7oC,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC5C,MAAMQ,IAAI,GAAGg/H,aAAa,CAAC1+F,KAAK,CAAC9gC,CAAC,CAAC,CAAC;MACpC,IAAI,CAACQ,IAAI,EAAE;QACT;MACF;MACA,MAAM2lB,IAAI,GAAG+c,KAAK,CAACljC,CAAC,CAAC,IAAI8gC,KAAK,CAAC9gC,CAAC,CAAC;MACjC,MAAMihC,KAAK,GAAG2B,OAAO,CAACR,QAAQ,CAAC4+F,QAAQ,CAACxuF,MAAM,CAACxyC,CAAC,CAAC,CAAC,CAAC;MAEnD,MAAM6mG,QAAQ,GAAG09B,MAAM,CAACvkI,CAAC,CAAC;MAC1B,MAAM8mG,MAAM,GAAG29B,IAAI,CAACzkI,CAAC,CAAC;MACtB,MAAM6zH,UAAU,GAAG8Q,QAAQ,CAAC3kI,CAAC,CAAC,IAAI,GAAG;MACrC,MAAM+zH,QAAQ,GAAG8Q,SAAS,CAAC7kI,CAAC,CAAC,IAAI,GAAG;MAEpC,MAAMye,KAAK,GAAGwiB,KAAK,CAACuI,WAAW,CAACq9D,QAAQ,EAAEgtB,UAAU,CAAC;MACrD,MAAMh2G,GAAG,GAAGojB,KAAK,CAACuI,WAAW,CAACs9D,MAAM,EAAEitB,QAAQ,CAAC;;MAE/C;MACA,IAAI,CAACt1G,KAAK,IAAI,CAACZ,GAAG,EAAE;QAClB;MACF;MACA,MAAMwuB,OAAO,GAAG44F,QAAQ,CAACjlI,CAAC,CAAC,IAAI,EAAE;MACjC,MAAM/H,MAAM,GAAGktI,OAAO,CAACnlI,CAAC,CAAC,IAAI,CAAC;MAC9B,MAAMosC,UAAU,GAAG8vF,YAAY,CAACl8H,CAAC,CAAC,IAAI,GAAG;MACzC,IAAIs8H,MAAM;MACV,IAAI97H,IAAI,KAAK,OAAO,EAAE;QACpB,MAAMmc,GAAG,GAAGimB,OAAO,CAAC4mB,QAAQ,CAACvxD,MAAM;QACnCqkI,MAAM,GAAG,IAAInwF,eAAK,CAACC,UAAU,EAAE3tB,KAAK,CAAC,CAAC,CAAC,EAAEZ,GAAG,CAAC,CAAC,CAAC,EAAElB,GAAG,EAAEwJ,IAAI,EAAEkmB,OAAO,EAAEp0C,MAAM,CAAC;QAC5E2qC,OAAO,CAACwnB,QAAQ,CAACkyE,MAAM,CAAC;QACxB15F,OAAO,CAAC8mB,UAAU,CAACtlD,IAAI,CAACk4H,MAAM,CAAC;MACjC,CAAC,MAAM,IAAI97H,IAAI,KAAK,MAAM,EAAE;QAC1B87H,MAAM,GAAG,IAAIhyF,sBAAiB,CAACA,sBAAiB,CAACW,IAAI,CAACU,IAAI,EAAEltB,KAAK,CAAC,CAAC,CAAC,EAAEZ,GAAG,CAAC,CAAC,CAAC,CAAC;QAC7E+kB,OAAO,CAAC8mB,UAAU,CAACtlD,IAAI,CAACk4H,MAAM,CAAC;MACjC,CAAC,MAAM;QACLA,MAAM,GAAG,IAAI;MACf;MACA,IAAI,CAACA,MAAM,EAAE;QACX;MACF;MACA,MAAM/yF,QAAQ,GAAGtI,KAAK,CAACoI,WAAW,CAAC,CAAC;MACpC,KAAK,IAAIpkC,CAAC,GAAGwZ,KAAK,CAAC,CAAC,CAAC,EAAExZ,CAAC,IAAI4Y,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE5Y,CAAC,EAAE;QACvCskC,QAAQ,CAACtkC,CAAC,CAAC,CAACu8B,UAAU,GAAG86F,MAAM;MACjC;IACF;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEgF,kBAAkBA,CAAC1+F,OAAO,EAAEu+F,WAAW,EAAE;IACvC,MAAM;MAAEH;IAAS,CAAC,GAAG,IAAI;IACzB,MAAMsE,MAAM,GAAGnE,WAAW,CAACoE,wBAAwB;IACnD,IAAI,CAACD,MAAM,EAAE;MACX;IACF;IAEA,MAAME,MAAM,GAAG9F,MAAM,CAAC4F,MAAM,CAACG,WAAW,CAAC;IACzC,MAAMC,OAAO,GAAGhG,MAAM,CAAC4F,MAAM,CAACK,eAAe,CAAC;IAC9C,MAAMC,OAAO,GAAGlG,MAAM,CAAC4F,MAAM,CAACO,YAAY,CAAC;IAC3C,IAAI,CAACL,MAAM,IAAI,CAACE,OAAO,IAAI,CAACE,OAAO,EAAE;MACnC;IACF;IAEA,MAAM9F,QAAQ,GAAGD,cAAc,CAACsB,WAAW,CAAC2E,qBAAqB,CAAC;IAClE,IAAI,CAAChG,QAAQ,EAAE;MACb;IACF;IAEA,KAAK,IAAI9/H,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGulI,MAAM,CAACvtI,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC7C,MAAM+lI,GAAG,GAAG,IAAIxzF,kBAAQ,CAAC3P,OAAO,CAAC;MACjC,MAAMojG,WAAW,GAAG/F,kBAAkB,CAACyF,OAAO,CAAC1lI,CAAC,CAAC,EAAE8/H,QAAQ,CAAC;MAC5D,MAAMxnG,OAAO,GAAGstG,OAAO,CAAC5lI,CAAC,CAAC,CAAC8G,KAAK,CAAC,GAAG,CAAC;MACrC,KAAK,IAAI85H,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGvoG,OAAO,CAACrgC,MAAM,EAAE2oI,EAAE,GAAGC,EAAE,EAAE,EAAED,EAAE,EAAE;QACnD,MAAM3/F,KAAK,GAAG3I,OAAO,CAACsoG,EAAE,CAAC,CAACrmG,IAAI,CAAC,CAAC;QAChC,IAAI0G,KAAK,CAAChpC,MAAM,GAAG,CAAC,EAAE;UACpB8tI,GAAG,CAAC/yF,QAAQ,CAACguF,QAAQ,CAAC//F,KAAK,CAAC,CAAC;QAC/B;MACF;MACA8kG,GAAG,CAACtzF,QAAQ,GAAGuzF,WAAW;MAC1BpjG,OAAO,CAACqnB,KAAK,CAAC7lD,IAAI,CAAC2hI,GAAG,CAAC;IACzB;EACF;AACF;AAEAhF,SAAS,CAAC/S,OAAO,GAAG,CAAC,KAAK,EAAE,OAAO,CAAC;AACpC+S,SAAS,CAAC/oC,UAAU,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC;AAEzC,wDAAe+oC,SAAS;;AC3gBO;AACR;AACgB;AAEhC,MAAMkF,SAAS,GAAG;EACvBC,QAAQ,EAAE,CAAC;EACXnG,MAAM,EAAE,CAAC;EACTnzH,KAAK,EAAE,CAAC;EACR2E,MAAM,EAAE;AACV,CAAC;AAED,MAAM40H,WAAW,CAAC;EAChBC,QAAQ,GAAG,EAAE;EAEb1vD,OAAO,UAAG,IAAIl2C,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAEpCl1B,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC+6H,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,CAACC,QAAQ,GAAG,IAAI9lG,iGAAa,CAAC,CAAC;IACnC,IAAI,CAAC+lG,SAAS,GAAG,IAAI/lG,iGAAa,CAAC,CAAC;IACpC,IAAI,CAAC6lG,OAAO,CAACxnH,KAAK,GAAG,CAAC,CAAC;IACvB,IAAI,CAACwnH,OAAO,CAACG,MAAM,GAAG,EAAE;IACxB,IAAI,CAACH,OAAO,CAACI,MAAM,GAAG,EAAE;IACxB,IAAI,CAACJ,OAAO,CAAClyD,IAAI,GAAG,EAAE;IACtB,IAAI,CAACkyD,OAAO,CAACK,OAAO,GAAG,EAAE;IACzB,IAAI,CAACL,OAAO,CAACM,QAAQ,GAAG,IAAInmG,iGAAa,CAAC,CAAC;IAC3C,IAAI,CAAC6lG,OAAO,CAACO,MAAM,GAAG,EAAE;IACxB,IAAI,CAACP,OAAO,CAAC7kE,MAAM,GAAG,IAAIhhC,iGAAa,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAChD,IAAI,CAAC6lG,OAAO,CAACrd,IAAI,GAAG,CAAC;IACrB,IAAI,CAACqd,OAAO,CAACtd,KAAK,GAAG,CAAC;IACtB,IAAI,CAACsd,OAAO,CAACnd,IAAI,GAAG,CAAC;EACvB;EAEA2d,WAAWA,CAAA,EAAG;IACZ,IAAIrlI,+GAAc,CAAC,IAAI,CAACulI,KAAK,CAAC,EAAE;MAC9B,IAAI,CAACA,KAAK,GAAG,IAAI,CAACA,KAAK,CAACx1H,MAAM;IAChC,CAAC,MAAM,IAAI,CAAC/P,gHAAe,CAAC,IAAI,CAACulI,KAAK,CAAC,EAAE;MACvC,MAAM,IAAIC,SAAS,CAAC,oCAAoC,CAAC;IAC3D;EACF;EAEAC,WAAWA,CAACC,YAAY,EAAEC,MAAM,EAAE;IAChC,KAAK,MAAMxlI,GAAG,IAAIulI,YAAY,EAAE;MAC9B,IAAIA,YAAY,CAACljI,cAAc,CAACrC,GAAG,CAAC,EAAE;QACpC,QAAQulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC;UAC1B,KAAKskI,SAAS,CAACC,QAAQ;YACrB,IAAI,CAACG,OAAO,CAAC1kI,GAAG,CAAC,GAAGwlI,MAAM,CAACD,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAACulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACtE;UAEF,KAAKskI,SAAS,CAACr5H,KAAK;YAClB,IAAI,CAACw6H,WAAW,CAAC,IAAI,CAACf,OAAO,CAAC1kI,GAAG,CAAC,EAAEwlI,MAAM,CAACD,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACvF;UAEF,KAAKskI,SAAS,CAAClG,MAAM;YACnB,IAAI,CAACsH,YAAY,CAAC,IAAI,CAAChB,OAAO,CAAC1kI,GAAG,CAAC,EAAEwlI,MAAM,CAACD,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACxF;UAEF,KAAKskI,SAAS,CAAC10H,MAAM;YACnB,IAAI,CAAC80H,OAAO,CAAC1kI,GAAG,CAAC,GAAG,IAAI2P,UAAU,CAChC61H,MAAM,CAACD,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAC5B,CAACulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAC1B,CAACulI,YAAY,CAACvlI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAC3B,CAAC;YACD;UAEF;YACE;QACJ;MACF;IACF;EACF;EAEA0lI,YAAYA,CAACtH,MAAM,EAAEvxH,GAAG,EAAEujC,GAAG,EAAE;IAC7B,CAACguF,MAAM,CAAC7xH,CAAC,EAAE6xH,MAAM,CAACptH,CAAC,EAAEotH,MAAM,CAAC/rH,CAAC,CAAC,GAAG,CAACxF,GAAG,CAACujC,GAAG,CAAC,EAAEvjC,GAAG,CAACujC,GAAG,GAAG,CAAC,CAAC,EAAEvjC,GAAG,CAACujC,GAAG,GAAG,CAAC,CAAC,CAAC;EACzE;EAEAq1F,WAAWA,CAACrH,MAAM,EAAEvxH,GAAG,EAAEujC,GAAG,EAAE;IAC5BguF,MAAM,CAAC,CAAC,CAAC,GAAGvxH,GAAG,CAACujC,GAAG,CAAC;IACpBguF,MAAM,CAAC,CAAC,CAAC,GAAGvxH,GAAG,CAACujC,GAAG,GAAG,CAAC,CAAC;IACxBguF,MAAM,CAAC,CAAC,CAAC,GAAGvxH,GAAG,CAACujC,GAAG,GAAG,CAAC,CAAC;EAC1B;EAEAu8E,YAAYA,CAACgZ,OAAO,EAAE,CAAC;EAEvBC,eAAeA,CAAA,EAAG,CAAC;EAEnBC,WAAWA,CAAA,EAAG,CAAC;EAEfC,QAAQA,CAAA,EAAG;IACT,MAAMC,MAAM,GAAG,IAAI,CAACrB,OAAO;IAE3B,MAAMr+C,MAAM,GAAG0/C,MAAM,CAACf,QAAQ,CAACz4H,CAAC,GAAGw5H,MAAM,CAACvzD,IAAI,CAAC,CAAC,CAAC;IACjD,MAAM+T,MAAM,GAAGw/C,MAAM,CAACf,QAAQ,CAACh0H,CAAC,GAAG+0H,MAAM,CAACvzD,IAAI,CAAC,CAAC,CAAC;IACjD,MAAMiU,MAAM,GAAGs/C,MAAM,CAACf,QAAQ,CAAC3yH,CAAC,GAAG0zH,MAAM,CAACvzD,IAAI,CAAC,CAAC,CAAC;IAEjD,MAAM,CAACxQ,KAAK,EAAEitC,IAAI,EAAE+2B,KAAK,CAAC,GAAGD,MAAM,CAACd,MAAM;IAE1C,MAAMgB,EAAE,GAAGznI,IAAI,CAACge,GAAG,CAACyyF,IAAI,CAAC;IACzB,MAAMi3B,EAAE,GAAG,CAAC1nI,IAAI,CAACge,GAAG,CAACwlD,KAAK,CAAC,GAAGxjE,IAAI,CAACge,GAAG,CAACyyF,IAAI,CAAC,GACxCzwG,IAAI,CAACge,GAAG,CAACwpH,KAAK,CAAC,IAAIxnI,IAAI,CAAC0K,GAAG,CAAC88H,KAAK,CAAC;IACtC,MAAMrR,EAAE,GAAGn2H,IAAI,CAAC+xC,IAAI,CAAC,GAAG,GAAG01F,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAC;IAE7C,MAAMC,KAAK,GAAG,IAAItnG,iGAAa,CAACwnD,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7C,MAAM+/C,KAAK,GAAG,IAAIvnG,iGAAa,CAACrgC,IAAI,CAACge,GAAG,CAACwpH,KAAK,CAAC,GAAGz/C,MAAM,EAAE/nF,IAAI,CAAC0K,GAAG,CAAC88H,KAAK,CAAC,GAAGz/C,MAAM,EAAE,CAAC,CAAC;IACtF,MAAM8/C,KAAK,GAAG,IAAIxnG,iGAAa,CAAConG,EAAE,GAAGx/C,MAAM,EAAEy/C,EAAE,GAAGz/C,MAAM,EAAEkuC,EAAE,GAAGluC,MAAM,CAAC;IAEtE,OAAO,CAAC0/C,KAAK,EAAEC,KAAK,EAAEC,KAAK,CAAC;EAC9B;EAEAC,UAAUA,CAAA,EAAG;IACX,OAAO,CAAC,IAAI,CAAC5B,OAAO,CAACG,MAAM,CAAC,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAAC,EAC3C,IAAI,CAACC,OAAO,CAACG,MAAM,CAAC,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAAC,EACrC,IAAI,CAACC,OAAO,CAACG,MAAM,CAAC,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;EAC1C;EAEA8B,cAAcA,CAAA,EAAG;IACf,MAAMvf,OAAO,GAAGnnH,uGAAM,CAAC,IAAI,CAAC6kI,OAAO,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IAC9E1d,OAAO,CAACC,WAAW,GAAG,IAAI,CAACyd,OAAO,CAACO,MAAM,CAAC/sG,GAAG,CAAEq/B,KAAK,IAAKz5D,MAAM,CAACy5D,KAAK,IAAK/4D,IAAI,CAACC,EAAE,GAAG,CAAE,CAAC,CAAC;IACxF,OAAOuoH,OAAO;EAChB;EAEAwf,aAAaA,CAACL,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAE;IACjC;IACA,IAAII,MAAM,GAAG,CAAC;IACd,IAAIC,MAAM,GAAG,CAAC;IACd,MAAM,CAAC1kE,KAAK,EAAEitC,IAAI,EAAE+2B,KAAK,CAAC,GAAG,IAAI,CAACtB,OAAO,CAACO,MAAM;IAEhD,IAAIe,KAAK,IAAIxnI,IAAI,CAACC,EAAE,GAAG,CAAC,EAAE;MACxBgoI,MAAM,IAAIjoI,IAAI,CAACuI,GAAG,CAACq/H,KAAK,CAAC75H,CAAC,CAAC;IAC7B;IACA,IAAI0iG,IAAI,IAAIzwG,IAAI,CAACC,EAAE,GAAG,CAAC,EAAE;MACvBgoI,MAAM,IAAIjoI,IAAI,CAACuI,GAAG,CAACs/H,KAAK,CAAC95H,CAAC,CAAC;IAC7B;IACA,IAAIy1D,KAAK,IAAIxjE,IAAI,CAACC,EAAE,GAAG,CAAC,EAAE;MACxBioI,MAAM,IAAIloI,IAAI,CAACuI,GAAG,CAACs/H,KAAK,CAACr1H,CAAC,CAAC;IAC7B;IAEA,IAAI,CAAC4zH,SAAS,GAAG,IAAI/lG,iGAAa,CAAC,IAAI,CAACk2C,OAAO,CAACxoE,CAAC,GAAGk6H,MAAM,EAAE,IAAI,CAAC1xD,OAAO,CAAC/jE,CAAC,GAAG01H,MAAM,EAAE,IAAI,CAAC3xD,OAAO,CAAC1iE,CAAC,CAAC;IACpG,IAAI,CAACsyH,QAAQ,GAAG,IAAI9lG,iGAAa,CAC/BrgC,IAAI,CAACuI,GAAG,CAACo/H,KAAK,CAAC55H,CAAC,CAAC,GAAG/N,IAAI,CAACuI,GAAG,CAACq/H,KAAK,CAAC75H,CAAC,CAAC,GAAG/N,IAAI,CAACuI,GAAG,CAACs/H,KAAK,CAAC95H,CAAC,CAAC,EACzD/N,IAAI,CAACuI,GAAG,CAACq/H,KAAK,CAACp1H,CAAC,CAAC,GAAGxS,IAAI,CAACuI,GAAG,CAACs/H,KAAK,CAACr1H,CAAC,CAAC,EACrCxS,IAAI,CAACuI,GAAG,CAACs/H,KAAK,CAACh0H,CAAC,CAClB,CAAC;IAED,MAAM6K,KAAK,GAAGA,CAACk1D,GAAG,EAAE+2C,IAAI,KAAM3qH,IAAI,CAACuI,GAAG,CAACqrE,GAAG,CAAC+2C,IAAI,CAAC,CAAC,GAAG,IAAI,CAACwb,QAAQ,CAACxb,IAAI,CAAE;IACxE,IAAI,CAACub,OAAO,CAACxnH,KAAK,CAAC3Q,CAAC,GAAG2Q,KAAK,CAACkpH,KAAK,EAAE,GAAG,CAAC;IACxC,IAAI,CAAC1B,OAAO,CAACxnH,KAAK,CAAClM,CAAC,GAAGkM,KAAK,CAACmpH,KAAK,EAAE,GAAG,CAAC;IACxC,IAAI,CAAC3B,OAAO,CAACxnH,KAAK,CAAC7K,CAAC,GAAG6K,KAAK,CAACmpH,KAAK,EAAE,GAAG,CAAC;EAC1C;EAEAM,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI9nG,8FAAU,CAAC,IAAI,CAAC+lG,SAAS,CAACnnG,KAAK,CAAC,CAAC,EAAE,IAAI,CAACmnG,SAAS,CAACnnG,KAAK,CAAC,CAAC,CAACj+B,GAAG,CAAC,IAAI,CAACmlI,QAAQ,CAAC,CAAC;EAC1F;EAEAiC,UAAUA,CAAA,EAAG,CAAC;EAEdjmI,KAAKA,CAAC8nB,IAAI,EAAE;IACV,IAAI,CAACkkG,YAAY,CAAClkG,IAAI,CAAC;IACvB,IAAI,CAACo9G,WAAW,CAAC,CAAC;IAClB,OAAO,IAAI12E,WAAM,CAAC1+C,YAAY,EAAE,IAAI,CAAC61H,UAAU,CAAC,CAAC,EAAE,IAAI,CAACK,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACC,UAAU,CAAC,CAAC,EAAE,IAAI,CAACL,cAAc,CAAC,CAAC,CAAC;EACpH;AACF;AAEA,0DAAe/B,WAAW;;ACnKI;AACyB;AAEvD,MAAMqC,UAAU,GAAG;EACjBhC,MAAM,EAAE,CAACP,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACnCpM,IAAI,EAAE,CAACylI,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC;EACpCO,MAAM,EAAE,CAACR,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACnCunE,IAAI,EAAE,CAAC8xD,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACjC+5H,QAAQ,EAAE,CAACV,SAAS,CAAClG,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;EACvC6G,MAAM,EAAE,CAACX,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC;EACpC85H,OAAO,EAAE,CAACT,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC;EACrCo8G,IAAI,EAAE,CAACid,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACrChd,IAAI,EAAE,CAAC+c,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACrCnd,KAAK,EAAE,CAACkd,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACtCuC,IAAI,EAAE,CAACxC,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACrCwC,MAAM,EAAE,CAACzC,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACvCyC,MAAM,EAAE,CAAC1C,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACvC0C,UAAU,EAAE,CAAC3C,SAAS,CAAC10H,MAAM,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;EAC/CiwD,MAAM,EAAE,CAACykE,SAAS,CAAClG,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;EACrClmG,GAAG,EAAE,CAACosG,SAAS,CAAC10H,MAAM,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;EACxCs3H,OAAO,EAAE,CAAC5C,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACxC/c,EAAE,EAAE,CAAC8c,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACnC4C,MAAM,EAAE,CAAC7C,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACvCzqC,KAAK,EAAE,CAACwqC,SAAS,CAAC10H,MAAM,EAAE,QAAQ,EAAE,EAAE,EAAE,GAAG;AAC7C,CAAC;AAED,MAAMw3H,SAAS,SAAS5C,mBAAW,CAAC;EAClC;EACA7X,YAAYA,CAACgZ,OAAO,EAAE;IACpB,IAAI,CAACP,KAAK,GAAGO,OAAO;IACpB,IAAI,CAACT,WAAW,CAAC,CAAC;IAClB,MAAMM,MAAM,GAAG,CAAC,CAAC;IACjBA,MAAM,CAAC6B,GAAG,GAAG,IAAIpjE,WAAW,CAAC,IAAI,CAACmhE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;IAC/CI,MAAM,CAAC8B,GAAG,GAAG,IAAI92H,UAAU,CAAC,IAAI,CAAC40H,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;IAC9CI,MAAM,CAAC+B,GAAG,GAAG,IAAI92H,YAAY,CAAC,IAAI,CAAC20H,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC;IAChDI,MAAM,CAAC51H,MAAM,GAAG,IAAI,CAACw1H,KAAK;IAC1B,MAAMW,MAAM,GAAG,IAAI,CAACrB,OAAO;IAE3B,IAAI,CAACY,WAAW,CAACuB,UAAU,EAAErB,MAAM,CAAC;;IAEpC;IACAO,MAAM,CAACd,MAAM,CAACtyH,OAAO,CAAC,CAAC4kD,KAAK,EAAEl5D,CAAC,EAAEgF,CAAC,KAAK;MAAEA,CAAC,CAAChF,CAAC,CAAC,IAAIG,IAAI,CAACC,EAAE,GAAG,KAAK;IAAE,CAAC,CAAC;EACtE;EAEAmnI,eAAeA,CAAA,EAAG;IAChB,MAAMG,MAAM,GAAG,IAAI,CAACrB,OAAO;IAE3B,IAAIqB,MAAM,CAACf,QAAQ,CAACz4H,CAAC,KAAK,GAAG,IAAIw5H,MAAM,CAACf,QAAQ,CAACh0H,CAAC,KAAK,GAAG,IAAI+0H,MAAM,CAACf,QAAQ,CAAC3yH,CAAC,KAAK,GAAG,EAAE;MACvF0zH,MAAM,CAACf,QAAQ,CAACtoI,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IACpC;IACA;IACA;IACA,MAAM;MAAEqoI;IAAQ,CAAC,GAAG,IAAI,CAACL,OAAO;IAChC,IAAIK,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;MAC5DA,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;MACdA,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;MACdA,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;IAChB;IAEA,MAAMyC,OAAO,GAAG,IAAI,CAAC/C,QAAQ;IAC7B+C,OAAO,CAACzC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7ByC,OAAO,CAACzC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7ByC,OAAO,CAACzC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EAC/B;EAEAc,WAAWA,CAAA,EAAG;IACZ,MAAM,CAACM,KAAK,EAAEC,KAAK,EAAEC,KAAK,CAAC,GAAG,IAAI,CAACP,QAAQ,CAAC,CAAC;IAC7C,IAAI,CAACF,eAAe,CAAC,CAAC;IAEtB,MAAMG,MAAM,GAAG,IAAI,CAACrB,OAAO;IAC3B,MAAM8C,OAAO,GAAG,IAAI,CAAC/C,QAAQ;IAC7B;IACA,IAAIsB,MAAM,CAAClmE,MAAM,CAACtzD,CAAC,KAAK,GAAG,IAAIw5H,MAAM,CAAClmE,MAAM,CAAC7uD,CAAC,KAAK,GAAG,IAAI+0H,MAAM,CAAClmE,MAAM,CAACxtD,CAAC,KAAK,GAAG,EAAE;MACjF,IAAI,CAAC0iE,OAAO,CAACzX,eAAe,CAAC6oE,KAAK,EAAEJ,MAAM,CAACjB,MAAM,CAAC0C,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9D,IAAI,CAACzyD,OAAO,CAACzX,eAAe,CAAC8oE,KAAK,EAAEL,MAAM,CAACjB,MAAM,CAAC0C,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9D,IAAI,CAACzyD,OAAO,CAACzX,eAAe,CAAC+oE,KAAK,EAAEN,MAAM,CAACjB,MAAM,CAAC0C,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAChE,CAAC,MAAM;MACL,IAAI,CAACzyD,OAAO,GAAGgxD,MAAM,CAAClmE,MAAM;MAC5B;MACA;MACA;MACA;IACF;IACAsmE,KAAK,CAACloG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACnDpB,KAAK,CAACnoG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACnDnB,KAAK,CAACpoG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAEnD,IAAIzB,MAAM,CAAClnI,IAAI,KAAK,CAAC,EAAE;MACrB,IAAI,CAACkxD,KAAK,GAAG,IAAIt/C,YAAY,CAC3B,IAAI,CAAC20H,KAAK,EACV,IAAI,GAAGW,MAAM,CAACgB,MAAM,EACpBhB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAGkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAGkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CACvD,CAAC;IACH,CAAC,MAAM;MACL,MAAM,IAAIzjI,KAAK,CAAC,4BAA4B2kI,MAAM,CAAClnI,IAAI,EAAE,CAAC;IAC5D;IAEA,IAAI,CAAC2nI,aAAa,CAACL,KAAK,EAAEC,KAAK,EAAEC,KAAK,CAAC;EACzC;EAEAO,UAAUA,CAAA,EAAG;IACX,MAAMb,MAAM,GAAG,IAAI,CAACrB,OAAO;IAC3B,MAAMj8G,IAAI,GAAG,IAAI,CAACsnC,KAAK;IACvB,MAAMy3E,OAAO,GAAG,IAAI,CAAC/C,QAAQ;IAC7B,MAAMgD,OAAO,GAAG,IAAIh3H,YAAY,CAACgY,IAAI,CAACnyB,MAAM,CAAC;IAE7C,MAAM69E,GAAG,GAAG,IAAI,CAACmyD,UAAU,CAAC,CAAC;IAC7B,MAAM31E,KAAK,GAAGwjB,GAAG,CAAC,CAAC,CAAC;IACpB,MAAMvjB,KAAK,GAAGujB,GAAG,CAAC,CAAC,CAAC;IAEpB,IAAIuzD,MAAM,GAAG,CAAC;IACd,MAAM5iD,KAAK,GAAG,EAAE;IAChB,IAAIv4E,CAAC;IACL,IAAIyE,CAAC;IACL,IAAIqB,CAAC;IACL,KAAKyyE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,GAAGihD,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,EAAE//C,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;MAAE;MAC5D,KAAKA,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,GAAGihD,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,EAAE//C,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE;QAAE;QAC5D,KAAKA,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,GAAGihD,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,EAAE//C,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE4iD,MAAM,EAAE,EAAE;UAAE;UACtEn7H,CAAC,GAAGu4E,KAAK,CAAC0iD,OAAO,CAAC,CAAC,CAAC,CAAC;UACrBx2H,CAAC,GAAG8zE,KAAK,CAAC0iD,OAAO,CAAC,CAAC,CAAC,CAAC;UACrBn1H,CAAC,GAAGyyE,KAAK,CAAC0iD,OAAO,CAAC,CAAC,CAAC,CAAC;UACrBC,OAAO,CAACl7H,CAAC,GAAGokD,KAAK,IAAI3/C,CAAC,GAAG4/C,KAAK,GAAGv+C,CAAC,CAAC,CAAC,GAAGoW,IAAI,CAACi/G,MAAM,CAAC;QACrD;MACF;IACF;IAEA,OAAOD,OAAO;EAChB;AACF;AAEA,MAAME,UAAU,SAASpgI,MAAM,CAAC;EAC9BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACsoH,QAAQ,CAACkE,QAAQ,GAAG,MAAM;IAC/B,IAAI,CAACzC,KAAK,GAAG,IAAI0a,SAAS,CAAC,CAAC;EAC9B;EAEA,OAAO7a,gBAAgBA,CAACx8D,KAAK,EAAE;IAC7B,OAAO,KAAK,CAAC,CAAC;EAChB;EAEAy8D,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAACE,KAAK,CAAC/rH,KAAK,CAAC,IAAI,CAACovD,KAAK,CAAC;EACrC;AACF;AAEA43E,UAAU,CAACtb,OAAO,GAAG,CAAC,MAAM,CAAC;AAC7Bsb,UAAU,CAACtxC,UAAU,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC;AACjDsxC,UAAU,CAAC1iH,MAAM,GAAG,IAAI;AAExB,yDAAe0iH,UAAU;;ACtJM;AACR;AACO;AACA;AAE9B,MAAM;EAAEhgF,OAAO;EAAEptB,OAAO;EAAEo4B,QAAQA,oBAAAA;AAAC,CAAC,GAAG8nB,IAAI;AAE3C,MAAMmtD,SAAS,SAASrgI,MAAM,CAAC;EAC7BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IAEpB,IAAI,CAACykC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACygG,SAAS,GAAG,IAAI;IAErB,IAAI,CAAC5c,QAAQ,CAACkE,QAAQ,GAAG,KAAK;IAC9B,IAAI,CAAC2Y,SAAS,GAAGnlI,OAAO,CAAC6hB,IAAI;EAC/B;EAEA,OAAO+nG,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAI,sCAAsC,CAACa,IAAI,CAACb,IAAI,CAAC;EAC9E;EAEAs/G,gBAAgBA,CAACtqE,MAAM,EAAE;IACvB,MAAMuqE,SAAS,GAAGvqE,MAAM,CAACjpD,OAAO,CAAC,IAAI,CAAC;IACtC,MAAMqjC,MAAM,GAAGp3C,QAAQ,CAACg9D,MAAM,CAACv7C,SAAS,CAAC,CAAC,EAAE8lH,SAAS,CAAC,EAAE,EAAE,CAAC;IAC3D,MAAMC,UAAU,GAAGxqE,MAAM,CAACjpD,OAAO,CAAC,IAAI,EAAEwzH,SAAS,GAAG,CAAC,CAAC;IACtD,IAAIt9F,OAAO,GAAG+yB,MAAM,CAAC17D,KAAK,CAACimI,SAAS,GAAG,CAAC,EAAEC,UAAU,CAAC,CAACrvG,IAAI,CAAC,CAAC;IAC5D,IAAI8R,OAAO,CAACp0C,MAAM,KAAK,CAAC,EAAE;MACxBo0C,OAAO,GAAG,IAAI,CAACo9F,SAAS;IAC1B;IAEA,MAAMI,aAAa,GAAGD,UAAU,GAAGxqE,MAAM,CAACv7C,SAAS,CAAC+lH,UAAU,CAAC,CAACjmH,MAAM,CAAC,IAAI,CAAC;IAC5E,IAAI,CAAC6lH,SAAS,GAAGpqE,MAAM,CAACv7C,SAAS,CAACgmH,aAAa,CAAC,CAAC/iI,KAAK,CAAC,gBAAgB,CAAC;IACxE,IAAI,CAACrH,MAAM,CAACyP,KAAK,CAACsqC,MAAM,CAAC,IAAK,IAAI,CAACgwF,SAAS,CAACvxI,MAAM,GAAG,CAAC,KAAKuhD,MAAO,EAAE;MACnE,IAAI,CAACzQ,QAAQ,CAACjmC,KAAK,GAAG;QACpB2f,OAAO,EAAE;MACX,CAAC;MACD;IACF;IAEA,IAAI,CAACsmB,QAAQ,CAACghB,QAAQ,CAACgkE,MAAM,GAAG,KAAK;IACrC,IAAI,CAAChlF,QAAQ,CAAC5iB,IAAI,GAAGkmB,OAAO;EAC9B;EAEAy9F,cAAcA,CAAA,EAAG;IACf,MAAMnvG,GAAG,GAAG,IAAI;IAChB,MAAMhiB,MAAM,GAAG,GAAG;IAClB,MAAMC,SAAS,GAAG,CAAC;IACnB,MAAM+pB,UAAU,GAAG,CAAC;IACpB,MAAM7H,MAAM,GAAG,CAAC;IAEhB,MAAMmG,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACiK,QAAQ,CAAC,GAAG,CAAC;IACzC,MAAMvY,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,CAAC;IAE/C,KAAK,IAAIjqC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACwpI,SAAS,CAACvxI,MAAM,GAAG,CAAC,EAAE+H,CAAC,EAAE,EAAE;MAClD,MAAM+pI,KAAK,GAAG,IAAI,CAACP,SAAS,CAACxpI,CAAC,CAAC,CAAC8G,KAAK,CAAC,QAAQ,CAAC;MAE/C,IAAIijI,KAAK,CAAC9xI,MAAM,KAAK,CAAC,EAAE;QACtB,IAAI,CAAC8wC,QAAQ,CAACjmC,KAAK,GAAG;UACpB2f,OAAO,EAAE;QACX,CAAC;QACD;MACF;MAEA,MAAMmY,MAAM,GAAG56B,CAAC,GAAG,CAAC;MACpB,MAAMmmB,IAAI,GAAG4jH,KAAK,CAAC,CAAC,CAAC;MACrB,MAAMrnG,GAAG,GAAG,IAAIlC,iGAAa,CAACwuF,UAAU,CAAC+a,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE/a,UAAU,CAAC+a,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE/a,UAAU,CAAC+a,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MAC/F,MAAMvpI,IAAI,GAAG07B,iBAAO,CAACkB,SAAS,CAACjX,IAAI,CAAC;MACpC,MAAMuU,IAAI,GAAGje,SAAS;MAEtBge,OAAO,CAACgI,OAAO,CAACtc,IAAI,EAAE3lB,IAAI,EAAEkiC,GAAG,EAAEhI,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEjiB,MAAM,EAAEC,SAAS,EAAE+pB,UAAU,EAAE7H,MAAM,CAAC;IAC5F;IAEA,MAAMwyB,QAAQ,GAAG,IAAIgH,kBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAAC5iB,IAAI,EAAE,CAAC,CAAC;IACnEmnC,QAAQ,CAAC/jB,QAAQ,GAAG9O,OAAO;IAC3B,IAAI,CAACsO,QAAQ,CAAC8gB,UAAU,CAAC,CAAC,CAAC,GAAGyD,QAAQ;EACxC;EAEA6gE,SAASA,CAAA,EAAG;IACV,MAAMrqG,MAAM,GAAG,IAAI,CAACilB,QAAQ,GAAG,IAAIugB,iBAAO,CAAC,CAAC;IAE5C,IAAI,CAACogF,gBAAgB,CAAC,IAAI,CAACh4E,KAAK,CAAC;IACjC,IAAI,CAACo4E,cAAc,CAAC,CAAC;IAErB,IAAI,CAAC/gG,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,IAAI;MACrBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;IAEF,IAAI,CAACtnF,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACygG,SAAS,GAAG,IAAI;IAErB,IAAI1lH,MAAM,CAAChhB,KAAK,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC+gB,MAAM,CAAChhB,KAAK,CAAC2f,OAAO,CAAC;IACvC;IACA,OAAOqB,MAAM;EACf;EAEA,OAAOkqG,OAAO,GAAG,CAAC,KAAK,CAAC;EAExB,OAAOh2B,UAAU,GAAG,CAAC,MAAM,CAAC;AAC9B;AAEA,wDAAeuxC,SAAS;;ACzGO;AACR;AACO;AACA;AAE9B,MAAM;EAAEjgF,OAAO;EAAEptB,OAAOA,uBAAAA;AAAC,CAAC,GAAGkgD,IAAI;AAEjC,MAAM4tD,aAAa,SAAS9gI,MAAM,CAAC;EACjCoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACsoH,QAAQ,CAACkE,QAAQ,GAAG,cAAc;EACzC;EAEA,OAAO5C,gBAAgBA,CAAC9jG,IAAI,EAAE;IAC5B,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG;EAC5C;EAEA+jG,SAASA,CAAA,EAAG;IACV,IAAI,CAACrrG,MAAM,CAACnB,IAAI,CAAC,8BAA8B,CAAC;IAChD,OAAO,IAAI,CAACs/G,UAAU,CAAC5+H,IAAI,CAACC,KAAK,CAAC,IAAI,CAACovD,KAAK,CAAC,CAAC;EAChD;EAEAuvE,UAAUA,CAACgJ,QAAQ,EAAE;IACnB,MAAMrnG,OAAO,GAAG,IAAI0mB,qBAAO,CAAC,CAAC;IAC7B,MAAM63E,WAAW,GAAG8I,QAAQ,CAACC,YAAY,IAAID,QAAQ,CAACC,YAAY,CAAC,CAAC,CAAC;IACrE,IAAI/I,WAAW,EAAE;MACf,IAAI,CAACC,aAAa,CAACx+F,OAAO,EAAEu+F,WAAW,CAAC;MACxCv+F,OAAO,CAAC0P,QAAQ,CAAC;QACf0a,eAAe,EAAE,KAAK;QACtBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;QAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV;MACnC,CAAC,CAAC;IACJ;IACA,OAAOkP,OAAO;EAChB;EAEAw+F,aAAaA,CAACx+F,OAAO,EAAEu+F,WAAW,EAAE;IAClC,IAAIgJ,IAAI,GAAGhJ,WAAW,CAACpgG,KAAK,IAAIogG,WAAW,CAACpgG,KAAK,CAACqpG,GAAG;IACrD,IAAIhyE,QAAQ,GAAG+xE,IAAI,IAAIhJ,WAAW,CAACpgG,KAAK,CAAC7oB,OAAO;IAChD,IAAI,CAACkgD,QAAQ,IAAI+xE,IAAI,CAAClyI,MAAM,KAAKmgE,QAAQ,CAACngE,MAAM,EAAE;MAChD,MAAM,IAAI8K,KAAK,CAAC,+BAA+B,CAAC;IAClD;IACAq1D,QAAQ,GAAG52D,4GAAW,CAACA,sGAAK,CAAC2oI,IAAI,EAAE/xE,QAAQ,CAAC,CAAC;IAC7C,MAAMr3B,KAAK,GAAG,CAAC,CAAC;IAEhB,MAAMwpG,MAAM,GAAGpJ,WAAW,CAACoJ,MAAM,IAAIpJ,WAAW,CAACoJ,MAAM,CAAC,CAAC,CAAC;IAC1D,MAAMlc,KAAK,GAAGkc,MAAM,IAAIA,MAAM,CAACC,UAAU,IAAID,MAAM,CAACC,UAAU,CAAC,CAAC,CAAC;IACjE,MAAMpyD,EAAE,GAAGi2C,KAAK,IAAIA,KAAK,CAACngH,CAAC;IAC3B,MAAMmqE,EAAE,GAAGg2C,KAAK,IAAIA,KAAK,CAAC17G,CAAC;IAC3B,MAAM2lE,EAAE,GAAI+1C,KAAK,IAAIA,KAAK,CAACr6G,CAAC,IAAK,EAAE;IACnCm2H,IAAI,GAAGI,MAAM,IAAIA,MAAM,CAACH,GAAG;IAC3B,IAAI,CAACD,IAAI,IAAI,CAAC/xD,EAAE,IAAI,CAACC,EAAE,EAAE;MACvB,MAAM,IAAIt1E,KAAK,CAAC,uCAAuC,CAAC;IAC1D;IAEA,MAAMk+B,KAAK,GAAG2B,OAAO,CAACoQ,QAAQ,CAAC,GAAG,CAAC;IACnC,MAAMvY,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,CAAC;IAE/C,KAAK,IAAIjqC,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGkqI,IAAI,CAAClyI,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;MAC3C,MAAMoqI,GAAG,GAAGD,IAAI,CAACnqI,CAAC,CAAC;MACnB,MAAMkY,OAAO,GAAGgkB,qBAAO,CAACc,cAAc,CAACo7B,QAAQ,CAACgyE,GAAG,CAAC,CAAC;MACrD,MAAM1nG,GAAG,GAAG,IAAIlC,iGAAa,CAAC43C,EAAE,CAACp4E,CAAC,CAAC,EAAEq4E,EAAE,CAACr4E,CAAC,CAAC,EAAEs4E,EAAE,CAACt4E,CAAC,CAAC,IAAI,GAAG,CAAC;MACzD+gC,KAAK,CAACqpG,GAAG,CAAC,GAAG3vG,OAAO,CAACgI,OAAO,CAACvqB,OAAO,CAACiO,IAAI,EAAEjO,OAAO,EAAEwqB,GAAG,EAAEjmB,SAAS,EAAE,IAAI,EAAE2tH,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IAClG;IAEA,MAAMK,KAAK,GAAGtJ,WAAW,CAAChmG,KAAK,IAAIgmG,WAAW,CAAChmG,KAAK,CAACuvG,IAAI;IACzD,MAAMC,KAAK,GAAGxJ,WAAW,CAAChmG,KAAK,IAAIgmG,WAAW,CAAChmG,KAAK,CAACyvG,IAAI;IACzD,MAAMC,MAAM,GAAI1J,WAAW,CAAChmG,KAAK,IAAIgmG,WAAW,CAAChmG,KAAK,CAACyC,KAAK,IAAK,EAAE;IACnE,IAAI,CAAC6sG,KAAK,IAAI,CAACE,KAAK,IAAIF,KAAK,CAACxyI,MAAM,KAAK0yI,KAAK,CAAC1yI,MAAM,EAAE;MACrD;IACF;IAEA,KAAK,IAAI2b,CAAC,GAAG,CAAC,EAAE7F,CAAC,GAAG08H,KAAK,CAACxyI,MAAM,EAAE2b,CAAC,GAAG7F,CAAC,EAAE,EAAE6F,CAAC,EAAE;MAC5CgvB,OAAO,CAACuW,OAAO,CAACpY,KAAK,CAAC0pG,KAAK,CAAC72H,CAAC,CAAC,CAAC,EAAEmtB,KAAK,CAAC4pG,KAAK,CAAC/2H,CAAC,CAAC,CAAC,EAAEi3H,MAAM,CAACj3H,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC;IAC5E;EACF;AACF;AAEAo2H,aAAa,CAAChc,OAAO,GAAG,CAAC,SAAS,EAAE,cAAc,EAAE,IAAI,CAAC;AACzDgc,aAAa,CAAChyC,UAAU,GAAG,CAAC,OAAO,CAAC;AAEpC,4DAAegyC,aAAa;;ACjFL;AAER,MAAMc,SAAS,CAAC;EAC7Bx/H,WAAWA,CAAC8e,IAAI,EAAE;IAChB,IAAI,CAAC2gH,QAAQ,GAAG3gH,IAAI,CAACtjB,KAAK,CAAC,UAAU,CAAC;IACtC,IAAI,CAACkkI,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,kBAAkB,GAAG,CAAC;EAC7B;EAEAC,QAAQA,CAACzsH,KAAK,EAAE;IACd,IAAIA,KAAK,IAAI,IAAI,CAACssH,QAAQ,CAAC9yI,MAAM,EAAE;MACjC,IAAI,CAAC+yI,aAAa,GAAG,IAAI,CAACD,QAAQ,CAAC9yI,MAAM,GAAG,CAAC;MAC7C,IAAI,CAACgzI,kBAAkB,GAAG,IAAI,CAACF,QAAQ,CAAC9yI,MAAM,GAAG,CAAC;IACpD,CAAC,MAAM;MACL,IAAI,CAAC+yI,aAAa,GAAGvsH,KAAK;MAC1B,IAAI,CAACwsH,kBAAkB,GAAGxsH,KAAK;IACjC;EACF;EAEA0sH,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAACJ,QAAQ,CAAC,EAAE,IAAI,CAACE,kBAAkB,CAAC;EACjD;EAEAG,gBAAgBA,CAAA,EAAG;IACjB,OAAO,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACE,kBAAkB,CAAC;EAC/C;EAEAI,kBAAkBA,CAACC,IAAI,EAAE;IACvB,IAAI,CAACL,kBAAkB,GAAG,IAAI,CAACD,aAAa,GAAGM,IAAI;IACnD,OAAO,IAAI,CAACP,QAAQ,CAAC,IAAI,CAACC,aAAa,GAAGM,IAAI,CAAC;EACjD;EAEAC,gBAAgBA,CAAA,EAAG;IACjB,IAAIC,MAAM,GAAG,IAAI,CAACL,aAAa,CAAC,CAAC;IACjC,IAAI9lH,GAAG,GAAG,KAAK;IACf,OAAO,CAAC7jB,8GAAa,CAACgqI,MAAM,CAAC,IAAIA,MAAM,CAACjxG,IAAI,CAAC,CAAC,KAAK,MAAM,EAAE;MACzD,IAAIixG,MAAM,CAAC7lI,KAAK,CAAC,YAAY,CAAC,EAAE;QAC9B0f,GAAG,GAAG,IAAI;QACV;MACF;MACAmmH,MAAM,GAAG,IAAI,CAACL,aAAa,CAAC,CAAC;IAC/B;IAEA,OAAO9lH,GAAG;EACZ;EAEAomH,qBAAqBA,CAAA,EAAG;IACtB,IAAID,MAAM,GAAG,IAAI,CAACJ,gBAAgB,CAAC,CAAC;IACpC,OAAO,CAAC5pI,8GAAa,CAACgqI,MAAM,CAAC,IAAIA,MAAM,CAACjxG,IAAI,CAAC,CAAC,KAAK,MAAM,EAAE;MACzDixG,MAAM,GAAG,IAAI,CAACL,aAAa,CAAC,CAAC;IAC/B;IACA,IAAI,CAACD,QAAQ,CAAC,EAAE,IAAI,CAACD,kBAAkB,CAAC;IACxC,OAAO,IAAI,CAACS,uBAAuB,CAAC,CAAC;EACvC;EAEAA,uBAAuBA,CAAA,EAAG;IACxB,OAAO,IAAI,CAACT,kBAAkB,GAAG,IAAI,CAACF,QAAQ,CAAC9yI,MAAM,GAAG,CAAC;EAC3D;AACF;;AC1D+B;AACR;AACO;AACA;AACM;AACO;AAE3C,MAAM;EACJqxD,OAAO;EACPptB,OAAO;EACPwB,IAAI;EACJ42B,QAAQA,oBAAAA;AACV,CAAC,GAAG8nB,IAAI;AAER,MAAMuvD,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC7C,MAAMC,QAAQ,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACzC,MAAMC,OAAO,GAAG,CACdnuG,cAAI,CAAC6C,QAAQ,CAACjD,OAAO;AAAE;AACvBI,cAAI,CAAC6C,QAAQ,CAAChD,QAAQ;AAAE;AACxBG,cAAI,CAAC6C,QAAQ,CAAChD,QAAQ;AAAE;AACxBG,cAAI,CAAC6C,QAAQ,CAAChD,QAAQ;AAAE;AACxBG,cAAI,CAAC6C,QAAQ,CAAC/C,QAAQ;AAAE;AACxBE,cAAI,CAAC6C,QAAQ,CAACjD,OAAO;AAAE;AACvBI,cAAI,CAAC6C,QAAQ,CAAC/C,QAAQ;AAAE;AACxBE,cAAI,CAAC6C,QAAQ,CAAC/C,QAAQ,CAAE;AACxB;AACA;AACA;AAAA,CACD;AAED,MAAMsuG,eAAe,GAAG,2CAA2C;AACnE,MAAMC,SAAS,GAAG,2BAA2B;AAE7C,MAAMC,UAAU,GAAG;EAAEC,GAAG,EAAE,KAAK;EAAEC,GAAG,EAAE;AAAM,CAAC;AAE7C,MAAMC,gBAAgB,GAAG,CAAC,gCAAgC,EAAE,mBAAmB,EAAE,UAAU,EAAE,UAAU,CAAC;AACxG,MAAMC,cAAc,GAAG,CAAC,sBAAsB,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC;AACpF,MAAMC,iBAAiB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,aAAa,EAAE,MAAM,CAAC;AACnF,MAAMC,SAAS,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC;AACzC,MAAMC,IAAI,GAAG;EAAEpmH,IAAI,EAAEgmH,gBAAgB;EAAEhtH,EAAE,EAAEitH,cAAc;EAAE/X,KAAK,EAAEgY;AAAkB,CAAC;AAErF,SAASG,YAAYA,CAACvkI,KAAK,EAAE;EAC3B,IAAI,CAACA,KAAK,EAAE;IACV,OAAO,GAAG;EACZ;EAEA,MAAMwkI,KAAK,GAAG,EAAE;EAChB,OAAOxkI,KAAK,EAAE;IACZwkI,KAAK,CAACroI,IAAI,CAAC,EAAE,GAAI6D,KAAK,GAAG,EAAG,CAAC;IAC7BA,KAAK,GAAG9H,IAAI,CAACusI,KAAK,CAACzkI,KAAK,GAAG,EAAE,CAAC;EAChC;EACA,IAAIwkI,KAAK,CAACx0I,MAAM,GAAG,CAAC,EAAE;IACpBw0I,KAAK,CAACE,OAAO,CAAC,CAAC;IACfF,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC;EACf;EAEA,OAAOlqI,MAAM,CAACiT,YAAY,CAAC,GAAGi3H,KAAK,CAAC;AACtC;AAEe,MAAMG,SAAS,SAAS1jI,MAAM,CAAC;EAC5CoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACuoI,OAAO,GAAG,KAAK;IACpB,IAAI,CAAC9jG,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACjN,MAAM,GAAG,IAAI;IAClB,IAAI,CAACgzE,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACjlD,UAAU,GAAG,IAAI;IACtB,IAAI,CAACijF,SAAS,GAAG,CAAC,CAAC;IACnB,IAAI,CAACA,SAAS,CAAC5hF,SAAS,GAAG,EAAE;IAC7B,IAAI,CAAC6hF,gBAAgB,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACC,aAAa,GAAG,CAAC,CAAC;IACvB,IAAI,CAACC,WAAW,GAAG,EAAE;IACrB,IAAI,CAACC,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,aAAa,GAAG,EAAE;EACzB;EAEAjf,gBAAgBA,CAAC9jG,IAAI,EAAE;IACrB,OAAO5oB,2GAAU,CAAC4oB,IAAI,CAAC,IAAI0hH,eAAe,CAAC7gH,IAAI,CAACb,IAAI,CAAC;EACvD;EAEAkkG,YAAYA,CAACI,MAAM,EAAE;IACnB,MAAMphE,QAAQ,GAAG,CAAC,CAAC;IACnBA,QAAQ,CAACnnC,IAAI,GAAGuoG,MAAM,CAAC2c,kBAAkB,CAAC,CAAC,CAAC;IAC5C,MAAMlX,IAAI,GAAG/xH,QAAQ,CAACssH,MAAM,CAAC2c,kBAAkB,CAAC,CAAC,CAAC,CAACtkI,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAACwzB,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC;IAC5E+yB,QAAQ,CAAC6mE,IAAI,GAAGA,IAAI,CAACl2H,QAAQ,CAAC,CAAC,IAAI,EAAE;IACrCqvD,QAAQ,CAAC+mE,KAAK,GAAG3F,MAAM,CAAC2c,kBAAkB,CAAC,CAAC,CAAC;IAC7C,IAAI,CAACyB,SAAS,CAAC5hF,SAAS,CAAC9mD,IAAI,CAACkpD,QAAQ,CAAC;EACzC;EAEA8/E,WAAWA,CAAC1e,MAAM,EAAE32E,QAAQ,EAAE;IAC5B,IAAIyzF,MAAM;IACV,IAAI5wG,MAAM,GAAG,IAAI,CAACsyG,YAAY;;IAE9B;IACA,MAAMzb,OAAO,GAAG+a,YAAY,CAAC,IAAI,CAACQ,aAAa,CAAC;IAChD,MAAMziF,OAAO,GAAG,KAAK;IACrB,MAAMmnE,MAAM,GAAG,CAAC;IAEhB,IAAI,CAAC51F,MAAM,GAAG,IAAI,CAACiN,QAAQ,CAAC3G,QAAQ,CAACqvF,OAAO,CAAC,IAAI,IAAI,CAAC1oF,QAAQ,CAACiK,QAAQ,CAACy+E,OAAO,CAAC;IAChF,IAAI,CAAC3iB,QAAQ,GAAG,IAAI,CAAChzE,MAAM,CAACmO,UAAU,CAACsgB,OAAO,EAAEmnE,MAAM,EAAE,GAAG,CAAC;IAE5D,KAAK,IAAI1xH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+3C,QAAQ,EAAE/3C,CAAC,EAAE,EAAE;MACjCwrI,MAAM,GAAG9c,MAAM,CAACyc,aAAa,CAAC,CAAC;MAC/BvwG,MAAM,EAAE;MACR,MAAM1sB,CAAC,GAAG8gH,UAAU,CAACwc,MAAM,CAACzkI,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC1C,MAAM4L,CAAC,GAAGq8G,UAAU,CAACwc,MAAM,CAACzkI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MAC3C,MAAMiN,CAAC,GAAGg7G,UAAU,CAACwc,MAAM,CAACzkI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MAC3C,MAAM+zB,MAAM,GAAG6wG,SAAS,CAACvpI,QAAQ,CAACopI,MAAM,CAACzkI,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC5D,MAAM27B,GAAG,GAAG,IAAIlC,iGAAa,CAACtyB,CAAC,EAAEyE,CAAC,EAAEqB,CAAC,CAAC;MACtC,IAAImS,IAAI,GAAGqlH,MAAM,CAACzkI,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAACwzB,IAAI,CAAC,CAAC,CAAC56B,WAAW,CAAC,CAAC;MACpD,MAAMa,IAAI,GAAG07B,iBAAO,CAACkB,SAAS,CAACjX,IAAI,CAAC;MACpC,IAAI,CAAC,IAAI,CAACgnH,aAAa,CAAChnH,IAAI,CAAC,EAAE;QAC7B,IAAI,CAACgnH,aAAa,CAAChnH,IAAI,CAAC,GAAG,CAAC;MAC9B;MACA,IAAI,CAACgnH,aAAa,CAAChnH,IAAI,CAAC,IAAI,CAAC;MAC7BA,IAAI,IAAI,IAAI,CAACgnH,aAAa,CAAChnH,IAAI,CAAC,CAAC,CAAC;;MAElC,IAAI,CAAC2oF,QAAQ,CAACrsE,OAAO,CAACtc,IAAI,EAAE3lB,IAAI,EAAEkiC,GAAG,EAAEjmB,SAAS,EAAE,IAAI,EAAEme,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAEE,MAAM,CAAC;IACxF;EACF;EAEAuyG,WAAWA,CAAC3e,MAAM,EAAE4e,QAAQ,EAAE;IAC5B,IAAI9B,MAAM;IAEV,KAAK,IAAIxrI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGstI,QAAQ,EAAEttI,CAAC,EAAE,EAAE;MACjCwrI,MAAM,GAAG9c,MAAM,CAACyc,aAAa,CAAC,CAAC;MAC/B,IAAI9gC,KAAK,GAAGjoG,QAAQ,CAACopI,MAAM,CAACzkI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAACmmI,YAAY;MACjE,IAAI5iC,KAAK,GAAGloG,QAAQ,CAACopI,MAAM,CAACzkI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAACmmI,YAAY;MACjE,MAAMK,QAAQ,GAAGnrI,QAAQ,CAACopI,MAAM,CAACzkI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;MAElD,IAAIsjG,KAAK,GAAGC,KAAK,EAAE;QACjB,CAACD,KAAK,EAAEC,KAAK,CAAC,GAAG,CAACA,KAAK,EAAED,KAAK,CAAC;MACjC;MACA,IAAI,CAACthE,QAAQ,CAACoQ,OAAO,CACnBkxD,KAAK,EACLC,KAAK,EACLshC,QAAQ,CAAC2B,QAAQ,CAAC,IAAI,CAAC,EACvB1B,OAAO,CAAC0B,QAAQ,CAAC,IAAI7vG,cAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAC1C,IACF,CAAC;IACH;EACF;EAEAkwG,SAASA,CAAC9e,MAAM,EAAE;IAChB,IAAI,CAACse,aAAa,EAAE;IAEpB,IAAI,CAAC1e,YAAY,CAACI,MAAM,CAAC;IACzB,MAAM+e,UAAU,GAAG/e,MAAM,CAAC2c,kBAAkB,CAAC,CAAC,CAAC;IAC/C,MAAMtzF,QAAQ,GAAG31C,QAAQ,CAACqrI,UAAU,CAAC1mI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;IACtD,MAAMumI,QAAQ,GAAGlrI,QAAQ,CAACqrI,UAAU,CAAC1mI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;IACtD,IAAI,CAACqmI,WAAW,CAAC1e,MAAM,EAAE32E,QAAQ,CAAC;IAClC,IAAI,CAACs1F,WAAW,CAAC3e,MAAM,EAAE4e,QAAQ,CAAC;IAElC,IAAI,CAACJ,YAAY,IAAIn1F,QAAQ;IAE7B,IAAI,CAAC+0F,SAAS,CAAC5hF,SAAS,CAAC,IAAI,CAAC8hF,aAAa,CAAC,CAAChkG,SAAS,GAAG,EAAE;IAC3D,IAAI,CAAC8jG,SAAS,CAAC5hF,SAAS,CAAC,IAAI,CAAC8hF,aAAa,CAAC,CAAChkG,SAAS,CAAC5kC,IAAI,CAAC,IAAI,CAAC0qG,QAAQ,CAAC;EAC5E;EAEA4+B,cAAcA,CAAChf,MAAM,EAAE;IACrB,MAAMxvG,GAAG,GAAGwvG,MAAM,CAAC0c,gBAAgB,CAAC,CAAC;IAErC,IAAIhhH,IAAI,GAAG,EAAE;IACb,IAAIohH,MAAM,GAAG9c,MAAM,CAACyc,aAAa,CAAC,CAAC;;IAEnC;IACA,OAAOK,MAAM,CAACjxG,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MAC3BnQ,IAAI,CAAChmB,IAAI,CAAConI,MAAM,CAAC;MACjBA,MAAM,GAAG9c,MAAM,CAACyc,aAAa,CAAC,CAAC;IACjC;IACA,IAAI/gH,IAAI,CAACnyB,MAAM,KAAK,CAAC,EAAE;MACrB,CAACmyB,IAAI,CAAC,GAAGA,IAAI;IACf;IACA,IAAI,CAAC2iH,gBAAgB,CAAC7tH,GAAG,CAAC3X,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAACgzB,IAAI,CAAC,CAAC,CAAC,GAAGnQ,IAAI;EAC/D;EAEAujH,cAAcA,CAACjf,MAAM,EAAE;IACrB,IAAI,CAAC8e,SAAS,CAAC9e,MAAM,CAAC;;IAEtB;IACA,IAAI,IAAI,CAACme,OAAO,KAAKb,UAAU,CAACC,GAAG,EAAE;MACnC,IAAI,CAACc,gBAAgB,GAAG,CAAC,CAAC;MAC1B,OAAOre,MAAM,CAAC6c,gBAAgB,CAAC,CAAC,EAAE;QAChC,IAAI,CAACmC,cAAc,CAAChf,MAAM,CAAC;MAC7B;MACA,IAAI7sH,MAAM,CAACiQ,IAAI,CAAC,IAAI,CAACi7H,gBAAgB,CAAC,CAAC90I,MAAM,KAAK,CAAC,EAAE;QACnD,MAAMq1D,QAAQ,GAAG,IAAI,CAACw/E,SAAS,CAAC5hF,SAAS,CAAC,IAAI,CAAC8hF,aAAa,CAAC;QAC7D1/E,QAAQ,CAACsgF,KAAK,GAAG,IAAI,CAACb,gBAAgB;QACtC,IAAI,CAACc,wBAAwB,CAACvgF,QAAQ,CAAC;MACzC;IACF;EACF;EAEAyjE,cAAcA,CAAA,EAAG;IACf,MAAMpmF,aAAa,GAAG,IAAI,CAAC0lF,cAAc;IACzC,MAAMztF,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,MAAM5N,KAAK,GAAGyH,OAAO,CAACmR,MAAM;IAC5B,KAAK,IAAIngC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGunB,KAAK,CAACljC,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACrC,MAAMuY,IAAI,GAAGgP,KAAK,CAACvnB,CAAC,CAAC;MACrB,IAAIuY,IAAI,CAAC4R,MAAM,GAAG5R,IAAI,CAAC2R,KAAK,EAAE;QAC5B/b,OAAO,CAACc,GAAG,CAAC,8BAA8B,CAAC;MAC7C;MACAsJ,IAAI,CAAC2R,KAAK,GAAG6M,aAAa,CAACxe,IAAI,CAAC2R,KAAK,CAAC,IAAI,IAAI;MAC9C3R,IAAI,CAAC4R,MAAM,GAAG4M,aAAa,CAACxe,IAAI,CAAC4R,MAAM,CAAC,IAAI,IAAI;IAClD;EACF;EAEA+vG,gBAAgBA,CAAA,EAAG;IACjB,MAAMt7F,MAAM,GAAG,IAAI,CAACzJ,QAAQ,CAACwc,OAAO;IAEpC,IAAI/S,MAAM,CAACv6C,MAAM,KAAK,CAAC,EAAE;MACvB,OAAO,IAAI,CAACg1I,WAAW;IACzB;IAEA,KAAK,IAAIjtI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwyC,MAAM,CAACv6C,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACtC,MAAMovH,QAAQ,GAAG,IAAI78E,aAAQ,CAAC,IAAI,CAACxJ,QAAQ,CAAC;MAC5C,MAAMmK,MAAM,GAAG,IAAI1S,iGAAa,CAAC,CAAC;MAClC4uF,QAAQ,CAACn8E,SAAS,CAACC,MAAM,CAAC;MAC1Bk8E,QAAQ,CAACp8E,QAAQ,CAACR,MAAM,CAACxyC,CAAC,CAAC,CAACqjC,KAAK,CAAC;MAClC,IAAI,CAAC4pG,WAAW,CAAC7oI,IAAI,CAACgrH,QAAQ,CAAC;IACjC;IAEA,OAAO,IAAI,CAAC6d,WAAW;EACzB;EAEAc,eAAeA,CAAA,EAAG;IAChB,IAAI,CAAChlG,QAAQ,CAAC8gB,UAAU,GAAG,EAAE;IAC7B,MAAM;MAAEqB;IAAU,CAAC,GAAG,IAAI,CAAC4hF,SAAS;IACpC,KAAK,IAAI9sI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkrD,SAAS,CAACjzD,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACzC,MAAMstD,QAAQ,GAAG,IAAIgH,kBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAEmiB,SAAS,CAAClrD,CAAC,CAAC,CAACmmB,IAAI,EAAEnmB,CAAC,GAAG,CAAC,CAAC;MACtEstD,QAAQ,CAAC/jB,QAAQ,GAAG2hB,SAAS,CAAClrD,CAAC,CAAC,CAACgpC,SAAS;MAC1C,IAAI,CAACD,QAAQ,CAAC8gB,UAAU,CAAC7pD,CAAC,CAAC,GAAGstD,QAAQ;IACxC;IAEA,OAAO,IAAI,CAACvkB,QAAQ,CAAC8gB,UAAU;EACjC;EAEAmkF,UAAUA,CAAC9uH,GAAG,EAAE0uH,KAAK,EAAE;IACrB,KAAK,IAAI5tI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4tI,KAAK,CAAC31I,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACrC,IAAKkf,GAAG,YAAYuF,MAAM,IAAIvF,GAAG,CAAC+L,IAAI,CAAC2iH,KAAK,CAAC5tI,CAAC,CAAC,CAACkf,GAAG,CAAC,IAAKA,GAAG,KAAK0uH,KAAK,CAAC5tI,CAAC,CAAC,CAACkf,GAAG,EAAE;QAC7E,OAAO0uH,KAAK,CAAC5tI,CAAC,CAAC,CAACoqB,IAAI;MACtB;IACF;IACA,OAAO3N,SAAS;EAClB;EAEAwxH,UAAUA,CAACC,QAAQ,EAAEN,KAAK,EAAE;IAC1B,KAAK,IAAIh6H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGs6H,QAAQ,CAACj2I,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACxC,MAAMyR,GAAG,GAAG,IAAI,CAAC2oH,UAAU,CAACE,QAAQ,CAACt6H,CAAC,CAAC,EAAEg6H,KAAK,CAAC;MAC/C,IAAIvoH,GAAG,EAAE;QACP,OAAOA,GAAG;MACZ;IACF;IACA,OAAO5I,SAAS;EAClB;EAEAoxH,wBAAwBA,CAACvgF,QAAQ,EAAE;IACjC,IAAIjoC,GAAG,GAAG,KAAK;IACf,KAAK,IAAIrlB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGssI,SAAS,CAACr0I,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACzC,MAAMmuI,gBAAgB,GAAG5B,IAAI,CAACD,SAAS,CAACtsI,CAAC,CAAC,CAAC;MAC3C,MAAMoqB,IAAI,GAAG,IAAI,CAAC6jH,UAAU,CAACE,gBAAgB,EAAE7gF,QAAQ,CAACsgF,KAAK,CAAC;MAC9D,IAAIxjH,IAAI,EAAE;QACRkjC,QAAQ,CAACg/E,SAAS,CAACtsI,CAAC,CAAC,CAAC,GAAGoqB,IAAI;QAC7B/E,GAAG,GAAG,IAAI;MACZ;IACF;IAEAioC,QAAQ,CAACnnC,IAAI,GAAGmnC,QAAQ,CAACnnC,IAAI,IAAImnC,QAAQ,CAACnuC,EAAE;IAC5C,IAAImuC,QAAQ,CAACnnC,IAAI,CAACxgB,KAAK,CAAC,OAAO,CAAC,EAAE;MAChC2nD,QAAQ,CAACnnC,IAAI,GAAG,QAAQmnC,QAAQ,CAACnnC,IAAI,EAAE;IACzC;IAEA,OAAOd,GAAG;EACZ;EAEA+oH,iBAAiBA,CAAA,EAAG;IAClB,MAAM;MAAEljF;IAAU,CAAC,GAAG,IAAI,CAAC4hF,SAAS;IACpC,MAAM;MAAE/iF;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClC,MAAMnG,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,IAAImiB,SAAS,CAACjzD,MAAM,KAAK,CAAC,EAAE;MAC1B2qC,OAAO,CAACzc,IAAI,GAAG+kC,SAAS,CAAC,CAAC,CAAC,CAAC/kC,IAAI;MAChC4jC,QAAQ,CAACsqE,KAAK,GAAGnpE,SAAS,CAAC,CAAC,CAAC,CAACmpE,KAAK;MACnCtqE,QAAQ,CAACoqE,IAAI,GAAGjpE,SAAS,CAAC,CAAC,CAAC,CAACipE,IAAI;MACjCpqE,QAAQ,CAACl6C,UAAU,GAAGq7C,SAAS,CAAC,CAAC,CAAC,CAAC0iF,KAAK;IAC1C,CAAC,MAAM,IAAI1iF,SAAS,CAACjzD,MAAM,GAAG,CAAC,EAAE;MAC/B8xD,QAAQ,CAACmB,SAAS,GAAG,EAAE;MACvB,KAAK,IAAIlrD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkrD,SAAS,CAACjzD,MAAM,EAAE+H,CAAC,EAAE,EAAE;QACzC+pD,QAAQ,CAACmB,SAAS,CAAC9mD,IAAI,CAAC;UACtB+hB,IAAI,EAAE+kC,SAAS,CAAClrD,CAAC,CAAC,CAACmmB,IAAI;UAAEguG,IAAI,EAAEjpE,SAAS,CAAClrD,CAAC,CAAC,CAACm0H,IAAI;UAAEE,KAAK,EAAEnpE,SAAS,CAAClrD,CAAC,CAAC,CAACq0H,KAAK;UAAExkH,UAAU,EAAEq7C,SAAS,CAAClrD,CAAC,CAAC,CAAC4tI;QACxG,CAAC,CAAC;MACJ;IACF;EACF;EAEAvoG,SAASA,CAAA,EAAG;IACV,MAAMsF,aAAa,GAAG,IAAI,CAAC0lF,cAAc,GAAG,CAAC,CAAC;IAC9C,MAAMtvF,KAAK,GAAG,IAAI,CAACgI,QAAQ,CAACxH,MAAM;IAElC,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACrC,MAAMksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;MACrB2qC,aAAa,CAACze,IAAI,CAAC0O,MAAM,CAAC,GAAG1O,IAAI;IACnC;IAEA,IAAI,CAAC6c,QAAQ,CAAC6jB,cAAc,CAAC,CAAC;IAC9B,IAAI,CAACmkE,cAAc,CAAC,CAAC;IACrB,IAAI,CAACqd,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACN,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAAC/kG,QAAQ,CAACkhB,KAAK,GAAG,IAAI,CAAClhB,QAAQ,CAACkhB,KAAK,CAACjoD,MAAM,CAAC,IAAI,CAACirI,WAAW,CAAC;IAClE,IAAI,CAACc,eAAe,CAAC,CAAC;IACtB,IAAI,CAAChlG,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,KAAK;MAAEI,mBAAmB,EAAE,KAAK;MAAEf,aAAa,EAAE,KAAK;MAAE1hB,aAAa,EAAE,IAAI,CAAC0lF;IAChG,CAAC,CAAC;EACJ;EAEAge,YAAYA,CAACjkH,IAAI,EAAE;IACjB,IAAI2jG,MAAM;IACV,IAAIge,SAAS,CAAC9gH,IAAI,CAACb,IAAI,CAAC,EAAE;MACxB2jG,MAAM,GAAGie,UAAU,CAACC,GAAG;IACzB,CAAC,MAAM;MACLle,MAAM,GAAGie,UAAU,CAACE,GAAG;IACzB;IAEA,OAAOne,MAAM;EACf;EAEAI,SAASA,CAAA,EAAG;IACV,MAAMrqG,MAAM,GAAG,IAAI,CAACilB,QAAQ,GAAG,IAAIugB,iBAAO,CAAC,CAAC;IAC5C,MAAMolE,MAAM,GAAG,IAAIoc,SAAS,CAAC,IAAI,CAACp5E,KAAK,CAAC;IAExC,IAAI,CAACm7E,OAAO,GAAG,IAAI,CAACwB,YAAY,CAAC,IAAI,CAAC38E,KAAK,CAAC;IAC5C5tC,MAAM,CAACimC,QAAQ,CAACgkE,MAAM,GAAG,IAAI,CAAC8e,OAAO;IAErC,GAAG;MACD,IAAI,CAACc,cAAc,CAACjf,MAAM,CAAC;IAC7B,CAAC,QAAQA,MAAM,CAAC+c,qBAAqB,CAAC,CAAC;IAEvC,IAAI,CAACpmG,SAAS,CAAC,CAAC;IAEhB,OAAOvhB,MAAM;EACf;AACF;AAEA8oH,SAAS,CAAC5e,OAAO,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC;AAClC4e,SAAS,CAAC50C,UAAU,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;;ACzVR;AACD;AACyB;;AAEvD;AACA,MAAMs2C,UAAU,GAAG;EACjB7H,MAAM,EAAE,CAACR,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACnC45H,MAAM,EAAE,CAACP,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACnCunE,IAAI,EAAE,CAAC8xD,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;EACjC+5H,QAAQ,EAAE,CAACV,SAAS,CAAClG,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;EACtC6G,MAAM,EAAE,CAACX,SAAS,CAACr5H,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC;EACpC2hI,GAAG,EAAE,CAACtI,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACpCnT,KAAK,EAAE,CAACkT,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE,CAAC;EACtCl3H,WAAW,EAAE,CAACi3H,SAAS,CAACC,QAAQ,EAAE,KAAK,EAAE,EAAE;AAC7C,CAAC;AAED,MAAMsI,SAAS,SAASrI,mBAAW,CAAC;EAClC7X,YAAYA,CAACgZ,OAAO,EAAE;IACpB,IAAI,CAACP,KAAK,GAAGO,OAAO;IACpB,IAAI,CAACT,WAAW,CAAC,CAAC;IAElB,MAAMM,MAAM,GAAG,CAAC,CAAC;IACjBA,MAAM,CAACsH,GAAG,GAAG,IAAIp8H,UAAU,CAAC,IAAI,CAAC00H,KAAK,CAAC;;IAEvC;IACA,IAAII,MAAM,CAACsH,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,EAAE;MAC1B,KAAK,IAAIzuI,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAGknI,MAAM,CAACsH,GAAG,CAACx2I,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAE,EAAED,CAAC,EAAE;QACjD,MAAM4B,GAAG,GAAGulI,MAAM,CAACsH,GAAG,CAACzuI,CAAC,CAAC;QACzBmnI,MAAM,CAACsH,GAAG,CAACzuI,CAAC,CAAC,GAAI,CAAC4B,GAAG,GAAG,IAAI,KAAK,CAAC,GAAMA,GAAG,IAAI,CAAC,GAAI,IAAK;MAC3D;IACF;IACA,IAAIulI,MAAM,CAACsH,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,EAAE;MAC1B,MAAM,IAAI1rI,KAAK,CAAC,yBAAyB,CAAC;IAC5C;IAEA,MAAM2kI,MAAM,GAAG,IAAI,CAACrB,OAAO;IAE3B,IAAI,CAACY,WAAW,CAACqH,UAAU,EAAEnH,MAAM,CAAC;IACpCO,MAAM,CAACf,QAAQ,CAAC/mG,cAAc,CAAC,GAAG,GAAG8nG,MAAM,CAAC14H,WAAW,CAAC;IACxD04H,MAAM,CAACd,MAAM,CAACtyH,OAAO,CAAC,CAAC4kD,KAAK,EAAEl5D,CAAC,EAAEgF,CAAC,KAAK;MAAEA,CAAC,CAAChF,CAAC,CAAC,IAAKG,IAAI,CAACC,EAAE,GAAG,KAAK,GAAIsnI,MAAM,CAAC14H,WAAW;IAAE,CAAC,CAAC;IAC3F04H,MAAM,CAAC6G,GAAG,IAAI,GAAG;EACnB;EAEAhH,eAAeA,CAAA,EAAG;IAChB,IAAI,CAACnB,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC;IACpB,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC;IACpB,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC;EACtB;EAEAoB,WAAWA,CAAA,EAAG;IACZ,MAAME,MAAM,GAAG,IAAI,CAACrB,OAAO;IAC3B,MAAM,CAACyB,KAAK,EAAEC,KAAK,EAAEC,KAAK,CAAC,GAAG,IAAI,CAACP,QAAQ,CAAC,CAAC;IAC7C,IAAI,CAACF,eAAe,CAAC,CAAC;IAEtB,IAAI,CAAC7wD,OAAO,CAACzX,eAAe,CAAC6oE,KAAK,EAAEJ,MAAM,CAACjB,MAAM,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC/vD,OAAO,CAACzX,eAAe,CAAC8oE,KAAK,EAAEL,MAAM,CAACjB,MAAM,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC/vD,OAAO,CAACzX,eAAe,CAAC+oE,KAAK,EAAEN,MAAM,CAACjB,MAAM,CAAC,CAAC,CAAC,CAAC;IAErDqB,KAAK,CAACloG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,CAAC;IACtCuB,KAAK,CAACnoG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,CAAC;IACtCwB,KAAK,CAACpoG,cAAc,CAAC8nG,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,CAAC;IAEtC,IAAI,CAAC2B,aAAa,CAACL,KAAK,EAAEC,KAAK,EAAEC,KAAK,CAAC;EACzC;EAEA0G,eAAeA,CAACtF,OAAO,EAAEuF,UAAU,EAAE36H,CAAC,EAAErB,CAAC,EAAEzE,CAAC,EAAE6jC,GAAG,EAAE/xC,CAAC,EAAE;IACpD,MAAM0nI,MAAM,GAAG,IAAI,CAACrB,OAAO;IAE3B,IAAIn4H,CAAC,GAAGw5H,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,IAAI7zH,CAAC,GAAG+0H,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,IAAIxyH,CAAC,GAAG0zH,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,EAAE;MACxE,MAAM7pH,GAAG,GAAGzO,CAAC,GAAGw5H,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,IAAI7zH,CAAC,GAAG+0H,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAGxyH,CAAC,CAAC;MAC7Do1H,OAAO,CAACzsH,GAAG,CAAC,GAAG,CAACgyH,UAAU,CAAC58F,GAAG,CAAC68F,OAAO,CAAC,GAAGlH,MAAM,CAAC3U,KAAK,IAAI2U,MAAM,CAAC6G,GAAG;MACpE,EAAEx8F,GAAG,CAAC68F,OAAO;IACf,CAAC,MAAM;MACL78F,GAAG,CAAC68F,OAAO,IAAI,CAAC,GAAG5uI,CAAC;MACpB,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb;EAEA6uI,eAAeA,CAACzF,OAAO,EAAEuF,UAAU,EAAEG,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEj9F,GAAG,EAAE;IAChE,KAAK,IAAIj6C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;MAC1B,MAAMkc,CAAC,GAAG,CAAC,GAAG86H,MAAM,GAAGh3I,CAAC;MACxB,KAAK,IAAI8b,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,EAAE;QAC1B,MAAMjB,CAAC,GAAG,CAAC,GAAGo8H,MAAM,GAAGn7H,CAAC;QACxB,IAAIq7H,OAAO,GAAG,IAAI;QAClB,IAAIjvI,CAAC,GAAG,CAAC;QACT,OAAOivI,OAAO,IAAIjvI,CAAC,GAAG,CAAC,EAAE;UACvB,MAAMkO,CAAC,GAAG,CAAC,GAAG8gI,MAAM,GAAGhvI,CAAC;UACxBivI,OAAO,GAAG,IAAI,CAACP,eAAe,CAACtF,OAAO,EAAEuF,UAAU,EAAE36H,CAAC,EAAErB,CAAC,EAAEzE,CAAC,EAAE6jC,GAAG,EAAE/xC,CAAC,CAAC;UACpEA,CAAC,EAAE;QACL;MACF;IACF;EACF;EAEAuoI,UAAUA,CAAA,EAAG;IACX,MAAMb,MAAM,GAAG,IAAI,CAACrB,OAAO;IAC3B,MAAMsI,UAAU,GAAG,IAAIr9H,UAAU,CAAC,IAAI,CAACy1H,KAAK,CAAC;IAC7C,MAAMqC,OAAO,GAAG,IAAIh3H,YAAY,CAACs1H,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAGkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAGkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,CAAC;IAExF,MAAM0I,MAAM,GAAG,IAAI1uG,iGAAa,CAACknG,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEkB,MAAM,CAAClB,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IAElG,MAAMz0F,GAAG,GAAG,CAAC,CAAC;IACdA,GAAG,CAAC68F,OAAO,GAAG,GAAG;IAEjB,KAAK,IAAIE,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGI,MAAM,CAACl7H,CAAC,EAAE,EAAE86H,MAAM,EAAE;MAChD,KAAK,IAAIC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGG,MAAM,CAACv8H,CAAC,EAAE,EAAEo8H,MAAM,EAAE;QAChD,KAAK,IAAIC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGE,MAAM,CAAChhI,CAAC,EAAE,EAAE8gI,MAAM,EAAE;UAChD,IAAI,CAACH,eAAe,CAACzF,OAAO,EAAEuF,UAAU,EAAEG,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAEj9F,GAAG,CAAC;QACxE;MACF;IACF;IACA,IAAI,CAACo9F,oBAAoB,CAAC/F,OAAO,CAAC;IAClC,OAAOA,OAAO;EAChB;EAEA+F,oBAAoBA,CAAC/F,OAAO,EAAE;IAC5B,IAAI,CAAC/C,OAAO,CAACtd,KAAK,IAAIqgB,OAAO,CAACnxI,MAAM;IACpC,IAAIm3I,UAAU,GAAG,CAAC;IAClB,IAAIC,UAAU,GAAGjG,OAAO,CAAC,CAAC,CAAC;IAC3B,IAAIkG,UAAU,GAAGlG,OAAO,CAAC,CAAC,CAAC;IAC3B,KAAK,IAAIx1H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGw1H,OAAO,CAACnxI,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACvCw7H,UAAU,IAAI,CAAC,IAAI,CAAC/I,OAAO,CAACtd,KAAK,GAAGqgB,OAAO,CAACx1H,CAAC,CAAC,KAAK,CAAC;MAEpD,IAAIw1H,OAAO,CAACx1H,CAAC,CAAC,GAAGy7H,UAAU,EAAE;QAC3BA,UAAU,GAAGjG,OAAO,CAACx1H,CAAC,CAAC;MACzB;MACA,IAAIw1H,OAAO,CAACx1H,CAAC,CAAC,GAAG07H,UAAU,EAAE;QAC3BA,UAAU,GAAGlG,OAAO,CAACx1H,CAAC,CAAC;MACzB;IACF;IACA,IAAI,CAACyyH,OAAO,CAACld,EAAE,GAAGhpH,IAAI,CAAC+xC,IAAI,CAACk9F,UAAU,GAAGhG,OAAO,CAACnxI,MAAM,CAAC;IACxD,IAAI,CAACouI,OAAO,CAACnd,IAAI,GAAGomB,UAAU;IAC9B,IAAI,CAACjJ,OAAO,CAACrd,IAAI,GAAGqmB,UAAU;EAChC;AACF;AAEA,MAAME,UAAU,SAASrmI,MAAM,CAAC;EAC9BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB,IAAI,CAACsoH,QAAQ,CAACkE,QAAQ,GAAG,MAAM;IAC/B,IAAI,CAACzC,KAAK,GAAG,IAAImgB,SAAS,CAAC,CAAC;EAC9B;EAEA,OAAOgB,QAAQA,CAACplH,IAAI,EAAE9lB,OAAO,EAAE;IAC7B,IAAI,CAAC8lB,IAAI,EAAE;MACT,OAAO,KAAK;IACd;IACA,OAAOA,IAAI,YAAYrY,WAAW,IAAI7I,MAAM,CAACumI,oBAAoB,CAACnrI,OAAO,EAAE,MAAM,CAAC;EACpF;EAEA,OAAO4pH,gBAAgBA,CAACx8D,KAAK,EAAE;IAC7B,OAAO,KAAK;EACd;EAEAy8D,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAACE,KAAK,CAAC/rH,KAAK,CAAC,IAAI,CAACovD,KAAK,CAAC;EACrC;AACF;AAEA69E,UAAU,CAACvhB,OAAO,GAAG,CAAC,MAAM,CAAC;AAC7BuhB,UAAU,CAACv3C,UAAU,GAAG,CAAC,OAAO,EAAE,OAAO,CAAC;AAC1Cu3C,UAAU,CAAC3oH,MAAM,GAAG,IAAI;AAExB,yDAAe2oH,UAAU;;ACpKW;;AAEpC;AACA;AACA;AACA;AACA,MAAMG,SAAS,SAASrgB,iBAAS,CAAC;EAChC/jH,WAAWA,CAAC8e,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX;IACA,IAAI,CAACqlG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;IACjB,IAAI,CAAChoH,IAAI,CAAC,CAAC;EACb;;EAEA;AACF;AACA;AACA;EACEkoI,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAAClgB,KAAK;EACnB;AACF;AAEA,wDAAeigB,SAAS;;ACvBO;AACR;AACO;AACA;AACM;AAEpC,MAAM;EACJpmF,OAAO;EACPptB,OAAO;EACPo4B,QAAQA,oBAAAA;AACV,CAAC,GAAG8nB,IAAI;;AAER;AACA;AACA;AACA;AACA,MAAMwzD,SAAS,SAAS1mI,MAAM,CAAC;EAC7B;AACF;AACA;AACA;AACA;AACA;EACEoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IACpB;IACA,IAAI,CAACurI,KAAK,GAAG,IAAI,CAAC,CAAC;IACnB;IACA,IAAI,CAAC3oD,SAAS,GAAG,IAAI,CAAC,CAAC;IACvB;IACA,IAAI,CAAC4oD,cAAc,GAAG,IAAI,CAAC,CAAC;IAC5B;IACA,IAAI,CAACC,YAAY,GAAG,EAAE,CAAC,CAAC;IACxB;IACA,IAAI,CAACC,SAAS,GAAG,EAAE,CAAC,CAAC;IACrB;IACA,IAAI,CAACC,WAAW,GAAG,IAAI,CAAC,CAAC;IACzB;IACA,IAAI,CAACC,aAAa,GAAG,EAAE,CAAC,CAAC;IACzB;IACA,IAAI,CAACC,aAAa,GAAG,EAAE,CAAC,CAAC;IACzB;IACA,IAAI,CAACpnG,QAAQ,GAAG,IAAI,CAAC,CAAC;IACtB;IACA,IAAI,CAAC8gB,UAAU,GAAG,EAAE,CAAC,CAAC;IACtB;IACA,IAAI,CAAC1nB,SAAS,GAAG,IAAI,CAAC,CAAC;IACvB;IACA,IAAI,CAACyqF,QAAQ,CAACwjB,QAAQ,GAAG,KAAK,CAAC,CAAC;EAClC;;EAEA;AACF;AACA;AACA;AACA;EACEliB,gBAAgBA,CAAC9jG,IAAI,EAAE;IACrB,OAAO5oB,2GAAU,CAAC,IAAI,CAACkwD,KAAK,CAAC,IAAI,2DAA2D,CAACzmC,IAAI,CAACb,IAAI,CAAC;EACzG;;EAEA;AACF;AACA;AACA;AACA;EACEimH,WAAWA,CAACzqI,IAAI,EAAE;IAChB,MAAM;MAAEmkD;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClCghB,QAAQ,CAAC5qC,EAAE,GAAGvZ,IAAI,CAAC+pH,QAAQ,CAAC,CAAC,CAACp1F,IAAI,CAAC,CAAC;IACpCwvB,QAAQ,CAAC5jC,IAAI,GAAG4jC,QAAQ,CAAC5qC,EAAE,CAACzb,KAAK,CAACqmD,QAAQ,CAAC5qC,EAAE,CAACyJ,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,EAAEmhC,QAAQ,CAAC5qC,EAAE,CAACyJ,WAAW,CAAC,GAAG,CAAC,CAAC;IAClGmhC,QAAQ,CAACgkE,MAAM,GAAG,KAAK;EACzB;;EAEA;AACF;AACA;AACA;EACEuiB,mBAAmBA,CAAC1qI,IAAI,EAAE;IACxB,IAAI,CAACshF,SAAS,GAAGthF,IAAI,CAACiqH,OAAO,CAAC,CAAC,EAAEjqH,IAAI,CAAC+pI,OAAO,CAAC,CAAC,CAAC;IAChD,IAAIlwI,MAAM,CAACyP,KAAK,CAAC,IAAI,CAACg4E,SAAS,CAAC,EAAE;MAChC,MAAM,IAAInkF,KAAK,CAAC,sEAAsE,CAAC;IACzF;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEwtI,UAAUA,CAAC3qI,IAAI,EAAE;IACf,IAAI,CAACkqI,cAAc,GAAGlqI,IAAI,CAACiqH,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;IACxC,IAAI,CAACkgB,YAAY,GAAGnqI,IAAI,CAAC+oH,UAAU,CAAC,CAAC,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IACjD,IAAI,CAACy1G,SAAS,GAAGpqI,IAAI,CAAC+oH,UAAU,CAAC,EAAE,EAAE,EAAE,CAAC,CAACp0F,IAAI,CAAC,CAAC;IAC/C,IAAI,CAAC01G,WAAW,GAAGrqI,IAAI,CAACiqH,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;IACvC,MAAM2gB,SAAS,GAAG5qI,IAAI,CAACkqH,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE;IAC7C,MAAM2gB,SAAS,GAAG7qI,IAAI,CAACkqH,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE;IAC7C,MAAM4gB,SAAS,GAAG9qI,IAAI,CAACkqH,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE;IAC7C,IAAIrwH,MAAM,CAACyP,KAAK,CAACshI,SAAS,CAAC,IAAI/wI,MAAM,CAACyP,KAAK,CAACuhI,SAAS,CAAC,IAAIhxI,MAAM,CAACyP,KAAK,CAACwhI,SAAS,CAAC,EAAE;MACjF,IAAI,CAAC3nG,QAAQ,CAACjmC,KAAK,GAAG;QACpB2f,OAAO,EAAE,gCAAgC7c,IAAI,CAAC+pH,QAAQ,CAAC,CAAC;MAC1D,CAAC;MACD;IACF;IACA;AACJ;AACA;IACI;IACA,MAAMnvH,IAAI,GAAG07B,iBAAO,CAACkB,SAAS,CAAC,IAAI,CAAC4yG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD;IACI,IAAIxvI,IAAI,CAAC27B,QAAQ,KAAK,SAAS,EAAE;MAC/B,IAAI,CAAC4M,QAAQ,CAACjmC,KAAK,GAAG;QACpB2f,OAAO,EAAE,GAAG,IAAI,CAACutH,SAAS,CAAC,CAAC,CAAC;MAC/B,CAAC;MACD;IACF;IACA,MAAMt1G,IAAI,GAAGwB,iBAAO,CAACY,IAAI,CAAC,IAAI,CAACkzG,SAAS,CAAC;IACzC;IACA,IAAI/uG,KAAK,GAAG,IAAI,CAACnF,MAAM;IACvB,IAAI,CAACmF,KAAK,EAAE;MACV,IAAI,CAACnF,MAAM,GAAGmF,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACiK,QAAQ,CAAC,GAAG,CAAC;IACnD;IACA;IACA,IAAIvY,OAAO,GAAG,IAAI,CAACq0E,QAAQ;IAC3B,IAAI,CAACr0E,OAAO,IAAIA,OAAO,CAAC6H,WAAW,CAAC,CAAC,KAAK,IAAI,CAACwtG,cAAc,EAAE;MAC7D,IAAI,CAAChhC,QAAQ,GAAGr0E,OAAO,GAAGwG,KAAK,CAACgJ,UAAU,CAAC,IAAI,CAAC8lG,YAAY,EAAE,IAAI,CAACD,cAAc,EAAE,GAAG,CAAC;IACzF;IACA;IACA,IAAI,CAACI,aAAa,GAAG,IAAI1vG,iGAAa,CAACgwG,SAAS,EAAEC,SAAS,EAAEC,SAAS,CAAC;IACvE;IACA,MAAM/1G,GAAG,GAAG,IAAI;IAChB,MAAMhiB,MAAM,GAAG,GAAG;IAClB,MAAMC,SAAS,GAAG,CAAC;IACnB,MAAM+pB,UAAU,GAAG,CAAC;IACpB,MAAM7H,MAAM,GAAG,CAAC;IAChBL,OAAO,CAACgI,OAAO,CAAC,IAAI,CAACutG,SAAS,EAAExvI,IAAI,EAAE,IAAI,CAAC0vI,aAAa,EAAEx1G,IAAI,EAAEC,GAAG,EAAE,IAAI,CAACs1G,WAAW,EAAEt3H,MAAM,EAAEC,SAAS,EAAE+pB,UAAU,EAAE7H,MAAM,CAAC;EAC/H;;EAEA;AACF;AACA;EACEuK,SAASA,CAAA,EAAG;IACV,MAAMioB,QAAQ,GAAG,IAAIgH,kBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAACghB,QAAQ,CAAC5jC,IAAI,EAAE,CAAC,CAAC;IAC5E;IACAmnC,QAAQ,CAAC/jB,QAAQ,GAAG,IAAI,CAACzN,MAAM,CAACkN,SAAS;IACzCskB,QAAQ,CAAC/H,OAAO,GAAG,IAAI,CAACzpB,MAAM;IAC9B,IAAI,CAACiN,QAAQ,CAAC8gB,UAAU,CAAC,CAAC,CAAC,GAAGyD,QAAQ;IACtC,IAAI,CAACzD,UAAU,CAACzlD,IAAI,CAACkpD,QAAQ,CAAC;IAC9B,IAAI,CAACvkB,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,IAAI;MACrBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;EACElC,SAASA,CAAA,EAAG;IACV;IACA,MAAMrqG,MAAM,GAAG,IAAI,CAACilB,QAAQ,GAAG,IAAIugB,iBAAO,CAAC,CAAC;IAC5C;IACA,MAAM8jE,MAAM,GAAG,IAAIsiB,iBAAS,CAAC,IAAI,CAACh+E,KAAK,CAAC;IACxC,IAAIk9E,OAAO,GAAG,CAAC,CAAC,CAAC;IACjB;IACA,IAAI,CAACyB,WAAW,CAACjjB,MAAM,CAAC;IACxBA,MAAM,CAAC3lH,IAAI,CAAC,CAAC;IACb,IAAI,CAAC6oI,mBAAmB,CAACljB,MAAM,CAAC;IAChCA,MAAM,CAAC3lH,IAAI,CAAC,CAAC;IACb,KAAKmnI,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAAC1nD,SAAS,EAAE,EAAE0nD,OAAO,EAAE;MACrD,IAAI,CAACxhB,MAAM,CAACvvG,GAAG,CAAC,CAAC,EAAE;QACjB,IAAI,CAAC0yH,UAAU,CAACnjB,MAAM,CAAC;QACvBA,MAAM,CAAC3lH,IAAI,CAAC,CAAC;MACf,CAAC,MAAM;IACT;IACA;IACA,IAAImnI,OAAO,GAAG,IAAI,CAAC1nD,SAAS,EAAE;MAC5B,IAAI,CAACn+C,QAAQ,CAACjmC,KAAK,GAAG;QACpB2f,OAAO,EAAE;MACX,CAAC;IACH;IACA;IACA,IAAIqB,MAAM,CAAChhB,KAAK,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC+gB,MAAM,CAAChhB,KAAK,CAAC2f,OAAO,CAAC;IACvC;;IAEA;IACA,IAAI,CAAC4iB,SAAS,CAAC,CAAC;;IAEhB;IACA,IAAI,CAAC6qG,aAAa,GAAG,IAAI;IACzB,IAAI,CAACnnG,QAAQ,GAAG,IAAI;IACpB,IAAI,CAAC8gB,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC1nB,SAAS,GAAG,IAAI;;IAErB;IACA,OAAOre,MAAM;EACf;AACF;AAEA8rH,SAAS,CAAC5hB,OAAO,GAAG,CAAC,KAAK,CAAC;AAC3B4hB,SAAS,CAAC53C,UAAU,GAAG,CAAC,MAAM,CAAC;AAE/B,wDAAe43C,SAAS;;AC5MO;AACD;AACA;AAE9B,MAAM;EACJtmF,OAAO;EACPptB,OAAO;EACPwB,IAAI;EACJ42B,QAAQA,qBAAAA;AACV,CAAC,GAAG8nB,IAAI;AAER,MAAMwvD,mBAAQ,GAAG;EACf+E,EAAE,EAAE,CAAC;EACL,CAAC,EAAE,CAAC;EACJ,CAAC,EAAE,CAAC;EACJ,CAAC,EAAE,CAAC;EACJj3H,EAAE,EAAE,CAAC;EACLk3H,EAAE,EAAE,CAAC;EACLC,EAAE,EAAE,CAAC;EACLC,EAAE,EAAE;AACN,CAAC;AACD,MAAMjF,kBAAO,GAAG;EACd8E,EAAE,EAAEjzG,eAAI,CAAC6C,QAAQ,CAACjD,OAAO;EAAE;EAC3B,CAAC,EAAEI,eAAI,CAAC6C,QAAQ,CAAChD,QAAQ;EAAE;EAC3B,CAAC,EAAEG,eAAI,CAAC6C,QAAQ,CAAChD,QAAQ;EAAE;EAC3B,CAAC,EAAEG,eAAI,CAAC6C,QAAQ,CAAChD,QAAQ;EAAE;EAC3B7jB,EAAE,EAAEgkB,eAAI,CAAC6C,QAAQ,CAAC/C,QAAQ;EAAE;EAC5BozG,EAAE,EAAElzG,eAAI,CAAC6C,QAAQ,CAAChD,QAAQ;EAAE;EAC5BszG,EAAE,EAAEnzG,eAAI,CAAC6C,QAAQ,CAACjD,OAAO;EAAE;EAC3BwzG,EAAE,EAAEpzG,eAAI,CAAC6C,QAAQ,CAAChD,QAAQ,CAAE;AAC9B,CAAC;AAED,MAAMwzG,cAAc,GAAG,MAAM;AAC7B,MAAMC,WAAW,GAAG,KAAK;AAEzB,SAASC,aAAaA,CAACtuI,GAAG,EAAE;EAC1B,OAAOA,GAAG,CAAC43B,IAAI,CAAC,CAAC,CAACzzB,KAAK,CAACkqI,WAAW,CAAC;AACtC;AACA;AACA;AACA;;AAEA,MAAME,UAAU,SAAShoI,MAAM,CAAC;EAC9BoC,WAAWA,CAAC8e,IAAI,EAAE9lB,OAAO,EAAE;IACzB,KAAK,CAAC8lB,IAAI,EAAE9lB,OAAO,CAAC;IAEpB,IAAI,CAACykC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACjN,MAAM,GAAG,IAAI;IAClB,IAAI,CAACgzE,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACk+B,aAAa,GAAG,CAAC,CAAC;IAEvB,IAAI,CAACnjF,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC1nB,SAAS,GAAG,IAAI;IAErB,IAAI,CAACgvG,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,aAAa,GAAG,CAAC;IAEtB,IAAI,CAAC/gB,cAAc,GAAG,CAAC,CAAC;IAExB,IAAI,CAACzD,QAAQ,CAACkE,QAAQ,GAAG,MAAM;EACjC;EAEAugB,gBAAgBA,CAACjnH,IAAI,EAAE;IACrB,OAAOA,IAAI,CAACtjB,KAAK,CAAC,UAAU,CAAC;EAC/B;EAEAwqI,kBAAkBA,CAAChG,IAAI,EAAEiG,QAAQ,EAAE;IACjC,MAAMC,SAAS,GAAG,IAAI,CAACJ,aAAa,GAAG9F,IAAI;IAC3C,IAAI,CAAC6F,WAAW,GAAIK,SAAS,GAAGD,QAAQ,CAACt5I,MAAM,GAAIu5I,SAAS,GAAG,IAAI,CAACJ,aAAa;EACnF;EAEAK,eAAeA,CAAC/J,MAAM,EAAE6J,QAAQ,EAAE;IAChC,IAAI,CAACD,kBAAkB,CAAC,CAAC,EAAEC,QAAQ,CAAC;IACpC,OAAO,IAAI,CAACJ,WAAW,GAAGI,QAAQ,CAACt5I,MAAM,EAAE;MACzC,IAAIs5I,QAAQ,CAAC,IAAI,CAACJ,WAAW,CAAC,CAACxrI,KAAK,CAAC,YAAY+hI,MAAM,EAAE,CAAC,EAAE;QAC1D;MACF;MACA,IAAI,CAACyJ,WAAW,EAAE;IACpB;IACA,IAAI,CAACG,kBAAkB,CAAC,CAAC,EAAEC,QAAQ,CAAC;EACtC;EAEAG,mBAAmBA,CAAChK,MAAM,EAAE4D,IAAI,EAAEiG,QAAQ,EAAE;IAC1C,IAAI,CAACE,eAAe,CAAC/J,MAAM,EAAE6J,QAAQ,CAAC;IACtC,MAAMC,SAAS,GAAG,IAAI,CAACL,WAAW,GAAG7F,IAAI;IAEzC,IAAIiG,QAAQ,CAAC,IAAI,CAACJ,WAAW,CAAC,CAACxrI,KAAK,CAAC,YAAY+hI,MAAM,EAAE,CAAC,IAAI8J,SAAS,GAAGD,QAAQ,CAACt5I,MAAM,EAAE;MACzF,IAAI,CAACk5I,WAAW,GAAGK,SAAS;IAC9B;EACF;EAEAG,SAASA,CAAChiE,QAAQ,EAAE4hE,QAAQ,EAAE;IAC5B,IAAI5hE,QAAQ,IAAI4hE,QAAQ,CAACt5I,MAAM,EAAE;MAC/B,IAAI,CAACm5I,aAAa,GAAG,IAAI,CAACD,WAAW,GAAGI,QAAQ,CAACt5I,MAAM,GAAG,CAAC;IAC7D,CAAC,MAAM;MACL,IAAI,CAACm5I,aAAa,GAAG,IAAI,CAACD,WAAW,GAAGxhE,QAAQ;IAClD;EACF;EAEAiiE,wBAAwBA,CAACL,QAAQ,EAAE;IACjC,OAAO,IAAI,CAACJ,WAAW,GAAGI,QAAQ,CAACt5I,MAAM,GAAG,CAAC;EAC/C;EAEA45I,sBAAsBA,CAACN,QAAQ,EAAE;IAC/B,OAAO,IAAI,CAACJ,WAAW,GAAGI,QAAQ,CAACt5I,MAAM,IAAIs5I,QAAQ,CAAC,IAAI,CAACJ,WAAW,CAAC,CAAC52G,IAAI,CAAC,CAAC,KAAK,oBAAoB,EAAE;MACvG,IAAI,CAAC42G,WAAW,EAAE;IACpB;IACA,IAAI,CAACQ,SAAS,CAAC,EAAE,IAAI,CAACR,WAAW,EAAEI,QAAQ,CAAC;IAC5C,OAAO,IAAI,CAACK,wBAAwB,CAACL,QAAQ,CAAC;EAChD;EAEAO,cAAcA,CAACP,QAAQ,EAAE;IACvB,IAAI,CAACE,eAAe,CAAC,UAAU,EAAEF,QAAQ,CAAC;IAE1C,MAAM;MAAExnF;IAAS,CAAC,GAAG,IAAI,CAAChhB,QAAQ;IAClCghB,QAAQ,CAAC5jC,IAAI,GAAGorH,QAAQ,CAAC,EAAE,IAAI,CAACJ,WAAW,CAAC;IAC5CpnF,QAAQ,CAACgkE,MAAM,GAAG,MAAM;IAExB,IAAI,CAAC5rF,SAAS,GAAG;MAAEviB,MAAM,EAAE,EAAE;MAAE2lC,OAAO,EAAE;IAAG,CAAC;IAC5C,IAAI,CAACpjB,SAAS,CAACviB,MAAM,GAAG,IAAI,CAACotH,aAAa,GAAG,CAAC;IAC9C,IAAI,CAACnjF,UAAU,CAACzlD,IAAI,CAAC,IAAI,CAAC+9B,SAAS,CAAC;EACtC;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEirG,WAAWA,CAACr1F,QAAQ,EAAEw5F,QAAQ,EAAE;IAC9B,IAAI,CAACE,eAAe,CAAC,MAAM,EAAEF,QAAQ,CAAC;IAEtC,KAAK,IAAIvxI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+3C,QAAQ,EAAE/3C,CAAC,EAAE,EAAE;MACjC,MAAM+xI,SAAS,GAAGd,aAAa,CAACM,QAAQ,CAAC,EAAE,IAAI,CAACJ,WAAW,CAAC,CAAC;MAE7D,IAAIY,SAAS,CAAC95I,MAAM,GAAG,CAAC,EAAE;QACxB,MAAM,IAAI8K,KAAK,CAAC,4DAA4D,CAAC;MAC/E;MACA,MAAMkV,MAAM,GAAG7V,QAAQ,CAAC2vI,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MACzC,MAAM35H,QAAQ,GAAG25H,SAAS,CAAC,CAAC,CAAC;MAE7B,MAAM7jI,CAAC,GAAG8gH,UAAU,CAAC+iB,SAAS,CAAC,CAAC,CAAC,CAAC;MAClC,MAAMp/H,CAAC,GAAGq8G,UAAU,CAAC+iB,SAAS,CAAC,CAAC,CAAC,CAAC;MAClC,MAAM/9H,CAAC,GAAGg7G,UAAU,CAAC+iB,SAAS,CAAC,CAAC,CAAC,CAAC;MAElC,MAAM75H,OAAO,GAAG65H,SAAS,CAAC,CAAC,CAAC,CAACjrI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACnH,WAAW,CAAC,CAAC;MAExD,IAAIm7B,MAAM,GAAG,CAAC;MACd,IAAIi3G,SAAS,CAAC95I,MAAM,IAAI,CAAC,EAAE;QACzB6iC,MAAM,GAAGk0F,UAAU,CAAC+iB,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG;MAC1C;MAEA,IAAI9wG,KAAK,GAAG,IAAI,CAACnF,MAAM;MACvB,IAAI,CAACmF,KAAK,EAAE;QACV;QACA;QACA,IAAI,CAACnF,MAAM,GAAGmF,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAAC3G,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC2G,QAAQ,CAACiK,QAAQ,CAAC,GAAG,CAAC;QAChF,IAAI,CAAC87D,QAAQ,GAAG,IAAI;MACtB;MACA,IAAI,CAAC,IAAI,CAACkjC,WAAW,CAACD,SAAS,CAAC,EAAE;QAChC;MACF;;MAEA;MACA;MACA;MACA,MAAMp3G,GAAG,GAAG,KAAK;MACjB,MAAMhiB,MAAM,GAAG,GAAG;MAClB,MAAMC,SAAS,GAAG,GAAG;MACrB,MAAM+pB,UAAU,GAAG,GAAG;MACtB,MAAMniC,IAAI,GAAG07B,kBAAO,CAACkB,SAAS,CAACllB,OAAO,CAAC;MACvC,MAAMwiB,IAAI,GAAGwB,kBAAO,CAACY,IAAI,CAAC1kB,QAAQ,CAAC;MAEnC,MAAMsqB,GAAG,GAAG,IAAIlC,iGAAa,CAACtyB,CAAC,EAAEyE,CAAC,EAAEqB,CAAC,CAAC;MACtC,IAAI,CAAC86F,QAAQ,CAACrsE,OAAO,CAACrqB,QAAQ,EAAE5X,IAAI,EAAEkiC,GAAG,EAAEhI,IAAI,EAAEC,GAAG,EAAE1iB,MAAM,EAAEU,MAAM,EAAEC,SAAS,EAAE+pB,UAAU,EAAE7H,MAAM,CAAC;IACtG;EACF;EAEAk3G,WAAWA,CAACD,SAAS,EAAE;IACrB,IAAIrgB,MAAM,GAAG,CAAC;IACd,IAAInnE,OAAO,GAAG,KAAK,CAAC,CAAC;;IAErB,IAAIwnF,SAAS,CAAC95I,MAAM,IAAI,CAAC,EAAE;MACzBy5H,MAAM,GAAGtvH,QAAQ,CAAC2vI,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IACrC;IACA,IAAIA,SAAS,CAAC95I,MAAM,IAAI,CAAC,IAAI85I,SAAS,CAAC,CAAC,CAAC,KAAK,KAAK,EAAE;MACnDxnF,OAAO,GAAGwnF,SAAS,CAAC,CAAC,CAAC,CAACxqI,OAAO,CAACwpI,cAAc,EAAE,EAAE,CAAC;IACpD;IACA,IAAI,IAAI,CAAChwI,QAAQ,CAAC2d,GAAG,CAACkU,OAAO,EAAE;MAC7B,IAAI23B,OAAO,KAAK,KAAK,IAAIA,OAAO,KAAK,KAAK,EAAE;QAC1C,OAAO,KAAK;MACd;IACF;IACA,MAAM9vB,OAAO,GAAG,IAAI,CAACq0E,QAAQ;IAC7B,MAAM7tE,KAAK,GAAG,IAAI,CAACnF,MAAM;IACzB,IAAI,CAACrB,OAAO,IAAIA,OAAO,CAAC6H,WAAW,CAAC,CAAC,KAAKovF,MAAM,EAAE;MAChD,IAAI,CAAC5iB,QAAQ,GAAG7tE,KAAK,CAACgJ,UAAU,CAACsgB,OAAO,EAAEmnE,MAAM,EAAE,GAAG,CAAC;IACxD;IACA,OAAO,IAAI;EACb;;EAEA;AACF;AACA;EACE2b,WAAWA,CAACC,QAAQ,EAAEiE,QAAQ,EAAE;IAC9B,IAAI,CAACE,eAAe,CAAC,MAAM,EAAEF,QAAQ,CAAC;IAEtC,KAAK,IAAIvxI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGstI,QAAQ,EAAEttI,CAAC,EAAE,EAAE;MACjC,MAAM+xI,SAAS,GAAGd,aAAa,CAACM,QAAQ,CAAC,EAAE,IAAI,CAACJ,WAAW,CAAC,CAAC;MAE7D,IAAIY,SAAS,CAAC95I,MAAM,GAAG,CAAC,EAAE;QACxB,MAAM,IAAI8K,KAAK,CAAC,sDAAsD,CAAC;MACzE;MAEA,IAAIkvI,YAAY,GAAG7vI,QAAQ,CAAC2vI,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7C,IAAIG,YAAY,GAAG9vI,QAAQ,CAAC2vI,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC7C,MAAMxE,QAAQ,GAAGwE,SAAS,CAAC,CAAC,CAAC;MAE7B,IAAIE,YAAY,GAAGC,YAAY,EAAE;QAC/B,CAACD,YAAY,EAAEC,YAAY,CAAC,GAAG,CAACA,YAAY,EAAED,YAAY,CAAC;MAC7D;MACA,IAAI,CAAClpG,QAAQ,CAACoQ,OAAO,CACnB84F,YAAY,EACZC,YAAY,EACZtG,mBAAQ,CAAC2B,QAAQ,CAAC,IAAI,CAAC,EACvB1B,kBAAO,CAAC0B,QAAQ,CAAC,IAAI7vG,eAAI,CAAC6C,QAAQ,CAACjD,OAAO,EAC1C,IACF,CAAC;IACH;EACF;EAEA60G,eAAeA,CAAA,EAAG;IAChB,MAAMpxG,KAAK,GAAG,IAAI,CAACgI,QAAQ,CAACxH,MAAM;IAClC,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACrC,MAAMksB,IAAI,GAAG6U,KAAK,CAAC/gC,CAAC,CAAC;MACrB,IAAI,CAACqwH,cAAc,CAACnkG,IAAI,CAAC0O,MAAM,CAAC,GAAG1O,IAAI;IACzC;EACF;EAEA6kG,cAAcA,CAAA,EAAG;IACf,MAAMpmF,aAAa,GAAG,IAAI,CAAC0lF,cAAc;IACzC,MAAMztF,OAAO,GAAG,IAAI,CAACmG,QAAQ;IAE7B,IAAIlnC,MAAM,CAACiQ,IAAI,CAAC64B,aAAa,CAAC,CAAC1yC,MAAM,KAAK,CAAC,EAAE;MAC3C,MAAM,IAAI8K,KAAK,CAAC,+CAA+C,CAAC;IAClE;IAEA,MAAMo4B,KAAK,GAAGyH,OAAO,CAACmR,MAAM;IAC5B,KAAK,IAAIngC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGunB,KAAK,CAACljC,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACrC,MAAMuY,IAAI,GAAGgP,KAAK,CAACvnB,CAAC,CAAC;MACrBuY,IAAI,CAAC2R,KAAK,GAAG6M,aAAa,CAACxe,IAAI,CAAC2R,KAAK,CAAC,IAAI,IAAI;MAC9C3R,IAAI,CAAC4R,MAAM,GAAG4M,aAAa,CAACxe,IAAI,CAAC4R,MAAM,CAAC,IAAI,IAAI;IAClD;EACF;EAEAsvB,kBAAkBA,CAAA,EAAG;IACnB;IACA,MAAMpsB,KAAK,GAAG,IAAI,CAAC8H,QAAQ,CAACwc,OAAO,CAAC,CAAC,CAAC;IACtC,IAAI,CAACxc,QAAQ,CAAC8gB,UAAU,GAAG,EAAE;;IAE7B;IACA;IACA,KAAK,IAAI7pD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC6pD,UAAU,CAAC5xD,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC/C,MAAMoyI,YAAY,GAAG,IAAI,CAACvoF,UAAU,CAAC7pD,CAAC,CAAC;MACvC,MAAMqyI,WAAW,GAAGpxG,KAAK,CAAC+H,SAAS;MACnC,MAAMskB,QAAQ,GAAG,IAAIgH,mBAAQ,CAAC,IAAI,CAACvrB,QAAQ,EAAEqpG,YAAY,CAAC/uG,KAAK,EAAErjC,CAAC,GAAG,CAAC,CAAC;MACvEstD,QAAQ,CAAC/jB,QAAQ,GAAG8oG,WAAW;MAC/B,IAAI,CAACtpG,QAAQ,CAAC8gB,UAAU,CAAC7pD,CAAC,CAAC,GAAGstD,QAAQ;IACxC;EACF;EAEAjoB,SAASA,CAAA,EAAG;IACV,IAAI,CAAC0D,QAAQ,CAAC6jB,cAAc,CAAC,CAAC;IAC9B,IAAI,CAACulF,eAAe,CAAC,CAAC;IACtB,IAAI,CAACphB,cAAc,CAAC,CAAC;IACrB,IAAI,CAAC1jE,kBAAkB,CAAC,CAAC;IAEzB,IAAI,CAACtkB,QAAQ,CAACuJ,QAAQ,CAAC;MACrB0a,eAAe,EAAE,KAAK;MACtBI,mBAAmB,EAAE,IAAI,CAACrsD,QAAQ,CAAC2d,GAAG,CAACiV,QAAQ;MAC/C04B,aAAa,EAAE,IAAI,CAACtrD,QAAQ,CAAC2d,GAAG,CAACgV,OAAO;MACxCiX,aAAa,EAAE,IAAI,CAAC0lF;IACtB,CAAC,CAAC;EACJ;EAEAsd,cAAcA,CAAC4D,QAAQ,EAAE;IACvB,IAAI,CAACvE,aAAa,EAAE;IACpB,IAAI,CAAC8E,cAAc,CAACP,QAAQ,CAAC;;IAE7B;IACA,IAAI,CAACG,mBAAmB,CAAC,UAAU,EAAE,CAAC,EAAEH,QAAQ,CAAC;IAEjD,MAAMQ,SAAS,GAAGR,QAAQ,CAAC,IAAI,CAACJ,WAAW,CAAC,CAAC52G,IAAI,CAAC,CAAC,CAACzzB,KAAK,CAACkqI,WAAW,CAAC;IACtE,MAAMj5F,QAAQ,GAAGg6F,SAAS,CAAC,CAAC,CAAC;IAC7B,MAAMzE,QAAQ,GAAGyE,SAAS,CAAC,CAAC,CAAC;IAE7B,IAAI,CAAC3E,WAAW,CAACr1F,QAAQ,EAAEw5F,QAAQ,CAAC;IACpC,IAAI,CAAClE,WAAW,CAACC,QAAQ,EAAEiE,QAAQ,CAAC;EACtC;EAEApjB,SAASA,CAAA,EAAG;IACV,MAAMrqG,MAAM,GAAG,IAAI,CAACilB,QAAQ,GAAG,IAAIugB,kBAAO,CAAC,CAAC;IAC5C,MAAMioF,QAAQ,GAAG,IAAI,CAACF,gBAAgB,CAAC,IAAI,CAAC3/E,KAAK,CAAC;IAClD,GAAG;MACD,IAAI,CAACi8E,cAAc,CAAC4D,QAAQ,CAAC;IAC/B,CAAC,QAAQ,IAAI,CAACM,sBAAsB,CAACN,QAAQ,CAAC;IAE9C,IAAI,CAAClsG,SAAS,CAAC,CAAC;IAEhB,OAAOvhB,MAAM;EACf;AACF;AAEAotH,UAAU,CAACljB,OAAO,GAAG,CAAC,MAAM,CAAC;AAC7BkjB,UAAU,CAACl5C,UAAU,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC;AAEjD,yDAAek5C,UAAU;;AC5TqB;AAEF;AACA;AACE;AACF;AACE;AACF;AACQ;AACR;AACE;AACF;AACE;AAE9C,8CAAe,IAAIrjB,kBAAU,CAAC;AAC5B;AACAuC,iBAAS,EACT2Q,iBAAS,EACT1F,kBAAU,EACVkO,iBAAS,EACTxU,iBAAS,EACTiV,qBAAa,EACb4C,SAAS,EACTtD,kBAAU,EACViG,kBAAU,EACVK,iBAAS,EACTsB,kBAAU,CACX,CAAC;;AC3B8C;;AAEhD;AACA;AACA;AACA;AACA,MAAMoB,YAAY,SAASpyE,gBAAU,CAAC;EACpC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE50D,WAAWA,CAAA,EAAqB;IAAA,IAApBinI,aAAa,GAAA3uI,SAAA,CAAA3L,MAAA,QAAA2L,SAAA,QAAA6Y,SAAA,GAAA7Y,SAAA,MAAG,EAAE;IAC5B,KAAK,CAAC2uI,aAAa,EAAE,CAAC,SAAS,CAAC,CAAC;EACnC;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEtxH,IAAIA,CAACm/F,KAAK,EAAE;IACV,IAAIrhH,IAAI,GAAG,EAAE;IACb,IAAIqhH,KAAK,CAAC2N,MAAM,EAAE;MAChBhvH,IAAI,GAAG,IAAI,CAACshE,KAAK,CAAC2tD,OAAO,CAAC5N,KAAK,CAAC2N,MAAM,CAAC3uH,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;IAC7D;IACA,OAAO,CAAC,GAAGL,IAAI,CAAC;EAClB;AACF;AAEA,6DAAeuzI,YAAY;;ACrCyC;AAErD,MAAME,QAAQ,CAAC;EAC5BlnI,WAAWA,CAAC8zD,MAAM,EAAE96D,OAAO,EAAE;IAC3B,IAAI,CAACqoH,OAAO,GAAGvtD,MAAM;IACrB,IAAI,CAACwtD,QAAQ,GAAGtoH,OAAO,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACuoH,MAAM,GAAG,KAAK;EACrB;EAEA4lB,UAAUA,CAAA,EAAG;IACX,MAAM,IAAI1vI,KAAK,CAAC,6CAA6C,CAAC;EAChE;EAEA2vI,MAAMA,CAAA,EAAG;IACP,OAAO,IAAI/vB,OAAO,CAAC,CAACC,OAAO,EAAE17G,MAAM,KAAK;MACtC47G,UAAU,CAAC,MAAM;QACf,IAAI;UACF,IAAI,IAAI,CAAC+J,MAAM,EAAE;YACf,OAAO3lH,MAAM,CAAC,IAAInE,KAAK,CAAC,gBAAgB,CAAC,CAAC;UAC5C;UACA,OAAO6/G,OAAO,CAAC,IAAI,CAAC6vB,UAAU,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC,OAAO3vI,KAAK,EAAE;UACd,OAAOoE,MAAM,CAACpE,KAAK,CAAC;QACtB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEAiqH,KAAKA,CAAA,EAAG;IACN,IAAI,CAACF,MAAM,GAAG,IAAI;EACpB;AACF;AAEA9rD,0BAAoB,CAACyxE,QAAQ,CAACzuI,SAAS,CAAC;;ACjCjB;AACS;AAEjB,MAAM4uI,SAAS,CAAC;EAC7BrnI,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACsnI,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,WAAW,GAAG,CAAC,CAAC;IACrB,IAAI,CAACC,IAAI,GAAG,IAAI;IAChB,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,UAAU,GAAG,CAAC;EACrB;EAEAC,SAASA,CAAA,EAAG;IACV,IAAI,CAACC,WAAW,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;IAC9B,OAAO,IAAI,CAACP,YAAY,CAACntI,IAAI,CAAC,EAAE,CAAC;EACnC;EAEA2tI,iBAAiBA,CAAA,EAAG;IAClB,MAAM5H,MAAM,GAAG,IAAI,CAACoH,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC;IAClD,OAAOrH,MAAM,GAAGA,MAAM,CAACvzI,MAAM,GAAG,CAAC;EACnC;;EAEA;EACA;EACA;EACAo7I,MAAMA,CAACn0H,GAAG,EAAEo0H,UAAU,EAAE;IACtB,IAAI,CAACp0H,GAAG,EAAE;MACR,IAAI,CAAC4zH,IAAI,GAAG,IAAI;IAClB,CAAC,MAAM;MACL,IAAI,CAACA,IAAI,GAAG5zH,GAAG;IACjB;IACA,IAAI,CAAC1d,8GAAa,CAAC8xI,UAAU,CAAC,EAAE;MAC9B,IAAI9xI,2GAAU,CAAC8xI,UAAU,CAAC,EAAE;QAC1B,IAAI,CAACL,UAAU,GAAGK,UAAU;QAC5B,IAAI,CAACN,WAAW,GAAG,IAAI;QACvB,IAAI,CAACD,gBAAgB,GAAG,IAAI;MAC9B,CAAC,MAAM,IAAIvxI,4GAAW,CAAC8xI,UAAU,CAAC,EAAE;QAClC,IAAI,CAACL,UAAU,GAAG,CAAC;QACnB,IAAI,CAACD,WAAW,GAAGM,UAAU;QAC7B,IAAI,CAACP,gBAAgB,GAAG,KAAK;MAC/B;IACF,CAAC,MAAM;MACL,IAAI,CAACC,WAAW,GAAG,KAAK;MACxB,IAAI,CAACD,gBAAgB,GAAG,KAAK;MAC7B,IAAI,CAACE,UAAU,GAAG,CAAC;IACrB;EACF;EAEAO,SAASA,CAACt0H,GAAG,EAAE;IACb,IAAI,CAACi0H,WAAW,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;IAC9B,IAAI,CAACN,WAAW,EAAE;IAClB,IAAI,CAACD,YAAY,CAACxuI,IAAI,CAAC,EAAE,CAAC;IAE1B,IAAI8a,GAAG,EAAE;MACP,IAAI,CAACi0H,WAAW,CAACj0H,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7B,CAAC,MAAM,IAAI,IAAI,CAAC4zH,IAAI,EAAE;MACpB,IAAI,CAACK,WAAW,CAAC,IAAI,CAACL,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;IACnC;IAEA,IAAI,IAAI,CAACE,WAAW,EAAE;MACpB,IAAI,CAAC,IAAI,CAACD,gBAAgB,EAAE;QAC1B,IAAI,CAACE,UAAU,EAAE;MACnB;MACA,IAAI,IAAI,CAACA,UAAU,KAAK,CAAC,EAAE;QACzB,IAAI,CAACE,WAAW,CAAC,IAAI,CAACF,UAAU,CAACh1I,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MACrD;IACF;EACF;EAEAw1I,iBAAiBA,CAACz9G,MAAM,EAAE09G,SAAS,EAAE1xI,MAAM,EAAE;IAC3C,IAAI,CAAC0xI,SAAS,EAAE;MACdA,SAAS,GAAG,EAAE;IAChB;IACA,KAAK,IAAI9/H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoiB,MAAM,CAAC/9B,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACtC,IAAI,IAAI,CAACw/H,iBAAiB,CAAC,CAAC,KAAKM,SAAS,IAAI9/H,CAAC,KAAKoiB,MAAM,CAAC/9B,MAAM,GAAG,CAAC,EAAE;QACrE,IAAI,CAACu7I,SAAS,CAAC,CAAC;QAChB,IAAIxxI,MAAM,EAAE;UAAE;UACZ,IAAI,CAACmxI,WAAW,CAACnxI,MAAM,CAACkd,GAAG,EAAEld,MAAM,CAACqG,KAAK,EAAErG,MAAM,CAAC6b,GAAG,CAAC;QACxD;MACF;MACA,IAAImY,MAAM,CAACpiB,CAAC,CAAC,KAAK,IAAI,EAAE;QACtB,IAAI,CAAC4/H,SAAS,CAAC,CAAC;MAClB,CAAC,MAAM;QACL,IAAI,CAACL,WAAW,CAACn9G,MAAM,CAACpiB,CAAC,CAAC,CAAC;MAC7B;IACF;EACF;EAEAu/H,WAAWA,CAACn9G,MAAM,EAAE3tB,KAAK,EAAEwV,GAAG,EAAE;IAC9B,IAAI2tH,MAAM,GAAG,IAAI,CAACoH,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC;IAChD,IAAIlwI,GAAG;IAEP,MAAMgxI,YAAY,GAAGnI,MAAM,GAAGA,MAAM,CAACvzI,MAAM,GAAG,CAAC;IAE/C,IAAIuJ,8GAAa,CAACw0B,MAAM,CAAC,EAAE;MACzB;IACF;IAEA,IAAI,CAACx0B,2GAAU,CAAC6G,KAAK,CAAC,EAAE;MACtBA,KAAK,GAAGsrI,YAAY,GAAG,CAAC;IAC1B;IAEA,IAAI,CAACnyI,2GAAU,CAACqc,GAAG,CAAC,EAAE;MACpBA,GAAG,GAAG81H,YAAY,GAAG39G,MAAM,CAAC/9B,MAAM;IACpC;IAEA,IAAI,CAACuJ,2GAAU,CAACw0B,MAAM,CAAC,EAAE;MACvBrzB,GAAG,GAAGqzB,MAAM,CAAC/3B,QAAQ,CAAC,CAAC;IACzB,CAAC,MAAM;MACL0E,GAAG,GAAGqzB,MAAM;IACd;IAEA,MAAM49G,MAAM,GAAGvrI,KAAK,GAAGwV,GAAG,GAAGA,GAAG,GAAGxV,KAAK;IACxC,MAAMoW,KAAK,GAAGpW,KAAK,GAAGwV,GAAG,GAAGxV,KAAK,GAAGwV,GAAG;IAEvC,IAAIlb,GAAG,CAAC1K,MAAM,GAAGkI,IAAI,CAACuI,GAAG,CAACL,KAAK,GAAGwV,GAAG,CAAC,GAAG,CAAC,EAAE;MAC1Clb,GAAG,GAAGA,GAAG,CAACoE,MAAM,CAAC,CAAC,EAAE5G,IAAI,CAACuI,GAAG,CAACL,KAAK,GAAGwV,GAAG,GAAG,CAAC,CAAC,CAAC;IAChD;;IAEA;IACA,IAAIY,KAAK,GAAGk1H,YAAY,GAAG,CAAC,EAAE;MAC5B,IAAI,CAACf,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC,IAAI,GAAG,CAACgB,MAAM,CAACp1H,KAAK,GAAGk1H,YAAY,GAAG,CAAC,CAAC;IAC7E,CAAC,MAAM,IAAIl1H,KAAK,IAAIk1H,YAAY,EAAE;MAChC,MAAMG,IAAI,GAAG,IAAI,CAAClB,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC;MAChD,IAAI,CAACD,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC,GAAGiB,IAAI,CAACpwI,KAAK,CAAC,CAAC,EAAE+a,KAAK,GAAG,CAAC,CAAC;IAChE;;IAEA;IACA;IACA,IAAIZ,GAAG,GAAGxV,KAAK,EAAE;MACf,MAAMjD,GAAG,GAAGiD,KAAK,GAAGwV,GAAG,GAAG,CAAC;MAC3Blb,GAAG,GAAG,GAAG,CAACkxI,MAAM,CAACzuI,GAAG,GAAGzC,GAAG,CAAC1K,MAAM,CAAC,GAAG0K,GAAG;IAC1C;;IAEA;IACA;IACA,IAAI8b,KAAK,KAAK,EAAE,IAAI,IAAI,CAACu0H,WAAW,IAAI,IAAI,CAACC,UAAU,KAAK,CAAC,EAAE;MAC7DtwI,GAAG,GAAG,IAAIA,GAAG,EAAE;IACjB;;IAEA;IACA,IAAI,CAACiwI,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC,IAAIlwI,GAAG;IAC1C6oI,MAAM,GAAG,IAAI,CAACoH,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC;IAE5C,IAAIe,MAAM,GAAGpI,MAAM,CAACvzI,MAAM,EAAE;MAC1B,IAAI,CAAC26I,YAAY,CAAC,IAAI,CAACC,WAAW,CAAC,IAAI,GAAG,CAACgB,MAAM,CAACD,MAAM,GAAGpI,MAAM,CAACvzI,MAAM,CAAC;IAC3E;EACF;EAEA87I,eAAeA,CAAC54G,KAAK,EAAEjP,IAAI,EAAE;IAC3B,MAAM8nH,WAAW,GAAG,IAAI,CAACC,aAAa,CAAC94G,KAAK,EAAE,CAAC,CAAC;IAEhD,KAAK,IAAIrjC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGk8I,WAAW,CAAC/7I,MAAM,EAAEH,CAAC,EAAE,EAAE;MAC3C,IAAI,CAAC07I,SAAS,CAAC,CAAC;MAChB,IAAI,CAACL,WAAW,CAACjnH,IAAI,CAAC0O,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC;MAEpC,KAAK,IAAIhnB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGogI,WAAW,CAACl8I,CAAC,CAAC,CAACG,MAAM,EAAE2b,CAAC,EAAE,EAAE;QAC9C,MAAMgnB,MAAM,GAAIo5G,WAAW,CAACl8I,CAAC,CAAC,CAAC8b,CAAC,CAAC,CAACkqB,KAAK,CAAClD,MAAM,KAAK1O,IAAI,CAAC0O,MAAM,GAC1Do5G,WAAW,CAACl8I,CAAC,CAAC,CAAC8b,CAAC,CAAC,CAACmqB,MAAM,CAACnD,MAAM,GAAGo5G,WAAW,CAACl8I,CAAC,CAAC,CAAC8b,CAAC,CAAC,CAACkqB,KAAK,CAAClD,MAAM;QAEpE,IAAI,CAACu4G,WAAW,CAACv4G,MAAM,EAAE,EAAE,GAAG,CAAC,GAAGhnB,CAAC,EAAE,EAAE,GAAG,CAAC,GAAGA,CAAC,CAAC;MAClD;IACF;EACF;EAEAqgI,aAAaA,CAACzlI,GAAG,EAAE0lI,YAAY,EAAE;IAC/B,MAAMC,SAAS,GAAG,EAAE;IACpB,KAAK,IAAIn0I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwO,GAAG,CAACvW,MAAM,EAAE+H,CAAC,IAAIk0I,YAAY,EAAE;MACjDC,SAAS,CAAC/vI,IAAI,CAACoK,GAAG,CAAC9K,KAAK,CAAC1D,CAAC,EAAEA,CAAC,GAAGk0I,YAAY,CAAC,CAAC;IAChD;IACA,OAAOC,SAAS;EAClB;;EAEA;EACA;EACAC,WAAWA,CAAClhG,MAAM,EAAEmhG,UAAU,EAAEn1H,GAAG,EAAE;IACnC,KAAK,IAAItL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1B,IAAI,CAAC4/H,SAAS,CAAC,CAAC;MAChB,IAAI,CAACL,WAAW,CAACj0H,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;MAC7B,IAAI,CAACi0H,WAAW,CAAC,CAACv/H,CAAC,GAAG,CAAC,EAAE3V,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC5C,IAAI,CAACk1I,WAAW,CAACkB,UAAU,CAACp2I,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC/C,KAAK,IAAInG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B,MAAMwzI,IAAI,GAAGtc,UAAU,CAAC97E,MAAM,CAACklB,QAAQ,CAACxkD,CAAC,GAAG,CAAC,GAAG9b,CAAC,CAAC,CAAC,CAACw8I,OAAO,CAAC,CAAC,CAAC;QAC9D,IAAI,CAACnB,WAAW,CAAC7H,IAAI,CAACrtI,QAAQ,CAAC,CAAC,EAAE,EAAE,GAAGnG,CAAC,GAAG,EAAE,EAAE,EAAE,GAAGA,CAAC,GAAG,EAAE,CAAC;MAC7D;MAEA,MAAMwzI,IAAI,GAAGtc,UAAU,CAAC97E,MAAM,CAACklB,QAAQ,CAACxkD,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC0gI,OAAO,CAAC,CAAC,CAAC;MAC9D,IAAI,CAACnB,WAAW,CAAC7H,IAAI,CAACrtI,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;IAC3C;EACF;EAEAs2I,aAAaA,CAAC9hG,QAAQ,EAAEzc,MAAM,EAAE;IAC9B,IAAI,CAACyc,QAAQ,EAAE;MACb;IACF;IACA,MAAMS,MAAM,GAAG,IAAI2jB,iGAAO,CAAC,CAAC;IAC5B,KAAK,IAAIjjD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6+B,QAAQ,CAACx6C,MAAM,EAAE2b,CAAC,EAAE,EAAE;MACxCs/B,MAAM,CAAC1jC,IAAI,CAACijC,QAAQ,CAAC7+B,CAAC,CAAC,CAAC,CAACgqH,SAAS,CAAC,CAAC;MACpC,IAAI,CAACwW,WAAW,CAAClhG,MAAM,EAAEt/B,CAAC,GAAG,CAAC,EAAEoiB,MAAM,CAAC;IACzC;EACF;AACF;;AC1MuB;AACkB;AACP;AACE;AACO;AACY;AAExC,MAAMw+G,WAAW,SAAShC,QAAQ,CAAC;EAChDlnI,WAAWA,CAAC8zD,MAAM,EAAE96D,OAAO,EAAE;IAC3B,KAAK,CAAC86D,MAAM,EAAE96D,OAAO,CAAC;IACtB,IAAI,CAACmwI,KAAK,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,iBAAiB,EAAE,QAAQ,CAAC;IACnG,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,cAAc,GAAG;MACpBpgB,MAAM,EAAE,IAAI,CAACqgB,cAAc;MAC3BC,KAAK,EAAE,IAAI,CAACC,aAAa;MACzB,iBAAiB,EAAE,IAAI,CAACC,YAAY;MACpCrgB,MAAM,EAAE,IAAI,CAACsgB,cAAc;MAC3BrgB,MAAM,EAAE,IAAI,CAACsgB,cAAc;MAC3BrgB,MAAM,EAAE,IAAI,CAACsgB,cAAc;MAC3B3pG,KAAK,EAAE,IAAI,CAAC4pG,aAAa;MACzBC,KAAK,EAAE,IAAI,CAACC;IACd,CAAC;IACD,IAAI,CAACC,mBAAmB,GAAG,8DAA8D,GAC9D,yDAAyD,GACzD,+DAA+D,GAC/D,+CAA+C,GAC/C,wCAAwC;IAEnE,IAAI,CAACC,mBAAmB,GAAG,6CAA6C,GAC7C,4DAA4D,GAC5D,yDAAyD,GACzD,oBAAoB;EACjD;EAEA9C,UAAUA,CAAA,EAAG;IACX,MAAM3uH,MAAM,GAAG,IAAI6uH,SAAS,CAAC,CAAC;IAC9B,IAAI,CAAC,IAAI,CAAChmB,OAAO,EAAE;MACjB,OAAO,IAAI,CAAC+nB,OAAO;IACrB;IAEA,KAAK,IAAI10I,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACy0I,KAAK,CAACx8I,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC1C,MAAMkf,GAAG,GAAG,IAAI,CAACu1H,KAAK,CAACz0I,CAAC,CAAC;MACzB,MAAM46G,IAAI,GAAG,IAAI,CAAC+5B,cAAc,CAACz1H,GAAG,CAAC;MACrC,IAAI1d,6GAAY,CAACo5G,IAAI,CAAC,EAAE;QACtBA,IAAI,CAACj3G,IAAI,CAAC,IAAI,EAAEmgB,MAAM,CAAC;MACzB;IACF;IAEA,IAAI,CAAC4wH,OAAO,GAAG5wH,MAAM,CAACovH,SAAS,CAAC,CAAC;IAEjC,OAAO,IAAI,CAACwB,OAAO;EACrB;EAEAE,cAAcA,CAAC9wH,MAAM,EAAE;IACrB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAAC5iE,QAAQ,EAAE;MAC1B;IACF;IACA,MAAM;MAAEA;IAAS,CAAC,GAAG,IAAI,CAAC4iE,OAAO;IACjC7oG,MAAM,CAACuvH,MAAM,CAAC,QAAQ,CAAC;IACvBvvH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;IAClB,IAAIzpF,QAAQ,CAACmqE,cAAc,EAAE;MAC3BpwG,MAAM,CAACqvH,WAAW,CAACppF,QAAQ,CAACmqE,cAAc,EAAE,EAAE,EAAE,EAAE,CAAC;IACrD;IACA,IAAInqE,QAAQ,CAACoqE,IAAI,EAAE;MACjBrwG,MAAM,CAACqvH,WAAW,CAACppF,QAAQ,CAACoqE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;IAC3C;IACA,IAAIpqE,QAAQ,CAAC5qC,EAAE,EAAE;MACf2E,MAAM,CAACqvH,WAAW,CAACppF,QAAQ,CAAC5qC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IACzC;EACF;EAEA21H,aAAaA,CAAChxH,MAAM,EAAE;IACpB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAAC5iE,QAAQ,EAAE;MAC1B;IACF;IACA,MAAM;MAAEA;IAAS,CAAC,GAAG,IAAI,CAAC4iE,OAAO;IACjC,IAAI,CAAC5iE,QAAQ,CAACsqE,KAAK,EAAE;MACnB;IACF;IACAvwG,MAAM,CAACuvH,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC;IAC5B,KAAK,IAAIrzI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+pD,QAAQ,CAACsqE,KAAK,CAACp8H,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC9C8jB,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAACppF,QAAQ,CAACsqE,KAAK,CAACr0H,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;IAC/C;EACF;EAEAg1I,cAAcA,CAAClxH,MAAM,EAAE;IACrB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAACprF,MAAM,EAAE;MACxB;IACF;IAEA,MAAMR,KAAK,GAAG,IAAI,CAAC4rF,OAAO,CAACprF,MAAM;IACjCzd,MAAM,CAACuvH,MAAM,CAAC,QAAQ,CAAC;IAEvB,KAAK,IAAIrzI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACrC,MAAMw1I,UAAU,GAAGz0G,KAAK,CAAC/gC,CAAC,CAAC,CAACm7B,KAAK,CAAC7F,MAAM,CAAEnJ,IAAI,IAAKA,IAAI,CAAC6R,MAAM,CAAC;MAC/D,IAAIw3G,UAAU,CAACv9I,MAAM,KAAK,CAAC,EAAE;QAC3B6rB,MAAM,CAACiwH,eAAe,CAACyB,UAAU,CAAC7I,OAAO,CAAC,CAAC,EAAE5rG,KAAK,CAAC/gC,CAAC,CAAC,CAAC;MACxD;IACF;EACF;EAEAq1I,aAAaA,CAACvxH,MAAM,EAAE;IACpB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAACljE,OAAO,EAAE;MACzB;IACF;IAEA3lC,MAAM,CAACuvH,MAAM,CAAC,OAAO,CAAC;IAEtB,MAAMtmF,MAAM,GAAG,IAAI,CAAC4/D,OAAO,CAACljE,OAAO;IACnC,KAAK,IAAIzpD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+sD,MAAM,CAAC90D,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACtC,IAAI+sD,MAAM,CAAC/sD,CAAC,CAAC,CAAC8sC,QAAQ,EAAE;QACtB,MAAM2oG,OAAO,GAAG1oF,MAAM,CAAC/sD,CAAC,CAAC,CAAC8sC,QAAQ;QAClC,KAAK,IAAIl5B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG6hI,OAAO,CAACx9I,MAAM,EAAE2b,CAAC,EAAE,EAAE;UACvCkQ,MAAM,CAAC0vH,SAAS,CAAC,CAAC;UAClB1vH,MAAM,CAACqvH,WAAW,CAACv/H,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;UAChCkQ,MAAM,CAACqvH,WAAW,CAACpmF,MAAM,CAAC/sD,CAAC,CAAC,CAACqjC,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;UAC3Cvf,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAACx9I,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;UAC1C6rB,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC22B,IAAI,CAACrM,KAAK,CAACmF,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;UACvDvf,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC22B,IAAI,CAACzO,MAAM,CAACuH,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;UACxDvf,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC22B,IAAI,CAACvO,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;UACrDlY,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC22B,IAAI,CAAClJ,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;UAClDvd,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC42B,IAAI,CAACtM,KAAK,CAACmF,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;UACvDvf,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC22B,IAAI,CAACzO,MAAM,CAACuH,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;UACxDvf,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC42B,IAAI,CAACxO,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;UACrDlY,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC42B,IAAI,CAACnJ,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;UAClDvd,MAAM,CAACqvH,WAAW,CAACsC,OAAO,CAAC7hI,CAAC,CAAC,CAAC44B,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;QAC9C;MACF;IACF;EACF;EAEA2oG,aAAaA,CAACrxH,MAAM,EAAE;IACpB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAACnjE,QAAQ,EAAE;MAC1B;IACF;IAEA1lC,MAAM,CAACuvH,MAAM,CAAC,OAAO,CAAC;IACtB,MAAMvmF,OAAO,GAAG,IAAI,CAAC6/D,OAAO,CAACnjE,QAAQ;IACrC,KAAK,IAAIxpD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8sD,OAAO,CAAC70D,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACvC,MAAMuuB,KAAK,GAAGu+B,OAAO,CAAC9sD,CAAC,CAAC;MACxB,MAAMosC,UAAU,GAAG5qC,yGAAQ,CAAC0qC,mBAAmB,CAAC;MAChDpoB,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACqM,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC;MACvC9W,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACpI,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;MACtCrC,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACgc,IAAI,CAACrM,KAAK,CAACmF,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MAClDvf,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACgc,IAAI,CAACzO,MAAM,CAACuH,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MACnDvf,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACgc,IAAI,CAACvO,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;MAChDlY,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACgc,IAAI,CAAClJ,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MAC7Cvd,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACic,IAAI,CAACtM,KAAK,CAACmF,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MAClDvf,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACic,IAAI,CAAC1O,MAAM,CAACuH,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MACnDvf,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACic,IAAI,CAACxO,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;MAChDlY,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACic,IAAI,CAACnJ,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MAC7Cvd,MAAM,CAACqvH,WAAW,CAAC/mG,UAAU,CAAC7d,KAAK,CAAC/tB,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAClDsjB,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAAC8d,OAAO,EAAE,EAAE,EAAE,EAAE,CAAC;MACzCvoB,MAAM,CAACqvH,WAAW,CAAC5kH,KAAK,CAACt2B,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;IAC1C;EACF;EAEA88I,YAAYA,CAACjxH,MAAM,EAAE;IACnB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAACprF,MAAM,EAAE;MACxB;IACF;IACA,MAAMR,KAAK,GAAG,IAAI,CAAC4rF,OAAO,CAACprF,MAAM;IAEjC,KAAK,IAAIvhC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+gC,KAAK,CAAC9oC,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACrC,MAAMkf,GAAG,GAAG6hB,KAAK,CAAC/gC,CAAC,CAAC,CAAC26B,GAAG,GAAG,QAAQ,GAAG,MAAM;MAC5C7W,MAAM,CAAC0vH,SAAS,CAACt0H,GAAG,CAAC;MACrB,MAAMw2H,SAAS,GAAI30G,KAAK,CAAC/gC,CAAC,CAAC,CAACkY,OAAO,CAACiO,IAAI,CAACluB,MAAM,GAAG,CAAC,IAAI8oC,KAAK,CAAC/gC,CAAC,CAAC,CAACmmB,IAAI,CAACluB,MAAM,GAAG,CAAC,GAAI,EAAE,GAAG,EAAE;MAC1F6rB,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAAC46B,MAAM,EAAE,EAAE,EAAE,CAAC,CAAC;MAC1C9W,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACmmB,IAAI,EAAEuvH,SAAS,EAAE,EAAE,CAAC;MAChD5xH,MAAM,CAACqvH,WAAW,CAAC5wI,MAAM,CAACiT,YAAY,CAACurB,KAAK,CAAC/gC,CAAC,CAAC,CAAC0jB,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAClEI,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACy6B,OAAO,CAACyD,KAAK,CAACmF,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MACxDvf,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACy6B,OAAO,CAACqB,MAAM,CAACuH,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC;MACzDvf,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACy6B,OAAO,CAACuB,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;MACtDlY,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACy6B,OAAO,CAAC4G,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MACnDvd,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACyb,QAAQ,CAACvN,CAAC,CAAComI,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC1DxwH,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACyb,QAAQ,CAAC9I,CAAC,CAAC2hI,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC1DxwH,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACyb,QAAQ,CAACzH,CAAC,CAACsgI,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC1DxwH,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAAC4Y,SAAS,CAAC07H,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MACzDxwH,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAAC66B,WAAW,CAACy5G,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC;MAC3DxwH,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAACkY,OAAO,CAACiO,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;MACjD,IAAI4a,KAAK,CAAC/gC,CAAC,CAAC,CAAC86B,MAAM,EAAE;QACnBhX,MAAM,CAACqvH,WAAW,CAACpyG,KAAK,CAAC/gC,CAAC,CAAC,CAAC86B,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;MAC7C;IACF;EACF;EAEAm6G,cAAcA,CAACnxH,MAAM,EAAE;IACrB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAAC9iE,UAAU,EAAE;MAC5B;IACF;IACA,MAAMqB,SAAS,GAAG,IAAI,CAACyhE,OAAO,CAAC9iE,UAAU;IACzC/lC,MAAM,CAACuvH,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC;IAE7B,KAAK,IAAIrzI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkrD,SAAS,CAACjzD,MAAM,EAAE+H,CAAC,EAAE,EAAE;MACzC,MAAMwyC,MAAM,GAAG,IAAI,CAACmjG,kBAAkB,CAACzqF,SAAS,CAAClrD,CAAC,CAAC,CAAC;MACpD8jB,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC,WAAWjoF,SAAS,CAAClrD,CAAC,CAAC,CAACiI,KAAK,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;MAC5D6b,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC,aAAajoF,SAAS,CAAClrD,CAAC,CAAC,CAACmmB,IAAI,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;MAC7DrC,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC;MACrC,MAAMyC,YAAY,GAAG,GAAGpjG,MAAM,CAAC/sC,IAAI,CAAC,IAAI,CAAC,GAAG;MAC5Cqe,MAAM,CAAC2vH,iBAAiB,CAACmC,YAAY,EAAE,EAAE,CAAC;IAC5C;EACF;EAEAV,cAAcA,CAACpxH,MAAM,EAAE;IACrB,IAAI,CAAC+xH,UAAU,CAAC/xH,MAAM,CAAC;IACvB,IAAI,CAACgyH,UAAU,CAAChyH,MAAM,CAAC;EACzB;EAEA+xH,UAAUA,CAAC/xH,MAAM,EAAE;IACjB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAAC3iE,QAAQ,EAAE;MAC1B;IACF;IAEA,IAAI,IAAI,CAAC2iE,OAAO,CAAC3iE,QAAQ,CAAC/xD,MAAM,KAAK,CAAC,EAAE;MACtC,MAAMw6C,QAAQ,GAAG,IAAI,CAACk6E,OAAO,CAAC3iE,QAAQ;MACtClmC,MAAM,CAACuvH,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC;MAC5BvvH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAAC2vH,iBAAiB,CAAC,IAAI,CAAC8B,mBAAmB,CAAC;MAClDzxH,MAAM,CAACywH,aAAa,CAAC9hG,QAAQ,EAAE,OAAO,CAAC;MACvC3uB,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC,cAAc,EAAE,EAAE,EAAE,EAAE,CAAC;IAC5C;EACF;EAEA2C,UAAUA,CAAChyH,MAAM,EAAE;IACjB,IAAI,CAAC,IAAI,CAAC6oG,OAAO,CAAC1iE,KAAK,EAAE;MACvB;IACF;IACA,MAAM;MAAEA;IAAM,CAAC,GAAG,IAAI,CAAC0iE,OAAO;IAC9B,IAAIopB,UAAU,GAAG,CAAC;IAElBjyH,MAAM,CAACuvH,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC;IAC5BvvH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;IAClB1vH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;IAClB1vH,MAAM,CAAC2vH,iBAAiB,CAAC,IAAI,CAAC6B,mBAAmB,CAAC;IAElD,MAAMpmB,UAAU,GAAGjlE,KAAK,CAAC30B,MAAM,CAAE0C,IAAI,IAAKA,IAAI,YAAYua,aAAQ,CAAC;IAEnE,KAAK,IAAIvyC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkvH,UAAU,CAACj3H,MAAM,EAAE+H,CAAC,EAAE,EAAE;MAC1C8jB,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClBuC,UAAU,EAAE;MACZjyH,MAAM,CAACqvH,WAAW,CAAC,gBAAgB4C,UAAU,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;MACxD,MAAMvjG,MAAM,GAAG08E,UAAU,CAAClvH,CAAC,CAAC,CAACwyC,MAAM,CAAC/sC,IAAI,CAAC,IAAI,CAAC;MAC9Cqe,MAAM,CAAC0vH,SAAS,CAAC,CAAC;MAClB1vH,MAAM,CAACqvH,WAAW,CAAC,iCAAiC,CAAC;MACrDrvH,MAAM,CAAC2vH,iBAAiB,CAACjhG,MAAM,EAAE,EAAE,EAAE;QAAEtzB,GAAG,EAAE,cAAc;QAAE7W,KAAK,EAAE,EAAE;QAAEwV,GAAG,EAAE;MAAG,CAAC,CAAC;MAEjF,MAAM;QAAE40B;MAAS,CAAC,GAAGy8E,UAAU,CAAClvH,CAAC,CAAC;MAClC8jB,MAAM,CAACywH,aAAa,CAAC9hG,QAAQ,EAAE,OAAO,CAAC;IACzC;EACF;EAEAkjG,kBAAkBA,CAACroF,QAAQ,EAAE;IAC3B,SAAS0oF,YAAYA,CAACv7G,OAAO,EAAE;MAC7B,OAAOA,OAAO,CAACqB,MAAM,CAACuH,KAAK;IAC7B;IACA,MAAMo6F,UAAU,GAAGnwE,QAAQ,CAAC/jB,QAAQ,CAAC1P,GAAG,CAACm8G,YAAY,CAAC;IACtD,OAAOvY,UAAU,CAACnoG,MAAM,CAAC,CAAC66B,IAAI,EAAEpe,GAAG,KAAK0rF,UAAU,CAACtnH,OAAO,CAACg6C,IAAI,CAAC,KAAKpe,GAAG,CAAC;EAC3E;AACF;AAEAyiG,WAAW,CAACxmB,OAAO,GAAG,CAAC,KAAK,CAAC;AAC7BwmB,WAAW,CAACyB,WAAW,GAAG3sF,YAAO;;AC9QF;AAE/B,MAAM4sF,YAAY,GAAG,CAAC;AACtB,MAAMC,aAAa,GAAG,CAAC;AACvB,MAAMC,YAAY,GAAG,CAAC;AAEtB,SAASC,aAAaA,CAAC3uH,GAAG,EAAE4uH,MAAM,EAAE3uH,GAAG,EAAE4uH,MAAM,EAAE;EAC/C5uH,GAAG,CAAC4uH,MAAM,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,CAAC;EACzB3uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC;EACjC3uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC;AACnC;AAEA,SAASE,aAAaA,CAAC9uH,GAAG,EAAE4uH,MAAM,EAAE3uH,GAAG,EAAE4uH,MAAM,EAAE91H,KAAK,EAAE;EACtDkH,GAAG,CAAC4uH,MAAM,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,CAAC;EACzB3uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC;EACjC3uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAG7uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC;EACjC3uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAG91H,KAAK;AACzB;AAEA,MAAMg2H,OAAO,GAAG,IAAIj2G,iGAAa,CAAC,CAAC;AACnC,SAASk2G,qBAAqBA,CAAChvH,GAAG,EAAE4uH,MAAM,EAAE3uH,GAAG,EAAE4uH,MAAM,EAAE71I,IAAI,EAAE;EAC7D+1I,OAAO,CAACp4I,GAAG,CAACqpB,GAAG,CAAC4uH,MAAM,CAAC,EAAE5uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,EAAE5uH,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,EAAE51I,IAAI,CAACqS,CAAC,CAAC;EAClE0jI,OAAO,CAAC7jG,YAAY,CAAClyC,IAAI,CAACwyC,MAAM,CAAC;EACjCvrB,GAAG,CAAC4uH,MAAM,CAAC,GAAGE,OAAO,CAACvoI,CAAC;EACvByZ,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAGE,OAAO,CAAC9jI,CAAC;EAC3BgV,GAAG,CAAC4uH,MAAM,GAAG,CAAC,CAAC,GAAGE,OAAO,CAACziI,CAAC;AAC7B;AAEA,SAAS2iI,WAAWA,CAACjvH,GAAG,EAAEC,GAAG,EAAEvX,KAAK,EAAEwmI,WAAW,EAAEC,WAAW,EAAE;EAC9D,IAAI,CAAClvH,GAAG,CAAC/a,KAAK,CAAC3U,MAAM,GAAG0vB,GAAG,CAAClJ,KAAK,IAAIkJ,GAAG,CAACk+B,MAAM,GAAGz1C,KAAK,IAClD,CAACsX,GAAG,CAAC9a,KAAK,CAAC3U,MAAM,GAAGyvB,GAAG,CAACjJ,KAAK,IAAIiJ,GAAG,CAACm+B,MAAM,GAAGz1C,KAAK,EAAE;IACxD,OAAO,CAAC;EACV;EACA,IAAIsX,GAAG,CAACm+B,MAAM,KAAKl+B,GAAG,CAACk+B,MAAM,EAAE;IAAE;IAC/Bl+B,GAAG,CAAC/a,KAAK,CAACvO,GAAG,CAACqpB,GAAG,CAAC9a,KAAK,EAAE+a,GAAG,CAAClJ,KAAK,CAAC;EACrC,CAAC,MAAM;IACL,IAAI9B,GAAG,GAAGgL,GAAG,CAAClJ,KAAK;IACnB,IAAIq4H,MAAM,GAAGpvH,GAAG,CAACjJ,KAAK;IACtB,KAAK,IAAIze,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAE,EAAEpQ,CAAC,EAAE2c,GAAG,IAAIgL,GAAG,CAACk+B,MAAM,EAAEixF,MAAM,IAAIpvH,GAAG,CAACm+B,MAAM,EAAE;MACvE+wF,WAAW,CAAClvH,GAAG,CAAC9a,KAAK,EAAEkqI,MAAM,EAAEnvH,GAAG,CAAC/a,KAAK,EAAE+P,GAAG,EAAEk6H,WAAW,CAAC;IAC7D;EACF;AACF;AAEe,MAAME,QAAQ,CAAC;EAC5BzrI,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC09D,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC9C,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC7B,MAAM,GAAG,IAAI;IAClB,IAAI,CAAC95C,OAAO,GAAG,IAAI;IACnB,IAAI,CAACysH,OAAO,GAAG,CAAC;IAChB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,OAAO,GAAG,CAAC;IAChB,IAAI,CAACrtE,OAAO,GAAG,CAAC;EAClB;EAEAt/B,IAAIA,CAAC4sG,UAAU,EAAEC,SAAS,EAAE;IAC1B,IAAI,CAACpuE,SAAS,GAAG,IAAI52D,YAAY,CAAC+kI,UAAU,GAAGjB,YAAY,CAAC;IAC5D,IAAI,CAAChwE,OAAO,GAAG,IAAI9zD,YAAY,CAAC+kI,UAAU,GAAGhB,aAAa,CAAC;IAC3D,IAAI,CAAC9xE,MAAM,GAAG,IAAIjyD,YAAY,CAAC+kI,UAAU,GAAGf,YAAY,CAAC;IACzD,IAAI,CAAC7rH,OAAO,GAAG,IAAIpY,UAAU,CAACilI,SAAS,CAAC;EAC1C;EAEAC,YAAYA,CAACzqI,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAEy1C,MAAM,EAAE;IACxC,MAAMn+B,GAAG,GAAG;MACV9a,KAAK;MACL6R,KAAK;MACLonC;IACF,CAAC;IACD,MAAMl+B,GAAG,GAAG;MACV/a,KAAK,EAAE,IAAI,CAACo8D,SAAS;MACrBvqD,KAAK,EAAE,IAAI,CAACu4H,OAAO;MACnBnxF,MAAM,EAAEqwF;IACV,CAAC;IACDS,WAAW,CAACjvH,GAAG,EAAEC,GAAG,EAAEvX,KAAK,EAAEimI,aAAa,CAAC;IAC3C,IAAI,CAACW,OAAO,IAAI5mI,KAAK,GAAG8lI,YAAY;EACtC;EAEAoB,uBAAuBA,CAAC1qI,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAEy1C,MAAM,EAAE3S,MAAM,EAAE;IAC3D,IAAIv2B,GAAG,GAAG,IAAI,CAACq6H,OAAO;IACtB,IAAIzwC,MAAM,GAAG9nF,KAAK;IAClB,MAAM/d,IAAI,GAAG;MAAEwyC,MAAM;MAAEngC,CAAC,EAAE;IAAE,CAAC;IAC7B,KAAK,IAAI/S,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAE,EAAEpQ,CAAC,EAAEumG,MAAM,IAAI1gD,MAAM,EAAElpC,GAAG,IAAIu5H,YAAY,EAAE;MACrEQ,qBAAqB,CAAC9pI,KAAK,EAAE25F,MAAM,EAAE,IAAI,CAACv9B,SAAS,EAAErsD,GAAG,EAAEjc,IAAI,CAAC;IACjE;IACA,IAAI,CAACs2I,OAAO,IAAI5mI,KAAK,GAAG8lI,YAAY;EACtC;EAEAqB,UAAUA,CAAC3qI,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAEy1C,MAAM,EAAE;IACtC,MAAMn+B,GAAG,GAAG;MACV9a,KAAK;MACL6R,KAAK;MACLonC;IACF,CAAC;IACD,MAAMl+B,GAAG,GAAG;MACV/a,KAAK,EAAE,IAAI,CAACs5D,OAAO;MACnBznD,KAAK,EAAE,IAAI,CAACw4H,QAAQ;MACpBpxF,MAAM,EAAEswF;IACV,CAAC;IACDQ,WAAW,CAACjvH,GAAG,EAAEC,GAAG,EAAEvX,KAAK,EAAEimI,aAAa,CAAC;IAC3C,IAAI,CAACY,QAAQ,IAAI7mI,KAAK,GAAG+lI,aAAa;EACxC;EAEAqB,qBAAqBA,CAAC5qI,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAEy1C,MAAM,EAAE3S,MAAM,EAAE;IACzD,IAAIv2B,GAAG,GAAG,IAAI,CAACs6H,QAAQ;IACvB,IAAI1wC,MAAM,GAAG9nF,KAAK;IAClB,MAAM/d,IAAI,GAAG;MAAEwyC,MAAM;MAAEngC,CAAC,EAAE;IAAE,CAAC;IAC7B,KAAK,IAAI/S,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGoQ,KAAK,EAAE,EAAEpQ,CAAC,EAAEumG,MAAM,IAAI1gD,MAAM,EAAElpC,GAAG,IAAIw5H,aAAa,EAAE;MACtEO,qBAAqB,CAAC9pI,KAAK,EAAE25F,MAAM,EAAE,IAAI,CAACrgC,OAAO,EAAEvpD,GAAG,EAAEjc,IAAI,CAAC;IAC/D;IACA,IAAI,CAACu2I,QAAQ,IAAI7mI,KAAK,GAAG+lI,aAAa;EACxC;EAEAtmE,SAASA,CAACjjE,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAEy1C,MAAM,EAAE;IACrC,MAAMn+B,GAAG,GAAG;MACV9a,KAAK;MACL6R,KAAK;MACLonC;IACF,CAAC;IACD,MAAMl+B,GAAG,GAAG;MACV/a,KAAK,EAAE,IAAI,CAACy3D,MAAM;MAClB5lD,KAAK,EAAE,IAAI,CAACy4H,OAAO;MACnBrxF,MAAM,EAAEuwF;IACV,CAAC;IACDO,WAAW,CAACjvH,GAAG,EAAEC,GAAG,EAAEvX,KAAK,EAAEomI,aAAa,EAAE,CAAC,CAAC;IAC9C,IAAI,CAACU,OAAO,IAAI9mI,KAAK,GAAGgmI,YAAY;EACtC;EAEAqB,UAAUA,CAAC7qI,KAAK,EAAE6R,KAAK,EAAErO,KAAK,EAAE;IAC9B,IAAI,CAACma,OAAO,CAAClsB,GAAG,CAACuO,KAAK,EAAE,IAAI,CAACi9D,OAAO,CAAC;IACrC,IAAI,CAACA,OAAO,IAAIz5D,KAAK;EACvB;EAEAsnI,iBAAiBA,CAAC9qI,KAAK,EAAEwD,KAAK,EAAEy1F,KAAK,EAAE;IACrC,MAAM8xC,OAAO,GAAG/qI,KAAK,CAACitB,GAAG,CAAE3rB,CAAC,IAAKA,CAAC,GAAG23F,KAAK,CAAC;IAC3C,IAAI,CAAC4xC,UAAU,CAACE,OAAO,EAAE,CAAC,EAAEvnI,KAAK,CAAC;EACpC;EAEAwnI,iBAAiBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACZ,OAAO,GAAGd,YAAY;EACpC;EAEA2B,WAAWA,CAAC3kG,MAAM,EAAEwpB,GAAG,EAAE;IACvB;IACA,MAAMo7E,YAAY,GAAG,IAAI,CAACF,iBAAiB,CAAC,CAAC;IAC7C,IAAI,CAACF,iBAAiB,CAACh7E,GAAG,CAACnyC,OAAO,EAAEmyC,GAAG,CAACnyC,OAAO,CAACtyB,MAAM,EAAE6/I,YAAY,CAAC;IACrE;IACA,MAAMtxH,IAAI,GAAGk2C,GAAG,CAAClyC,QAAQ;IACzB,IAAI,CAAC8sH,uBAAuB,CAAC56E,GAAG,CAACsM,SAAS,EAAE,CAAC,EAAEtM,GAAG,CAACy6E,UAAU,EAAE3wH,IAAI,CAAC/K,QAAQ,EAAEy3B,MAAM,CAAC;IACrF,IAAI,CAACskG,qBAAqB,CAAC96E,GAAG,CAACwJ,OAAO,EAAE,CAAC,EAAExJ,GAAG,CAACy6E,UAAU,EAAE3wH,IAAI,CAAC4/C,MAAM,EAAElzB,MAAM,CAAC;IAC/E,IAAI,CAAC28B,SAAS,CAACnT,GAAG,CAAC2H,MAAM,EAAE,CAAC,EAAE3H,GAAG,CAACy6E,UAAU,EAAE3wH,IAAI,CAACzL,KAAK,CAAC;EAC3D;AACF;;ACxJA;AACe,MAAMg9H,WAAW,CAAC;EAC/B;AACF;AACA;EACEzsI,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC09D,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC9C,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC7B,MAAM,GAAG,IAAI;IAClB,IAAI,CAAC95C,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC4sH,UAAU,GAAG,CAAC;IACnB,IAAI,CAAC3sH,QAAQ,GAAG,IAAI;EACtB;;EAEA;AACF;AACA;AACA;EACE+f,IAAIA,CAACmyB,GAAG,EAAEs7E,KAAK,EAAE;IACf,MAAM;MAAE1yE;IAAW,CAAC,GAAG5I,GAAG;IAC1B;IACA,IAAI,CAAClyC,QAAQ,GAAG;MACd/O,QAAQ,EAAE6pD,UAAU,CAAC7pD,QAAQ,CAAC+O,QAAQ;MACtC47C,MAAM,EAAEd,UAAU,CAACc,MAAM,CAAC57C,QAAQ;MAClCzP,KAAK,EAAEuqD,UAAU,CAACvqD,KAAK,CAACyP;IAC1B,CAAC;EACH;AACF;;AC3BwC;;AAExC;AACA;AACA;AACA;AACe,MAAMytH,aAAa,SAASF,WAAW,CAAC;EACrD;AACF;AACA;AACA;EACExtG,IAAIA,CAACmyB,GAAG,EAAEs7E,KAAK,EAAE;IACf,KAAK,CAACztG,IAAI,CAACmyB,GAAG,EAAEs7E,KAAK,CAAC;IACtB,MAAM;MACJ1yE,UAAU,EAAE;QACV7pD,QAAQ;QACR2qD;MACF,CAAC;MACDn+D;IACF,CAAC,GAAGy0D,GAAG;IACP;IACA,IAAI,CAACy6E,UAAU,GAAG17H,QAAQ,CAACrL,KAAK;IAChC,IAAI,CAAC44D,SAAS,GAAGvtD,QAAQ,CAAC7O,KAAK;IAC/B,IAAI,CAACs5D,OAAO,GAAGE,MAAM,CAACx5D,KAAK;IAC3B;IACA,IAAI,CAACy3D,MAAM,GAAG,IAAIjyD,YAAY,CAAC,IAAI,CAAC+kI,UAAU,GAAG,IAAI,CAAC3sH,QAAQ,CAACzP,KAAK,CAAC;IACrE;IACA,IAAI,CAACwP,OAAO,GAAGtiB,KAAK,CAAC2E,KAAK;EAC5B;;EAEA;AACF;AACA;AACA;EACEijE,SAASA,CAAC90D,KAAK,EAAE;IACf,IAAIrU,MAAM,GAAG,CAAC;IACd,KAAK,IAAI1G,CAAC,GAAG,CAAC,EAAEhI,CAAC,GAAG,IAAI,CAACqsE,MAAM,CAACpsE,MAAM,EAAEigJ,EAAE,GAAG,IAAI,CAAC1tH,QAAQ,CAACzP,KAAK,EAAE/a,CAAC,GAAGhI,CAAC,EAAEgI,CAAC,IAAIk4I,EAAE,EAAE;MAChF,IAAI,CAAC7zE,MAAM,CAAC39D,MAAM,EAAE,CAAC,GAAGqU,KAAK,CAAC9V,CAAC;MAC/B,IAAI,CAACo/D,MAAM,CAAC39D,MAAM,EAAE,CAAC,GAAGqU,KAAK,CAACzI,CAAC;MAC/B,IAAI,CAAC+xD,MAAM,CAAC39D,MAAM,EAAE,CAAC,GAAGqU,KAAK,CAAClI,CAAC;IACjC;EACF;AACF;;AC1CwC;;AAExC;AACA;AACA;AACA;AACA;AACe,MAAMslI,aAAa,SAASJ,WAAW,CAAC;EACrDzsI,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,CAAC;IACP,IAAI,CAAC8sI,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,cAAc,GAAG,CAAC;EACzB;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE/tG,IAAIA,CAACmyB,GAAG,EAAE/6C,IAAI,EAAE;IACd,KAAK,CAAC4oB,IAAI,CAACmyB,GAAG,EAAE/6C,IAAI,CAAC;IACrB,MAAM;MACJ2jD,UAAU,EAAE;QACV7pD;MACF,CAAC;MACDxT;IACF,CAAC,GAAGy0D,GAAG;IACP;IACA,IAAI,CAACy6E,UAAU,GAAG17H,QAAQ,CAACrL,KAAK,GAAGuR,IAAI,CAAC42H,cAAc;IACtD,IAAI,CAACD,cAAc,GAAG32H,IAAI,CAAC42H,cAAc;IACzC,IAAI,CAACvvE,SAAS,GAAG,IAAI52D,YAAY,CAAC,IAAI,CAAC+kI,UAAU,GAAG17H,QAAQ,CAAC+O,QAAQ,CAAC;IACtE,IAAI,CAAC07C,OAAO,GAAG,IAAI9zD,YAAY,CAAC,IAAI,CAAC+kI,UAAU,GAAG,IAAI,CAAC3sH,QAAQ,CAAC47C,MAAM,CAAC;IACvE,IAAI,CAAC/B,MAAM,GAAG,IAAIjyD,YAAY,CAAC,IAAI,CAAC+kI,UAAU,GAAG,IAAI,CAAC3sH,QAAQ,CAACzP,KAAK,CAAC;IACrE,IAAI,CAACy9H,eAAe,CAAC97E,GAAG,EAAE/6C,IAAI,CAAC;IAC/B;IACA,IAAI,CAAC4I,OAAO,GAAG,IAAIq7C,WAAW,CAAC39D,KAAK,CAACmI,KAAK,CAAC;IAC3C,IAAI,CAACqoI,cAAc,CAAC/7E,GAAG,EAAE/6C,IAAI,CAAC;EAChC;;EAEA;EACA62H,eAAeA,CAAC97E,GAAG,EAAE/6C,IAAI,EAAE;IACzB,MAAM;MAAElG;IAAS,CAAC,GAAGihD,GAAG,CAAC4I,UAAU;IACnC,MAAM;MAAEc;IAAO,CAAC,GAAG1J,GAAG,CAAC4I,UAAU;IACjC,MAAM84B,SAAS,GAAG1hC,GAAG,CAACyP,YAAY,CAAC,CAAC;IACpC,MAAMusE,MAAM,GAAG,CAAC,CAAC,CAAC;IAClB,IAAI,CAACN,YAAY,GAAGM,MAAM,GAAGt6C,SAAS,CAAC/1B,cAAc;IACrD,IAAI,CAACgwE,UAAU,GAAG,IAAI,CAACD,YAAY,GAAGz2H,IAAI,CAAC42H,cAAc;IACzD;MAAE;MACA,IAAI7lC,IAAI,GAAGj3F,QAAQ,CAAC7O,KAAK,CAAClJ,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC20I,UAAU,GAAG58H,QAAQ,CAAC+O,QAAQ,CAAC;MACvE,IAAI,CAACw+C,SAAS,CAAC3qE,GAAG,CAACq0G,IAAI,EAAE,CAAC,CAAC;MAC3BA,IAAI,GAAGtsC,MAAM,CAACx5D,KAAK,CAAClJ,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC20I,UAAU,GAAGjyE,MAAM,CAAC57C,QAAQ,CAAC;MAC/D,IAAI,CAAC07C,OAAO,CAAC7nE,GAAG,CAACq0G,IAAI,EAAE,CAAC,CAAC;IAC3B;IACA;MAAE;MACA,IAAIA,IAAI,GAAGj3F,QAAQ,CAAC7O,KAAK,CAAClJ,KAAK,CAAC,IAAI,CAAC00I,YAAY,GAAG38H,QAAQ,CAAC+O,QAAQ,EAAE/O,QAAQ,CAAC7O,KAAK,CAAC3U,MAAM,CAAC;MAC7F,IAAI,CAAC+wE,SAAS,CAAC3qE,GAAG,CAACq0G,IAAI,EAAE,IAAI,CAAC2lC,UAAU,GAAG58H,QAAQ,CAAC+O,QAAQ,CAAC;MAC7DkoF,IAAI,GAAGtsC,MAAM,CAACx5D,KAAK,CAAClJ,KAAK,CAAC,IAAI,CAAC00I,YAAY,GAAGhyE,MAAM,CAAC57C,QAAQ,EAAE47C,MAAM,CAACx5D,KAAK,CAAC3U,MAAM,CAAC;MACnF,IAAI,CAACiuE,OAAO,CAAC7nE,GAAG,CAACq0G,IAAI,EAAE,IAAI,CAAC2lC,UAAU,GAAGjyE,MAAM,CAAC57C,QAAQ,CAAC;IAC3D;EACF;;EAEA;EACAiuH,cAAcA,CAAC/7E,GAAG,EAAE/6C,IAAI,EAAE;IACxB,MAAM;MAAE1Z;IAAM,CAAC,GAAGy0D,GAAG;IACrB,MAAMi8E,cAAc,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMC,YAAY,GAAGj3H,IAAI,CAAC42H,cAAc,GAAGI,cAAc;IACzD,MAAM9yC,KAAK,GAAGlkF,IAAI,CAAC42H,cAAc;IACjC,IAAIZ,OAAO,GAAG1vI,KAAK,CAAC2E,KAAK,CAAClJ,KAAK,CAACk1I,YAAY,EAAE3wI,KAAK,CAACmI,KAAK,CAAC;IAC1DunI,OAAO,GAAGA,OAAO,CAAC99G,GAAG,CAAE3rB,CAAC,IAAKA,CAAC,GAAG23F,KAAK,CAAC,CAAC,CAAC;IACzC,IAAI,CAACt7E,OAAO,CAAClsB,GAAG,CAAC4J,KAAK,CAAC2E,KAAK,EAAE,CAAC,CAAC;IAChC,IAAI,CAAC2d,OAAO,CAAClsB,GAAG,CAACs5I,OAAO,EAAEiB,YAAY,CAAC;EACzC;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEC,cAAcA,CAACp6H,KAAK,EAAEZ,GAAG,EAAEjR,KAAK,EAAEmO,KAAK,EAAE;IACvC,MAAM+9H,SAAS,GAAG/9H,KAAK,CAAC9iB,MAAM;IAC9B,KAAK,IAAI+H,CAAC,GAAGye,KAAK,EAAEze,CAAC,GAAG6d,GAAG,EAAE7d,CAAC,IAAI84I,SAAS,EAAE;MAC3ClsI,KAAK,CAACvO,GAAG,CAAC0c,KAAK,EAAE/a,CAAC,CAAC;IACrB;EACF;;EAEA;AACF;AACA;AACA;AACA;EACE6vE,SAASA,CAAC5E,MAAM,EAAEC,MAAM,EAAE;IACxB,MAAM4tE,SAAS,GAAG,IAAI,CAACtuH,QAAQ,CAACzP,KAAK;IACrC,MAAMg+H,QAAQ,GAAG,IAAI,CAACV,UAAU,GAAGS,SAAS;IAC5C,MAAME,QAAQ,GAAGD,QAAQ,GAAG,CAAC;IAC7B,IAAI,CAACF,cAAc,CAAC,CAAC,EAAEE,QAAQ,EAAE,IAAI,CAAC10E,MAAM,EAAE4G,MAAM,CAACrD,OAAO,CAAC,CAAC,CAAC;IAC/D,IAAI,CAACixE,cAAc,CAACE,QAAQ,EAAEC,QAAQ,EAAE,IAAI,CAAC30E,MAAM,EAAE6G,MAAM,CAACtD,OAAO,CAAC,CAAC,CAAC;IACtE,IAAIoxE,QAAQ,GAAG,IAAI,CAAC30E,MAAM,CAACpsE,MAAM,EAAE;MAAE;MACnC,MAAMghJ,OAAO,GAAG,CAAC,IAAI,CAACX,cAAc,GAAG,CAAC,IAAIQ,SAAS;MACrD,MAAMI,OAAO,GAAGF,QAAQ,GAAGC,OAAO;MAClC,IAAI,CAACJ,cAAc,CAACG,QAAQ,EAAEE,OAAO,EAAE,IAAI,CAAC70E,MAAM,EAAE6G,MAAM,CAACtD,OAAO,CAAC,CAAC,CAAC;MACrE,MAAMuxE,OAAO,GAAGD,OAAO,GAAGD,OAAO,CAAC,CAAC;MACnC,IAAI,CAACJ,cAAc,CAACK,OAAO,EAAEC,OAAO,EAAE,IAAI,CAAC90E,MAAM,EAAE4G,MAAM,CAACrD,OAAO,CAAC,CAAC,CAAC;IACtE;EACF;AACF;;AC9GuB;AACQ;AAEI;AACU;AACF;AAET;AAC4B;AACJ;AAC8B;AACQ;AACpD;AACA;AAE7B,MAAMwxE,gBAAgB,CAAC;EACpC9tI,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC+tI,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,OAAO,GAAG,EAAE;EACnB;EAEA19G,OAAOA,CAACxR,IAAI,EAAE;IACZ,IAAI,CAACmvH,0BAA0B,CAACnvH,IAAI,CAAC;IACrC,MAAMo5G,MAAM,GAAG,IAAI,CAACgW,cAAc,CAAC,CAAC;IAEpC,OAAO;MACLrzH,IAAI,EAAEiE,IAAI,CAACjE,IAAI;MACfq9G,MAAM;MACNrrG,SAAS,EAAE,IAAI,CAACkhH;IAClB,CAAC;EACH;;EAEA;AACF;AACA;AACA;EACEE,0BAA0BA,CAACnvH,IAAI,EAAE;IAC/B,MAAMqvH,gBAAgB,GAAG,IAAIj5G,gGAAY,CAAC,CAAC;IAC3Ci5G,gBAAgB,CAACp7I,GAAG,CAACqhE,QAAQ,CAAC3J,MAAM,CAAC/yC,OAAO,CAAC;IAC7Cy2H,gBAAgB,CAAC9zH,MAAM,CAAC+5C,QAAQ,CAAC3J,MAAM,CAACE,WAAW,CAAC;IACpD7rC,IAAI,CAACpQ,QAAQ,CAAEoO,MAAM,IAAK;MACxB,IAAIA,MAAM,YAAYoY,8FAAU,IAAIpY,MAAM,CAACw1C,MAAM,CAAC3yC,IAAI,CAACwuH,gBAAgB,CAAC,IAAI,IAAI,CAACE,kBAAkB,CAACvxH,MAAM,CAAC,EAAE;QAC3G,IAAIA,MAAM,CAACo1C,QAAQ,CAACh9D,IAAI,KAAK,yBAAyB,EAAE;UACtD,IAAI,CAACo5I,wBAAwB,CAACxxH,MAAM,CAAC;QACvC,CAAC,MAAM;UACL,IAAI,CAACyxH,eAAe,CAACzxH,MAAM,CAAC;QAC9B;MACF;IACF,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE0xH,cAAcA,CAACvvH,OAAO,EAAE;IACtB,MAAMwvH,QAAQ,GAAG,CAAC;IAClB,KAAK,IAAI/5I,CAAC,GAAG+5I,QAAQ,GAAG,CAAC,EAAE/5I,CAAC,GAAGuqB,OAAO,CAACtyB,MAAM,EAAE+H,CAAC,IAAI+5I,QAAQ,EAAE;MAC5DxvH,OAAO,CAACvqB,CAAC,CAAC,IAAI,CAAC,CAAC;MAChBuqB,OAAO,CAACvqB,CAAC,CAAC,EAAE;IACd;EACF;;EAEA;AACF;AACA;AACA;EACEw5I,cAAcA,CAAA,EAAG;IACf,IAAIQ,iBAAiB,GAAG,CAAC;IACzB,SAASn0C,KAAKA,CAAC33F,CAAC,EAAE;MAChB,OAAOA,CAAC,GAAG8rI,iBAAiB;IAC9B;IACA,MAAMC,QAAQ,GAAG,EAAE;IACnB;IACA,KAAK,IAAIj6I,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG,IAAI,CAACq5I,OAAO,CAACrhJ,MAAM,EAAE+H,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;MACnD,MAAMwjI,MAAM,GAAG,IAAI,CAAC8V,OAAO,CAACt5I,CAAC,CAAC;MAC9B,IAAIuqB,OAAO,GAAG,EAAE;MAChB,IAAIy+C,SAAS,GAAG,EAAE;MAClB,IAAI9C,OAAO,GAAG,EAAE;MAChB,IAAI7B,MAAM,GAAG,EAAE;MACf;MACA21E,iBAAiB,GAAG,CAAC;MACrB,KAAK,IAAIpmI,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4vH,MAAM,CAACvrI,MAAM,EAAE2b,CAAC,EAAE,EAAE;QACtC,MAAM7F,CAAC,GAAGy1H,MAAM,CAAC5vH,CAAC,CAAC;QACnB2W,OAAO,CAACnmB,IAAI,CAAC2J,CAAC,CAACwc,OAAO,CAACsP,GAAG,CAACgsE,KAAK,CAAC,CAAC;QAClCm0C,iBAAiB,IAAIjsI,CAAC,CAAC6pI,iBAAiB,CAAC,CAAC;QAC1C5uE,SAAS,CAAC5kE,IAAI,CAAC2J,CAAC,CAACi7D,SAAS,CAAC;QAC3B9C,OAAO,CAAC9hE,IAAI,CAAC2J,CAAC,CAACm4D,OAAO,CAAC;QACvB7B,MAAM,CAACjgE,IAAI,CAAC2J,CAAC,CAACs2D,MAAM,CAAC;MACvB;MACA;MACA95C,OAAO,GAAGxsB,KAAK,CAACstB,sBAAsB,CAACd,OAAO,CAAC;MAC/C,IAAI,CAACuvH,cAAc,CAACvvH,OAAO,CAAC;MAC5By+C,SAAS,GAAGjrE,KAAK,CAACstB,sBAAsB,CAAC29C,SAAS,CAAC;MACnD9C,OAAO,GAAGnoE,KAAK,CAACstB,sBAAsB,CAAC66C,OAAO,CAAC;MAC/C7B,MAAM,GAAGtmE,KAAK,CAACstB,sBAAsB,CAACg5C,MAAM,CAAC;MAC7C41E,QAAQ,CAAC71I,IAAI,CAAC;QACZmmB,OAAO;QACPy+C,SAAS;QACT9C,OAAO;QACP7B,MAAM;QACN61E,aAAa,EAAEF;MACjB,CAAC,CAAC;IACJ;IACA,OAAOC,QAAQ;EACjB;;EAEA;AACF;AACA;AACA;AACA;EACEN,kBAAkBA,CAACn1E,IAAI,EAAE;IACvB;IACA,IAAIA,IAAI,CAAChH,QAAQ,CAAC8H,UAAU,CAAC7pD,QAAQ,CAACrL,KAAK,KAAK,CAAC,EAAE;MACjD,OAAO,KAAK;IACd;IACA;IACA;IACA,IAAIo0D,IAAI,YAAY+1B,kBAAW,EAAE;MAC/Bz3E,MAAM,CAACjB,IAAI,CAAC,mHAAmH,CAAC;MAChI,OAAO,KAAK;IACd;IACA,IAAI2iD,IAAI,YAAYq3B,oBAAa,EAAE;MACjC/4E,MAAM,CAACjB,IAAI,CAAC,uCAAuC,CAAC;MACpD,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb;;EAEA;AACF;AACA;EACEg4H,eAAeA,CAACr1E,IAAI,EAAE;IACpB,MAAM;MACJhH,QAAQ,EAAE;QACR8H,UAAU,EAAE;UACV7pD,QAAQ;UACRV,KAAK;UACLqrD;QACF,CAAC;QACDn+D;MACF,CAAC;MACDirC;IACF,CAAC,GAAGsxB,IAAI;IAER,MAAM6pD,KAAK,GAAG,IAAI0oB,QAAQ,CAAC,CAAC;IAC5B,MAAMoD,SAAS,GAAG1+H,QAAQ,CAACrL,KAAK;IAChCi+G,KAAK,CAAC9jF,IAAI,CAAC4vG,SAAS,EAAElyI,KAAK,CAACmI,KAAK,CAAC;IAClC,IAAI8iC,MAAM,CAAC8kB,UAAU,CAAC,CAAC,EAAE;MACvBq2D,KAAK,CAACgpB,YAAY,CAAC57H,QAAQ,CAAC7O,KAAK,EAAE,CAAC,EAAEutI,SAAS,EAAE1+H,QAAQ,CAAC+O,QAAQ,CAAC;MACnE6jG,KAAK,CAACkpB,UAAU,CAACnxE,MAAM,CAACx5D,KAAK,EAAE,CAAC,EAAEutI,SAAS,EAAE/zE,MAAM,CAAC57C,QAAQ,CAAC;IAC/D,CAAC,MAAM;MACL6jG,KAAK,CAACipB,uBAAuB,CAAC77H,QAAQ,CAAC7O,KAAK,EAAE,CAAC,EAAEutI,SAAS,EAAE1+H,QAAQ,CAAC+O,QAAQ,EAAE0oB,MAAM,CAAC;MACtFm7E,KAAK,CAACmpB,qBAAqB,CAACpxE,MAAM,CAACx5D,KAAK,EAAE,CAAC,EAAEutI,SAAS,EAAE/zE,MAAM,CAAC57C,QAAQ,EAAE0oB,MAAM,CAAC;IAClF;IACAm7E,KAAK,CAACx+C,SAAS,CAAC90D,KAAK,CAACnO,KAAK,EAAE,CAAC,EAAEutI,SAAS,EAAEp/H,KAAK,CAACyP,QAAQ,CAAC;IAC1D6jG,KAAK,CAACopB,UAAU,CAACxvI,KAAK,CAAC2E,KAAK,EAAE,CAAC,EAAE3E,KAAK,CAACmI,KAAK,CAAC;IAC7C,MAAM1Q,QAAQ,GAAG,IAAI,CAAC06I,oBAAoB,CAAC51E,IAAI,CAAC;IAChD,IAAI,CAAC61E,UAAU,CAAChsB,KAAK,EAAE3uH,QAAQ,CAAC;EAClC;;EAEA;AACF;AACA;AACA;EACE46I,mBAAmBA,CAAC91E,IAAI,EAAE;IACxB,MAAM;MACJhH,QAAQ,EAAE;QACR8H,UAAU,EAAE;UACV7pD,QAAQ;UACRV;QACF,CAAC;QACD9S;MACF,CAAC;MACDirC;IACF,CAAC,GAAGsxB,IAAI;IAER,MAAM6pD,KAAK,GAAG,IAAI0oB,QAAQ,CAAC,CAAC;IAC5B,MAAMwD,SAAS,GAAG/1E,IAAI,CAAChH,QAAQ,CAAC6B,aAAa;IAC7C,MAAM86E,SAAS,GAAG1+H,QAAQ,CAACrL,KAAK;IAChC,MAAMgnI,SAAS,GAAGnvI,KAAK,CAACmI,KAAK;IAC7Bi+G,KAAK,CAAC9jF,IAAI,CAACgwG,SAAS,GAAGJ,SAAS,EAAEI,SAAS,GAAGnD,SAAS,CAAC;IACxD,MAAM16E,GAAG,GAAG,IAAIu7E,aAAa,CAAC,CAAC;IAC/Bv7E,GAAG,CAACnyB,IAAI,CAACi6B,IAAI,CAAChH,QAAQ,CAAC;IACvB,MAAMg9E,UAAU,GAAG,IAAIh6G,iGAAa,CAAC,CAAC;IACtC,MAAMi6G,SAAS,GAAG,IAAIj6G,iGAAa,CAAC,CAAC;IACrC,MAAMk6G,WAAW,GAAG,IAAIl6G,+FAAW,CAAC,CAAC;IACrC,KAAK,IAAIm6G,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAGJ,SAAS,EAAE,EAAEI,aAAa,EAAE;MACtE;MACA,MAAM5uE,QAAQ,GAAG4uE,aAAa,GAAG5/H,KAAK,CAACyP,QAAQ;MAC/CkwH,WAAW,CAAC/yE,SAAS,CAAC5sD,KAAK,CAACnO,KAAK,EAAEm/D,QAAQ,CAAC;MAC5CrP,GAAG,CAACmT,SAAS,CAAC6qE,WAAW,CAAC;MAC1B;MACA,IAAI,CAACE,wBAAwB,CAACp2E,IAAI,CAAChH,QAAQ,EAAEm9E,aAAa,EAAEH,UAAU,CAAC;MACvEC,SAAS,CAAC5/C,gBAAgB,CAAC3nD,MAAM,EAAEsnG,UAAU,CAAC;MAC9CnsB,KAAK,CAACwpB,WAAW,CAAC4C,SAAS,EAAE/9E,GAAG,CAAC;IACnC;IACA,MAAMh9D,QAAQ,GAAG,IAAI,CAAC06I,oBAAoB,CAAC51E,IAAI,CAAC;IAChD,IAAI,CAAC61E,UAAU,CAAChsB,KAAK,EAAE3uH,QAAQ,CAAC;EAClC;;EAEA;AACF;AACA;AACA;AACA;EACEm7I,qBAAqBA,CAACr2E,IAAI,EAAE;IAC1B,MAAM;MACJhH,QAAQ,EAAE;QACR8H,UAAU,EAAE;UACV7pD,QAAQ;UACRV,KAAK;UACLmwD;QACF,CAAC;QACDjjE;MACF,CAAC;MACDirC;IACF,CAAC,GAAGsxB,IAAI;IAER,MAAM6pD,KAAK,GAAG,IAAI0oB,QAAQ,CAAC,CAAC;IAC5B,MAAMwD,SAAS,GAAG/1E,IAAI,CAAChH,QAAQ,CAAC6B,aAAa;IAC7C,MAAMy7E,YAAY,GAAG,IAAI7C,aAAa,CAAC,CAAC;IACxC6C,YAAY,CAACvwG,IAAI,CAACi6B,IAAI,CAAChH,QAAQ,CAAC;IAChC,MAAMu9E,aAAa,GAAG,IAAI,CAACC,4BAA4B,CAACx2E,IAAI,CAAChH,QAAQ,CAAC;IACtE,IAAIy9E,YAAY,GAAG,IAAI;IACvB,IAAIF,aAAa,CAACG,WAAW,GAAG,CAAC,EAAE;MACjCD,YAAY,GAAG,IAAI9C,aAAa,CAAC,CAAC;MAClC8C,YAAY,CAAC1wG,IAAI,CAACi6B,IAAI,CAAChH,QAAQ,EAAEu9E,aAAa,CAAC;IACjD;IACA,MAAMI,oBAAoB,GAAGJ,aAAa,CAACxC,cAAc,GAAGwC,aAAa,CAACG,WAAW;IACrF,MAAMf,SAAS,GAAG1+H,QAAQ,CAACrL,KAAK;IAChC,MAAMgnI,SAAS,GAAGnvI,KAAK,CAACmI,KAAK;IAC7Bi+G,KAAK,CAAC9jF,IAAI,CAACgwG,SAAS,GAAGJ,SAAS,GAAGgB,oBAAoB,EAAEZ,SAAS,GAAGnD,SAAS,CAAC;IAC/E,MAAMoD,UAAU,GAAG,IAAIh6G,iGAAa,CAAC,CAAC;IACtC,MAAMi6G,SAAS,GAAG,IAAIj6G,iGAAa,CAAC,CAAC;IACrC,MAAM46G,UAAU,GAAG,IAAI56G,+FAAW,CAAC,CAAC;IACpC,MAAM66G,QAAQ,GAAG,IAAI76G,+FAAW,CAAC,CAAC;IAClC,IAAIk8B,GAAG,GAAG,CAAC,CAAC;IACZ,KAAK,IAAIi+E,aAAa,GAAG,CAAC,EAAEA,aAAa,GAAGJ,SAAS,EAAE,EAAEI,aAAa,EAAE;MACtE;MACA,MAAM5uE,QAAQ,GAAG4uE,aAAa,GAAG5/H,KAAK,CAACyP,QAAQ;MAC/C,IAAIuwH,aAAa,CAACO,UAAU,CAACX,aAAa,CAAC,EAAE;QAC3C;QACAS,UAAU,CAACzzE,SAAS,CAACuD,MAAM,CAACt+D,KAAK,EAAEm/D,QAAQ,CAAC;QAC5CsvE,QAAQ,CAAC1zE,SAAS,CAAC5sD,KAAK,CAACnO,KAAK,EAAEm/D,QAAQ,CAAC;QACzC,IAAIkvE,YAAY,EAAE;UAChBA,YAAY,CAACprE,SAAS,CAACurE,UAAU,EAAEC,QAAQ,CAAC;UAC5C3+E,GAAG,GAAGu+E,YAAY;QACpB;MACF,CAAC,MAAM;QACL;QACAG,UAAU,CAACzzE,SAAS,CAAC5sD,KAAK,CAACnO,KAAK,EAAEm/D,QAAQ,CAAC;QAC3C+uE,YAAY,CAACjrE,SAAS,CAACurE,UAAU,CAAC;QAClC1+E,GAAG,GAAGo+E,YAAY;MACpB;MACA;MACA,IAAI,CAACS,0BAA0B,CAAC/2E,IAAI,CAAChH,QAAQ,EAAEm9E,aAAa,EAAEH,UAAU,CAAC;MACzEC,SAAS,CAAC5/C,gBAAgB,CAAC3nD,MAAM,EAAEsnG,UAAU,CAAC;MAC9CnsB,KAAK,CAACwpB,WAAW,CAAC4C,SAAS,EAAE/9E,GAAG,CAAC;IACnC;IACA,MAAMh9D,QAAQ,GAAG,IAAI,CAAC06I,oBAAoB,CAAC51E,IAAI,CAAC;IAChD,IAAI,CAAC61E,UAAU,CAAChsB,KAAK,EAAE3uH,QAAQ,CAAC;EAClC;;EAEA;AACF;AACA;AACA;AACA;EACE26I,UAAUA,CAAChsB,KAAK,EAAE3uH,QAAQ,EAAE;IAC1B,MAAM87I,WAAW,GAAG,IAAI,CAACC,sBAAsB,CAAC/7I,QAAQ,CAAC;IACzD,IAAI87I,WAAW,GAAG,CAAC,EAAE;MAAE;MACrB,IAAI,CAAClC,OAAO,CAACl1I,IAAI,CAAC,CAACiqH,KAAK,CAAC,CAAC;MAC1B,IAAI,CAACgrB,UAAU,CAACj1I,IAAI,CAAC1E,QAAQ,CAAC;IAChC,CAAC,MAAM;MAAE;MACP,MAAM8jI,MAAM,GAAG,IAAI,CAAC8V,OAAO,CAACkC,WAAW,CAAC;MACxChY,MAAM,CAACp/H,IAAI,CAACiqH,KAAK,CAAC;IACpB;EACF;;EAEA;AACF;AACA;AACA;AACA;EACEotB,sBAAsBA,CAAC/7I,QAAQ,EAAE;IAC/B,OAAO8B,4GAAW,CAAC,IAAI,CAAC63I,UAAU,EAAGtrI,CAAC,IAAKvM,0GAAS,CAACuM,CAAC,EAAErO,QAAQ,CAAC,CAAC;EACpE;EAEAs7I,4BAA4BA,CAACt+E,GAAG,EAAE;IAChC,MAAM69E,SAAS,GAAG79E,GAAG,CAAC2C,aAAa;IACnC,MAAM4L,MAAM,GAAGvO,GAAG,CAAC4I,UAAU,CAACvqD,KAAK,CAACnO,KAAK;IACzC,MAAMs+D,MAAM,GAAGxO,GAAG,CAAC4I,UAAU,CAAC4F,MAAM,CAACt+D,KAAK;IAC1C,MAAMi5C,MAAM,GAAG6W,GAAG,CAAC4I,UAAU,CAACvqD,KAAK,CAACyP,QAAQ;IAC5C,MAAM8wH,UAAU,GAAG,IAAIh6I,KAAK,CAACi5I,SAAS,CAAC;IACvC;IACA,IAAIW,WAAW,GAAG,CAAC;IACnB,IAAIn3D,MAAM,GAAG,CAAC;IACd,KAAK,IAAI/jF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGu6I,SAAS,EAAEv6I,CAAC,EAAE,EAAE+jF,MAAM,IAAIl+B,MAAM,EAAE;MACpD,MAAM81F,OAAO,GAAIx7I,IAAI,CAACuI,GAAG,CAACuiE,MAAM,CAAC8Y,MAAM,CAAC,GAAG7Y,MAAM,CAAC6Y,MAAM,CAAC,CAAC,GAAG,SAAS,CAAE;MAAA,GAClE5jF,IAAI,CAACuI,GAAG,CAACuiE,MAAM,CAAC8Y,MAAM,GAAG,CAAC,CAAC,GAAG7Y,MAAM,CAAC6Y,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,SAAU,IAC9D5jF,IAAI,CAACuI,GAAG,CAACuiE,MAAM,CAAC8Y,MAAM,GAAG,CAAC,CAAC,GAAG7Y,MAAM,CAAC6Y,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,SAAU;MACpEu3D,UAAU,CAACt7I,CAAC,CAAC,GAAG27I,OAAO;MACvBT,WAAW,IAAIS,OAAO,CAAC,CAAC;IAC1B;IACA;IACA,MAAMv9C,SAAS,GAAG1hC,GAAG,CAACyP,YAAY,CAAC,CAAC;IACpC,MAAMosE,cAAc,GAAGn6C,SAAS,CAAC/1B,cAAc;IAC/C,OAAO;MAAEizE,UAAU;MAAEJ,WAAW;MAAE3C;IAAe,CAAC;EACpD;;EAEA;AACF;AACA;AACA;EACEqB,wBAAwBA,CAACp1E,IAAI,EAAE;IAC7B,IAAIA,IAAI,CAAChH,QAAQ,YAAY4E,mCAAwB,EAAE;MACrD,IAAI,CAACk4E,mBAAmB,CAAC91E,IAAI,CAAC;IAChC,CAAC,MAAM,IAAIA,IAAI,CAAChH,QAAQ,YAAY2N,uCAA4B,EAAE;MAChE,IAAI,CAAC0vE,qBAAqB,CAACr2E,IAAI,CAAC;IAClC;EACF;;EAEA;AACF;AACA;AACA;AACA;EACE41E,oBAAoBA,CAAC51E,IAAI,EAAE;IACzB,MAAM;MAAEgyB;IAAY,CAAC,GAAGhyB,IAAI,CAAC9kE,QAAQ;IACrC,OAAQ;MACN61F,OAAO,EAAEiB,WAAW,CAACjB,OAAO,CAAC3tB,OAAO,CAAC,CAAC;MACtC7S,OAAO,EAAEyhC,WAAW,CAACzhC,OAAO;MAC5B0gC,SAAS,EAAEe,WAAW,CAACf,SAAS;MAChCD,QAAQ,EAAEgB,WAAW,CAAChB,QAAQ,CAAC5tB,OAAO,CAAC;IACzC,CAAC;EACH;EAEA2zE,0BAA0BA,CAAC7+E,GAAG,EAAEk/E,OAAO,EAAE1oG,MAAM,EAAE;IAC/C,MAAM2oG,UAAU,GAAGn/E,GAAG,CAAC4I,UAAU,CAACu2E,UAAU,CAACjvI,KAAK;IAClD,MAAMkvI,UAAU,GAAGp/E,GAAG,CAAC4I,UAAU,CAACw2E,UAAU,CAAClvI,KAAK;IAClD,MAAMmvI,UAAU,GAAGr/E,GAAG,CAAC4I,UAAU,CAACy2E,UAAU,CAACnvI,KAAK;IAClD,MAAMovI,SAAS,GAAGJ,OAAO,GAAG,CAAC,CAAC,CAAC;IAC/B1oG,MAAM,CAAC70C,GAAG,CACRw9I,UAAU,CAACG,SAAS,CAAC,EACrBH,UAAU,CAACG,SAAS,GAAG,CAAC,CAAC,EACzBH,UAAU,CAACG,SAAS,GAAG,CAAC,CAAC,EACzBH,UAAU,CAACG,SAAS,GAAG,CAAC,CAAC,EACzBF,UAAU,CAACE,SAAS,CAAC,EACrBF,UAAU,CAACE,SAAS,GAAG,CAAC,CAAC,EACzBF,UAAU,CAACE,SAAS,GAAG,CAAC,CAAC,EACzBF,UAAU,CAACE,SAAS,GAAG,CAAC,CAAC,EACzBD,UAAU,CAACC,SAAS,CAAC,EACrBD,UAAU,CAACC,SAAS,GAAG,CAAC,CAAC,EACzBD,UAAU,CAACC,SAAS,GAAG,CAAC,CAAC,EACzBD,UAAU,CAACC,SAAS,GAAG,CAAC,CAAC,EACzB,CAAC,EACD,CAAC,EACD,CAAC,EACD,CACF,CAAC;EACH;EAEApB,wBAAwBA,CAACl+E,GAAG,EAAEk/E,OAAO,EAAE1oG,MAAM,EAAE;IAC7C,MAAM;MAAExsC;IAAO,CAAC,GAAGg2D,GAAG,CAAC4I,UAAU;IACjC,MAAM3oD,GAAG,GAAGi/H,OAAO,GAAGl1I,MAAM,CAAC8jB,QAAQ;IACrC,MAAMtc,CAAC,GAAGxH,MAAM,CAACkG,KAAK,CAAC+P,GAAG,CAAC;IAC3B,MAAMhK,CAAC,GAAGjM,MAAM,CAACkG,KAAK,CAAC+P,GAAG,GAAG,CAAC,CAAC;IAC/B,MAAM3I,CAAC,GAAGtN,MAAM,CAACkG,KAAK,CAAC+P,GAAG,GAAG,CAAC,CAAC;IAC/B,MAAM5c,KAAK,GAAG2G,MAAM,CAACkG,KAAK,CAAC+P,GAAG,GAAG,CAAC,CAAC;IACnCu2B,MAAM,CAAC70C,GAAG,CACR0B,KAAK,EACL,CAAC,EACD,CAAC,EACDmO,CAAC,EACD,CAAC,EACDnO,KAAK,EACL,CAAC,EACD4S,CAAC,EACD,CAAC,EACD,CAAC,EACD5S,KAAK,EACLiU,CAAC,EACD,CAAC,EACD,CAAC,EACD,CAAC,EACD,CACF,CAAC;EACH;AACF;;ACxYA;AACA,MAAMioI,kBAAkB,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAMC,iBAAiB,GAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA,MAAMC,oBAAoB,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA,MAAMC,iBAAiB,GAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA,MAAMC,cAAc,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AAEW,MAAMC,SAAS,CAAC;EAC7BhxI,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACsnI,YAAY,GAAG,EAAE;IACtB,IAAI,CAACoF,KAAK,GAAG,IAAI;EACnB;EAEA9E,SAASA,CAACvxH,IAAI,EAAE;IACd,IAAI,CAACq2H,KAAK,GAAGr2H,IAAI;IACjB,IAAI,CAACixH,YAAY,CAACxuI,IAAI,CAAC,IAAI,CAACm4I,YAAY,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC3J,YAAY,CAACxuI,IAAI,CAAC,IAAI,CAACo4I,iBAAiB,CAAC,CAAC,CAAC;IAChD,IAAI,CAAC5J,YAAY,CAACxuI,IAAI,CAAC,IAAI,CAACq4I,aAAa,CAAC96H,IAAI,CAAC6hH,MAAM,EAAE7hH,IAAI,CAACwW,SAAS,CAAC,CAAC;IACvE,IAAI,CAACy6G,YAAY,CAACxuI,IAAI,CAAC,IAAI,CAACs4I,eAAe,CAAC,CAAC,CAAC;IAC9C,IAAI,CAAC9J,YAAY,CAACxuI,IAAI,CAAC,IAAI,CAACu4I,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;IAClD,IAAI,CAAC3E,KAAK,GAAG,IAAI;IACjB,OAAO,IAAI,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","sources":["webpack://miew/./src/utils/MiewCLIParser.js","webpack://miew/./src/utils/SelectionParser.js","webpack://miew/./vendor/js/Smooth.js","webpack://miew/./vendor/js/mmtf.js","webpack://miew/webpack/bootstrap","webpack://miew/webpack/runtime/compat get default export","webpack://miew/webpack/runtime/define property getters","webpack://miew/webpack/runtime/hasOwnProperty shorthand","webpack://miew/external module {\"module\":\"lodash\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\",\"root\":\"_\"}","webpack://miew/external module {\"module\":\"three\",\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack://miew/../../node_modules/spin.js/spin.js","webpack://miew/./src/Timer.js","webpack://miew/./src/gfx/Stats.js","webpack://miew/./src/utils/EventDispatcher.js","webpack://miew/./src/utils/logger.js","webpack://miew/./src/utils.js","webpack://miew/./src/utils/JobHandle.js","webpack://miew/./src/settings.js","webpack://miew/./src/options.js","webpack://miew/./src/chem/Atom.js","webpack://miew/./src/chem/Element.js","webpack://miew/./src/chem/Bond.js","webpack://miew/./src/chem/Residue.js","webpack://miew/./src/chem/ResidueType.js","webpack://miew/./src/chem/Chain.js","webpack://miew/./src/chem/StructuralElement.js","webpack://miew/./src/chem/Helix.js","webpack://miew/./src/chem/Strand.js","webpack://miew/./src/chem/Sheet.js","webpack://miew/./src/chem/SGroup.js","webpack://miew/./src/chem/selectors/selectArgs.js","webpack://miew/./src/chem/selectors/selectorsBase.js","webpack://miew/./src/chem/selectors/selectOps.js","webpack://miew/./src/chem/selectors.js","webpack://miew/./src/chem/BiologicalUnit.js","webpack://miew/./src/chem/Assembly.js","webpack://miew/./src/chem/Component.js","webpack://miew/./src/chem/AtomPairs.js","webpack://miew/./src/chem/AutoBond.js","webpack://miew/./src/chem/AromaticLoopsMarker.js","webpack://miew/./src/chem/VoxelWorld.js","webpack://miew/./src/chem/HBondInfo.js","webpack://miew/./src/chem/SecondaryStructureMap.js","webpack://miew/./src/chem/Complex.js","webpack://miew/./src/chem/Volume.js","webpack://miew/./src/chem/Molecule.js","webpack://miew/./src/chem.js","webpack://miew/./src/gfx/CSS2DObject.js","webpack://miew/./src/gfx/RCGroup.js","webpack://miew/./src/gfx/gfxutils.js","webpack://miew/./src/Visual.js","webpack://miew/./src/utils/EntityList.js","webpack://miew/./src/utils/makeContextDependent.js","webpack://miew/./src/gfx/geometries/SphereCollisionGeo.js","webpack://miew/./src/gfx/geometries/InstancedSpheresGeometry.js","webpack://miew/./src/gfx/geometries/ChunkedObjectsGeometry.js","webpack://miew/./src/gfx/geometries/SimpleSpheresGeometry.js","webpack://miew/./src/gfx/geometries/Simple2CCylindersGeometry.js","webpack://miew/./src/gfx/geometries/CylinderBufferGeometry.js","webpack://miew/./src/gfx/geometries/Instanced2CCylindersGeometry.js","webpack://miew/./src/gfx/geometries/ExtrudedObjectsGeometry.js","webpack://miew/./src/gfx/geometries/ThickLinesGeometry.js","webpack://miew/./src/gfx/geometries/LinesGeometry.js","webpack://miew/./src/gfx/geometries/CylinderCollisionGeo.js","webpack://miew/./src/gfx/geometries/ChunkedLinesGeometry.js","webpack://miew/./src/gfx/geometries/TwoColorLinesGeometry.js","webpack://miew/./src/gfx/geometries/CrossGeometry.js","webpack://miew/./src/gfx/geometries/IsoSurfaceGeometry.js","webpack://miew/./src/gfx/geometries/IsoSurfaceMarchCube.js","webpack://miew/./src/gfx/geometries/IsoSurface.js","webpack://miew/./src/gfx/geometries/VolumeSurfaceGeometry.js","webpack://miew/./src/gfx/geometries/QuickSurfGeometry.js","webpack://miew/./src/gfx/geometries/ContactSurface.js","webpack://miew/./src/gfx/geometries/ContactSurfaceGeometry.js","webpack://miew/./src/gfx/geometries/IsoSurfaceAtomColored.js","webpack://miew/./src/gfx/geometries/IsosurfaceBuildNormals.js","webpack://miew/./src/gfx/geometries/IsoSurfaceGeo.js","webpack://miew/./src/gfx/geometries/SSIsosurfaceGeometry.js","webpack://miew/./src/gfx/geometries/LabelsGeometry.js","webpack://miew/./src/gfx/geometries/geometries.js","webpack://miew/./src/gfx/capabilities.js","webpack://miew/./src/gfx/noiseTexture.js","webpack://miew/./src/gfx/shaders/UberMaterial.js","webpack://miew/./src/gfx/meshes/UberObject.js","webpack://miew/./src/gfx/meshes/ZSpriteMesh.js","webpack://miew/./src/gfx/meshes/ZClippedMesh.js","webpack://miew/./src/gfx/meshes/TextMesh.js","webpack://miew/./src/gfx/meshes/SimpleMesh.js","webpack://miew/./src/gfx/meshes/ThickLineMesh.js","webpack://miew/./src/gfx/meshes/InstancedMesh.js","webpack://miew/./src/gfx/meshes/meshes.js","webpack://miew/./src/gfx/meshes/MeshCreator.js","webpack://miew/./src/gfx/meshes/TransformGroup.js","webpack://miew/./src/gfx/modes/groups/ChemGroup.js","webpack://miew/./src/gfx/modes/groups/AtomsGroup.js","webpack://miew/./src/gfx/modes/groups/AtomsSphereGroup.js","webpack://miew/./src/gfx/modes/groups/AtomsSurfaceGroup.js","webpack://miew/./src/gfx/modes/groups/AtomsSASSESGroupStub.js","webpack://miew/./src/gfx/modes/groups/AtomsTextGroup.js","webpack://miew/./src/gfx/modes/groups/AromaticGroup.js","webpack://miew/./src/gfx/modes/groups/AromaticTorusGroup.js","webpack://miew/./src/gfx/modes/groups/AromaticLinesGroup.js","webpack://miew/./src/gfx/modes/groups/ResiduesGroup.js","webpack://miew/./src/gfx/modes/groups/NucleicItemGroup.js","webpack://miew/./src/gfx/modes/groups/NucleicCylindersGroup.js","webpack://miew/./src/gfx/modes/groups/NucleicSpheresGroup.js","webpack://miew/./src/gfx/modes/groups/CartoonHelper.js","webpack://miew/./src/gfx/modes/groups/ResiduesSubseqGroup.js","webpack://miew/./src/gfx/modes/groups/ResiduesTraceGroup.js","webpack://miew/./src/gfx/modes/groups/BondsGroup.js","webpack://miew/./src/gfx/modes/groups/BondsCylinderGroup.js","webpack://miew/./src/gfx/modes/groups/BondsLinesGroup.js","webpack://miew/./src/gfx/modes/groups/groups.js","webpack://miew/./src/gfx/modes/processors/AtomsProcessor.js","webpack://miew/./src/gfx/modes/processors/OrphanAtomsProcessor.js","webpack://miew/./src/gfx/modes/processors/ResiduesProcessor.js","webpack://miew/./src/gfx/modes/processors/NucleicProcessor.js","webpack://miew/./src/gfx/modes/processors/SubseqsProcessor.js","webpack://miew/./src/gfx/modes/processors/BondsProcessor.js","webpack://miew/./src/gfx/modes/processors/AromaticProcessor.js","webpack://miew/./src/gfx/modes/processors/processors.js","webpack://miew/./src/gfx/modes/groups/GroupsFactory.js","webpack://miew/./src/gfx/modes/Mode.js","webpack://miew/./src/gfx/modes/LinesMode.js","webpack://miew/./src/gfx/modes/LicoriceMode.js","webpack://miew/./src/gfx/modes/BallsAndSticksMode.js","webpack://miew/./src/gfx/modes/VanDerWaalsMode.js","webpack://miew/./src/gfx/modes/TraceMode.js","webpack://miew/./src/gfx/modes/TubeMode.js","webpack://miew/./src/gfx/modes/CartoonMode.js","webpack://miew/./src/gfx/modes/SurfaceMode.js","webpack://miew/./src/gfx/modes/QuickSurfaceMode.js","webpack://miew/./src/gfx/modes/IsoSurfaceMode.js","webpack://miew/./src/gfx/modes/IsoSurfaceSASMode.js","webpack://miew/./src/gfx/modes/IsoSurfaceSESMode.js","webpack://miew/./src/gfx/modes/ContactSurfaceMode.js","webpack://miew/./src/gfx/modes/TextMode.js","webpack://miew/./src/gfx/modes.js","webpack://miew/./src/gfx/palettes/Palette.js","webpack://miew/./src/gfx/palettes/cpkPalette.js","webpack://miew/./src/gfx/palettes/jmolPalette.js","webpack://miew/./src/gfx/palettes/vmdPalette.js","webpack://miew/./src/gfx/palettes.js","webpack://miew/./src/gfx/colorers/Colorer.js","webpack://miew/./src/gfx/colorers/ElementColorer.js","webpack://miew/./src/gfx/colorers/ResidueTypeColorer.js","webpack://miew/./src/gfx/colorers/SequenceColorer.js","webpack://miew/./src/gfx/colorers/ChainColorer.js","webpack://miew/./src/gfx/colorers/SecondaryStructureColorer.js","webpack://miew/./src/gfx/colorers/UniformColorer.js","webpack://miew/./src/gfx/colorers/ConditionalColorer.js","webpack://miew/./src/gfx/colorers/ConformationColorer.js","webpack://miew/./src/gfx/colorers/TemperatureColorer.js","webpack://miew/./src/gfx/colorers/OccupancyColorer.js","webpack://miew/./src/gfx/colorers/HydrophobicityColorer.js","webpack://miew/./src/gfx/colorers/MoleculeColorer.js","webpack://miew/./src/gfx/colorers/CarbonColorer.js","webpack://miew/./src/gfx/colorers.js","webpack://miew/./src/gfx/materials.js","webpack://miew/./src/gfx/meshutils.js","webpack://miew/./src/gfx/Representation.js","webpack://miew/./src/ComplexVisualEdit.js","webpack://miew/./src/ComplexVisual.js","webpack://miew/./src/gfx/shaders/VolumeMaterial.js","webpack://miew/./src/gfx/VolumeMesh.js","webpack://miew/./src/gfx/VolumeBounds.js","webpack://miew/./src/gfx/VolumeFarPlane.js","webpack://miew/./src/VolumeVisual.js","webpack://miew/./src/io/loaders/LoaderList.js","webpack://miew/./src/io/loaders/Loader.js","webpack://miew/./src/io/loaders/FileLoader.js","webpack://miew/./src/io/loaders/XHRLoader.js","webpack://miew/./src/io/loaders/ImmediateLoader.js","webpack://miew/./src/io/loaders.js","webpack://miew/./src/io/parsers/ParserList.js","webpack://miew/./src/io/parsers/Parser.js","webpack://miew/./src/io/parsers/pdb/Remark290.js","webpack://miew/./src/io/parsers/pdb/Remark350.js","webpack://miew/./src/io/parsers/PDBStream.js","webpack://miew/./src/io/parsers/PDBParser.js","webpack://miew/./src/io/parsers/CMLParser.js","webpack://miew/./src/io/parsers/MMTFParser.js","webpack://miew/./src/io/parsers/ParsingError.js","webpack://miew/./src/io/parsers/readCIF.js","webpack://miew/./src/io/parsers/CIFParser.js","webpack://miew/./src/io/parsers/VolumeModel.js","webpack://miew/./src/io/parsers/CCP4Parser.js","webpack://miew/./src/io/parsers/XYZParser.js","webpack://miew/./src/io/parsers/PubChemParser.js","webpack://miew/./src/io/parsers/SDFStream.js","webpack://miew/./src/io/parsers/SDFParser.js","webpack://miew/./src/io/parsers/DSN6Parser.js","webpack://miew/./src/io/parsers/GROReader.js","webpack://miew/./src/io/parsers/GROParser.js","webpack://miew/./src/io/parsers/MOL2Parser.js","webpack://miew/./src/io/parsers.js","webpack://miew/./src/io/exporters/ExporterList.js","webpack://miew/./src/io/exporters/Exporter.js","webpack://miew/./src/io/exporters/PDBResult.js","webpack://miew/./src/io/exporters/PDBExporter.js","webpack://miew/./src/io/exporters/fbx/FBXModel.js","webpack://miew/./src/io/exporters/fbx/FBXGeometry.js","webpack://miew/./src/io/exporters/fbx/FBX1CGeometry.js","webpack://miew/./src/io/exporters/fbx/FBX2CCylinder.js","webpack://miew/./src/io/exporters/fbx/FBXInfoExtractor.js","webpack://miew/./src/io/exporters/fbx/FBXResult.js","webpack://miew/./src/io/exporters/FBXExporter.js","webpack://miew/./src/io/exporters.js","webpack://miew/./src/io/io.js","webpack://miew/./src/gfx/CSS2DRenderer.js","webpack://miew/./src/utils/getTopWindow.js","webpack://miew/./src/ui/ObjectControls.js","webpack://miew/./src/ui/Picker.js","webpack://miew/./src/gfx/Axes.js","webpack://miew/./src/gfx/FrameInfo.js","webpack://miew/./src/gfx/objects/SceneObject.js","webpack://miew/./src/gfx/objects/LinesObj.js","webpack://miew/./src/gfx/shaders/OutlineMaterial.js","webpack://miew/./src/gfx/shaders/FXAAMaterial.js","webpack://miew/./src/gfx/shaders/AOMaterial.js","webpack://miew/./src/gfx/shaders/AOHorBlurMaterial.js","webpack://miew/./src/gfx/shaders/AOVertBlurWithBlendMaterial.js","webpack://miew/./src/gfx/shaders/AnaglyphMaterial.js","webpack://miew/./src/gfx/ViewInterpolator.js","webpack://miew/./src/utils/Cookies.js","webpack://miew/./src/gfx/vr/createWebVRButton.js","webpack://miew/./src/gfx/vr/WebVRPoC.js","webpack://miew/./src/Miew.js","webpack://miew/./src/utils/MiewCLIHelp.js","webpack://miew/./src/Miew-cli.js","webpack://miew/./src/index.js"],"sourcesContent":["/* eslint-disable */\r\n// DO NOT EDIT! Automatically generated from .jison\r\n/* parser generated by jison 0.4.18 */\r\n/*\r\n  Returns a Parser object of the following structure:\r\n\r\n  Parser: {\r\n    yy: {}\r\n  }\r\n\r\n  Parser.prototype: {\r\n    yy: {},\r\n    trace: function(),\r\n    symbols_: {associative list: name ==> number},\r\n    terminals_: {associative list: number ==> name},\r\n    productions_: [...],\r\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\r\n    table: [...],\r\n    defaultActions: {...},\r\n    parseError: function(str, hash),\r\n    parse: function(input),\r\n\r\n    lexer: {\r\n        EOF: 1,\r\n        parseError: function(str, hash),\r\n        setInput: function(input),\r\n        input: function(),\r\n        unput: function(str),\r\n        more: function(),\r\n        less: function(n),\r\n        pastInput: function(),\r\n        upcomingInput: function(),\r\n        showPosition: function(),\r\n        test_match: function(regex_match_array, rule_index),\r\n        next: function(),\r\n        lex: function(),\r\n        begin: function(condition),\r\n        popState: function(),\r\n        _currentRules: function(),\r\n        topState: function(),\r\n        pushState: function(condition),\r\n\r\n        options: {\r\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\r\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\r\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\r\n        },\r\n\r\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\r\n        rules: [...],\r\n        conditions: {associative list: name ==> set},\r\n    }\r\n  }\r\n\r\n\r\n  token location info (@$, _$, etc.): {\r\n    first_line: n,\r\n    last_line: n,\r\n    first_column: n,\r\n    last_column: n,\r\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\r\n  }\r\n\r\n\r\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\r\n    text:        (matched text)\r\n    token:       (the produced terminal token, if any)\r\n    line:        (yylineno)\r\n  }\r\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\r\n    loc:         (yylloc)\r\n    expected:    (string describing the set of expected tokens)\r\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\r\n  }\r\n*/\r\nvar parser = (function(){\r\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,60],$V1=[1,62],$V2=[1,63],$V3=[1,65],$V4=[1,66],$V5=[1,67],$V6=[1,68],$V7=[1,69],$V8=[1,80],$V9=[1,72],$Va=[1,73],$Vb=[1,74],$Vc=[1,75],$Vd=[1,99],$Ve=[1,76],$Vf=[1,100],$Vg=[1,79],$Vh=[1,51],$Vi=[1,81],$Vj=[1,82],$Vk=[1,84],$Vl=[1,83],$Vm=[1,85],$Vn=[1,96],$Vo=[1,97],$Vp=[1,98],$Vq=[1,86],$Vr=[1,87],$Vs=[1,64],$Vt=[1,70],$Vu=[1,71],$Vv=[1,77],$Vw=[1,78],$Vx=[1,53],$Vy=[1,54],$Vz=[1,55],$VA=[1,61],$VB=[1,88],$VC=[1,89],$VD=[1,90],$VE=[1,91],$VF=[1,92],$VG=[1,93],$VH=[1,94],$VI=[1,95],$VJ=[1,101],$VK=[1,102],$VL=[1,103],$VM=[1,104],$VN=[1,105],$VO=[1,56],$VP=[1,57],$VQ=[1,58],$VR=[1,59],$VS=[1,115],$VT=[1,111],$VU=[1,114],$VV=[1,112],$VW=[1,113],$VX=[1,118],$VY=[1,117],$VZ=[1,134],$V_=[1,149],$V$=[1,150],$V01=[1,157],$V11=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],$V21=[5,6,7,9,13,14,15,17,18,19,20,23,25,26,27,30,33,34,35,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,71,72,74,77,78,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101],$V31=[5,6,7,9,13,15,17,18,19,20,23,25,26,27,30,33,34,37,38,41,43,45,46,49,52,54,55,56,58,59,62,64,65,66,70,72,82,83,84,85,86,87,88,89,90,91,92,93,94,95],$V41=[5,70,72],$V51=[5,74],$V61=[71,101];\r\nvar parser = {trace: function trace () { },\r\nyy: {},\r\nsymbols_: {\"error\":2,\"Program\":3,\"Command\":4,\"EOF\":5,\"RESET\":6,\"BUILD\":7,\"ALL\":8,\"HELP\":9,\"Path\":10,\"MOTM\":11,\"OneArgCommand\":12,\"GET\":13,\"STRING\":14,\"SET\":15,\"Value\":16,\"SET_SAVE\":17,\"SET_RESTORE\":18,\"SET_RESET\":19,\"PRESET\":20,\"AddRepresentation\":21,\"EditRepresentation\":22,\"REMOVE\":23,\"RepresentationReference\":24,\"HIDE\":25,\"SHOW\":26,\"LIST\":27,\"EXPAND_KEY\":28,\"SELECTOR_KEY\":29,\"SELECT\":30,\"AS\":31,\"WordAll\":32,\"SELECTOR\":33,\"WITHIN\":34,\"NUMBER\":35,\"OF\":36,\"MATERIAL\":37,\"IDENTIFIER\":38,\"ModeCMD\":39,\"ColorCMD\":40,\"VIEW\":41,\"BASE_64\":42,\"UNIT\":43,\"DSSP\":44,\"SCALE\":45,\"ROTATE\":46,\"AxesList\":47,\"TRANSLATE\":48,\"CENTER\":49,\"GetURLBranch\":50,\"Screenshot\":51,\"LINE\":52,\"ArgList\":53,\"LISTOBJ\":54,\"REMOVEOBJ\":55,\"URL\":56,\"VIEW_KEY\":57,\"SCREENSHOT\":58,\"LOAD\":59,\"Url\":60,\"FILE_KEY\":61,\"ADD\":62,\"Description\":63,\"REP\":64,\"MODE\":65,\"COLOR\":66,\"Descriptor\":67,\"RepresentationOwnProperty\":68,\"RepresentationOwnPropertyOpts\":69,\"DESC_KEY\":70,\"=\":71,\"DESC_KEY_OPTS\":72,\"AxesArg\":73,\"DESC_KEY_AXES\":74,\"Arg\":75,\"PathWoDescKey\":76,\"HEX\":77,\"BOOL\":78,\"Word\":79,\"CommandSetWoDESC_KEY\":80,\"DescKeys\":81,\"CLEAR\":82,\"FILE_LIST\":83,\"FILE_REGISTER\":84,\"FILE_DELETE\":85,\"PRESET_ADD\":86,\"PRESET_DELETE\":87,\"PRESET_UPDATE\":88,\"PRESET_RENAME\":89,\"PRESET_OPEN\":90,\"CREATE_SCENARIO\":91,\"RESET_SCENARIO\":92,\"DELETE_SCENARIO\":93,\"ADD_SCENARIO_ITEM\":94,\"LIST_SCENARIO\":95,\"PDB_KEY\":96,\"DELAY_KEY\":97,\"PRST_KEY\":98,\"DESCRIPTION_KEY\":99,\"CommandSet\":100,\".\":101,\"PresetPath\":102,\"/\":103,\"HexOrNumber\":104,\"$accept\":0,\"$end\":1},\r\nterminals_: {2:\"error\",5:\"EOF\",6:\"RESET\",7:\"BUILD\",8:\"ALL\",9:\"HELP\",11:\"MOTM\",13:\"GET\",14:\"STRING\",15:\"SET\",17:\"SET_SAVE\",18:\"SET_RESTORE\",19:\"SET_RESET\",20:\"PRESET\",23:\"REMOVE\",25:\"HIDE\",26:\"SHOW\",27:\"LIST\",28:\"EXPAND_KEY\",29:\"SELECTOR_KEY\",30:\"SELECT\",31:\"AS\",33:\"SELECTOR\",34:\"WITHIN\",35:\"NUMBER\",36:\"OF\",37:\"MATERIAL\",38:\"IDENTIFIER\",41:\"VIEW\",42:\"BASE_64\",43:\"UNIT\",44:\"DSSP\",45:\"SCALE\",46:\"ROTATE\",48:\"TRANSLATE\",49:\"CENTER\",52:\"LINE\",54:\"LISTOBJ\",55:\"REMOVEOBJ\",56:\"URL\",57:\"VIEW_KEY\",58:\"SCREENSHOT\",59:\"LOAD\",61:\"FILE_KEY\",62:\"ADD\",64:\"REP\",65:\"MODE\",66:\"COLOR\",70:\"DESC_KEY\",71:\"=\",72:\"DESC_KEY_OPTS\",74:\"DESC_KEY_AXES\",77:\"HEX\",78:\"BOOL\",82:\"CLEAR\",83:\"FILE_LIST\",84:\"FILE_REGISTER\",85:\"FILE_DELETE\",86:\"PRESET_ADD\",87:\"PRESET_DELETE\",88:\"PRESET_UPDATE\",89:\"PRESET_RENAME\",90:\"PRESET_OPEN\",91:\"CREATE_SCENARIO\",92:\"RESET_SCENARIO\",93:\"DELETE_SCENARIO\",94:\"ADD_SCENARIO_ITEM\",95:\"LIST_SCENARIO\",96:\"PDB_KEY\",97:\"DELAY_KEY\",98:\"PRST_KEY\",99:\"DESCRIPTION_KEY\",101:\".\",103:\"/\"},\r\nproductions_: [0,[3,2],[3,1],[4,1],[4,1],[4,2],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,3],[4,3],[4,1],[4,1],[4,1],[4,1],[4,2],[4,1],[4,1],[4,2],[4,2],[4,2],[4,2],[4,1],[4,2],[4,2],[4,2],[4,4],[4,2],[4,6],[4,2],[4,1],[4,1],[4,1],[4,2],[4,2],[4,1],[4,2],[4,1],[4,2],[4,2],[4,2],[4,1],[4,2],[4,1],[4,1],[4,3],[4,3],[4,4],[4,4],[4,1],[4,2],[50,1],[50,2],[50,2],[50,3],[50,3],[51,1],[51,2],[51,3],[12,2],[12,2],[12,2],[21,1],[21,2],[21,2],[21,3],[22,2],[22,3],[39,2],[39,3],[40,2],[40,3],[24,1],[24,1],[63,1],[63,2],[63,3],[63,4],[67,1],[67,1],[67,2],[68,3],[69,3],[47,1],[47,2],[73,2],[53,1],[53,2],[75,3],[16,1],[16,1],[16,1],[16,1],[16,1],[79,1],[79,1],[32,1],[32,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[80,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[81,1],[100,1],[100,1],[76,1],[76,3],[76,3],[10,1],[10,1],[10,3],[10,3],[10,3],[60,1],[102,1],[102,3],[104,1],[104,1]],\r\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\r\n/* this == yyval */\r\n\r\nvar $0 = $$.length - 1;\r\nswitch (yystate) {\r\ncase 1:\r\n return $$[$0-1]; \r\nbreak;\r\ncase 3:\r\nthis.$ = yy.miew.reset(false); yy.ClearContext(); yy.miew.resetReps(\"empty\");\r\nbreak;\r\ncase 4:\r\nthis.$ = yy.miew.rebuild();\r\nbreak;\r\ncase 5:\r\nthis.$ = yy.miew.rebuildAll(); yy.miew.rebuild();\r\nbreak;\r\ncase 6:\r\nthis.$ = yy.echo(yy.utils.help().toString());\r\nbreak;\r\ncase 7:\r\nthis.$ = yy.echo(yy.utils.help($$[$0]).toString());\r\nbreak;\r\ncase 8:\r\nthis.$ = yy.miew.motm();\r\nbreak;\r\ncase 10: case 11:\r\nthis.$ = yy.utils.propagateProp($$[$0]); yy.echo(yy.miew.get($$[$0]).toString());\r\nbreak;\r\ncase 12: case 13:\r\nthis.$ = yy.miew.set($$[$0-1], yy.utils.propagateProp($$[$0-1], $$[$0]));;\r\nbreak;\r\ncase 14:\r\nthis.$ = yy.miew.saveSettings();;\r\nbreak;\r\ncase 15:\r\nthis.$ = yy.miew.restoreSettings();;\r\nbreak;\r\ncase 16:\r\nthis.$ = yy.miew.resetSettings();;\r\nbreak;\r\ncase 17:\r\nthis.$ = yy.miew.resetReps();\r\nbreak;\r\ncase 18:\r\nthis.$ = yy.miew.applyPreset($$[$0]);\r\nbreak;\r\ncase 21:\r\nthis.$ = yy.miew.repRemove($$[$0]); yy.representations.remove($$[$0]);\r\nbreak;\r\ncase 22:\r\nthis.$ = yy.miew.repHide($$[$0]);\r\nbreak;\r\ncase 23:\r\nthis.$ = yy.miew.repHide($$[$0], false);\r\nbreak;\r\ncase 24:\r\nthis.$ = yy.echo(yy.utils.listRep(yy.miew, yy.representations, $$[$0], '-e'));\r\nbreak;\r\ncase 25:\r\nthis.$ = yy.echo(yy.utils.list(yy.miew, yy.representations));\r\nbreak;\r\ncase 26:\r\nthis.$ = yy.echo(yy.utils.list(yy.miew, yy.representations, $$[$0]));\r\nbreak;\r\ncase 27:\r\nthis.$ = yy.echo(yy.utils.listSelector(yy.miew, yy.Context));\r\nbreak;\r\ncase 28:\r\nthis.$ = yy.miew.select(yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0], true));\r\nbreak;\r\ncase 29:\r\nthis.$ = yy.Context[$$[$0].toLowerCase()] = yy.utils.checkArg($$[$0-3].toLowerCase(), $$[$0-2], true); yy.miew.select(yy.Context[$$[$0].toLowerCase()]);\r\nbreak;\r\ncase 30:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {selector : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0])});\r\nbreak;\r\ncase 31:\r\nthis.$ = yy.Context[$$[$0].toLowerCase()] = yy.miew.within(yy.utils.checkArg(\"select\", $$[$0-2], true), Number($$[$0-4]));\r\nbreak;\r\ncase 32:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {material : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 35:\r\nthis.$ = yy.echo(yy.miew.view());\r\nbreak;\r\ncase 36: case 37:\r\nthis.$ = yy.miew.view($$[$0]);\r\nbreak;\r\ncase 38:\r\nthis.$ = yy.echo(yy.miew.changeUnit());\r\nbreak;\r\ncase 39:\r\nthis.$ = yy.echo(yy.miew.changeUnit($$[$0]));\r\nbreak;\r\ncase 40:\r\nthis.$ = yy.miew.dssp();\r\nbreak;\r\ncase 41:\r\nthis.$ = yy.miew.scale($$[$0]);\r\nbreak;\r\ncase 42:\r\n for (var i = 0, n = $$[$0].length; i < n; i++) {yy.miew.rotate($$[$0][i]['x'] * Math.PI / 180.0, $$[$0][i]['y'] * Math.PI / 180.0, $$[$0][i]['z'] * Math.PI / 180.0)} \r\nbreak;\r\ncase 43:\r\n for (var i = 0, n = $$[$0].length; i < n; i++) {yy.miew.translate($$[$0][i]['x'] || 0, $$[$0][i]['y'] || 0, $$[$0][i]['z'] || 0)} \r\nbreak;\r\ncase 44:\r\nthis.$ = yy.miew.center();\r\nbreak;\r\ncase 45:\r\nthis.$ = yy.miew.center($$[$0]);\r\nbreak;\r\ncase 48: case 49:\r\nthis.$ = yy.miew.addObject({type: 'line', params: [$$[$0-1], $$[$0]]}, true);\r\nbreak;\r\ncase 50: case 51:\r\nthis.$ = yy.miew.addObject({type: 'line', params: [$$[$0-2], $$[$0-1]], opts:$$[$0].toJSO(yy.utils, 'objects', 'line')}, true);\r\nbreak;\r\ncase 52:\r\nthis.$ = yy.echo(yy.utils.listObjs(yy.miew));\r\nbreak;\r\ncase 53:\r\nthis.$ = yy.miew.removeObject($$[$0]);\r\nbreak;\r\ncase 54:\r\nthis.$ = yy.echo(yy.miew.getURL({view: false, settings: false}));\r\nbreak;\r\ncase 55:\r\nthis.$ = yy.echo(yy.miew.getURL({view: false, settings: true}));\r\nbreak;\r\ncase 56:\r\nthis.$ = yy.echo(yy.miew.getURL({view: true,  settings: false}));\r\nbreak;\r\ncase 57: case 58:\r\nthis.$ = yy.echo(yy.miew.getURL({view: true,  settings: true}));\r\nbreak;\r\ncase 59:\r\nthis.$ = yy.miew.screenshotSave();\r\nbreak;\r\ncase 60:\r\nthis.$ = yy.miew.screenshotSave('', Number($$[$0]));\r\nbreak;\r\ncase 61:\r\nthis.$ = yy.miew.screenshotSave('', Number($$[$0-1]), Number($$[$0]));\r\nbreak;\r\ncase 62: case 63: case 64:\r\nthis.$ = yy.utils.load(yy.miew, $$[$0]); yy.representations.clear();\r\nbreak;\r\ncase 65:\r\nthis.$ = yy.echo(yy.representations.add(yy.miew.repAdd()));\r\nbreak;\r\ncase 66:\r\nthis.$ = yy.echo(yy.representations.add($$[$0], yy.miew.repAdd()));\r\nbreak;\r\ncase 67:\r\nthis.$ = yy.echo(yy.representations.add(yy.miew.repAdd($$[$0])));\r\nbreak;\r\ncase 68:\r\nthis.$ = yy.echo(yy.representations.add($$[$0-1], yy.miew.repAdd($$[$0])));\r\nbreak;\r\ncase 69:\r\nthis.$ = yy.miew.rep($$[$0]); yy.miew.repCurrent($$[$0]);\r\nbreak;\r\ncase 70:\r\nthis.$ = yy.miew.rep($$[$0-1], $$[$0]); yy.miew.repCurrent($$[$0-1]);\r\nbreak;\r\ncase 71:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {mode : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 72:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {mode : new Array(yy.utils.checkArg($$[$0-2].toLowerCase(), $$[$0-1].toUpperCase()), $$[$0].toJSO(yy.utils, $$[$0-2], $$[$0-1].toUpperCase()))});\r\nbreak;\r\ncase 73:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {colorer : yy.utils.checkArg($$[$0-1].toLowerCase(), $$[$0].toUpperCase())});\r\nbreak;\r\ncase 74:\r\nthis.$ = yy.miew.rep(yy.miew.repCurrent(), {colorer : new Array(yy.utils.checkArg($$[$0-2].toLowerCase(), $$[$0-1].toUpperCase()), $$[$0].toJSO(yy.utils, $$[$0-2], $$[$0-1].toUpperCase()))});\r\nbreak;\r\ncase 75:\r\nthis.$ = Number(yy.representations.get($$[$0]));\r\nbreak;\r\ncase 76: case 92:\r\nthis.$ = Number($$[$0]);\r\nbreak;\r\ncase 77:\r\nthis.$ = $$[$0];\r\nbreak;\r\ncase 78:\r\nthis.$ = yy._.assign($$[$0-1], $$[$0]);\r\nbreak;\r\ncase 79:\r\nthis.$ = yy._.assign($$[$0-2], $$[$0-1], $$[$0]);\r\nbreak;\r\ncase 80:\r\nthis.$ = yy._.assign($$[$0-3], $$[$0-2], $$[$0-1], $$[$0]);\r\nbreak;\r\ncase 81: case 82:\r\nthis.$ = yy.CreateObjectPair($$[$0].key, $$[$0].val);\r\nbreak;\r\ncase 83:\r\nthis.$ = yy.CreateObjectPair($$[$0-1].key, new Array($$[$0-1].val, $$[$0].toJSO(yy.utils, $$[$0-1].key, $$[$0-1].val)));\r\nbreak;\r\ncase 84: case 85:\r\nthis.$ = Object.create({'key': yy.keyRemap($$[$0-2]), 'val': yy.utils.checkArg($$[$0-2], $$[$0])});\r\nbreak;\r\ncase 86:\r\nthis.$ = [$$[$0]];\r\nbreak;\r\ncase 87:\r\nthis.$ = $$[$0-1].concat($$[$0]);\r\nbreak;\r\ncase 88:\r\nthis.$ = yy.CreateObjectPair($$[$0-1].toLowerCase(), Number($$[$0]));\r\nbreak;\r\ncase 89:\r\nthis.$ = new yy.ArgList($$[$0]);\r\nbreak;\r\ncase 90:\r\nthis.$ = $$[$0-1].append($$[$0]);\r\nbreak;\r\ncase 91:\r\nthis.$ = new yy.Arg($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 93:\r\nthis.$ = parseInt($$[$0]);\r\nbreak;\r\ncase 94:\r\nthis.$ = JSON.parse($$[$0]);\r\nbreak;\r\ncase 95: case 96:\r\nthis.$ = String($$[$0]);\r\nbreak;\r\ncase 157: case 158: case 161: case 162: case 163:\r\nthis.$ = $$[$0-2] + $$[$0-1] + $$[$0] //cause of could be color word in path;\r\nbreak;\r\ncase 166:\r\nthis.$ = $$[$0-2] = $$[$0-2] + $$[$0-1] + $$[$0];\r\nbreak;\r\n}\r\n},\r\ntable: [{3:1,4:2,5:[1,3],6:[1,4],7:[1,5],9:[1,6],11:[1,7],12:8,13:[1,9],15:[1,10],17:[1,11],18:[1,12],19:[1,13],20:[1,14],21:15,22:16,23:[1,17],25:[1,18],26:[1,19],27:[1,20],30:[1,21],33:[1,22],34:[1,23],37:[1,24],39:25,40:26,41:[1,27],43:[1,28],44:[1,29],45:[1,30],46:[1,31],48:[1,32],49:[1,33],50:34,51:35,52:[1,36],54:[1,37],55:[1,38],56:[1,44],58:[1,45],59:[1,39],62:[1,40],64:[1,41],65:[1,42],66:[1,43]},{1:[3]},{5:[1,46]},{1:[2,2]},{5:[2,3]},{5:[2,4],8:[1,47]},{5:[2,6],6:$V0,7:$V1,9:$V2,10:48,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,8]},{5:[2,9]},{6:$V0,7:$V1,9:$V2,10:106,13:$V3,14:[1,107],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{6:$V0,7:$V1,9:$V2,10:108,13:$V3,14:[1,109],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,14]},{5:[2,15]},{5:[2,16]},{5:[2,17],14:$VS,16:110,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,19]},{5:[2,20]},{24:116,35:$VX,38:$VY},{24:119,35:$VX,38:$VY},{24:120,35:$VX,38:$VY},{5:[2,25],24:121,28:[1,122],29:[1,123],35:$VX,38:$VY},{14:[1,124]},{14:[1,125]},{35:[1,126]},{38:[1,127]},{5:[2,33]},{5:[2,34]},{5:[2,35],14:[1,128],42:[1,129]},{5:[2,38],35:[1,130]},{5:[2,40]},{35:[1,131]},{47:132,73:133,74:$VZ},{47:135,73:133,74:$VZ},{5:[2,44],14:[1,136]},{5:[2,46]},{5:[2,47]},{6:$V0,7:$V1,9:$V2,10:138,13:$V3,14:[1,137],15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,52]},{35:[1,139]},{14:[1,143],38:[1,141],60:140,61:[1,142]},{5:[2,65],38:[1,144],63:145,67:146,68:147,69:148,70:$V_,72:$V$},{24:151,35:$VX,38:$VY},{38:[1,152]},{38:[1,153]},{5:[2,54],29:[1,154],57:[1,155]},{5:[2,59],35:[1,156]},{1:[2,1]},{5:[2,5]},{5:[2,7],101:$V01},o($V11,[2,159]),o($V11,[2,160]),o($V21,[2,97]),o($V21,[2,98]),o($V11,[2,147]),o($V11,[2,148]),o($V11,[2,149]),o($V11,[2,150]),o($V11,[2,151]),o($V11,[2,152]),o($V11,[2,153]),o($V21,[2,101]),o($V21,[2,102]),o($V21,[2,103]),o($V21,[2,104]),o($V21,[2,105]),o($V21,[2,106]),o($V21,[2,107]),o($V21,[2,108]),o($V21,[2,109]),o($V21,[2,110]),o($V21,[2,111]),o($V21,[2,112]),o($V21,[2,113]),o($V21,[2,114]),o($V21,[2,115]),o($V21,[2,116]),o($V21,[2,117]),o($V21,[2,118]),o($V21,[2,119]),o($V21,[2,120]),o($V21,[2,121]),o($V21,[2,122]),o($V21,[2,123]),o($V21,[2,124]),o($V21,[2,125]),o($V21,[2,126]),o($V21,[2,127]),o($V21,[2,128]),o($V21,[2,129]),o($V21,[2,130]),o($V21,[2,131]),o($V21,[2,132]),o($V21,[2,133]),o($V21,[2,134]),o($V21,[2,135]),o($V21,[2,136]),o($V21,[2,137]),o($V21,[2,138]),o($V21,[2,139]),o($V21,[2,140]),o($V21,[2,141]),o($V21,[2,142]),o($V21,[2,143]),o($V21,[2,144]),o($V21,[2,145]),o($V21,[2,146]),{5:[2,10],101:$V01},{5:[2,11]},{14:$VS,16:158,35:$VT,38:$VU,77:$VV,78:$VW,101:$V01},{14:$VS,16:159,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,18]},o($V31,[2,92]),o($V31,[2,93]),o($V31,[2,94]),o($V31,[2,95]),o($V31,[2,96]),{5:[2,21]},o($V41,[2,75]),o($V41,[2,76]),{5:[2,22]},{5:[2,23]},{5:[2,24]},{5:[2,26]},{5:[2,27]},{5:[2,28],31:[1,160]},{5:[2,30]},{36:[1,161]},{5:[2,32]},{5:[2,36]},{5:[2,37]},{5:[2,39]},{5:[2,41]},{5:[2,42],73:162,74:$VZ},o($V51,[2,86]),{35:[1,163]},{5:[2,43],73:162,74:$VZ},{5:[2,45]},{14:[1,164]},{6:$V0,7:$V1,9:$V2,10:165,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:49,80:52,81:50,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR,101:$V01},{5:[2,53]},{5:[2,62]},{5:[2,63]},{5:[2,64]},{5:[2,164]},{5:[2,66],63:166,67:146,68:147,69:148,70:$V_,72:$V$},{5:[2,67]},{5:[2,77],67:167,68:147,69:148,70:$V_,72:$V$},o($V41,[2,81]),o($V41,[2,82],{80:52,53:168,75:169,76:170,79:171,6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN}),{71:[1,172]},{71:[1,173]},{5:[2,69],63:174,67:146,68:147,69:148,70:$V_,72:$V$},{5:[2,71],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:175,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,73],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:176,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,55],57:[1,177]},{5:[2,56],29:[1,178]},{5:[2,60],35:[1,179]},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,35:[1,181],37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:180,80:52,81:182,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,12]},{5:[2,13]},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,32:183,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:184,80:52,81:185,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{14:[1,186]},o($V51,[2,87]),o($V51,[2,88]),{5:[2,48],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:187,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,49],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,53:188,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:169,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,101:$V01},{5:[2,68]},{5:[2,78],67:189,68:147,69:148,70:$V_,72:$V$},o($V41,[2,83],{80:52,76:170,79:171,75:190,6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN}),o($V31,[2,89]),{71:[1,191],101:[1,192]},o($V61,[2,156]),{14:$VS,16:193,35:$VT,38:$VU,77:$VV,78:$VW},{14:$VS,16:194,35:$VT,38:$VU,77:$VV,78:$VW},{5:[2,70]},{5:[2,72],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,74],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,57]},{5:[2,58]},{5:[2,61]},o($V11,[2,161]),o($V11,[2,162]),o($V11,[2,163]),{5:[2,29]},{5:[2,99]},{5:[2,100]},{31:[1,195]},{5:[2,50],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,51],6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,75:190,76:170,79:171,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},{5:[2,79],67:196,68:147,69:148,70:$V_,72:$V$},o($V31,[2,90]),{14:$VS,16:197,35:$VT,38:$VU,77:$VV,78:$VW},{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,33:$Ve,34:$Vf,35:[1,199],37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,79:198,80:52,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN},o($V41,[2,84]),o($V31,[2,85]),{6:$V0,7:$V1,9:$V2,13:$V3,15:$V4,17:$V5,18:$V6,19:$V7,20:$V8,23:$V9,25:$Va,26:$Vb,27:$Vc,30:$Vd,32:200,33:$Ve,34:$Vf,37:$Vg,38:$Vh,41:$Vi,43:$Vj,45:$Vk,46:$Vl,49:$Vm,52:$Vn,54:$Vo,55:$Vp,56:$Vq,58:$Vr,59:$Vs,62:$Vt,64:$Vu,65:$Vv,66:$Vw,70:$Vx,72:$Vy,74:$Vz,79:184,80:52,81:185,82:$VA,83:$VB,84:$VC,85:$VD,86:$VE,87:$VF,88:$VG,89:$VH,90:$VI,91:$VJ,92:$VK,93:$VL,94:$VM,95:$VN,96:$VO,97:$VP,98:$VQ,99:$VR},{5:[2,80]},o($V31,[2,91]),o($V61,[2,157]),o($V61,[2,158]),{5:[2,31]}],\r\ndefaultActions: {3:[2,2],4:[2,3],7:[2,8],8:[2,9],11:[2,14],12:[2,15],13:[2,16],15:[2,19],16:[2,20],25:[2,33],26:[2,34],29:[2,40],34:[2,46],35:[2,47],37:[2,52],46:[2,1],47:[2,5],107:[2,11],110:[2,18],116:[2,21],119:[2,22],120:[2,23],121:[2,24],122:[2,26],123:[2,27],125:[2,30],127:[2,32],128:[2,36],129:[2,37],130:[2,39],131:[2,41],136:[2,45],139:[2,53],140:[2,62],141:[2,63],142:[2,64],143:[2,164],145:[2,67],158:[2,12],159:[2,13],166:[2,68],174:[2,70],177:[2,57],178:[2,58],179:[2,61],183:[2,29],184:[2,99],185:[2,100],196:[2,80],200:[2,31]},\r\nparseError: function parseError (str, hash) {\r\n    if (hash.recoverable) {\r\n        this.trace(str);\r\n    } else {\r\n        var error = new Error(str);\r\n        error.hash = hash;\r\n        throw error;\r\n    }\r\n},\r\nparse: function parse(input) {\r\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\r\n    var args = lstack.slice.call(arguments, 1);\r\n    var lexer = Object.create(this.lexer);\r\n    var sharedState = { yy: {} };\r\n    for (var k in this.yy) {\r\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\r\n            sharedState.yy[k] = this.yy[k];\r\n        }\r\n    }\r\n    lexer.setInput(input, sharedState.yy);\r\n    sharedState.yy.lexer = lexer;\r\n    sharedState.yy.parser = this;\r\n    if (typeof lexer.yylloc == 'undefined') {\r\n        lexer.yylloc = {};\r\n    }\r\n    var yyloc = lexer.yylloc;\r\n    lstack.push(yyloc);\r\n    var ranges = lexer.options && lexer.options.ranges;\r\n    if (typeof sharedState.yy.parseError === 'function') {\r\n        this.parseError = sharedState.yy.parseError;\r\n    } else {\r\n        this.parseError = Object.getPrototypeOf(this).parseError;\r\n    }\r\n    function popStack(n) {\r\n        stack.length = stack.length - 2 * n;\r\n        vstack.length = vstack.length - n;\r\n        lstack.length = lstack.length - n;\r\n    }\r\n            function lex() {\r\n            var token;\r\n            token = tstack.pop() || lexer.lex() || EOF;\r\n            if (typeof token !== 'number') {\r\n                if (token instanceof Array) {\r\n                    tstack = token;\r\n                    token = tstack.pop();\r\n                }\r\n                token = self.symbols_[token] || token;\r\n            }\r\n            return token;\r\n        }\r\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\r\n    while (true) {\r\n        state = stack[stack.length - 1];\r\n        if (this.defaultActions[state]) {\r\n            action = this.defaultActions[state];\r\n        } else {\r\n            if (symbol === null || typeof symbol == 'undefined') {\r\n                symbol = lex();\r\n            }\r\n            action = table[state] && table[state][symbol];\r\n        }\r\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\r\n            var errStr = '';\r\n            expected = [];\r\n            for (p in table[state]) {\r\n                if (this.terminals_[p] && p > TERROR) {\r\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\r\n                }\r\n            }\r\n            if (lexer.showPosition) {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\r\n            } else {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\r\n            }\r\n            this.parseError(errStr, {\r\n                text: lexer.match,\r\n                token: this.terminals_[symbol] || symbol,\r\n                line: lexer.yylineno,\r\n                loc: yyloc,\r\n                expected: expected\r\n            });\r\n        }\r\n        if (action[0] instanceof Array && action.length > 1) {\r\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\r\n        }\r\n        switch (action[0]) {\r\n        case 1:\r\n            stack.push(symbol);\r\n            vstack.push(lexer.yytext);\r\n            lstack.push(lexer.yylloc);\r\n            stack.push(action[1]);\r\n            symbol = null;\r\n            if (!preErrorSymbol) {\r\n                yyleng = lexer.yyleng;\r\n                yytext = lexer.yytext;\r\n                yylineno = lexer.yylineno;\r\n                yyloc = lexer.yylloc;\r\n                if (recovering > 0) {\r\n                    recovering--;\r\n                }\r\n            } else {\r\n                symbol = preErrorSymbol;\r\n                preErrorSymbol = null;\r\n            }\r\n            break;\r\n        case 2:\r\n            len = this.productions_[action[1]][1];\r\n            yyval.$ = vstack[vstack.length - len];\r\n            yyval._$ = {\r\n                first_line: lstack[lstack.length - (len || 1)].first_line,\r\n                last_line: lstack[lstack.length - 1].last_line,\r\n                first_column: lstack[lstack.length - (len || 1)].first_column,\r\n                last_column: lstack[lstack.length - 1].last_column\r\n            };\r\n            if (ranges) {\r\n                yyval._$.range = [\r\n                    lstack[lstack.length - (len || 1)].range[0],\r\n                    lstack[lstack.length - 1].range[1]\r\n                ];\r\n            }\r\n            r = this.performAction.apply(yyval, [\r\n                yytext,\r\n                yyleng,\r\n                yylineno,\r\n                sharedState.yy,\r\n                action[1],\r\n                vstack,\r\n                lstack\r\n            ].concat(args));\r\n            if (typeof r !== 'undefined') {\r\n                return r;\r\n            }\r\n            if (len) {\r\n                stack = stack.slice(0, -1 * len * 2);\r\n                vstack = vstack.slice(0, -1 * len);\r\n                lstack = lstack.slice(0, -1 * len);\r\n            }\r\n            stack.push(this.productions_[action[1]][0]);\r\n            vstack.push(yyval.$);\r\n            lstack.push(yyval._$);\r\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\r\n            stack.push(newState);\r\n            break;\r\n        case 3:\r\n            return true;\r\n        }\r\n    }\r\n    return true;\r\n}};\r\n\r\n\r\n/* generated by jison-lex 0.3.4 */\r\nvar lexer = (function(){\r\nvar lexer = ({\r\n\r\nEOF:1,\r\n\r\nparseError:function parseError(str, hash) {\r\n        if (this.yy.parser) {\r\n            this.yy.parser.parseError(str, hash);\r\n        } else {\r\n            throw new Error(str);\r\n        }\r\n    },\r\n\r\n// resets the lexer, sets new input\r\nsetInput:function (input, yy) {\r\n        this.yy = yy || this.yy || {};\r\n        this._input = input;\r\n        this._more = this._backtrack = this.done = false;\r\n        this.yylineno = this.yyleng = 0;\r\n        this.yytext = this.matched = this.match = '';\r\n        this.conditionStack = ['INITIAL'];\r\n        this.yylloc = {\r\n            first_line: 1,\r\n            first_column: 0,\r\n            last_line: 1,\r\n            last_column: 0\r\n        };\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [0,0];\r\n        }\r\n        this.offset = 0;\r\n        return this;\r\n    },\r\n\r\n// consumes and returns one char from the input\r\ninput:function () {\r\n        var ch = this._input[0];\r\n        this.yytext += ch;\r\n        this.yyleng++;\r\n        this.offset++;\r\n        this.match += ch;\r\n        this.matched += ch;\r\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno++;\r\n            this.yylloc.last_line++;\r\n        } else {\r\n            this.yylloc.last_column++;\r\n        }\r\n        if (this.options.ranges) {\r\n            this.yylloc.range[1]++;\r\n        }\r\n\r\n        this._input = this._input.slice(1);\r\n        return ch;\r\n    },\r\n\r\n// unshifts one char (or a string) into the input\r\nunput:function (ch) {\r\n        var len = ch.length;\r\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\r\n\r\n        this._input = ch + this._input;\r\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\r\n        //this.yyleng -= len;\r\n        this.offset -= len;\r\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\r\n        this.match = this.match.substr(0, this.match.length - 1);\r\n        this.matched = this.matched.substr(0, this.matched.length - 1);\r\n\r\n        if (lines.length - 1) {\r\n            this.yylineno -= lines.length - 1;\r\n        }\r\n        var r = this.yylloc.range;\r\n\r\n        this.yylloc = {\r\n            first_line: this.yylloc.first_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.first_column,\r\n            last_column: lines ?\r\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\r\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\r\n              this.yylloc.first_column - len\r\n        };\r\n\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\r\n        }\r\n        this.yyleng = this.yytext.length;\r\n        return this;\r\n    },\r\n\r\n// When called from action, caches matched text and appends it on next action\r\nmore:function () {\r\n        this._more = true;\r\n        return this;\r\n    },\r\n\r\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\r\nreject:function () {\r\n        if (this.options.backtrack_lexer) {\r\n            this._backtrack = true;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n\r\n        }\r\n        return this;\r\n    },\r\n\r\n// retain first n characters of the match\r\nless:function (n) {\r\n        this.unput(this.match.slice(n));\r\n    },\r\n\r\n// displays already matched input, i.e. for error messages\r\npastInput:function () {\r\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\r\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays upcoming input, i.e. for error messages\r\nupcomingInput:function () {\r\n        var next = this.match;\r\n        if (next.length < 20) {\r\n            next += this._input.substr(0, 20-next.length);\r\n        }\r\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays the character position where the lexing error occurred, i.e. for error messages\r\nshowPosition:function () {\r\n        var pre = this.pastInput();\r\n        var c = new Array(pre.length + 1).join(\"-\");\r\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\r\n    },\r\n\r\n// test the lexed token: return FALSE when not a match, otherwise return token\r\ntest_match:function(match, indexed_rule) {\r\n        var token,\r\n            lines,\r\n            backup;\r\n\r\n        if (this.options.backtrack_lexer) {\r\n            // save context\r\n            backup = {\r\n                yylineno: this.yylineno,\r\n                yylloc: {\r\n                    first_line: this.yylloc.first_line,\r\n                    last_line: this.last_line,\r\n                    first_column: this.yylloc.first_column,\r\n                    last_column: this.yylloc.last_column\r\n                },\r\n                yytext: this.yytext,\r\n                match: this.match,\r\n                matches: this.matches,\r\n                matched: this.matched,\r\n                yyleng: this.yyleng,\r\n                offset: this.offset,\r\n                _more: this._more,\r\n                _input: this._input,\r\n                yy: this.yy,\r\n                conditionStack: this.conditionStack.slice(0),\r\n                done: this.done\r\n            };\r\n            if (this.options.ranges) {\r\n                backup.yylloc.range = this.yylloc.range.slice(0);\r\n            }\r\n        }\r\n\r\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno += lines.length;\r\n        }\r\n        this.yylloc = {\r\n            first_line: this.yylloc.last_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.last_column,\r\n            last_column: lines ?\r\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\r\n                         this.yylloc.last_column + match[0].length\r\n        };\r\n        this.yytext += match[0];\r\n        this.match += match[0];\r\n        this.matches = match;\r\n        this.yyleng = this.yytext.length;\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\r\n        }\r\n        this._more = false;\r\n        this._backtrack = false;\r\n        this._input = this._input.slice(match[0].length);\r\n        this.matched += match[0];\r\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\r\n        if (this.done && this._input) {\r\n            this.done = false;\r\n        }\r\n        if (token) {\r\n            return token;\r\n        } else if (this._backtrack) {\r\n            // recover context\r\n            for (var k in backup) {\r\n                this[k] = backup[k];\r\n            }\r\n            return false; // rule action called reject() implying the next rule should be tested instead.\r\n        }\r\n        return false;\r\n    },\r\n\r\n// return next match in input\r\nnext:function () {\r\n        if (this.done) {\r\n            return this.EOF;\r\n        }\r\n        if (!this._input) {\r\n            this.done = true;\r\n        }\r\n\r\n        var token,\r\n            match,\r\n            tempMatch,\r\n            index;\r\n        if (!this._more) {\r\n            this.yytext = '';\r\n            this.match = '';\r\n        }\r\n        var rules = this._currentRules();\r\n        for (var i = 0; i < rules.length; i++) {\r\n            tempMatch = this._input.match(this.rules[rules[i]]);\r\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\r\n                match = tempMatch;\r\n                index = i;\r\n                if (this.options.backtrack_lexer) {\r\n                    token = this.test_match(tempMatch, rules[i]);\r\n                    if (token !== false) {\r\n                        return token;\r\n                    } else if (this._backtrack) {\r\n                        match = false;\r\n                        continue; // rule action called reject() implying a rule MISmatch.\r\n                    } else {\r\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n                        return false;\r\n                    }\r\n                } else if (!this.options.flex) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (match) {\r\n            token = this.test_match(match, rules[index]);\r\n            if (token !== false) {\r\n                return token;\r\n            }\r\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n            return false;\r\n        }\r\n        if (this._input === \"\") {\r\n            return this.EOF;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n        }\r\n    },\r\n\r\n// return next match that has a token\r\nlex:function lex () {\r\n        var r = this.next();\r\n        if (r) {\r\n            return r;\r\n        } else {\r\n            return this.lex();\r\n        }\r\n    },\r\n\r\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\r\nbegin:function begin (condition) {\r\n        this.conditionStack.push(condition);\r\n    },\r\n\r\n// pop the previously active lexer condition state off the condition stack\r\npopState:function popState () {\r\n        var n = this.conditionStack.length - 1;\r\n        if (n > 0) {\r\n            return this.conditionStack.pop();\r\n        } else {\r\n            return this.conditionStack[0];\r\n        }\r\n    },\r\n\r\n// produce the lexer rule set which is active for the currently active lexer condition state\r\n_currentRules:function _currentRules () {\r\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\r\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\r\n        } else {\r\n            return this.conditions[\"INITIAL\"].rules;\r\n        }\r\n    },\r\n\r\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\r\ntopState:function topState (n) {\r\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\r\n        if (n >= 0) {\r\n            return this.conditionStack[n];\r\n        } else {\r\n            return \"INITIAL\";\r\n        }\r\n    },\r\n\r\n// alias for begin(condition)\r\npushState:function pushState (condition) {\r\n        this.begin(condition);\r\n    },\r\n\r\n// return the number of states currently on the stack\r\nstateStackSize:function stateStackSize() {\r\n        return this.conditionStack.length;\r\n    },\r\noptions: {\"case-insensitive\":true},\r\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\nvar YYSTATE=YY_START;\r\nswitch($avoiding_name_collisions) {\r\ncase 0:/* ignore whitespace */\r\nbreak;\r\ncase 1:return '';\r\nbreak;\r\ncase 2:return '';\r\nbreak;\r\ncase 3:return 42;\r\nbreak;\r\ncase 4:return 35;\r\nbreak;\r\ncase 5:return 77;\r\nbreak;\r\ncase 6:return 78;\r\nbreak;\r\ncase 7:return 78;\r\nbreak;\r\ncase 8:return 8;\r\nbreak;\r\ncase 9:return 6;\r\nbreak;\r\ncase 10:return 82;\r\nbreak;\r\ncase 11:return 7;\r\nbreak;\r\ncase 12:return 9;\r\nbreak;\r\ncase 13:return 59;\r\nbreak;\r\ncase 14:return 13\r\nbreak;\r\ncase 15:return 15\r\nbreak;\r\ncase 16:return 17\r\nbreak;\r\ncase 17:return 18\r\nbreak;\r\ncase 18:return 19\r\nbreak;\r\ncase 19:return 20\r\nbreak;\r\ncase 20:return 11\r\nbreak;\r\ncase 21:return 62\r\nbreak;\r\ncase 22:return 64\r\nbreak;\r\ncase 23:return 23\r\nbreak;\r\ncase 24:return 25\r\nbreak;\r\ncase 25:return 26\r\nbreak;\r\ncase 26:return 27\r\nbreak;\r\ncase 27:return 30\r\nbreak;\r\ncase 28:return 34\r\nbreak;\r\ncase 29:return 33\r\nbreak;\r\ncase 30:return 65\r\nbreak;\r\ncase 31:return 66\r\nbreak;\r\ncase 32:return 37\r\nbreak;\r\ncase 33:return 41\r\nbreak;\r\ncase 34:return 43\r\nbreak;\r\ncase 35:return 52\r\nbreak;\r\ncase 36:return 54\r\nbreak;\r\ncase 37:return 55\r\nbreak;\r\ncase 38:return 46\r\nbreak;\r\ncase 39:return 48\r\nbreak;\r\ncase 40:return 45\r\nbreak;\r\ncase 41:return 49\r\nbreak;\r\ncase 42:return 56\r\nbreak;\r\ncase 43:return 58;\r\nbreak;\r\ncase 44:return 44\r\nbreak;\r\ncase 45:return 83\r\nbreak;\r\ncase 46:return 84\r\nbreak;\r\ncase 47:return 85\r\nbreak;\r\ncase 48:return 86\r\nbreak;\r\ncase 49:return 87\r\nbreak;\r\ncase 50:return 88\r\nbreak;\r\ncase 51:return 89\r\nbreak;\r\ncase 52:return 90\r\nbreak;\r\ncase 53:return 91\r\nbreak;\r\ncase 54:return 92\r\nbreak;\r\ncase 55:return 93\r\nbreak;\r\ncase 56:return 94\r\nbreak;\r\ncase 57:return 95\r\nbreak;\r\ncase 58:return 70\r\nbreak;\r\ncase 59:return 70\r\nbreak;\r\ncase 60:return 72\r\nbreak;\r\ncase 61:return 72\r\nbreak;\r\ncase 62:return 74\r\nbreak;\r\ncase 63:return 74\r\nbreak;\r\ncase 64:return 74\r\nbreak;\r\ncase 65:return 31\r\nbreak;\r\ncase 66:return 36\r\nbreak;\r\ncase 67:return 96\r\nbreak;\r\ncase 68:return 97\r\nbreak;\r\ncase 69:return 98\r\nbreak;\r\ncase 70:return 99\r\nbreak;\r\ncase 71:yy_.yytext = yy.utils.unquoteString(yy_.yytext); return 14;\r\nbreak;\r\ncase 72:return 38;\r\nbreak;\r\ncase 73:return 5;\r\nbreak;\r\ncase 74:return 101;\r\nbreak;\r\ncase 75:return 103;\r\nbreak;\r\ncase 76:return '\\\\';\r\nbreak;\r\ncase 77:return 28\r\nbreak;\r\ncase 78:return 61\r\nbreak;\r\ncase 79:return 29\r\nbreak;\r\ncase 80:return 57\r\nbreak;\r\ncase 81:return 71\r\nbreak;\r\n}\r\n},\r\nrules: [/^(?:\\s+)/i,/^(?:[#].*)/i,/^(?:\\/\\/.*)/i,/^(?:([_A-Z0-9\\/\\+]+==))/i,/^(?:-?[0-9]+(\\.[0-9]+)?\\b)/i,/^(?:0[xX][0-9A-F]+\\b)/i,/^(?:false\\b)/i,/^(?:true\\b)/i,/^(?:all\\b)/i,/^(?:reset\\b)/i,/^(?:clear\\b)/i,/^(?:build\\b)/i,/^(?:help\\b)/i,/^(?:load\\b)/i,/^(?:get\\b)/i,/^(?:set\\b)/i,/^(?:set_save\\b)/i,/^(?:set_restore\\b)/i,/^(?:set_reset\\b)/i,/^(?:preset\\b)/i,/^(?:motm\\b)/i,/^(?:add\\b)/i,/^(?:rep\\b)/i,/^(?:remove\\b)/i,/^(?:hide\\b)/i,/^(?:show\\b)/i,/^(?:list\\b)/i,/^(?:select\\b)/i,/^(?:within\\b)/i,/^(?:selector\\b)/i,/^(?:mode\\b)/i,/^(?:color\\b)/i,/^(?:material\\b)/i,/^(?:view\\b)/i,/^(?:unit\\b)/i,/^(?:line\\b)/i,/^(?:listobj\\b)/i,/^(?:removeobj\\b)/i,/^(?:rotate\\b)/i,/^(?:translate\\b)/i,/^(?:scale\\b)/i,/^(?:center\\b)/i,/^(?:url\\b)/i,/^(?:screenshot\\b)/i,/^(?:dssp\\b)/i,/^(?:file_list\\b)/i,/^(?:file_register\\b)/i,/^(?:file_delete\\b)/i,/^(?:preset_add\\b)/i,/^(?:preset_delete\\b)/i,/^(?:preset_update\\b)/i,/^(?:preset_rename\\b)/i,/^(?:preset_open\\b)/i,/^(?:create_scenario\\b)/i,/^(?:reset_scenario\\b)/i,/^(?:delete_scenario\\b)/i,/^(?:add_scenario_item\\b)/i,/^(?:list_scenario\\b)/i,/^(?:s\\b)/i,/^(?:mt\\b)/i,/^(?:m\\b)/i,/^(?:c\\b)/i,/^(?:x\\b)/i,/^(?:y\\b)/i,/^(?:z\\b)/i,/^(?:as\\b)/i,/^(?:of\\b)/i,/^(?:pdb\\b)/i,/^(?:delay\\b)/i,/^(?:prst\\b)/i,/^(?:desc\\b)/i,/^(?:((?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*')))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:\\.)/i,/^(?:\\/)/i,/^(?:\\\\)/i,/^(?:-e\\b)/i,/^(?:-f\\b)/i,/^(?:-s\\b)/i,/^(?:-v\\b)/i,/^(?:=)/i],\r\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],\"inclusive\":true}}\r\n});\r\nreturn lexer;\r\n})();\r\nparser.lexer = lexer;\r\nfunction Parser () {\r\n  this.yy = {};\r\n}\r\nParser.prototype = parser;parser.Parser = Parser;\r\nreturn new Parser;\r\n})();\r\n\r\nmodule.exports = {parser: parser};\r\n","/* eslint-disable */\r\n// DO NOT EDIT! Automatically generated from .jison\r\n/* parser generated by jison 0.4.18 */\r\n/*\r\n  Returns a Parser object of the following structure:\r\n\r\n  Parser: {\r\n    yy: {}\r\n  }\r\n\r\n  Parser.prototype: {\r\n    yy: {},\r\n    trace: function(),\r\n    symbols_: {associative list: name ==> number},\r\n    terminals_: {associative list: number ==> name},\r\n    productions_: [...],\r\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\r\n    table: [...],\r\n    defaultActions: {...},\r\n    parseError: function(str, hash),\r\n    parse: function(input),\r\n\r\n    lexer: {\r\n        EOF: 1,\r\n        parseError: function(str, hash),\r\n        setInput: function(input),\r\n        input: function(),\r\n        unput: function(str),\r\n        more: function(),\r\n        less: function(n),\r\n        pastInput: function(),\r\n        upcomingInput: function(),\r\n        showPosition: function(),\r\n        test_match: function(regex_match_array, rule_index),\r\n        next: function(),\r\n        lex: function(),\r\n        begin: function(condition),\r\n        popState: function(),\r\n        _currentRules: function(),\r\n        topState: function(),\r\n        pushState: function(condition),\r\n\r\n        options: {\r\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\r\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\r\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\r\n        },\r\n\r\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\r\n        rules: [...],\r\n        conditions: {associative list: name ==> set},\r\n    }\r\n  }\r\n\r\n\r\n  token location info (@$, _$, etc.): {\r\n    first_line: n,\r\n    last_line: n,\r\n    first_column: n,\r\n    last_column: n,\r\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\r\n  }\r\n\r\n\r\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\r\n    text:        (matched text)\r\n    token:       (the produced terminal token, if any)\r\n    line:        (yylineno)\r\n  }\r\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\r\n    loc:         (yylloc)\r\n    expected:    (string describing the set of expected tokens)\r\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\r\n  }\r\n*/\r\nvar parser = (function(){\r\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,4],$V1=[1,5],$V2=[1,6],$V3=[1,7],$V4=[1,8],$V5=[1,9],$V6=[1,11],$V7=[1,12],$V8=[5,7,8,11],$V9=[1,17],$Va=[1,22],$Vb=[1,20],$Vc=[1,21],$Vd=[5,7,8,11,19];\r\nvar parser = {trace: function trace() { },\r\nyy: {},\r\nsymbols_: {\"error\":2,\"Program\":3,\"Expression\":4,\"EOF\":5,\"Selector\":6,\"OR\":7,\"AND\":8,\"NOT\":9,\"(\":10,\")\":11,\"SELECTOR\":12,\"NAMED_SELECTOR\":13,\"SELECTOR_RANGED\":14,\"RangeList\":15,\"SELECTOR_NAMED\":16,\"NameList\":17,\"Range\":18,\",\":19,\"NUMBER\":20,\":\":21,\"Name\":22,\"IDENTIFIER\":23,\"STRING\":24,\"$accept\":0,\"$end\":1},\r\nterminals_: {2:\"error\",5:\"EOF\",7:\"OR\",8:\"AND\",9:\"NOT\",10:\"(\",11:\")\",12:\"SELECTOR\",13:\"NAMED_SELECTOR\",14:\"SELECTOR_RANGED\",16:\"SELECTOR_NAMED\",19:\",\",20:\"NUMBER\",21:\":\",23:\"IDENTIFIER\",24:\"STRING\"},\r\nproductions_: [0,[3,2],[4,1],[4,3],[4,3],[4,2],[4,3],[6,1],[6,1],[6,2],[6,2],[15,1],[15,3],[18,1],[18,3],[17,1],[17,3],[22,1],[22,1],[22,1]],\r\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\r\n/* this == yyval */\r\n\r\nvar $0 = $$.length - 1;\r\nswitch (yystate) {\r\ncase 1:\r\n return $$[$0-1]; \r\nbreak;\r\ncase 3:\r\nthis.$ = yy.keyword('or')($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 4:\r\nthis.$ = yy.keyword('and')($$[$0-2], $$[$0]);\r\nbreak;\r\ncase 5:\r\nthis.$ = yy.keyword('not')($$[$0]);\r\nbreak;\r\ncase 6:\r\nthis.$ = $$[$0-1];\r\nbreak;\r\ncase 7:\r\nthis.$ = yy.keyword($$[$0])();\r\nbreak;\r\ncase 8:\r\nthis.$ = yy.GetSelector($$[$0].toLowerCase().slice(1, $$[$0].length));\r\nbreak;\r\ncase 9: case 10:\r\nthis.$ = yy.keyword($$[$0-1])($$[$0]);\r\nbreak;\r\ncase 11:\r\nthis.$ = new yy.RangeList($$[$0]);\r\nbreak;\r\ncase 12: case 16:\r\nthis.$ = $$[$0-2].append($$[$0]);\r\nbreak;\r\ncase 13:\r\nthis.$ = new yy.Range(Number($$[$0]));\r\nbreak;\r\ncase 14:\r\nthis.$ = new yy.Range(Number($$[$0-2]), Number($$[$0]));\r\nbreak;\r\ncase 15:\r\nthis.$ = new yy.ValueList($$[$0]);\r\nbreak;\r\n}\r\n},\r\ntable: [{3:1,4:2,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{1:[3]},{5:[1,10],7:$V6,8:$V7},o($V8,[2,2]),{4:13,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{4:14,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},o($V8,[2,7]),o($V8,[2,8]),{15:15,18:16,20:$V9},{17:18,20:$Va,22:19,23:$Vb,24:$Vc},{1:[2,1]},{4:23,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},{4:24,6:3,9:$V0,10:$V1,12:$V2,13:$V3,14:$V4,16:$V5},o($V8,[2,5]),{7:$V6,8:$V7,11:[1,25]},o($V8,[2,9],{19:[1,26]}),o($Vd,[2,11]),o($Vd,[2,13],{21:[1,27]}),o($V8,[2,10],{19:[1,28]}),o($Vd,[2,15]),o($Vd,[2,17]),o($Vd,[2,18]),o($Vd,[2,19]),o([5,7,11],[2,3],{8:$V7}),o($V8,[2,4]),o($V8,[2,6]),{18:29,20:$V9},{20:[1,30]},{20:$Va,22:31,23:$Vb,24:$Vc},o($Vd,[2,12]),o($Vd,[2,14]),o($Vd,[2,16])],\r\ndefaultActions: {10:[2,1]},\r\nparseError: function parseError(str, hash) {\r\n    if (hash.recoverable) {\r\n        this.trace(str);\r\n    } else {\r\n        var error = new Error(str);\r\n        error.hash = hash;\r\n        throw error;\r\n    }\r\n},\r\nparse: function parse(input) {\r\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\r\n    var args = lstack.slice.call(arguments, 1);\r\n    var lexer = Object.create(this.lexer);\r\n    var sharedState = { yy: {} };\r\n    for (var k in this.yy) {\r\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\r\n            sharedState.yy[k] = this.yy[k];\r\n        }\r\n    }\r\n    lexer.setInput(input, sharedState.yy);\r\n    sharedState.yy.lexer = lexer;\r\n    sharedState.yy.parser = this;\r\n    if (typeof lexer.yylloc == 'undefined') {\r\n        lexer.yylloc = {};\r\n    }\r\n    var yyloc = lexer.yylloc;\r\n    lstack.push(yyloc);\r\n    var ranges = lexer.options && lexer.options.ranges;\r\n    if (typeof sharedState.yy.parseError === 'function') {\r\n        this.parseError = sharedState.yy.parseError;\r\n    } else {\r\n        this.parseError = Object.getPrototypeOf(this).parseError;\r\n    }\r\n    function popStack(n) {\r\n        stack.length = stack.length - 2 * n;\r\n        vstack.length = vstack.length - n;\r\n        lstack.length = lstack.length - n;\r\n    }\r\n            function lex() {\r\n            var token;\r\n            token = tstack.pop() || lexer.lex() || EOF;\r\n            if (typeof token !== 'number') {\r\n                if (token instanceof Array) {\r\n                    tstack = token;\r\n                    token = tstack.pop();\r\n                }\r\n                token = self.symbols_[token] || token;\r\n            }\r\n            return token;\r\n        }\r\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\r\n    while (true) {\r\n        state = stack[stack.length - 1];\r\n        if (this.defaultActions[state]) {\r\n            action = this.defaultActions[state];\r\n        } else {\r\n            if (symbol === null || typeof symbol == 'undefined') {\r\n                symbol = lex();\r\n            }\r\n            action = table[state] && table[state][symbol];\r\n        }\r\n        if (typeof action === 'undefined' || !action.length || !action[0]) {\r\n            var errStr = '';\r\n            expected = [];\r\n            for (p in table[state]) {\r\n                if (this.terminals_[p] && p > TERROR) {\r\n                    expected.push('\\'' + this.terminals_[p] + '\\'');\r\n                }\r\n            }\r\n            if (lexer.showPosition) {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\r\n            } else {\r\n                errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\r\n            }\r\n            this.parseError(errStr, {\r\n                text: lexer.match,\r\n                token: this.terminals_[symbol] || symbol,\r\n                line: lexer.yylineno,\r\n                loc: yyloc,\r\n                expected: expected\r\n            });\r\n        }\r\n        if (action[0] instanceof Array && action.length > 1) {\r\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\r\n        }\r\n        switch (action[0]) {\r\n        case 1:\r\n            stack.push(symbol);\r\n            vstack.push(lexer.yytext);\r\n            lstack.push(lexer.yylloc);\r\n            stack.push(action[1]);\r\n            symbol = null;\r\n            if (!preErrorSymbol) {\r\n                yyleng = lexer.yyleng;\r\n                yytext = lexer.yytext;\r\n                yylineno = lexer.yylineno;\r\n                yyloc = lexer.yylloc;\r\n                if (recovering > 0) {\r\n                    recovering--;\r\n                }\r\n            } else {\r\n                symbol = preErrorSymbol;\r\n                preErrorSymbol = null;\r\n            }\r\n            break;\r\n        case 2:\r\n            len = this.productions_[action[1]][1];\r\n            yyval.$ = vstack[vstack.length - len];\r\n            yyval._$ = {\r\n                first_line: lstack[lstack.length - (len || 1)].first_line,\r\n                last_line: lstack[lstack.length - 1].last_line,\r\n                first_column: lstack[lstack.length - (len || 1)].first_column,\r\n                last_column: lstack[lstack.length - 1].last_column\r\n            };\r\n            if (ranges) {\r\n                yyval._$.range = [\r\n                    lstack[lstack.length - (len || 1)].range[0],\r\n                    lstack[lstack.length - 1].range[1]\r\n                ];\r\n            }\r\n            r = this.performAction.apply(yyval, [\r\n                yytext,\r\n                yyleng,\r\n                yylineno,\r\n                sharedState.yy,\r\n                action[1],\r\n                vstack,\r\n                lstack\r\n            ].concat(args));\r\n            if (typeof r !== 'undefined') {\r\n                return r;\r\n            }\r\n            if (len) {\r\n                stack = stack.slice(0, -1 * len * 2);\r\n                vstack = vstack.slice(0, -1 * len);\r\n                lstack = lstack.slice(0, -1 * len);\r\n            }\r\n            stack.push(this.productions_[action[1]][0]);\r\n            vstack.push(yyval.$);\r\n            lstack.push(yyval._$);\r\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\r\n            stack.push(newState);\r\n            break;\r\n        case 3:\r\n            return true;\r\n        }\r\n    }\r\n    return true;\r\n}};\r\n\r\n\r\n/* generated by jison-lex 0.3.4 */\r\nvar lexer = (function(){\r\nvar lexer = ({\r\n\r\nEOF:1,\r\n\r\nparseError:function parseError(str, hash) {\r\n        if (this.yy.parser) {\r\n            this.yy.parser.parseError(str, hash);\r\n        } else {\r\n            throw new Error(str);\r\n        }\r\n    },\r\n\r\n// resets the lexer, sets new input\r\nsetInput:function (input, yy) {\r\n        this.yy = yy || this.yy || {};\r\n        this._input = input;\r\n        this._more = this._backtrack = this.done = false;\r\n        this.yylineno = this.yyleng = 0;\r\n        this.yytext = this.matched = this.match = '';\r\n        this.conditionStack = ['INITIAL'];\r\n        this.yylloc = {\r\n            first_line: 1,\r\n            first_column: 0,\r\n            last_line: 1,\r\n            last_column: 0\r\n        };\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [0,0];\r\n        }\r\n        this.offset = 0;\r\n        return this;\r\n    },\r\n\r\n// consumes and returns one char from the input\r\ninput:function () {\r\n        var ch = this._input[0];\r\n        this.yytext += ch;\r\n        this.yyleng++;\r\n        this.offset++;\r\n        this.match += ch;\r\n        this.matched += ch;\r\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno++;\r\n            this.yylloc.last_line++;\r\n        } else {\r\n            this.yylloc.last_column++;\r\n        }\r\n        if (this.options.ranges) {\r\n            this.yylloc.range[1]++;\r\n        }\r\n\r\n        this._input = this._input.slice(1);\r\n        return ch;\r\n    },\r\n\r\n// unshifts one char (or a string) into the input\r\nunput:function (ch) {\r\n        var len = ch.length;\r\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\r\n\r\n        this._input = ch + this._input;\r\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\r\n        //this.yyleng -= len;\r\n        this.offset -= len;\r\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\r\n        this.match = this.match.substr(0, this.match.length - 1);\r\n        this.matched = this.matched.substr(0, this.matched.length - 1);\r\n\r\n        if (lines.length - 1) {\r\n            this.yylineno -= lines.length - 1;\r\n        }\r\n        var r = this.yylloc.range;\r\n\r\n        this.yylloc = {\r\n            first_line: this.yylloc.first_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.first_column,\r\n            last_column: lines ?\r\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\r\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\r\n              this.yylloc.first_column - len\r\n        };\r\n\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\r\n        }\r\n        this.yyleng = this.yytext.length;\r\n        return this;\r\n    },\r\n\r\n// When called from action, caches matched text and appends it on next action\r\nmore:function () {\r\n        this._more = true;\r\n        return this;\r\n    },\r\n\r\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\r\nreject:function () {\r\n        if (this.options.backtrack_lexer) {\r\n            this._backtrack = true;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n\r\n        }\r\n        return this;\r\n    },\r\n\r\n// retain first n characters of the match\r\nless:function (n) {\r\n        this.unput(this.match.slice(n));\r\n    },\r\n\r\n// displays already matched input, i.e. for error messages\r\npastInput:function () {\r\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\r\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays upcoming input, i.e. for error messages\r\nupcomingInput:function () {\r\n        var next = this.match;\r\n        if (next.length < 20) {\r\n            next += this._input.substr(0, 20-next.length);\r\n        }\r\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\r\n    },\r\n\r\n// displays the character position where the lexing error occurred, i.e. for error messages\r\nshowPosition:function () {\r\n        var pre = this.pastInput();\r\n        var c = new Array(pre.length + 1).join(\"-\");\r\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\r\n    },\r\n\r\n// test the lexed token: return FALSE when not a match, otherwise return token\r\ntest_match:function (match, indexed_rule) {\r\n        var token,\r\n            lines,\r\n            backup;\r\n\r\n        if (this.options.backtrack_lexer) {\r\n            // save context\r\n            backup = {\r\n                yylineno: this.yylineno,\r\n                yylloc: {\r\n                    first_line: this.yylloc.first_line,\r\n                    last_line: this.last_line,\r\n                    first_column: this.yylloc.first_column,\r\n                    last_column: this.yylloc.last_column\r\n                },\r\n                yytext: this.yytext,\r\n                match: this.match,\r\n                matches: this.matches,\r\n                matched: this.matched,\r\n                yyleng: this.yyleng,\r\n                offset: this.offset,\r\n                _more: this._more,\r\n                _input: this._input,\r\n                yy: this.yy,\r\n                conditionStack: this.conditionStack.slice(0),\r\n                done: this.done\r\n            };\r\n            if (this.options.ranges) {\r\n                backup.yylloc.range = this.yylloc.range.slice(0);\r\n            }\r\n        }\r\n\r\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\r\n        if (lines) {\r\n            this.yylineno += lines.length;\r\n        }\r\n        this.yylloc = {\r\n            first_line: this.yylloc.last_line,\r\n            last_line: this.yylineno + 1,\r\n            first_column: this.yylloc.last_column,\r\n            last_column: lines ?\r\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\r\n                         this.yylloc.last_column + match[0].length\r\n        };\r\n        this.yytext += match[0];\r\n        this.match += match[0];\r\n        this.matches = match;\r\n        this.yyleng = this.yytext.length;\r\n        if (this.options.ranges) {\r\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\r\n        }\r\n        this._more = false;\r\n        this._backtrack = false;\r\n        this._input = this._input.slice(match[0].length);\r\n        this.matched += match[0];\r\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\r\n        if (this.done && this._input) {\r\n            this.done = false;\r\n        }\r\n        if (token) {\r\n            return token;\r\n        } else if (this._backtrack) {\r\n            // recover context\r\n            for (var k in backup) {\r\n                this[k] = backup[k];\r\n            }\r\n            return false; // rule action called reject() implying the next rule should be tested instead.\r\n        }\r\n        return false;\r\n    },\r\n\r\n// return next match in input\r\nnext:function () {\r\n        if (this.done) {\r\n            return this.EOF;\r\n        }\r\n        if (!this._input) {\r\n            this.done = true;\r\n        }\r\n\r\n        var token,\r\n            match,\r\n            tempMatch,\r\n            index;\r\n        if (!this._more) {\r\n            this.yytext = '';\r\n            this.match = '';\r\n        }\r\n        var rules = this._currentRules();\r\n        for (var i = 0; i < rules.length; i++) {\r\n            tempMatch = this._input.match(this.rules[rules[i]]);\r\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\r\n                match = tempMatch;\r\n                index = i;\r\n                if (this.options.backtrack_lexer) {\r\n                    token = this.test_match(tempMatch, rules[i]);\r\n                    if (token !== false) {\r\n                        return token;\r\n                    } else if (this._backtrack) {\r\n                        match = false;\r\n                        continue; // rule action called reject() implying a rule MISmatch.\r\n                    } else {\r\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n                        return false;\r\n                    }\r\n                } else if (!this.options.flex) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (match) {\r\n            token = this.test_match(match, rules[index]);\r\n            if (token !== false) {\r\n                return token;\r\n            }\r\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\r\n            return false;\r\n        }\r\n        if (this._input === \"\") {\r\n            return this.EOF;\r\n        } else {\r\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\r\n                text: \"\",\r\n                token: null,\r\n                line: this.yylineno\r\n            });\r\n        }\r\n    },\r\n\r\n// return next match that has a token\r\nlex:function lex() {\r\n        var r = this.next();\r\n        if (r) {\r\n            return r;\r\n        } else {\r\n            return this.lex();\r\n        }\r\n    },\r\n\r\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\r\nbegin:function begin(condition) {\r\n        this.conditionStack.push(condition);\r\n    },\r\n\r\n// pop the previously active lexer condition state off the condition stack\r\npopState:function popState() {\r\n        var n = this.conditionStack.length - 1;\r\n        if (n > 0) {\r\n            return this.conditionStack.pop();\r\n        } else {\r\n            return this.conditionStack[0];\r\n        }\r\n    },\r\n\r\n// produce the lexer rule set which is active for the currently active lexer condition state\r\n_currentRules:function _currentRules() {\r\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\r\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\r\n        } else {\r\n            return this.conditions[\"INITIAL\"].rules;\r\n        }\r\n    },\r\n\r\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\r\ntopState:function topState(n) {\r\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\r\n        if (n >= 0) {\r\n            return this.conditionStack[n];\r\n        } else {\r\n            return \"INITIAL\";\r\n        }\r\n    },\r\n\r\n// alias for begin(condition)\r\npushState:function pushState(condition) {\r\n        this.begin(condition);\r\n    },\r\n\r\n// return the number of states currently on the stack\r\nstateStackSize:function stateStackSize() {\r\n        return this.conditionStack.length;\r\n    },\r\noptions: {\"case-insensitive\":true},\r\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\r\nvar YYSTATE=YY_START;\r\nswitch($avoiding_name_collisions) {\r\ncase 0:/* skip whitespace */\r\nbreak;\r\ncase 1:return 20;\r\nbreak;\r\ncase 2:return 7;\r\nbreak;\r\ncase 3:return 8;\r\nbreak;\r\ncase 4:return 9;\r\nbreak;\r\ncase 5:return 12;\r\nbreak;\r\ncase 6:return 16;\r\nbreak;\r\ncase 7:return 14;\r\nbreak;\r\ncase 8:return 10;\r\nbreak;\r\ncase 9:return 11;\r\nbreak;\r\ncase 10:return 19;\r\nbreak;\r\ncase 11:return 21;\r\nbreak;\r\ncase 12:return '<=';\r\nbreak;\r\ncase 13:return '>=';\r\nbreak;\r\ncase 14:return '<';\r\nbreak;\r\ncase 15:return '>';\r\nbreak;\r\ncase 16:yy_.yytext = yy_.yytext.substr(1,yy_.yyleng-2); return 24;\r\nbreak;\r\ncase 17:return 13;\r\nbreak;\r\ncase 18:return 23;\r\nbreak;\r\ncase 19:return 5;\r\nbreak;\r\ncase 20:return 'INVALID';\r\nbreak;\r\n}\r\n},\r\nrules: [/^(?:\\s+)/i,/^(?:(-?(?:[1-9][0-9]+|[0-9]))\\b)/i,/^(?:OR\\b)/i,/^(?:AND\\b)/i,/^(?:NOT\\b)/i,/^(?:((ALL|NONE|HETATM|PROTEIN|BASIC|ACIDIC|CHARGED|POLAR|NONPOLAR|AROMATIC|NUCLEIC|PURINE|PYRIMIDINE|WATER|POLARH|NONPOLARH))\\b)/i,/^(?:((NAME|ELEM|TYPE|RESIDUE|ICODE|CHAIN|ALTLOC))\\b)/i,/^(?:((SERIAL|SEQUENCE|RESIDX))\\b)/i,/^(?:\\()/i,/^(?:\\))/i,/^(?:,)/i,/^(?::)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:((?:\"(?:\\\\.|[^\\\\\"])*\"|'(?:\\\\.|[^\\\\'])*')))/i,/^(?:(@[_A-Z0-9]+))/i,/^(?:([_A-Z0-9]+))/i,/^(?:$)/i,/^(?:.)/i],\r\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],\"inclusive\":true}}\r\n});\r\nreturn lexer;\r\n})();\r\nparser.lexer = lexer;\r\nfunction Parser () {\r\n  this.yy = {};\r\n}\r\nParser.prototype = parser;parser.Parser = Parser;\r\nreturn new Parser;\r\n})();\r\n\r\nmodule.exports = {parser: parser};\r\n","\r\n/*\r\nSmooth.js version 0.1.7\r\n\r\nTurn arrays into smooth functions.\r\n\r\nCopyright 2012 Spencer Cohen\r\nLicensed under MIT license (see \"Smooth.js MIT license.txt\")\r\n*/\r\n\r\n/*Constants (these are accessible by Smooth.WHATEVER in user space)\r\n*/\r\n\r\n(function() {\r\n  var AbstractInterpolator, CubicInterpolator, Enum, LinearInterpolator, NearestInterpolator, PI, SincFilterInterpolator, Smooth, clipClamp, clipMirror, clipPeriodic, defaultConfig, getColumn, getType, isValidNumber, k, makeLanczosWindow, makeScaledFunction, makeSincKernel, normalizeScaleTo, shallowCopy, sin, sinc, v, validateNumber, validateVector,\r\n    __hasProp = Object.prototype.hasOwnProperty,\r\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };\r\n\r\n  Enum = {\r\n    /*Interpolation methods\r\n    */\r\n    METHOD_NEAREST: 'nearest',\r\n    METHOD_LINEAR: 'linear',\r\n    METHOD_CUBIC: 'cubic',\r\n    METHOD_LANCZOS: 'lanczos',\r\n    METHOD_SINC: 'sinc',\r\n    /*Input clipping modes\r\n    */\r\n    CLIP_CLAMP: 'clamp',\r\n    CLIP_ZERO: 'zero',\r\n    CLIP_PERIODIC: 'periodic',\r\n    CLIP_MIRROR: 'mirror',\r\n    /* Constants for control over the cubic interpolation tension\r\n    */\r\n    CUBIC_TENSION_DEFAULT: 0,\r\n    CUBIC_TENSION_CATMULL_ROM: 0\r\n  };\r\n\r\n  defaultConfig = {\r\n    method: Enum.METHOD_CUBIC,\r\n    cubicTension: Enum.CUBIC_TENSION_DEFAULT,\r\n    clip: Enum.CLIP_CLAMP,\r\n    scaleTo: 0,\r\n    sincFilterSize: 2,\r\n    sincWindow: void 0\r\n  };\r\n\r\n  /*Index clipping functions\r\n  */\r\n\r\n  clipClamp = function(i, n) {\r\n    return Math.max(0, Math.min(i, n - 1));\r\n  };\r\n\r\n  clipPeriodic = function(i, n) {\r\n    i = i % n;\r\n    if (i < 0) i += n;\r\n    return i;\r\n  };\r\n\r\n  clipMirror = function(i, n) {\r\n    var period;\r\n    period = 2 * (n - 1);\r\n    i = clipPeriodic(i, period);\r\n    if (i > n - 1) i = period - i;\r\n    return i;\r\n  };\r\n\r\n  /*\r\n  Abstract scalar interpolation class which provides common functionality for all interpolators\r\n  \r\n  Subclasses must override interpolate().\r\n  */\r\n\r\n  AbstractInterpolator = (function() {\r\n\r\n    function AbstractInterpolator(array, config) {\r\n      this.array = array.slice(0);\r\n      this.length = this.array.length;\r\n      if (!(this.clipHelper = {\r\n        clamp: this.clipHelperClamp,\r\n        zero: this.clipHelperZero,\r\n        periodic: this.clipHelperPeriodic,\r\n        mirror: this.clipHelperMirror\r\n      }[config.clip])) {\r\n        throw \"Invalid clip: \" + config.clip;\r\n      }\r\n    }\r\n\r\n    AbstractInterpolator.prototype.getClippedInput = function(i) {\r\n      if ((0 <= i && i < this.length)) {\r\n        return this.array[i];\r\n      } else {\r\n        return this.clipHelper(i);\r\n      }\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperClamp = function(i) {\r\n      return this.array[clipClamp(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperZero = function(i) {\r\n      return 0;\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperPeriodic = function(i) {\r\n      return this.array[clipPeriodic(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.clipHelperMirror = function(i) {\r\n      return this.array[clipMirror(i, this.length)];\r\n    };\r\n\r\n    AbstractInterpolator.prototype.interpolate = function(t) {\r\n      throw 'Subclasses of AbstractInterpolator must override the interpolate() method.';\r\n    };\r\n\r\n    return AbstractInterpolator;\r\n\r\n  })();\r\n\r\n  NearestInterpolator = (function(_super) {\r\n\r\n    __extends(NearestInterpolator, _super);\r\n\r\n    function NearestInterpolator() {\r\n      NearestInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    NearestInterpolator.prototype.interpolate = function(t) {\r\n      return this.getClippedInput(Math.round(t));\r\n    };\r\n\r\n    return NearestInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  LinearInterpolator = (function(_super) {\r\n\r\n    __extends(LinearInterpolator, _super);\r\n\r\n    function LinearInterpolator() {\r\n      LinearInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    LinearInterpolator.prototype.interpolate = function(t) {\r\n      var k;\r\n      k = Math.floor(t);\r\n      t -= k;\r\n      return (1 - t) * this.getClippedInput(k) + t * this.getClippedInput(k + 1);\r\n    };\r\n\r\n    return LinearInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  CubicInterpolator = (function(_super) {\r\n\r\n    __extends(CubicInterpolator, _super);\r\n\r\n    function CubicInterpolator(array, config) {\r\n      this.tangentFactor = 1 - Math.max(-1, Math.min(1, config.cubicTension));\r\n      CubicInterpolator.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n    CubicInterpolator.prototype.getTangent = function(k) {\r\n      return this.tangentFactor * (this.getClippedInput(k + 1) - this.getClippedInput(k - 1)) / 2;\r\n    };\r\n\r\n    CubicInterpolator.prototype.interpolate = function(t) {\r\n      var k, m, p, t2, t3;\r\n      k = Math.floor(t);\r\n      m = [this.getTangent(k), this.getTangent(k + 1)];\r\n      p = [this.getClippedInput(k), this.getClippedInput(k + 1)];\r\n      t -= k;\r\n      t2 = t * t;\r\n      t3 = t * t2;\r\n      return (2 * t3 - 3 * t2 + 1) * p[0] + (t3 - 2 * t2 + t) * m[0] + (-2 * t3 + 3 * t2) * p[1] + (t3 - t2) * m[1];\r\n    };\r\n\r\n    return CubicInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  sin = Math.sin, PI = Math.PI;\r\n\r\n  sinc = function(x) {\r\n    if (x === 0) {\r\n      return 1;\r\n    } else {\r\n      return sin(PI * x) / (PI * x);\r\n    }\r\n  };\r\n\r\n  makeLanczosWindow = function(a) {\r\n    return function(x) {\r\n      return sinc(x / a);\r\n    };\r\n  };\r\n\r\n  makeSincKernel = function(window) {\r\n    return function(x) {\r\n      return sinc(x) * window(x);\r\n    };\r\n  };\r\n\r\n  SincFilterInterpolator = (function(_super) {\r\n\r\n    __extends(SincFilterInterpolator, _super);\r\n\r\n    function SincFilterInterpolator(array, config) {\r\n      SincFilterInterpolator.__super__.constructor.apply(this, arguments);\r\n      this.a = config.sincFilterSize;\r\n      if (!config.sincWindow) throw 'No sincWindow provided';\r\n      this.kernel = makeSincKernel(config.sincWindow);\r\n    }\r\n\r\n    SincFilterInterpolator.prototype.interpolate = function(t) {\r\n      var k, n, sum, _ref, _ref2;\r\n      k = Math.floor(t);\r\n      sum = 0;\r\n      for (n = _ref = k - this.a + 1, _ref2 = k + this.a; _ref <= _ref2 ? n <= _ref2 : n >= _ref2; _ref <= _ref2 ? n++ : n--) {\r\n        sum += this.kernel(t - n) * this.getClippedInput(n);\r\n      }\r\n      return sum;\r\n    };\r\n\r\n    return SincFilterInterpolator;\r\n\r\n  })(AbstractInterpolator);\r\n\r\n  getColumn = function(arr, i) {\r\n    var row, _i, _len, _results;\r\n    _results = [];\r\n    for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n      row = arr[_i];\r\n      _results.push(row[i]);\r\n    }\r\n    return _results;\r\n  };\r\n\r\n  makeScaledFunction = function(f, baseScale, scaleRange) {\r\n    var scaleFactor, translation;\r\n    if (scaleRange.join === '0,1') {\r\n      return f;\r\n    } else {\r\n      scaleFactor = baseScale / (scaleRange[1] - scaleRange[0]);\r\n      translation = scaleRange[0];\r\n      return function(t) {\r\n        return f(scaleFactor * (t - translation));\r\n      };\r\n    }\r\n  };\r\n\r\n  getType = function(x) {\r\n    return Object.prototype.toString.call(x).slice('[object '.length, -1);\r\n  };\r\n\r\n  validateNumber = function(n) {\r\n    if (isNaN(n)) throw 'NaN in Smooth() input';\r\n    if (getType(n) !== 'Number') throw 'Non-number in Smooth() input';\r\n    if (!isFinite(n)) throw 'Infinity in Smooth() input';\r\n  };\r\n\r\n  validateVector = function(v, dimension) {\r\n    var n, _i, _len;\r\n    if (getType(v) !== 'Array') throw 'Non-vector in Smooth() input';\r\n    if (v.length !== dimension) throw 'Inconsistent dimension in Smooth() input';\r\n    for (_i = 0, _len = v.length; _i < _len; _i++) {\r\n      n = v[_i];\r\n      validateNumber(n);\r\n    }\r\n  };\r\n\r\n  isValidNumber = function(n) {\r\n    return (getType(n) === 'Number') && isFinite(n) && !isNaN(n);\r\n  };\r\n\r\n  normalizeScaleTo = function(s) {\r\n    var invalidErr;\r\n    invalidErr = \"scaleTo param must be number or array of two numbers\";\r\n    switch (getType(s)) {\r\n      case 'Number':\r\n        if (!isValidNumber(s)) throw invalidErr;\r\n        s = [0, s];\r\n        break;\r\n      case 'Array':\r\n        if (s.length !== 2) throw invalidErr;\r\n        if (!(isValidNumber(s[0]) && isValidNumber(s[1]))) throw invalidErr;\r\n        break;\r\n      default:\r\n        throw invalidErr;\r\n    }\r\n    return s;\r\n  };\r\n\r\n  shallowCopy = function(obj) {\r\n    var copy, k, v;\r\n    copy = {};\r\n    for (k in obj) {\r\n      if (!__hasProp.call(obj, k)) continue;\r\n      v = obj[k];\r\n      copy[k] = v;\r\n    }\r\n    return copy;\r\n  };\r\n\r\n  Smooth = function(arr, config) {\r\n    var baseDomainEnd, dimension, i, interpolator, interpolatorClass, interpolators, k, n, properties, smoothFunc, v;\r\n    if (config == null) config = {};\r\n    properties = {};\r\n    config = shallowCopy(config);\r\n    properties.config = shallowCopy(config);\r\n    if (config.scaleTo == null) config.scaleTo = config.period;\r\n    if (config.sincFilterSize == null) {\r\n      config.sincFilterSize = config.lanczosFilterSize;\r\n    }\r\n    for (k in defaultConfig) {\r\n      if (!__hasProp.call(defaultConfig, k)) continue;\r\n      v = defaultConfig[k];\r\n      if (config[k] == null) config[k] = v;\r\n    }\r\n    if (!(interpolatorClass = {\r\n      nearest: NearestInterpolator,\r\n      linear: LinearInterpolator,\r\n      cubic: CubicInterpolator,\r\n      lanczos: SincFilterInterpolator,\r\n      sinc: SincFilterInterpolator\r\n    }[config.method])) {\r\n      throw \"Invalid method: \" + config.method;\r\n    }\r\n    if (config.method === 'lanczos') {\r\n      config.sincWindow = makeLanczosWindow(config.sincFilterSize);\r\n    }\r\n    if (arr.length < 2) throw 'Array must have at least two elements';\r\n    properties.count = arr.length;\r\n    smoothFunc = (function() {\r\n      var _i, _j, _len, _len2;\r\n      switch (getType(arr[0])) {\r\n        case 'Number':\r\n          properties.dimension = 'scalar';\r\n          if (Smooth.deepValidation) {\r\n            for (_i = 0, _len = arr.length; _i < _len; _i++) {\r\n              n = arr[_i];\r\n              validateNumber(n);\r\n            }\r\n          }\r\n          interpolator = new interpolatorClass(arr, config);\r\n          return function(t) {\r\n            return interpolator.interpolate(t);\r\n          };\r\n        case 'Array':\r\n          properties.dimension = dimension = arr[0].length;\r\n          if (!dimension) throw 'Vectors must be non-empty';\r\n          if (Smooth.deepValidation) {\r\n            for (_j = 0, _len2 = arr.length; _j < _len2; _j++) {\r\n              v = arr[_j];\r\n              validateVector(v, dimension);\r\n            }\r\n          }\r\n          interpolators = (function() {\r\n            var _results;\r\n            _results = [];\r\n            for (i = 0; 0 <= dimension ? i < dimension : i > dimension; 0 <= dimension ? i++ : i--) {\r\n              _results.push(new interpolatorClass(getColumn(arr, i), config));\r\n            }\r\n            return _results;\r\n          })();\r\n          return function(t) {\r\n            var interpolator, _k, _len3, _results;\r\n            _results = [];\r\n            for (_k = 0, _len3 = interpolators.length; _k < _len3; _k++) {\r\n              interpolator = interpolators[_k];\r\n              _results.push(interpolator.interpolate(t));\r\n            }\r\n            return _results;\r\n          };\r\n        default:\r\n          throw \"Invalid element type: \" + (getType(arr[0]));\r\n      }\r\n    })();\r\n    if (config.clip === 'periodic') {\r\n      baseDomainEnd = arr.length;\r\n    } else {\r\n      baseDomainEnd = arr.length - 1;\r\n    }\r\n    config.scaleTo || (config.scaleTo = baseDomainEnd);\r\n    properties.domain = normalizeScaleTo(config.scaleTo);\r\n    smoothFunc = makeScaledFunction(smoothFunc, baseDomainEnd, properties.domain);\r\n    properties.domain.sort();\r\n    /*copy properties\r\n    */\r\n    for (k in properties) {\r\n      if (!__hasProp.call(properties, k)) continue;\r\n      v = properties[k];\r\n      smoothFunc[k] = v;\r\n    }\r\n    return smoothFunc;\r\n  };\r\n\r\n  for (k in Enum) {\r\n    if (!__hasProp.call(Enum, k)) continue;\r\n    v = Enum[k];\r\n    Smooth[k] = v;\r\n  }\r\n\r\n  Smooth.deepValidation = true;\r\n\r\n  (typeof exports !== \"undefined\" && exports !== null ? exports : window).Smooth = Smooth;\r\n\r\n}).call(this);\r\n","!function(r,t){if(\"function\"==typeof define&&define.amd)define([\"exports\"],t);else if(\"object\"==typeof exports&&\"undefined\"!=typeof module)t(exports);else t(r.MMTF=r.MMTF||{})}(this,function(r){\"use strict\";function t(r,t,n){for(var e=(r.byteLength,0),i=n.length;i>e;e++){var o=n.charCodeAt(e);if(128>o)r.setUint8(t++,o>>>0&127|0);else if(2048>o)r.setUint8(t++,o>>>6&31|192),r.setUint8(t++,o>>>0&63|128);else if(65536>o)r.setUint8(t++,o>>>12&15|224),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128);else{if(!(1114112>o))throw new Error(\"bad codepoint \"+o);r.setUint8(t++,o>>>18&7|240),r.setUint8(t++,o>>>12&63|128),r.setUint8(t++,o>>>6&63|128),r.setUint8(t++,o>>>0&63|128)}}}function n(r){for(var t=0,n=0,e=r.length;e>n;n++){var i=r.charCodeAt(n);if(128>i)t+=1;else if(2048>i)t+=2;else if(65536>i)t+=3;else{if(!(1114112>i))throw new Error(\"bad codepoint \"+i);t+=4}}return t}function e(r,i,o){var a=typeof r;if(\"string\"===a){var u=n(r);if(32>u)return i.setUint8(o,160|u),t(i,o+1,r),1+u;if(256>u)return i.setUint8(o,217),i.setUint8(o+1,u),t(i,o+2,r),2+u;if(65536>u)return i.setUint8(o,218),i.setUint16(o+1,u),t(i,o+3,r),3+u;if(4294967296>u)return i.setUint8(o,219),i.setUint32(o+1,u),t(i,o+5,r),5+u}if(r instanceof Uint8Array){var u=r.byteLength,s=new Uint8Array(i.buffer);if(256>u)return i.setUint8(o,196),i.setUint8(o+1,u),s.set(r,o+2),2+u;if(65536>u)return i.setUint8(o,197),i.setUint16(o+1,u),s.set(r,o+3),3+u;if(4294967296>u)return i.setUint8(o,198),i.setUint32(o+1,u),s.set(r,o+5),5+u}if(\"number\"===a){if(!isFinite(r))throw new Error(\"Number not finite: \"+r);if(Math.floor(r)!==r)return i.setUint8(o,203),i.setFloat64(o+1,r),9;if(r>=0){if(128>r)return i.setUint8(o,r),1;if(256>r)return i.setUint8(o,204),i.setUint8(o+1,r),2;if(65536>r)return i.setUint8(o,205),i.setUint16(o+1,r),3;if(4294967296>r)return i.setUint8(o,206),i.setUint32(o+1,r),5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return i.setInt8(o,r),1;if(r>=-128)return i.setUint8(o,208),i.setInt8(o+1,r),2;if(r>=-32768)return i.setUint8(o,209),i.setInt16(o+1,r),3;if(r>=-2147483648)return i.setUint8(o,210),i.setInt32(o+1,r),5;throw new Error(\"Number too small -0x\"+(-r).toString(16).substr(1))}if(null===r)return i.setUint8(o,192),1;if(\"boolean\"===a)return i.setUint8(o,r?195:194),1;if(\"object\"===a){var u,f=0,c=Array.isArray(r);if(c)u=r.length;else{var d=Object.keys(r);u=d.length}var f;if(16>u?(i.setUint8(o,u|(c?144:128)),f=1):65536>u?(i.setUint8(o,c?220:222),i.setUint16(o+1,u),f=3):4294967296>u&&(i.setUint8(o,c?221:223),i.setUint32(o+1,u),f=5),c)for(var l=0;u>l;l++)f+=e(r[l],i,o+f);else for(var l=0;u>l;l++){var v=d[l];f+=e(v,i,o+f),f+=e(r[v],i,o+f)}return f}throw new Error(\"Unknown type \"+a)}function i(r){var t=typeof r;if(\"string\"===t){var e=n(r);if(32>e)return 1+e;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(r instanceof Uint8Array){var e=r.byteLength;if(256>e)return 2+e;if(65536>e)return 3+e;if(4294967296>e)return 5+e}if(\"number\"===t){if(Math.floor(r)!==r)return 9;if(r>=0){if(128>r)return 1;if(256>r)return 2;if(65536>r)return 3;if(4294967296>r)return 5;throw new Error(\"Number too big 0x\"+r.toString(16))}if(r>=-32)return 1;if(r>=-128)return 2;if(r>=-32768)return 3;if(r>=-2147483648)return 5;throw new Error(\"Number too small -0x\"+r.toString(16).substr(1))}if(\"boolean\"===t||null===r)return 1;if(\"object\"===t){var e,o=0;if(Array.isArray(r)){e=r.length;for(var a=0;e>a;a++)o+=i(r[a])}else{var u=Object.keys(r);e=u.length;for(var a=0;e>a;a++){var s=u[a];o+=i(s)+i(r[s])}}if(16>e)return 1+o;if(65536>e)return 3+o;if(4294967296>e)return 5+o;throw new Error(\"Array or object too long 0x\"+e.toString(16))}throw new Error(\"Unknown type \"+t)}function o(r){var t=new ArrayBuffer(i(r)),n=new DataView(t);return e(r,n,0),new Uint8Array(t)}function a(r,t,n){return t?new r(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function u(r){return a(DataView,r)}function s(r){return a(Uint8Array,r)}function f(r){return a(Int8Array,r)}function c(r){return a(Int32Array,r,4)}function d(r){return a(Float32Array,r,4)}function l(r,t){var n=r.length/2;t||(t=new Int16Array(n));for(var e=0,i=0;n>e;++e,i+=2)t[e]=r[i]<<8^r[i+1]<<0;return t}function v(r,t){var n=r.length;t||(t=new Uint8Array(2*n));for(var e=u(t),i=0;n>i;++i)e.setInt16(2*i,r[i]);return s(t)}function g(r,t){var n=r.length/4;t||(t=new Int32Array(n));for(var e=0,i=0;n>e;++e,i+=4)t[e]=r[i]<<24^r[i+1]<<16^r[i+2]<<8^r[i+3]<<0;return t}function L(r,t){var n=r.length;t||(t=new Uint8Array(4*n));for(var e=u(t),i=0;n>i;++i)e.setInt32(4*i,r[i]);return s(t)}function h(r,t){var n=r.length;t||(t=new Float32Array(n/4));for(var e=u(t),i=u(r),o=0,a=0,s=n/4;s>o;++o,a+=4)e.setFloat32(a,i.getFloat32(a),!0);return t}function y(r,t,n){var e=r.length,i=1/t;n||(n=new Float32Array(e));for(var o=0;e>o;++o)n[o]=r[o]*i;return n}function m(r,t,n){var e=r.length;n||(n=new Int32Array(e));for(var i=0;e>i;++i)n[i]=Math.round(r[i]*t);return n}function p(r,t){var n,e;if(!t){var i=0;for(n=0,e=r.length;e>n;n+=2)i+=r[n+1];t=new r.constructor(i)}var o=0;for(n=0,e=r.length;e>n;n+=2)for(var a=r[n],u=r[n+1],s=0;u>s;++s)t[o]=a,++o;return t}function U(r){if(0===r.length)return new Int32Array;var t,n,e=2;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]&&(e+=2);var i=new Int32Array(e),o=0,a=1;for(t=1,n=r.length;n>t;++t)r[t-1]!==r[t]?(i[o]=r[t-1],i[o+1]=a,a=1,o+=2):++a;return i[o]=r[r.length-1],i[o+1]=a,i}function b(r,t){var n=r.length;t||(t=new r.constructor(n)),n&&(t[0]=r[0]);for(var e=1;n>e;++e)t[e]=r[e]+t[e-1];return t}function I(r,t){var n=r.length;t||(t=new r.constructor(n)),t[0]=r[0];for(var e=1;n>e;++e)t[e]=r[e]-r[e-1];return t}function w(r,t){var n,e,i=r instanceof Int8Array?127:32767,o=-i-1,a=r.length;if(!t){var u=0;for(n=0;a>n;++n)r[n]<i&&r[n]>o&&++u;t=new Int32Array(u)}for(n=0,e=0;a>n;){for(var s=0;r[n]===i||r[n]===o;)s+=r[n],++n;s+=r[n],++n,t[e]=s,++e}return t}function C(r,t){var n,e=t?127:32767,i=-e-1,o=r.length,a=0;for(n=0;o>n;++n){var u=r[n];0===u?++a:a+=u===e||u===i?2:u>0?Math.ceil(u/e):Math.ceil(u/i)}var s=t?new Int8Array(a):new Int16Array(a),f=0;for(n=0;o>n;++n){var u=r[n];if(u>=0)for(;u>=e;)s[f]=e,++f,u-=e;else for(;i>=u;)s[f]=i,++f,u-=i;s[f]=u,++f}return s}function A(r,t){return b(p(r),t)}function x(r){return U(I(r))}function M(r,t,n){return y(p(r,c(n)),t,n)}function F(r,t){return U(m(r,t))}function S(r,t,n){return y(b(r,c(n)),t,n)}function E(r,t,n){return I(m(r,t),n)}function N(r,t,n){return y(w(r,c(n)),t,n)}function O(r,t,n){var e=w(r,c(n));return S(e,t,d(e))}function T(r,t,n){return C(E(r,t),n)}function k(r){var t=u(r),n=t.getInt32(0),e=t.getInt32(4),i=r.subarray(8,12),r=r.subarray(12);return[n,r,e,i]}function j(r,t,n,e){var i=new ArrayBuffer(12+e.byteLength),o=new Uint8Array(i),a=new DataView(i);return a.setInt32(0,r),a.setInt32(4,t),n&&o.set(n,8),o.set(e,12),o}function q(r){var t=r.length,n=s(r);return j(2,t,void 0,n)}function D(r){var t=r.length,n=L(r);return j(4,t,void 0,n)}function P(r,t){var n=r.length/t,e=L([t]),i=s(r);return j(5,n,e,i)}function z(r){var t=r.length,n=L(U(r));return j(6,t,void 0,n)}function B(r){var t=r.length,n=L(x(r));return j(8,t,void 0,n)}function V(r,t){var n=r.length,e=L([t]),i=L(F(r,t));return j(9,n,e,i)}function G(r,t){var n=r.length,e=L([t]),i=v(T(r,t));return j(10,n,e,i)}function R(r){var t={};return rr.forEach(function(n){void 0!==r[n]&&(t[n]=r[n])}),r.bondAtomList&&(t.bondAtomList=D(r.bondAtomList)),r.bondOrderList&&(t.bondOrderList=q(r.bondOrderList)),t.xCoordList=G(r.xCoordList,1e3),t.yCoordList=G(r.yCoordList,1e3),t.zCoordList=G(r.zCoordList,1e3),r.bFactorList&&(t.bFactorList=G(r.bFactorList,100)),r.atomIdList&&(t.atomIdList=B(r.atomIdList)),r.altLocList&&(t.altLocList=z(r.altLocList)),r.occupancyList&&(t.occupancyList=V(r.occupancyList,100)),t.groupIdList=B(r.groupIdList),t.groupTypeList=D(r.groupTypeList),r.secStructList&&(t.secStructList=q(r.secStructList,1)),r.insCodeList&&(t.insCodeList=z(r.insCodeList)),r.sequenceIndexList&&(t.sequenceIndexList=B(r.sequenceIndexList)),t.chainIdList=P(r.chainIdList,4),r.chainNameList&&(t.chainNameList=P(r.chainNameList,4)),t}function H(r){function t(r){for(var t={},n=0;r>n;n++){var e=o();t[e]=o()}return t}function n(t){var n=r.subarray(a,a+t);return a+=t,n}function e(t){var n=r.subarray(a,a+t);a+=t;var e=65535;if(t>e){for(var i=[],o=0;o<n.length;o+=e)i.push(String.fromCharCode.apply(null,n.subarray(o,o+e)));return i.join(\"\")}return String.fromCharCode.apply(null,n)}function i(r){for(var t=new Array(r),n=0;r>n;n++)t[n]=o();return t}function o(){var o,s,f=r[a];if(0===(128&f))return a++,f;if(128===(240&f))return s=15&f,a++,t(s);if(144===(240&f))return s=15&f,a++,i(s);if(160===(224&f))return s=31&f,a++,e(s);if(224===(224&f))return o=u.getInt8(a),a++,o;switch(f){case 192:return a++,null;case 194:return a++,!1;case 195:return a++,!0;case 196:return s=u.getUint8(a+1),a+=2,n(s);case 197:return s=u.getUint16(a+1),a+=3,n(s);case 198:return s=u.getUint32(a+1),a+=5,n(s);case 202:return o=u.getFloat32(a+1),a+=5,o;case 203:return o=u.getFloat64(a+1),a+=9,o;case 204:return o=r[a+1],a+=2,o;case 205:return o=u.getUint16(a+1),a+=3,o;case 206:return o=u.getUint32(a+1),a+=5,o;case 208:return o=u.getInt8(a+1),a+=2,o;case 209:return o=u.getInt16(a+1),a+=3,o;case 210:return o=u.getInt32(a+1),a+=5,o;case 217:return s=u.getUint8(a+1),a+=2,e(s);case 218:return s=u.getUint16(a+1),a+=3,e(s);case 219:return s=u.getUint32(a+1),a+=5,e(s);case 220:return s=u.getUint16(a+1),a+=3,i(s);case 221:return s=u.getUint32(a+1),a+=5,i(s);case 222:return s=u.getUint16(a+1),a+=3,t(s);case 223:return s=u.getUint32(a+1),a+=5,t(s)}throw new Error(\"Unknown type 0x\"+f.toString(16))}var a=0,u=new DataView(r.buffer);return o()}function W(r,t,n,e){switch(r){case 1:return h(t);case 2:return f(t);case 3:return l(t);case 4:return g(t);case 5:return s(t);case 6:return p(g(t),new Uint8Array(n));case 7:return p(g(t));case 8:return A(g(t));case 9:return M(g(t),g(e)[0]);case 10:return O(l(t),g(e)[0]);case 11:return y(l(t),g(e)[0]);case 12:return N(l(t),g(e)[0]);case 13:return N(f(t),g(e)[0]);case 14:return w(l(t));case 15:return w(f(t))}}function X(r,t){t=t||{};var n=t.ignoreFields,e={};return nr.forEach(function(t){var i=n?-1!==n.indexOf(t):!1,o=r[t];i||void 0===o||(o instanceof Uint8Array?e[t]=W.apply(null,k(o)):e[t]=o)}),e}function J(r){return String.fromCharCode.apply(null,r).replace(/\\0/g,\"\")}function K(r,t,n){n=n||{};var e,i,o,a,u,s,f=n.firstModelOnly,c=t.onModel,d=t.onChain,l=t.onGroup,v=t.onAtom,g=t.onBond,L=0,h=0,y=0,m=0,p=0,U=-1,b=r.chainNameList,I=r.secStructList,w=r.insCodeList,C=r.sequenceIndexList,A=r.atomIdList,x=r.bFactorList,M=r.altLocList,F=r.occupancyList,S=r.bondAtomList,E=r.bondOrderList;for(e=0,i=r.chainsPerModel.length;i>e&&!(f&&L>0);++e){var N=r.chainsPerModel[L];for(c&&c({chainCount:N,modelIndex:L}),o=0;N>o;++o){var O=r.groupsPerChain[h];if(d){var T=J(r.chainIdList.subarray(4*h,4*h+4)),k=null;b&&(k=J(b.subarray(4*h,4*h+4))),d({groupCount:O,chainIndex:h,modelIndex:L,chainId:T,chainName:k})}for(a=0;O>a;++a){var j=r.groupList[r.groupTypeList[y]],q=j.atomNameList.length;if(l){var D=null;I&&(D=I[y]);var P=null;r.insCodeList&&(P=String.fromCharCode(w[y]));var z=null;C&&(z=C[y]),l({atomCount:q,groupIndex:y,chainIndex:h,modelIndex:L,groupId:r.groupIdList[y],groupType:r.groupTypeList[y],groupName:j.groupName,singleLetterCode:j.singleLetterCode,chemCompType:j.chemCompType,secStruct:D,insCode:P,sequenceIndex:z})}for(u=0;q>u;++u){if(v){var B=null;A&&(B=A[m]);var V=null;x&&(V=x[m]);var G=null;M&&(G=String.fromCharCode(M[m]));var R=null;F&&(R=F[m]),v({atomIndex:m,groupIndex:y,chainIndex:h,modelIndex:L,atomId:B,element:j.elementList[u],atomName:j.atomNameList[u],formalCharge:j.formalChargeList[u],xCoord:r.xCoordList[m],yCoord:r.yCoordList[m],zCoord:r.zCoordList[m],bFactor:V,altLoc:G,occupancy:R})}m+=1}if(g){var H=j.bondAtomList;for(u=0,s=j.bondOrderList.length;s>u;++u)g({atomIndex1:m-q+H[2*u],atomIndex2:m-q+H[2*u+1],bondOrder:j.bondOrderList[u]})}y+=1}h+=1}if(p=U+1,U=m-1,g&&S)for(u=0,s=S.length;s>u;u+=2){var W=S[u],X=S[u+1];(W>=p&&U>=W||X>=p&&U>=X)&&g({atomIndex1:W,atomIndex2:X,bondOrder:E?E[u/2]:null})}L+=1}}function Q(r){return o(R(r))}function Y(r,t){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var n;return n=r instanceof Uint8Array?H(r):r,X(n,t)}function Z(r,t,n,e){function i(){try{var r=Y(o.response);n(r)}catch(t){e(t)}}var o=new XMLHttpRequest;o.addEventListener(\"load\",i,!0),o.addEventListener(\"error\",e,!0),o.responseType=\"arraybuffer\",o.open(\"GET\",t+r.toUpperCase()),o.send()}function $(r,t,n){Z(r,or,t,n)}function _(r,t,n){Z(r,ar,t,n)}var rr=[\"mmtfVersion\",\"mmtfProducer\",\"unitCell\",\"spaceGroup\",\"structureId\",\"title\",\"depositionDate\",\"releaseDate\",\"experimentalMethods\",\"resolution\",\"rFree\",\"rWork\",\"bioAssemblyList\",\"ncsOperatorList\",\"entityList\",\"groupList\",\"numBonds\",\"numAtoms\",\"numGroups\",\"numChains\",\"numModels\",\"groupsPerChain\",\"chainsPerModel\"],tr=[\"xCoordList\",\"yCoordList\",\"zCoordList\",\"groupIdList\",\"groupTypeList\",\"chainIdList\",\"bFactorList\",\"atomIdList\",\"altLocList\",\"occupancyList\",\"secStructList\",\"insCodeList\",\"sequenceIndexList\",\"chainNameList\",\"bondAtomList\",\"bondOrderList\"],nr=rr.concat(tr),er=\"v1.1.0dev\",ir=\"//mmtf.rcsb.org/v1.0/\",or=ir+\"full/\",ar=ir+\"reduced/\";r.encode=Q,r.decode=Y,r.traverse=K,r.fetch=$,r.fetchReduced=_,r.version=er,r.fetchUrl=or,r.fetchReducedUrl=ar,r.encodeMsgpack=o,r.encodeMmtf=R,r.decodeMsgpack=H,r.decodeMmtf=X});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"default\"]: () => (__WEBPACK_EXTERNAL_MODULE_lodash__[\"default\"]) });","const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_three__;","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar defaults = {\n    lines: 12,\n    length: 7,\n    width: 5,\n    radius: 10,\n    scale: 1.0,\n    corners: 1,\n    color: '#000',\n    fadeColor: 'transparent',\n    animation: 'spinner-line-fade-default',\n    rotate: 0,\n    direction: 1,\n    speed: 1,\n    zIndex: 2e9,\n    className: 'spinner',\n    top: '50%',\n    left: '50%',\n    shadow: '0 0 1px transparent', // prevent aliased lines\n    position: 'absolute',\n};\nvar Spinner = /** @class */ (function () {\n    function Spinner(opts) {\n        if (opts === void 0) { opts = {}; }\n        this.opts = __assign(__assign({}, defaults), opts);\n    }\n    /**\n     * Adds the spinner to the given target element. If this instance is already\n     * spinning, it is automatically removed from its previous target by calling\n     * stop() internally.\n     */\n    Spinner.prototype.spin = function (target) {\n        this.stop();\n        this.el = document.createElement('div');\n        this.el.className = this.opts.className;\n        this.el.setAttribute('role', 'progressbar');\n        this.el.style.position = this.opts.position;\n        this.el.style.width = \"0\";\n        this.el.style.zIndex = this.opts.zIndex.toString();\n        this.el.style.left = this.opts.left;\n        this.el.style.top = this.opts.top;\n        this.el.style.transform = \"scale(\".concat(this.opts.scale, \")\");\n        if (target) {\n            target.insertBefore(this.el, target.firstChild || null);\n        }\n        drawLines(this.el, this.opts);\n        return this;\n    };\n    /**\n     * Stops and removes the Spinner.\n     * Stopped spinners may be reused by calling spin() again.\n     */\n    Spinner.prototype.stop = function () {\n        if (this.el) {\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n            this.el = undefined;\n        }\n        return this;\n    };\n    return Spinner;\n}());\nexport { Spinner };\n/**\n * Returns the line color from the given string or array.\n */\nfunction getColor(color, idx) {\n    return typeof color == 'string' ? color : color[idx % color.length];\n}\n/**\n * Internal method that draws the individual lines.\n */\nfunction drawLines(el, opts) {\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\n    var shadow = 'none';\n    if (opts.shadow === true) {\n        shadow = '0 2px 4px #000'; // default shadow\n    }\n    else if (typeof opts.shadow === 'string') {\n        shadow = opts.shadow;\n    }\n    var shadows = parseBoxShadow(shadow);\n    for (var i = 0; i < opts.lines; i++) {\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\n        var backgroundLine = document.createElement('div');\n        backgroundLine.style.position = 'absolute';\n        backgroundLine.style.top = \"\".concat(-opts.width / 2, \"px\");\n        backgroundLine.style.width = (opts.length + opts.width) + 'px';\n        backgroundLine.style.height = opts.width + 'px';\n        backgroundLine.style.background = getColor(opts.fadeColor, i);\n        backgroundLine.style.borderRadius = borderRadius;\n        backgroundLine.style.transformOrigin = 'left';\n        backgroundLine.style.transform = \"rotate(\".concat(degrees, \"deg) translateX(\").concat(opts.radius, \"px)\");\n        var delay = i * opts.direction / opts.lines / opts.speed;\n        delay -= 1 / opts.speed; // so initial animation state will include trail\n        var line = document.createElement('div');\n        line.style.width = '100%';\n        line.style.height = '100%';\n        line.style.background = getColor(opts.color, i);\n        line.style.borderRadius = borderRadius;\n        line.style.boxShadow = normalizeShadow(shadows, degrees);\n        line.style.animation = \"\".concat(1 / opts.speed, \"s linear \").concat(delay, \"s infinite \").concat(opts.animation);\n        backgroundLine.appendChild(line);\n        el.appendChild(backgroundLine);\n    }\n}\nfunction parseBoxShadow(boxShadow) {\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\n    var shadows = [];\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\n        var shadow = _a[_i];\n        var matches = shadow.match(regex);\n        if (matches === null) {\n            continue; // invalid syntax\n        }\n        var x = +matches[2];\n        var y = +matches[5];\n        var xUnits = matches[4];\n        var yUnits = matches[7];\n        if (x === 0 && !xUnits) {\n            xUnits = yUnits;\n        }\n        if (y === 0 && !yUnits) {\n            yUnits = xUnits;\n        }\n        if (xUnits !== yUnits) {\n            continue; // units must match to use as coordinates\n        }\n        shadows.push({\n            prefix: matches[1] || '', // could have value of 'inset' or undefined\n            x: x,\n            y: y,\n            xUnits: xUnits,\n            yUnits: yUnits,\n            end: matches[8],\n        });\n    }\n    return shadows;\n}\n/**\n * Modify box-shadow x/y offsets to counteract rotation\n */\nfunction normalizeShadow(shadows, degrees) {\n    var normalized = [];\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\n        var shadow = shadows_1[_i];\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\n    }\n    return normalized.join(', ');\n}\nfunction convertOffset(x, y, degrees) {\n    var radians = degrees * Math.PI / 180;\n    var sin = Math.sin(radians);\n    var cos = Math.cos(radians);\n    return [\n        Math.round((x * cos + y * sin) * 1000) / 1000,\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\n    ];\n}\n","//----------------------------------------------------------------------------\r\n// Timer\r\n\r\nexport default class Timer {\r\n  constructor() {\r\n    this.startTime = 0;\r\n    this.oldTime = 0;\r\n    this.elapsedTime = 0;\r\n    this.running = false;\r\n  }\r\n\r\n  start() {\r\n    this.startTime = Timer.now();\r\n    this.oldTime = this.startTime;\r\n    this.running = true;\r\n  }\r\n\r\n  stop() {\r\n    this.getElapsedTime();\r\n    this.running = false;\r\n  }\r\n\r\n  getElapsedTime() {\r\n    this.update();\r\n    return this.elapsedTime;\r\n  }\r\n\r\n  update() {\r\n    let delta = 0;\r\n    if (this.running) {\r\n      const newTime = Timer.now();\r\n      delta = 0.001 * (newTime - this.oldTime);\r\n      this.oldTime = newTime;\r\n      this.elapsedTime += delta;\r\n    }\r\n\r\n    return delta;\r\n  }\r\n}\r\n\r\nTimer.now = (function () {\r\n  const p = typeof window !== 'undefined' && window.performance;\r\n  return (p && p.now) ? p.now.bind(p) : Date.now;\r\n}());\r\n","import Timer from '../Timer';\r\n\r\nconst { now } = Timer;\r\n\r\nfunction createElement(tag, id, css) {\r\n  const element = document.createElement(tag);\r\n  element.id = id;\r\n  element.style.cssText = css;\r\n  return element;\r\n}\r\n\r\nclass Stats {\r\n  constructor() {\r\n    this.domElement = createElement('div', 'stats', 'padding:8px');\r\n    this._text = createElement('p', 'fps', 'margin:0;color:silver;font-size:large');\r\n    this.domElement.appendChild(this._text);\r\n\r\n    this._startTime = now();\r\n    this._prevTime = this._startTime;\r\n\r\n    this._deltas = new Array(20);\r\n    this._index = 0;\r\n    this._total = 0.0;\r\n    this._count = 0;\r\n  }\r\n\r\n  end() {\r\n    const time = now();\r\n    const delta = time - this._startTime;\r\n\r\n    if (this._count < this._deltas.length) {\r\n      this._count++;\r\n    } else {\r\n      this._total -= this._deltas[this._index];\r\n    }\r\n    this._total += delta;\r\n    this._deltas[this._index] = delta;\r\n    this._index = (this._index + 1) % this._deltas.length;\r\n\r\n    this.ms = this._total / this._count;\r\n    this.fps = 1000 / this.ms;\r\n\r\n    if (time > this._prevTime + 1000) {\r\n      this._text.textContent = this.fps.toPrecision(2);\r\n      this._prevTime = time;\r\n    }\r\n\r\n    return time;\r\n  }\r\n\r\n  update() {\r\n    this._startTime = this.end();\r\n  }\r\n\r\n  show(on) {\r\n    if (on === undefined) {\r\n      on = true;\r\n    }\r\n    this.domElement.style.display = on ? 'block' : 'none';\r\n  }\r\n}\r\n\r\nexport default Stats;\r\n","/**\r\n * This class introduces the simplest event system.\r\n */\r\n\r\nimport _ from 'lodash';\r\n\r\nfunction isUndefOrEqual(param, value) {\r\n  return !param || param === value;\r\n}\r\n\r\n/**\r\n * Creates empty dispatcher.\r\n *\r\n * @exports EventDispatcher\r\n * @constructor\r\n */\r\nfunction EventDispatcher() {\r\n  this._handlers = {};\r\n}\r\n\r\n/**\r\n * Binds callback on specific event type. Optional `context` parameter\r\n * could be used as 'this' for the `callback`.\r\n * @param {string}   type       Event name.\r\n * @param {function} callback   Callback function.\r\n * @param {Object}   [context] 'This' object for the callback.\r\n */\r\nEventDispatcher.prototype.addEventListener = function (type, callback, context) {\r\n  let handlers = this._handlers[type];\r\n\r\n  if (!handlers) {\r\n    this._handlers[type] = [];\r\n    handlers = this._handlers[type];\r\n  }\r\n\r\n  const params = [callback, context];\r\n  function _checkPar(par) {\r\n    return par[0] === params[0] && par[1] === params[1];\r\n  }\r\n\r\n  if (_.find(handlers, _checkPar) === undefined) {\r\n    handlers.push(params);\r\n  }\r\n};\r\n\r\n/**\r\n * Removes a previously-bound callback function from an object.\r\n * If no `context` is specified, all versions of the `callback` with different\r\n * contexts will be removed.\r\n * If no `callback` is specified, all callbacks of the `type` will be removed.\r\n * If no `type` is specified, callbacks for all events will be removed.\r\n * @param {?string}  [type]      Event type.\r\n * @param {function} [callback]  Callback function.\r\n * @param {Object}   [context]  'This' object for the callback.\r\n */\r\nEventDispatcher.prototype.removeEventListener = function (type, callback, context) {\r\n  const self = this;\r\n  _.forEach(self._handlers, (handler, ev) => {\r\n    _.remove(handler, (values) => isUndefOrEqual(type, ev)\r\n          && isUndefOrEqual(callback, values[0])\r\n          && isUndefOrEqual(context, values[1] || self));\r\n  });\r\n\r\n  this._handlers = _.omitBy(self._handlers, (handler) => handler.length === 0);\r\n};\r\n\r\n/**\r\n * Makes all the callbacks for the specific `event` to trigger.\r\n * @param {Object} event      Event.\r\n * @param {string} event.type Type of the event.\r\n */\r\nEventDispatcher.prototype.dispatchEvent = function (event) {\r\n  const self = this;\r\n\r\n  _.forEach(this._handlers[event.type], (callback) => {\r\n    const context = callback[1] || self;\r\n    callback[0].apply(context, [event]);\r\n  });\r\n};\r\n\r\nexport default EventDispatcher;\r\n","/**\r\n * This module contains class for logging.\r\n * Returns an instance of a logger that have already been created.\r\n * Allows users to log messages for five different levels,\r\n * enable console output and catch signal on each message.\r\n */\r\nimport _ from 'lodash';\r\nimport EventDispatcher from './EventDispatcher';\r\n\r\nconst priorities = {\r\n  debug: 0,\r\n  info: 1,\r\n  report: 2,\r\n  warn: 3,\r\n  error: 4,\r\n};\r\n\r\n/**\r\n * Create new Logger.\r\n *\r\n * @exports Logger\r\n * @extends EventDispatcher\r\n * @constructor\r\n */\r\nfunction Logger() {\r\n  EventDispatcher.call(this);\r\n  /** Boolean flag that toggles output to browser console.\r\n   * @type {boolean}\r\n   */\r\n  this.console = false;\r\n  this._priority = priorities.warn;\r\n}\r\n\r\nLogger.prototype = Object.create(EventDispatcher.prototype);\r\nLogger.prototype.constructor = Logger;\r\n\r\n/**\r\n * Create new clean instance of the logger.\r\n * @returns {Logger}\r\n */\r\nLogger.prototype.instantiate = function () {\r\n  return new Logger();\r\n};\r\n\r\nfunction verify(number) {\r\n  if (!_.isNumber(number)) {\r\n    throw new Error('Wrong log level specified!');\r\n  }\r\n  return number;\r\n}\r\n\r\n/**\r\n * @property {string} current threshold for signals and console output.\r\n * @name Logger#level\r\n */\r\nObject.defineProperty(Logger.prototype, 'level', {\r\n  get() {\r\n    return _.findKey(priorities, (value) => value === this._priority);\r\n  },\r\n  set(level) {\r\n    this._priority = verify(priorities[level]);\r\n  },\r\n});\r\n\r\n/**\r\n * Returns the list of all possible level values.\r\n * @returns {Array}\r\n */\r\nLogger.prototype.levels = function () {\r\n  return Object.keys(priorities);\r\n};\r\n\r\n/**\r\n * Add new message with specified level.\r\n * @param {string} level - level of the message, must be one of the\r\n * {'debug' | 'info' | 'report' | 'warn' | 'error'}\r\n * @param {string} message\r\n */\r\nLogger.prototype.message = function (level, message) {\r\n  const priority = verify(priorities[level]);\r\n  this._message(priority, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('debug', ...);\r\n * @param message\r\n */\r\nLogger.prototype.debug = function (message) {\r\n  this._message(priorities.debug, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('info', ...);\r\n * @param message\r\n */\r\nLogger.prototype.info = function (message) {\r\n  this._message(priorities.info, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('report', ...);\r\n * @param message\r\n */\r\nLogger.prototype.report = function (message) {\r\n  this._message(priorities.report, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('warn', ...);\r\n * @param message\r\n */\r\nLogger.prototype.warn = function (message) {\r\n  this._message(priorities.warn, message);\r\n};\r\n\r\n/**\r\n * Shortcut for message('error', ...);\r\n * @param message\r\n */\r\nLogger.prototype.error = function (message) {\r\n  this._message(priorities.error, message);\r\n};\r\n\r\n/**\r\n * Add new message with specified priority.\r\n * @param {number} priority - priority of the message\r\n * @param {string} message\r\n * @private\r\n */\r\nLogger.prototype._message = function (priority, message) {\r\n  if (priority < this._priority) {\r\n    return;\r\n  }\r\n  const level = _.findKey(priorities, (value) => value === priority);\r\n  message = String(message);\r\n  if (this.console) {\r\n    const output = `miew:${level}: ${message}`;\r\n    if (level === 'error') {\r\n      console.error(output); // NOSONAR\r\n    } else if (level === 'warn') {\r\n      console.warn(output); // NOSONAR\r\n    } else {\r\n      console.log(output); // NOSONAR\r\n    }\r\n  }\r\n  this.dispatchEvent({ type: 'message', level, message });\r\n};\r\n\r\nexport default new Logger();\r\n","import _ from 'lodash';\r\nimport logger from './utils/logger';\r\n\r\nconst browserType = {\r\n  DEFAULT: 0,\r\n  SAFARI: 1,\r\n};\r\n//----------------------------------------------------------------------------\r\n// Query string\r\n\r\n/**\r\n * Escape only dangerous chars in a query string component, use a plus instead of a space.\r\n *\r\n * [RFC 3986](https://tools.ietf.org/html/rfc3986) allows the following chars in the query (see 3.4):\r\n *\r\n *       A-Z a-z 0-9 - _ . ~ ! $ & ' ( ) * + , ; = : @ / ?\r\n *\r\n * For query string elements we need to escape ampersand, equal sign, and plus,\r\n * but encodeURIComponent() function encodes anything except for the following:\r\n *\r\n *       A-Z a-z 0-9 - _ . ~ ! ' ( ) *\r\n *\r\n * @param {string} text - key or value to encode\r\n * @param {string} excludeExp - regexp for symbols to exclude from encoding\r\n * @returns {string} encoded string\r\n */\r\nfunction encodeQueryComponent(text, excludeExp) {\r\n  const encode = (code) => String.fromCharCode(parseInt(code.substr(1), 16));\r\n  return encodeURIComponent(text).replace(excludeExp, encode).replace(/%20/g, '+');\r\n}\r\n\r\n/**\r\n * Unescape dangerous chars in a query string component.\r\n *\r\n * @param {string} text - encoded key or value\r\n * @returns {string} decoded string\r\n * @see {@link encodeQueryComponent}\r\n */\r\nfunction decodeQueryComponent(text) {\r\n  return decodeURIComponent(text.replace(/\\+/g, ' '));\r\n}\r\n\r\n/**\r\n * Parse URL and extract an array of parameters.\r\n * @param {string?} url - URL or query string to parse\r\n * @returns {Array} array of (key, value) pairs.\r\n */\r\nfunction getUrlParameters(url) {\r\n  url = url || window.location.search;\r\n\r\n  const query = url.substring(url.indexOf('?') + 1);\r\n  const search = /([^&=]+)=?([^&]*)/g;\r\n  const result = [];\r\n  let match;\r\n\r\n  while ((match = search.exec(query)) !== null) { // eslint-disable-line no-cond-assign\r\n    result.push([decodeQueryComponent(match[1]), decodeQueryComponent(match[2])]);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Parse URL and extract an array of parameters as a hash.\r\n * @param {string?} url - URL or query string to parse\r\n * @returns {Object}\r\n */\r\nfunction getUrlParametersAsDict(url) {\r\n  const result = {};\r\n  const a = getUrlParameters(url);\r\n  for (let i = 0; i < a.length; ++i) {\r\n    const [key, value] = a[i];\r\n    result[key] = value;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction resolveURL(str) {\r\n  if (typeof URL !== 'undefined') {\r\n    try {\r\n      if (typeof window !== 'undefined') {\r\n        return new URL(str, window.location).href;\r\n      }\r\n      return new URL(str).href;\r\n    } catch (error) {\r\n      // IE 11 has a URL object with no constructor available so just try a different approach instead\r\n    }\r\n  }\r\n  if (typeof document !== 'undefined') {\r\n    const anchor = document.createElement('a');\r\n    anchor.href = str;\r\n    return anchor.href;\r\n  }\r\n  return str;\r\n}\r\n\r\n/**\r\n * Generates regular expression object that includes all symbols\r\n * listed in the argument\r\n * @param symbolStr {string} - String containing characters list.\r\n * @returns {RegExp} - Regular expression.\r\n */\r\nfunction generateRegExp(symbolStr) {\r\n  const symbolList = [];\r\n\r\n  for (let i = 0, n = symbolStr.length; i < n; ++i) {\r\n    symbolList[symbolList.length] = symbolStr[i].charCodeAt(0).toString(16);\r\n  }\r\n\r\n  const listStr = symbolList.join('|');\r\n\r\n  return new RegExp(`%(?:${listStr})`, 'gi');\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Create HTML element\r\n\r\nfunction createElement(tag, attrs, content) {\r\n  const element = document.createElement(tag);\r\n  let i;\r\n  let n;\r\n  if (attrs) {\r\n    const keys = Object.keys(attrs);\r\n    for (i = 0, n = keys.length; i < n; ++i) {\r\n      const key = keys[i];\r\n      element.setAttribute(key, attrs[key]);\r\n    }\r\n  }\r\n  if (content) {\r\n    if (!(content instanceof Array)) {\r\n      content = [content];\r\n    }\r\n    for (i = 0, n = content.length; i < n; ++i) {\r\n      const child = content[i];\r\n      if (typeof child === 'string') {\r\n        element.appendChild(document.createTextNode(child));\r\n      } else if (child instanceof HTMLElement) {\r\n        element.appendChild(child);\r\n      }\r\n    }\r\n  }\r\n  return element;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Easy inheritance\r\n\r\n/**\r\n * Derive the class from the base.\r\n * @param cls {function} - Class (constructor) to derive.\r\n * @param base {function} - Class (constructor) to derive from.\r\n * @param members {object=} - Optional instance members to add.\r\n * @param statics {object=} - Optional static class members to add.\r\n * @returns {function} Original class.\r\n */\r\nfunction deriveClass(cls, base, members, statics) {\r\n  cls.prototype = _.assign(Object.create(base.prototype), { constructor: cls }, members);\r\n  if (statics) {\r\n    _.assign(cls, statics);\r\n  }\r\n  return cls;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Deep prototyping\r\n\r\nfunction deriveDeep(obj, needZeroOwnProperties) {\r\n  let res = obj;\r\n  let i;\r\n  let n;\r\n  if (obj instanceof Array) {\r\n    res = new Array(obj.length);\r\n    for (i = 0, n = obj.length; i < n; ++i) {\r\n      res[i] = deriveDeep(obj[i]);\r\n    }\r\n  } else if (obj instanceof Object) {\r\n    res = Object.create(obj);\r\n    const keys = Object.keys(obj);\r\n    for (i = 0, n = keys.length; i < n; ++i) {\r\n      const key = keys[i];\r\n      const value = obj[key];\r\n      const copy = deriveDeep(value);\r\n      if (copy !== value) {\r\n        res[key] = copy;\r\n      }\r\n    }\r\n    if (needZeroOwnProperties && Object.keys(res).length > 0) {\r\n      res = Object.create(res);\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Colors\r\n\r\nfunction hexColor(color) {\r\n  const hex = (`0000000${color.toString(16)}`).substr(-6);\r\n  return `#${hex}`;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Debug tracing\r\n\r\nfunction DebugTracer(namespace) {\r\n  let enabled = false;\r\n\r\n  this.enable = function (on) {\r\n    enabled = on;\r\n  };\r\n\r\n  let indent = 0;\r\n  const methods = Object.keys(namespace);\r\n\r\n  function wrap(method_, name_) {\r\n    return function (...args) {\r\n      const spaces = DebugTracer.spaces.substr(0, indent * 2);\r\n      if (enabled) {\r\n        logger.debug(`${spaces + name_} {`);\r\n      }\r\n      indent++;\r\n      const result = method_.apply(this, args); // eslint-disable-line no-invalid-this\r\n      indent--;\r\n      if (enabled) {\r\n        logger.debug(`${spaces}} // ${name_}`);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  for (let i = 0, n = methods.length; i < n; ++i) {\r\n    const name = methods[i];\r\n    const method = namespace[name];\r\n    if (method instanceof Function && name !== 'constructor') {\r\n      namespace[name] = wrap(method, name);\r\n    }\r\n  }\r\n}\r\n\r\nDebugTracer.spaces = '                                                                                          ';\r\n\r\nclass OutOfMemoryError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'OutOfMemoryError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction allocateTyped(TypedArrayName, size) {\r\n  let result = null;\r\n  try {\r\n    result = new TypedArrayName(size);\r\n  } catch (e) {\r\n    if (e instanceof RangeError) {\r\n      throw new OutOfMemoryError(e.message);\r\n    } else {\r\n      throw e;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Float array conversion\r\n\r\nfunction bytesToBase64(/** ArrayBuffer */ buffer) {\r\n  const bytes = new Uint8Array(buffer);\r\n  let binary = '';\r\n  for (let i = 0; i < bytes.byteLength; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  return window.btoa(binary);\r\n}\r\n\r\nfunction bytesFromBase64(/** string */ str) {\r\n  const binary = window.atob(str);\r\n  const bytes = new Uint8Array(binary.length);\r\n  for (let i = 0; i < bytes.length; ++i) {\r\n    bytes[i] = binary[i].charCodeAt(0);\r\n  }\r\n  return bytes.buffer;\r\n}\r\n\r\nfunction arrayToBase64(/** number[] */ array, /** function */ TypedArrayClass) {\r\n  return bytesToBase64(new TypedArrayClass(array).buffer);\r\n}\r\n\r\nfunction arrayFromBase64(/** string */ str, /** function */ TypedArrayClass) {\r\n  return Array.prototype.slice.call(new TypedArrayClass(bytesFromBase64(str)));\r\n}\r\n\r\n// NOTE: this is 1-level comparison\r\nfunction compareOptionsWithDefaults(opts, defOpts) {\r\n  const optsStr = [];\r\n  if (defOpts && opts) {\r\n    const keys = Object.keys(opts);\r\n    for (let p = 0; p < keys.length; ++p) {\r\n      const key = keys[p];\r\n      const value = opts[key];\r\n      // TODO add processing for tree structure\r\n      if (!(value instanceof Object) && typeof defOpts[key] !== 'undefined' && defOpts[key] !== value) {\r\n        optsStr.push(`${key}:${value}`);\r\n      }\r\n    }\r\n    if (optsStr.length > 0) {\r\n      return `!${optsStr.join()}`;\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction isAlmostPlainObject(o) {\r\n  if (_.isPlainObject(o)) {\r\n    return true;\r\n  }\r\n  const proto = o && Object.getPrototypeOf(o);\r\n  return !!proto && !proto.hasOwnProperty('constructor') && isAlmostPlainObject(proto);\r\n}\r\n\r\n/**\r\n * Build an object that contains properties (and subproperties) of `src` different from those\r\n * in `dst`. Objects are parsed recursively, other values (including arrays) are compared for\r\n * equality using `_.isEqual()`.\r\n * @param {!object} src - a new object to compare, may contain changed or new properties\r\n * @param {!object} dst - an old reference object\r\n */\r\nfunction objectsDiff(src, dst) {\r\n  const diff = {};\r\n  _.forIn(src, (srcValue, key) => {\r\n    const dstValue = dst[key];\r\n    if (isAlmostPlainObject(srcValue) && isAlmostPlainObject(dstValue)) {\r\n      const deepDiff = objectsDiff(srcValue, dstValue);\r\n      if (!_.isEmpty(deepDiff)) {\r\n        diff[key] = deepDiff;\r\n      }\r\n    } else if (!_.isEqual(srcValue, dstValue)) {\r\n      diff[key] = srcValue;\r\n    }\r\n  });\r\n  return diff;\r\n}\r\n\r\nfunction forInRecursive(object, callback) {\r\n  function iterateThrough(obj, prefix) {\r\n    _.forIn(obj, (value, key) => {\r\n      const newPref = prefix + (prefix.length > 0 ? '.' : '');\r\n      if (value instanceof Object) {\r\n        iterateThrough(value, newPref + key);\r\n      } else if (value !== undefined) {\r\n        callback(value, newPref + key);\r\n      }\r\n    });\r\n  }\r\n  iterateThrough(object, '');\r\n}\r\n\r\nfunction enquoteString(value) {\r\n  if (_.isString(value)) {\r\n    return `\"${value.replace(/\"/g, '\\\\\"')}\"`;\r\n  }\r\n  return value;\r\n}\r\n\r\nfunction unquoteString(value) {\r\n  if (!_.isString(value)) {\r\n    return value;\r\n  }\r\n  if (value[0] === '\"' && value[value.length - 1] === '\"') {\r\n    value = value.slice(1, value.length - 1);\r\n    return value.replace(/\\\\\"/g, '\"');\r\n  }\r\n  if (value[0] === \"'\" && value[value.length - 1] === \"'\") {\r\n    value = value.slice(1, value.length - 1);\r\n    return value.replace(/\\\\'/g, \"'\");\r\n  }\r\n  throw new SyntaxError('Incorrect string format, can\\'t unqute it');\r\n}\r\n\r\nfunction getFileExtension(fileName) {\r\n  return fileName.slice((Math.max(0, fileName.lastIndexOf('.')) || Infinity));\r\n}\r\n\r\nfunction splitFileName(fileName) {\r\n  const ext = getFileExtension(fileName);\r\n  const name = fileName.slice(0, fileName.length - ext.length);\r\n  return [name, ext];\r\n}\r\n\r\nfunction dataUrlToBlob(url) {\r\n  const parts = url.split(/[:;,]/);\r\n  const partsCount = parts.length;\r\n  if (partsCount >= 3 && parts[partsCount - 2] === 'base64') {\r\n    return new Blob([bytesFromBase64(parts[partsCount - 1])]);\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction getBrowser() {\r\n  if (navigator.vendor && navigator.vendor.indexOf('Apple') > -1\r\n    && navigator.userAgent\r\n    && navigator.userAgent.indexOf('CriOS') === -1\r\n    && navigator.userAgent.indexOf('FxiOS') === -1) {\r\n    return browserType.SAFARI;\r\n  }\r\n  return browserType.DEFAULT;\r\n}\r\n\r\nfunction shotOpen(url) {\r\n  if (typeof window !== 'undefined') {\r\n    window.open().document.write(`<body style=\"margin:0\"><img src=\"${url}\" /></body>`);\r\n  }\r\n}\r\n\r\nfunction shotDownload(dataUrl, filename) {\r\n  if (!dataUrl || dataUrl.substr(0, 5) !== 'data:') {\r\n    return;\r\n  }\r\n  if (!filename) {\r\n    filename = ['screenshot-', +new Date(), '.png'].join('');\r\n  }\r\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.msSaveBlob) {\r\n    window.navigator.msSaveBlob(dataUrlToBlob(dataUrl), filename);\r\n  } else if (typeof document !== 'undefined') {\r\n    const link = document.createElement('a');\r\n    link.download = filename;\r\n    link.innerHTML = 'download';\r\n    link.href = window.URL.createObjectURL(dataUrlToBlob(dataUrl));\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n  const blobData = new Blob([data]);\r\n\r\n  if (!filename) {\r\n    filename = ['data', +new Date()].join('');\r\n  }\r\n\r\n  if (!type) {\r\n    filename += blobData.type || '.bin';\r\n  } else {\r\n    filename += `.${type}`;\r\n  }\r\n\r\n  if (typeof window !== 'undefined' && window.navigator && window.navigator.msSaveBlob) {\r\n    window.navigator.msSaveBlob(blobData, filename);\r\n  } else if (typeof document !== 'undefined') {\r\n    const link = document.createElement('a');\r\n    link.download = filename;\r\n    link.innerHTML = 'download';\r\n    link.href = window.URL.createObjectURL(blobData);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  }\r\n}\r\n\r\nfunction copySubArrays(src, dst, indices, itemSize) {\r\n  for (let i = 0, n = indices.length; i < n; ++i) {\r\n    for (let j = 0; j < itemSize; ++j) {\r\n      dst[i * itemSize + j] = src[indices[i] * itemSize + j];\r\n    }\r\n  }\r\n}\r\n\r\nfunction shallowCloneNode(node) {\r\n  const newNode = node.cloneNode(true);\r\n  newNode.worldPos = node.worldPos;\r\n  // .style property is readonly, so \"newNode.style = node.style;\" won't work (and we don't need it, right?)\r\n  return newNode;\r\n}\r\n\r\nconst unquotedStringRE = /^[a-zA-Z0-9_]*$/;\r\nconst enquoteHelper = ['\"', '', '\"'];\r\n\r\n// verify and correct if needed selctor identifier\r\nfunction correctSelectorIdentifier(value) {\r\n  if (unquotedStringRE.test(value)) {\r\n    return value;\r\n  }\r\n  // quote incorrect identifier\r\n  enquoteHelper[1] = value;\r\n  return enquoteHelper.join('');\r\n}\r\n\r\n/**\r\n * Concatenates two TypedArray. Doesn't check null refs o type equality\r\n * Attention! It must be use very rarely because requires memory reallocation every time. Use MergeTypedArraysUnsafe to\r\n * unite array of subarrays.\r\n * @param{TypedArray} first  - destination array\r\n * @param{TypedArray} second - source array\r\n * @returns{TypedArray} resulting concatenated array\r\n */\r\nfunction concatTypedArraysUnsafe(first, second) {\r\n  const result = new first.constructor(first.length + second.length);\r\n  result.set(first);\r\n  result.set(second, first.length);\r\n  return result;\r\n}\r\n\r\n/**\r\n * Merges array of TypedArray into TypedArray. Doesn't check null refs o type equality\r\n * @param{array} array  - source array of subarrays\r\n * @returns{TypedArray} resulting merged array\r\n */\r\nfunction mergeTypedArraysUnsafe(array) {\r\n  if (array.length <= 0) {\r\n    return null;\r\n  }\r\n  // count the size\r\n  const size = array.reduce((acc, cur) => acc + cur.length, 0);\r\n  // create combined array\r\n  const result = new array[0].constructor(size);\r\n  for (let i = 0, start = 0; i < array.length; i++) {\r\n    const count = array[i].length;\r\n    result.set(array[i], start);\r\n    start += count;\r\n  }\r\n  return result;\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n// Exports\r\n\r\nexport default {\r\n  browserType,\r\n  encodeQueryComponent,\r\n  decodeQueryComponent,\r\n  getUrlParameters,\r\n  getUrlParametersAsDict,\r\n  resolveURL,\r\n  generateRegExp,\r\n  createElement,\r\n  deriveClass,\r\n  deriveDeep,\r\n  hexColor,\r\n  DebugTracer,\r\n  OutOfMemoryError,\r\n  allocateTyped,\r\n  bytesFromBase64,\r\n  bytesToBase64,\r\n  arrayFromBase64,\r\n  arrayToBase64,\r\n  compareOptionsWithDefaults,\r\n  objectsDiff,\r\n  forInRecursive,\r\n  enquoteString,\r\n  unquoteString,\r\n  getBrowser,\r\n  shotOpen,\r\n  shotDownload,\r\n  copySubArrays,\r\n  shallowCloneNode,\r\n  correctSelectorIdentifier,\r\n  getFileExtension,\r\n  splitFileName,\r\n  download,\r\n  concatTypedArraysUnsafe,\r\n  mergeTypedArraysUnsafe,\r\n};\r\n","import EventDispatcher from './EventDispatcher';\r\n\r\nexport default class JobHandle extends EventDispatcher {\r\n  constructor() {\r\n    super();\r\n    this._shouldCancel = false;\r\n  }\r\n\r\n  cancel() {\r\n    this._shouldCancel = true;\r\n    this.dispatchEvent({ type: 'cancel' });\r\n  }\r\n\r\n  shouldCancel() {\r\n    return this._shouldCancel;\r\n  }\r\n\r\n  // slaves use this to notify master about their events\r\n  // master routes these notifications to a single event slot\r\n  notify(event) {\r\n    this.dispatchEvent({ type: 'notification', slaveEvent: event });\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport utils from './utils';\r\nimport EventDispatcher from './utils/EventDispatcher';\r\n\r\nconst VERSION = 0;\r\n\r\n//----------------------------------------------------------------------------\r\n// DEFAULT SETTINGS\r\n//----------------------------------------------------------------------------\r\n\r\n/**\r\n * Polygonal complexity settings.\r\n *\r\n * @typedef PolyComplexity\r\n * @property {number} poor\r\n * @property {number} low\r\n * @property {number} medium\r\n * @property {number} high\r\n * @property {number} ultra\r\n */\r\n\r\n/**\r\n * @alias SettingsObject\r\n * @namespace\r\n */\r\nconst defaults = {\r\n  /**\r\n   * Default options for all available modes.\r\n   * Use {@link Mode.id} as a dictionary key to access mode options.\r\n   *\r\n   * Usually you don't need to override these settings. You may specify mode options as a parameter during\r\n   * {@link Mode} construction.\r\n   *\r\n   * @memberof SettingsObject#\r\n   * @type {Object.<string, object>}\r\n   *\r\n   * @property {LinesModeOptions} LN - Lines mode options.\r\n   * @property {LicoriceModeOptions} LC - Licorice mode options.\r\n   * @property {BallsAndSticksModeOptions} BS - Balls and Sticks mode options.\r\n   * @property {VanDerWaalsModeOptions} VW - Van der Waals mode options.\r\n   * @property {TraceModeOptions} TR - Trace mode options.\r\n   * @property {TubeModeOptions} TU - Tube mode options.\r\n   * @property {CartoonModeOptions} CA - Cartoon mode options.\r\n   * @property {QuickSurfaceModeOptions} QS - Contact Surface mode options.\r\n   * @property {IsoSurfaceSASModeOptions} SA - Solvent Accessible Surface mode options.\r\n   * @property {IsoSurfaceSESModeOptions} SE - Solvent Excluded Surface mode options.\r\n   * @property {ContactSurfaceModeOptions} CS - Contact Surface mode options.\r\n   * @property {TextModeOptions} TX - Text mode options.\r\n   * @property {VolumeDensityModeOptions} VD - Volume Density mode options.\r\n   */\r\n  modes: {\r\n    //----------------------------------------------------------------------------\r\n    // BALLS AND STICKS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Balls and Sticks mode options.\r\n     *\r\n     * @typedef BallsAndSticksModeOptions\r\n     *\r\n     * @property {number} atom - Sphere radius as a fraction of Van der Waals atom radius.\r\n     * @property {number} bond - Cylinder radius in angstroms.\r\n     * @property {number} space - Fraction of the space around one cylinder. Zero means that cylinder fills all\r\n     *   available space.\r\n     * @property {boolean} multibond - Toggles rendering of multiple ordered bonds.\r\n     * @property {number} aromrad - Minor radius of a torus for aromatic loops.\r\n     * @property {boolean} showarom - Toggles rendering of aromatic loops.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    BS: {\r\n      atom: 0.23,\r\n      bond: 0.15,\r\n      space: 0.5,\r\n      multibond: true,\r\n      aromrad: 0.1,\r\n      showarom: true,\r\n      polyComplexity: {\r\n        poor: 3,\r\n        low: 4,\r\n        medium: 6,\r\n        high: 12,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // VAN DER WAALS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Van der Waals mode options.\r\n     *\r\n     * @typedef VanDerWaalsModeOptions\r\n     *\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    VW: {\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 8,\r\n        high: 16,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // LINES\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Lines mode options.\r\n     *\r\n     * @typedef LinesModeOptions\r\n     *\r\n     * @property {boolean} multibond - Flag, that toggles rendering of multiple ordered bonds.\r\n     * @property {boolean} showarom - Flag, that toggles rendering of aromatic loops.\r\n     * @property {number} offsarom - Offset between bonds and aromatic cycle.\r\n     * @property {number} chunkarom - Number of pieces in a-loop arc, corresponding to atom.\r\n     * @property {number} atom - Collision radius for atoms picking.\r\n     * @property {number} lineWidth - Line width in pixels (not used in thin lines).\r\n     */\r\n    LN: {\r\n      multibond: true,\r\n      showarom: true,\r\n      offsarom: 0.2,\r\n      chunkarom: 10,\r\n      atom: 0.23,\r\n      lineWidth: 2,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // LICORICE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Licorice mode options.\r\n     *\r\n     * @typedef LicoriceModeOptions\r\n     *\r\n     * @property {number} bond - Bond cylinder radius.\r\n     * @property {number} space - Fraction of the space around one cylinder. Zero means that cylinder fills all\r\n     *   available space.\r\n     * @property {boolean} multibond - Flag, that toggles rendering of multiple ordered bonds.\r\n     * @property {number} aromrad - Minor radius of a torus for aromatic loops.\r\n     * @property {boolean} showarom - Flag, that toggles rendering of aromatic loops.\r\n     * @property {PolyComplexity} polyComplexity - Poly complexity values for render modes.\r\n     */\r\n    LC: {\r\n      bond: 0.20,\r\n      space: 0.0,\r\n      multibond: true,\r\n      aromrad: 0.1,\r\n      showarom: true,\r\n      polyComplexity: {\r\n        poor: 3,\r\n        low: 4,\r\n        medium: 6,\r\n        high: 12,\r\n        ultra: 32,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // SURFACE SAS\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Solvent Accessible Surface mode options.\r\n     *\r\n     * @typedef IsoSurfaceSASModeOptions\r\n     *\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {number} probeRadius - Radius of the probe.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    SA: {\r\n      zClip: false,\r\n      probeRadius: 1.5,\r\n      subset: '',\r\n      wireframe: false,\r\n      polyComplexity: {\r\n        poor: 6,\r\n        low: 8,\r\n        medium: 16,\r\n        high: 30,\r\n        ultra: 60,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // SURFACE SES\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Solvent Excluded Surface mode options.\r\n     *\r\n     * @typedef IsoSurfaceSESModeOptions\r\n     *\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {number} probeRadius - Radius of the probe.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    SE: {\r\n      zClip: false,\r\n      probeRadius: 1.5,\r\n      subset: '',\r\n      wireframe: false,\r\n      polyComplexity: {\r\n        poor: 6,\r\n        low: 8,\r\n        medium: 16,\r\n        high: 30,\r\n        ultra: 60,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // QUICK SURFACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Quick Surface mode options.\r\n     *\r\n     * @typedef QuickSurfaceModeOptions\r\n     *\r\n     * @property {number} isoValue - Isovalue of the surface to extract.\r\n     * @property {number} scale - Radius scale for the surface being built.\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} gaussLim - Gauss lim for coloring the bigger the value, the smoother our colors are.\r\n     * @property {PolyComplexity} gridSpacing - Poly complexity values for render modes. In this case the value\r\n     *   corresponds to the grid density.\r\n     */\r\n    QS: {\r\n      isoValue: 0.5,\r\n      gaussLim: {\r\n        poor: 1.5,\r\n        low: 2.0,\r\n        medium: 2.5,\r\n        high: 3.0,\r\n        ultra: 4.0,\r\n      },\r\n      scale: 1.0,\r\n      wireframe: false,\r\n      gridSpacing: {\r\n        poor: 2,\r\n        low: 1.5,\r\n        medium: 1,\r\n        high: 0.5,\r\n        ultra: 0.25,\r\n      },\r\n      subset: '',\r\n      zClip: false,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // CONTACT SURFACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Contact Surface mode options.\r\n     *\r\n     * @typedef ContactSurfaceModeOptions\r\n     *\r\n     * @property {number} isoValue - Isovalue of the surface to extract.\r\n     * @property {number} probeRadius - Probe radius.\r\n     * @property {number} probePositions\r\n     * @property {boolean} zClip - Flag, that toggles z-clipping.\r\n     * @property {string} subset - Only parts of surface close to selected atoms will be visible.\r\n     *   Empty string means whole surface is visible.\r\n     * @property {boolean} wireframe - Flag that specifies whether or not surface rendered in wireframe mode.\r\n     * @property {PolyComplexity} polyComplexity - Radius scale for the surface being built.\r\n     *   Poly complexity values for render modes. In this case the value corresponds to the grid density.\r\n     */\r\n    CS: {\r\n      probeRadius: 1.4,\r\n      isoValue: 1.5,\r\n      wireframe: false,\r\n      probePositions: 30,\r\n      polyComplexity: {\r\n        poor: 0.5,\r\n        low: 1.0,\r\n        medium: 1.5,\r\n        high: 1.75,\r\n        ultra: 2.0,\r\n      },\r\n      subset: '',\r\n      zClip: false,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TRACE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Trace mode options.\r\n     *\r\n     * @typedef TraceModeOptions\r\n     *\r\n     * @property {number} radius - Cylinder radius.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    TR: {\r\n      radius: 0.30,\r\n      polyComplexity: {\r\n        poor: 12,\r\n        low: 16,\r\n        medium: 32,\r\n        high: 64,\r\n        ultra: 64,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TUBE\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Tube mode options.\r\n     *\r\n     * @typedef TubeModeOptions\r\n     *\r\n     * @property {number} radius - Cylinder radius.\r\n     * @property {number} tension - Tension for interpolation.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     * @property {number} heightSegmentsRatio - Poly complexity multiplier for height segments.\r\n     */\r\n    TU: {\r\n      radius: 0.30,\r\n      heightSegmentsRatio: 1.5,\r\n      tension: -0.7,\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 10,\r\n        high: 18,\r\n        ultra: 34,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // CARTOON\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Cartoon mode options.\r\n     *\r\n     * @typedef CartoonModeOptions\r\n     *\r\n     * @property {number} radius - Standard tube radius.\r\n     * @property {number} depth - Height of the secondary structure ribbon.\r\n     * @property {number} tension - Tension for interpolation.\r\n     * @proprety {object} ss - Secondary structure parameters.\r\n     * @proprety {object} ss.helix - Options for helices render.\r\n     * @proprety {number} ss.helix.width - Width of the secondary structure ribbon.\r\n     * @proprety {number} ss.helix.arrow - Secondary structure's arrow width.\r\n     * @proprety {object} ss.strand - Options for strands render.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     * polyComplexity must be even for producing symmetric arrows.\r\n     * @property {number} heightSegmentsRatio - Poly complexity multiplier for height segments.\r\n     */\r\n    CA: {\r\n      radius: 0.30,\r\n      depth: 0.25,\r\n      ss: {\r\n        helix: {\r\n          width: 1.0,\r\n          arrow: 2.0,\r\n        },\r\n        strand: {\r\n          width: 1.0,\r\n          arrow: 2.0,\r\n        },\r\n      },\r\n      heightSegmentsRatio: 1.5,\r\n      tension: -0.7,\r\n      polyComplexity: {\r\n        poor: 4,\r\n        low: 6,\r\n        medium: 10,\r\n        high: 18,\r\n        ultra: 34,\r\n      },\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // TEXT\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Text mode options.\r\n     *\r\n     * @typedef TextModeOptions\r\n     *\r\n     * @property {string} template - Format string for building output text.\r\n     * @property {string} horizontalAlign - Text alignment ('left', 'right', 'center').\r\n     * @property {string} verticalAlign - Vertical text box alignment ('top', 'bottom', 'middle').\r\n     * @property {number} dx - Text offset x in angstroms.\r\n     * @property {number} dy - Text offset y in angstroms.\r\n     * @property {number} dz - Text offset z in angstroms.\r\n     * @property {string} fg - Color rule for foreground.\r\n     * @property {string} bg - Color rule for background.\r\n     * @property {boolean} showBg - Flag, that toggles background rendering.\r\n     *\r\n     */\r\n    TX: {\r\n      template: '{{Chain}}.{{Residue}}{{Sequence}}.{{Name}}',\r\n      horizontalAlign: 'center',\r\n      verticalAlign: 'middle',\r\n      dx: 0,\r\n      dy: 0,\r\n      dz: 1,\r\n      fg: 'none',\r\n      bg: '0x202020',\r\n      showBg: true,\r\n    },\r\n\r\n    //----------------------------------------------------------------------------\r\n    // VOLUME DENSITY\r\n    //----------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Volume density mode options.\r\n     *\r\n     * @typedef VolumeDensityModeOptions\r\n     *\r\n     * @property {number} kSigma - Noise threshold coefficient.\r\n     * @property {boolean} frame - flag, that turns on box frame painting.\r\n     * @property {boolean} isoMode - flag, that turns on IsoSurface mode instead of Volume Rendering.\r\n     * @property {PolyComplexity} polyComplexity - Polygonal complexity settings for different resolutions.\r\n     */\r\n    VD: {\r\n      kSigma: 1.0,\r\n      kSigmaMed: 2.0,\r\n      kSigmaMax: 4.0,\r\n      frame: true,\r\n      isoMode: false,\r\n      polyComplexity: {\r\n        poor: 2,\r\n        low: 3,\r\n        medium: 4,\r\n        high: 8,\r\n        ultra: 10,\r\n      },\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Default options for all available colorers.\r\n   * Use {@link Colorer.id} as a dictionary key to access colorer options.\r\n   *\r\n   * Usually you don't need to override these settings. You may specify colorer options as a parameter during\r\n   * {@link Colorer} construction.\r\n   *\r\n   * Not all colorers have options.\r\n   *\r\n   * @memberof SettingsObject#\r\n   * @type {Object.<string, object>}\r\n   *\r\n   * @property {ElementColorerOptions} EL - Element colorer options.\r\n   * @property {SequenceColorerOptions} SQ - Sequence colorer options.\r\n   * @property {MoleculeColorerOptions} MO - Molecule colorer options.\r\n   * @property {UniformColorerOptions} UN - Uniform colorer options.\r\n   * @property {ConditionalColorerOptions} CO - Conditional colorer options.\r\n   * @property {TemperatureColorerOptions} TM - Temperature colorer options.\r\n   * @property {OccupancyColorerOptions} OC - Occupancy colorer options.\r\n   * @property {HydrophobicityColorerOptions} HY - Hydrophobicity colorer options.\r\n   */\r\n  colorers: {\r\n    /**\r\n     * Element colorer options.\r\n     *\r\n     * @typedef ElementColorerOptions\r\n     *\r\n     * @property {number} carbon - Carbon color or -1 to use default.\r\n     */\r\n    EL: {\r\n      carbon: -1,\r\n    },\r\n\r\n    /**\r\n     * Uniform colorer options.\r\n     *\r\n     * @typedef UniformColorerOptions\r\n     *\r\n     * @property {number} color - Single color to paint with.\r\n     */\r\n    UN: {\r\n      color: 0xFFFFFF,\r\n    },\r\n\r\n    /**\r\n     * Conditional colorer options.\r\n     *\r\n     * @typedef ConditionalColorerOptions\r\n     *\r\n     * @property {string} subset - Selector string.\r\n     * @property {number} color - Color of selected atoms.\r\n     * @property {number} baseColor - Color of other atoms.\r\n     */\r\n    CO: {\r\n      subset: 'charged',\r\n      color: 0xFF0000,\r\n      baseColor: 0xFFFFFF,\r\n    },\r\n\r\n    /**\r\n     * Carbon colorer options.\r\n     *\r\n     * @typedef CarbonColorerOptions\r\n     *\r\n     * @property {number} color - Single color to paint carbons\r\n     * @property {number} factor - Color factor for not carbon atoms.\r\n     */\r\n    CB: {\r\n      color: 0x909090,\r\n      factor: 0.6,\r\n    },\r\n\r\n    /**\r\n     * Sequence colorer options.\r\n     *\r\n     * @typedef SequenceColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    SQ: {\r\n      gradient: 'rainbow',\r\n    },\r\n\r\n    /**\r\n     * Temperature colorer options.\r\n     *\r\n     * @typedef TemperatureColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     * @property {number} min - Minimal temperature.\r\n     * @property {number} max - Maximal temperature.\r\n     */\r\n    TM: {\r\n      gradient: 'temp',\r\n      min: 5,\r\n      max: 40,\r\n    },\r\n\r\n    /**\r\n     * Occupancy colorer options.\r\n     *\r\n     * @typedef OccupancyColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    OC: {\r\n      gradient: 'reds',\r\n    },\r\n\r\n    /**\r\n     * Hydrophobicity colorer options.\r\n     *\r\n     * @typedef HydrophobicityColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    HY: {\r\n      gradient: 'blue-red',\r\n    },\r\n\r\n    /**\r\n     * Molecule colorer options.\r\n     *\r\n     * @typedef MoleculeColorerOptions\r\n     *\r\n     * @property {string} gradient - Name of gradient to use.\r\n     */\r\n    MO: {\r\n      gradient: 'rainbow',\r\n    },\r\n  },\r\n\r\n  /*\r\n   * Use antialiasing in WebGL.\r\n   * @type {boolean}\r\n   */\r\n  antialias: true,\r\n\r\n  /*\r\n   * Camera field of view in degrees.\r\n   * @type {number}\r\n   */\r\n  camFov: 45.0,\r\n\r\n  /*\r\n   * Camera near plane distance.\r\n   * @type {number}\r\n   */\r\n  camNear: 0.5,\r\n\r\n  /*\r\n   * Camera far plane distance.\r\n   * @type {number}\r\n   */\r\n  camFar: 100.0,\r\n\r\n  camDistance: 2.5,\r\n\r\n  radiusToFit: 1.0,\r\n\r\n  /**\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fogNearFactor: 0.5, // [0, 1]\r\n\r\n  /**\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fogFarFactor: 1, // [0, 1]\r\n  fogAlpha: 1.0,\r\n  fogColor: 0x000000,\r\n  fogColorEnable: false,\r\n\r\n  /**\r\n   * Palette used for molecule coloring.\r\n   * @type {string}\r\n   */\r\n  palette: 'JM',\r\n\r\n  /*\r\n   * Geometry resolution.\r\n   * @type {string}\r\n   */\r\n  resolution: 'medium',\r\n\r\n  autoResolution: false/* true */,\r\n\r\n  autoPreset: true,\r\n\r\n  preset: 'default', // TODO: remove 'preset' from settings, implement autodetection\r\n\r\n  presets: {\r\n    // Default\r\n    default: [{\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    empty: [],\r\n\r\n    // Wireframe\r\n    wire: [{\r\n      mode: 'LN',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    // Small molecules\r\n    small: [{\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'all',\r\n      material: 'SF',\r\n    }],\r\n\r\n    // Proteins, nucleic acids etc.\r\n    macro: [{\r\n      mode: 'CA',\r\n      colorer: 'SS',\r\n      selector: 'not hetatm',\r\n      material: 'SF',\r\n    }, {\r\n      mode: 'BS',\r\n      colorer: 'EL',\r\n      selector: 'hetatm and not water',\r\n      material: 'SF',\r\n    }],\r\n  },\r\n\r\n  objects: {\r\n    line: {\r\n      color: 0xFFFFFFFF,\r\n      dashSize: 0.3,\r\n      gapSize: 0.05,\r\n    },\r\n  },\r\n\r\n  //----------------------------------------------------------------------------\r\n\r\n  bg: {\r\n    color: 0x202020,\r\n    transparent: false,\r\n  },\r\n\r\n  draft: {\r\n    clipPlane: false,\r\n    clipPlaneFactor: 0.5,\r\n    clipPlaneSpeed: 0.00003,\r\n  },\r\n\r\n  /*\r\n     * Separate group for plugins.\r\n     * Each plugin handles its field by itself.\r\n     */\r\n  plugins: {\r\n\r\n  },\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  axes: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fog: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fps: true,\r\n\r\n  /**\r\n   * Switch using of z-sprites for sphere and cylinder geometry\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  zSprites: true,\r\n\r\n  isoSurfaceFakeOpacity: true,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  suspendRender: true,\r\n\r\n  nowater: false,\r\n\r\n  /**\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  autobuild: true,\r\n\r\n  /**\r\n   * Anti-aliasing.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  fxaa: true,\r\n  /**\r\n   * Outline depths\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  outline: {\r\n    on: false,\r\n    color: 0x000000,\r\n    threshold: 0.1,\r\n    thickness: 1,\r\n  },\r\n\r\n  /**\r\n   * Ambient Occlusion special effect.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  ao: false,\r\n\r\n  /**\r\n   * Shadows options.\r\n   *\r\n   * @property {boolean} shadowMap - enable/disable.\r\n   * @property {string} basic/percentage-closer filtering/non-uniform randomizing pcf.\r\n   * @property {number} radius for percentage-closer filtering.\r\n   */\r\n  shadow: {\r\n    on: false,\r\n    type: 'random'/* basic, pcf, random */,\r\n    radius: 1.0,\r\n  },\r\n\r\n  /**\r\n   * Auto-rotation with constant speed.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  autoRotation: 0.0,\r\n\r\n  /**\r\n   * Set maximum fps for animation.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  maxfps: 30,\r\n\r\n  /**\r\n   * Set fbx output precision.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  fbxprec: 4,\r\n\r\n  /**\r\n   * Auto-rotation axis.\r\n   *\r\n   * - true:  complex auto-rotation is about vertical axis\r\n   * - false: rotation axis is defined by last user rotation\r\n   *\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  autoRotationAxisFixed: true,\r\n\r\n  /**\r\n   * Enable zooming with mouse wheel or pinch gesture.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  zooming: true,\r\n\r\n  /**\r\n   * Enable picking atoms & residues with left mouse button or touch.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  picking: true,\r\n\r\n  /**\r\n   * Set picking mode ('atom', 'residue', 'chain', 'molecule').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  pick: 'atom',\r\n\r\n  /**\r\n   * Make \"component\" and \"fragment\" editing modes available.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  editing: false,\r\n\r\n  /**\r\n   * Detect aromatic loops.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  aromatic: false,\r\n\r\n  /**\r\n   * Load only one biological unit from all those described in PDB file.\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  singleUnit: true,\r\n\r\n  /**\r\n   * Set stereo mode ('NONE', 'SIMPLE', 'DISTORTED', 'ANAGLYPH', 'WEBVR').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  stereo: 'NONE',\r\n\r\n  /**\r\n   * Enable smooth transition between views\r\n   * @type {boolean}\r\n   * @instance\r\n   */\r\n  interpolateViews: true,\r\n\r\n  /**\r\n   * Set transparency mode ('standard', 'prepass').\r\n   * @type {string}\r\n   * @instance\r\n   */\r\n  transparency: 'prepass',\r\n\r\n  /**\r\n   * Mouse translation speed.\r\n   * @type {number}\r\n   * @instance\r\n   */\r\n  translationSpeed: 2,\r\n\r\n  debug: {\r\n    example: 3.5,\r\n    text: 'hello!',\r\n    good: true,\r\n    ssaoKernelRadius: 0.7,\r\n    ssaoFactor: 0.7,\r\n    stereoBarrel: 0.25,\r\n  },\r\n  use: {\r\n    multiFile: false,\r\n  },\r\n};\r\n\r\n//----------------------------------------------------------------------------\r\n// SETTINGS CLASS\r\n//----------------------------------------------------------------------------\r\n\r\nfunction Settings() {\r\n  EventDispatcher.call(this);\r\n\r\n  this.old = null;\r\n  this.now = {};\r\n  this._changed = {};\r\n\r\n  this.reset();\r\n}\r\n\r\nutils.deriveClass(Settings, EventDispatcher, {\r\n  defaults,\r\n\r\n  set(path, value) {\r\n    if (_.isString(path)) {\r\n      const oldValue = _.get(this.now, path);\r\n      if (oldValue !== value) {\r\n        _.set(this.now, path, value);\r\n        this._notifyChange(path, value);\r\n      }\r\n    } else {\r\n      const diff = utils.objectsDiff(path, this.now);\r\n      if (!_.isEmpty(diff)) {\r\n        _.merge(this.now, diff);\r\n        this._notifyChanges(diff);\r\n      }\r\n    }\r\n  },\r\n\r\n  get(path, defaultValue) {\r\n    return _.get(this.now, path, defaultValue);\r\n  },\r\n\r\n  reset() {\r\n    const diff = utils.objectsDiff(defaults, this.now);\r\n    this.now = _.cloneDeep(defaults);\r\n    this.old = null;\r\n    this._notifyChanges(diff);\r\n    this._changed = {};\r\n  },\r\n\r\n  checkpoint() {\r\n    this.old = _.cloneDeep(this.now);\r\n    this._changed = {};\r\n  },\r\n\r\n  _notifyChange(path, value) {\r\n    this._changed[path] = true;\r\n    this.dispatchEvent({ type: `change:${path}`, value });\r\n  },\r\n\r\n  _notifyChanges(diff) {\r\n    utils.forInRecursive(diff, (deepValue, deepPath) => {\r\n      this._notifyChange(deepPath, deepValue);\r\n    });\r\n  },\r\n\r\n  changed() {\r\n    if (!this.old) {\r\n      return [];\r\n    }\r\n    const { old, now } = this;\r\n    const keys = _.filter(Object.keys(this._changed), (key) => _.get(old, key) !== _.get(now, key));\r\n    return keys;\r\n  },\r\n\r\n  applyDiffs(diffs) {\r\n    if (diffs.hasOwnProperty('VERSION') && diffs.VERSION !== VERSION) {\r\n      throw new Error('Settings version does not match!');\r\n    }\r\n    // VERSION shouldn't be presented inside settings structure\r\n    delete diffs.VERSION;\r\n    this.reset();\r\n    this.set(diffs);\r\n  },\r\n\r\n  getDiffs(versioned) {\r\n    const diffs = utils.objectsDiff(this.now, defaults);\r\n    if (versioned) {\r\n      diffs.VERSION = VERSION;\r\n    }\r\n    return diffs;\r\n  },\r\n\r\n  setPluginOpts(plugin, opts) {\r\n    defaults.plugins[plugin] = _.cloneDeep(opts);\r\n    this.now.plugins[plugin] = _.cloneDeep(opts);\r\n  },\r\n});\r\n\r\nexport default new Settings();\r\n","import _ from 'lodash';\r\nimport settings from './settings';\r\nimport utils from './utils';\r\nimport logger from './utils/logger';\r\n\r\nlet repIndex = 0;\r\n\r\nfunction asBoolean(value) {\r\n  return !(!value || value === '0' || (_.isString(value) && value.toLowerCase() === 'false'));\r\n}\r\n\r\nconst adapters = {\r\n  string: String,\r\n  number: Number,\r\n  boolean: asBoolean,\r\n};\r\n\r\n// Level 1 assignment symbol\r\nconst cL1Ass = '=';\r\n\r\nconst cOptsSep = '!';\r\n// Level 2 (options) assignment symbol\r\nconst cL2Ass = ':';\r\n// Level 2 (options) separator symbol\r\nconst cLSep = ',';\r\n\r\nconst cCommonIgnoreSymbols = '$;@/?';\r\n/**\r\n * We may (and should) leave as is for better readability:\r\n *\r\n *        $ , ; : @ / ?\r\n */\r\n/**\r\n * Generate regular expression for symbols excluded for first level encryption\r\n */\r\nfunction getLevel1ExcludedExpr() {\r\n  const cLevel1Ignores = ':,';\r\n  return utils.generateRegExp(cCommonIgnoreSymbols + cLevel1Ignores);\r\n}\r\n\r\n/**\r\n * Generate regular expression for symbols excluded for first level encryption\r\n * (options, etc, ..)\r\n */\r\nfunction getLevel2ExcludedExpr() {\r\n  const cLevel2Ignores = ' ';\r\n  return utils.generateRegExp(cCommonIgnoreSymbols + cLevel2Ignores);\r\n}\r\n\r\nconst cL1ExclExpr = getLevel1ExcludedExpr();\r\nfunction encodeQueryComponentL1(value) {\r\n  return utils.encodeQueryComponent(value, cL1ExclExpr);\r\n}\r\n\r\nconst cL2ExclExpr = getLevel2ExcludedExpr();\r\nfunction encodeQueryComponentL2(value) {\r\n  return utils.encodeQueryComponent(value, cL2ExclExpr);\r\n}\r\n\r\nfunction ensureRepList(opts) {\r\n  let { reps } = opts;\r\n  if (!reps) {\r\n    const { presets } = settings.now;\r\n    let preset = opts.preset || settings.now.preset;\r\n    reps = presets[preset];\r\n    if (!reps) {\r\n      logger.warn(`Unknown preset \"${preset}\"`);\r\n      [preset] = Object.keys(presets);\r\n      reps = presets[preset]; // fall back to any preset\r\n    }\r\n    opts.preset = preset;\r\n    opts.reps = utils.deriveDeep(reps, true);\r\n  }\r\n}\r\n\r\nfunction ensureRepAssign(opts, prop, value) {\r\n  ensureRepList(opts);\r\n  const rep = opts.reps[repIndex];\r\n  // prop specified twice therefore start new rep by cloning the current\r\n  if (rep.hasOwnProperty(prop)) {\r\n    repIndex = opts.reps.length;\r\n    opts.reps[repIndex] = utils.deriveDeep(rep, true);\r\n  }\r\n  if (value !== undefined) {\r\n    opts.reps[repIndex][prop] = value;\r\n  }\r\n}\r\n\r\nfunction addObject(opts, params, options) {\r\n  if (opts._objects === undefined) {\r\n    opts._objects = [];\r\n  }\r\n\r\n  const [type, newOpts] = options;\r\n  const newObj = {\r\n    type,\r\n    params,\r\n  };\r\n\r\n  if (newOpts !== undefined) {\r\n    newObj.opts = newOpts;\r\n  }\r\n\r\n  opts._objects[opts._objects.length] = newObj;\r\n}\r\n\r\nfunction parseParams(str, params) {\r\n  const sep = str.indexOf(',');\r\n  if (sep >= 0) {\r\n    params.push(str.substr(sep + 1).split(','));\r\n    return str.substr(0, sep);\r\n  }\r\n  // keep this untouched if no params were extracted\r\n  return str;\r\n}\r\n\r\nfunction extractArgs(input, defaultsDict, params) {\r\n  if (input) {\r\n    const bang = input.indexOf(cOptsSep);\r\n    const inputVal = parseParams(input.substr(0, bang >= 0 ? bang : undefined), params);\r\n    if (bang >= 0) {\r\n      const args = input.substr(bang + 1).split(cLSep);\r\n      input = inputVal;\r\n      if (defaultsDict) {\r\n        const defaults = defaultsDict[input];\r\n        const opts = utils.deriveDeep(defaults, true);\r\n        args.forEach((arg) => {\r\n          const pair = arg.split(cL2Ass, 2);\r\n          const key = decodeURIComponent(pair[0]);\r\n          const value = decodeURIComponent(pair[1]);\r\n          const adapter = adapters[typeof _.get(defaults, key)];\r\n          if (adapter) {\r\n            _.set(opts, key, adapter(value));\r\n          } else {\r\n            logger.warn(`Unknown argument \"${key}\" for option \"${input}\"`);\r\n          }\r\n        });\r\n        if (Object.keys(opts).length > 0) {\r\n          input = [input, opts];\r\n        }\r\n      }\r\n    } else {\r\n      input = inputVal;\r\n    }\r\n  }\r\n  return input;\r\n}\r\n\r\nconst actions = {\r\n\r\n  l: 'load',\r\n  load: String,\r\n  t: 'type',\r\n  type: String,\r\n  v: 'view',\r\n  view: String,\r\n  u: 'unit',\r\n  unit: Number,\r\n  menu: asBoolean,\r\n\r\n  // Commands\r\n\r\n  o: 'object',\r\n  object(value, opts) {\r\n    const params = [];\r\n    let options = extractArgs(value, settings.defaults.objects, params);\r\n    if (!Array.isArray(options)) {\r\n      options = [options];\r\n    }\r\n    addObject(opts, params[0], options);\r\n  },\r\n\r\n  p: 'preset',\r\n  preset(value, opts) {\r\n    opts.preset = value;\r\n    opts.reps = null;\r\n    ensureRepList(opts);\r\n  },\r\n\r\n  r: 'rep',\r\n  rep(value, opts) {\r\n    ensureRepList(opts);\r\n    repIndex = Number(value);\r\n    // clamp the index to one greater than the last\r\n    repIndex = repIndex <= opts.reps.length ? (repIndex < 0 ? 0 : repIndex) : opts.reps.length;\r\n    // create a new rep if it is adjacent to the existing ones\r\n    if (repIndex === opts.reps.length) {\r\n      // if there is no rep to derive from, derive from the first rep of the default\r\n      opts.reps[repIndex] = repIndex > 0 ? utils.deriveDeep(opts.reps[repIndex - 1], true)\r\n        : utils.deriveDeep(settings.defaults.presets.default[0], true);\r\n    }\r\n  },\r\n\r\n  s: 'select',\r\n  select(value, opts) {\r\n    ensureRepAssign(opts, 'selector', value);\r\n  },\r\n\r\n  m: 'mode',\r\n  mode(value, opts) {\r\n    ensureRepAssign(opts, 'mode', extractArgs(value, settings.defaults.modes));\r\n  },\r\n\r\n  c: 'color',\r\n  color(value, opts) {\r\n    ensureRepAssign(opts, 'colorer', extractArgs(value, settings.defaults.colorers));\r\n  },\r\n\r\n  mt: 'material',\r\n  material(value, opts) {\r\n    ensureRepAssign(opts, 'material', extractArgs(value, settings.defaults.materials));\r\n  },\r\n\r\n  dup(value, opts) {\r\n    ensureRepList(opts);\r\n    const { reps } = opts;\r\n    const rep = reps[repIndex];\r\n    repIndex = reps.length;\r\n    reps[repIndex] = utils.deriveDeep(rep, true);\r\n  },\r\n\r\n  // Settings shortcuts\r\n\r\n  ar: 'autoResolution',\r\n};\r\n\r\nfunction _fromArray(entries) {\r\n  repIndex = 0;\r\n\r\n  const opts = {};\r\n  for (let i = 0, n = entries.length; i < n; ++i) {\r\n    const /** string[] */ entry = entries[i];\r\n    let /** string? */ key = entry[0];\r\n    const /** string? */ value = entry[1];\r\n    let /** function|string? */ action = actions[key];\r\n\r\n    // unwind shortcuts and aliases\r\n    while (_.isString(action)) {\r\n      key = action;\r\n      action = actions[key];\r\n    }\r\n\r\n    // either set a property or use specialized parser\r\n    if (!action) {\r\n      const adapter = adapters[typeof _.get(settings.defaults, key)];\r\n      if (adapter) {\r\n        _.set(opts, `settings.${key}`, adapter(value));\r\n      } else {\r\n        logger.warn(`Unknown option \"${key}\"`);\r\n      }\r\n    } else if (_.isFunction(action)) {\r\n      const result = action(value, opts);\r\n      if (result !== undefined) {\r\n        opts[key] = result;\r\n      }\r\n    }\r\n  }\r\n\r\n  return opts;\r\n}\r\n\r\nfunction fromAttr(attr) {\r\n  return _fromArray(utils.getUrlParameters(`?${attr || ''}`));\r\n}\r\n\r\nfunction fromURL(url) {\r\n  return _fromArray(utils.getUrlParameters(url));\r\n}\r\n\r\nfunction _processOptsForURL(opts) {\r\n  const str = [];\r\n  let i = 0;\r\n  utils.forInRecursive(opts, (value, key) => {\r\n    str[i++] = encodeQueryComponentL2(key) + cL2Ass + encodeQueryComponentL2(value);\r\n  });\r\n  return str.join(cLSep);\r\n}\r\n\r\nfunction _processArgsForURL(args) {\r\n  if (!_.isArray(args)) {\r\n    return args;\r\n  }\r\n  if (args.length < 2) {\r\n    return args[0];\r\n  }\r\n  return `${args[0]}${cOptsSep}${_processOptsForURL(args[1])}`;\r\n}\r\n\r\nfunction _processObjForURL(objOpts) {\r\n  if (!objOpts || !objOpts.type) {\r\n    return undefined;\r\n  }\r\n  let res = objOpts.type;\r\n  if (_.isArray(objOpts.params) && objOpts.params.length > 0) {\r\n    res += `,${objOpts.params.join(',')}`;\r\n  }\r\n  if (objOpts.opts) {\r\n    res += cOptsSep + _processOptsForURL(objOpts.opts);\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction toURL(opts) {\r\n  const stringList = [];\r\n  let idx = 0;\r\n\r\n  function checkAndAdd(prefix, value) {\r\n    if (value !== null && value !== undefined) {\r\n      stringList[idx++] = encodeQueryComponentL1(prefix)\r\n                            + cL1Ass + encodeQueryComponentL1(value);\r\n    }\r\n  }\r\n\r\n  function addReps(repList) {\r\n    if (!repList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = repList.length; i < n; ++i) {\r\n      if (_.isEmpty(repList[i])) {\r\n        continue;\r\n      }\r\n      checkAndAdd('r', i);\r\n      checkAndAdd('s', repList[i].selector);\r\n      checkAndAdd('m', _processArgsForURL(repList[i].mode));\r\n      checkAndAdd('c', _processArgsForURL(repList[i].colorer));\r\n      checkAndAdd('mt', _processArgsForURL(repList[i].material));\r\n    }\r\n  }\r\n\r\n  function addObjects(objList) {\r\n    if (!objList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = objList.length; i < n; ++i) {\r\n      checkAndAdd('o', _processObjForURL(objList[i]));\r\n    }\r\n  }\r\n\r\n  checkAndAdd('l', opts.load);\r\n  checkAndAdd('u', opts.unit);\r\n  checkAndAdd('p', opts.preset);\r\n  addReps(opts.reps);\r\n  addObjects(opts._objects);\r\n\r\n  checkAndAdd('v', opts.view);\r\n\r\n  utils.forInRecursive(opts.settings, (value, key) => {\r\n    // I heard these lines in the whispers of the Gods\r\n    // Handle preset setting in reps\r\n    if (key === 'preset') {\r\n      return;\r\n    }\r\n    checkAndAdd(key, value);\r\n  });\r\n\r\n  let url = '';\r\n  if (typeof window !== 'undefined') {\r\n    const { location } = window;\r\n    url = `${location.protocol}//${location.host}${location.pathname}`;\r\n  }\r\n  if (stringList.length > 0) {\r\n    url += `?${stringList.join('&')}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\nfunction _processOptsForScript(opts) {\r\n  const str = [];\r\n  let i = 0;\r\n  utils.forInRecursive(opts, (value, key) => {\r\n    str[i++] = `${key}=${utils.enquoteString(value)}`;\r\n  });\r\n  return str.join(' ');\r\n}\r\n\r\nfunction _processArgsForScript(args) {\r\n  if (!_.isArray(args)) {\r\n    return args;\r\n  }\r\n  if (args.length < 2) {\r\n    return args[0];\r\n  }\r\n  return `${args[0]} ${_processOptsForScript(args[1])}`;\r\n}\r\n\r\nfunction _processObjForScript(objOpts) {\r\n  if (!objOpts || !objOpts.type) {\r\n    return undefined;\r\n  }\r\n  let res = objOpts.type;\r\n  if (_.isArray(objOpts.params) && objOpts.params.length > 0) {\r\n    res += ` ${objOpts.params.map(utils.enquoteString).join(' ')}`;\r\n  }\r\n  if (objOpts.opts) {\r\n    res += ` ${_processOptsForScript(objOpts.opts)}`;\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction _processRepsForScript(rep, index) {\r\n  const repString = [];\r\n  let strIdx = 0;\r\n  function localAdd(prefix, value) {\r\n    if (value !== null && value !== undefined) {\r\n      repString[strIdx++] = prefix + value;\r\n    }\r\n  }\r\n  if (_.isEmpty(rep)) {\r\n    return null;\r\n  }\r\n  localAdd('', index);\r\n  localAdd('s=', utils.enquoteString(rep.selector));\r\n  localAdd('m=', _processArgsForScript(rep.mode));\r\n  localAdd('c=', _processArgsForScript(rep.colorer));\r\n  localAdd('mt=', _processArgsForScript(rep.material));\r\n  return repString.join(' ');\r\n}\r\n\r\nfunction toScript(opts) {\r\n  const commandsList = [];\r\n  let idx = 0;\r\n  function checkAndAdd(command, value, saveQuotes) {\r\n    if (value !== null && value !== undefined) {\r\n      const quote = (typeof value === 'string' && saveQuotes) ? '\"' : '';\r\n      commandsList[idx++] = `${command} ${quote}${value}${quote}`.trim();\r\n    }\r\n  }\r\n\r\n  function addReps(repList) {\r\n    if (!repList) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0, n = repList.length; i < n; ++i) {\r\n      checkAndAdd('rep', _processRepsForScript(repList[i], i));\r\n    }\r\n  }\r\n\r\n  function addObjects(objList) {\r\n    if (!objList) {\r\n      return;\r\n    }\r\n    for (let i = 0, n = objList.length; i < n; ++i) {\r\n      checkAndAdd('', _processObjForScript(objList[i]));\r\n    }\r\n  }\r\n\r\n  checkAndAdd('set', 'autobuild false');\r\n  checkAndAdd('load', opts.load, true);\r\n  checkAndAdd('unit', opts.unit);\r\n  checkAndAdd('preset', opts.preset);\r\n  addReps(opts.reps);\r\n  addObjects(opts._objects);\r\n\r\n  utils.forInRecursive(opts.settings, (value, key) => {\r\n    // I heard these lines in the whispers of the Gods\r\n    // Handle preset setting in reps\r\n    if (key === 'preset') {\r\n      return;\r\n    }\r\n    checkAndAdd(`set ${key}`, value, true);\r\n  });\r\n  checkAndAdd('view', opts.view);\r\n  checkAndAdd('set', 'autobuild true');\r\n  return commandsList.join('\\n');\r\n}\r\n\r\nexport default {\r\n  fromURL,\r\n  fromAttr,\r\n  adapters,\r\n  toURL,\r\n  toScript,\r\n};\r\n","/**\r\n * Atom measurements.\r\n *\r\n * @param {Residue} residue    - (required) Residue containing the atom\r\n * @param {string} name        - (required) Name, unique in the residue\r\n * @param {Element} type       - (required) Chemical element reference\r\n * @param {THREE.Vector3} position - Registered coordinates\r\n *\r\n * @param {number} role        - Role of atom inside monomer: Lead and wing are particularity interesting\r\n * @param {boolean} het        - Non-standard residue indicator\r\n *\r\n * @param {number} serial      - Serial number, unique in the model\r\n * @param {string} location    - Alternative location indicator (usually space or A-Z)\r\n * @param {number} occupancy   - Occupancy percentage, from 0 to 1\r\n * @param {number} temperature - Temperature\r\n * @param {number} charge      - Charge\r\n *\r\n * @exports Atom\r\n * @constructor\r\n */\r\n\r\nclass Atom {\r\n  constructor(residue, name, type, position, role, het, serial, location, occupancy, temperature, charge) {\r\n    this.index = -1;\r\n    this.residue = residue;\r\n    this.name = name;\r\n    this.element = type;\r\n    this.position = position;\r\n    this.role = role;\r\n    this.mask = 1 | 0;\r\n\r\n    this.het = het;\r\n\r\n    this.serial = serial;\r\n    this.location = (location || ' ').charCodeAt(0);\r\n    this.occupancy = occupancy || 1;\r\n    this.temperature = temperature;\r\n    this.charge = charge;\r\n    this.hydrogenCount = -1; // explicitly invalid\r\n    this.radicalCount = 0;\r\n    this.valence = -1; // explicitly invalid\r\n\r\n    this.bonds = [];\r\n\r\n    this.flags = 0x0000;\r\n    if (type.name === 'H') {\r\n      this.flags |= Atom.Flags.HYDROGEN;\r\n    } else if (type.name === 'C') {\r\n      this.flags |= Atom.Flags.CARBON;\r\n    }\r\n  }\r\n\r\n  isHet() {\r\n    return this.het;\r\n  }\r\n\r\n  isHydrogen() {\r\n    return this.element.number === 1;\r\n  }\r\n\r\n  getVisualName() {\r\n    const { name } = this;\r\n    if (name.length > 0) {\r\n      return name;\r\n    }\r\n    return this.element.name.trim();\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const { bonds } = this;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]);\r\n    }\r\n  }\r\n\r\n  getFullName() {\r\n    let name = '';\r\n    if (this.residue !== null) {\r\n      if (this.residue._chain !== null) {\r\n        name += `${this.residue._chain.getName()}.`;\r\n      }\r\n      name += `${this.residue._sequence}.`;\r\n    }\r\n    name += this.name;\r\n    return name;\r\n  }\r\n\r\n  /**\r\n   * Enumeration of atom flag values.\r\n   *\r\n   * @enum {number}\r\n   * @readonly\r\n   */\r\n  static Flags = {\r\n    CARBON: 0x0001,\r\n    // OXYGEN: 0x0002,\r\n    // NITROGEN: 0x0004,\r\n    HYDROGEN: 0x0008,\r\n    /** Non-polar hydrogen (it is also a HYDROGEN) */\r\n    NONPOLARH: 0x1008,\r\n  };\r\n}\r\n\r\nexport default Atom;\r\n","class Element {\r\n  constructor(number, name, fullName, weight, radius, radiusBonding, hValency) {\r\n    this.number = number;\r\n    this.name = name;\r\n    this.fullName = fullName;\r\n    this.weight = weight;\r\n    this.radius = radius;\r\n    this.radiusBonding = radiusBonding;\r\n    this.hydrogenValency = hValency;\r\n  }\r\n\r\n  static Constants = {\r\n    /* eslint-disable no-magic-numbers */\r\n    U1: 1,\r\n    Lead: 2,\r\n    U2: 3,\r\n    Wing: 4,\r\n    U18: 18,\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  static Role = {\r\n    /* eslint-disable no-magic-numbers */\r\n    N: Element.Constants.U1,\r\n    CA: Element.Constants.Lead,\r\n    C: Element.Constants.U2,\r\n    O: Element.Constants.Wing,\r\n    SG: Element.Constants.U18,\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\n  static ByAtomicNumber = [\r\n    /* eslint-disable no-magic-numbers */\r\n    null,\r\n    new Element(1, 'H', 'Hydrogen', 1.008, 1.2, 0.23, [1]),\r\n    new Element(2, 'HE', 'Helium', 4.003, 1.4, 0.93, [0]),\r\n    new Element(3, 'LI', 'Lithium', 6.941, 1.82, 0.68, [1]),\r\n    new Element(4, 'BE', 'Beryllium', 9.012, 1.7, 0.35, [2]),\r\n    new Element(5, 'B', 'Boron', 10.81, 2.08, 0.83, [3]),\r\n    new Element(6, 'C', 'Carbon', 12.011, 1.95, 0.68, [4]),\r\n    new Element(7, 'N', 'Nitrogen', 14.007, 1.85, 0.68, [3, 5]),\r\n    new Element(8, 'O', 'Oxygen', 15.999, 1.7, 0.68, [2, 4]),\r\n    new Element(9, 'F', 'Fluorine', 18.998, 1.73, 0.64, [1]),\r\n    new Element(10, 'NE', 'Neon', 20.18, 1.54, 1.12, [0]),\r\n    new Element(11, 'NA', 'Sodium', 22.99, 2.27, 0.97, [1]),\r\n    new Element(12, 'MG', 'Magnesium', 24.305, 1.73, 1.1, [2]),\r\n    new Element(13, 'AL', 'Aluminum', 26.981, 2.05, 1.35, [3]),\r\n    new Element(14, 'SI', 'Silicon', 28.086, 2.1, 1.2, [4]),\r\n    new Element(15, 'P', 'Phosphorus', 30.974, 2.08, 0.75, [3, 5]),\r\n    new Element(16, 'S', 'Sulfur', 32.07, 2, 1.02, [2, 4, 6]),\r\n    new Element(17, 'CL', 'Chlorine', 35.453, 1.97, 0.99, [1, 3, 5, 7]),\r\n    new Element(18, 'AR', 'Argon', 39.948, 1.88, 1.57, [0]),\r\n    new Element(19, 'K', 'Potassium', 39.1, 2.75, 1.33, [1]),\r\n    new Element(20, 'CA', 'Calcium', 40.08, 1.973, 0.99, [2]),\r\n    new Element(21, 'SC', 'Scandium', 44.956, 1.7, 1.44, [0]),\r\n    new Element(22, 'TI', 'Titanium', 47.88, 1.7, 1.47, [0]),\r\n    new Element(23, 'V', 'Vanadium', 50.941, 1.7, 1.33, [0]),\r\n    new Element(24, 'CR', 'Chromium', 52, 1.7, 1.35, [0]),\r\n    new Element(25, 'MN', 'Manganese', 54.938, 1.7, 1.35, [0]),\r\n    new Element(26, 'FE', 'Iron', 55.847, 1.7, 1.34, [0]),\r\n    new Element(27, 'CO', 'Cobalt', 58.93, 1.7, 1.33, [0]),\r\n    new Element(28, 'NI', 'Nickel', 58.69, 1.63, 1.5, [0]),\r\n    new Element(29, 'CU', 'Copper', 63.55, 1.4, 1.52, [0]),\r\n    new Element(30, 'ZN', 'Zinc', 65.39, 1.39, 1.45, [0]),\r\n    new Element(31, 'GA', 'Gallium', 69.72, 1.87, 1.22, [3]),\r\n    new Element(32, 'GE', 'Germanium', 72.61, 1.7, 1.17, [4]),\r\n    new Element(33, 'AS', 'Arsenic', 74.92, 1.85, 1.21, [3, 5]),\r\n    new Element(34, 'SE', 'Selenium', 78.96, 1.9, 1.22, [2, 4, 6]),\r\n    new Element(35, 'BR', 'Bromine', 79.9, 2.1, 1.21, [1, 3, 5, 7]),\r\n    new Element(36, 'KR', 'Krypton', 83.8, 2.02, 1.91, [0]),\r\n    new Element(37, 'RB', 'Rubidium', 85.47, 1.7, 1.47, [1]),\r\n    new Element(38, 'SR', 'Strontium', 87.62, 1.7, 1.12, [2]),\r\n    new Element(39, 'Y', 'Yttrium', 88.91, 1.7, 1.78, [0]),\r\n    new Element(40, 'ZR', 'Zirconium', 91.22, 1.7, 1.56, [0]),\r\n    new Element(41, 'NB', 'Niobium', 92.91, 1.7, 1.48, [0]),\r\n    new Element(42, 'MO', 'Molybdenum', 95.94, 1.7, 1.47, [0]),\r\n    new Element(43, 'TC', 'Technetium', 98.91, 1.7, 1.35, [0]),\r\n    new Element(44, 'RU', 'Ruthenium', 101.07, 1.7, 1.4, [0]),\r\n    new Element(45, 'RH', 'Rhodium', 102.91, 1.7, 1.45, [0]),\r\n    new Element(46, 'PD', 'Palladium', 106.42, 1.63, 1.5, [0]),\r\n    new Element(47, 'AG', 'Silver', 107.87, 1.72, 1.59, [0]),\r\n    new Element(48, 'CD', 'Cadmium', 112.41, 1.58, 1.69, [0]),\r\n    new Element(49, 'IN', 'Indium', 114.82, 1.93, 1.63, [3]),\r\n    new Element(50, 'SN', 'Tin', 118.71, 2.17, 1.46, [2, 4]),\r\n    new Element(51, 'SB', 'Antimony', 121.75, 2.2, 1.46, [3, 5]),\r\n    new Element(52, 'TE', 'Tellurium', 127.6, 2.06, 1.47, [2, 4, 6]),\r\n    new Element(53, 'I', 'Iodine', 126.91, 2.15, 1.4, [1, 3, 5, 7]),\r\n    new Element(54, 'XE', 'Xenon', 131.29, 2.16, 1.98, [0]),\r\n    new Element(55, 'CS', 'Cesium', 132.91, 1.7, 1.67, [1]),\r\n    new Element(56, 'BA', 'Barium', 137.33, 1.7, 1.34, [2]),\r\n    new Element(57, 'LA', 'Lanthanum', 138.91, 1.7, 1.87, [0]),\r\n    new Element(58, 'CE', 'Cerium', 140.12, 1.7, 1.83, [0]),\r\n    new Element(59, 'PR', 'Praseodymium', 140.91, 1.7, 1.82, [0]),\r\n    new Element(60, 'ND', 'Neodymium', 144.24, 1.7, 1.81, [0]),\r\n    new Element(61, 'PM', 'Promethium', 144.9, 1.7, 1.8, [0]),\r\n    new Element(62, 'SM', 'Samarium', 150.36, 1.7, 1.8, [0]),\r\n    new Element(63, 'EU', 'Europium', 151.96, 1.7, 1.99, [0]),\r\n    new Element(64, 'GD', 'Gadolinium', 157.25, 1.7, 1.79, [0]),\r\n    new Element(65, 'TB', 'Terbium', 158.93, 1.7, 1.76, [0]),\r\n    new Element(66, 'DY', 'Dysprosium', 162.5, 1.7, 1.75, [0]),\r\n    new Element(67, 'HO', 'Holmium', 164.93, 1.7, 1.74, [0]),\r\n    new Element(68, 'ER', 'Erbium', 167.26, 1.7, 1.73, [0]),\r\n    new Element(69, 'TM', 'Thulium', 168.93, 1.7, 1.72, [0]),\r\n    new Element(70, 'YB', 'Ytterbium', 173.04, 1.7, 1.94, [0]),\r\n    new Element(71, 'LU', 'Lutetium', 174.97, 1.7, 1.72, [0]),\r\n    new Element(72, 'HF', 'Hafnium', 178.49, 1.7, 1.57, [0]),\r\n    new Element(73, 'TA', 'Tantalum', 180.95, 1.7, 1.43, [0]),\r\n    new Element(74, 'W', 'Tungsten', 183.85, 1.7, 1.37, [0]),\r\n    new Element(75, 'RE', 'Rhenium', 186.21, 1.7, 1.35, [0]),\r\n    new Element(76, 'OS', 'Osmium', 190.2, 1.7, 1.37, [0]),\r\n    new Element(77, 'IR', 'Iridium', 192.22, 1.7, 1.32, [0]),\r\n    new Element(78, 'PT', 'Platinum', 195.08, 1.72, 1.5, [0]),\r\n    new Element(79, 'AU', 'Gold', 196.97, 1.66, 1.5, [0]),\r\n    new Element(80, 'HG', 'Mercury', 200.59, 1.55, 1.7, [0]),\r\n    new Element(81, 'TL', 'Thallium', 204.38, 1.96, 1.55, [1, 3]),\r\n    new Element(82, 'PB', 'Lead', 207.2, 2.02, 1.54, [2, 4]),\r\n    new Element(83, 'BI', 'Bismuth', 208.98, 1.7, 1.54, [3, 5]),\r\n    new Element(84, 'PO', 'Polonium', 210, 1.7, 1.68, [2, 4, 6]),\r\n    new Element(85, 'AT', 'Astatine', 210, 1.7, 1.7, [1, 3, 5, 7]),\r\n    new Element(86, 'RN', 'Radon', 222, 1.7, 2.4, [0]),\r\n    new Element(87, 'FR', 'Francium', 223, 1.7, 2, [1]),\r\n    new Element(88, 'RA', 'Radium', 226.03, 1.7, 1.9, [2]),\r\n    new Element(89, 'AC', 'Actinium', 227.03, 1.7, 1.88, [0]),\r\n    new Element(90, 'TH', 'Thorium', 232.04, 1.7, 1.79, [0]),\r\n    new Element(91, 'PA', 'Protactinium', 231.04, 1.7, 1.61, [0]),\r\n    new Element(92, 'U', 'Uranium', 238.03, 1.86, 1.58, [0]),\r\n    new Element(93, 'NP', 'Neptunium', 237.05, 1.7, 1.55, [0]),\r\n    new Element(94, 'PU', 'Plutonium', 239.1, 1.7, 1.53, [0]),\r\n    new Element(95, 'AM', 'Americium', 243.1, 1.7, 1.51, [0]),\r\n    new Element(96, 'CM', 'Curium', 247.1, 1.7, 1.5, [0]),\r\n    new Element(97, 'BK', 'Berkelium', 247.1, 1.7, 1.5, [0]),\r\n    new Element(98, 'CF', 'Californium', 252.1, 1.7, 1.5, [0]),\r\n    new Element(99, 'ES', 'Einsteinium', 252.1, 1.7, 1.5, [0]),\r\n    new Element(100, 'FM', 'Fermium', 257.1, 1.7, 1.5, [0]),\r\n    new Element(101, 'MD', 'Mendelevium', 256.1, 1.7, 1.5, [0]),\r\n    new Element(102, 'NO', 'Nobelium', 259.1, 1.7, 1.5, [0]),\r\n    new Element(103, 'LR', 'Lawrencium', 260.1, 1.7, 1.5, [0]),\r\n    new Element(104, 'RF', 'Rutherfordium', 261, 1.7, 1.6, [0]),\r\n    new Element(105, 'DB', 'Dubnium', 262, 1.7, 1.6, [0]),\r\n    new Element(106, 'SG', 'Seaborgium', 263, 1.7, 1.6, [0]),\r\n    new Element(107, 'BH', 'Bohrium', 262, 1.7, 1.6, [0]),\r\n    new Element(108, 'HS', 'Hassium', 265, 1.7, 1.6, [0]),\r\n    new Element(109, 'MT', 'Meitnerium', 268, 1.7, 1.6, [0]),\r\n    /* eslint-enable no-magic-numbers */\r\n  ];\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\n  static ByName = {\r\n    // Duplicate atomic numbers (isotopes)\r\n    /* eslint-disable no-magic-numbers */\r\n    D: new Element(1, 'D', 'Deuterium', 2.014, 1.2, 0.23, [1]),\r\n    T: new Element(1, 'T', 'Tritium', 3.016, 1.2, 0.23, [1]),\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // All regular elements will be added later, automatically\r\n  };\r\n}\r\n\r\n(function () {\r\n  const byAtomicNumber = Element.ByAtomicNumber;\r\n  const byName = Element.ByName;\r\n  for (let i = 0, n = byAtomicNumber.length; i < n; ++i) {\r\n    const element = byAtomicNumber[i];\r\n    if (element) {\r\n      byName[element.name] = element;\r\n    }\r\n  }\r\n}());\r\n\r\n// find atom type by chemical element (or create if missing)\r\nElement.getByName = function (element) {\r\n  let type = Element.ByName[element];\r\n  if (!type) {\r\n    type = Element.ByName[element] = new Element(0, element, 'Unknown', 0, 1.0, 0.01, [0]);\r\n  }\r\n  return type;\r\n};\r\n\r\nexport default Element;\r\n","const cBondTypes = {\r\n  /** Was generated manually */\r\n  UNKNOWN: 0,\r\n  /** Simple covalent bond */\r\n  COVALENT: 1,\r\n  /** Aromatic bond */\r\n  AROMATIC: 2,\r\n};\r\n\r\nfunction getAtomPos(atom) {\r\n  return atom.position;\r\n}\r\n\r\n/**\r\n * Bond between atoms.\r\n *\r\n * @param {Atom} left     - The first atom.\r\n * @param {Atom} right    - The second atom.\r\n * @param {number} order - Order of current bond.\r\n * @param {number} type - Bond type.\r\n * @param {boolean} fixed - Indicator of a pre-specified connection (in contrast with guessed one).\r\n *\r\n * @exports Bond\r\n * @constructor\r\n */\r\nclass Bond {\r\n  constructor(left, right, order, type, fixed) {\r\n    this._left = left;\r\n    this._right = right;\r\n    this._fixed = fixed;\r\n    this._index = -1;\r\n    if (left > right) {\r\n      throw new Error('In a bond atom indices must be in increasing order');\r\n    }\r\n    this._order = order;\r\n    this._type = type;\r\n  }\r\n\r\n  getLeft() {\r\n    return this._left;\r\n  }\r\n\r\n  getRight() {\r\n    return this._right;\r\n  }\r\n\r\n  getOrder() {\r\n    return this._order;\r\n  }\r\n\r\n  calcLength() {\r\n    return this._left.position.distanceTo(this._right.position);\r\n  }\r\n\r\n  _forEachNeighbour(currAtom, process) {\r\n    const { bonds } = currAtom;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]._left !== currAtom ? bonds[i]._left : bonds[i]._right);\r\n    }\r\n  }\r\n\r\n  forEachLevelOne(process) {\r\n    const left = this._left;\r\n    const right = this._right;\r\n    this._forEachNeighbour(left, (atom) => {\r\n      if (atom === right) {\r\n        return;\r\n      }\r\n      process(atom);\r\n    });\r\n    this._forEachNeighbour(right, (atom) => {\r\n      if (atom === left) {\r\n        return;\r\n      }\r\n      process(atom);\r\n    });\r\n  }\r\n\r\n  forEachLevelTwo(process) {\r\n    // TODO refactor this piece of an art?\r\n    const left = this._left;\r\n    const right = this._right;\r\n    const self = this;\r\n    self._forEachNeighbour(left, (atom) => {\r\n      if (atom === right) {\r\n        return;\r\n      }\r\n      self._forEachNeighbour(atom, (l2Atom) => {\r\n        if (l2Atom === left) {\r\n          return;\r\n        }\r\n        process(l2Atom);\r\n      });\r\n    });\r\n    self._forEachNeighbour(right, (atom) => {\r\n      if (atom === left) {\r\n        return;\r\n      }\r\n      self._forEachNeighbour(atom, (l2Atom) => {\r\n        if (l2Atom === right) {\r\n          return;\r\n        }\r\n        process(l2Atom);\r\n      });\r\n    });\r\n  }\r\n\r\n  _fixDir(refPoint, currDir, posGetter) {\r\n    // count atoms to the right and to the left of the current plane\r\n    let rightCount = 0;\r\n    let leftCount = 0;\r\n    const tmpVec = refPoint.clone();\r\n    function checkDir(atom) {\r\n      tmpVec.copy(posGetter(atom));\r\n      tmpVec.sub(refPoint);\r\n      const dotProd = currDir.dot(tmpVec);\r\n      if (dotProd > 0) {\r\n        ++rightCount;\r\n      } else {\r\n        ++leftCount;\r\n      }\r\n    }\r\n    function checkCarbon(atom) {\r\n      if (atom.element.name === 'C') {\r\n        checkDir(atom);\r\n      }\r\n    }\r\n    // count all atoms to the left and right of our plane, start from level 1 and carbons\r\n    const stages = [\r\n      [this.forEachLevelOne, checkCarbon],\r\n      [this.forEachLevelOne, checkDir],\r\n      [this.forEachLevelTwo, checkCarbon],\r\n      [this.forEachLevelTwo, checkDir],\r\n    ];\r\n\r\n    for (let stageId = 0; stageId < stages.length; ++stageId) {\r\n      stages[stageId][0].call(this, stages[stageId][1]);\r\n      if (leftCount > rightCount) {\r\n        return currDir.multiplyScalar(-1);\r\n      }\r\n      if (leftCount < rightCount) {\r\n        return currDir;\r\n      }\r\n    }\r\n    return currDir;\r\n  }\r\n\r\n  calcNormalDir(posGetter) {\r\n    const left = this._left;\r\n    const right = this._right;\r\n    let first = left;\r\n    let second = right;\r\n    posGetter = posGetter === undefined ? getAtomPos : posGetter;\r\n    if (left.bonds.length > right.bonds.length) {\r\n      first = right;\r\n      second = left;\r\n    }\r\n    let third = first;\r\n    let maxNeibs = 0;\r\n    const { bonds } = second;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      let another = bonds[i]._left;\r\n      if (bonds[i]._left === second) {\r\n        another = bonds[i]._right;\r\n      }\r\n      if (another.bonds.length > maxNeibs && another !== first) {\r\n        third = another;\r\n        maxNeibs = another.bonds.length;\r\n      }\r\n    }\r\n    const secondPos = posGetter(second);\r\n    const firstV = posGetter(first).clone().sub(secondPos);\r\n    const secondV = posGetter(third).clone().sub(secondPos);\r\n    secondV.crossVectors(firstV, secondV);\r\n    if (secondV.lengthSq() < 0.0001) {\r\n      secondV.set(0, 1, 0);\r\n    }\r\n    firstV.normalize();\r\n    secondV.normalize();\r\n    firstV.crossVectors(secondV, firstV);\r\n    if (firstV.lengthSq() < 0.0001) {\r\n      firstV.set(0, 1, 0);\r\n    }\r\n    firstV.normalize();\r\n    return this._fixDir(secondPos, firstV, posGetter);\r\n  }\r\n\r\n  static BondType = cBondTypes;\r\n}\r\n\r\nBond.prototype.BondType = cBondTypes;\r\n\r\nexport default Bond;\r\n","import * as THREE from 'three';\r\nimport Atom from './Atom';\r\nimport Element from './Element';\r\n\r\nconst cNucleicControlNames = ['C3\\'', 'C3*', 'P', 'H5T', 'H3T'];\r\nconst cNucleicWing1Names = ['OP1', 'O1P'];\r\nconst cNucleicWing2Names = ['OP2', 'O2P'];\r\n\r\nconst cCylinderSource = ['C3\\'', 'C3*', 'C1', 'C1\\'', 'C1*', 'P'];\r\nconst cCylinderTarget = [{\r\n  types: ['A', 'DA', 'G', 'DG'],\r\n  atoms: ['N1'],\r\n}, {\r\n  types: ['C', 'DC'],\r\n  atoms: ['N3'],\r\n}, {\r\n  types: ['T', 'DT', 'U', 'DU'],\r\n  atoms: ['O4'],\r\n}];\r\n\r\n/**\r\n * Residue instance.\r\n *\r\n * @param {Chain} chain      - Chain this residue belongs to.\r\n * @param {ResidueType} type - Generic residue instance type.\r\n * @param {number} sequence  - Sequence ID.\r\n * @param {string} icode     - One character insertion code (usually space or A-Z).\r\n *\r\n * @exports Residue\r\n * @constructor\r\n */\r\nclass Residue {\r\n  constructor(chain, type, sequence, icode) {\r\n    this._chain = chain;\r\n    this._component = null;\r\n    this._type = type;\r\n    this._sequence = sequence;\r\n    this._icode = icode;\r\n    this._mask = 1 | 0;\r\n    this._index = -1;\r\n\r\n    this._atoms = [];\r\n    this._secondary = null;\r\n    this._firstAtom = null;\r\n    this._leadAtom = null;\r\n    this._wingAtom = null;\r\n    this._lastAtom = null;\r\n    this._controlPoint = null;\r\n    this._midPoint = null;\r\n    this._wingVector = null;\r\n    this._cylinders = null;\r\n    this._isValid = true;\r\n    this._het = false;\r\n    this._molecule = null;\r\n    this.temperature = null;\r\n    this.occupancy = null;\r\n  }\r\n\r\n  // Getters and setters\r\n  getChain() {\r\n    return this._chain;\r\n  }\r\n\r\n  getMolecule() {\r\n    return this._molecule;\r\n  }\r\n\r\n  getType() {\r\n    return this._type;\r\n  }\r\n\r\n  getSequence() {\r\n    return this._sequence;\r\n  }\r\n\r\n  getSecondary() {\r\n    return this._secondary;\r\n  }\r\n\r\n  getICode() {\r\n    return this._icode;\r\n  }\r\n\r\n  // Other methods\r\n\r\n  addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge) {\r\n    const atom = new Atom(this, name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n    const complex = this._chain.getComplex();\r\n    complex.addAtom(atom);\r\n    this._atoms.push(atom);\r\n    this._het = this._het || het;\r\n    return atom;\r\n  }\r\n\r\n  getAtomCount() {\r\n    return this._atoms.length;\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      if (process(atoms[i])) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  _findAtomByName(name) {\r\n    let res = null;\r\n    this.forEachAtom((atom) => {\r\n      if (atom.name === name) {\r\n        res = atom;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    return res;\r\n  }\r\n\r\n  _findFirstAtomInList(names) {\r\n    let res = null;\r\n    for (let i = 0; i < names.length; ++i) {\r\n      res = this._findAtomByName(names[i]);\r\n      if (res !== null) {\r\n        return res;\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      mask &= atoms[i].mask;\r\n    }\r\n    this._mask = mask;\r\n  }\r\n\r\n  getCylinderTargetList() {\r\n    const type = this._type._name;\r\n    for (let i = 0, n = cCylinderTarget.length; i < n; ++i) {\r\n      for (let j = 0, m = cCylinderTarget[i].types.length; j < m; ++j) {\r\n        if (type === cCylinderTarget[i].types[j]) {\r\n          return cCylinderTarget[i].atoms;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  _detectLeadWing(dst, next, getAtomPosition) {\r\n    const leadAtom = this._findFirstAtomInList(cNucleicControlNames);\r\n    let wingStart = this._findFirstAtomInList(cNucleicWing1Names);\r\n    let wingEnd = this._findFirstAtomInList(cNucleicWing2Names);\r\n\r\n    if (wingStart === null && next !== null) {\r\n      wingStart = next._findFirstAtomInList(cNucleicWing1Names);\r\n    }\r\n\r\n    if (wingEnd === null && next !== null) {\r\n      wingEnd = next._findFirstAtomInList(cNucleicWing2Names);\r\n    }\r\n\r\n    if (leadAtom === null || wingStart === null || wingEnd === null) {\r\n      return;\r\n    }\r\n\r\n    dst._leadAtom = leadAtom;\r\n    dst._controlPoint = getAtomPosition(leadAtom);\r\n    dst._wingVector = getAtomPosition(wingEnd).clone().sub(getAtomPosition(wingStart));\r\n    dst._isValid = true;\r\n\r\n    const cylSource = this._findFirstAtomInList(cCylinderSource);\r\n    const targetList = this.getCylinderTargetList();\r\n    const cylTarget = targetList !== null ? this._findFirstAtomInList(targetList) : null;\r\n    if (cylSource === null || cylTarget === null) {\r\n      return;\r\n    }\r\n    dst._cylinders = [getAtomPosition(cylSource), getAtomPosition(cylTarget)];\r\n  }\r\n\r\n  calcWing(prevLeadPos, currLeadPos, prevWingPos, prevWing) {\r\n    const vectorA = currLeadPos.clone().sub(prevLeadPos);\r\n    const vectorB = prevLeadPos.clone().sub(prevWingPos);\r\n    vectorB.crossVectors(vectorA, vectorB);\r\n    vectorB.crossVectors(vectorA, vectorB).normalize();\r\n    if (prevWing !== null && prevWing.length() > 0.0001) {\r\n      const needToNegate = vectorB.length() > 0.0001 && Math.abs(prevWing.angleTo(vectorB)) > Math.PI / 2;\r\n      if (needToNegate) {\r\n        vectorB.negate();\r\n      }\r\n    }\r\n    return vectorB;\r\n  }\r\n\r\n  _innerFinalize(prevRes, prev, nextRes, dst, chainAsNucleic, getAtomPosition) {\r\n    const bFirstInChain = prev === null;\r\n\r\n    const lp = getAtomPosition(this._leadAtom);\r\n    const currLeadPos = new THREE.Vector3(lp.x, lp.y, lp.z);\r\n    if (chainAsNucleic) {\r\n      this._detectLeadWing(dst, nextRes, getAtomPosition);\r\n      return;\r\n    }\r\n\r\n    if (bFirstInChain) { // for first one in chain\r\n      dst._midPoint = getAtomPosition(this._firstAtom).clone();\r\n    } else {\r\n      const prevLeadPos = prev._controlPoint; // lead point of previous monomer\r\n      dst._midPoint = prevLeadPos.clone().lerp(currLeadPos, 0.5);\r\n      dst._wingVector = this.calcWing(prevLeadPos, currLeadPos, getAtomPosition(prevRes._wingAtom), prev._wingVector);\r\n    }\r\n    dst._controlPoint = currLeadPos;\r\n  }\r\n\r\n  _finalize2(prev, next, asNucleic) {\r\n    // Should be called AFTER first finalize\r\n    this._innerFinalize(prev, prev, next, this, asNucleic, (atom) => atom.position);\r\n  }\r\n\r\n  isConnected(anotherResidue) {\r\n    if (this._chain !== anotherResidue._chain) {\r\n      return false;\r\n    }\r\n    if (this === anotherResidue) {\r\n      return true;\r\n    }\r\n    let res = false;\r\n    this.forEachAtom((atom) => {\r\n      const { bonds } = atom;\r\n      for (let i = 0, n = bonds.length; i < n; ++i) {\r\n        const bond = bonds[i];\r\n        if (bond._left.residue === anotherResidue || bond._right.residue === anotherResidue) {\r\n          res = true;\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    });\r\n    return res;\r\n  }\r\n\r\n  _finalize() {\r\n    const self = this;\r\n    [this._firstAtom] = this._atoms;\r\n    this._lastAtom = this._atoms[this._atoms.length - 1];\r\n\r\n    this._leadAtom = null;\r\n    this._wingAtom = null;\r\n\r\n    let tempCount = 0;\r\n    let temperature = 0; // average temperature\r\n    let occupCount = 0;\r\n    let occupancy = 0; // average occupancy\r\n    this.forEachAtom((a) => {\r\n      if (self._leadAtom === null) {\r\n        if (a.role === Element.Constants.Lead) {\r\n          self._leadAtom = a;\r\n        }\r\n      }\r\n      if (self._wingAtom === null) {\r\n        if (a.role === Element.Constants.Wing) {\r\n          self._wingAtom = a;\r\n        }\r\n      }\r\n      if (a.temperature) {\r\n        temperature += a.temperature;\r\n        tempCount++;\r\n      }\r\n      if (a.occupancy) {\r\n        occupancy += a.occupancy;\r\n        occupCount++;\r\n      }\r\n      return (self._leadAtom !== null && self._wingAtom !== null);\r\n    });\r\n\r\n    if (tempCount > 0) {\r\n      this.temperature = temperature / tempCount;\r\n    }\r\n    if (occupCount > 0) {\r\n      this.occupancy = occupancy / occupCount;\r\n    }\r\n\r\n    // Still try to make monomer look valid\r\n    if (this._leadAtom === null || this._wingAtom === null) {\r\n      this._isValid = false;\r\n    }\r\n    if (this._leadAtom === null) {\r\n      this._leadAtom = this._firstAtom;\r\n    }\r\n    if (this._wingAtom === null) {\r\n      this._wingAtom = this._lastAtom;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Residue;\r\n","/**\r\n * Residue type.\r\n *\r\n * Predefined acid or created with HET, HETNAM, etc.\r\n *\r\n * @param {string} name            - Short name, either standard (ALA, MET, etc.) or non-standard one.\r\n * @param {string} fullName        - Full residue name.\r\n * @param {string} letterCode      - 1-letter symbol.\r\n *\r\n * @exports ResidueType\r\n * @constructor\r\n */\r\nclass ResidueType {\r\n  constructor(name, fullName, letterCode) {\r\n    this._name = name;\r\n    this._fullName = fullName;\r\n    this.letterCode = letterCode;\r\n    this.flags = 0x0000;\r\n  }\r\n\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  // DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\n  static StandardTypes = {\r\n    /* eslint-disable no-magic-numbers */\r\n    ALA: new ResidueType('ALA', 'Alanine', 'A'),\r\n    ARG: new ResidueType('ARG', 'Arginine', 'R'),\r\n    ASN: new ResidueType('ASN', 'Asparagine', 'N'),\r\n    ASP: new ResidueType('ASP', 'Aspartic Acid', 'D'),\r\n    CYS: new ResidueType('CYS', 'Cysteine', 'C'),\r\n    GLN: new ResidueType('GLN', 'Glutamine', 'Q'),\r\n    GLU: new ResidueType('GLU', 'Glutamic Acid', 'E'),\r\n    GLY: new ResidueType('GLY', 'Glycine', 'G'),\r\n    HIS: new ResidueType('HIS', 'Histidine', 'H'),\r\n    ILE: new ResidueType('ILE', 'Isoleucine', 'I'),\r\n    LEU: new ResidueType('LEU', 'Leucine', 'L'),\r\n    LYS: new ResidueType('LYS', 'Lysine', 'K'),\r\n    MET: new ResidueType('MET', 'Methionine', 'M'),\r\n    PHE: new ResidueType('PHE', 'Phenylalanine', 'F'),\r\n    PRO: new ResidueType('PRO', 'Proline', 'P'),\r\n    PYL: new ResidueType('PYL', 'Pyrrolysine', 'O'),\r\n    SEC: new ResidueType('SEC', 'Selenocysteine', 'U'),\r\n    SER: new ResidueType('SER', 'Serine', 'S'),\r\n    THR: new ResidueType('THR', 'Threonine', 'T'),\r\n    TRP: new ResidueType('TRP', 'Tryptophan', 'W'),\r\n    TYR: new ResidueType('TYR', 'Tyrosine', 'Y'),\r\n    VAL: new ResidueType('VAL', 'Valine', 'V'),\r\n    A: new ResidueType('A', 'Adenine', 'A'),\r\n    C: new ResidueType('C', 'Cytosine', 'C'),\r\n    G: new ResidueType('G', 'Guanine', 'G'),\r\n    I: new ResidueType('I', 'Inosine', 'I'),\r\n    T: new ResidueType('T', 'Thymine', 'T'),\r\n    U: new ResidueType('U', 'Uracil', 'U'),\r\n    DA: new ResidueType('DA', 'Adenine', 'A'),\r\n    DC: new ResidueType('DC', 'Cytosine', 'C'),\r\n    DG: new ResidueType('DG', 'Guanine', 'G'),\r\n    DI: new ResidueType('DI', 'Inosine', 'I'),\r\n    DT: new ResidueType('DT', 'Thymine', 'T'),\r\n    DU: new ResidueType('DU', 'Uracil', 'U'),\r\n    '+A': new ResidueType('+A', 'Adenine', 'A'),\r\n    '+C': new ResidueType('+C', 'Cytosine', 'C'),\r\n    '+G': new ResidueType('+G', 'Guanine', 'G'),\r\n    '+I': new ResidueType('+I', 'Inosine', 'I'),\r\n    '+T': new ResidueType('+T', 'Thymine', 'T'),\r\n    '+U': new ResidueType('+U', 'Uracil', 'U'),\r\n    WAT: new ResidueType('WAT', 'Water', ''),\r\n    H2O: new ResidueType('H2O', 'Water', ''),\r\n    HOH: new ResidueType('HOH', 'Water', ''),\r\n    DOD: new ResidueType('DOD', 'Water', ''),\r\n    UNK: new ResidueType('UNK', 'Unknown', ''),\r\n    UNL: new ResidueType('UNL', 'Unknown Ligand', ''),\r\n    /* eslint-enable no-magic-numbers */\r\n  };\r\n\r\n  /**\r\n   * Enumeration of residue flag values.\r\n   *\r\n   * @enum {number}\r\n   * @readonly\r\n   */\r\n  static Flags = {\r\n    // Amino acids\r\n    /** Amino acid residue */\r\n    PROTEIN: 0x0001,\r\n    /** Basic amino acid residue */\r\n    BASIC: 0x0002,\r\n    /** Acidic amino acid residue */\r\n    ACIDIC: 0x0004,\r\n    /** Polar uncharged side chain amino acid residue */\r\n    POLAR: 0x0008,\r\n    /** Non-polar hydrophobic side chain amino acid residue */\r\n    NONPOLAR: 0x0010,\r\n    /** Aromatic amino acid residue */\r\n    AROMATIC: 0x0020,\r\n\r\n    // Nucleic acids\r\n\r\n    /** Nucleic residue */\r\n    NUCLEIC: 0x0100,\r\n    /** Purine nucleic residue */\r\n    PURINE: 0x0200,\r\n    /** Pyrimidine nucleic residue */\r\n    PYRIMIDINE: 0x0400,\r\n    /** DNA */\r\n    DNA: 0x0800,\r\n    /** RNA */\r\n    RNA: 0x1000,\r\n\r\n    /** Water */\r\n    WATER: 0x10000,\r\n  };\r\n}\r\n\r\n// Flag combinations\r\nfunction _addFlag(flag, list) {\r\n  for (let i = 0, n = list.length; i < n; ++i) {\r\n    const res = ResidueType.StandardTypes[list[i]];\r\n    if (res) {\r\n      res.flags |= flag;\r\n    }\r\n  }\r\n}\r\n\r\nconst { Flags } = ResidueType;\r\n_addFlag(Flags.WATER, ['WAT', 'H2O', 'HOH', 'DOD']);\r\n\r\n_addFlag(Flags.PROTEIN, [\r\n  'ALA', 'ARG', 'ASN', 'ASP', 'CYS', 'GLY', 'GLU', 'GLN', 'HIS', 'ILE',\r\n  'LEU', 'LYS', 'MET', 'PHE', 'PRO', 'PYL', 'SEC', 'SER', 'THR', 'TRP',\r\n  'TYR', 'VAL',\r\n]);\r\n_addFlag(Flags.BASIC, ['ARG', 'HIS', 'LYS']);\r\n_addFlag(Flags.ACIDIC, ['ASP', 'GLU']);\r\n_addFlag(Flags.POLAR, ['ASN', 'CYS', 'GLN', 'SER', 'THR', 'TYR']);\r\n_addFlag(Flags.NONPOLAR, ['ALA', 'ILE', 'LEU', 'MET', 'PHE', 'PRO', 'TRP', 'VAL', 'GLY']);\r\n_addFlag(Flags.AROMATIC, ['PHE', 'TRP', 'TYR']);\r\n\r\n_addFlag(Flags.NUCLEIC, [\r\n  'A', 'G', 'I', 'DA', 'DG', 'DI', '+A', '+G', '+I',\r\n  'C', 'T', 'U', 'DC', 'DT', 'DU', '+C', '+T', '+U',\r\n]);\r\n_addFlag(Flags.PURINE, ['A', 'G', 'I', 'DA', 'DG', 'DI', '+A', '+G', '+I']);\r\n_addFlag(Flags.PYRIMIDINE, ['C', 'T', 'U', 'DC', 'DT', 'DU', '+C', '+T', '+U']);\r\n_addFlag(Flags.DNA, ['DA', 'DG', 'DI', 'DC', 'DT', 'DU']);\r\n_addFlag(Flags.RNA, ['A', 'G', 'I', 'C', 'T', 'U']);\r\n// Table of kdHydrophobicity\r\nconst hydro = {\r\n  ILE: 4.5,\r\n  VAL: 4.2,\r\n  LEU: 3.8,\r\n  PHE: 2.8,\r\n  CYS: 2.5,\r\n  MET: 1.9,\r\n  ALA: 1.8,\r\n  GLY: -0.4,\r\n  THR: -0.7,\r\n  SER: -0.8,\r\n  TRP: -0.9,\r\n  TYR: -1.3,\r\n  PRO: -1.6,\r\n  HIS: -3.2,\r\n  GLU: -3.5,\r\n  GLN: -3.5,\r\n  ASP: -3.5,\r\n  ASN: -3.5,\r\n  LYS: -3.9,\r\n  ARG: -4.5,\r\n};\r\n\r\nfunction _addParam(param, list) {\r\n  const keys = Object.keys(list);\r\n  for (let i = 0, n = keys.length; i < n; ++i) {\r\n    const key = keys[i];\r\n    const value = list[key];\r\n    ResidueType.StandardTypes[key][param] = value;\r\n  }\r\n}\r\n\r\n_addParam('hydrophobicity', hydro);\r\n\r\nexport default ResidueType;\r\n","import * as THREE from 'three';\r\nimport Residue from './Residue';\r\nimport ResidueType from './ResidueType';\r\n\r\n/**\r\n * Residues in chain are either amino acid either nucleic acid (and water)\r\n * There might be some modified/mutated residues, which type could not be determined by their name (nucleic or amino); In this\r\n * case firstly program definites the chain type (by well-known residues) and then definites modified/mutated residues\r\n */\r\nconst ChainType = {\r\n  UNKNOWN: 0,\r\n  PROTEIN: 1,\r\n  NUCLEIC: 2,\r\n};\r\n\r\n/**\r\n * Residue chain.\r\n *\r\n * @param {Complex} complex - Molecular complex this chain belongs to.\r\n * @param {string} name - One character identifier (usually space, A-Z, 0-9, or a-z).\r\n *\r\n * @exports Chain\r\n * @constructor\r\n */\r\nclass Chain {\r\n  constructor(complex, name) {\r\n    this._complex = complex;\r\n    this._name = name;\r\n    this._mask = 1 | 0;\r\n    this._index = -1;\r\n    this._residues = [];\r\n\r\n    this.minSequence = Number.POSITIVE_INFINITY;\r\n    this.maxSequence = Number.NEGATIVE_INFINITY;\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._residues;\r\n  }\r\n\r\n  _determineType() {\r\n    const residues = this._residues;\r\n\r\n    const { PROTEIN, NUCLEIC } = ResidueType.Flags;\r\n\r\n    this.type = ChainType.UNKNOWN;\r\n\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const { flags } = residues[i]._type;\r\n\r\n      if ((flags & NUCLEIC) !== 0) {\r\n        this.type = ChainType.NUCLEIC;\r\n        break;\r\n      } else if ((flags & PROTEIN) !== 0) {\r\n        this.type = ChainType.PROTEIN;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finds thre residue with specified sequence number and inserion code\r\n   * @param {Number} seqNum sequence number\r\n   * @param {string} iCode insertion code\r\n   * @returns {*} Residue or null if not found\r\n   */\r\n  findResidue(seqNum, iCode) {\r\n    const residues = this._residues;\r\n\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const res = residues[i];\r\n      if (res._sequence === seqNum && res._icode === iCode) {\r\n        return [res, i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _finalize() {\r\n    this._determineType();\r\n\r\n    const residues = this._residues;\r\n\r\n    let prev = null;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      const next = (i + 1 < n) ? residues[i + 1] : null;\r\n      const curr = residues[i];\r\n      // TODO: skip invalid residues\r\n      if (1 /* curr._isValid */) { // eslint-disable-line no-constant-condition\r\n        curr._finalize2(prev, next, this.type === ChainType.NUCLEIC);\r\n        prev = curr;\r\n      }\r\n    }\r\n\r\n    // fix very first wing\r\n    if (residues.length > 1 && residues[1]._wingVector) {\r\n      const p = residues[1]._wingVector;\r\n      residues[0]._wingVector = new THREE.Vector3(p.x, p.y, p.z);\r\n    } else if (residues.length > 0) {\r\n      residues[0]._wingVector = new THREE.Vector3(1, 0, 0);\r\n    }\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const residues = this._residues;\r\n    let prev = null;\r\n    let prevData = null;\r\n    const frameRes = frameData._residues;\r\n    const n = residues.length;\r\n    function getAtomPos(atom) {\r\n      return frameData.getAtomPos(atom.index);\r\n    }\r\n\r\n    for (let i = 0; i < n; ++i) {\r\n      const curr = residues[i];\r\n      const currData = frameRes[curr._index];\r\n      const nextRes = (i + 1 < n) ? residues[i + 1] : null;\r\n      curr._innerFinalize(prev, prevData, nextRes, currData, this.type === ChainType.NUCLEIC, getAtomPos);\r\n      prev = curr;\r\n      prevData = currData;\r\n    }\r\n\r\n    frameRes[residues[0]._index]._wingVector = n > 1\r\n      ? frameRes[residues[1]._index]._wingVector\r\n      : new THREE.Vector3(1, 0, 0);\r\n  }\r\n\r\n  /**\r\n   * Create a new residue.\r\n   *\r\n   * @param {string} name - Residue name.\r\n   * @param {number} sequence - Residue sequence number.\r\n   * @param {string} iCode - Insertion code.\r\n   * @returns {Residue} - Newly created residue instance.\r\n   */\r\n  addResidue(name, sequence, iCode) {\r\n    let type = this._complex.getResidueType(name);\r\n    if (type === null) {\r\n      type = this._complex.addResidueType(name);\r\n    }\r\n    const residue = new Residue(this, type, sequence, iCode);\r\n    this._complex.addResidue(residue);\r\n    this._residues.push(residue);\r\n\r\n    if (type.flags & (ResidueType.Flags.NUCLEIC | ResidueType.Flags.PROTEIN)) {\r\n      if (this.maxSequence < sequence) {\r\n        this.maxSequence = sequence;\r\n      }\r\n      if (this.minSequence > sequence) {\r\n        this.minSequence = sequence;\r\n      }\r\n    }\r\n\r\n    return residue;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residues.length;\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      mask &= residues[i]._mask;\r\n    }\r\n    this._mask = mask;\r\n  }\r\n}\r\n\r\nexport default Chain;\r\n","import Residue from './Residue';\r\n\r\n/** An element of protein secondary structure. */\r\nclass StructuralElement {\r\n  /**\r\n   * Create a secondary structural element of the specified type.\r\n   *\r\n   * @param {StructuralElement.Type} type Secondary structure type.\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   */\r\n  constructor(type, init, term) {\r\n    /**\r\n     * Secondary structure type.\r\n     * @type {StructuralElement.Type}\r\n     */\r\n    this.type = type;\r\n    /**\r\n     * Generic secondary structure type.\r\n     * @type {StructuralElement.Generic}\r\n     */\r\n    this.generic = StructuralElement.genericByType[this.type] || 'loop';\r\n    /**\r\n     * Initial residue.\r\n     * @type Residue\r\n     */\r\n    this.init = init;\r\n    /**\r\n     * Terminal residue.\r\n     * @type Residue\r\n     */\r\n    this.term = term;\r\n  }\r\n\r\n  /**\r\n   * An internal method for making a final pass over the complex to set all required references.\r\n   *\r\n   * **NOTE:** I'm sorry. It's a legacy code waiting for refactoring.\r\n   * Just copying it as-is right now and hoping for the best.\r\n   *\r\n   * @param {object} serialAtomMap A dictionary of atoms\r\n   * @param {object} residueHash A dictionary of hashed residues to check.\r\n   * @param {Complex} complex The molecular complex this element belongs to.\r\n   */\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    if (this.init instanceof Residue && this.term instanceof Residue) {\r\n      return;\r\n    }\r\n\r\n    // Link all intermediate residues to this structural element\r\n    const start = complex.splitUnifiedSerial(this.init);\r\n    const end = complex.splitUnifiedSerial(this.term);\r\n    for (let chainId = start.chain; chainId <= end.chain; chainId++) {\r\n      for (let serialId = start.serial; serialId <= end.serial; serialId++) {\r\n        for (let { iCode } = start; iCode <= end.iCode; iCode++) {\r\n          const hashCode = complex.getUnifiedSerial(chainId, serialId, iCode);\r\n          if (residueHash[hashCode]) {\r\n            residueHash[hashCode]._secondary = this;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Replace unfined serials by objects\r\n    this.init = residueHash[this.init];\r\n    this.term = residueHash[this.term];\r\n  }\r\n}\r\n\r\n/**\r\n * Specific type of a secondary structural element.\r\n * @enum {string}\r\n * @see StructuralElement.Generic\r\n */\r\nStructuralElement.Type = {\r\n  /** A strand of a [beta-sheet](https://en.wikipedia.org/wiki/Beta_sheet). */\r\n  STRAND: 'E',\r\n  /** An isolated beta-bridge (too small for a beta-sheet). */\r\n  BRIDGE: 'B',\r\n\r\n  /** A [3/10 helix](https://en.wikipedia.org/wiki/310_helix) (hydrogen bonding is 3 residues apart). */\r\n  HELIX_310: 'G',\r\n  /** An [alpha-helix](https://en.wikipedia.org/wiki/Alpha_helix) (hydrogen bonding is 4 residues apart). */\r\n  HELIX_ALPHA: 'H',\r\n  /** A [pi-helix](https://en.wikipedia.org/wiki/Pi_helix) (hydrogen bonding is 5 residues apart). */\r\n  HELIX_PI: 'I',\r\n  /** A generic helix of unspecified bonding distance. */\r\n  HELIX: 'X',\r\n\r\n  /** An isolated 3/10-like helical turn. */\r\n  TURN_310: '3',\r\n  /** An isolated alpha-like helical turn. */\r\n  TURN_ALPHA: '4',\r\n  /** An isolated pi-like helical turn. */\r\n  TURN_PI: '5',\r\n  /** An isolated helical [turn](https://en.wikipedia.org/wiki/Turn_(biochemistry)) of unspecified bonding distance. */\r\n  TURN: 'T',\r\n\r\n  /** A bend (a region of high curvature). */\r\n  BEND: 'S',\r\n  /** Just a protein section with no particular conformation. */\r\n  COIL: 'C',\r\n};\r\n\r\n/**\r\n * Generic type of a secondary structural element.\r\n * @enum {string}\r\n * @see StructuralElement.Type\r\n */\r\nStructuralElement.Generic = {\r\n  /** A strand of a sheet. */\r\n  STRAND: 'strand',\r\n  /** A helix. */\r\n  HELIX: 'helix',\r\n  /** Just a protein section with no particular conformation. */\r\n  LOOP: 'loop',\r\n};\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\nconst StructuralElementGeneric = StructuralElement.Generic;\r\n\r\n/**\r\n * A mapping from specific types to generic ones.\r\n * @type {Object<StructuralElement.Type, StructuralElement.Generic>}\r\n */\r\nStructuralElement.genericByType = {\r\n  [StructuralElementType.STRAND]: StructuralElementGeneric.STRAND,\r\n  [StructuralElementType.HELIX_310]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX_ALPHA]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX_PI]: StructuralElementGeneric.HELIX,\r\n  [StructuralElementType.HELIX]: StructuralElementGeneric.HELIX,\r\n};\r\n\r\nexport default StructuralElement;\r\n","import StructuralElement from './StructuralElement';\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\nexport const typeByPDBHelixClass = {\r\n  1: StructuralElementType.HELIX_ALPHA,\r\n  3: StructuralElementType.HELIX_PI,\r\n  5: StructuralElementType.HELIX_310,\r\n};\r\n\r\n/**\r\n * Helical secondary structure of a protein.\r\n * @extends StructuralElement\r\n */\r\nclass Helix extends StructuralElement {\r\n  /**\r\n   * Create a helix.\r\n   *\r\n   * @param {number} helixClass A helix class according to the\r\n   *   [PDB Format](http://www.wwpdb.org/documentation/file-format-content/format33/sect5.html#HELIX).\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   * @param {number} serial Serial number of the helix (see PDB Format).\r\n   * @param {string} name Helix identifier (see PDB Format).\r\n   * @param {string} comment Comment about this helix (see PDB Format).\r\n   * @param {number} length Length of this helix, in residues (see PDB Format).\r\n   */\r\n  constructor(helixClass, init, term, serial, name, comment, length) {\r\n    super(typeByPDBHelixClass[helixClass] || StructuralElement.Type.HELIX, init, term);\r\n\r\n    /**\r\n     * Serial number of the helix (see PDB Format).\r\n     * @type {number}\r\n     */\r\n    this.serial = serial;\r\n    /**\r\n     * Helix identifier (see PDB Format).\r\n     * @type {string}\r\n     */\r\n    this.name = name;\r\n    /**\r\n     * Comment about this helix (see PDB Format).\r\n     * @type {string}\r\n     */\r\n    this.comment = comment;\r\n    /**\r\n     * Length of this helix, in residues (see PDB Format).\r\n     * @type {number}\r\n     */\r\n    this.length = length;\r\n  }\r\n}\r\n\r\nexport default Helix;\r\n","import StructuralElement from './StructuralElement';\r\n\r\n/**\r\n * A single strand of a sheet in a protein secondary structure.\r\n * @extends StructuralElement\r\n */\r\nclass Strand extends StructuralElement {\r\n  /**\r\n   * Create a strand.\r\n   *\r\n   * @param {Sheet} sheet Parent sheet this strand belongs to.\r\n   * @param {Residue} init Initial residue.\r\n   * @param {Residue} term Terminal residue.\r\n   * @param {number} sense Sense of strand with respect to previous strand in the sheet.\r\n   *   - 0 if the first strand,\r\n   *   - 1 if parallel, and\r\n   *   - -1 if anti-parallel.\r\n   * @param {Atom} atomCur Atom in current strand (see PDB Format).\r\n   * @param {Atom} atomPrev Atom in previous strand (see PDB Format).\r\n   */\r\n  constructor(sheet, init, term, sense, atomCur, atomPrev) {\r\n    super(StructuralElement.Type.STRAND, init, term);\r\n\r\n    /**\r\n     * Parent sheet this strand belongs to.\r\n     * @type {Sheet}\r\n     */\r\n    this.sheet = sheet;\r\n    /**\r\n     * Sense of strand with respect to previous strand in the sheet.\r\n     * - 0 if the first strand,\r\n     * - 1 if parallel, and\r\n     * - -1 if anti-parallel.\r\n     * @type {number}\r\n     */\r\n    this.sense = sense;\r\n    /**\r\n     * Atom in current strand (see PDB Format).\r\n     * @type {Atom}\r\n     */\r\n    this.atomCur = atomCur;\r\n    /**\r\n     * Atom in previous strand (see PDB Format).\r\n     * @type {Atom}\r\n     */\r\n    this.atomPrev = atomPrev;\r\n  }\r\n\r\n  /**\r\n   * An internal method for making a final pass over the complex to set all required references.\r\n   *\r\n   * **NOTE:** I'm sorry. It's a legacy code waiting for refactoring.\r\n   * Just copying it as-is right now and hoping for the best.\r\n   *\r\n   * @param {object} serialAtomMap A dictionary of atoms\r\n   * @param {object} residueHash A dictionary of hashed residues to check.\r\n   * @param {Complex} complex The molecular complex this element belongs to.\r\n   *\r\n   * @override\r\n   */\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    super._finalize(serialAtomMap, residueHash, complex);\r\n\r\n    let as = this.atomCur;\r\n    if (as !== null && !Number.isNaN(as)) {\r\n      this.atomCur = serialAtomMap[as];\r\n    }\r\n    as = this.atomPrev;\r\n    if (as !== null && !Number.isNaN(as)) {\r\n      this.atomPrev = serialAtomMap[as];\r\n    }\r\n  }\r\n}\r\n\r\nexport default Strand;\r\n","import Strand from './Strand';\r\n\r\n/**\r\n * Sheet secondary structure of a protein.\r\n *\r\n * @param {string} name -\r\n * @param {number} width -\r\n *\r\n * @exports Sheet\r\n * @constructor\r\n */\r\nclass Sheet {\r\n  constructor(name, width) {\r\n    this._name = name;\r\n    this._width = width;\r\n\r\n    this._strands = [];\r\n  }\r\n\r\n  // Getters and setters\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getWidth() {\r\n    return this._width;\r\n  }\r\n\r\n  addStrand(strand) {\r\n    this._strands.push(strand);\r\n    this._width = this._strands.length;\r\n  }\r\n\r\n  addEmptyStrand() {\r\n    this._strands.push(new Strand(null, null, null, null, null, null));\r\n  }\r\n\r\n  _finalize(serialAtomMap, residueHash, complex) {\r\n    const s = this._strands;\r\n    for (let i = 0, n = s.length; i < n; ++i) {\r\n      s[i]._finalize(serialAtomMap, residueHash, complex);\r\n    }\r\n    if (!this._width) {\r\n      this._width = s.length;\r\n    }\r\n    if (s.length !== this._width) {\r\n      throw new Error(`Sheet ${this._name} is inconsistent.`);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Sheet;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Atom measurements.\r\n *\r\n * @param {string} id              - SGroup id\r\n * @param {string} name            - Name of the group\r\n * @param {THREE.Vector3} position - Registered coordinates\r\n * @param {array} atoms            - Atoms group consists of\r\n * @param {object} saveNode        - XML node from file for saving\r\n *\r\n * @exports SGroup\r\n * @constructor\r\n */\r\nclass SGroup {\r\n  constructor(id, name, position, atoms, saveNode) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._position = position || new THREE.Vector3();\r\n    this._atoms = atoms || [];\r\n    this._charge = 0; // default group charge\r\n    this._repeat = 1; // how many times group repeated: always > 0\r\n    this._center = null;\r\n    this.xmlNodeRef = saveNode || null;\r\n  }\r\n\r\n  /**\r\n   * Get atom full name.\r\n   * @returns {string} Atom full name.\r\n   */\r\n  getName() {\r\n    return this._name;\r\n  }\r\n\r\n  getPosition() {\r\n    return this._position;\r\n  }\r\n\r\n  getCentralPoint() {\r\n    return this._center;\r\n  }\r\n\r\n  _rebuildSGroupOnAtomChange() {\r\n    const nLimon = 100000000;\r\n    if (this._center === null) {\r\n      return; // nothing to do if we are not relative\r\n    }\r\n\r\n    const bLow = new THREE.Vector3(nLimon, nLimon, nLimon);\r\n    const bHight = new THREE.Vector3(-nLimon, -nLimon, -nLimon);\r\n    for (let j = 0, n = this._atoms.length; j < n; j++) {\r\n      const aPos = this._atoms[j].position;\r\n      bLow.set(Math.min(bLow.x, aPos.x), Math.min(bLow.y, aPos.y), Math.min(bLow.z, aPos.z));\r\n      bHight.set(Math.max(bHight.x, aPos.x), Math.max(bHight.y, aPos.y), Math.max(bHight.z, aPos.z));\r\n    }\r\n    this._center.addVectors(bLow, bHight);\r\n    this._center.multiplyScalar(0.5);\r\n  }\r\n}\r\n\r\nexport default SGroup;\r\n","import utils from '../../utils';\r\n\r\n//----------------------------------------------------------------------------\r\nclass Range {\r\n  constructor(min, max) {\r\n    this.min = min;\r\n    this.max = typeof max === 'undefined' ? min : max;\r\n  }\r\n\r\n  includes(value) {\r\n    return this.min <= value && value <= this.max;\r\n  }\r\n\r\n  toString() {\r\n    const { min, max } = this;\r\n    return min === max ? String(min) : [min, max].join(':');\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.min, this.max];\r\n  }\r\n}\r\n\r\n// ////////////////////////////////////////////////////////////////////////////\r\n\r\nclass List {\r\n  constructor(arg) {\r\n    if (arg instanceof this.constructor) {\r\n      // delegate construction to a different class\r\n      // eslint-disable-next-line no-constructor-return\r\n      return arg;\r\n    }\r\n    if (arg instanceof Array) {\r\n      this._values = arg.slice(0);\r\n    } else if (arg) {\r\n      this._values = [arg];\r\n    } else {\r\n      this._values = [];\r\n    }\r\n  }\r\n\r\n  append(value) {\r\n    const values = this._values;\r\n    values[values.length] = value;\r\n    return this;\r\n  }\r\n\r\n  remove(value) {\r\n    const values = this._values;\r\n    const index = values.indexOf(value);\r\n    if (index >= 0) {\r\n      values.splice(index, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  toString() {\r\n    return this._values.join(',');\r\n  }\r\n\r\n  toJSON() {\r\n    const values = this._values;\r\n    const result = [];\r\n    for (let i = 0, n = values.length; i < n; ++i) {\r\n      const value = values[i];\r\n      result[i] = value.toJSON ? value.toJSON() : value;\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n\r\nclass RangeList extends List {\r\n  includes(value) {\r\n    const list = this._values;\r\n    for (let i = 0, n = list.length; i < n; ++i) {\r\n      if (list[i].includes(value)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n//----------------------------------------------------------------------------\r\n\r\nconst valuesArray = [];\r\n\r\nclass ValueList extends List {\r\n  constructor(arg, upperOnly) {\r\n    const list = super(arg);\r\n    if (upperOnly) {\r\n      this.upperOnly = true;\r\n      const values = list._values;\r\n      for (let i = 0, n = values.length; i < n; ++i) {\r\n        const value = values[i];\r\n        if (typeof value === 'string') {\r\n          values[i] = value.toUpperCase();\r\n        }\r\n      }\r\n    } else {\r\n      this.upperOnly = false;\r\n    }\r\n    // return constructed object\r\n    // eslint-disable-next-line no-constructor-return\r\n    return list;\r\n  }\r\n\r\n  includes(value) {\r\n    // we do not convert to upper case here for perfomance reasons\r\n    // if list is upper case only, value must be converted before it is sent up to  here\r\n    return this._values.indexOf(value) !== -1;\r\n  }\r\n\r\n  toString() {\r\n    // Quote values that are not correct identifiers\r\n    const values = this._values;\r\n    valuesArray.length = 0;\r\n    for (let i = 0, n = values.length; i < n; ++i) {\r\n      valuesArray[i] = utils.correctSelectorIdentifier(String(values[i]));\r\n    }\r\n    return valuesArray.join(',');\r\n  }\r\n\r\n  _validate(value) {\r\n    return (this.upperOnly && typeof value === 'string') ? value.toUpperCase() : value;\r\n  }\r\n\r\n  append(value) {\r\n    super.append(this._validate(value));\r\n    return this;\r\n  }\r\n\r\n  remove(value) {\r\n    super.remove(this._validate(value));\r\n    return this;\r\n  }\r\n}\r\n\r\nexport {\r\n  Range,\r\n  List,\r\n  RangeList,\r\n  ValueList,\r\n};\r\n","import { RangeList, ValueList } from './selectArgs';\r\n\r\n/** Base class for atom selectors. */\r\nclass Selector {\r\n  toString() {\r\n    return this.keyword;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name];\r\n  }\r\n}\r\n\r\nSelector.prototype.name = 'Error';\r\nSelector.prototype.keyword = 'error';\r\n\r\n/** Base class for list-based atom selectors. */\r\nclass ListSelector extends Selector {\r\n  constructor(list) {\r\n    super();\r\n    this.list = list;\r\n  }\r\n\r\n  toString() {\r\n    return `${this.keyword} ${this.list}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.list.toJSON()];\r\n  }\r\n}\r\n\r\nclass RangeListSelector extends ListSelector {\r\n  constructor(arg) {\r\n    super(new RangeList(arg));\r\n  }\r\n}\r\n\r\nclass ValueListSelector extends ListSelector {\r\n  constructor(arg, caseSensitive) {\r\n    super(new ValueList(arg, !caseSensitive));\r\n  }\r\n}\r\n\r\nclass NoneSelector extends Selector {\r\n  includesAtom(_atom) {\r\n    return false;\r\n  }\r\n}\r\n\r\nNoneSelector.prototype.name = 'None';\r\nNoneSelector.prototype.keyword = 'none';\r\n\r\nclass AllSelector extends Selector {\r\n  includesAtom(_atom) {\r\n    return true;\r\n  }\r\n}\r\n\r\nAllSelector.prototype.name = 'All';\r\nAllSelector.prototype.keyword = 'all';\r\n\r\nexport {\r\n  Selector,\r\n  ListSelector,\r\n  RangeListSelector,\r\n  ValueListSelector,\r\n  NoneSelector,\r\n  AllSelector,\r\n};\r\n","import { Selector, NoneSelector } from './selectorsBase';\r\n\r\n//----------------------------------------------------------------------------\r\n// Operators\r\n//----------------------------------------------------------------------------\r\nconst none = new NoneSelector();\r\n\r\nclass PrefixOperator extends Selector {\r\n  constructor(rhs) {\r\n    super();\r\n    this.rhs = rhs || none;\r\n  }\r\n\r\n  toString() {\r\n    const rhs = this.rhs.priority && this.rhs.priority > this.priority ? `(${this.rhs})` : this.rhs;\r\n    return `${this.keyword} ${rhs}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.rhs.toJSON()];\r\n  }\r\n}\r\n\r\nPrefixOperator.prototype.priority = 1;\r\n\r\nclass InfixOperator extends Selector {\r\n  constructor(lhs, rhs) {\r\n    super();\r\n    this.lhs = lhs || none;\r\n    this.rhs = rhs || none;\r\n  }\r\n\r\n  toString() {\r\n    const lhs = this.lhs.priority && this.lhs.priority > this.priority ? `(${this.lhs})` : this.lhs;\r\n    const rhs = this.rhs.priority && this.rhs.priority > this.priority ? `(${this.rhs})` : this.rhs;\r\n    return `${lhs} ${this.keyword} ${rhs}`;\r\n  }\r\n\r\n  toJSON() {\r\n    return [this.name, this.lhs.toJSON(), this.rhs.toJSON()];\r\n  }\r\n}\r\n\r\nInfixOperator.prototype.priority = 1000;\r\n\r\nexport { PrefixOperator, InfixOperator };\r\n","import Atom from './Atom';\r\nimport ResidueType from './ResidueType';\r\nimport { parser } from '../utils/SelectionParser';\r\nimport { Range, RangeList, ValueList } from './selectors/selectArgs';\r\nimport { PrefixOperator, InfixOperator } from './selectors/selectOps';\r\nimport {\r\n  Selector,\r\n  RangeListSelector,\r\n  ValueListSelector,\r\n  NoneSelector,\r\n  AllSelector,\r\n} from './selectors/selectorsBase';\r\n\r\nconst keywords = {};\r\n\r\n//----------------------------------------------------------------------------\r\n// Named selectors\r\n//----------------------------------------------------------------------------\r\n\r\nfunction defineSelector(name, SelectorClass) {\r\n  const keyword = name.toLowerCase();\r\n  SelectorClass.prototype.keyword = keyword;\r\n  SelectorClass.prototype.name = name;\r\n\r\n  const factory = ((...args) => new SelectorClass(...args));\r\n  factory.SelectorClass = SelectorClass;\r\n  keywords[keyword] = factory;\r\n\r\n  return SelectorClass;\r\n}\r\n\r\ndefineSelector('Serial', class SerialSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.serial);\r\n  }\r\n});\r\n\r\ndefineSelector('Name', class NameSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.name);\r\n  }\r\n});\r\n\r\ndefineSelector('AltLoc', class AltLocSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(String.fromCharCode(atom.location));\r\n  }\r\n});\r\n\r\ndefineSelector('Elem', class ElemSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.element.name);\r\n  }\r\n});\r\n\r\ndefineSelector('Residue', class ResidueSelector extends ValueListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._type._name);\r\n  }\r\n});\r\n\r\ndefineSelector('Sequence', class SequenceSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._sequence);\r\n  }\r\n});\r\n\r\ndefineSelector('ICode', class ICodeSelector extends ValueListSelector {\r\n  constructor(arg) {\r\n    super(arg, true);\r\n  }\r\n\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._icode);\r\n  }\r\n});\r\n\r\ndefineSelector('ResIdx', class ResIdxSelector extends RangeListSelector {\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._index);\r\n  }\r\n});\r\n\r\ndefineSelector('Chain', class ChainSelector extends ValueListSelector {\r\n  constructor(arg) {\r\n    super(arg, true);\r\n  }\r\n\r\n  includesAtom(atom) {\r\n    return this.list.includes(atom.residue._chain._name);\r\n  }\r\n});\r\n\r\ndefineSelector('Hetatm', class HetatmSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return atom.het;\r\n  }\r\n});\r\n\r\ndefineSelector('PolarH', class PolarHSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return (atom.flags & Atom.Flags.NONPOLARH) === Atom.Flags.HYDROGEN;\r\n  }\r\n});\r\n\r\ndefineSelector('NonPolarH', class NonPolarHSelector extends Selector {\r\n  includesAtom(atom) {\r\n    return (atom.flags & Atom.Flags.NONPOLARH) === Atom.Flags.NONPOLARH;\r\n  }\r\n});\r\n\r\ndefineSelector('All', AllSelector);\r\n\r\ndefineSelector('None', NoneSelector);\r\n\r\nconst NULL_SELECTOR = keywords.none();\r\n\r\n//----------------------------------------------------------------------------\r\n// Named operators\r\n//----------------------------------------------------------------------------\r\n\r\nfunction defineOperator(name, priority, OperatorClass) {\r\n  OperatorClass.prototype.priority = priority;\r\n  return defineSelector(name, OperatorClass);\r\n}\r\ndefineOperator('Not', 1, class NotOperator extends PrefixOperator {\r\n  includesAtom(atom) {\r\n    return !this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\ndefineOperator('And', 2, class AndOperator extends InfixOperator {\r\n  includesAtom(atom) {\r\n    return this.lhs.includesAtom(atom) && this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\ndefineOperator('Or', 3, class OrOperator extends InfixOperator {\r\n  includesAtom(atom) {\r\n    return this.lhs.includesAtom(atom) || this.rhs.includesAtom(atom);\r\n  }\r\n});\r\n\r\n//----------------------------------------------------------------------------\r\n// Flag selectors\r\n//----------------------------------------------------------------------------\r\n\r\nfunction byResidueTypeFlag(flag, name) {\r\n  return defineSelector(name, class extends Selector {\r\n    includesAtom(atom) {\r\n      return (atom.residue._type.flags & flag) !== 0;\r\n    }\r\n  });\r\n}\r\n\r\nbyResidueTypeFlag(ResidueType.Flags.PROTEIN, 'Protein');\r\nbyResidueTypeFlag(ResidueType.Flags.BASIC, 'Basic');\r\nbyResidueTypeFlag(ResidueType.Flags.ACIDIC, 'Acidic');\r\nbyResidueTypeFlag(ResidueType.Flags.BASIC | ResidueType.Flags.ACIDIC, 'Charged');\r\nbyResidueTypeFlag(ResidueType.Flags.POLAR, 'Polar');\r\nbyResidueTypeFlag(ResidueType.Flags.NONPOLAR, 'NonPolar');\r\nbyResidueTypeFlag(ResidueType.Flags.AROMATIC, 'Aromatic');\r\nbyResidueTypeFlag(ResidueType.Flags.NUCLEIC, 'Nucleic');\r\nbyResidueTypeFlag(ResidueType.Flags.PURINE, 'Purine');\r\nbyResidueTypeFlag(ResidueType.Flags.PYRIMIDINE, 'Pyrimidine');\r\nbyResidueTypeFlag(ResidueType.Flags.WATER, 'Water');\r\n\r\n//----------------------------------------------------------------------------\r\nconst selectors = Object.create(keywords);\r\n\r\nselectors.Selector = Selector;\r\nselectors.RangeListSelector = RangeListSelector;\r\nselectors.ValueListSelector = ValueListSelector;\r\nselectors.Range = Range;\r\nselectors.RangeList = RangeList;\r\nselectors.ValueList = ValueList;\r\nselectors.PrefixOperator = PrefixOperator;\r\nselectors.InfixOperator = InfixOperator;\r\nselectors.Context = Object.create({});\r\n\r\nselectors.GetSelector = function (key) {\r\n  if (!selectors.Context.hasOwnProperty(key)) {\r\n    const exc = { message: `selector ${key} is not registered` };\r\n    throw exc;\r\n  }\r\n  return selectors.Context[key] || NULL_SELECTOR;\r\n};\r\n\r\nselectors.ClearContext = function () {\r\n  Object.keys(selectors.Context).forEach((k) => { delete selectors.Context[k]; });\r\n};\r\n\r\nselectors.keyword = function (key) {\r\n  return keywords[key.toLowerCase()] || keywords.none;\r\n};\r\n\r\nselectors.parse = function (str) {\r\n  const res = {};\r\n  try {\r\n    res.selector = parser.parse(str);\r\n  } catch (e) {\r\n    res.selector = NULL_SELECTOR;\r\n    res.error = e.message;\r\n  }\r\n  return res;\r\n};\r\n\r\nparser.yy = selectors;\r\nparser.yy.parseError = parser.parseError; // workaround for incorrect JISON parser generator for AMD module\r\n\r\nexport default selectors;\r\n","import * as THREE from 'three';\r\nimport selectors from './selectors';\r\n\r\n/**\r\n * Basic biological unit class.\r\n *\r\n * @exports BiologicalUnit\r\n * @constructor\r\n */\r\nclass BiologicalUnit {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._selector = selectors.keyword('All')();\r\n    this._boundaries = {\r\n      boundingBox: new THREE.Box3(),\r\n      boundingSphere: new THREE.Sphere(),\r\n    };\r\n  }\r\n\r\n  computeBoundaries() {\r\n    const atoms = this._complex._atoms;\r\n    const n = atoms.length;\r\n    const selector = this._selector;\r\n\r\n    const { boundingBox } = this._boundaries;\r\n    boundingBox.makeEmpty();\r\n    if (n === 1) {\r\n      boundingBox.expandByPoint(atoms[0].position);\r\n      const bbc = new THREE.Vector3();\r\n      boundingBox.getCenter(bbc);\r\n      const s = 2 * atoms[0].element.radius;\r\n      boundingBox.setFromCenterAndSize(bbc, new THREE.Vector3(s, s, s));\r\n    } else {\r\n      for (let i = 0; i < n; ++i) {\r\n        if (selector.includesAtom(atoms[i])) {\r\n          boundingBox.expandByPoint(atoms[i].position);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    if (n === 1) {\r\n      this._boundaries.boundingSphere.set(center, atoms[0].element.radius);\r\n    } else {\r\n      for (let i = 0; i < n; ++i) {\r\n        if (!selector.includesAtom(atoms[i])) {\r\n          continue;\r\n        }\r\n        const pos = atoms[i].position;\r\n        const lengthSquared = center.distanceToSquared(pos);\r\n        if (radiusSquared < lengthSquared) {\r\n          radiusSquared = lengthSquared;\r\n        }\r\n      }\r\n      this._boundaries.boundingSphere.set(center, Math.sqrt(radiusSquared));\r\n    }\r\n  }\r\n\r\n  getTransforms() {\r\n    return [];\r\n  }\r\n\r\n  getSelector() {\r\n    return this._selector;\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this._boundaries;\r\n  }\r\n\r\n  finalize() {\r\n  }\r\n}\r\n\r\nexport default BiologicalUnit;\r\n","import * as THREE from 'three';\r\nimport selectors from './selectors';\r\nimport BiologicalUnit from './BiologicalUnit';\r\n\r\n/**\r\n * Biological assembly.\r\n *\r\n * @exports Assembly\r\n * @constructor\r\n */\r\n\r\nclass Assembly extends BiologicalUnit {\r\n  constructor(complex) {\r\n    super(complex);\r\n    this.chains = [];\r\n    this.matrices = [];\r\n  }\r\n\r\n  computeBoundaries() {\r\n    super.computeBoundaries();\r\n    // fix up the boundaries\r\n    const { matrices } = this;\r\n    const oldCenter = this._boundaries.boundingSphere.center;\r\n    const oldRad = this._boundaries.boundingSphere.radius;\r\n    const boundingBox = this._boundaries.boundingBox = new THREE.Box3();\r\n    boundingBox.makeEmpty();\r\n    for (let i = 0, n = matrices.length; i < n; ++i) {\r\n      boundingBox.expandByPoint(oldCenter.clone().applyMatrix4(matrices[i]));\r\n    }\r\n\r\n    const newRad = boundingBox.max.distanceTo(boundingBox.min) / 2 + oldRad;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    this._boundaries.boundingSphere = new THREE.Sphere().set(center, newRad);\r\n    boundingBox.max.addScalar(oldRad);\r\n    boundingBox.min.subScalar(oldRad);\r\n  }\r\n\r\n  /**\r\n   * Mark a chain as belonging to this biological assembly.\r\n   * @param {string} chain - chain identifier, usually a single letter\r\n   */\r\n  addChain(chain) {\r\n    this.chains[this.chains.length] = chain;\r\n  }\r\n\r\n  /**\r\n   * Add a transformation matrix.\r\n   * @param {THREE.Matrix4} matrix - transformation matrix\r\n   */\r\n  addMatrix(matrix) {\r\n    this.matrices[this.matrices.length] = matrix;\r\n  }\r\n\r\n  getTransforms() {\r\n    return this.matrices;\r\n  }\r\n\r\n  finalize() {\r\n    if (this.chains.length > 0) {\r\n      this._selector = selectors.keyword('Chain')(this.chains);\r\n    } else {\r\n      this._selector = selectors.keyword('None')();\r\n    }\r\n  }\r\n}\r\n\r\nexport default Assembly;\r\n","/**\r\n * This class represents connected component as a part of a complex.\r\n * WARNING! The whole component entity is build under the assumption that residues\r\n * are placed in the chains and complex in ascending order of indices\r\n *\r\n * @param {Complex} complex - Molecular complex this chain belongs to.\r\n *\r\n * @exports Component\r\n * @constructor\r\n */\r\nclass Component {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._index = -1;\r\n    this._residueIndices = [];\r\n    this._cycles = [];\r\n    this._subDivs = [];\r\n    this._residueCount = 0;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._complex._residues;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residueCount;\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._complex._residues;\r\n    const resIdc = this._residueIndices;\r\n    for (let idIdc = 0, idCount = resIdc.length; idIdc < idCount; ++idIdc) {\r\n      for (let idx = resIdc[idIdc].start, last = resIdc[idIdc].end; idx <= last; ++idx) {\r\n        process(residues[idx]);\r\n      }\r\n    }\r\n  }\r\n\r\n  setSubDivs(subDivs) {\r\n    this._subDivs = subDivs;\r\n    let curr = 0;\r\n    const resIdc = [];\r\n    let resCnt = 0;\r\n    for (let i = 0, n = subDivs.length; i < n; ++i) {\r\n      if (i === n - 1 || subDivs[i].end + 1 !== subDivs[i + 1].start) {\r\n        const { start } = subDivs[curr];\r\n        const { end } = subDivs[i];\r\n        resIdc[resIdc.length] = {\r\n          start,\r\n          end,\r\n        };\r\n        resCnt += end - start + 1;\r\n        curr = i + 1;\r\n      }\r\n    }\r\n\r\n    this._residueIndices = resIdc;\r\n    this._residueCount = resCnt;\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const bonds = this._complex._bonds;\r\n\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      const bond = bonds[i];\r\n      if (bond._left.residue._component === this) {\r\n        process(bond);\r\n      }\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.forEachCycle((cycle) => {\r\n      cycle.update();\r\n    });\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    this.forEachResidue((residue) => {\r\n      residue.forEachAtom(process);\r\n    });\r\n  }\r\n\r\n  addCycle(cycle) {\r\n    this._cycles.push(cycle);\r\n  }\r\n\r\n  forEachCycle(process) {\r\n    const cycles = this._cycles;\r\n    for (let i = 0, n = cycles.length; i < n; ++i) {\r\n      process(cycles[i]);\r\n    }\r\n  }\r\n\r\n  markResidues() {\r\n    const self = this;\r\n    self.forEachResidue((residue) => {\r\n      residue._component = self;\r\n    });\r\n  }\r\n\r\n  _forEachSubChain(mask, process) {\r\n    const residues = this._complex._residues;\r\n    const subs = this._subDivs;\r\n    for (let i = 0, n = subs.length; i < n; ++i) {\r\n      for (let idx = subs[i].start, last = subs[i].end; idx <= last; ++idx) {\r\n        const currRes = residues[idx];\r\n        if (mask & currRes._mask && currRes._isValid) {\r\n          let end = idx + 1;\r\n          for (; end <= last; ++end) {\r\n            const endRes = residues[end];\r\n            if (!(mask & endRes._mask && endRes._isValid)) {\r\n              break;\r\n            }\r\n          }\r\n          process(i, idx, end - 1);\r\n          idx = end;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getMaskedSequences(mask) {\r\n    const subs = [];\r\n    let idx = 0;\r\n    this._forEachSubChain(mask, (_subIdx, start, end) => {\r\n      subs[idx++] = { start, end };\r\n    });\r\n\r\n    return subs;\r\n  }\r\n\r\n  getMaskedSubdivSequences(mask) {\r\n    const subs = [];\r\n    let currIdx = -1;\r\n    let lastSubIdx = -1;\r\n    const subDivs = this._subDivs;\r\n\r\n    this._forEachSubChain(mask, (subIdx, start, end) => {\r\n      if (lastSubIdx !== subIdx) {\r\n        ++currIdx;\r\n        subs[currIdx] = {\r\n          arr: [],\r\n          boundaries: subDivs[subIdx],\r\n        };\r\n        lastSubIdx = subIdx;\r\n      }\r\n      subs[currIdx].arr[subs[currIdx].arr.length] = { start, end };\r\n    });\r\n\r\n    return subs;\r\n  }\r\n}\r\n\r\nexport default Component;\r\n","import utils from '../utils';\r\n\r\nconst cMaxPairsForHashCode = 32;\r\nconst cHashTableSize = 1024 * 1024;\r\nconst cNumbersPerPair = 4;\r\nconst cMaxNeighbours = 14;\r\nconst cInvalidVal = -1;\r\n// 89237 is a large simple number, can be used for pseudo random hash code create\r\nconst cBigPrime = 89237;\r\n\r\nclass AtomPairs {\r\n  constructor(maxPairsEstimate) {\r\n    this.numPairs = 0;\r\n    this.numMaxPairs = maxPairsEstimate;\r\n    this.intBuffer = utils.allocateTyped(Int32Array, maxPairsEstimate * cNumbersPerPair);\r\n    for (let i = 0; i < maxPairsEstimate * cNumbersPerPair; i++) {\r\n      this.intBuffer[i] = cInvalidVal;\r\n    }\r\n    this.hashBuffer = utils.allocateTyped(Int32Array, cHashTableSize * cMaxPairsForHashCode);\r\n    for (let i = 0; i < cHashTableSize * cMaxPairsForHashCode; i++) {\r\n      this.hashBuffer[i] = cInvalidVal;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy all pairs memory\r\n   */\r\n  destroy() {\r\n    this.intBuffer = null;\r\n    this.hashBuffer = null;\r\n  }\r\n\r\n  /**\r\n   * Add pair of atoms to collection\r\n   * @param {number} indexA - Index of the 1st vertex.\r\n   * @param {number} indexB - Index of the 2nd vertex.\r\n   */\r\n  addPair(indexA, indexB) {\r\n    const ia = (indexA < indexB) ? indexA : indexB;\r\n    const ib = (indexA > indexB) ? indexA : indexB;\r\n    const codeToAdd = ia + (ib << cMaxNeighbours);\r\n\r\n    const hashCode = (ia + (ib * cBigPrime)) & (cHashTableSize - 1);\r\n    let j = hashCode * cMaxPairsForHashCode;\r\n    let apI = 0;\r\n    for (; apI < cMaxPairsForHashCode; apI++) {\r\n      const code = this.hashBuffer[j + apI];\r\n      if (code === cInvalidVal) {\r\n        break;\r\n      }\r\n      if (code === codeToAdd) {\r\n        return false;\r\n      }\r\n    }\r\n    // add this new hash code\r\n    if (apI >= cMaxPairsForHashCode) {\r\n      throw new Error('addPair: increase cMaxPairsForHashCode');\r\n    }\r\n    this.hashBuffer[j + apI] = codeToAdd;\r\n\r\n    // actually add\r\n    if (this.numPairs >= this.numMaxPairs) {\r\n      throw new Error('addPair: increase num pairs');\r\n    }\r\n    j = this.numPairs * cNumbersPerPair;\r\n    this.intBuffer[j] = ia;\r\n    this.intBuffer[j + 1] = ib;\r\n    this.intBuffer[j + 2] = codeToAdd;\r\n    this.numPairs++;\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default AtomPairs;\r\n","import AtomPairs from './AtomPairs';\r\nimport Bond from './Bond';\r\n\r\nconst cProfileBondBuilder = false;\r\nconst cEstBondsMultiplier = 4;\r\nconst cSpaceCode = 32;\r\nconst cBondTolerance = 0.45;\r\nconst cVMDTolerance = 0.6;\r\nconst cBondRadInJMOL = true;\r\nconst cEpsilon = 0.001;\r\n\r\n/**\r\n * Get radius used for building bonds.\r\n *\r\n * @param {Atom} atom - Atom object.\r\n * @returns {number} special value for bonding radius for this atom\r\n */\r\nfunction _getBondingRadius(atom) {\r\n  const { element } = atom;\r\n  if (element) {\r\n    return element.radiusBonding;\r\n  }\r\n  throw new Error('_getBondingRadius: Logic error.');\r\n}\r\n\r\nfunction _isAtomEligible(atom) {\r\n  // build for all non-hetatm and for hetatm without bonds\r\n  return !atom.isHet() || (atom.bonds && atom.bonds.length === 0);\r\n}\r\n\r\n/**\r\n * Bond between atoms.\r\n *\r\n * @param {Complex} complex molecular complex\r\n\r\n * @exports AutoBond\r\n * @constructor\r\n */\r\nclass AutoBond {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._maxRad = 1.8;\r\n    const bBox = this._complex.getDefaultBoundaries().boundingBox;\r\n    this._vBoxMin = bBox.min.clone();\r\n    this._vBoxMax = bBox.max.clone();\r\n\r\n    this._pairCollection = null;\r\n  }\r\n\r\n  /**\r\n   * Add existing pairs of connectors (from pdb file after its reading)\r\n   * @returns {number} 0\r\n   */\r\n  _addExistingPairs() {\r\n    const atoms = this._complex.getAtoms();\r\n    const numAtoms = atoms.length;\r\n    let aInd = 0;\r\n    const collection = this._pairCollection;\r\n\r\n    for (; aInd < numAtoms; aInd++) {\r\n      const { bonds } = atoms[aInd];\r\n      const numBondsForAtom = bonds.length;\r\n      for (let bInd = 0; bInd < numBondsForAtom; bInd++) {\r\n        const bond = bonds[bInd];\r\n        const indTo = bond._left.index;\r\n        if (indTo === aInd) {\r\n          collection.addPair(aInd, bond._right.index);\r\n        }\r\n      } // for (b) all bonds in atom\r\n    } // for (a)\r\n    return 0;\r\n  }\r\n\r\n  _findPairs() {\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return;\r\n    }\r\n\r\n    const atoms = this._complex._atoms;\r\n    const atomsNum = atoms.length;\r\n    const self = this;\r\n\r\n    let rA;\r\n    let isHydrogenA;\r\n    let posA;\r\n    let locationA;\r\n    let atomA;\r\n\r\n    const processAtom = function (atomB) {\r\n      if (isHydrogenA && atomB.isHydrogen()) {\r\n        return;\r\n      }\r\n\r\n      const locationB = atomB.location;\r\n      if ((locationA !== cSpaceCode)\r\n        && (locationB !== cSpaceCode)\r\n        && (locationA !== locationB)) {\r\n        return;\r\n      }\r\n\r\n      const dist2 = posA.distanceToSquared(atomB.position);\r\n      const rB = atomB.element.radiusBonding;\r\n      const maxAcceptable = cBondRadInJMOL ? rA + rB + cBondTolerance : cVMDTolerance * (rA + rB);\r\n\r\n      if (dist2 > (maxAcceptable * maxAcceptable)) {\r\n        return;\r\n      }\r\n\r\n      if (dist2 < cEpsilon) {\r\n        return;\r\n      }\r\n\r\n      self._pairCollection.addPair(atomA.index, atomB.index);\r\n    };\r\n\r\n    for (let i = 0; i < atomsNum; ++i) {\r\n      atomA = atoms[i];\r\n      if (!_isAtomEligible(atomA)) {\r\n        continue;\r\n      }\r\n\r\n      rA = atomA.element.radiusBonding;\r\n      isHydrogenA = atomA.isHydrogen();\r\n      posA = atomA.position;\r\n      locationA = atomA.location;\r\n\r\n      vw.forEachAtomWithinRadius(posA, 2 * this._maxRad + cBondTolerance, processAtom);\r\n    }\r\n  }\r\n\r\n  _addPairs() {\r\n    const atoms = this._complex._atoms;\r\n\r\n    for (let i = 0, k = 0; i < this._pairCollection.numPairs; i++, k += 4) {\r\n      const iA = this._pairCollection.intBuffer[k];\r\n      const iB = this._pairCollection.intBuffer[k + 1];\r\n      this._addPair(atoms[iA], atoms[iB]);\r\n    }\r\n  }\r\n\r\n  _addPair(atomA, atomB) {\r\n    const bondsA = atomA.bonds;\r\n    const indexA = atomA.index;\r\n    const indexB = atomB.index;\r\n    for (let j = 0, numBonds = bondsA.length; j < numBonds; ++j) {\r\n      const bond = bondsA[j];\r\n      if (bond._left.index === indexB || bond._right.index === indexB) {\r\n        return;\r\n      }\r\n    }\r\n    const left = indexA < indexB ? atomA : atomB;\r\n    const right = indexA < indexB ? atomB : atomA;\r\n    const newBond = this._complex.addBond(left, right, 0, Bond.BondType.UNKNOWN, false);\r\n    bondsA.push(newBond);\r\n    atomB.bonds.push(newBond);\r\n  }\r\n\r\n  build() {\r\n    if (cProfileBondBuilder) {\r\n      console.time('Bonds Builder');\r\n    }\r\n    this._buildInner();\r\n\r\n    if (cProfileBondBuilder) {\r\n      console.timeEnd('Bonds Builder');\r\n    }\r\n  }\r\n\r\n  _buildInner() {\r\n    const atoms = this._complex._atoms;\r\n    if (atoms.length < 2) {\r\n      return;\r\n    }\r\n    if (atoms[0].index < 0) {\r\n      throw new Error('AutoBond: Atoms in complex were not indexed.');\r\n    }\r\n\r\n    this._calcBoundingBox();\r\n    this._pairCollection = new AtomPairs(atoms.length * cEstBondsMultiplier);\r\n    this._addExistingPairs();\r\n    this._findPairs();\r\n    this._addPairs();\r\n  }\r\n\r\n  _calcBoundingBox() {\r\n    const atoms = this._complex._atoms;\r\n    const nAtoms = atoms.length;\r\n    let maxRad = _getBondingRadius(atoms[0]);\r\n    for (let i = 1; i < nAtoms; ++i) {\r\n      maxRad = Math.max(maxRad, _getBondingRadius(atoms[i]));\r\n    }\r\n    this._vBoxMax.addScalar(maxRad);\r\n    this._vBoxMin.addScalar(-maxRad);\r\n    this._maxRad = maxRad * 1.2;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._pairCollection) {\r\n      this._pairCollection.destroy();\r\n    }\r\n  }\r\n}\r\n\r\nexport default AutoBond;\r\n","import * as THREE from 'three';\r\nimport Bond from './Bond';\r\nimport Element from './Element';\r\n\r\nconst cCrossThresh = 0.1;\r\nconst cAromaticType = Bond.BondType.AROMATIC;\r\nconst cAromaticAtoms = [\r\n  Element.ByName.C.number,\r\n  Element.ByName.N.number,\r\n  // Element.ByName.O.number,\r\n  // Element.ByName.S.number,\r\n];\r\n\r\n/** Conditions for bonds:\r\n   *   - Cross product with each subsequent bond to add is collinear and point to the same direction\r\n   *   - Each pair of a adjacent bonds belong to not more than one cycle\r\n   *   - If there is more than one candidates we try them in ascending order of angle values\r\n   */\r\n\r\nconst _coDirVectors = (function () {\r\n  const v1Tmp = new THREE.Vector3();\r\n  const v2Tmp = new THREE.Vector3();\r\n  const cp = new THREE.Vector3();\r\n  return function (v1, v2) {\r\n    v1Tmp.copy(v1).normalize();\r\n    v2Tmp.copy(v2).normalize();\r\n    cp.crossVectors(v1Tmp, v2Tmp);\r\n    if (cp.length() > cCrossThresh) {\r\n      return false;\r\n    }\r\n    // zero vector in out terms must be collinear to any\r\n    return v1Tmp.dot(v2Tmp) >= 0;\r\n  };\r\n}());\r\n\r\nfunction _insertAscending(arr, val) {\r\n  let idx = 0;\r\n  while (idx < arr.length && arr[idx] < val) {\r\n    ++idx;\r\n  }\r\n  arr.splice(idx, 0, val);\r\n}\r\n\r\nfunction _anotherAtom(bond, currAtom) {\r\n  return bond._left === currAtom ? bond._right : bond._left;\r\n}\r\n\r\nfunction _cosBetween(v1, v2) {\r\n  const theta = v1.dot(v2) / (Math.sqrt(v1.lengthSq() * v2.lengthSq()));\r\n  return THREE.MathUtils.clamp(theta, -1, 1);\r\n}\r\n\r\nfunction _markAromatic(bond) {\r\n  bond._type = cAromaticType;\r\n}\r\n\r\nclass Cycle {\r\n  constructor(atomsList) {\r\n    this.atoms = atomsList;\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    const { atoms } = this;\r\n    const center = new THREE.Vector3();\r\n    const nA = atoms.length;\r\n    for (let j = 0; j < nA; ++j) {\r\n      center.add(atoms[j].position);\r\n    }\r\n    center.multiplyScalar(1.0 / nA);\r\n    this.center = center;\r\n    this.radius = center.distanceTo(atoms[0].position.clone().lerp(atoms[1].position, 0.5));\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const { atoms } = this;\r\n    const nA = atoms.length;\r\n    let currAtom = atoms[0];\r\n    let nextAtom;\r\n\r\n    function checkBond(bond) {\r\n      if (bond._left === nextAtom || bond._right === nextAtom) {\r\n        process(bond);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < nA; ++i) {\r\n      nextAtom = atoms[(i + 1) % nA];\r\n      currAtom.forEachBond(checkBond);\r\n      currAtom = nextAtom;\r\n    }\r\n  }\r\n}\r\n\r\nfunction _isAromatic(bond) {\r\n  return bond._type === cAromaticType;\r\n}\r\n\r\nfunction _isPossibleAromatic(bond) {\r\n  if (bond.type === cAromaticType) {\r\n    return true;\r\n  }\r\n  const rightIdx = cAromaticAtoms.indexOf(bond._right.element.number);\r\n  const leftIdx = cAromaticAtoms.indexOf(bond._left.element.number);\r\n  return rightIdx !== -1 && leftIdx !== -1;\r\n}\r\n\r\nfunction _checkCycleSimple(cycle) {\r\n  return cycle.length > 3;\r\n}\r\n\r\nfunction _checkCycleComplex(cycle) {\r\n  console.assert(cycle.length > 2);\r\n  return true;\r\n}\r\n\r\nclass AromaticLoopsMarker {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    const bondsData = new Array(complex._bonds.length);\r\n    const bondMarks = new Array(complex._bonds.length);\r\n    for (let i = 0, n = bondsData.length; i < n; ++i) {\r\n      bondsData[i] = [];\r\n      bondMarks[i] = false;\r\n    }\r\n    this._bondsData = bondsData;\r\n    this._bondMarks = bondMarks;\r\n    this._resetCycles();\r\n  }\r\n\r\n  _resetCycles() {\r\n    this._cycles = [];\r\n    this._currIdx = -1;\r\n  }\r\n\r\n  _haveSameCycle(bondsData, bond1, bond2) {\r\n    const arr1 = bondsData[bond1._index];\r\n    const arr2 = bondsData[bond2._index];\r\n    const n1 = arr1.length;\r\n    const n2 = arr2.length;\r\n    let i1 = 0;\r\n    let i2 = 0;\r\n    while (i1 < n1 && i2 < n2) {\r\n      if (arr1[i1] === arr2[i2]) {\r\n        return true;\r\n      }\r\n      if (arr1[i1] > arr2[i2]) {\r\n        ++i2;\r\n      } else {\r\n        ++i1;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _tryBond(prevBond, currRight, currDir) {\r\n    const bondsOrder = [];\r\n    const bondsData = this._bondsData;\r\n    const currLeft = _anotherAtom(prevBond, currRight);\r\n    const currVec = currRight.position.clone().sub(currLeft.position);\r\n    const startAtomRef = this._currStart;\r\n    const self = this;\r\n    const bondMarks = this._bondMarks;\r\n    let checkAromatic = this._checkBond;\r\n    bondMarks[prevBond._index] = true;\r\n    checkAromatic = checkAromatic === undefined ? _isAromatic : checkAromatic;\r\n    currRight.forEachBond((newBond) => {\r\n      if (!checkAromatic(newBond)\r\n        || newBond === prevBond\r\n        || bondMarks[newBond._index]\r\n        || self._haveSameCycle(bondsData, prevBond, newBond)) {\r\n        return;\r\n      }\r\n      const anotherAtom = _anotherAtom(newBond, currRight);\r\n      const anotherVec = anotherAtom.position.clone().sub(currRight.position);\r\n      const val = anotherAtom === startAtomRef ? -2.0 : 1 - _cosBetween(currVec, anotherVec);\r\n      const newDir = anotherVec.cross(currVec);\r\n      if (!_coDirVectors(newDir, currDir)) {\r\n        return;\r\n      }\r\n      let idx = 0;\r\n      while (idx < bondsOrder.length && bondsOrder[idx].val < val) {\r\n        ++idx;\r\n      }\r\n      bondsOrder.splice(idx, 0, { bond: newBond, val, dir: newDir });\r\n    });\r\n\r\n    for (let i = 0, n = bondsOrder.length; i < n; ++i) {\r\n      const { bond } = bondsOrder[i];\r\n      const newRight = bond._left === currRight ? bond._right : bond._left;\r\n      if (newRight === startAtomRef) {\r\n        ++this._currIdx;\r\n        this._cycles.push([currRight]);\r\n        bondMarks[prevBond._index] = false;\r\n        return true;\r\n      }\r\n      if (this._tryBond(bond, newRight, bondsOrder[i].dir)) {\r\n        _insertAscending(bondsData[bond._index], this._currIdx);\r\n        this._cycles[this._currIdx].push(currRight);\r\n        bondMarks[prevBond._index] = false;\r\n        return true;\r\n      }\r\n    }\r\n    bondMarks[prevBond._index] = false;\r\n    return false;\r\n  }\r\n\r\n  _startCycle(bond) {\r\n    // start from left to right\r\n    this._currStart = bond._left;\r\n    if (this._tryBond(bond, bond._right, new THREE.Vector3())) {\r\n      _insertAscending(this._bondsData[bond._index], this._currIdx);\r\n      this._cycles[this._currIdx].push(bond._left);\r\n    }\r\n  }\r\n\r\n  _findLoops(checkBond, checkCycle) {\r\n    this._checkBond = checkBond;\r\n    const complex = this._complex;\r\n    const self = this;\r\n\r\n    complex.forEachComponent((component) => {\r\n      self._resetCycles();\r\n      component.forEachBond((bond) => {\r\n        if (checkBond(bond)) {\r\n          self._startCycle(bond);\r\n        }\r\n      });\r\n      const cycles = self._cycles;\r\n      for (let i = 0, n = cycles.length; i < n; ++i) {\r\n        const cycle = cycles[i];\r\n        if (!checkCycle(cycle)) {\r\n          continue;\r\n        }\r\n        const newCycle = new Cycle(cycle);\r\n        newCycle.forEachBond(_markAromatic);\r\n        component.addCycle(newCycle);\r\n      }\r\n    });\r\n  }\r\n\r\n  markCycles() {\r\n    this._findLoops(_isAromatic, _checkCycleSimple);\r\n  }\r\n\r\n  detectCycles() {\r\n    this._findLoops(_isPossibleAromatic, _checkCycleComplex);\r\n  }\r\n}\r\n\r\nexport default AromaticLoopsMarker;\r\n","import * as THREE from 'three';\r\nimport utils from '../utils';\r\n\r\n/**\r\n * Calculate min & max radius of a sphere slice between zMin & zMax\r\n *\r\n * @param {Vector3} center - center of the sphere\r\n * @param {number} radius  - sphere radius\r\n * @param {number} zMin - lower bound of the slice\r\n * @param {number} zMax - upper bound of the slice\r\n */\r\nfunction _getSphereSliceRadiusRange(center, radius, zMin, zMax) {\r\n  const dzMin = zMin - center.z;\r\n  const dzMax = zMax - center.z;\r\n  const rzMin = Math.sqrt(Math.max(radius * radius - dzMin * dzMin, 0.0));\r\n  const rzMax = Math.sqrt(Math.max(radius * radius - dzMax * dzMax, 0.0));\r\n\r\n  const rMin = Math.min(rzMin, rzMax);\r\n  let rMax;\r\n\r\n  if (zMin <= center.z && zMax >= center.z) {\r\n    // sphere's main diameter is inside slice\r\n    rMax = radius;\r\n  } else {\r\n    rMax = Math.max(rzMin, rzMax);\r\n  }\r\n\r\n  return [rMin, rMax];\r\n}\r\n\r\n/**\r\n * Calculate min & max radius of a circle slice between yMin & yMax.\r\n *\r\n * To maintain analogy with _getSphereSliceRadiusRange we call radius what in fact is\r\n * half-width (along X axis) of the slice, i.e. 1D-sphere radius.\r\n *\r\n * @param {Vector3} center - center of the circle (z can be ignored)\r\n * @param {number} radius  - circle radius\r\n * @param {number} yMin - lower bound of the slice\r\n * @param {number} yMax - upper bound of the slice\r\n * @returns {Array} - array of two numbers (min & max radius, or half-width)\r\n */\r\nfunction _getCircleSliceRadiusRange(center, radius, yMin, yMax) {\r\n  const dyMin = yMin - center.y;\r\n  const dyMax = yMax - center.y;\r\n  const ryMin = Math.sqrt(Math.max(radius * radius - dyMin * dyMin, 0.0));\r\n  const ryMax = Math.sqrt(Math.max(radius * radius - dyMax * dyMax, 0.0));\r\n\r\n  const rMin = Math.min(ryMin, ryMax);\r\n  let rMax;\r\n\r\n  if (yMin <= center.y && yMax >= center.y) {\r\n    // slice's main diameter is inside slice\r\n    rMax = radius;\r\n  } else {\r\n    rMax = Math.max(ryMin, ryMax);\r\n  }\r\n\r\n  return [rMin, rMax];\r\n}\r\n\r\n/**\r\n * VoxelWorld constructor\r\n *\r\n * @param {Box3} box - bounding box of the volume to be partitioned\r\n * @param {Vector3} vCellSizeHint - target voxel size (actual voxel size may differ from this)\r\n */\r\nclass VoxelWorld {\r\n  constructor(box, vCellSizeHint) {\r\n    this._box = box.clone();\r\n    const size = new THREE.Vector3();\r\n    box.getSize(size);\r\n    this._count = size.clone().divide(vCellSizeHint).floor().max(new THREE.Vector3(1, 1, 1));\r\n    this._last = this._count.clone().subScalar(1);\r\n    this._cellSize = size.clone().divide(this._count);\r\n    this._cellInnerR = 0.5 * Math.min(Math.min(this._cellSize.x, this._cellSize.y), this._cellSize.z);\r\n    this._cellOuterR = 0.5 * Math.sqrt(this._cellSize.dot(this._cellSize));\r\n\r\n    // array of voxels, each element contains index of first atom in voxel\r\n    const numVoxels = this._count.x * this._count.y * this._count.z;\r\n    this._voxels = utils.allocateTyped(Int32Array, numVoxels);\r\n    for (let i = 0; i < numVoxels; ++i) {\r\n      this._voxels[i] = -1;\r\n    }\r\n\r\n    // array of atoms that stores multiple single-linked lists\r\n    // two elements for each atom: Atom ref, index of next atom (in this array\r\n    this._atoms = [];\r\n  }\r\n\r\n  /**\r\n   * Add all atoms from a complex to voxel world\r\n   *\r\n   * @param {Complex} complex - complex\r\n   */\r\n  addAtoms(complex) {\r\n    const self = this;\r\n\r\n    let idx = this._atoms.length;\r\n\r\n    // resize array of atoms\r\n    this._atoms.length += 2 * complex.getAtomCount();\r\n\r\n    complex.forEachAtom((atom) => {\r\n      // find which voxel contains this atom\r\n      const voxelIdx = self._findVoxel(atom.position);\r\n\r\n      // push current atom to the head of voxel's atom list\r\n      self._atoms[idx] = atom;\r\n      self._atoms[idx + 1] = self._voxels[voxelIdx];\r\n      self._voxels[voxelIdx] = idx;\r\n\r\n      idx += 2;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get voxel that contains specified 3D point (we use clamp at the edges)\r\n   *\r\n   * @param {Vector3} point - a point in 3D\r\n   * @returns {number} - index of voxel\r\n   */\r\n  static _zero = new THREE.Vector3(0, 0, 0);\r\n\r\n  static _voxel = new THREE.Vector3();\r\n\r\n  _findVoxel(point) {\r\n    const zero = VoxelWorld._zero;\r\n    const voxel = VoxelWorld._voxel;\r\n    voxel.copy(point)\r\n      .sub(this._box.min)\r\n      .divide(this._cellSize)\r\n      .floor()\r\n      .clamp(zero, this._last);\r\n    return voxel.x + this._count.x * (voxel.y + this._count.y * voxel.z);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom in voxel\r\n   *\r\n   * @param {number} voxel - index of voxel\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  _forEachAtomInVoxel(voxel, process) {\r\n    for (let i = this._voxels[voxel]; i >= 0; i = this._atoms[i + 1]) {\r\n      process(this._atoms[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each voxel that is touched by given sphere. Callback also takes flag\r\n   * isInside specifying whether voxel lies inside the sphere entirely.\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(number,bool)} process - function to call that takes voxel index and boolean isInside\r\n   */\r\n\r\n  static _xRange = new THREE.Vector2();\r\n\r\n  static _yRange = new THREE.Vector2();\r\n\r\n  static _zRange = new THREE.Vector2();\r\n\r\n  _forEachVoxelWithinRadius(center, radius, process) {\r\n    const xRange = VoxelWorld._xRange;\r\n    const yRange = VoxelWorld._yRange;\r\n    const zRange = VoxelWorld._zRange;\r\n\r\n    // switch to a faster method unless cell size is much smaller than sphere radius\r\n    if (radius / this._cellInnerR < 10) {\r\n      this._forEachVoxelWithinRadiusSimple(center, radius, process);\r\n      return;\r\n    }\r\n\r\n    let rRangeXY;\r\n    let rRangeX;\r\n    let xVal;\r\n    let yVal;\r\n    let zVal;\r\n    let isInsideX;\r\n    let isInsideY;\r\n    let isInsideZ;\r\n\r\n    zRange.set(center.z - radius, center.z + radius);\r\n    zRange.subScalar(this._box.min.z)\r\n      .divideScalar(this._cellSize.z)\r\n      .floor()\r\n      .clampScalar(0, this._count.z - 1);\r\n\r\n    for (let z = zRange.x; z <= zRange.y; ++z) {\r\n      zVal = [this._box.min.z + z * this._cellSize.z,\r\n        this._box.min.z + (z + 1) * this._cellSize.z];\r\n\r\n      isInsideZ = (center.z - radius <= zVal[0]) && (zVal[1] <= center.z + radius);\r\n\r\n      rRangeXY = _getSphereSliceRadiusRange(center, radius, zVal[0], zVal[1]);\r\n\r\n      yRange.set(center.y - rRangeXY[1], center.y + rRangeXY[1]);\r\n      yRange.subScalar(this._box.min.y)\r\n        .divideScalar(this._cellSize.y)\r\n        .floor()\r\n        .clampScalar(0, this._count.y - 1);\r\n\r\n      for (let y = yRange.x; y <= yRange.y; ++y) {\r\n        yVal = [this._box.min.y + y * this._cellSize.y,\r\n          this._box.min.y + (y + 1) * this._cellSize.y];\r\n\r\n        isInsideY = (center.y - rRangeXY[0] <= yVal[0]) && (yVal[1] <= center.y + rRangeXY[0]);\r\n\r\n        rRangeX = _getCircleSliceRadiusRange(center, rRangeXY[1], yVal[0], yVal[1]);\r\n\r\n        xRange.set(center.x - rRangeX[1], center.x + rRangeX[1]);\r\n        xRange.subScalar(this._box.min.x)\r\n          .divideScalar(this._cellSize.x)\r\n          .floor()\r\n          .clampScalar(0, this._count.x - 1);\r\n\r\n        for (let { x } = xRange; x <= xRange.y; ++x) {\r\n          xVal = [this._box.min.x + x * this._cellSize.x,\r\n            this._box.min.x + (x + 1) * this._cellSize.x];\r\n          isInsideX = (center.x - rRangeX[0] <= xVal[0]) && (xVal[1] <= center.x + rRangeX[0]);\r\n\r\n          process(x + this._count.x * (y + this._count.y * z), isInsideX && isInsideY && isInsideZ);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each voxel that is touched by given sphere. Callback also takes flag\r\n   * isInside specifying whether voxel lies inside the sphere entirely.\r\n   * This is a version of method that doesn't try to \"calculate\" what voxels fall inside radius\r\n   * but instead just checks all voxels inside sphere's bounding box. This should be faster\r\n   * unless cell size is much smaller than sphere radius.\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(number,bool)} process - function to call that takes voxel index and boolean isInside\r\n   */\r\n\r\n  static _vCenter = new THREE.Vector3();\r\n\r\n  _forEachVoxelWithinRadiusSimple(center, radius, process) {\r\n    const xRange = VoxelWorld._xRange;\r\n    const yRange = VoxelWorld._yRange;\r\n    const zRange = VoxelWorld._zRange;\r\n    const vCenter = VoxelWorld._vCenter;\r\n\r\n    const distTouch2 = (radius + this._cellOuterR) * (radius + this._cellOuterR);\r\n    let distInside2 = -1.0;\r\n    if (radius > this._cellOuterR) {\r\n      distInside2 = (radius - this._cellOuterR) * (radius - this._cellOuterR);\r\n    }\r\n\r\n    // calculate bounding box for the sphere\r\n    xRange.set(center.x - radius, center.x + radius);\r\n    xRange.subScalar(this._box.min.x)\r\n      .divideScalar(this._cellSize.x)\r\n      .floor();\r\n    xRange.x = Math.min(Math.max(xRange.x, 0), this._count.x - 1);\r\n    xRange.y = Math.min(Math.max(xRange.y, 0), this._count.x - 1);\r\n\r\n    yRange.set(center.y - radius, center.y + radius);\r\n    yRange.subScalar(this._box.min.y)\r\n      .divideScalar(this._cellSize.y)\r\n      .floor();\r\n    yRange.x = Math.min(Math.max(yRange.x, 0), this._count.y - 1);\r\n    yRange.y = Math.min(Math.max(yRange.y, 0), this._count.y - 1);\r\n\r\n    zRange.set(center.z - radius, center.z + radius);\r\n    zRange.subScalar(this._box.min.z)\r\n      .divideScalar(this._cellSize.z)\r\n      .floor();\r\n    zRange.x = Math.min(Math.max(zRange.x, 0), this._count.z - 1);\r\n    zRange.y = Math.min(Math.max(zRange.y, 0), this._count.z - 1);\r\n\r\n    for (let z = zRange.x; z <= zRange.y; ++z) {\r\n      const zVal = [this._box.min.z + z * this._cellSize.z,\r\n        this._box.min.z + (z + 1) * this._cellSize.z];\r\n      vCenter.z = 0.5 * (zVal[0] + zVal[1]);\r\n\r\n      for (let y = yRange.x; y <= yRange.y; ++y) {\r\n        const yVal = [this._box.min.y + y * this._cellSize.y,\r\n          this._box.min.y + (y + 1) * this._cellSize.y];\r\n        vCenter.y = 0.5 * (yVal[0] + yVal[1]);\r\n\r\n        for (let { x } = xRange; x <= xRange.y; ++x) {\r\n          const xVal = [this._box.min.x + x * this._cellSize.x,\r\n            this._box.min.x + (x + 1) * this._cellSize.x];\r\n          vCenter.x = 0.5 * (xVal[0] + xVal[1]);\r\n\r\n          const d2 = center.distanceToSquared(vCenter);\r\n          if (d2 <= distTouch2) {\r\n            process(x + this._count.x * (y + this._count.y * z), d2 <= distInside2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom within given sphere\r\n   *\r\n   * @param {Vector3} center - center of the sphere\r\n   * @param {number} radius  - sphere radius\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinRadius(center, radius, process) {\r\n    const self = this;\r\n    const r2 = radius * radius;\r\n\r\n    self._forEachVoxelWithinRadius(center, radius, (voxel, isInside) => {\r\n      if (isInside) {\r\n        self._forEachAtomInVoxel(voxel, process);\r\n      } else {\r\n        self._forEachAtomInVoxel(voxel, (atom) => {\r\n          if (center.distanceToSquared(atom.position) <= r2) {\r\n            process(atom);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms defined by mask\r\n   *\r\n   * @param {Complex} complex - complex\r\n   * @param {number} mask - bit mask\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinDistFromMasked(complex, mask, dist, process) {\r\n    this._forEachAtomWithinDistFromGroup((atomProc) => {\r\n      complex.forEachAtom((atom) => {\r\n        if ((atom.mask & mask) !== 0) {\r\n          atomProc(atom);\r\n        }\r\n      });\r\n    }, dist, process);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms defined by selector\r\n   *\r\n   * @param {Complex} complex - complex\r\n   * @param {number} selector - selector\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  forEachAtomWithinDistFromSelected(complex, selector, dist, process) {\r\n    this._forEachAtomWithinDistFromGroup((atomProc) => {\r\n      complex.forEachAtom((atom) => {\r\n        if (selector.includesAtom(atom)) {\r\n          atomProc(atom);\r\n        }\r\n      });\r\n    }, dist, process);\r\n  }\r\n\r\n  /**\r\n   * Call a function for each atom of given complex within given distance from group of atoms\r\n   *\r\n   * @param {function} forEachAtom - enumerator of atoms in the group\r\n   * @param {number} dist - distance\r\n   * @param {function(Atom)} process - function to call\r\n   */\r\n  _forEachAtomWithinDistFromGroup(forEachAtom, dist, process) {\r\n    const self = this;\r\n    const r2 = dist * dist;\r\n\r\n    const voxels = [];\r\n    const atoms = [];\r\n    let idx = 0;\r\n\r\n    // build \"within radius\" atom list for each voxel\r\n    forEachAtom((atom) => {\r\n      self._forEachVoxelWithinRadius(atom.position, dist, (voxel, isInside) => {\r\n        if (isInside) {\r\n          // this voxel is inside circle -- no check will be required\r\n          voxels[voxel] = -1;\r\n        } else if (typeof voxels[voxel] === 'undefined') {\r\n          // this voxel isn't covered yet -- start building list of atoms\r\n          atoms.push(atom);\r\n          atoms.push(-1);\r\n          voxels[voxel] = idx;\r\n          idx += 2;\r\n        } else if (voxels[voxel] !== -1) {\r\n          // this voxel has a list of atoms required for distance check -- add atom to the list\r\n          atoms.push(atom);\r\n          atoms.push(voxels[voxel]);\r\n          voxels[voxel] = idx;\r\n          idx += 2;\r\n        }\r\n      });\r\n    });\r\n\r\n    let voxel;\r\n\r\n    const processIfWithin = function (atom) {\r\n      if (typeof voxels[voxel] === 'undefined') {\r\n        return;\r\n      }\r\n\r\n      idx = voxels[voxel];\r\n      if (idx === -1) {\r\n        // this voxel is fully covered\r\n        process(atom);\r\n        return;\r\n      }\r\n\r\n      // check distance to each atom within radius from this voxel\r\n      for (; idx >= 0; idx = atoms[idx + 1]) {\r\n        if (atom.position.distanceToSquared(atoms[idx].position) < r2) {\r\n          process(atom);\r\n          break;\r\n        }\r\n      }\r\n    };\r\n\r\n    // for each marked voxel\r\n    for (voxel in voxels) {\r\n      if (voxels.hasOwnProperty(voxel)) {\r\n        self._forEachAtomInVoxel(voxel, processIfWithin);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default VoxelWorld;\r\n","import ResidueType from './ResidueType';\r\nimport PairCollection from './AtomPairs';\r\n\r\nconst MINIMAL_DISTANCE = 0.5;\r\nconst MIN_HBOND_ENERGY = -9.9;\r\nconst MAX_HBOND_ENERGY = -0.5;\r\nconst COUPLING_CONSTANT = -27.888; // = -332 * 0.42 * 0.2\r\nconst MAX_COUPLING_DISTANCE = 5.0; // how far is the closest atom of a potential partner residue from CA atom\r\nconst MAX_RESIDUES_THRESHOLD = 1000;\r\n\r\nexport default class HBondInfo {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._hbonds = []; // array of bond info for each residue\r\n    if (this._complex._residues.length > MAX_RESIDUES_THRESHOLD) {\r\n      this._buildVW(); // optimized version using voxel grid\r\n    } else {\r\n      this._build(); // test all pairs of residues\r\n    }\r\n  }\r\n\r\n  isBond(from, to) {\r\n    if (this._hbonds[from]) {\r\n      const [acc0, acc1] = this._hbonds[from].acceptor;\r\n      if (acc0 && acc0.residue === to && acc0.energy < MAX_HBOND_ENERGY) {\r\n        return true;\r\n      }\r\n      if (acc1 && acc1.residue === to && acc1.energy < MAX_HBOND_ENERGY) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _build() {\r\n    const self = this;\r\n\r\n    for (let i = 0; i < this._complex._residues.length - 1; ++i) {\r\n      const ri = this._complex._residues[i];\r\n      if ((ri.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        continue;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      let preri = null;\r\n      if (i > 0 && (this._complex._residues[i - 1].getType().flags & ResidueType.Flags.PROTEIN)\r\n        && ri._sequence === this._complex._residues[i - 1]._sequence + 1) {\r\n        preri = this._complex._residues[i - 1];\r\n      }\r\n\r\n      for (let j = i + 1; j < this._complex._residues.length; ++j) {\r\n        const rj = this._complex._residues[j];\r\n        if ((rj.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n          continue;\r\n        }\r\n\r\n        // get predecessor in chain\r\n        let prerj = null;\r\n        if ((this._complex._residues[j - 1].getType().flags & ResidueType.Flags.PROTEIN)\r\n          && rj._sequence === this._complex._residues[j - 1]._sequence + 1) {\r\n          prerj = this._complex._residues[j - 1];\r\n        }\r\n\r\n        self._calcHBondEnergy(preri, ri, rj);\r\n        if (j !== i + 1) {\r\n          self._calcHBondEnergy(prerj, rj, ri);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _buildVW() {\r\n    const self = this;\r\n    const residues = this._complex._residues;\r\n    let ri;\r\n    let preri;\r\n\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return;\r\n    }\r\n\r\n    const pairs = new PairCollection(this._complex._residues.length * this._complex._residues.length / 2);\r\n\r\n    function processAtom(atom) {\r\n      const rj = atom.residue;\r\n\r\n      if (rj._index === ri._index) {\r\n        return;\r\n      }\r\n\r\n      if ((rj.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        return;\r\n      }\r\n\r\n      if (!pairs.addPair(ri._index, rj._index)) {\r\n        // we've seen this pair\r\n        return;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      let prerj = rj._index > 0 ? residues[rj._index - 1] : null;\r\n      if (prerj\r\n        && ((prerj.getType().flags & ResidueType.Flags.PROTEIN) === 0 || rj._sequence !== prerj._sequence + 1)) {\r\n        prerj = null;\r\n      }\r\n\r\n      self._calcHBondEnergy(preri, ri, rj);\r\n      if (rj._index !== ri._index + 1) {\r\n        self._calcHBondEnergy(prerj, rj, ri);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < residues.length - 1; ++i) {\r\n      ri = residues[i];\r\n      if ((ri.getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n        continue;\r\n      }\r\n\r\n      // get predecessor in chain\r\n      preri = i > 0 ? residues[i - 1] : null;\r\n      if (preri\r\n        && ((preri.getType().flags & ResidueType.Flags.PROTEIN) === 0 || ri._sequence !== preri._sequence + 1)) {\r\n        preri = null;\r\n      }\r\n\r\n      vw.forEachAtomWithinRadius(this._residueGetCAlpha(ri), MAX_COUPLING_DISTANCE, processAtom);\r\n    }\r\n  }\r\n\r\n  _residueGetCAlpha(res) {\r\n    for (let i = 0; i < res._atoms.length; ++i) {\r\n      const { name } = res._atoms[i];\r\n      if (name === 'CA'\r\n        || name === 'C1') {\r\n        return res._atoms[i].position;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _residueGetCO(res) {\r\n    let c = null;\r\n    let o = null;\r\n\r\n    res.forEachAtom((a) => {\r\n      if (a.name === 'C') {\r\n        c = a.position;\r\n      } else if (a.name === 'O') {\r\n        o = a.position;\r\n      }\r\n    });\r\n\r\n    return [c, o];\r\n  }\r\n\r\n  // TODO Support hydrogen defined in complex\r\n  _residueGetNH(prev, res) {\r\n    const [c, o] = this._residueGetCO(prev);\r\n\r\n    let n;\r\n    res.forEachAtom((a) => {\r\n      if (a.name === 'N') {\r\n        n = a.position;\r\n      }\r\n    });\r\n\r\n    if (c && o && n) {\r\n      // calculate hydrogen position\r\n      const h = c.clone();\r\n      h.sub(o);\r\n      h.multiplyScalar(1.0 / h.length());\r\n      h.add(n);\r\n\r\n      return [n, h];\r\n    }\r\n\r\n    return [null, null];\r\n  }\r\n\r\n  _calcHBondEnergy(predonor, donor, acceptor) {\r\n    let result = 0;\r\n\r\n    if (predonor === null) {\r\n      return result;\r\n    }\r\n\r\n    if (donor.getType().getName() !== 'PRO') {\r\n      const [n, h] = this._residueGetNH(predonor, donor);\r\n      const [c, o] = this._residueGetCO(acceptor);\r\n\r\n      if (n === null || h === null || c === null || o === null) {\r\n        return result;\r\n      }\r\n\r\n      const distanceHO = h.distanceTo(o);\r\n      const distanceHC = h.distanceTo(c);\r\n      const distanceNC = n.distanceTo(c);\r\n      const distanceNO = n.distanceTo(o);\r\n\r\n      if (distanceHO < MINIMAL_DISTANCE || distanceHC < MINIMAL_DISTANCE\r\n          || distanceNC < MINIMAL_DISTANCE || distanceNO < MINIMAL_DISTANCE) {\r\n        result = MIN_HBOND_ENERGY;\r\n      } else {\r\n        result = COUPLING_CONSTANT / distanceHO - COUPLING_CONSTANT / distanceHC\r\n                 + COUPLING_CONSTANT / distanceNC - COUPLING_CONSTANT / distanceNO;\r\n      }\r\n\r\n      // DSSP compatibility mode:\r\n      result = Math.round(result * 1000) / 1000;\r\n\r\n      if (result < MIN_HBOND_ENERGY) {\r\n        result = MIN_HBOND_ENERGY;\r\n      }\r\n    }\r\n\r\n    // update donor\r\n    if (typeof this._hbonds[donor._index] === 'undefined') {\r\n      this._hbonds[donor._index] = {\r\n        donor: [],\r\n        acceptor: [],\r\n      };\r\n    }\r\n    const donorInfo = this._hbonds[donor._index];\r\n\r\n    if (donorInfo.acceptor.length < 2) {\r\n      donorInfo.acceptor.push({\r\n        residue: acceptor._index,\r\n        energy: result,\r\n      });\r\n    }\r\n\r\n    if (donorInfo.acceptor.length > 1) {\r\n      if (result < donorInfo.acceptor[0].energy) {\r\n        donorInfo.acceptor[1].residue = donorInfo.acceptor[0].residue;\r\n        donorInfo.acceptor[1].energy = donorInfo.acceptor[0].energy;\r\n        donorInfo.acceptor[0].residue = acceptor._index;\r\n        donorInfo.acceptor[0].energy = result;\r\n      } else if (result < donorInfo.acceptor[1].energy) {\r\n        donorInfo.acceptor[1].residue = acceptor._index;\r\n        donorInfo.acceptor[1].energy = result;\r\n      }\r\n    }\r\n\r\n    // update acceptor\r\n    if (typeof this._hbonds[acceptor._index] === 'undefined') {\r\n      this._hbonds[acceptor._index] = {\r\n        donor: [],\r\n        acceptor: [],\r\n      };\r\n    }\r\n    const accInfo = this._hbonds[acceptor._index];\r\n\r\n    if (accInfo.donor.length < 2) {\r\n      accInfo.donor.push({\r\n        residue: donor._index,\r\n        energy: result,\r\n      });\r\n    }\r\n\r\n    if (accInfo.donor.length > 1) {\r\n      if (result < accInfo.donor[0].energy) {\r\n        accInfo.donor[1].residue = accInfo.donor[0].residue;\r\n        accInfo.donor[1].energy = accInfo.donor[0].energy;\r\n        accInfo.donor[0].residue = donor._index;\r\n        accInfo.donor[0].energy = result;\r\n      } else if (result < accInfo.donor[1].energy) {\r\n        accInfo.donor[1].residue = donor._index;\r\n        accInfo.donor[1].energy = result;\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n","import HBondInfo from './HBondInfo';\r\nimport ResidueType from './ResidueType';\r\n\r\nconst BridgeType = Object.freeze({\r\n  NO_BRIDGE: 0,\r\n  PARALLEL: 1,\r\n  ANTI_PARALLEL: 2,\r\n});\r\n\r\nconst HelixFlag = Object.freeze({\r\n  START: 1,\r\n  MIDDLE: 2,\r\n  END: 3,\r\n  START_AND_END: 4,\r\n});\r\n\r\nconst StructureType = Object.freeze({\r\n  STRAND: 'E',\r\n  BRIDGE: 'B',\r\n  HELIX_310: 'G',\r\n  HELIX_ALPHA: 'H',\r\n  HELIX_PI: 'I',\r\n  TURN: 'T',\r\n  BEND: 'S',\r\n  LOOP: ' ',\r\n});\r\n\r\nexport default class SecondaryStructureMap {\r\n  constructor(complex) {\r\n    this._complex = complex;\r\n    this._build();\r\n  }\r\n\r\n  _build() {\r\n    const self = this;\r\n    this._hbonds = new HBondInfo(this._complex);\r\n    this._ss = []; // DSSP map by residue\r\n\r\n    // auxilliary data\r\n    this._sheet = [];\r\n    this._betaPartners = [];\r\n    this._bend = [];\r\n    for (let i = 0; i < this._complex.getResidues().length; ++i) {\r\n      this._betaPartners[i] = [];\r\n    }\r\n    this._helixFlags = [];\r\n    this._helixFlags[3] = [];\r\n    this._helixFlags[4] = [];\r\n    this._helixFlags[5] = [];\r\n\r\n    // calculate peptide chain lengths\r\n    this._chainLengths = [];\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i].getResidues();\r\n      let len = 0;\r\n      for (; len < chain.length; ++len) {\r\n        if ((chain[len].getType().flags & ResidueType.Flags.PROTEIN) === 0) {\r\n          break;\r\n        }\r\n      }\r\n      this._chainLengths[i] = len;\r\n    }\r\n\r\n    this._buildBetaSheets();\r\n\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      self._buildAlphaHelices(this._complex._chains[i].getResidues(), this._chainLengths[i], false);\r\n    }\r\n  }\r\n\r\n  _buildAlphaHelices(inResidues, chainLength, inPreferPiHelices) {\r\n    // Helix and Turn\r\n    for (let stride = 3; stride <= 5; ++stride) {\r\n      if (inResidues.length < stride) {\r\n        break;\r\n      }\r\n\r\n      for (let i = 0; i + stride < chainLength; ++i) {\r\n        if (this._hbonds.isBond(inResidues[i + stride]._index, inResidues[i]._index)\r\n        /* && NoChainBreak(res[i], res[i + stride]) */) {\r\n          this._helixFlags[stride][inResidues[i + stride]._index] = HelixFlag.END;\r\n          for (let j = i + 1; j < i + stride; ++j) {\r\n            if (typeof this._helixFlags[stride][inResidues[j]._index] === 'undefined') {\r\n              this._helixFlags[stride][inResidues[j]._index] = HelixFlag.MIDDLE;\r\n            }\r\n          }\r\n\r\n          if (this._helixFlags[stride][inResidues[i]._index] === HelixFlag.END) {\r\n            this._helixFlags[stride][inResidues[i]._index] = HelixFlag.START_AND_END;\r\n          } else {\r\n            this._helixFlags[stride][inResidues[i]._index] = HelixFlag.START;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 2; i < chainLength - 2; ++i) {\r\n      const kappa = this._kappa(inResidues[i - 2], inResidues[i], inResidues[i + 2]);\r\n      this._bend[inResidues[i]._index] = (kappa !== 360 && kappa > 70);\r\n    }\r\n\r\n    for (let i = 1; i + 4 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 4) && this._isHelixStart(inResidues[i - 1]._index, 4)) {\r\n        for (let j = i; j <= i + 3; ++j) {\r\n          this._ss[inResidues[j]._index] = StructureType.HELIX_ALPHA;\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 3 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 3) && this._isHelixStart(inResidues[i - 1]._index, 3)) {\r\n        let empty = true;\r\n        for (let j = i; empty && j <= i + 2; ++j) {\r\n          empty = typeof this._ss[inResidues[j]._index] === 'undefined'\r\n                  || this._ss[inResidues[j]._index] === StructureType.HELIX_310;\r\n        }\r\n        if (empty) {\r\n          for (let j = i; j <= i + 2; ++j) {\r\n            this._ss[inResidues[j]._index] = StructureType.HELIX_310;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 5 < chainLength; ++i) {\r\n      if (this._isHelixStart(inResidues[i]._index, 5) && this._isHelixStart(inResidues[i - 1]._index, 5)) {\r\n        let empty = true;\r\n        for (let j = i; empty && j <= i + 4; ++j) {\r\n          empty = typeof this._ss[inResidues[j]._index] === 'undefined'\r\n                  || this._ss[inResidues[j]._index] === StructureType.HELIX_PI\r\n                  || (inPreferPiHelices && this._ss[inResidues[j]._index] === StructureType.HELIX_ALPHA);\r\n        }\r\n        if (empty) {\r\n          for (let j = i; j <= i + 4; ++j) {\r\n            this._ss[inResidues[j]._index] = StructureType.HELIX_PI;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 1; i + 1 < chainLength; ++i) {\r\n      if (typeof this._ss[inResidues[i]._index] === 'undefined') {\r\n        let isTurn = false;\r\n        for (let stride = 3; stride <= 5 && !isTurn; ++stride) {\r\n          for (let k = 1; k < stride && !isTurn; ++k) {\r\n            isTurn = (i >= k) && this._isHelixStart(inResidues[i - k]._index, stride);\r\n          }\r\n        }\r\n\r\n        if (isTurn) {\r\n          this._ss[inResidues[i]._index] = StructureType.TURN;\r\n        } else if (this._bend[inResidues[i]._index]) {\r\n          this._ss[inResidues[i]._index] = StructureType.BEND;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _residueGetCAlpha(res) {\r\n    for (let i = 0; i < res._atoms.length; ++i) {\r\n      const { name } = res._atoms[i];\r\n      if (name === 'CA'\r\n          || name === 'C1') {\r\n        return res._atoms[i].position;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _cosinusAngle(p1, p2, p3, p4) {\r\n    const v12 = p1.clone().sub(p2);\r\n    const v34 = p3.clone().sub(p4);\r\n\r\n    let result = 0;\r\n\r\n    const x = v12.dot(v12) * v34.dot(v34);\r\n    if (x > 0) {\r\n      result = v12.dot(v34) / Math.sqrt(x);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  _kappa(prevPrev, res, nextNext) {\r\n    const curCA = this._residueGetCAlpha(res);\r\n    const ppCA = this._residueGetCAlpha(prevPrev);\r\n    const nnCA = this._residueGetCAlpha(nextNext);\r\n    if (curCA === null || ppCA === null || nnCA === null) {\r\n      return 180;\r\n    }\r\n\r\n    const ckap = this._cosinusAngle(curCA, ppCA, nnCA, curCA);\r\n    const skap = Math.sqrt(1 - ckap * ckap);\r\n    return Math.atan2(skap, ckap) * 180 / Math.PI;\r\n  }\r\n\r\n  _isHelixStart(res, stride) {\r\n    return (this._helixFlags[stride][res] === HelixFlag.START\r\n      || this._helixFlags[stride][res] === HelixFlag.START_AND_END);\r\n  }\r\n\r\n  _buildBetaSheets() {\r\n    // find bridges\r\n    // check each chain against each other chain, and against itself\r\n    const bridges = [];\r\n    for (let a = 0; a < this._complex._chains.length; ++a) {\r\n      const lenA = this._chainLengths[a];\r\n      if (lenA <= 4) {\r\n        continue;\r\n      }\r\n\r\n      const chainA = this._complex._chains[a].getResidues();\r\n\r\n      for (let b = a; b < this._complex._chains.length; ++b) {\r\n        const lenB = this._chainLengths[b];\r\n        if (lenB <= 4) {\r\n          continue;\r\n        }\r\n\r\n        const chainB = this._complex._chains[b].getResidues();\r\n\r\n        for (let i = 1; i + 1 < lenA; ++i) {\r\n          const ri = chainA[i];\r\n\r\n          let j = 1;\r\n          if (b === a) {\r\n            j = i + 3; // check for self-bridges forward down the chain\r\n          }\r\n\r\n          for (; j + 1 < lenB; ++j) {\r\n            const rj = chainB[j];\r\n\r\n            const type = this._testBridge(chainA, i, chainB, j);\r\n            if (type === BridgeType.NO_BRIDGE) {\r\n              continue;\r\n            }\r\n\r\n            // there is a bridge, try to attach it to previously found sequence\r\n            let found = false;\r\n            for (const bridge of bridges) {\r\n              if (type !== bridge.type || ri._index !== bridge.i[bridge.i.length - 1] + 1) {\r\n                continue;\r\n              }\r\n\r\n              if (type === BridgeType.PARALLEL && bridge.j[bridge.j.length - 1] + 1 === rj._index) {\r\n                bridge.i.push(ri._index);\r\n                bridge.j.push(rj._index);\r\n                found = true;\r\n                break;\r\n              }\r\n\r\n              if (type === BridgeType.ANTI_PARALLEL && bridge.j[0] - 1 === rj._index) {\r\n                bridge.i.push(ri._index);\r\n                bridge.j.unshift(rj._index);\r\n                found = true;\r\n                break;\r\n              }\r\n            }\r\n\r\n            // this bridge cannot be attached anywhere, start a new sequence\r\n            if (!found) {\r\n              bridges.push({\r\n                type,\r\n                i: [ri._index],\r\n                chainI: ri.getChain()._index,\r\n                j: [rj._index],\r\n                chainJ: rj.getChain()._index,\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // extend ladders\r\n    bridges.sort((a, b) => {\r\n      if (a.chainI < b.chainI || (a.chainI === b.chainI && a.i[0] < b.i[0])) {\r\n        return -1;\r\n      }\r\n      return 1;\r\n    });\r\n\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      for (let j = i + 1; j < bridges.length; ++j) {\r\n        const ibi = bridges[i].i[0];\r\n        const iei = bridges[i].i[bridges[i].i.length - 1];\r\n        const jbi = bridges[i].j[0];\r\n        const jei = bridges[i].j[bridges[i].j.length - 1];\r\n        const ibj = bridges[j].i[0];\r\n        const iej = bridges[j].i[bridges[j].i.length - 1];\r\n        const jbj = bridges[j].j[0];\r\n        const jej = bridges[j].j[bridges[j].j.length - 1];\r\n\r\n        if (bridges[i].type !== bridges[j].type\r\n          || this._hasChainBreak(Math.min(ibi, ibj), Math.max(iei, iej))\r\n          || this._hasChainBreak(Math.min(jbi, jbj), Math.max(jei, jej))\r\n          || ibj - iei >= 6 || (iei >= ibj && ibi <= iej)) {\r\n          continue;\r\n        }\r\n\r\n        let bulge = false;\r\n        if (bridges[i].type === BridgeType.PARALLEL) {\r\n          bulge = ((jbj - jei < 6 && ibj - iei < 3) || (jbj - jei < 3));\r\n        } else {\r\n          bulge = ((jbi - jej < 6 && ibj - iei < 3) || (jbi - jej < 3));\r\n        }\r\n\r\n        if (bulge) {\r\n          bridges[i].i = bridges[i].i.concat(bridges[j].i);\r\n          if (bridges[i].type === BridgeType.PARALLEL) {\r\n            bridges[i].j = bridges[i].j.concat(bridges[j].j);\r\n          } else {\r\n            bridges[i].j = bridges[j].j.concat(bridges[i].j);\r\n          }\r\n          bridges.splice(j--, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Sheet\r\n    const ladderset = new Set();\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      ladderset.add(bridges[i]);\r\n    }\r\n\r\n    let sheet = 1;\r\n    let ladder = 0;\r\n    while (ladderset.size > 0) {\r\n      let bridge = ladderset.values().next().value;\r\n      ladderset.delete(bridge);\r\n\r\n      const sheetset = new Set();\r\n      sheetset.add(bridge);\r\n\r\n      let toMove;\r\n      do {\r\n        toMove = new Set();\r\n        for (const a of sheetset.values()) {\r\n          for (const b of ladderset.values()) {\r\n            if (this._areBridgesLinked(a, b)) {\r\n              toMove.add(b);\r\n            }\r\n          }\r\n        }\r\n        for (bridge of toMove.values()) {\r\n          sheetset.add(bridge);\r\n          ladderset.delete(bridge);\r\n        }\r\n      } while (toMove.size > 0);\r\n\r\n      for (bridge of sheetset.values()) {\r\n        bridge.ladder = ladder;\r\n        bridge.sheet = sheet;\r\n        bridge.link = sheetset;\r\n        ++ladder;\r\n      }\r\n\r\n      ++sheet;\r\n    }\r\n\r\n    for (let i = 0; i < bridges.length; ++i) {\r\n      const bridge = bridges[i];\r\n\r\n      // find out if any of the i and j set members already have\r\n      // a bridge assigned, if so, we're assigning bridge 2\r\n\r\n      let betai = 0;\r\n      let betaj = 0;\r\n\r\n      for (let l = 0; l < bridge.i.length; ++l) {\r\n        if (this._betaPartners[bridge.i[l]][0]) {\r\n          betai = 1;\r\n          break;\r\n        }\r\n      }\r\n\r\n      for (let l = 0; l < bridge.j.length; ++l) {\r\n        if (this._betaPartners[bridge.j[l]][0]) {\r\n          betaj = 1;\r\n          break;\r\n        }\r\n      }\r\n\r\n      let ss = StructureType.BRIDGE;\r\n      if (bridge.i.length > 1) {\r\n        ss = StructureType.STRAND;\r\n      }\r\n\r\n      if (bridge.type === BridgeType.PARALLEL) {\r\n        let j = 0;\r\n        for (let k = 0; k < bridge.i.length; ++k) {\r\n          this._betaPartners[bridge.i[k]][betai] = {\r\n            residue: bridge.j[j++],\r\n            ladder: bridge.ladder,\r\n            parallel: true,\r\n          };\r\n        }\r\n\r\n        j = 0;\r\n        for (let k = 0; k < bridge.j.length; ++k) {\r\n          this._betaPartners[bridge.j[k]][betaj] = {\r\n            residue: bridge.i[j++],\r\n            ladder: bridge.ladder,\r\n            parallel: true,\r\n          };\r\n        }\r\n      } else {\r\n        let j = bridge.j.length - 1;\r\n        for (let k = 0; k < bridge.i.length; ++k) {\r\n          this._betaPartners[bridge.i[k]][betai] = {\r\n            residue: bridge.j[j--],\r\n            ladder: bridge.ladder,\r\n            parallel: false,\r\n          };\r\n        }\r\n\r\n        j = bridge.i.length - 1;\r\n        for (let k = 0; k < bridge.j.length; ++k) {\r\n          this._betaPartners[bridge.j[k]][betaj] = {\r\n            residue: bridge.i[j--],\r\n            ladder: bridge.ladder,\r\n            parallel: false,\r\n          };\r\n        }\r\n      }\r\n\r\n      for (let k = bridge.i[0]; k <= bridge.i[bridge.i.length - 1]; ++k) {\r\n        if (this._ss[k] !== StructureType.STRAND) {\r\n          this._ss[k] = ss;\r\n          this._sheet[k] = bridge.sheet;\r\n        }\r\n      }\r\n\r\n      for (let k = bridge.j[0]; k <= bridge.j[bridge.j.length - 1]; ++k) {\r\n        if (this._ss[k] !== StructureType.STRAND) {\r\n          this._ss[k] = ss;\r\n          this._sheet[k] = bridge.sheet;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _testBridge(chainA, from, chainB, to) {\r\n    let result = BridgeType.NO_BRIDGE;\r\n\r\n    const a = chainA[from - 1]._index;\r\n    const b = chainA[from]._index;\r\n    const c = chainA[from + 1]._index;\r\n    const d = chainB[to - 1]._index;\r\n    const e = chainB[to]._index;\r\n    const f = chainB[to + 1]._index;\r\n\r\n    const isBond = this._hbonds.isBond.bind(this._hbonds);\r\n    if ((isBond(c, e) && isBond(e, a)) || (isBond(f, b) && isBond(b, d))) {\r\n      result = BridgeType.PARALLEL;\r\n    } else if ((isBond(c, d) && isBond(f, a)) || (isBond(e, b) && isBond(b, e))) {\r\n      result = BridgeType.ANTI_PARALLEL;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // return true if any of the residues in bridge a is identical to any of the residues in bridge b\r\n  _areBridgesLinked(a, b) {\r\n    const ai = new Set(a.i);\r\n    const aj = new Set(a.j);\r\n\r\n    for (const i of b.i) {\r\n      if (ai.has(i) || aj.has(i)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    for (const i of b.j) {\r\n      if (ai.has(i) || aj.has(i)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  _hasChainBreak(from, to) {\r\n    for (let i = from + 1; i <= to; ++i) {\r\n      if (this._complex._residues[i]._sequence !== this._complex._residues[i - 1]._sequence + 1) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nSecondaryStructureMap.StructureType = StructureType;\r\n","import * as THREE from 'three';\r\nimport logger from '../utils/logger';\r\nimport Atom from './Atom';\r\nimport Chain from './Chain';\r\nimport Helix from './Helix';\r\nimport Strand from './Strand';\r\nimport Sheet from './Sheet';\r\nimport Component from './Component';\r\nimport ResidueType from './ResidueType';\r\nimport Bond from './Bond';\r\nimport AutoBond from './AutoBond';\r\nimport AromaticLoopsMarker from './AromaticLoopsMarker';\r\nimport BiologicalUnit from './BiologicalUnit';\r\nimport selectors from './selectors';\r\nimport VoxelWorld from './VoxelWorld';\r\nimport SecondaryStructureMap from './SecondaryStructureMap';\r\nimport StructuralElement from './StructuralElement';\r\n\r\nconst VOXEL_SIZE = 5.0;\r\n\r\nconst { StructureType } = SecondaryStructureMap;\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\n// see http://www.wwpdb.org/documentation/file-format-content/format33/sect5.html#HELIX\r\nconst helixClassMap = {\r\n  [StructureType.HELIX_ALPHA]: 1,\r\n  [StructureType.HELIX_PI]: 3,\r\n  [StructureType.HELIX_310]: 5,\r\n};\r\n\r\nconst loopMap = {\r\n  [StructureType.BRIDGE]: StructuralElementType.BRIDGE,\r\n  [StructureType.TURN]: StructuralElementType.TURN,\r\n  [StructureType.BEND]: StructuralElementType.BEND,\r\n  [StructureType.LOOP]: StructuralElementType.COIL,\r\n};\r\n\r\n/**\r\n * The entire complex of the molecules under study.\r\n *\r\n * @exports Complex\r\n * @constructor\r\n */\r\nclass Complex {\r\n  constructor() {\r\n    this._chains = [];\r\n    this._components = [];\r\n    this._helices = [];\r\n    this._sheets = [];\r\n    this.structures = [];\r\n\r\n    this._residueTypes = Object.create(ResidueType.StandardTypes);\r\n    this._atoms = [];\r\n    this._residues = [];\r\n    this._bonds = [];\r\n    this._sgroups = [];\r\n    this._molecules = [];\r\n    this._maskNeedsUpdate = false;\r\n\r\n    this.metadata = {};\r\n\r\n    this.symmetry = [];\r\n    this.units = [new BiologicalUnit(this)];\r\n    this._currentUnit = 0; // default biological unit is the asymmetric unit\r\n  }\r\n\r\n  addAtom(atom) {\r\n    const index = this._atoms.length;\r\n    this._atoms.push(atom);\r\n    return index;\r\n  }\r\n\r\n  addSheet(sheet) {\r\n    const index = this._sheets.length;\r\n    this._sheets.push(sheet);\r\n    return index;\r\n  }\r\n\r\n  addHelix(helix) {\r\n    const index = this._helices.length;\r\n    this._helices.push(helix);\r\n    return index;\r\n  }\r\n\r\n  getAtoms() {\r\n    return this._atoms;\r\n  }\r\n\r\n  getBonds() {\r\n    return this._bonds;\r\n  }\r\n\r\n  getAtomCount() {\r\n    return this._atoms.length;\r\n  }\r\n\r\n  addResidue(residue) {\r\n    const index = this._residues.length;\r\n    this._residues.push(residue);\r\n    return index;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    this.forEachChain((chain) => {\r\n      chain.updateToFrame(frameData);\r\n    });\r\n  }\r\n\r\n  addResidueType(resName) {\r\n    const rt = this._residueTypes[resName] = new ResidueType(resName, 'Unknown', '');\r\n    return rt;\r\n  }\r\n\r\n  getResidueCount() {\r\n    return this._residues.length;\r\n  }\r\n\r\n  getResidues() {\r\n    return this._residues;\r\n  }\r\n\r\n  getSGroupCount() {\r\n    return this._sgroups.length;\r\n  }\r\n\r\n  getSGroups() {\r\n    return this._sgroups;\r\n  }\r\n\r\n  /*\r\n     Extract atom by its fullname: #chainName#.#residueId#.#atomName#\r\n     */\r\n  getAtomByFullname(fullName) {\r\n    const parts = fullName.split('.');\r\n    if (parts.length !== 3) {\r\n      return null;\r\n    }\r\n\r\n    const chainName = parts[0];\r\n    const resId = parseInt(parts[1], 10);\r\n    if (Number.isNaN(resId)) {\r\n      return null;\r\n    }\r\n    const atomName = parts[2].toUpperCase();\r\n\r\n    let currAtom = null;\r\n    this.forEachChain((chain) => {\r\n      if (currAtom) {\r\n        return;\r\n      }\r\n      if (chain._name.localeCompare(chainName) === 0) {\r\n        chain.forEachResidue((residue) => {\r\n          if (currAtom) {\r\n            return;\r\n          }\r\n          if (residue._sequence === resId) {\r\n            residue.forEachAtom((atom) => {\r\n              if (currAtom) {\r\n                return;\r\n              }\r\n              if (atomName.localeCompare(atom.name) === 0) {\r\n                currAtom = atom;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return currAtom;\r\n  }\r\n\r\n  /**\r\n   * Create a new chain.\r\n   *\r\n   * @param {string} name - Chain name.\r\n   * @returns {Chain} - Newly created chain.\r\n   */\r\n  addChain(name) {\r\n    const result = new Chain(this, name);\r\n    this._chains.push(result);\r\n    return result;\r\n  }\r\n\r\n  getChain(name) {\r\n    for (let i = 0, n = this._chains.length; i < n; ++i) {\r\n      const chain = this._chains[i];\r\n      if (chain.getName() === name) {\r\n        return chain;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getChainCount() {\r\n    return this._chains.length;\r\n  }\r\n\r\n  getMolecules() {\r\n    return this._molecules;\r\n  }\r\n\r\n  getMoleculeCount() {\r\n    return this._molecules.length;\r\n  }\r\n\r\n  forEachAtom(process) {\r\n    const atoms = this._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      process(atoms[i]);\r\n    }\r\n  }\r\n\r\n  forEachBond(process) {\r\n    const bonds = this._bonds;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      process(bonds[i]);\r\n    }\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const residues = this._residues;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  forEachChain(process) {\r\n    const chains = this._chains;\r\n    for (let i = 0, n = chains.length; i < n; ++i) {\r\n      process(chains[i]);\r\n    }\r\n  }\r\n\r\n  forEachMolecule(process) {\r\n    const molecules = this._molecules;\r\n    const n = molecules.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      process(molecules[i]);\r\n    }\r\n  }\r\n\r\n  forEachSGroup(process) {\r\n    const groups = this._sgroups;\r\n    for (let i = 0, n = groups.length; i < n; ++i) {\r\n      process(groups[i]);\r\n    }\r\n  }\r\n\r\n  forEachComponent(process) {\r\n    const components = this._components;\r\n    for (let i = 0, n = components.length; i < n; ++i) {\r\n      process(components[i]);\r\n    }\r\n  }\r\n\r\n  forEachVisibleComponent(process) {\r\n    const components = this._components;\r\n    for (let i = 0, n = components.length; i < n; ++i) {\r\n      process(components[i]);\r\n    }\r\n  }\r\n\r\n  addBond(left, right, order, type, fixed) {\r\n    const bond = new Bond(left, right, order, type, fixed);\r\n    this._bonds.push(bond);\r\n    return bond;\r\n  }\r\n\r\n  getBondCount() {\r\n    return this._bonds.length;\r\n  }\r\n\r\n  getResidueType(name) {\r\n    return this._residueTypes[name] || null;\r\n  }\r\n\r\n  getUnifiedSerial(chain, serial, iCode) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const maxSerial = 65536;\r\n    const chainShift = maxSerial * 256;\r\n    /* eslint-enable no-magic-numbers */\r\n    return serial + iCode * maxSerial + chain * chainShift;\r\n  }\r\n\r\n  splitUnifiedSerial(uniSerial) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const maxSerial = 65536;\r\n    const chainShift = maxSerial * 256;\r\n    /* eslint-enable no-magic-numbers */\r\n    const chainId = Math.floor(uniSerial / chainShift);\r\n    const remnant = uniSerial - chainId * chainShift;\r\n    const insCode = Math.floor(remnant / maxSerial);\r\n    const ser = remnant - insCode * maxSerial;\r\n    return { chain: chainId, serial: ser, iCode: insCode };\r\n  }\r\n\r\n  _fillCmpEdit() {\r\n    const self = this;\r\n    const components = this._components;\r\n\r\n    function addComp() {\r\n      const comp = new Component(self);\r\n      comp._index = components.length;\r\n      components[comp._index] = comp;\r\n      return comp;\r\n    }\r\n\r\n    this.forEachChain((chain) => {\r\n      const residues = chain._residues;\r\n      const resCount = residues.length;\r\n      if (resCount < 1) {\r\n        return;\r\n      }\r\n      let comp = addComp();\r\n      let currStart = residues[0]._index;\r\n\r\n      for (let i = 0; i < resCount; ++i) {\r\n        const currRes = residues[i];\r\n        currRes._component = comp;\r\n\r\n        const nextRes = i === resCount - 1 ? null : residues[i + 1];\r\n        if (!nextRes\r\n          || !currRes.isConnected(nextRes)\r\n          || currRes._index !== nextRes._index - 1) {\r\n          // the last condition is broken and incorrect\r\n          // the refactoring of the Component is required in order to fix this issue\r\n          comp.setSubDivs([{\r\n            start: currStart,\r\n            end: currRes._index,\r\n          }]);\r\n          if (nextRes) {\r\n            currStart = nextRes._index;\r\n            comp = addComp();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // This function was added in the moment of despair\r\n  // It was the dark times for miew\r\n  _fillCmpNoedit() {\r\n    const comp = new Component(this);\r\n    comp._index = 0;\r\n\r\n    const residues = this._residues;\r\n    const resCount = residues.length;\r\n    if (resCount === 0) {\r\n      return;\r\n    }\r\n\r\n    const currSubDivs = [];\r\n    let currStart = 0;\r\n    for (let i = 0; i < resCount; ++i) {\r\n      const currRes = residues[i];\r\n      currRes._component = comp;\r\n\r\n      const nextRes = i === resCount - 1 ? null : residues[i + 1];\r\n      if (!nextRes\r\n        || !currRes.isConnected(nextRes)) {\r\n        // wrap up this interval\r\n        currSubDivs[currSubDivs.length] = {\r\n          start: currStart,\r\n          end: i,\r\n        };\r\n        if (nextRes) {\r\n          currStart = i + 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    comp.setSubDivs(currSubDivs);\r\n    this._components[comp._index] = comp;\r\n  }\r\n\r\n  /**\r\n   * Fill components information.\r\n   * @param {boolean} enableEditing - Restructure Complex to enable per-component editing.\r\n   */\r\n  _fillComponents(enableEditing) {\r\n    if (enableEditing) {\r\n      this._fillCmpEdit();\r\n    } else {\r\n      this._fillCmpNoedit();\r\n    }\r\n  }\r\n\r\n  getCurrentUnit() {\r\n    return this._currentUnit;\r\n  }\r\n\r\n  getDefaultBoundaries() {\r\n    return this.units[0].getBoundaries();\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this.units[this._currentUnit].getBoundaries();\r\n  }\r\n\r\n  getTransforms() {\r\n    return this.units[this._currentUnit].getTransforms();\r\n  }\r\n\r\n  getSelector() {\r\n    return this.units[this._currentUnit].getSelector();\r\n  }\r\n\r\n  resetCurrentUnit() {\r\n    this._currentUnit = 0;\r\n    this.setCurrentUnit(1);\r\n  }\r\n\r\n  setCurrentUnit(newUnit) {\r\n    if (newUnit !== null && newUnit !== undefined\r\n      && newUnit !== this._currentUnit\r\n      && newUnit >= 0\r\n      && newUnit < this.units.length) {\r\n      this._currentUnit = newUnit;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _computeBounds() {\r\n    const { units } = this;\r\n    for (let i = 0, n = units.length; i < n; ++i) {\r\n      units[i].computeBoundaries();\r\n    }\r\n  }\r\n\r\n  onAtomPositionChanged() {\r\n    this.forEachChain((a) => {\r\n      a._finalize();\r\n    });\r\n    this.forEachComponent((c) => {\r\n      c.update();\r\n    });\r\n    // Update bounding sphere and box\r\n    this._computeBounds();\r\n    this._finalizeBonds();\r\n    this.forEachSGroup((s) => {\r\n      s._rebuildSGroupOnAtomChange();\r\n    });\r\n  }\r\n\r\n  update() {\r\n    if (this._maskNeedsUpdate) {\r\n      this.updateStructuresMask();\r\n      this._maskNeedsUpdate = false;\r\n    }\r\n  }\r\n\r\n  _finalizeBonds() {\r\n    const bonds = this.getBonds();\r\n    const n = bonds.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      bonds[i]._index = i;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finalizes complex's inner data(i.e. after parsing).\r\n   * @param {objects} opts - Build bonds automatically.\r\n   * @param {boolean} opts.needAutoBonding     - Build bonds automatically.\r\n   * @param {boolean} opts.detectAromaticLoops - Find/mark aromatic loops.\r\n   * @param {boolean} opts.enableEditing       - Restructure Complex to enable per-component editing.\r\n   * @param {Array<Atom>} [opts.serialAtomMap] - Array of atoms ordered by their serials.\r\n   */\r\n  finalize(opts) {\r\n    opts = opts || {};\r\n    // Put bonds into atoms\r\n    const bonds = this._bonds;\r\n    let i;\r\n    let n;\r\n    // remove invalid bonds\r\n    for (i = bonds.length - 1; i >= 0; i--) {\r\n      const bond = bonds[i];\r\n      if (bond._left === null || bond._right === null) {\r\n        bonds.splice(i, 1);\r\n      } else {\r\n        bond._left.bonds.push(bond);\r\n        bond._right.bonds.push(bond);\r\n      }\r\n    }\r\n\r\n    const residues = this._residues;\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      residues[i]._finalize();\r\n    }\r\n\r\n    this.forEachChain((a) => {\r\n      a._finalize();\r\n    });\r\n\r\n    // WARNING! this MUST be done BEFORE computeBounds is called\r\n    const { units } = this;\r\n    for (i = 0, n = units.length; i < n; ++i) {\r\n      units[i].finalize();\r\n    }\r\n    // try setting first biomolecule by defaults\r\n    this.setCurrentUnit(1);\r\n\r\n    const residueHash = {};\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      const res = residues[i];\r\n      // This code is extremely dangerous for non-PDB formats\r\n      residueHash[this.getUnifiedSerial(\r\n        res.getChain().getName().charCodeAt(0),\r\n        res.getSequence(),\r\n        res.getICode().charCodeAt(0),\r\n      )] = res;\r\n    }\r\n\r\n    const { structures } = this;\r\n    for (i = 0, n = structures.length; i < n; ++i) {\r\n      structures[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    const helices = this._helices;\r\n    for (i = 0, n = helices.length; i < n; ++i) {\r\n      helices[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    const sheets = this._sheets;\r\n    for (i = 0, n = sheets.length; i < n; ++i) {\r\n      sheets[i]._finalize(opts.serialAtomMap, residueHash, this);\r\n    }\r\n\r\n    // Update bounding sphere and box\r\n    this._computeBounds();\r\n\r\n    const atoms = this._atoms;\r\n    for (i = 0, n = atoms.length; i < n; ++i) {\r\n      const currAtom = atoms[i];\r\n      currAtom.index = i;\r\n    }\r\n\r\n    if (opts.needAutoBonding) {\r\n      // Ignore errors during autobonding\r\n      try {\r\n        const autoConnector = new AutoBond(this);\r\n        autoConnector.build();\r\n        autoConnector.destroy();\r\n      } catch (e) {\r\n        console.warn('Autobonding failed:', e);\r\n      }\r\n    }\r\n\r\n    const chains = this._chains;\r\n    for (i = 0, n = chains.length; i < n; ++i) {\r\n      chains[i]._index = i;\r\n    }\r\n\r\n    for (i = 0, n = residues.length; i < n; ++i) {\r\n      residues[i]._index = i;\r\n    }\r\n\r\n    // mark non-polar hydrogens\r\n    for (i = 0, n = atoms.length; i < n; ++i) {\r\n      const atom = atoms[i];\r\n      if (atom.flags & Atom.Flags.HYDROGEN && atom.bonds.length === 1) {\r\n        const bond = atom.bonds[0];\r\n        const other = (bond._left !== atom && bond._left) || bond._right;\r\n        if (other.flags & Atom.Flags.CARBON) {\r\n          atom.flags |= Atom.Flags.NONPOLARH;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._finalizeBonds();\r\n    this._fillComponents(opts.enableEditing);\r\n\r\n    const marker = new AromaticLoopsMarker(this);\r\n    marker.markCycles();\r\n    if (opts.detectAromaticLoops) { // TODO remove this condition clause, it is for debug purposes only!\r\n      marker.detectCycles(); // TODO add conditional detection\r\n    }\r\n\r\n    this._finalizeMolecules();\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // add reference to molecule into residue\r\n    for (let i = 0; i < this._molecules.length; i++) {\r\n      const molecule = this._molecules[i];\r\n      const count = molecule.residues.length;\r\n      for (let j = 0; j < count; j++) {\r\n        const residue = molecule.residues[j];\r\n        residue._molecule = molecule;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateStructuresMask() {\r\n    const updater = (structure) => structure.collectMask();\r\n    this.forEachResidue(updater);\r\n    this.forEachChain(updater);\r\n    this.forEachMolecule(updater);\r\n  }\r\n\r\n  countAtomsByMask(mask) {\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if ((atom.mask & mask) !== 0) {\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  getNumAtomsBySelector(selector) {\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (selector.includesAtom(atom)) {\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  resetAtomMask(mask) {\r\n    this.forEachAtom((atom) => {\r\n      atom.mask = mask;\r\n    });\r\n  }\r\n\r\n  markAtoms(selector, mask) {\r\n    const setMask = mask;\r\n    const clearMask = ~setMask;\r\n    let count = 0;\r\n    const totalSelector = selectors.keyword('And')(selector, this.getSelector());\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (totalSelector.includesAtom(atom)) {\r\n        atom.mask |= setMask;\r\n        count++;\r\n      } else {\r\n        atom.mask &= clearMask;\r\n      }\r\n    });\r\n    this._maskNeedsUpdate = true;\r\n\r\n    return count;\r\n  }\r\n\r\n  markAtomsAdditionally(selector, mask) {\r\n    const setMask = mask;\r\n    let count = 0;\r\n\r\n    this.forEachAtom((atom) => {\r\n      if (selector.includesAtom(atom) && (atom.mask & mask) !== mask) {\r\n        atom.mask |= setMask;\r\n        count++;\r\n      }\r\n    });\r\n\r\n    return count;\r\n  }\r\n\r\n  clearAtomBits(mask) {\r\n    const clearMask = ~mask;\r\n    this.forEachAtom((atom) => {\r\n      atom.mask &= clearMask;\r\n    });\r\n    const reseter = (a) => {\r\n      a._mask &= clearMask;\r\n    };\r\n    this.forEachAtom(reseter);\r\n    this.forEachResidue(reseter);\r\n    this.forEachChain(reseter);\r\n    this.forEachMolecule(reseter);\r\n  }\r\n\r\n  getAtomNames() {\r\n    if (this.hasOwnProperty('_atomNames')) {\r\n      return this._atomNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[atom.name] = 1;\r\n    });\r\n    this._atomNames = Object.keys(dict);\r\n\r\n    return this._atomNames;\r\n  }\r\n\r\n  getElements() {\r\n    if (this.hasOwnProperty('_elements')) {\r\n      return this._elements;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[atom.element.name] = 1;\r\n    });\r\n    this._elements = Object.keys(dict);\r\n\r\n    return this._elements;\r\n  }\r\n\r\n  getResidueNames() {\r\n    if (this.hasOwnProperty('_residueNames')) {\r\n      return this._residueNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachResidue((res) => {\r\n      dict[res._type._name] = 1;\r\n    });\r\n    this._residueNames = Object.keys(dict);\r\n\r\n    return this._residueNames;\r\n  }\r\n\r\n  getChainNames() {\r\n    if (this.hasOwnProperty('_chainNames')) {\r\n      return this._chainNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachChain((chain) => {\r\n      dict[chain._name] = 1;\r\n    });\r\n    this._chainNames = Object.keys(dict);\r\n\r\n    return this._chainNames;\r\n  }\r\n\r\n  getAltLocNames() {\r\n    if (this.hasOwnProperty('_altlocNames')) {\r\n      return this._altlocNames;\r\n    }\r\n\r\n    const dict = {};\r\n    this.forEachAtom((atom) => {\r\n      dict[String.fromCharCode(atom.location)] = 1;\r\n    });\r\n    this._altlocNames = Object.keys(dict);\r\n\r\n    return this._altlocNames;\r\n  }\r\n\r\n  getVoxelWorld() {\r\n    if (!this.hasOwnProperty('_voxelWorld')) {\r\n      try {\r\n        this._voxelWorld = new VoxelWorld(\r\n          this.getDefaultBoundaries().boundingBox,\r\n          new THREE.Vector3(VOXEL_SIZE, VOXEL_SIZE, VOXEL_SIZE),\r\n        );\r\n        this._voxelWorld.addAtoms(this);\r\n      } catch (e) {\r\n        logger.warn('Unable to create voxel world');\r\n        this._voxelWorld = null;\r\n      }\r\n    }\r\n\r\n    return this._voxelWorld;\r\n  }\r\n\r\n  /**\r\n   * Simple function to make unified routine procedure without code duplication.\r\n   * @param {Array} srcArray   - Source chemical structure array (will be part of resulting chemical structure array).\r\n   * @param {Array} dstArray   - Resulting chemical structure array.\r\n   * @param {number} param     - Parameter for processor.\r\n   * @param {function} functor - Processor for every element in array.\r\n   */\r\n  addElement(srcArray, dstArray, param, functor) {\r\n    const { length } = srcArray;\r\n    for (let i = 0; i < length; ++i) {\r\n      const elem = srcArray[i];\r\n      functor(elem, param);\r\n      dstArray.push(elem);\r\n    }\r\n  }\r\n\r\n  // this function joins multiple complexes into one (this)\r\n  // atom, bond, ... objects are reused -- so input complexes are no longer valid\r\n  joinComplexes(complexes) {\r\n    // clear target complex\r\n    this._chains = [];\r\n    this._components = [];\r\n    this._helices = [];\r\n    this._sheets = [];\r\n    this.structures = [];\r\n    this._atoms = [];\r\n    this._residues = [];\r\n    this._bonds = [];\r\n    this._sgroups = [];\r\n\r\n    const self = this;\r\n    let atomBias = 0;\r\n    let bondBias = 0;\r\n    let residueBias = 0;\r\n    let chainBias = 0;\r\n    let componentBias = 0;\r\n\r\n    function processAtom(atom, bias) {\r\n      atom.serial += bias;\r\n      atom.index += bias;\r\n    }\r\n\r\n    function processBond(bond, bias) {\r\n      bond._index += bias;\r\n    }\r\n\r\n    function processResidue(residue, bias) {\r\n      residue._index += bias;\r\n    }\r\n\r\n    function processChain(chain, bias) {\r\n      chain._complex = self;\r\n      chain._index += bias;\r\n    }\r\n\r\n    function processComponent(component, bias) {\r\n      component._complex = self;\r\n      component._index += bias;\r\n    }\r\n\r\n    /**\r\n     * Simple function to do nothing.\r\n     */\r\n    function doNothing() {\r\n    }\r\n\r\n    for (let i = 0; i < complexes.length; ++i) {\r\n      const c = complexes[i];\r\n      this.addElement(c._atoms, this._atoms, atomBias, processAtom);\r\n      this.addElement(c._bonds, this._bonds, bondBias, processBond);\r\n      this.addElement(c._residues, this._residues, residueBias, processResidue);\r\n      this.addElement(c._chains, this._chains, chainBias, processChain);\r\n      this.addElement(c._sheets, this._sheets, 0, doNothing);\r\n      this.addElement(c._helices, this._helices, 0, doNothing);\r\n      this.addElement(c._sgroups, this._sgroups, 0, doNothing);\r\n      this.addElement(c._components, this._components, componentBias, processComponent);\r\n      this.addElement(c.structures, this.structures, 0, doNothing);\r\n      // merge residue types\r\n      for (const rt in c._residueTypes) {\r\n        if (c._residueTypes.hasOwnProperty(rt)) {\r\n          this._residueTypes[rt] = c._residueTypes[rt];\r\n        }\r\n      }\r\n\r\n      atomBias += c._atoms.length;\r\n      bondBias += c._bonds.length;\r\n      residueBias += c._residues.length;\r\n      chainBias += c._chains.length;\r\n      componentBias += c._components.length;\r\n    }\r\n\r\n    this._computeBounds();\r\n  }\r\n\r\n  /**\r\n   * Replace secondary structure with calculated one.\r\n   *\r\n   * DSSP algorithm implementation is used.\r\n   *\r\n   * Kabsch W, Sander C. 1983. Dictionary of protein secondary structure: pattern recognition of hydrogen-bonded and\r\n   * geometrical features. Biopolymers. 22(12):2577-2637. doi:10.1002/bip.360221211.\r\n   */\r\n  dssp() {\r\n    const ssMap = new SecondaryStructureMap(this);\r\n\r\n    const structures = this.structures = [];\r\n    const helices = this._helices = [];\r\n    const sheets = this._sheets = [];\r\n\r\n    const getSheet = (index) => {\r\n      let item = sheets[index];\r\n      if (!item) {\r\n        item = sheets[index] = new Sheet(String(index), 0);\r\n      }\r\n      return item;\r\n    };\r\n\r\n    let lastCode;\r\n    let lastSheetIndex;\r\n    let lastHelixIndex = 0;\r\n    let curStructure = null;\r\n    for (let i = 0, n = this._residues.length; i < n; ++i) {\r\n      const curCode = ssMap._ss[i];\r\n      const curResidue = this._residues[i];\r\n      const curSheetIndex = ssMap._sheet[i];\r\n\r\n      // expand the last structure\r\n      if (curCode === lastCode && curSheetIndex === lastSheetIndex) {\r\n        curResidue._secondary = curStructure;\r\n        if (curStructure) {\r\n          curStructure.term = curResidue;\r\n        }\r\n        if (curStructure instanceof Helix) {\r\n          curStructure.length++;\r\n        }\r\n        continue;\r\n      }\r\n\r\n      // create a new structure\r\n      const helixClass = helixClassMap[curCode];\r\n      const loopType = loopMap[curCode];\r\n      if (curCode === StructureType.STRAND) {\r\n        const curSheet = getSheet(curSheetIndex);\r\n        curStructure = new Strand(curSheet, curResidue, curResidue, 0, null, null);\r\n        curSheet.addStrand(curStructure);\r\n      } else if (helixClass !== undefined) {\r\n        lastHelixIndex++;\r\n        curStructure = new Helix(helixClass, curResidue, curResidue, lastHelixIndex, String(lastHelixIndex), '', 1);\r\n        helices.push(curStructure);\r\n      } else if (loopType !== undefined) {\r\n        curStructure = new StructuralElement(loopType, curResidue, curResidue);\r\n      } else {\r\n        curStructure = null;\r\n      }\r\n\r\n      if (curStructure) {\r\n        structures.push(curStructure);\r\n      }\r\n\r\n      curResidue._secondary = curStructure;\r\n\r\n      lastCode = curCode;\r\n      lastSheetIndex = curSheetIndex;\r\n    }\r\n\r\n    this._sheets = sheets.filter((_sheet) => true); // squeeze sheets array\r\n  }\r\n}\r\n\r\nComplex.prototype.id = 'Complex';\r\nComplex.prototype.name = '';\r\n\r\nexport default Complex;\r\n","import * as THREE from 'three';\r\nimport utils from '../utils';\r\n\r\nfunction pow2ceil(v) {\r\n  let p = 2;\r\n  v = (v - 1) >> 1;\r\n  while (v) {\r\n    p <<= 1;\r\n    v >>= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\n/**\r\n * Volume constructor\r\n *\r\n * @param {Object} type - Float32Array, Int8Array, etc...\r\n * @param {Object|Array} dimensions - number of data points on each axis (x, y, z)\r\n * @param {Box3} box - bounding box defining data place in metric space,\r\n *                     it's corners correspond to extreme data points\r\n * @param {Number} vecSize - dimension of the field data point (1 = scalar, 3 = 3D vector)\r\n * @param {Object} data - typed array of the same type as specified by the 1st parameter,\r\n *                        layout: point by point along X,\r\n *                                row by row along Y,\r\n *                                plane by plane along Z\r\n * @param {Number} volumeInfo - volume info values to define threshold to filter the noise\r\n */\r\n\r\nclass Volume {\r\n  constructor(type, dimensions, box, vecSize, data, volumeInfo) {\r\n    this._box = box.clone();\r\n    this._dimVec = Math.max(Math.floor(vecSize || 1), 1);\r\n    this._volumeInfo = volumeInfo;\r\n\r\n    if (dimensions instanceof Array) {\r\n      [this._dimX, this._dimY, this._dimZ] = dimensions;\r\n    } else {\r\n      this._dimX = dimensions.x;\r\n      this._dimY = dimensions.y;\r\n      this._dimZ = dimensions.z;\r\n    }\r\n    this._dimX = Math.max(Math.floor(this._dimX), 1);\r\n    this._dimY = Math.max(Math.floor(this._dimY), 1);\r\n    this._dimZ = Math.max(Math.floor(this._dimZ), 1);\r\n\r\n    this._rowElements = this._dimVec * this._dimX;\r\n    this._planeElements = this._rowElements * this._dimY;\r\n    this._totalElements = this._planeElements * this._dimZ;\r\n\r\n    this._data = data || utils.allocateTyped(type, this._totalElements);\r\n\r\n    // override getter/setter for vector fields\r\n    switch (this._dimVec) {\r\n      case 1:\r\n        break;\r\n\r\n      case 2:\r\n        this.getValue = function (x, y, z) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          return [this._data[idx], this._data[idx + 1]];\r\n        };\r\n\r\n        this.setValue = function (x, y, z, a, b) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] = a;\r\n          this._data[idx + 1] = b;\r\n        };\r\n\r\n        this.addValue = function (x, y, z, a, b) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] += a;\r\n          this._data[idx + 1] += b;\r\n        };\r\n        break;\r\n\r\n      case 3:\r\n        this.getValue = function (x, y, z) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          return [this._data[idx], this._data[idx + 1], this._data[idx + 2]];\r\n        };\r\n\r\n        this.setValue = function (x, y, z, a, b, c) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] = a;\r\n          this._data[idx + 1] = b;\r\n          this._data[idx + 2] = c;\r\n        };\r\n\r\n        this.addValue = function (x, y, z, a, b, c) {\r\n          const idx = x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n          this._data[idx] += a;\r\n          this._data[idx + 1] += b;\r\n          this._data[idx + 2] += c;\r\n        };\r\n        break;\r\n\r\n      default:\r\n        throw new Error('Volume: invalid vector dimension');\r\n    }\r\n  }\r\n\r\n  // default getter assumes it's a scalar field\r\n  getValue(x, y, z) {\r\n    return this._data[x + y * this._rowElements + z * this._planeElements];\r\n  }\r\n\r\n  // default setter assumes it's a scalar field\r\n  setValue(x, y, z, val) {\r\n    this._data[x + y * this._rowElements + z * this._planeElements] = val;\r\n  }\r\n\r\n  // default adder assumes it's a scalar field\r\n  addValue(x, y, z, val) {\r\n    this._data[x + y * this._rowElements + z * this._planeElements] += val;\r\n  }\r\n\r\n  getDimensions() {\r\n    return [this._dimX, this._dimY, this._dimZ];\r\n  }\r\n\r\n  getBox() {\r\n    return this._box;\r\n  }\r\n\r\n  getVolumeInfo() {\r\n    return this._volumeInfo;\r\n  }\r\n\r\n  getCellSize() {\r\n    const boxSize = new THREE.Vector3();\r\n    this._box.getSize(boxSize);\r\n    const res = new THREE.Vector3();\r\n    res.x = this._dimX > 1 ? boxSize.x / (this._dimX - 1) : 0;\r\n    res.y = this._dimY > 1 ? boxSize.y / (this._dimY - 1) : 0;\r\n    res.z = this._dimZ > 1 ? boxSize.z / (this._dimZ - 1) : 0;\r\n    return res;\r\n  }\r\n\r\n  computeGradient() {\r\n    if (this._dimVec !== 1) {\r\n      // gradient can only be computed for scalar fields\r\n      return null;\r\n    }\r\n\r\n    // create a 3D vector field of gradients\r\n    const gradient = new Volume(Float32Array, [this._dimX, this._dimY, this._dimZ], this._box, 3);\r\n\r\n    // calculate cell side lengths\r\n    const vl = this.getCellSize();\r\n\r\n    // gradient axis scaling values and averaging factors, to correctly\r\n    // calculate the gradient for volumes with irregular cell spacing\r\n    const vs = new THREE.Vector3(-0.5 / vl.x, -0.5 / vl.y, -0.5 / vl.z);\r\n\r\n    // TODO Check for intended bug in VMD (min is zero)\r\n    function clamp(val, min, max) {\r\n      return Math.min(max, Math.max(min, val));\r\n    }\r\n\r\n    const xSize = this._dimX;\r\n    const ySize = this._dimY;\r\n    const zSize = this._dimZ;\r\n    const volMap = this._data;\r\n\r\n    function _voxelValue(x, y, z) {\r\n      return volMap[z * xSize * ySize + y * xSize + x];\r\n    }\r\n\r\n    for (let zi = 0; zi < zSize; ++zi) {\r\n      const zm = clamp(zi - 1, 0, zSize - 1);\r\n      const zp = clamp(zi + 1, 0, zSize - 1);\r\n\r\n      for (let yi = 0; yi < ySize; ++yi) {\r\n        const ym = clamp(yi - 1, 0, ySize - 1);\r\n        const yp = clamp(yi + 1, 0, ySize - 1);\r\n\r\n        for (let xi = 0; xi < xSize; ++xi) {\r\n          const xm = clamp(xi - 1, 0, xSize - 1);\r\n          const xp = clamp(xi + 1, 0, xSize - 1);\r\n\r\n          // Calculate the volume gradient at each grid cell.\r\n          // Gradients are now stored unnormalized, since we need them in pure\r\n          // form in order to draw field lines etc.  Shading code will now have\r\n          // to do renormalization for itself on-the-fly.\r\n\r\n          // XXX this gradient is only correct for orthogonal grids, since\r\n          // we're using the array index offsets rather to calculate the gradient\r\n          // rather than voxel coordinate offsets.  This will have to be\r\n          // re-worked for non-orthogonal datasets.\r\n\r\n          gradient.setValue(\r\n            xi,\r\n            yi,\r\n            zi,\r\n            (_voxelValue(xp, yi, zi) - _voxelValue(xm, yi, zi)) * vs.x,\r\n            (_voxelValue(xi, yp, zi) - _voxelValue(xi, ym, zi)) * vs.y,\r\n            (_voxelValue(xi, yi, zp) - _voxelValue(xi, yi, zm)) * vs.z,\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    return gradient;\r\n  }\r\n\r\n  normalize() {\r\n    const data = this._data;\r\n\r\n    // get min/max\r\n    let min = data[0];\r\n    let max = data[0];\r\n    for (let i = 1; i < data.length; ++i) {\r\n      min = Math.min(min, data[i]);\r\n      max = Math.max(max, data[i]);\r\n    }\r\n\r\n    const d = 1.0 / (max - min);\r\n    if (d === 0) {\r\n      return;\r\n    }\r\n\r\n    // normalize\r\n    for (let i = 0; i < data.length; ++i) {\r\n      data[i] = d * (data[i] - min);\r\n    }\r\n  }\r\n\r\n  getTiledTextureStride() {\r\n    return [this._dimX + 2, this._dimY + 2];\r\n  }\r\n\r\n  buildTiledTexture() {\r\n    let tilesX = Math.ceil(Math.sqrt(this._dimZ * this._dimY / this._dimX));\r\n\r\n    let width = tilesX * (this._dimX + 2) - 1;\r\n    width = pow2ceil(width);\r\n    tilesX = Math.floor(width / (this._dimX + 2));\r\n\r\n    const tilesY = Math.ceil(this._dimZ / tilesX);\r\n    let height = tilesY * (this._dimY + 2) - 1;\r\n    height = pow2ceil(height);\r\n\r\n    const data = new Uint8Array(width * height);\r\n\r\n    let src;\r\n    let dst;\r\n    for (let tileRow = 0; tileRow < tilesY; ++tileRow) {\r\n      // process each pixel row of this tile row\r\n      for (let row = 0; row < this._dimY; ++row) {\r\n        src = tileRow * tilesX * this._planeElements + row * this._rowElements;\r\n        dst = width * (tileRow * (this._dimY + 2) + row);\r\n        // copy a series of rows through several XY planes\r\n        for (let t = 0; t < tilesX; ++t) {\r\n          // copy one row of one XY plane\r\n          for (let x = 0; x < this._dimX; ++x) {\r\n            data[dst++] = 255.0 * this._data[src++];\r\n          }\r\n\r\n          // repeat last pixel of previous tile\r\n          data[dst++] = 255.0 * this._data[src - 1];\r\n\r\n          if (t < tilesX - 1) {\r\n            // skip to the same row of next XY plane\r\n            src += this._planeElements - this._rowElements;\r\n            // repeat first pixel of next tile\r\n            data[dst++] = 255.0 * this._data[src];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // fill pixels between tile rows with copy of edge pixels\r\n    for (let tileRow = 0; tileRow < tilesY; ++tileRow) {\r\n      // copy last pixel row of this tile row to the following pixel row of the texture\r\n      src = width * (tileRow * (this._dimY + 2) + this._dimY - 1);\r\n      dst = src + width;\r\n      for (let x = 0; x < width; ++x) {\r\n        data[dst++] = data[src++];\r\n      }\r\n      if (tileRow < tilesY - 1) {\r\n        // copy first pixel row of next tile row to the preceding pixel row of the texture\r\n        src = width * (tileRow + 1) * (this._dimY + 2);\r\n        dst = src - width;\r\n        for (let x = 0; x < width; ++x) {\r\n          data[dst++] = data[src++];\r\n        }\r\n      }\r\n    }\r\n\r\n    const texture = new THREE.DataTexture(\r\n      data,\r\n      width,\r\n      height,\r\n      THREE.LuminanceFormat,\r\n      THREE.UnsignedByteType,\r\n      THREE.UVMapping,\r\n      THREE.ClampToEdgeWrapping,\r\n      THREE.ClampToEdgeWrapping,\r\n      THREE.LinearFilter,\r\n      THREE.LinearFilter,\r\n    );\r\n    texture.needsUpdate = true;\r\n    return texture;\r\n  }\r\n\r\n  /* ********************************************************************************\r\n   *\r\n   * Methods that provide direct access to internal array (for better performance)\r\n   *\r\n   ******************************************************************************** */\r\n\r\n  getData() {\r\n    return this._data;\r\n  }\r\n\r\n  getDirectIdx(x, y, z) {\r\n    return x * this._dimVec + y * this._rowElements + z * this._planeElements;\r\n  }\r\n\r\n  getStrideX() {\r\n    return this._dimVec;\r\n  }\r\n\r\n  getStrideY() {\r\n    return this._rowElements;\r\n  }\r\n\r\n  getStrideZ() {\r\n    return this._planeElements;\r\n  }\r\n}\r\n\r\nVolume.prototype.id = 'Volume';\r\n\r\nexport default Volume;\r\n","/**\r\n * Residue Molecule.\r\n *\r\n * @param {Complex} complex - Molecular complex this Molecule belongs to.\r\n * @param {String} name - Molecule's name.\r\n * @param {Integer} index - Molecule's index in file.\r\n *\r\n * @exports Molecule\r\n * @constructor\r\n */\r\nclass Molecule {\r\n  constructor(complex, name, index) {\r\n    this.complex = complex;\r\n    this.name = name || '';\r\n    this.residues = [];\r\n    this.mask = 1 | 0;\r\n    this.index = index || -1; // start with 1\r\n  }\r\n\r\n  forEachResidue(process) {\r\n    const { residues } = this;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      process(residues[i]);\r\n    }\r\n  }\r\n\r\n  collectMask() {\r\n    let mask = 0xffffffff;\r\n    const { residues } = this;\r\n    for (let i = 0, n = residues.length; i < n; ++i) {\r\n      mask &= residues[i]._mask;\r\n    }\r\n    this.mask = mask;\r\n  }\r\n}\r\n\r\nexport default Molecule;\r\n","import Atom from './chem/Atom';\r\nimport Element from './chem/Element';\r\nimport Bond from './chem/Bond';\r\nimport Residue from './chem/Residue';\r\nimport ResidueType from './chem/ResidueType';\r\nimport Chain from './chem/Chain';\r\nimport Helix from './chem/Helix';\r\nimport Strand from './chem/Strand';\r\nimport Sheet from './chem/Sheet';\r\nimport SGroup from './chem/SGroup';\r\nimport Assembly from './chem/Assembly';\r\nimport Complex from './chem/Complex';\r\nimport Volume from './chem/Volume';\r\nimport VoxelWorld from './chem/VoxelWorld';\r\nimport selectors from './chem/selectors';\r\nimport Molecule from './chem/Molecule';\r\n\r\nexport default {\r\n  Atom,\r\n  Element,\r\n  Bond,\r\n  Residue,\r\n  ResidueType,\r\n  Chain,\r\n  Helix,\r\n  Strand,\r\n  Sheet,\r\n  SGroup,\r\n  Assembly,\r\n  Complex,\r\n  Volume,\r\n  VoxelWorld,\r\n  selectors,\r\n  Molecule,\r\n};\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\n\r\nclass CSS2DObject extends THREE.Object3D {\r\n  constructor(element) {\r\n    super();\r\n    const self = this;\r\n    this._element = element;\r\n    this._element.style.position = 'absolute';\r\n    this.addEventListener('removed', () => {\r\n      if (self._element.parentNode !== null) {\r\n        self._element.parentNode.removeChild(self._element);\r\n      }\r\n    });\r\n  }\r\n\r\n  getElement() {\r\n    return this._element;\r\n  }\r\n\r\n  /**\r\n   * Sets label transparency.\r\n   *\r\n   * @param {number} transp    - in [0; 1] 1 means fully transparent\r\n   */\r\n  setTransparency(transp) {\r\n    const el = this.getElement();\r\n    if (el === null) {\r\n      return;\r\n    }\r\n    if (transp === 1.0) {\r\n      el.style.display = 'none';\r\n      return;\r\n    }\r\n    el.style.display = 'inline';\r\n    const op = 1.0 - transp;\r\n    const top = op.toString();\r\n    const op100 = op * 100;\r\n    el.style.opacity = top;\r\n    el.style.filter = `alpha(opacity=${op100})`; // IE fallback\r\n  }\r\n\r\n  clone() {\r\n    const obj = new CSS2DObject(this._element);\r\n    obj.copy(this);\r\n    return obj;\r\n  }\r\n}\r\n\r\nexport default CSS2DObject;\r\n","import * as THREE from 'three';\r\n\r\nclass RCGroup extends THREE.Group {\r\n  raycast(raycaster, intersects) {\r\n    if (!this.visible) {\r\n      return;\r\n    }\r\n\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      children[i].raycast(raycaster, intersects);\r\n    }\r\n  }\r\n\r\n  enableSubset(mask, innerOnly) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].enableSubset) {\r\n        children[i].enableSubset(mask, innerOnly);\r\n      }\r\n    }\r\n  }\r\n\r\n  disableSubset(mask, innerOnly) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].disableSubset) {\r\n        children[i].disableSubset(mask, innerOnly);\r\n      }\r\n    }\r\n  }\r\n\r\n  isEmpty() {\r\n    return this.children.length === 0;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].updateToFrame) {\r\n        children[i].updateToFrame(frameData);\r\n      }\r\n    }\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        Array.prototype.push.apply(totalSubset, children[i].getSubset(mask, innerOnly));\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default RCGroup;\r\n","/* eslint-disable no-magic-numbers */\r\nimport * as THREE from 'three';\r\nimport logger from '../utils/logger';\r\nimport CSS2DObject from './CSS2DObject';\r\nimport RCGroup from './RCGroup';\r\nimport vertexScreenQuadShader from './shaders/ScreenQuad.vert';\r\nimport fragmentScreenQuadFromTex from './shaders/ScreenQuadFromTex.frag';\r\nimport fragmentScreenQuadFromTexWithDistortion from './shaders/ScreenQuadFromTexWithDistortion.frag';\r\n\r\nconst LAYERS = {\r\n  DEFAULT: 0, VOLUME: 1, TRANSPARENT: 2, PREPASS_TRANSPARENT: 3, VOLUME_BFPLANE: 4, COLOR_FROM_POSITION: 5, SHADOWMAP: 6,\r\n};\r\n\r\nconst SELECTION_LAYERS = [ // These layers, that are used in the selection by ray casting\r\n  LAYERS.DEFAULT, LAYERS.TRANSPARENT,\r\n];\r\n\r\nTHREE.Object3D.prototype.resetTransform = function () {\r\n  this.position.set(0, 0, 0);\r\n  this.quaternion.set(0, 0, 0, 1);\r\n  this.scale.set(1, 1, 1);\r\n};\r\n\r\n// update world matrix of this object and all its ancestors\r\nTHREE.Object3D.prototype.updateMatrixWorldRecursive = function () {\r\n  if (this.parent != null) {\r\n    this.parent.updateMatrixWorldRecursive();\r\n  }\r\n  this.updateMatrixWorld();\r\n};\r\n// add object to parent, saving objects' world transform\r\nTHREE.Object3D.prototype.addSavingWorldTransform = (function () {\r\n  const _worldMatrixInverse = new THREE.Matrix4();\r\n\r\n  return function (object) {\r\n    if (object instanceof THREE.Object3D) {\r\n      _worldMatrixInverse.copy(this.matrixWorld).invert();\r\n      _worldMatrixInverse.multiply(object.matrixWorld);\r\n      object.matrix.copy(_worldMatrixInverse);\r\n      object.matrix.decompose(object.position, object.quaternion, object.scale);\r\n      this.add(object);\r\n    }\r\n  };\r\n}());\r\n\r\n// render a tiny transparent quad in the center of the screen\r\nTHREE.WebGLRenderer.prototype.renderDummyQuad = (function () {\r\n  const _material = new THREE.MeshBasicMaterial({ transparent: true, opacity: 0.0, depthWrite: false });\r\n\r\n  const _scene = new THREE.Scene();\r\n  const _quad = new THREE.Mesh(new THREE.PlaneGeometry(0.01, 0.01), _material);\r\n  _scene.add(_quad);\r\n\r\n  const _camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -10000, 10000);\r\n  _camera.position.z = 100;\r\n\r\n  return function () {\r\n    this.render(_scene, _camera);\r\n  };\r\n}());\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuad = (function () {\r\n  const _scene = new THREE.Scene();\r\n  const _quad = new THREE.Mesh(new THREE.PlaneGeometry(1.0, 1.0));\r\n  _scene.add(_quad);\r\n\r\n  const _camera = new THREE.OrthographicCamera(-0.5, 0.5, 0.5, -0.5, -10000, 10000);\r\n  _camera.position.z = 100;\r\n\r\n  return function (material) {\r\n    _quad.material = material;\r\n    this.render(_scene, _camera);\r\n  };\r\n}());\r\n\r\nTHREE.Matrix4.prototype.isIdentity = (function () {\r\n  const identity = new THREE.Matrix4();\r\n  return function () {\r\n    return identity.equals(this);\r\n  };\r\n}());\r\n\r\nTHREE.Matrix4.prototype.applyToPointsArray = function (array, stride, w) {\r\n  if (!array || !stride || stride < 3) {\r\n    return array;\r\n  }\r\n  w = w || 0; // use point as normal by default\r\n  const e = this.elements;\r\n  for (let i = 0; i < array.length; i += stride) {\r\n    const x = array[i];\r\n    const y = array[i + 1];\r\n    const z = array[i + 2];\r\n\r\n    const persp = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\r\n\r\n    array[i] = (e[0] * x + e[4] * y + e[8] * z + e[12] * w) * persp;\r\n    array[i + 1] = (e[1] * x + e[5] * y + e[9] * z + e[13] * w) * persp;\r\n    array[i + 2] = (e[2] * x + e[6] * y + e[10] * z + e[14] * w) * persp;\r\n  }\r\n  return array;\r\n};\r\n\r\nclass ScreenQuadMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    if (params.uniforms === undefined) {\r\n      params.uniforms = {};\r\n    }\r\n    params.uniforms.srcTex = { type: 't', value: null };\r\n    params.vertexShader = vertexScreenQuadShader;\r\n    params.transparent = false;\r\n    params.depthTest = false;\r\n    params.depthWrite = false;\r\n    super(params);\r\n  }\r\n}\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuadFromTex = (function () {\r\n  const _material = new ScreenQuadMaterial({\r\n    uniforms: { opacity: { type: 'f', value: 1.0 } },\r\n    fragmentShader: fragmentScreenQuadFromTex,\r\n    transparent: true,\r\n  });\r\n\r\n  return function (srcTex, opacity) {\r\n    _material.uniforms.srcTex.value = srcTex;\r\n    _material.transparent = (opacity < 1.0);\r\n    _material.uniforms.opacity.value = opacity;\r\n    this.renderScreenQuad(_material);\r\n  };\r\n}());\r\n\r\nTHREE.WebGLRenderer.prototype.renderScreenQuadFromTexWithDistortion = (function () {\r\n  const _material = new ScreenQuadMaterial({\r\n    uniforms: { coef: { type: 'f', value: 1.0 } },\r\n    fragmentShader: fragmentScreenQuadFromTexWithDistortion,\r\n  });\r\n\r\n  return function (srcTex, coef) {\r\n    _material.uniforms.srcTex.value = srcTex;\r\n    _material.uniforms.coef.value = coef;\r\n    this.renderScreenQuad(_material);\r\n  };\r\n}());\r\n\r\n/**\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.PerspectiveCamera.prototype.setMinimalFov = function (angle) {\r\n  if (this.aspect >= 1.0) {\r\n    this.fov = angle;\r\n  } else {\r\n    this.fov = THREE.MathUtils.radToDeg(2 * Math.atan(Math.tan(THREE.MathUtils.degToRad(angle) * 0.5) / this.aspect));\r\n  }\r\n};\r\n\r\n/**\r\n * @param {THREE.PerspectiveCamera} camera - Base camera for this stereo camera.\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.StereoCamera.prototype.updateHalfSized = function (camera, angle) {\r\n  const originalAspect = camera.aspect;\r\n  const originalFov = camera.fov;\r\n\r\n  camera.aspect = originalAspect / 2.0;\r\n  camera.setMinimalFov(angle);\r\n  camera.updateProjectionMatrix();\r\n\r\n  this.update(camera);\r\n\r\n  camera.aspect = originalAspect;\r\n  camera.fov = originalFov;\r\n  camera.updateProjectionMatrix();\r\n};\r\n\r\n/**\r\n * @param {number} radius - Radius of bounding sphere in angstroms to fit on screen.\r\n * @param {number} angle - Field of view in degrees.\r\n */\r\nTHREE.PerspectiveCamera.prototype.setDistanceToFit = function (radius, angle) {\r\n  this.position.z = radius / Math.sin(0.5 * THREE.MathUtils.degToRad(angle));\r\n};\r\n\r\n/**\r\n * @param {RCGroup} gfxObj - All objects on scene.\r\n * @param {THREE.PerspectiveCamera} camera - Camera used for rendering.\r\n * @param {number} clipPlane - Distance to clip plane.\r\n * @param {number} fogFarPlane - Distance to fog far plane.\r\n */\r\nTHREE.Raycaster.prototype.intersectVisibleObject = function (gfxObj, camera, clipPlane, fogFarPlane) {\r\n  const intersects = this.intersectObject(gfxObj, false);\r\n  if (intersects.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // find point closest to camera that doesn't get clipped by camera near plane or clipPlane (if it exists)\r\n  const nearPlane = Math.min(camera.near, clipPlane);\r\n  let i;\r\n  let p = intersects[0];\r\n  const v = new THREE.Vector3();\r\n  for (i = 0; i < intersects.length; ++i) {\r\n    p = intersects[i];\r\n    v.copy(p.point);\r\n    v.applyMatrix4(camera.matrixWorldInverse);\r\n    if (v.z <= -nearPlane) {\r\n      break;\r\n    }\r\n  }\r\n  if (i === intersects.length) {\r\n    return null;\r\n  }\r\n\r\n  // check that selected intersection point is not clipped by camera far plane or occluded by fog (if it exists)\r\n  const farPlane = Math.min(camera.far, fogFarPlane);\r\n  v.copy(p.point);\r\n  v.applyMatrix4(camera.matrixWorldInverse);\r\n  if (v.z <= -farPlane) {\r\n    return null;\r\n  }\r\n  return p;\r\n};\r\n\r\nTHREE.Matrix4.prototype.extractScale = (function () {\r\n  const _v = new THREE.Vector3();\r\n\r\n  return function (scale) {\r\n    if (scale === undefined) {\r\n      logger.debug('extractScale(): new is too expensive operation to do it on-the-fly');\r\n      scale = _v.clone();\r\n    }\r\n\r\n    const te = this.elements;\r\n    scale.x = _v.set(te[0], te[1], te[2]).length();\r\n    scale.y = _v.set(te[4], te[5], te[6]).length();\r\n    scale.z = _v.set(te[8], te[9], te[10]).length();\r\n\r\n    // if determine is negative, we need to invert one scale\r\n    const det = this.determinant();\r\n    if (det < 0) {\r\n      scale.x = -scale.x;\r\n    }\r\n    return scale;\r\n  };\r\n}());\r\n\r\nfunction _calcCylinderMatrix(posBegin, posEnd, radius) {\r\n  const posCenter = posBegin.clone().lerp(posEnd, 0.5);\r\n  const matScale = new THREE.Matrix4();\r\n  matScale.makeScale(radius, posBegin.distanceTo(posEnd), radius);\r\n\r\n  const matRotHalf = new THREE.Matrix4();\r\n  matRotHalf.makeRotationX(Math.PI / 2);\r\n\r\n  const matRotLook = new THREE.Matrix4();\r\n  const vUp = new THREE.Vector3(0, 1, 0);\r\n  matRotLook.lookAt(posCenter, posEnd, vUp);\r\n\r\n  matRotLook.multiply(matRotHalf);\r\n  matRotLook.multiply(matScale);\r\n  matRotLook.setPosition(posCenter);\r\n  return matRotLook;\r\n}\r\n\r\nfunction _calcChunkMatrix(eye, target, up, rad) {\r\n  const matScale = new THREE.Matrix4();\r\n  matScale.makeScale(rad.x, rad.y, 0);\r\n\r\n  const matRotLook = new THREE.Matrix4();\r\n  matRotLook.lookAt(eye, target, up);\r\n  matRotLook.multiply(matScale);\r\n  matRotLook.setPosition(eye);\r\n\r\n  return matRotLook;\r\n}\r\n\r\nfunction _groupHasGeometryToRender(group) {\r\n  let hasGeoms = false;\r\n  group.traverse((node) => {\r\n    if (node.hasOwnProperty('geometry') || node instanceof CSS2DObject) {\r\n      hasGeoms = true;\r\n    }\r\n  });\r\n  return hasGeoms;\r\n}\r\n\r\nfunction _buildDistorionMesh(widthSegments, heightSegements, coef) {\r\n  // solve equation r_u = r_d * (1 + k * r_d^2)\r\n  // for r_d using iterations\r\n  // takes: r_u^2\r\n  // returns: r_d / r_u  factor that can be used to distort point coords\r\n  function calcInverseBarrel(r2) {\r\n    const epsilon = 1e-5;\r\n    let prevR2 = 0.0;\r\n    let curR2 = r2;\r\n    let dr = 1.0;\r\n    while (Math.abs(curR2 - prevR2) > epsilon) {\r\n      dr = 1.0 + coef * curR2;\r\n      prevR2 = curR2;\r\n      curR2 = r2 / (dr * dr);\r\n    }\r\n\r\n    return 1.0 / dr;\r\n  }\r\n\r\n  const geo = new THREE.PlaneGeometry(2.0, 2.0, widthSegments, heightSegements);\r\n\r\n  const pos = geo.getAttribute('position');\r\n  for (let i = 0; i < pos.count; ++i) {\r\n    const x = pos.array[3 * i];\r\n    const y = pos.array[3 * i + 1];\r\n    const c = calcInverseBarrel(x * x + y * y);\r\n    pos.setXY(i, c * x, c * y);\r\n  }\r\n\r\n  return geo;\r\n}\r\n\r\nTHREE.BufferAttribute.prototype.copyAtList = function (attribute, indexList) {\r\n  console.assert(\r\n    this.itemSize === attribute.itemSize,\r\n    'DEBUG: BufferAttribute.copyAtList buffers have different item size.',\r\n  );\r\n  const { itemSize } = this;\r\n  for (let i = 0, n = indexList.length; i < n; ++i) {\r\n    for (let j = 0; j < itemSize; ++j) {\r\n      this.array[i * itemSize + j] = attribute.array[indexList[i] * itemSize + j];\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction fillArray(array, value, startIndex, endIndex) {\r\n  startIndex = (typeof startIndex !== 'undefined') ? startIndex : 0;\r\n  endIndex = (typeof endIndex !== 'undefined') ? endIndex : array.length;\r\n  for (let i = startIndex; i < endIndex; ++i) {\r\n    array[i] = value;\r\n  }\r\n}\r\n\r\n/** @param {THREE.Object3D} object - Parent object. */\r\nfunction removeChildren(object) {\r\n  const { children } = object;\r\n  for (let i = 0, n = children.length; i < n; ++i) {\r\n    const child = children[i];\r\n    child.parent = null;\r\n    child.dispatchEvent({ type: 'removed' });\r\n  }\r\n  object.children = [];\r\n}\r\n\r\nfunction clearTree(object) {\r\n  object.traverse((obj) => {\r\n    if (obj instanceof THREE.Mesh || obj instanceof THREE.LineSegments || obj instanceof THREE.Line) {\r\n      obj.geometry.dispose();\r\n    }\r\n  });\r\n  removeChildren(object);\r\n}\r\n\r\nfunction destroyObject(object) {\r\n  clearTree(object);\r\n  if (object.parent) {\r\n    object.parent.remove(object);\r\n  } else {\r\n    object.dispatchEvent({ type: 'removed' });\r\n  }\r\n}\r\n\r\nfunction belongToSelectLayers(object) {\r\n  for (let i = 0; i < SELECTION_LAYERS.length; i++) {\r\n    if (((object.layers.mask >> SELECTION_LAYERS[i]) & 1) === 1) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction processObjRenderOrder(root, idMaterial) {\r\n  // set renderOrder to 0 for Backdrop and to 1 in other cases to render Backdrop earlier all other materials\r\n  const renderOrder = +(idMaterial !== 'BA');\r\n  root.traverse((object) => {\r\n    if (object.isGroup) {\r\n      object.renderOrder = renderOrder;\r\n    }\r\n  });\r\n}\r\n\r\nfunction applySelectionMaterial(geo) {\r\n  geo.traverse((node) => {\r\n    if ('material' in node) {\r\n      node.material = node.material.clone(true);\r\n      // using z-offset to magically fix selection rendering artifact (on z-sprites)\r\n      node.material.setValues({\r\n        depthFunc: THREE.LessEqualDepth,\r\n        overrideColor: true,\r\n        fog: false,\r\n        lights: false,\r\n        shadowmap: false,\r\n      });\r\n      node.material.setUberOptions({ fixedColor: new THREE.Color(0xFFFF00), zOffset: -1e-6 });\r\n    }\r\n  });\r\n}\r\n\r\nfunction getMiddlePoint(point1, point2, optionalTarget) {\r\n  const result = optionalTarget || new THREE.Vector3();\r\n\r\n  result.set(0, 0, 0);\r\n  result.addScaledVector(point1, 0.5);\r\n  result.addScaledVector(point2, 0.5);\r\n\r\n  return result;\r\n}\r\n\r\n// Monkey-patch for \"InstancedBufferGeometry.instanceCount becomes undefined after copy()\"\r\n// https://github.com/mrdoob/three.js/issues/22151\r\nconst _oldInstancedBufferGeometryCopy = THREE.InstancedBufferGeometry.prototype.copy;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function (source) {\r\n  _oldInstancedBufferGeometryCopy.call(this, source);\r\n  if (this.instanceCount === undefined) {\r\n    this.instanceCount = Infinity;\r\n  }\r\n};\r\n\r\nexport default {\r\n  calcCylinderMatrix: _calcCylinderMatrix,\r\n  calcChunkMatrix: _calcChunkMatrix,\r\n  groupHasGeometryToRender: _groupHasGeometryToRender,\r\n  buildDistorionMesh: _buildDistorionMesh,\r\n  RCGroup,\r\n  fillArray,\r\n  clearTree,\r\n  destroyObject,\r\n  belongToSelectLayers,\r\n  processObjRenderOrder,\r\n  applySelectionMaterial,\r\n  getMiddlePoint,\r\n  LAYERS,\r\n};\r\n","import * as THREE from 'three';\r\nimport gfxutils from './gfx/gfxutils';\r\n\r\nconst _defaultBoundaries = {\r\n  boundingBox: new THREE.Box3(new THREE.Vector3(-1, -1, -1), new THREE.Vector3(1, 1, 1)),\r\n  boundingSphere: new THREE.Sphere(new THREE.Vector3(0, 0, 0), 1),\r\n};\r\n\r\nclass Visual extends gfxutils.RCGroup {\r\n  constructor(name, dataSource) {\r\n    super(name, dataSource);\r\n    this.name = name;\r\n    this._dataSource = dataSource;\r\n  }\r\n\r\n  release() {\r\n    if (this.parent) {\r\n      this.parent.remove(this);\r\n    }\r\n  }\r\n\r\n  getDataSource() {\r\n    return this._dataSource;\r\n  }\r\n\r\n  getBoundaries() {\r\n    return _defaultBoundaries;\r\n  }\r\n}\r\n\r\nexport default Visual;\r\n","function _ensureArray(x) {\r\n  if (x === null || x === undefined || Array.isArray(x)) {\r\n    return x;\r\n  }\r\n  return [x];\r\n}\r\n\r\n/** An indexed list of objects or classes. */\r\nclass EntityList {\r\n  /**\r\n   * Create a list of objects.\r\n   * The objects can be indexed by one or more properties for the later retrieval.\r\n   *\r\n   * @param {!Array<Object>=} entities A list of objects to automatically register at creation time.\r\n   * @param {!Array<string>=} indices A list of property names to use for case-insensitive indexing.\r\n   *   By default, a single `.id` property is used.\r\n   * @see EntityList#register\r\n   */\r\n  constructor(entities = [], indices = ['id']) {\r\n    this._list = [];\r\n    this._dict = {};\r\n    this._indices = [...indices];\r\n    this._indices.forEach((index) => {\r\n      this._dict[index] = {};\r\n    });\r\n\r\n    entities.forEach((entity) => this.register(entity));\r\n  }\r\n\r\n  /**\r\n   * Add a value to the end of a list.\r\n   * The list will contain only one copy of the value.\r\n   *\r\n   * @param {!Array} list An array.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.unregisterFromList\r\n   * @see EntityList.registerInDict\r\n   */\r\n  static registerInList(list, value) {\r\n    if (!list.includes(value)) {\r\n      list.push(value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a value from a list if it is there.\r\n   *\r\n   * @param {!Array} list An array.\r\n   * @param {*} value A value to remove.\r\n   * @see EntityList.registerInList\r\n   */\r\n  static unregisterFromList(list, value) {\r\n    const pos = list.indexOf(value);\r\n    if (pos !== -1) {\r\n      list.splice(pos, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a value to a dictionary.\r\n   * The value may be stored under multiple different keys (aliases).\r\n   * There might be multiples values stored under the same key.\r\n   *\r\n   * @param {!Object<string,*>} dict A dictionary.\r\n   * @param {!Array<string>} keys An array of keys.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.unregisterFromDict\r\n   * @see EntityList.registerInList\r\n   */\r\n  static registerInDict(dict, keys, value) {\r\n    keys.forEach((key) => {\r\n      key = key.toLowerCase();\r\n      const list = dict[key] = dict[key] || [];\r\n      if (!list.includes(value)) {\r\n        list.push(value);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove a value from a dictionary.\r\n   * The value may be stored under multiple different keys (aliases).\r\n   * There might be multiples values stored under the same key.\r\n   *\r\n   * @param {!Object<string,*>} dict A dictionary.\r\n   * @param {!Array<string>} keys An array of keys.\r\n   * @param {*} value A value to add.\r\n   * @see EntityList.registerInDict\r\n   */\r\n  static unregisterFromDict(dict, keys, value) {\r\n    keys.forEach((key) => {\r\n      key = key.toLowerCase();\r\n      const list = dict[key];\r\n      if (list) {\r\n        const pos = list.indexOf(value);\r\n        if (pos !== -1) {\r\n          list.splice(pos, 1);\r\n        }\r\n        if (list.length === 0) {\r\n          delete dict[key];\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add an entity to this list.\r\n   *\r\n   * @param {!Object} entity An object or a class to register. The object must include all\r\n   *   properties specified as indices on construction.\r\n   * @see EntityList#unregister\r\n   */\r\n  register(entity) {\r\n    EntityList.registerInList(this._list, entity);\r\n    this._indices.forEach((index) => {\r\n      EntityList.registerInDict(this._dict[index], _ensureArray(entity[index]), entity);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove an entity from this list.\r\n   *\r\n   * @param {!Object} entity An object or a class to unregister. The object may be\r\n   *   missing from the list but it must include all properties specified as indices\r\n   *   on construction.\r\n   * @see EntityList#register\r\n   */\r\n  unregister(entity) {\r\n    EntityList.unregisterFromList(this._list, entity);\r\n    this._indices.forEach((index) => {\r\n      EntityList.unregisterFromDict(this._dict[index], _ensureArray(entity[index]), entity);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * An ordered list of all registered entities.\r\n   * It is a read-only copy, use {@link EntityList#register} and {@link EntityList#unregister}\r\n   * to modify it.\r\n   *\r\n   * @type {!Array<Object>}\r\n   */\r\n  get all() {\r\n    return [...this._list];\r\n  }\r\n\r\n  /**\r\n   * The first registered entity.\r\n   * Use it if you do not care which entity you are referring to.\r\n   *\r\n   * @type {Object=}\r\n   */\r\n  get first() {\r\n    return this._list[0];\r\n  }\r\n\r\n  /**\r\n   * Retrieve a list of keys for the index.\r\n   *\r\n   * @param {string=} index One of the indices specified during the list construction. If omitted,\r\n   *   the first of the indices is used.\r\n   * @returns {!Array<string>} An unordered list of keys in the index, i.e. particular property\r\n   *   values for all registered entities.\r\n   */\r\n  keys(index) {\r\n    return Object.keys(this._dict[index || this._indices[0]]);\r\n  }\r\n\r\n  /**\r\n   * Retrieve an entity by its key.\r\n   *\r\n   * @param {string} key A case-insensitive property value to look-up.\r\n   * @param {string=} index One of the indices specified during the list construction. If omitted,\r\n   *   the first of the indices is used.\r\n   * @returns {Object=} An object registered in the index under the key. If there are multiple\r\n   *   objects under the same key, the first one is returned.\r\n   */\r\n  get(key, index) {\r\n    const dict = this._dict[index || this._indices[0]];\r\n    if (dict) {\r\n      const values = dict[key && key.toLowerCase()];\r\n      return values && values.length > 0 ? values[0] : undefined;\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nexport default EntityList;\r\n","import settings from '../settings';\r\nimport logger from './logger';\r\n\r\nfunction makeContextDependent(prototype) {\r\n  Object.defineProperties(prototype, {\r\n    logger: {\r\n      get() {\r\n        return this.context && this.context.logger ? this.context.logger : logger;\r\n      },\r\n    },\r\n    settings: {\r\n      get() {\r\n        return this.context && this.context.settings ? this.context.settings : settings;\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\nexport default makeContextDependent;\r\n","import * as THREE from 'three';\r\n\r\nclass CollisionSphere {\r\n  constructor(position, radius) {\r\n    this._position = position;\r\n    this._radius = radius;\r\n  }\r\n\r\n  static _sphere = new THREE.Sphere();\r\n\r\n  raycast(raycaster) {\r\n    const sphere = CollisionSphere._sphere;\r\n    sphere.set(this._position, this._radius);\r\n\r\n    const p = new THREE.Vector3();\r\n    if (raycaster.ray.intersectSphere(sphere, p)) {\r\n      return {\r\n        distance: raycaster.ray.origin.distanceTo(p),\r\n        point: p,\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nconst SphereCollisionGeo = (base) => class extends base {\r\n  constructor(count, ...args) {\r\n    super(...args);\r\n    this._objects = new Array(count);\r\n    this.boundingSphere = null;\r\n    this.boundingBox = null;\r\n  }\r\n\r\n  setSphere(idx, position, radius) {\r\n    this._objects[idx] = new CollisionSphere(position, radius);\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    // TODO raycast with bounding sphere? How to deal with updates?\r\n    for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n      const inters = this._objects[i].raycast(raycaster);\r\n      if (inters) {\r\n        inters.chunkIdx = i;\r\n        intersects.push(inters);\r\n      }\r\n    }\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const objects = this._objects;\r\n    let { boundingBox } = this;\r\n    if (boundingBox === null) {\r\n      this.boundingBox = boundingBox = new THREE.Box3();\r\n    }\r\n    boundingBox.makeEmpty();\r\n    for (let i = 0, n = objects.length; i < n; ++i) {\r\n      boundingBox.expandByPoint(objects[i]._position);\r\n    }\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    this.computeBoundingBox();\r\n    const objects = this._objects;\r\n    const { boundingBox } = this;\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    boundingBox.getCenter(center);\r\n    for (let i = 0, n = objects.length; i < n; ++i) {\r\n      const pos = objects[i]._position;\r\n      const lengthSquared = center.distanceToSquared(pos);\r\n      if (radiusSquared < lengthSquared) {\r\n        radiusSquared = lengthSquared;\r\n      }\r\n    }\r\n    if (this.boundingSphere === null) {\r\n      this.boundingSphere = new THREE.Sphere();\r\n    }\r\n    this.boundingSphere.set(center, Math.sqrt(radiusSquared));\r\n  }\r\n};\r\nexport default SphereCollisionGeo;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst tmpColor = new THREE.Color();\r\n\r\nconst OFFSET_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst { copySubArrays } = utils;\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\nclass InstancedSpheresGeometry extends SphereCollisionGeo(THREE.InstancedBufferGeometry) {\r\n  constructor(spheresCount, sphereComplexity, useZSprites) {\r\n    super(spheresCount);\r\n    this._sphGeometry = useZSprites ? new THREE.PlaneGeometry(2, 2, 1, 1)\r\n      : new THREE.SphereBufferGeometry(1, sphereComplexity * 2, sphereComplexity, 0, Math.PI * 2, 0, Math.PI);\r\n    this._init(spheresCount, this._sphGeometry);\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    setArrayXYZW(this._offsets, itemIdx * OFFSET_SIZE, itemPos.x, itemPos.y, itemPos.z, itemRad);\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n  }\r\n\r\n  setColor(itemIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    setArrayXYZ(this._colors, itemIdx * COLOR_SIZE, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('offset').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      alphaArr[chunkIndices[i]] = value;\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const geom = new THREE.InstancedBufferGeometry();\r\n    this._init.call(geom, instanceCount, this._sphGeometry);\r\n\r\n    copySubArrays(this._offsets, geom._offsets, chunkIndices, OFFSET_SIZE);\r\n    copySubArrays(this._colors, geom._colors, chunkIndices, COLOR_SIZE);\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  _init(spheresCount, sphereGeo) {\r\n    this.copy(sphereGeo);\r\n\r\n    this._offsets = utils.allocateTyped(Float32Array, spheresCount * OFFSET_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, spheresCount * COLOR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, spheresCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    this.setAttribute('offset', new THREE.InstancedBufferAttribute(this._offsets, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('color', new THREE.InstancedBufferAttribute(this._colors, COLOR_SIZE, false, 1));\r\n    this.setAttribute('alphaColor', new THREE.InstancedBufferAttribute(alpha, 1, false, 1));\r\n  }\r\n}\r\nexport default InstancedSpheresGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst MAX_IDC_16BIT = 65535;\r\nconst VEC_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\n\r\n/**\r\n * This class represents geometry which consists of separate chunks.\r\n * Each chunk has same index and similar geometry with equal points and faces count.\r\n * Each chunk has by default only one color.\r\n * @constructor\r\n */\r\n\r\nclass ChunkedObjectsGeometry extends THREE.BufferGeometry {\r\n  constructor(chunkGeo, chunksCount) {\r\n    super();\r\n\r\n    if (this.constructor === ChunkedObjectsGeometry) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n\r\n    this._chunkGeo = chunkGeo;\r\n\r\n    this._init(chunkGeo, chunksCount);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('position').needsUpdate = true;\r\n    this.getAttribute('normal').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    const colors = this._colors;\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = chunkIdx * chunkSize, end = i + chunkSize; i < end; ++i) {\r\n      const idx = i * VEC_SIZE;\r\n      colors[idx] = tmpColor.r;\r\n      colors[idx + 1] = tmpColor.g;\r\n      colors[idx + 2] = tmpColor.b;\r\n    }\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const left = chunkIndices[i] * chunkSize;\r\n      _.fill(alphaArr, value, left, left + chunkSize);\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const inters = [];\r\n    // use THREE.Mesh raycasting interface for the Geometry. The Mesh is\r\n    // created with existed geometry and default material, so it doesn't slowdown.\r\n    const mesh = new THREE.Mesh();\r\n    mesh.geometry = this;\r\n    mesh.raycast(raycaster, inters);\r\n\r\n    const facesPerChunk = this._chunkGeo.index.count / 3;\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('faceIndex')) {\r\n        continue;\r\n      }\r\n      inters[i].chunkIdx = Math.floor(inters[i].faceIndex / facesPerChunk);\r\n      intersects.push(inters[i]);\r\n    }\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const geom = new THREE.BufferGeometry();\r\n    this._init.call(geom, this._chunkGeo, instanceCount);\r\n\r\n    const srcPos = this._positions;\r\n    const srcNorm = this._normals;\r\n    const srcColor = this._colors;\r\n\r\n    const dstPos = geom._positions;\r\n    const dstNorm = geom._normals;\r\n    const dstColor = geom._colors;\r\n\r\n    const chunkSize = this._chunkSize * VEC_SIZE;\r\n\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const dstPtOffset = i * chunkSize;\r\n      const ptIdxBegin = chunkIndices[i] * chunkSize;\r\n      const ptIdxEnd = ptIdxBegin + chunkSize;\r\n      dstPos.set(srcPos.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n      dstNorm.set(srcNorm.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n      dstColor.set(srcColor.subarray(ptIdxBegin, ptIdxEnd), dstPtOffset);\r\n    }\r\n\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  _init(chunkGeo, chunksCount) {\r\n    const chunkSize = this._chunkSize = chunkGeo.attributes.position.count;\r\n    const chunkIndex = chunkGeo.index.array;\r\n    const chunkIndexSize = chunkIndex.length;\r\n    const pointsCount = this._chunkSize * chunksCount;\r\n    const use32bitIndex = pointsCount > MAX_IDC_16BIT;\r\n    const indexSize = chunkIndexSize * chunksCount;\r\n    const index = this._index = utils.allocateTyped(use32bitIndex ? Uint32Array : Uint16Array, indexSize);\r\n    this._positions = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    this._normals = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, pointsCount * VEC_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, pointsCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    for (let i = 0; i < chunksCount; ++i) {\r\n      const offset = i * chunkIndexSize;\r\n      const posOffset = i * chunkSize;\r\n      index.set(chunkIndex, offset);\r\n      for (let j = 0; j < chunkIndexSize; ++j) {\r\n        index[offset + j] += posOffset;\r\n      }\r\n    }\r\n\r\n    this.setIndex(new THREE.BufferAttribute(this._index, 1));\r\n    this.setAttribute('position', new THREE.BufferAttribute(this._positions, VEC_SIZE));\r\n    this.setAttribute('normal', new THREE.BufferAttribute(this._normals, VEC_SIZE));\r\n    this.setAttribute('color', new THREE.BufferAttribute(this._colors, VEC_SIZE));\r\n    this.setAttribute('alphaColor', new THREE.BufferAttribute(alpha, 1));\r\n  }\r\n}\r\nexport default ChunkedObjectsGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst VEC_SIZE = 3;\r\n\r\nclass SimpleSpheresGeometry extends SphereCollisionGeo(ChunkedObjectsGeometry) {\r\n  constructor(spheresCount, sphereComplexity) {\r\n    const sphGeometry = new THREE.SphereBufferGeometry(\r\n      1,\r\n      sphereComplexity * 2,\r\n      sphereComplexity,\r\n      0,\r\n      Math.PI * 2,\r\n      0,\r\n      Math.PI,\r\n    );\r\n    super(spheresCount, sphGeometry, spheresCount);\r\n\r\n    const normals = this._normals;\r\n    const geoNormals = sphGeometry.attributes.normal.array;\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._tmpPositions = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n    for (let i = 0; i < spheresCount; ++i) {\r\n      normals.set(geoNormals, chunkSize * VEC_SIZE * i);\r\n    }\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    const tmpPos = this._tmpPositions;\r\n    const chunkSize = this._chunkSize;\r\n    const geoPos = this._chunkPos;\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      const idx = i * 3;\r\n      tmpPos[idx] = itemPos.x + geoPos[idx] * itemRad;\r\n      tmpPos[idx + 1] = itemPos.y + geoPos[idx + 1] * itemRad;\r\n      tmpPos[idx + 2] = itemPos.z + geoPos[idx + 2] * itemRad;\r\n    }\r\n\r\n    this._positions.set(tmpPos, chunkSize * itemIdx * VEC_SIZE);\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n  }\r\n}\r\nexport default SimpleSpheresGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst centerPos = new THREE.Vector3();\r\nconst tmpVector = new THREE.Vector3();\r\nconst normMtx = new THREE.Matrix3();\r\n\r\nclass Simple2CCylindersGeometry extends ChunkedObjectsGeometry {\r\n  constructor(instanceCount, polyComplexity) {\r\n    const cylGeometry = new THREE.CylinderGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, true);\r\n    super(cylGeometry, 2 * instanceCount);\r\n\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._chunkNorms = this._chunkGeo.attributes.normal.array;\r\n    this._tmpVector = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const chunkSize = this._chunkSize;\r\n    const firstOffset = chunkSize * 2 * itemIdx * VEC_SIZE;\r\n    const secondOffset = firstOffset + chunkSize * VEC_SIZE;\r\n\r\n    const tmpArray = this._tmpVector;\r\n    const geoPos = this._chunkPos;\r\n    const geoNorm = this._chunkNorms;\r\n\r\n    centerPos.lerpVectors(botPos, topPos, 0.5);\r\n    const mtx1 = gfxutils.calcCylinderMatrix(botPos, centerPos, itemRad);\r\n    normMtx.getNormalMatrix(mtx1);\r\n\r\n    let idx;\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoPos, idx);\r\n      tmpVector.applyMatrix4(mtx1);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._positions.set(tmpArray, firstOffset);\r\n\r\n    // now shift center to get another part of the cylinder\r\n    centerPos.sub(botPos);\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpArray[idx] += centerPos.x;\r\n      tmpArray[idx + 1] += centerPos.y;\r\n      tmpArray[idx + 2] += centerPos.z;\r\n    }\r\n    this._positions.set(tmpArray, secondOffset);\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoNorm, idx);\r\n      tmpVector.applyMatrix3(normMtx);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._normals.set(tmpArray, firstOffset);\r\n    this._normals.set(tmpArray, secondOffset);\r\n  }\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const first = 2 * itemIdx;\r\n    super.setColor(first, colorVal1);\r\n\r\n    const second = first + 1;\r\n    super.setColor(second, colorVal2);\r\n  }\r\n}\r\n\r\nexport default Simple2CCylindersGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst MAX_POINTS_COUNT_16BIT = 65536;\r\nconst PTS_PER_TRIANGLE = 3;\r\n\r\nclass CylinderBufferGeometry extends THREE.BufferGeometry {\r\n  constructor(\r\n    radiusTop,\r\n    radiusBottom,\r\n    height,\r\n    radialSegments,\r\n    heightSegments,\r\n    openEnded,\r\n  ) {\r\n    super();\r\n\r\n    const thetaStart = 0;\r\n    const thetaLength = 2 * Math.PI;\r\n\r\n    this.type = 'CylinderBufferGeometry';\r\n\r\n    this.parameters = {\r\n      radiusTop,\r\n      radiusBottom,\r\n      height,\r\n      radialSegments,\r\n      heightSegments,\r\n      openEnded,\r\n    };\r\n\r\n    const hasTop = openEnded === false && radiusTop > 0;\r\n    const hasBottom = openEnded === false && radiusBottom > 0;\r\n    const vertexCount = (heightSegments + 1) * radialSegments\r\n      + hasTop * (radialSegments + 1)\r\n      + hasBottom * (radialSegments + 1);\r\n    const facesCount = (2 * heightSegments + hasTop + hasBottom) * radialSegments;\r\n\r\n    const heightHalf = height / 2;\r\n\r\n    /* eslint-disable no-magic-numbers */\r\n    const positions = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 3), 3);\r\n    const normals = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 3), 3);\r\n    const indices = new THREE.Uint16BufferAttribute(utils.allocateTyped(Uint16Array, facesCount * PTS_PER_TRIANGLE), 1);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    const uvs = new THREE.BufferAttribute(utils.allocateTyped(Float32Array, vertexCount * 2), 2);\r\n    console.assert(vertexCount < MAX_POINTS_COUNT_16BIT, 'DEBUG: Cylinder Geometry has too many vertices (65536 max).');\r\n\r\n    let currVtxIdx = 0;\r\n    let currFaceIdx = 0;\r\n    const tanTheta = -(radiusBottom - radiusTop) / height;\r\n\r\n    // setup cylinder data\r\n    for (let y = 0; y <= heightSegments; y++) {\r\n      // faces\r\n      if (y !== heightSegments) {\r\n        for (let i = 0; i < radialSegments; i++) {\r\n          const v1 = currVtxIdx + i;\r\n          const v2 = currVtxIdx + radialSegments + i;\r\n          const v3 = currVtxIdx + radialSegments + ((i + 1) % radialSegments);\r\n          const v4 = currVtxIdx + ((i + 1) % radialSegments);\r\n\r\n          indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, v1, v4, v2);\r\n          currFaceIdx++;\r\n          indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, v2, v4, v3);\r\n          currFaceIdx++;\r\n        }\r\n      }\r\n\r\n      // vertices\r\n      const v = y / heightSegments;\r\n      const radius = v * (radiusBottom - radiusTop) + radiusTop;\r\n\r\n      for (let x = 0; x < radialSegments; x++) {\r\n        const u = x / radialSegments;\r\n\r\n        const vx = radius * Math.sin(u * thetaLength + thetaStart);\r\n        const vy = v * height - heightHalf;\r\n        const vz = radius * Math.cos(u * thetaLength + thetaStart);\r\n\r\n        const normal = new THREE.Vector3(\r\n          vx,\r\n          Math.sqrt(vx * vx + vz * vz) * tanTheta,\r\n          vz,\r\n        ).normalize();\r\n\r\n        positions.setXYZ(currVtxIdx, vx, vy, vz);\r\n        normals.setXYZ(currVtxIdx, normal.x, normal.y, normal.z);\r\n        uvs.setXY(currVtxIdx, u, v);\r\n        ++currVtxIdx;\r\n      }\r\n    }\r\n\r\n    // top cap\r\n    if (hasTop) {\r\n      const startTIdx = currVtxIdx;\r\n      const lastIdx = currVtxIdx + radialSegments;\r\n      for (let fTIdx = 0; fTIdx < radialSegments; ++fTIdx) {\r\n        const currSrcIdx = currVtxIdx - radialSegments;\r\n        positions.setXYZ(\r\n          currVtxIdx,\r\n          positions.getX(currSrcIdx),\r\n          positions.getY(currSrcIdx),\r\n          positions.getZ(currSrcIdx),\r\n        );\r\n        normals.setXYZ(currVtxIdx, 0, 1, 0);\r\n        uvs.setXY(currVtxIdx, 1, 1);\r\n\r\n        const nextTVtx = startTIdx + ((fTIdx + 1) % radialSegments);\r\n        indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, currVtxIdx, nextTVtx, lastIdx);\r\n        currFaceIdx++;\r\n        currVtxIdx++;\r\n      }\r\n\r\n      positions.setXYZ(currVtxIdx, 0, heightHalf, 0);\r\n      normals.setXYZ(currVtxIdx, 0, 1, 0);\r\n      uvs.setXY(currVtxIdx, 1, 1);\r\n      ++currVtxIdx;\r\n    }\r\n\r\n    // bottom cap\r\n    if (hasBottom) {\r\n      const startBIdx = currVtxIdx;\r\n      const lastBIdx = currVtxIdx + radialSegments;\r\n      for (let fBIdx = 0; fBIdx < radialSegments; ++fBIdx) {\r\n        const currSrcBIdx = fBIdx;\r\n        positions.setXYZ(\r\n          currVtxIdx,\r\n          positions.getX(currSrcBIdx),\r\n          positions.getY(currSrcBIdx),\r\n          positions.getZ(currSrcBIdx),\r\n        );\r\n        normals.setXYZ(currVtxIdx, 0, -1, 0);\r\n        uvs.setXY(currVtxIdx, 0, 0);\r\n\r\n        const nextBVtx = startBIdx + ((fBIdx + 1) % radialSegments);\r\n        indices.setXYZ(currFaceIdx * PTS_PER_TRIANGLE, nextBVtx, currVtxIdx, lastBIdx);\r\n        currFaceIdx++;\r\n        currVtxIdx++;\r\n      }\r\n\r\n      positions.setXYZ(currVtxIdx, 0, -heightHalf, 0);\r\n      normals.setXYZ(currVtxIdx, 0, -1, 0);\r\n      uvs.setXY(currVtxIdx, 0, 0);\r\n    }\r\n\r\n    this.setIndex(indices);\r\n    this.setAttribute('position', positions);\r\n    this.setAttribute('normal', normals);\r\n    this.setAttribute('uv', uvs);\r\n  }\r\n\r\n  clone() {\r\n    const { parameters } = this;\r\n\r\n    return new CylinderBufferGeometry(\r\n      parameters.radiusTop,\r\n      parameters.radiusBottom,\r\n      parameters.height,\r\n      parameters.radialSegments,\r\n      parameters.heightSegments,\r\n      parameters.openEnded,\r\n    );\r\n  }\r\n}\r\n\r\nexport default CylinderBufferGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\nimport CylinderBufferGeometry from './CylinderBufferGeometry';\r\n\r\nconst tmpColor = new THREE.Color();\r\nconst invMatrix = new THREE.Matrix4();\r\n\r\nconst OFFSET_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst { copySubArrays } = utils;\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\n\r\nfunction sortNumber(a, b) {\r\n  return a - b;\r\n}\r\n\r\nfunction _prepareCylinderInfo(chunkIndices) {\r\n  chunkIndices.sort(sortNumber);\r\n  const chunksIdx = [];\r\n  const cylinderInfo = [];\r\n  for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n    const val = chunkIndices[i];\r\n    const even = (val | 0) % 2 === 0;\r\n    const newPar = {\r\n      first: false,\r\n      second: false,\r\n    };\r\n    if (even) {\r\n      newPar.first = true;\r\n      newPar.second = i + 1 < n && chunkIndices[i + 1] === chunkIndices[i] + 1;\r\n      if (newPar.second) {\r\n        ++i;\r\n      }\r\n    } else {\r\n      newPar.second = true;\r\n    }\r\n    chunksIdx.push(Math.floor(val / 2));\r\n    cylinderInfo.push(newPar);\r\n  }\r\n  return { indices: chunksIdx, cylinderInfo };\r\n}\r\n\r\nfunction _assignOpacity(cylinderInfo, color1, color2) {\r\n  for (let i = 0, n = cylinderInfo.length; i < n; ++i) {\r\n    const info = cylinderInfo[i];\r\n    if (!info.first) {\r\n      color1[COLOR_SIZE * i] = -0.5;\r\n    }\r\n    if (!info.second) {\r\n      color2[COLOR_SIZE * i] = -0.5;\r\n    }\r\n  }\r\n}\r\nclass Instanced2CCylindersGeometry extends THREE.InstancedBufferGeometry {\r\n  constructor(instanceCount, polyComplexity, useZSprites, openEnded) {\r\n    super();\r\n    this._useZSprites = useZSprites;\r\n    this._cylGeometry = useZSprites ? new THREE.PlaneGeometry(2, 2, 1, 1)\r\n      : new CylinderBufferGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, openEnded);\r\n    this._init(instanceCount, this._cylGeometry, this._useZSprites);\r\n\r\n    this._collisionGeo = new Simple2CCylindersGeometry(instanceCount, 3);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const matrix = gfxutils.calcCylinderMatrix(botPos, topPos, itemRad);\r\n    let me = matrix.elements;\r\n    const mtxOffset = itemIdx * OFFSET_SIZE;\r\n\r\n    this._collisionGeo.setItem(itemIdx, botPos, topPos, itemRad);\r\n    setArrayXYZW(this._matVector1, mtxOffset, me[0], me[4], me[8], me[12]);\r\n    setArrayXYZW(this._matVector2, mtxOffset, me[1], me[5], me[9], me[13]);\r\n    setArrayXYZW(this._matVector3, mtxOffset, me[2], me[6], me[10], me[14]);\r\n\r\n    if (this._useZSprites) {\r\n      invMatrix.copy(matrix).invert();\r\n      me = invMatrix.elements;\r\n      setArrayXYZW(this._invmatVector1, mtxOffset, me[0], me[4], me[8], me[12]);\r\n      setArrayXYZW(this._invmatVector2, mtxOffset, me[1], me[5], me[9], me[13]);\r\n      setArrayXYZW(this._invmatVector3, mtxOffset, me[2], me[6], me[10], me[14]);\r\n    }\r\n  }\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const colorIdx = itemIdx * COLOR_SIZE;\r\n    tmpColor.set(colorVal1);\r\n    setArrayXYZ(this._color1, colorIdx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    tmpColor.set(colorVal2);\r\n    setArrayXYZ(this._color2, colorIdx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    this._collisionGeo.computeBoundingSphere();\r\n    this.boundingSphere = this._collisionGeo.boundingSphere;\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    this._collisionGeo.computeBoundingBox();\r\n    this.boundingBox = this._collisionGeo.boundingBox;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    this._collisionGeo.raycast(raycaster, intersects);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('matVector1').needsUpdate = true;\r\n    this.getAttribute('matVector2').needsUpdate = true;\r\n    this.getAttribute('matVector3').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n    this.getAttribute('color2').needsUpdate = true;\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n    if (this._useZSprites) {\r\n      this.getAttribute('invmatVector1').needsUpdate = true;\r\n      this.getAttribute('invmatVector2').needsUpdate = true;\r\n      this.getAttribute('invmatVector3').needsUpdate = true;\r\n    }\r\n\r\n    this._collisionGeo.finishUpdate();\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const alphaArr = this._alpha;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      alphaArr[Math.floor(chunkIndices[i] / 2)] = value;\r\n    }\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const info = _prepareCylinderInfo(chunkIndices);\r\n    const cylinderIndices = info.indices;\r\n    const instanceCount = cylinderIndices.length;\r\n    const geom = new THREE.InstancedBufferGeometry();\r\n    this._init.call(geom, instanceCount, this._cylGeometry, this._useZSprites);\r\n\r\n    copySubArrays(this._matVector1, geom._matVector1, cylinderIndices, OFFSET_SIZE);\r\n    copySubArrays(this._matVector2, geom._matVector2, cylinderIndices, OFFSET_SIZE);\r\n    copySubArrays(this._matVector3, geom._matVector3, cylinderIndices, OFFSET_SIZE);\r\n\r\n    if (this._useZSprites) {\r\n      copySubArrays(this._invmatVector1, geom._invmatVector1, cylinderIndices, OFFSET_SIZE);\r\n      copySubArrays(this._invmatVector2, geom._invmatVector2, cylinderIndices, OFFSET_SIZE);\r\n      copySubArrays(this._invmatVector3, geom._invmatVector3, cylinderIndices, OFFSET_SIZE);\r\n    }\r\n\r\n    copySubArrays(this._color1, geom._color1, cylinderIndices, COLOR_SIZE);\r\n    copySubArrays(this._color2, geom._color2, cylinderIndices, COLOR_SIZE);\r\n    _assignOpacity(info.cylinderInfo, geom._color1, geom._color2);\r\n    geom.boundingSphere = this.boundingSphere;\r\n    geom.boundingBox = this.boundingBox;\r\n    return [geom];\r\n  }\r\n\r\n  getGeoParams() {\r\n    return this._cylGeometry.parameters;\r\n  }\r\n\r\n  _init(instanceCount, cylinderGeo, useZSprites) {\r\n    this.copy(cylinderGeo);\r\n    this._matVector1 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._matVector2 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._matVector3 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n    this._color1 = utils.allocateTyped(Float32Array, instanceCount * COLOR_SIZE);\r\n    this._color2 = utils.allocateTyped(Float32Array, instanceCount * COLOR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, instanceCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    this.setAttribute('matVector1', new THREE.InstancedBufferAttribute(this._matVector1, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('matVector2', new THREE.InstancedBufferAttribute(this._matVector2, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('matVector3', new THREE.InstancedBufferAttribute(this._matVector3, OFFSET_SIZE, false, 1));\r\n    this.setAttribute('color', new THREE.InstancedBufferAttribute(this._color1, COLOR_SIZE, false, 1));\r\n    this.setAttribute('color2', new THREE.InstancedBufferAttribute(this._color2, COLOR_SIZE, false, 1));\r\n\r\n    this.setAttribute('alphaColor', new THREE.InstancedBufferAttribute(this._alpha, 1, false, 1));\r\n\r\n    if (useZSprites) {\r\n      this._invmatVector1 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n      this._invmatVector2 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n      this._invmatVector3 = utils.allocateTyped(Float32Array, instanceCount * OFFSET_SIZE);\r\n\r\n      this.setAttribute(\r\n        'invmatVector1',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector1, OFFSET_SIZE, false, 1),\r\n      );\r\n      this.setAttribute(\r\n        'invmatVector2',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector2, OFFSET_SIZE, false, 1),\r\n      );\r\n      this.setAttribute(\r\n        'invmatVector3',\r\n        new THREE.InstancedBufferAttribute(this._invmatVector3, OFFSET_SIZE, false, 1),\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Instanced2CCylindersGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst TRI_SIZE = 3;\r\nconst tmpPrev = new THREE.Vector3();\r\nconst tmpNext = new THREE.Vector3();\r\nconst tmpRes = new THREE.Vector3();\r\nconst simpleNormal = new THREE.Vector3(1.0, 0.0, 0.0);\r\nconst normalOnCut = new THREE.Vector3();\r\nconst nearRingPt = new THREE.Vector3();\r\n\r\nfunction _createExtrudedChunkGeometry(shape, ringsCount) {\r\n  const geo = new THREE.BufferGeometry();\r\n  const ptsCount = shape.length;\r\n  const totalPts = ptsCount * ringsCount;\r\n  const type = totalPts <= 65536 ? Uint16Array : Uint32Array;\r\n  const facesPerChunk = (ringsCount - 1) * ptsCount * 2;\r\n  const indices = new THREE.BufferAttribute(utils.allocateTyped(type, facesPerChunk * TRI_SIZE), 1);\r\n\r\n  let currVtxIdx = 0;\r\n  let currFaceIdx = 0;\r\n  for (let y = 0; y < ringsCount; y++) {\r\n    // faces\r\n    if (y !== ringsCount - 1) {\r\n      for (let i = 0; i < ptsCount; i++) {\r\n        const v1 = currVtxIdx + i;\r\n        const v2 = currVtxIdx + ptsCount + i;\r\n        const v3 = currVtxIdx + ptsCount + ((i + 1) % ptsCount);\r\n        const v4 = currVtxIdx + ((i + 1) % ptsCount);\r\n\r\n        indices.setXYZ(currFaceIdx * TRI_SIZE, v1, v4, v2);\r\n        currFaceIdx++;\r\n        indices.setXYZ(currFaceIdx * TRI_SIZE, v2, v4, v3);\r\n        currFaceIdx++;\r\n      }\r\n    }\r\n\r\n    currVtxIdx += ptsCount;\r\n  }\r\n\r\n  geo.setIndex(indices);\r\n  const pos = utils.allocateTyped(Float32Array, totalPts * VEC_SIZE);\r\n  geo.setAttribute('position', new THREE.BufferAttribute(pos, VEC_SIZE));\r\n\r\n  geo._positions = shape;\r\n\r\n  return geo;\r\n}\r\n\r\nclass ExtrudedObjectsGeometry extends ChunkedObjectsGeometry {\r\n  constructor(shape, ringsCount, chunksCount) {\r\n    const chunkGeo = _createExtrudedChunkGeometry(shape, ringsCount);\r\n    super(chunkGeo, chunksCount);\r\n    this._ringsCount = ringsCount;\r\n\r\n    const tmpShape = this._tmpShape = [];\r\n    for (let i = 0; i < shape.length; ++i) {\r\n      tmpShape[i] = new THREE.Vector3();\r\n    }\r\n  }\r\n\r\n  setItem(itemIdx, matrices, hasSlope = false, hasCut = false) {\r\n    const ptsCount = this._chunkGeo._positions.length;\r\n    const ringsCount = this._ringsCount;\r\n    const chunkStartIdx = ptsCount * this._ringsCount * itemIdx * VEC_SIZE;\r\n\r\n    this._setPoints(matrices, ptsCount, ringsCount, chunkStartIdx);\r\n\r\n    if (hasSlope) {\r\n      this._setSlopeNormals(ptsCount, ringsCount, chunkStartIdx);\r\n    } else {\r\n      this._setBaseNormals(ptsCount, ringsCount, chunkStartIdx);\r\n    }\r\n\r\n    if (hasCut) {\r\n      this._addCut(ptsCount, ringsCount, chunkStartIdx);\r\n    }\r\n  }\r\n\r\n  _setPoints(matrices, ptsCount, ringsCount, chunkStartIdx) {\r\n    const tmpShape = this._tmpShape;\r\n    const positions = this._positions;\r\n    const shape = this._chunkGeo._positions;\r\n\r\n    for (let i = 0, vtxIdx = chunkStartIdx; i < ringsCount; ++i) {\r\n      const mtx = matrices[i];\r\n\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpShape[j].copy(shape[j]).applyMatrix4(mtx).toArray(positions, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  _setBaseNormals(ptsCount, ringsCount, chunkStartIdx) {\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    for (let i = 0, vtxIdx = chunkStartIdx; i < ringsCount; ++i, vtxIdx += nPtsInRing) {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, false);\r\n    }\r\n  }\r\n\r\n  _setSlopeNormals(ptsCount, ringsCount, chunkStartIdx) {\r\n    const normals = this._normals;\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    let vtxIdx = chunkStartIdx;\r\n    // First ring\r\n    // In all cases, besides cut, second ring is coincident to first. So values of first ring's normals doesn't\r\n    // matter (In the cut case special handler will be applied later and will set them to correct values)\r\n    for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n      simpleNormal.toArray(normals, vtxIdx);\r\n    }\r\n    // second ring\r\n    // If it isn't first Item we take normals' values from the last ring of the previous item (these rings are coincident)\r\n    // else we count normals' values based on next ring information\r\n    if (vtxIdx - 2 * nPtsInRing > 0) {\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpRes.fromArray(normals, vtxIdx - 2 * nPtsInRing).toArray(normals, vtxIdx);\r\n      }\r\n    } else {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, true, +nPtsInRing);\r\n      vtxIdx += nPtsInRing;\r\n    }\r\n    // other rings\r\n    // we count normals' values based on previous ring information\r\n    for (let i = 2; i < ringsCount; ++i, vtxIdx += nPtsInRing) {\r\n      this._countNormalsInRing(ptsCount, vtxIdx, true, -nPtsInRing);\r\n    }\r\n  }\r\n\r\n  // Counting normals:\r\n  // - Slope\r\n  //   Radius changes throught part => normals aren't parallel with the plane contains section points\r\n  //   normal = vTangentInSectionPlane x vToSuchPointInPrevSection (all vectors are scaled for being 1 in length)\r\n  // - No slope\r\n  //   Radius doesn't change throught part => normals are parallel with the plane contains section points\r\n  //   normal = vToPrevPointInSection + vToNextPointInSection (all vectors are scaled for being 1 in length)\r\n  _countNormalsInRing(ptsCount, vtxIdx, isSlope, shiftToExtraPt) {\r\n    const tmpShape = this._tmpShape;\r\n    const normals = this._normals;\r\n\r\n    tmpShape[0].fromArray(this._positions, vtxIdx);\r\n    tmpShape[ptsCount - 1].fromArray(this._positions, vtxIdx + (ptsCount - 1) * VEC_SIZE);\r\n\r\n    for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n      if (j < ptsCount - 1) {\r\n        tmpShape[j + 1].fromArray(this._positions, vtxIdx + VEC_SIZE);\r\n      }\r\n\r\n      if (isSlope) {\r\n        nearRingPt.fromArray(this._positions, vtxIdx + shiftToExtraPt);\r\n\r\n        tmpPrev.subVectors(tmpShape[(j + ptsCount - 1) % ptsCount], tmpShape[(j + 1) % ptsCount]).normalize();\r\n        tmpNext.subVectors(tmpShape[j], nearRingPt).normalize();\r\n        tmpRes.crossVectors(tmpNext, tmpPrev).normalize().toArray(normals, vtxIdx);\r\n      } else {\r\n        tmpPrev.subVectors(tmpShape[j], tmpShape[(j + ptsCount - 1) % ptsCount]).normalize();\r\n        tmpNext.subVectors(tmpShape[j], tmpShape[(j + 1) % ptsCount]).normalize();\r\n        tmpRes.addVectors(tmpPrev, tmpNext).normalize().toArray(normals, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n\r\n  _addCut(ptsCount, ringsCount, chunkStartIdx) {\r\n    // Nothing to do if item is flat or only line\r\n    if (ptsCount < 3 || ringsCount < 2) {\r\n      return;\r\n    }\r\n    const positions = this._positions;\r\n    const normals = this._normals;\r\n    const tmpShape = this._tmpShape;\r\n    const nPtsInRing = ptsCount * VEC_SIZE;\r\n\r\n    // Normal to the cut plane is equal to cross product of two vectors which are lying in it\r\n    tmpShape[0].fromArray(positions, chunkStartIdx);\r\n    tmpShape[1].fromArray(positions, chunkStartIdx + VEC_SIZE);\r\n    tmpShape[2].fromArray(positions, chunkStartIdx + 2 * VEC_SIZE);\r\n\r\n    tmpPrev.subVectors(tmpShape[1], tmpShape[0]).normalize();\r\n    tmpNext.subVectors(tmpShape[1], tmpShape[2]).normalize();\r\n    normalOnCut.crossVectors(tmpPrev, tmpNext).normalize();\r\n\r\n    let vtxIdx = chunkStartIdx;\r\n    // First and second rings normals' values are equal to value of normal to the cutting plane\r\n    for (let j = 0; j < ptsCount * 2; ++j, vtxIdx += VEC_SIZE) {\r\n      normalOnCut.toArray(normals, vtxIdx);\r\n    }\r\n    if (ringsCount > 2) {\r\n      // Third ring points are coincident to first ring points, but have different normals. It makes sharp angle near cut\r\n      for (let j = 0; j < ptsCount; ++j, vtxIdx += VEC_SIZE) {\r\n        tmpRes.fromArray(positions, vtxIdx - nPtsInRing).toArray(positions, vtxIdx);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ExtrudedObjectsGeometry;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst MAX_IDC_16BIT = 65535;\r\nconst VERTEX_PER_SEGMENT = 4;\r\nconst POS_SIZE = 4;\r\nconst DIR_SIZE = 3;\r\nconst COL_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\nconst direction = new THREE.Vector3();\r\n\r\nfunction setArrayXYZ(arr, idx, x, y, z) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n}\r\n\r\nfunction setArrayXYZW(arr, idx, x, y, z, w) {\r\n  arr[idx] = x;\r\n  arr[idx + 1] = y;\r\n  arr[idx + 2] = z;\r\n  arr[idx + 3] = w;\r\n}\r\n\r\nfunction getSubset(arr, startSegmentIdx, segmentsCount, elemSize) {\r\n  const start = startSegmentIdx * VERTEX_PER_SEGMENT;\r\n  const end = start + segmentsCount * VERTEX_PER_SEGMENT;\r\n  return arr.subarray(start * elemSize, end * elemSize);\r\n}\r\n\r\n/**\r\n * This class represents lines geometry which consists of screen-aligned narrow quad of variable width.\r\n *\r\n * @constructor\r\n *\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n * collision geometry.\r\n */\r\n\r\nclass ThickLinesGeometry extends THREE.BufferGeometry {\r\n  constructor(segmentsCount) {\r\n    super();\r\n    this._initVertices(segmentsCount);\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.getAttribute('position').needsUpdate = true;\r\n    this.getAttribute('color').needsUpdate = true;\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n    this.getAttribute('direction').needsUpdate = true;\r\n  }\r\n\r\n  setColor(segmentIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    let idx = segmentIdx * VERTEX_PER_SEGMENT * COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n    idx += COL_SIZE;\r\n    setArrayXYZ(this._colors, idx, tmpColor.r, tmpColor.g, tmpColor.b);\r\n  }\r\n\r\n  setSegment(segmentIdx, pos1, pos2) {\r\n    direction.subVectors(pos1, pos2);\r\n    direction.normalize();\r\n    const positions = this._positions;\r\n    const directions = this._directions;\r\n    let idx = segmentIdx * VERTEX_PER_SEGMENT * POS_SIZE;\r\n    let dirIdx = segmentIdx * VERTEX_PER_SEGMENT * DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos1.x, pos1.y, pos1.z, 0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos1.x, pos1.y, pos1.z, -0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos2.x, pos2.y, pos2.z, 0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n    idx += POS_SIZE;\r\n    dirIdx += DIR_SIZE;\r\n    setArrayXYZW(positions, idx, pos2.x, pos2.y, pos2.z, -0.5);\r\n    setArrayXYZ(directions, dirIdx, direction.x, direction.y, direction.z);\r\n  }\r\n\r\n  setOpacity(startSegIdx, endSegIdx, value) {\r\n    const start = startSegIdx * VERTEX_PER_SEGMENT;\r\n    const end = endSegIdx * VERTEX_PER_SEGMENT;\r\n    _.fill(this.alpha, value, end, start);\r\n    this.getAttribute('alphaColor').needsUpdate = true;\r\n  }\r\n\r\n  getSubsetSegments(startSegmentIdx, segmentsCount) {\r\n    return [\r\n      getSubset(this._positions, startSegmentIdx, segmentsCount, POS_SIZE),\r\n      getSubset(this._directions, startSegmentIdx, segmentsCount, DIR_SIZE),\r\n    ];\r\n  }\r\n\r\n  getSubsetColors(startSegmentIdx, segmentsCount) {\r\n    return getSubset(this._colors, startSegmentIdx, segmentsCount, COL_SIZE);\r\n  }\r\n\r\n  getSubsetOpacities(startSegmentIdx, segmentsCount) {\r\n    return getSubset(this._alpha, startSegmentIdx, segmentsCount, 1);\r\n  }\r\n\r\n  getNumVertexPerSegment() {\r\n    return VERTEX_PER_SEGMENT;\r\n  }\r\n\r\n  getPositionSize() {\r\n    return POS_SIZE;\r\n  }\r\n\r\n  setSegments(startSegmentIdx, positions) {\r\n    const startPos = startSegmentIdx * VERTEX_PER_SEGMENT * POS_SIZE;\r\n    if (positions instanceof Array && positions.length === 2) {\r\n      this._positions.set(positions[0], startPos);\r\n      const startDir = startSegmentIdx * VERTEX_PER_SEGMENT * DIR_SIZE;\r\n      this._directions.set(positions[1], startDir); // dirs are geo part of vertex\r\n    } else {\r\n      this._positions.set(positions, startPos);\r\n    }\r\n  }\r\n\r\n  setColors(startSegmentIdx, colors) {\r\n    const start = startSegmentIdx * VERTEX_PER_SEGMENT * COL_SIZE;\r\n    this._colors.set(colors, start);\r\n  }\r\n\r\n  _initVertices(segmentsCount) {\r\n    this._buffersSize = segmentsCount * VERTEX_PER_SEGMENT;\r\n    const pointsCount = this._buffersSize;\r\n    const use32bitIndex = pointsCount > MAX_IDC_16BIT;\r\n    this._index = utils.allocateTyped(use32bitIndex ? Uint32Array : Uint16Array, segmentsCount * 6);\r\n    this._positions = utils.allocateTyped(Float32Array, pointsCount * POS_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, pointsCount * COL_SIZE);\r\n    this._directions = utils.allocateTyped(Float32Array, pointsCount * DIR_SIZE);\r\n    const alpha = this._alpha = utils.allocateTyped(Float32Array, pointsCount);\r\n    _.fill(alpha, 1.0);\r\n\r\n    const index = this._index;\r\n    let indexOffset = 0;\r\n    let pointOffset = 0;\r\n    for (let j = 0; j < segmentsCount; j++, indexOffset += 6, pointOffset += VERTEX_PER_SEGMENT) {\r\n      index[indexOffset] = pointOffset;\r\n      index[indexOffset + 1] = pointOffset + 1;\r\n      index[indexOffset + 2] = pointOffset + 3;\r\n      index[indexOffset + 3] = pointOffset;\r\n      index[indexOffset + 4] = pointOffset + 2;\r\n      index[indexOffset + 5] = pointOffset + 3;\r\n    }\r\n    this.setIndex(new THREE.BufferAttribute(this._index, 1));\r\n\r\n    this.setAttribute('position', new THREE.BufferAttribute(this._positions, POS_SIZE));\r\n    this.setAttribute('color', new THREE.BufferAttribute(this._colors, COL_SIZE));\r\n    this.setAttribute('alphaColor', new THREE.BufferAttribute(alpha, 1));\r\n    this.setAttribute('direction', new THREE.BufferAttribute(this._directions, DIR_SIZE));\r\n  }\r\n}\r\n\r\nexport default ThickLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport BaseLinesGeometry from './ThickLinesGeometry';\r\n\r\n/**\r\n * This class represents geometry which consists lines. This can build bounding volumes\r\n * @constructor\r\n *\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n */\r\nclass LinesGeometry extends BaseLinesGeometry {\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    const { boundingBox } = this;\r\n    // Build bounding sphere\r\n    let radiusSquared = 0.0;\r\n    const center = new THREE.Vector3();\r\n    if (boundingBox) {\r\n      boundingBox.getCenter(center);\r\n    }\r\n    const positions = this._positions;\r\n    const sphere = this.boundingSphere || new THREE.Sphere();\r\n    const size = this._positions.length;\r\n    const pos = new THREE.Vector3();\r\n    const posSize = this.getPositionSize();\r\n    for (let i = 0; i < size; i += posSize) {\r\n      pos.set(positions[i], positions[i + 1], positions[i + 2]);\r\n      const lengthSquared = center.distanceToSquared(pos);\r\n      if (radiusSquared < lengthSquared) {\r\n        radiusSquared = lengthSquared;\r\n      }\r\n    }\r\n    sphere.set(center, Math.sqrt(radiusSquared));\r\n    this.boundingSphere = sphere;\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const positions = this._positions;\r\n    const box = new THREE.Box3();\r\n    const size = this._positions.length;\r\n    const tmpVec = new THREE.Vector3();\r\n    const posSize = this.getPositionSize();\r\n    for (let i = 0; i < size; i += posSize) {\r\n      tmpVec.set(positions[i], positions[i + 1], positions[i + 2]);\r\n      box.expandByPoint(tmpVec);\r\n    }\r\n    this.boundingBox = box;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n}\r\n\r\nexport default LinesGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport ChunkedObjectsGeometry from './ChunkedObjectsGeometry';\r\n\r\nconst VEC_SIZE = 3;\r\nconst tmpVector = new THREE.Vector3();\r\nconst normMtx = new THREE.Matrix3();\r\n\r\nclass CylinderCollisionGeo extends ChunkedObjectsGeometry {\r\n  constructor(instanceCount, polyComplexity) {\r\n    const cylGeometry = new THREE.CylinderGeometry(1, 1, 1.0, Math.max(3, polyComplexity), 2, true);\r\n    super(cylGeometry, instanceCount);\r\n\r\n    const chunkSize = this._chunkSize;\r\n    this._chunkPos = this._chunkGeo.attributes.position.array;\r\n    this._chunkNorms = this._chunkGeo.attributes.normal.array;\r\n    this._tmpVector = utils.allocateTyped(Float32Array, chunkSize * VEC_SIZE);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos, itemRad) {\r\n    const chunkSize = this._chunkSize;\r\n    const itemOffset = chunkSize * itemIdx * VEC_SIZE;\r\n\r\n    const tmpArray = this._tmpVector;\r\n    const geoPos = this._chunkPos;\r\n    const geoNorm = this._chunkNorms;\r\n\r\n    const mtx1 = gfxutils.calcCylinderMatrix(botPos, topPos, itemRad);\r\n    normMtx.getNormalMatrix(mtx1);\r\n    let idx;\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoPos, idx);\r\n      tmpVector.applyMatrix4(mtx1);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._positions.set(tmpArray, itemOffset);\r\n\r\n    for (let i = 0; i < chunkSize; ++i) {\r\n      idx = i * VEC_SIZE;\r\n      tmpVector.fromArray(geoNorm, idx);\r\n      tmpVector.applyMatrix3(normMtx);\r\n      tmpVector.toArray(tmpArray, idx);\r\n    }\r\n    this._normals.set(tmpArray, itemOffset);\r\n  }\r\n}\r\nexport default CylinderCollisionGeo;\r\n","import LinesGeometry from './LinesGeometry';\r\nimport CylinderCollisionGeo from './CylinderCollisionGeo';\r\n\r\nconst COLLISION_RAD = 0.1;\r\n\r\n/**\r\n * This class represents geometry which consists of separate chunks.\r\n * Each chunk has same index and similar geometry with equal points and faces count.\r\n * Each chunk has by default only one color.\r\n * @constructor\r\n *\r\n * @param {number}  chunksCount     Total chunks count.\r\n * @param {number}  segmentsCount   Number of segments per chunk.\r\n * @param {boolean} enableCollision Enable or disable collision where each segment is\r\n *                                  a collidable cylinder.\r\n * collision geometry.\r\n */\r\nclass ChunkedLinesGeometry extends LinesGeometry {\r\n  constructor(chunksCount, segmentsCount, enableCollision) {\r\n    super(chunksCount * segmentsCount);\r\n    this._init(segmentsCount);\r\n    this._collisionGeo = enableCollision ? new CylinderCollisionGeo(chunksCount * segmentsCount, 3) : null;\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  computeBoundingSphere() {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (collisionGeo) {\r\n      collisionGeo.computeBoundingSphere();\r\n      this.boundingSphere = collisionGeo.boundingSphere;\r\n      return;\r\n    }\r\n    super.computeBoundingSphere();\r\n  }\r\n\r\n  computeBoundingBox() {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (collisionGeo) {\r\n      collisionGeo.computeBoundingBox();\r\n      this.boundingBox = collisionGeo.boundingBox;\r\n      return;\r\n    }\r\n    super.computeBoundingBox();\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const collisionGeo = this._collisionGeo;\r\n    if (!collisionGeo) {\r\n      return;\r\n    }\r\n    const segCount = this._chunkSize;\r\n    this._collisionGeo.raycast(raycaster, intersects);\r\n    for (let i = 0, n = intersects.length; i < n; ++i) {\r\n      let { chunkIdx } = intersects[i];\r\n      if (chunkIdx === undefined) {\r\n        continue;\r\n      }\r\n      chunkIdx = (chunkIdx / segCount) | 0;\r\n      intersects[i].chunkIdx = chunkIdx;\r\n    }\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = chunkIdx * chunkSize, end = i + chunkSize; i < end; ++i) {\r\n      super.setColor(i, colorVal);\r\n    }\r\n  }\r\n\r\n  setSegment(chunkIdx, segIdx, pos1, pos2) {\r\n    const chunkSize = this._chunkSize;\r\n    const idx = chunkIdx * chunkSize + segIdx;\r\n    super.setSegment(idx, pos1, pos2);\r\n    if (this._collisionGeo) {\r\n      this._collisionGeo.setItem(chunkIdx * chunkSize + segIdx, pos1, pos2, COLLISION_RAD);\r\n    }\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  setOpacity(chunkIndices, value) {\r\n    const chunkSize = this._chunkSize;\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const left = chunkIndices[i] * chunkSize;\r\n      super.setOpacity(left, left + chunkSize - 1, value);\r\n    }\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const instanceCount = chunkIndices.length;\r\n    const chunkSize = this._chunkSize;\r\n    const subset = new ChunkedLinesGeometry(instanceCount, chunkSize, false);\r\n    for (let i = 0, n = chunkIndices.length; i < n; ++i) {\r\n      const dstPtOffset = i * chunkSize;\r\n      const startSegIdx = chunkIndices[i] * chunkSize;\r\n      subset.setSegments(dstPtOffset, this.getSubsetSegments(startSegIdx, chunkSize));\r\n      subset.setColors(dstPtOffset, this.getSubsetColors(startSegIdx, chunkSize));\r\n    }\r\n\r\n    subset.boundingSphere = this.boundingSphere;\r\n    subset.boundingBox = this.boundingBox;\r\n    return [subset];\r\n  }\r\n\r\n  _init(chunkSize) {\r\n    this._chunkSize = chunkSize;\r\n  }\r\n}\r\n\r\nexport default ChunkedLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport LinesGeometry from './LinesGeometry';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\n\r\nconst COLLISION_RAD = 0.3;\r\nconst tmpVector = new THREE.Vector3();\r\n\r\nclass TwoColorLinesGeometry extends LinesGeometry {\r\n  constructor(segmentsCount) {\r\n    super(segmentsCount * 2);\r\n    this._init(segmentsCount);\r\n    this._collisionGeo = new Simple2CCylindersGeometry(segmentsCount, 3);\r\n  }\r\n\r\n  setItem(itemIdx, botPos, topPos) {\r\n    this._collisionGeo.setItem(itemIdx, botPos, topPos, COLLISION_RAD);\r\n    const offset = 2 * itemIdx;// there are two points per segment\r\n    tmpVector.lerpVectors(botPos, topPos, 0.5);\r\n    super.setSegment(offset, botPos, tmpVector);\r\n    super.setSegment(offset + 1, tmpVector, topPos);\r\n  }\r\n\r\n  setColor(itemIdx, colorVal1, colorVal2) {\r\n    const offset = 2 * itemIdx;// there are two points per segment\r\n    super.setColor(offset, colorVal1);\r\n    super.setColor(offset + 1, colorVal2);\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    if (this._collisionGeo) {\r\n      this._collisionGeo.raycast(raycaster, intersects);\r\n    }\r\n  }\r\n\r\n  getSubset(segmentIndices) {\r\n    const instanceCount = segmentIndices.length;\r\n    const subset = new TwoColorLinesGeometry(instanceCount, false);\r\n    for (let i = 0, n = instanceCount; i < n; ++i) {\r\n      const startSegIdx = segmentIndices[i];\r\n      subset.setSegments(i, this.getSubsetSegments(startSegIdx, 1));\r\n      subset.setColors(i, this.getSubsetColors(startSegIdx, 1));\r\n    }\r\n\r\n    subset.boundingSphere = this.boundingSphere;\r\n    subset.boundingBox = this.boundingBox;\r\n    return [subset];\r\n  }\r\n\r\n  _init(segmentsCount) {\r\n    this._segCounts = segmentsCount * 2;\r\n  }\r\n}\r\n// (???)parent = LinesGeometry.prototype;\r\n\r\nexport default TwoColorLinesGeometry;\r\n","import * as THREE from 'three';\r\nimport ChunkedLinesGeometry from './ChunkedLinesGeometry';\r\nimport SphereCollisionGeo from './SphereCollisionGeo';\r\n\r\nconst vectors = [\r\n  new THREE.Vector3(1, 0, 0),\r\n  new THREE.Vector3(-1, 0, 0),\r\n  new THREE.Vector3(0, 1, 0),\r\n  new THREE.Vector3(0, -1, 0),\r\n  new THREE.Vector3(0, 0, 1),\r\n  new THREE.Vector3(0, 0, -1),\r\n];\r\nconst vecCount = vectors.length;\r\nconst tempPos1 = new THREE.Vector3();\r\nconst tempPos2 = new THREE.Vector3();\r\n\r\nclass CrossGeometry extends SphereCollisionGeo(ChunkedLinesGeometry) {\r\n  constructor(chunksCount) {\r\n    super(chunksCount, chunksCount, (vecCount / 2) | 0, false);\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, itemRad) {\r\n    this.setSphere(itemIdx, itemPos, itemRad);\r\n\r\n    for (let i = 0; i < vecCount / 2; ++i) {\r\n      const first = i * 2;\r\n      tempPos1.x = itemPos.x + vectors[first].x * itemRad;\r\n      tempPos1.y = itemPos.y + vectors[first].y * itemRad;\r\n      tempPos1.z = itemPos.z + vectors[first].z * itemRad;\r\n      const second = first + 1;\r\n      tempPos2.x = itemPos.x + vectors[second].x * itemRad;\r\n      tempPos2.y = itemPos.y + vectors[second].y * itemRad;\r\n      tempPos2.z = itemPos.z + vectors[second].z * itemRad;\r\n      this.setSegment(itemIdx, i, tempPos1, tempPos2);\r\n    }\r\n  }\r\n}\r\nexport default CrossGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\nconst POS_RAD_SIZE = 4;\r\nconst COLOR_SIZE = 3;\r\nconst tmpColor = new THREE.Color();\r\n\r\n/**\r\n * This is a base class for isosurface algorithms.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\nclass IsoSurfaceGeometry extends THREE.BufferGeometry {\r\n  constructor(spheresCount, opts) {\r\n    super();\r\n\r\n    this._opts = opts;\r\n    this.zClip = this._opts.zClip;\r\n    this._posRad = utils.allocateTyped(Float32Array, spheresCount * POS_RAD_SIZE);\r\n    this._colors = utils.allocateTyped(Float32Array, spheresCount * COLOR_SIZE);\r\n  }\r\n\r\n  setItem(chunkIdx, pos, radius) {\r\n    const posRad = this._posRad;\r\n    let idx = POS_RAD_SIZE * chunkIdx;\r\n    posRad[idx++] = pos.x;\r\n    posRad[idx++] = pos.y;\r\n    posRad[idx++] = pos.z;\r\n    posRad[idx] = radius;\r\n  }\r\n\r\n  setColor(chunkIdx, colorVal) {\r\n    tmpColor.set(colorVal);\r\n    const colors = this._colors;\r\n    let idx = COLOR_SIZE * chunkIdx;\r\n    colors[idx++] = tmpColor.r;\r\n    colors[idx++] = tmpColor.g;\r\n    colors[idx] = tmpColor.b;\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n    this.computeBoundingSphere();\r\n  }\r\n\r\n  finishUpdate() {\r\n    this._build();\r\n  }\r\n\r\n  setOpacity() {\r\n    // not implemented\r\n  }\r\n\r\n  raycast() {\r\n  }\r\n\r\n  getSubset() {\r\n    return [];\r\n  }\r\n}\r\nexport default IsoSurfaceGeometry;\r\n","import utils from '../../utils';\r\n\r\n/**\r\n * Class for marching cube\r\n * Stores 8 points and 8 float values are stored together in linear array\r\n * Int values for has intersection or not - in integer32 linear array\r\n * Int values for bits flags - in integer32 linear array\r\n *\r\n */\r\nclass IsoSurfaceMarchCube {\r\n  constructor() {\r\n    this.pointsValuesLinear = null;\r\n    this.hasIntersection = null;\r\n    this.bitsInside = null;\r\n  }\r\n\r\n  create(numCellsPerSide) {\r\n    const vx7000000 = 0x7000000;\r\n    const n3 = numCellsPerSide * numCellsPerSide * numCellsPerSide;\r\n    if (n3 > vx7000000) {\r\n      throw new Error('Too large cube dimension: lead to memory huge uasge');\r\n    }\r\n    this.pointsValuesLinear = utils.allocateTyped(Float32Array, (2 << (2 + 2)) * n3);\r\n    this.hasIntersection = utils.allocateTyped(Int32Array, n3);\r\n    this.bitsInside = utils.allocateTyped(Int32Array, n3);\r\n    return 0;\r\n  }\r\n\r\n  destroy() {\r\n    this.bitsInside = null;\r\n    this.hasIntersection = null;\r\n    this.pointsValuesLinear = null;\r\n  }\r\n}\r\n\r\n/* eslint-disable no-magic-numbers */\r\nIsoSurfaceMarchCube.prototype.striIndicesMarchCube = [\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 8, 3, 9, 8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 2, 10, 0, 2, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 8, 3, 2, 10, 8, 10, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 11, 2, 8, 11, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 11, 2, 1, 9, 11, 9, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 10, 1, 11, 10, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 10, 1, 0, 8, 10, 8, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 9, 0, 3, 11, 9, 11, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 3, 0, 7, 3, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 1, 9, 4, 7, 1, 7, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 4, 7, 3, 0, 4, 1, 2, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 2, 10, 9, 0, 2, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 10, 9, 2, 9, 7, 2, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n  8, 4, 7, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 4, 7, 11, 2, 4, 2, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 1, 8, 4, 7, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 7, 11, 9, 4, 11, 9, 11, 2, 9, 2, 1, -1, -1, -1, -1,\r\n  3, 10, 1, 3, 11, 10, 7, 8, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 11, 10, 1, 4, 11, 1, 0, 4, 7, 11, 4, -1, -1, -1, -1,\r\n  4, 7, 8, 9, 0, 11, 9, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n  4, 7, 11, 4, 11, 9, 9, 11, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 5, 4, 1, 5, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 5, 4, 8, 3, 5, 3, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 1, 2, 10, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 2, 10, 5, 4, 2, 4, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 10, 5, 3, 2, 5, 3, 5, 4, 3, 4, 8, -1, -1, -1, -1,\r\n  9, 5, 4, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 11, 2, 0, 8, 11, 4, 9, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 5, 4, 0, 1, 5, 2, 3, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 1, 5, 2, 5, 8, 2, 8, 11, 4, 8, 5, -1, -1, -1, -1,\r\n  10, 3, 11, 10, 1, 3, 9, 5, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 5, 0, 8, 1, 8, 10, 1, 8, 11, 10, -1, -1, -1, -1,\r\n  5, 4, 0, 5, 0, 11, 5, 11, 10, 11, 0, 3, -1, -1, -1, -1,\r\n  5, 4, 8, 5, 8, 10, 10, 8, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 7, 8, 5, 7, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 3, 0, 9, 5, 3, 5, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 7, 8, 0, 1, 7, 1, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 7, 8, 9, 5, 7, 10, 1, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 1, 2, 9, 5, 0, 5, 3, 0, 5, 7, 3, -1, -1, -1, -1,\r\n  8, 0, 2, 8, 2, 5, 8, 5, 7, 10, 5, 2, -1, -1, -1, -1,\r\n  2, 10, 5, 2, 5, 3, 3, 5, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 9, 5, 7, 8, 9, 3, 11, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 7, 9, 7, 2, 9, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n  2, 3, 11, 0, 1, 8, 1, 7, 8, 1, 5, 7, -1, -1, -1, -1,\r\n  11, 2, 1, 11, 1, 7, 7, 1, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 8, 8, 5, 7, 10, 1, 3, 10, 3, 11, -1, -1, -1, -1,\r\n  5, 7, 0, 5, 0, 9, 7, 11, 0, 1, 0, 10, 11, 10, 0, -1,\r\n  11, 10, 0, 11, 0, 3, 10, 5, 0, 8, 0, 7, 5, 7, 0, -1,\r\n  11, 10, 5, 7, 11, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 1, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 8, 3, 1, 9, 8, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 5, 2, 6, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 5, 1, 2, 6, 3, 0, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 6, 5, 9, 0, 6, 0, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 9, 8, 5, 8, 2, 5, 2, 6, 3, 2, 8, -1, -1, -1, -1,\r\n  2, 3, 11, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 0, 8, 11, 2, 0, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 1, 9, 2, 9, 11, 2, 9, 8, 11, -1, -1, -1, -1,\r\n  6, 3, 11, 6, 5, 3, 5, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 11, 0, 11, 5, 0, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n  3, 11, 6, 0, 3, 6, 0, 6, 5, 0, 5, 9, -1, -1, -1, -1,\r\n  6, 5, 9, 6, 9, 11, 11, 9, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 3, 0, 4, 7, 3, 6, 5, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 5, 10, 6, 8, 4, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 6, 5, 1, 9, 7, 1, 7, 3, 7, 9, 4, -1, -1, -1, -1,\r\n  6, 1, 2, 6, 5, 1, 4, 7, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 5, 5, 2, 6, 3, 0, 4, 3, 4, 7, -1, -1, -1, -1,\r\n  8, 4, 7, 9, 0, 5, 0, 6, 5, 0, 2, 6, -1, -1, -1, -1,\r\n  7, 3, 9, 7, 9, 4, 3, 2, 9, 5, 9, 6, 2, 6, 9, -1,\r\n  3, 11, 2, 7, 8, 4, 10, 6, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 10, 6, 4, 7, 2, 4, 2, 0, 2, 7, 11, -1, -1, -1, -1,\r\n  0, 1, 9, 4, 7, 8, 2, 3, 11, 5, 10, 6, -1, -1, -1, -1,\r\n  9, 2, 1, 9, 11, 2, 9, 4, 11, 7, 11, 4, 5, 10, 6, -1,\r\n  8, 4, 7, 3, 11, 5, 3, 5, 1, 5, 11, 6, -1, -1, -1, -1,\r\n  5, 1, 11, 5, 11, 6, 1, 0, 11, 7, 11, 4, 0, 4, 11, -1,\r\n  0, 5, 9, 0, 6, 5, 0, 3, 6, 11, 6, 3, 8, 4, 7, -1,\r\n  6, 5, 9, 6, 9, 11, 4, 7, 9, 7, 11, 9, -1, -1, -1, -1,\r\n  10, 4, 9, 6, 4, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 10, 6, 4, 9, 10, 0, 8, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 0, 1, 10, 6, 0, 6, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 3, 1, 8, 1, 6, 8, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n  1, 4, 9, 1, 2, 4, 2, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 1, 2, 9, 2, 4, 9, 2, 6, 4, -1, -1, -1, -1,\r\n  0, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 3, 2, 8, 2, 4, 4, 2, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 4, 9, 10, 6, 4, 11, 2, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 2, 2, 8, 11, 4, 9, 10, 4, 10, 6, -1, -1, -1, -1,\r\n  3, 11, 2, 0, 1, 6, 0, 6, 4, 6, 1, 10, -1, -1, -1, -1,\r\n  6, 4, 1, 6, 1, 10, 4, 8, 1, 2, 1, 11, 8, 11, 1, -1,\r\n  9, 6, 4, 9, 3, 6, 9, 1, 3, 11, 6, 3, -1, -1, -1, -1,\r\n  8, 11, 1, 8, 1, 0, 11, 6, 1, 9, 1, 4, 6, 4, 1, -1,\r\n  3, 11, 6, 3, 6, 0, 0, 6, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 4, 8, 11, 6, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 10, 6, 7, 8, 10, 8, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 7, 3, 0, 10, 7, 0, 9, 10, 6, 7, 10, -1, -1, -1, -1,\r\n  10, 6, 7, 1, 10, 7, 1, 7, 8, 1, 8, 0, -1, -1, -1, -1,\r\n  10, 6, 7, 10, 7, 1, 1, 7, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 6, 1, 6, 8, 1, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n  2, 6, 9, 2, 9, 1, 6, 7, 9, 0, 9, 3, 7, 3, 9, -1,\r\n  7, 8, 0, 7, 0, 6, 6, 0, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 3, 2, 6, 7, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 11, 10, 6, 8, 10, 8, 9, 8, 6, 7, -1, -1, -1, -1,\r\n  2, 0, 7, 2, 7, 11, 0, 9, 7, 6, 7, 10, 9, 10, 7, -1,\r\n  1, 8, 0, 1, 7, 8, 1, 10, 7, 6, 7, 10, 2, 3, 11, -1,\r\n  11, 2, 1, 11, 1, 7, 10, 6, 1, 6, 7, 1, -1, -1, -1, -1,\r\n  8, 9, 6, 8, 6, 7, 9, 1, 6, 11, 6, 3, 1, 3, 6, -1,\r\n  0, 9, 1, 11, 6, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 8, 0, 7, 0, 6, 3, 11, 0, 11, 6, 0, -1, -1, -1, -1,\r\n  7, 11, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 8, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 9, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 1, 9, 8, 3, 1, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 1, 2, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 3, 0, 8, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 9, 0, 2, 10, 9, 6, 11, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 11, 7, 2, 10, 3, 10, 8, 3, 10, 9, 8, -1, -1, -1, -1,\r\n  7, 2, 3, 6, 2, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  7, 0, 8, 7, 6, 0, 6, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 7, 6, 2, 3, 7, 0, 1, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 6, 2, 1, 8, 6, 1, 9, 8, 8, 7, 6, -1, -1, -1, -1,\r\n  10, 7, 6, 10, 1, 7, 1, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 7, 6, 1, 7, 10, 1, 8, 7, 1, 0, 8, -1, -1, -1, -1,\r\n  0, 3, 7, 0, 7, 10, 0, 10, 9, 6, 10, 7, -1, -1, -1, -1,\r\n  7, 6, 10, 7, 10, 8, 8, 10, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 8, 4, 11, 8, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 6, 11, 3, 0, 6, 0, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 6, 11, 8, 4, 6, 9, 0, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 4, 6, 9, 6, 3, 9, 3, 1, 11, 3, 6, -1, -1, -1, -1,\r\n  6, 8, 4, 6, 11, 8, 2, 10, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 3, 0, 11, 0, 6, 11, 0, 4, 6, -1, -1, -1, -1,\r\n  4, 11, 8, 4, 6, 11, 0, 2, 9, 2, 10, 9, -1, -1, -1, -1,\r\n  10, 9, 3, 10, 3, 2, 9, 4, 3, 11, 3, 6, 4, 6, 3, -1,\r\n  8, 2, 3, 8, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 4, 2, 4, 6, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 9, 0, 2, 3, 4, 2, 4, 6, 4, 3, 8, -1, -1, -1, -1,\r\n  1, 9, 4, 1, 4, 2, 2, 4, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 1, 3, 8, 6, 1, 8, 4, 6, 6, 10, 1, -1, -1, -1, -1,\r\n  10, 1, 0, 10, 0, 6, 6, 0, 4, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 6, 3, 4, 3, 8, 6, 10, 3, 0, 3, 9, 10, 9, 3, -1,\r\n  10, 9, 4, 6, 10, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 5, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 4, 9, 5, 11, 7, 6, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 0, 1, 5, 4, 0, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 7, 6, 8, 3, 4, 3, 5, 4, 3, 1, 5, -1, -1, -1, -1,\r\n  9, 5, 4, 10, 1, 2, 7, 6, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  6, 11, 7, 1, 2, 10, 0, 8, 3, 4, 9, 5, -1, -1, -1, -1,\r\n  7, 6, 11, 5, 4, 10, 4, 2, 10, 4, 0, 2, -1, -1, -1, -1,\r\n  3, 4, 8, 3, 5, 4, 3, 2, 5, 10, 5, 2, 11, 7, 6, -1,\r\n  7, 2, 3, 7, 6, 2, 5, 4, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 5, 4, 0, 8, 6, 0, 6, 2, 6, 8, 7, -1, -1, -1, -1,\r\n  3, 6, 2, 3, 7, 6, 1, 5, 0, 5, 4, 0, -1, -1, -1, -1,\r\n  6, 2, 8, 6, 8, 7, 2, 1, 8, 4, 8, 5, 1, 5, 8, -1,\r\n  9, 5, 4, 10, 1, 6, 1, 7, 6, 1, 3, 7, -1, -1, -1, -1,\r\n  1, 6, 10, 1, 7, 6, 1, 0, 7, 8, 7, 0, 9, 5, 4, -1,\r\n  4, 0, 10, 4, 10, 5, 0, 3, 10, 6, 10, 7, 3, 7, 10, -1,\r\n  7, 6, 10, 7, 10, 8, 5, 4, 10, 4, 8, 10, -1, -1, -1, -1,\r\n  6, 9, 5, 6, 11, 9, 11, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 6, 11, 0, 6, 3, 0, 5, 6, 0, 9, 5, -1, -1, -1, -1,\r\n  0, 11, 8, 0, 5, 11, 0, 1, 5, 5, 6, 11, -1, -1, -1, -1,\r\n  6, 11, 3, 6, 3, 5, 5, 3, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 10, 9, 5, 11, 9, 11, 8, 11, 5, 6, -1, -1, -1, -1,\r\n  0, 11, 3, 0, 6, 11, 0, 9, 6, 5, 6, 9, 1, 2, 10, -1,\r\n  11, 8, 5, 11, 5, 6, 8, 0, 5, 10, 5, 2, 0, 2, 5, -1,\r\n  6, 11, 3, 6, 3, 5, 2, 10, 3, 10, 5, 3, -1, -1, -1, -1,\r\n  5, 8, 9, 5, 2, 8, 5, 6, 2, 3, 8, 2, -1, -1, -1, -1,\r\n  9, 5, 6, 9, 6, 0, 0, 6, 2, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 5, 8, 1, 8, 0, 5, 6, 8, 3, 8, 2, 6, 2, 8, -1,\r\n  1, 5, 6, 2, 1, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 3, 6, 1, 6, 10, 3, 8, 6, 5, 6, 9, 8, 9, 6, -1,\r\n  10, 1, 0, 10, 0, 6, 9, 5, 0, 5, 6, 0, -1, -1, -1, -1,\r\n  0, 3, 8, 5, 6, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 5, 10, 7, 5, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 5, 10, 11, 7, 5, 8, 3, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 11, 7, 5, 10, 11, 1, 9, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  10, 7, 5, 10, 11, 7, 9, 8, 1, 8, 3, 1, -1, -1, -1, -1,\r\n  11, 1, 2, 11, 7, 1, 7, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 1, 2, 7, 1, 7, 5, 7, 2, 11, -1, -1, -1, -1,\r\n  9, 7, 5, 9, 2, 7, 9, 0, 2, 2, 11, 7, -1, -1, -1, -1,\r\n  7, 5, 2, 7, 2, 11, 5, 9, 2, 3, 2, 8, 9, 8, 2, -1,\r\n  2, 5, 10, 2, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 2, 0, 8, 5, 2, 8, 7, 5, 10, 2, 5, -1, -1, -1, -1,\r\n  9, 0, 1, 5, 10, 3, 5, 3, 7, 3, 10, 2, -1, -1, -1, -1,\r\n  9, 8, 2, 9, 2, 1, 8, 7, 2, 10, 2, 5, 7, 5, 2, -1,\r\n  1, 3, 5, 3, 7, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 7, 0, 7, 1, 1, 7, 5, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 0, 3, 9, 3, 5, 5, 3, 7, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 8, 7, 5, 9, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 8, 4, 5, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  5, 0, 4, 5, 11, 0, 5, 10, 11, 11, 3, 0, -1, -1, -1, -1,\r\n  0, 1, 9, 8, 4, 10, 8, 10, 11, 10, 4, 5, -1, -1, -1, -1,\r\n  10, 11, 4, 10, 4, 5, 11, 3, 4, 9, 4, 1, 3, 1, 4, -1,\r\n  2, 5, 1, 2, 8, 5, 2, 11, 8, 4, 5, 8, -1, -1, -1, -1,\r\n  0, 4, 11, 0, 11, 3, 4, 5, 11, 2, 11, 1, 5, 1, 11, -1,\r\n  0, 2, 5, 0, 5, 9, 2, 11, 5, 4, 5, 8, 11, 8, 5, -1,\r\n  9, 4, 5, 2, 11, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 5, 10, 3, 5, 2, 3, 4, 5, 3, 8, 4, -1, -1, -1, -1,\r\n  5, 10, 2, 5, 2, 4, 4, 2, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 10, 2, 3, 5, 10, 3, 8, 5, 4, 5, 8, 0, 1, 9, -1,\r\n  5, 10, 2, 5, 2, 4, 1, 9, 2, 9, 4, 2, -1, -1, -1, -1,\r\n  8, 4, 5, 8, 5, 3, 3, 5, 1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 4, 5, 1, 0, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  8, 4, 5, 8, 5, 3, 9, 0, 5, 0, 3, 5, -1, -1, -1, -1,\r\n  9, 4, 5, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 11, 7, 4, 9, 11, 9, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 8, 3, 4, 9, 7, 9, 11, 7, 9, 10, 11, -1, -1, -1, -1,\r\n  1, 10, 11, 1, 11, 4, 1, 4, 0, 7, 4, 11, -1, -1, -1, -1,\r\n  3, 1, 4, 3, 4, 8, 1, 10, 4, 7, 4, 11, 10, 11, 4, -1,\r\n  4, 11, 7, 9, 11, 4, 9, 2, 11, 9, 1, 2, -1, -1, -1, -1,\r\n  9, 7, 4, 9, 11, 7, 9, 1, 11, 2, 11, 1, 0, 8, 3, -1,\r\n  11, 7, 4, 11, 4, 2, 2, 4, 0, -1, -1, -1, -1, -1, -1, -1,\r\n  11, 7, 4, 11, 4, 2, 8, 3, 4, 3, 2, 4, -1, -1, -1, -1,\r\n  2, 9, 10, 2, 7, 9, 2, 3, 7, 7, 4, 9, -1, -1, -1, -1,\r\n  9, 10, 7, 9, 7, 4, 10, 2, 7, 8, 7, 0, 2, 0, 7, -1,\r\n  3, 7, 10, 3, 10, 2, 7, 4, 10, 1, 10, 0, 4, 0, 10, -1,\r\n  1, 10, 2, 8, 7, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 1, 4, 1, 7, 7, 1, 3, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 9, 1, 4, 1, 7, 0, 8, 1, 8, 7, 1, -1, -1, -1, -1,\r\n  4, 0, 3, 7, 4, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  4, 8, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 10, 8, 10, 11, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 9, 3, 9, 11, 11, 9, 10, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 1, 10, 0, 10, 8, 8, 10, 11, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 1, 10, 11, 3, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 2, 11, 1, 11, 9, 9, 11, 8, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 0, 9, 3, 9, 11, 1, 2, 9, 2, 11, 9, -1, -1, -1, -1,\r\n  0, 2, 11, 8, 0, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  3, 2, 11, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 8, 2, 8, 10, 10, 8, 9, -1, -1, -1, -1, -1, -1, -1,\r\n  9, 10, 2, 0, 9, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  2, 3, 8, 2, 8, 10, 0, 1, 8, 1, 10, 8, -1, -1, -1, -1,\r\n  1, 10, 2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  1, 3, 8, 9, 1, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 9, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  0, 3, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\r\n];\r\n/* eslint-enable no-magic-numbers */\r\n\r\nexport default IsoSurfaceMarchCube;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceMarchCube from './IsoSurfaceMarchCube';\r\nimport utils from '../../utils';\r\n\r\nconst edgeTable = [\r\n  0x0, 0x109, 0x203, 0x30a, 0x406, 0x50f, 0x605, 0x70c,\r\n  0x80c, 0x905, 0xa0f, 0xb06, 0xc0a, 0xd03, 0xe09, 0xf00,\r\n  0x190, 0x99, 0x393, 0x29a, 0x596, 0x49f, 0x795, 0x69c,\r\n  0x99c, 0x895, 0xb9f, 0xa96, 0xd9a, 0xc93, 0xf99, 0xe90,\r\n  0x230, 0x339, 0x33, 0x13a, 0x636, 0x73f, 0x435, 0x53c,\r\n  0xa3c, 0xb35, 0x83f, 0x936, 0xe3a, 0xf33, 0xc39, 0xd30,\r\n  0x3a0, 0x2a9, 0x1a3, 0xaa, 0x7a6, 0x6af, 0x5a5, 0x4ac,\r\n  0xbac, 0xaa5, 0x9af, 0x8a6, 0xfaa, 0xea3, 0xda9, 0xca0,\r\n  0x460, 0x569, 0x663, 0x76a, 0x66, 0x16f, 0x265, 0x36c,\r\n  0xc6c, 0xd65, 0xe6f, 0xf66, 0x86a, 0x963, 0xa69, 0xb60,\r\n  0x5f0, 0x4f9, 0x7f3, 0x6fa, 0x1f6, 0xff, 0x3f5, 0x2fc,\r\n  0xdfc, 0xcf5, 0xfff, 0xef6, 0x9fa, 0x8f3, 0xbf9, 0xaf0,\r\n  0x650, 0x759, 0x453, 0x55a, 0x256, 0x35f, 0x55, 0x15c,\r\n  0xe5c, 0xf55, 0xc5f, 0xd56, 0xa5a, 0xb53, 0x859, 0x950,\r\n  0x7c0, 0x6c9, 0x5c3, 0x4ca, 0x3c6, 0x2cf, 0x1c5, 0xcc,\r\n  0xfcc, 0xec5, 0xdcf, 0xcc6, 0xbca, 0xac3, 0x9c9, 0x8c0,\r\n  0x8c0, 0x9c9, 0xac3, 0xbca, 0xcc6, 0xdcf, 0xec5, 0xfcc,\r\n  0xcc, 0x1c5, 0x2cf, 0x3c6, 0x4ca, 0x5c3, 0x6c9, 0x7c0,\r\n  0x950, 0x859, 0xb53, 0xa5a, 0xd56, 0xc5f, 0xf55, 0xe5c,\r\n  0x15c, 0x55, 0x35f, 0x256, 0x55a, 0x453, 0x759, 0x650,\r\n  0xaf0, 0xbf9, 0x8f3, 0x9fa, 0xef6, 0xfff, 0xcf5, 0xdfc,\r\n  0x2fc, 0x3f5, 0xff, 0x1f6, 0x6fa, 0x7f3, 0x4f9, 0x5f0,\r\n  0xb60, 0xa69, 0x963, 0x86a, 0xf66, 0xe6f, 0xd65, 0xc6c,\r\n  0x36c, 0x265, 0x16f, 0x66, 0x76a, 0x663, 0x569, 0x460,\r\n  0xca0, 0xda9, 0xea3, 0xfaa, 0x8a6, 0x9af, 0xaa5, 0xbac,\r\n  0x4ac, 0x5a5, 0x6af, 0x7a6, 0xaa, 0x1a3, 0x2a9, 0x3a0,\r\n  0xd30, 0xc39, 0xf33, 0xe3a, 0x936, 0x83f, 0xb35, 0xa3c,\r\n  0x53c, 0x435, 0x73f, 0x636, 0x13a, 0x33, 0x339, 0x230,\r\n  0xe90, 0xf99, 0xc93, 0xd9a, 0xa96, 0xb9f, 0x895, 0x99c,\r\n  0x69c, 0x795, 0x49f, 0x596, 0x29a, 0x393, 0x99, 0x190,\r\n  0xf00, 0xe09, 0xd03, 0xc0a, 0xb06, 0xa0f, 0x905, 0x80c,\r\n  0x70c, 0x605, 0x50f, 0x406, 0x30a, 0x203, 0x109, 0x0];\r\n\r\nfunction _voxelGradientFast(v, point, grad) {\r\n  const g = v.getValue(point.x, point.y, point.z);\r\n  grad.set(g[0], g[1], g[2]);\r\n}\r\n\r\n// Helper class GridCell\r\nclass GridCell {\r\n  constructor() {\r\n    this._arrSize = 8;\r\n    this.p = new Array(this._arrSize);\r\n    this.g = new Array(this._arrSize);\r\n    this.val = new Array(this._arrSize);\r\n    for (let i = 0; i < this._arrSize; ++i) {\r\n      this.p[i] = new THREE.Vector3();\r\n      this.g[i] = new THREE.Vector3();\r\n    }\r\n    this.cubeIndex = 0;\r\n  }\r\n}\r\n\r\n// Helper class Triangle\r\nclass Triangle {\r\n  constructor() {\r\n    this.a = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n\r\n    this.b = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n\r\n    this.c = {\r\n      p: new THREE.Vector3(),\r\n      n: new THREE.Vector3(),\r\n    };\r\n  }\r\n}\r\n\r\nfunction createArray(arrSize) {\r\n  const arr = new Array(arrSize);\r\n  for (let i = 0; i < arrSize; ++i) {\r\n    arr[i] = new THREE.Vector3();\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nclass IsoSurface {\r\n  constructor() {\r\n    this._numTriangles = 0;\r\n    this._numVertices = 0;\r\n    this._position = [];\r\n    this._normals = [];\r\n    this._colors = null;\r\n    this._indices = [];\r\n    this._volumetricData = null;\r\n    this._xAxis = new THREE.Vector3();\r\n    this._yAxis = new THREE.Vector3();\r\n    this._zAxis = new THREE.Vector3();\r\n    this._xDir = new THREE.Vector3();\r\n    this._yDir = new THREE.Vector3();\r\n    this._zDir = new THREE.Vector3();\r\n  }\r\n\r\n  _prepareAxesAndDirs() {\r\n    const volData = this._volumetricData;\r\n\r\n    const cellSize = volData.getCellSize();\r\n\r\n    // calculate cell axes\r\n    const xAxis = this._xAxis;\r\n    const yAxis = this._yAxis;\r\n    const zAxis = this._zAxis;\r\n    const xDir = this._xDir;\r\n    const yDir = this._yDir;\r\n    const zDir = this._zDir;\r\n\r\n    xAxis.set(cellSize.x, 0, 0);\r\n    yAxis.set(0, cellSize.y, 0);\r\n    zAxis.set(0, 0, cellSize.z);\r\n\r\n    xDir.set(1, 0, 0);\r\n    yDir.set(0, 1, 0);\r\n    zDir.set(0, 0, 1);\r\n\r\n    // flip normals if coordinate system is in the wrong handedness\r\n    const tmp = new THREE.Vector3();\r\n    tmp.crossVectors(xDir, yDir);\r\n    if (tmp.dot(zDir) < 0) {\r\n      xDir.negate();\r\n      yDir.negate();\r\n      zDir.negate();\r\n    }\r\n\r\n    // check that the grid is in the all-positive octant of the coordinate system\r\n    if (xDir.x < 0 || xDir.y < 0 || xDir.z < 0\r\n      || yDir.x < 0 || yDir.y < 0 || yDir.z < 0\r\n      || zDir.x < 0 || zDir.y < 0 || zDir.z < 0) {\r\n      return false;\r\n    }\r\n\r\n    // check that the grid is axis-aligned\r\n    const notZero = (axe) => Math.abs(axe) > Number.EPSILON;\r\n    return !(notZero(xAxis.y) || notZero(xAxis.z)\r\n          || notZero(yAxis.x) || notZero(yAxis.z)\r\n          || notZero(zAxis.x) || notZero(zAxis.y));\r\n  }\r\n\r\n  _vertexInterp(isoLevel, grid, ind1, ind2, vertex, normal) {\r\n    const p1 = grid.p[ind1];\r\n    const p2 = grid.p[ind2];\r\n    const n1 = grid.g[ind1];\r\n    const n2 = grid.g[ind2];\r\n    const valP1 = grid.val[ind1];\r\n    const valP2 = grid.val[ind2];\r\n    const isoDiffP1 = isoLevel - valP1;\r\n    const diffValP2P1 = valP2 - valP1;\r\n\r\n    let mu = 0.0;\r\n\r\n    if (Math.abs(diffValP2P1) > 0.0) {\r\n      mu = isoDiffP1 / diffValP2P1;\r\n    }\r\n    mu = mu > 1.0 ? 1.0 : mu;\r\n    vertex.lerpVectors(p1, p2, mu);\r\n    normal.lerpVectors(n1, n2, mu);\r\n  }\r\n\r\n  static _triTable = IsoSurfaceMarchCube.prototype.striIndicesMarchCube;\r\n\r\n  static _arrSize = 12;\r\n\r\n  static _firstIndices = [0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2, 3];\r\n\r\n  static _secondIndices = [1, 2, 3, 0, 5, 6, 7, 4, 4, 5, 6, 7];\r\n\r\n  static _vertexList = createArray(IsoSurface._arrSize);\r\n\r\n  static _normalList = createArray(IsoSurface._arrSize);\r\n\r\n  _polygonize(grid, isoLevel, triangles) {\r\n    const { cubeIndex } = grid;\r\n    let i = 0;\r\n    const arrSize = IsoSurface._arrSize;\r\n    const firstIndices = IsoSurface._firstIndices;\r\n    const secondIndices = IsoSurface._secondIndices;\r\n    const vertexList = IsoSurface._vertexList;\r\n    const normalList = IsoSurface._normalList;\r\n\r\n    for (; i < arrSize; ++i) {\r\n      if (edgeTable[cubeIndex] & (1 << i)) {\r\n        this._vertexInterp(\r\n          isoLevel,\r\n          grid,\r\n          firstIndices[i],\r\n          secondIndices[i],\r\n          vertexList[i],\r\n          normalList[i],\r\n        );\r\n      }\r\n    }\r\n\r\n    let triCount = 0;\r\n    const triTblIdx = cubeIndex * 16;\r\n    const triTable = IsoSurface._triTable;\r\n\r\n    for (i = 0; triTable[triTblIdx + i] !== -1; i += 3) {\r\n      triangles[triCount].a.p.copy(vertexList[triTable[triTblIdx + i]]);\r\n      triangles[triCount].a.n.copy(normalList[triTable[triTblIdx + i]]);\r\n\r\n      triangles[triCount].b.p.copy(vertexList[triTable[triTblIdx + i + 1]]);\r\n      triangles[triCount].b.n.copy(normalList[triTable[triTblIdx + i + 1]]);\r\n\r\n      triangles[triCount].c.p.copy(vertexList[triTable[triTblIdx + i + 2]]);\r\n      triangles[triCount].c.n.copy(normalList[triTable[triTblIdx + i + 2]]);\r\n      ++triCount;\r\n    }\r\n\r\n    return triCount;\r\n  }\r\n\r\n  _doGridPosNorms(isoValue, step, appendSimple) {\r\n    const vol = this._volumetricData;\r\n    const volData = this._volumetricData.getData();\r\n    const dim = vol.getDimensions();\r\n    const xSize = dim[0];\r\n    const ySize = dim[1];\r\n    const zSize = dim[2];\r\n    const stepX = step * vol.getStrideX();\r\n    const stepY = step * vol.getStrideY();\r\n    const stepZ = step * vol.getStrideZ();\r\n\r\n    const gc = new GridCell();\r\n    const gcVal = gc.val;\r\n    const gcValSize = gc.val.length;\r\n    const additions = [\r\n      new THREE.Vector3(0, 0, 0), // 0\r\n      new THREE.Vector3(step, 0, 0), // 1\r\n      new THREE.Vector3(step, step, 0), // 2\r\n      new THREE.Vector3(0, step, 0), // 3\r\n      new THREE.Vector3(0, 0, step), // 4\r\n      new THREE.Vector3(step, 0, step), // 5\r\n      new THREE.Vector3(step, step, step), // 6\r\n      new THREE.Vector3(0, step, step), // 7\r\n    ];\r\n\r\n    const tmpTriCount = 5;\r\n    const triangles = new Array(tmpTriCount);\r\n    for (let j = 0; j < tmpTriCount; ++j) {\r\n      triangles[j] = new Triangle();\r\n    }\r\n\r\n    let appendVertex;\r\n    const self = this;\r\n    const positions = this._position;\r\n    const normals = this._normals;\r\n    if (appendSimple) {\r\n      // Special case for axis-aligned grid with positive unit vector normals\r\n      appendVertex = (function () {\r\n        const axis = new THREE.Vector3(self._xAxis.x, self._yAxis.y, self._zAxis.z);\r\n        return function (triVertex) {\r\n          const vertex = triVertex.p.clone();\r\n          vertex.multiply(axis);\r\n          positions.push(vertex.add(self._origin));\r\n          normals.push(triVertex.n.clone());\r\n        };\r\n      }());\r\n    } else {\r\n      appendVertex = (function () {\r\n        const posMtx = new THREE.Matrix3();\r\n        posMtx.set(\r\n          self._xAxis.x,\r\n          self._yAxis.x,\r\n          self._zAxis.x,\r\n          self._xAxis.y,\r\n          self._yAxis.y,\r\n          self._zAxis.y,\r\n          self._xAxis.z,\r\n          self._yAxis.z,\r\n          self._zAxis.z,\r\n        );\r\n        const normMtx = new THREE.Matrix3();\r\n        normMtx.set(\r\n          self._xDir.x,\r\n          self._yDir.x,\r\n          self._zDir.x,\r\n          self._xDir.y,\r\n          self._yDir.y,\r\n          self._zDir.y,\r\n          self._xDir.z,\r\n          self._yDir.z,\r\n          self._zDir.z,\r\n        );\r\n\r\n        return function (triVertex) {\r\n          positions.push(triVertex.p.clone().applyMatrix3(posMtx).add(self._origin));\r\n          normals.push(triVertex.n.clone().applyMatrix3(normMtx));\r\n        };\r\n      }());\r\n    }\r\n    const indices = this._indices;\r\n\r\n    let globTriCount = 0;\r\n\r\n    for (let z = 0; z < (zSize - step); z += step) {\r\n      for (let y = 0; y < (ySize - step); y += step) {\r\n        let idx = vol.getDirectIdx(0, y, z);\r\n        for (let x = 0; x < (xSize - step); x += step, idx += stepX) {\r\n          /* eslint-disable no-multi-spaces */\r\n          /* eslint-disable computed-property-spacing */\r\n          gcVal[0] = volData[idx];\r\n          gcVal[1] = volData[idx + stepX];\r\n          gcVal[3] = volData[idx + stepY];\r\n          gcVal[2] = volData[idx + stepX + stepY];\r\n          gcVal[4] = volData[idx + stepZ];\r\n          gcVal[5] = volData[idx + stepX + stepZ];\r\n          gcVal[7] = volData[idx + stepY + stepZ];\r\n          gcVal[6] = volData[idx + stepX + stepY + stepZ];\r\n          /* eslint-enable no-multi-spaces */\r\n          /* eslint-enable computed-property-spacing */\r\n\r\n          // Determine the index into the edge table which\r\n          // tells us which vertices are inside of the surface\r\n          let cubeIndex = 0;\r\n          let i = 0;\r\n          for (; i < gcValSize; ++i) {\r\n            if (gcVal[i] < isoValue) {\r\n              cubeIndex |= (1 << i);\r\n            }\r\n          }\r\n\r\n          if (edgeTable[cubeIndex] === 0) {\r\n            continue;\r\n          }\r\n\r\n          gc.cubeIndex = cubeIndex;\r\n          for (i = 0; i < gcValSize; ++i) {\r\n            gc.p[i].set(x + additions[i].x, y + additions[i].y, z + additions[i].z);\r\n            _voxelGradientFast(this._gradient, gc.p[i], gc.g[i]);\r\n          }\r\n\r\n          // calculate vertices and facets for this cube,\r\n          // calculate normals by interpolating between the negated\r\n          // normalized volume gradients for the 8 reference voxels\r\n          const triCount = this._polygonize(gc, isoValue, triangles);\r\n          globTriCount += triCount;\r\n\r\n          // append triangles using different techniques\r\n          for (i = 0; i < triCount; ++i) {\r\n            indices.push(this._numTriangles * 3);\r\n            indices.push(this._numTriangles * 3 + 1);\r\n            indices.push(this._numTriangles * 3 + 2);\r\n            ++this._numTriangles;\r\n\r\n            appendVertex(triangles[i].a);\r\n            appendVertex(triangles[i].b);\r\n            appendVertex(triangles[i].c);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return globTriCount;\r\n  }\r\n\r\n  compute(volData, origin, isoValue, step) {\r\n    this._volumetricData = volData;\r\n    this._origin = origin;\r\n\r\n    this._gradient = volData.computeGradient();\r\n\r\n    this._doGridPosNorms(isoValue, step, this._prepareAxesAndDirs());\r\n  }\r\n\r\n  _remapIndices(vertexMap, idcCount) {\r\n    const indices = this._indices;\r\n    const newIndices = utils.allocateTyped(Uint32Array, idcCount);\r\n    for (let i = 0; i < idcCount; ++i) {\r\n      indices[i] = vertexMap[indices[i]];\r\n      newIndices[i] = indices[i];\r\n    }\r\n    this._indices = newIndices;\r\n  }\r\n\r\n  _remapVertices(vertices, normals, count) {\r\n    const newPositions = utils.allocateTyped(Float32Array, count * 3);\r\n    const newNormals = utils.allocateTyped(Float32Array, count * 3);\r\n    for (let i = 0; i < count; ++i) {\r\n      const pos = vertices[i];\r\n      newPositions[i * 3] = pos.x;\r\n      newPositions[i * 3 + 1] = pos.y;\r\n      newPositions[i * 3 + 2] = pos.z;\r\n      const norm = normals[i].normalize();\r\n      newNormals[i * 3] = norm.x;\r\n      newNormals[i * 3 + 1] = norm.y;\r\n      newNormals[i * 3 + 2] = norm.z;\r\n    }\r\n    this._position = newPositions;\r\n    this._normals = newNormals;\r\n  }\r\n\r\n  vertexFusion(offset, len) {\r\n    const faceVer = this._indices.length;\r\n    const vertices = this._position;\r\n    const normals = this._normals;\r\n    const oldVerCount = vertices.length | 0;\r\n    if (faceVer === 0 || oldVerCount === 0) {\r\n      return;\r\n    }\r\n    const vMap = utils.allocateTyped(Uint32Array, oldVerCount);\r\n    vMap[0] = 0;\r\n    let newVer = 1;\r\n\r\n    let i = 1;\r\n    for (; i < oldVerCount; ++i) {\r\n      const start = newVer - offset < 0 ? 0 : newVer - offset;\r\n      const end = start + len > newVer ? newVer : start + len;\r\n      let matchedIndex = -1;\r\n\r\n      for (let j = start; j < end; ++j) {\r\n        if (Math.abs(vertices[i] - vertices[j]) < Number.EPSILON) {\r\n          matchedIndex = j;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (matchedIndex !== -1) {\r\n        vMap[i] = matchedIndex;\r\n      } else {\r\n        vertices[newVer].copy(vertices[i]);\r\n        normals[newVer].copy(normals[i]);\r\n        vMap[i] = newVer;\r\n        ++newVer;\r\n      }\r\n    }\r\n\r\n    this._remapIndices(vMap, faceVer);\r\n    this._remapVertices(vertices, normals, newVer);\r\n  }\r\n\r\n  // Assign per-vertex colors from a volumetric texture map (same dimensions as the original volumetric data).\r\n  // Along with color dominating atom is determined for each vertex\r\n  // and vertices with atom out of \"visible\" subset get filtered out.\r\n  // XXX only handles orthogonal volumes currently\r\n  setColorVolTex(colorMap, atomMap, atomWeightMap, visibilitySelector) {\r\n    let i;\r\n    let idx;\r\n    const numVerts = this._position.length / 3;\r\n    const vertices = this._position;\r\n    const origin = this._origin;\r\n    const dim = this._volumetricData.getDimensions();\r\n    const xs = dim[0] - 1;\r\n    const ys = dim[1] - 1;\r\n    const zs = dim[2] - 1;\r\n\r\n    const colorData = colorMap.getData();\r\n    const strideX = colorMap.getStrideX();\r\n    const strideY = colorMap.getStrideY();\r\n    const strideZ = colorMap.getStrideZ();\r\n\r\n    let atomWeightData;\r\n    let atomStrideX;\r\n    let atomStrideY;\r\n    let atomStrideZ;\r\n\r\n    if (visibilitySelector !== null) {\r\n      atomWeightData = atomWeightMap.getData();\r\n      atomStrideX = atomWeightMap.getStrideX();\r\n      atomStrideY = atomWeightMap.getStrideY();\r\n      atomStrideZ = atomWeightMap.getStrideZ();\r\n    }\r\n\r\n    const xInv = 1.0 / this._xAxis.x;\r\n    const yInv = 1.0 / this._yAxis.y;\r\n    const zInv = 1.0 / this._zAxis.z;\r\n\r\n    let atomLookup = [];\r\n    let atomWeights = [];\r\n    const colors = utils.allocateTyped(Float32Array, numVerts * 3);\r\n\r\n    function interp(mu, idx1, idx2, c) {\r\n      c[0] = (1 - mu) * colorData[idx1] + mu * colorData[idx2];\r\n      c[1] = (1 - mu) * colorData[idx1 + 1] + mu * colorData[idx2 + 1];\r\n      c[2] = (1 - mu) * colorData[idx1 + 2] + mu * colorData[idx2 + 2];\r\n    }\r\n\r\n    function collectWeight(ai, coefX, coefY, coefZ) {\r\n      const a = atomMap[ai]; // atomWeightMap is a scalar field, so index into atom map should be the same\r\n      if (a != null) {\r\n        atomLookup[a.index] = a;\r\n        const w = coefX * coefY * coefZ * atomWeightData[ai];\r\n        if (typeof atomWeights[a.index] === 'undefined') {\r\n          atomWeights[a.index] = w;\r\n        } else {\r\n          atomWeights[a.index] += w;\r\n        }\r\n      }\r\n    }\r\n\r\n    const vMap = utils.allocateTyped(Int32Array, numVerts);\r\n    let newVerCount = 0;\r\n\r\n    for (i = 0; i < numVerts; i++) {\r\n      const ind = i * 3;\r\n      const vx = (vertices[ind] - origin.x) * xInv;\r\n      const vy = (vertices[ind + 1] - origin.y) * yInv;\r\n      const vz = (vertices[ind + 2] - origin.z) * zInv;\r\n      const x = Math.min(Math.max(vx, 0), xs) | 0;\r\n      const y = Math.min(Math.max(vy, 0), ys) | 0;\r\n      const z = Math.min(Math.max(vz, 0), zs) | 0;\r\n\r\n      const mux = (vx - x);\r\n      const muy = (vy - y);\r\n      const muz = (vz - z);\r\n\r\n      if (visibilitySelector != null) {\r\n        // collect atom weights\r\n        atomLookup = [];\r\n        atomWeights = [];\r\n        idx = atomWeightMap.getDirectIdx(x, y, z);\r\n        collectWeight(idx, 1 - mux, 1 - muy, 1 - muz);\r\n        collectWeight(idx + atomStrideX, mux, 1 - muy, 1 - muz);\r\n        collectWeight(idx + atomStrideY, 1 - mux, muy, 1 - muz);\r\n        collectWeight(idx + atomStrideX + atomStrideY, mux, muy, 1 - muz);\r\n        collectWeight(idx + atomStrideZ, 1 - mux, 1 - muy, muz);\r\n        collectWeight(idx + atomStrideX + atomStrideZ, mux, 1 - muy, muz);\r\n        collectWeight(idx + atomStrideY + atomStrideZ, 1 - mux, muy, muz);\r\n        collectWeight(idx + atomStrideX + atomStrideY + atomStrideZ, mux, muy, muz);\r\n\r\n        // find dominant atom\r\n        let maxWeight = 0.0;\r\n        let dominantIdx = -1;\r\n        for (const atomIdx in atomWeights) {\r\n          if (atomWeights[atomIdx] > maxWeight) {\r\n            dominantIdx = atomIdx;\r\n            maxWeight = atomWeights[atomIdx];\r\n          }\r\n        }\r\n\r\n        if (dominantIdx < 0 || !visibilitySelector.includesAtom(atomLookup[dominantIdx])) {\r\n          // this vertex doesn't belong to visible subset and will be skipped\r\n          vMap[i] = -1;\r\n          continue;\r\n        }\r\n      }\r\n\r\n      vMap[i] = newVerCount++;\r\n\r\n      // color tri-linear interpolation\r\n      const dx = (x < xs) ? strideX : 0;\r\n      const dy = (y < ys) ? strideY : 0;\r\n      const dz = (z < zs) ? strideZ : 0;\r\n\r\n      const c0 = [0, 0, 0];\r\n      const c1 = [0, 0, 0];\r\n      const c2 = [0, 0, 0];\r\n      const c3 = [0, 0, 0];\r\n\r\n      idx = colorMap.getDirectIdx(x, y, z);\r\n      interp(mux, idx, idx + dx, c0);\r\n      interp(mux, idx + dy, idx + dx + dy, c1);\r\n      interp(mux, idx + dz, idx + dx + dz, c2);\r\n      interp(mux, idx + dy + dz, idx + dx + dy + dz, c3);\r\n\r\n      const cz0 = [0, 0, 0];\r\n      cz0[0] = (1 - muy) * c0[0] + muy * c1[0];\r\n      cz0[1] = (1 - muy) * c0[1] + muy * c1[1];\r\n      cz0[2] = (1 - muy) * c0[2] + muy * c1[2];\r\n\r\n      const cz1 = [0, 0, 0];\r\n      cz1[0] = (1 - muy) * c2[0] + muy * c3[0];\r\n      cz1[1] = (1 - muy) * c2[1] + muy * c3[1];\r\n      cz1[2] = (1 - muy) * c2[2] + muy * c3[2];\r\n\r\n      colors[ind] = (1 - muz) * cz0[0] + muz * cz1[0];\r\n      colors[ind + 1] = (1 - muz) * cz0[1] + muz * cz1[1];\r\n      colors[ind + 2] = (1 - muz) * cz0[2] + muz * cz1[2];\r\n    }\r\n    this._colors = colors;\r\n\r\n    if (visibilitySelector != null) {\r\n      // shift visible vertices towards beginning of array\r\n      for (i = 0; i < numVerts; ++i) {\r\n        const j = vMap[i];\r\n        if (j < 0) {\r\n          continue;\r\n        }\r\n\r\n        // assert: j <= i\r\n        this._position[j * 3] = this._position[i * 3];\r\n        this._position[j * 3 + 1] = this._position[i * 3 + 1];\r\n        this._position[j * 3 + 2] = this._position[i * 3 + 2];\r\n        this._normals[j * 3] = this._normals[i * 3];\r\n        this._normals[j * 3 + 1] = this._normals[i * 3 + 1];\r\n        this._normals[j * 3 + 2] = this._normals[i * 3 + 2];\r\n        this._colors[j * 3] = this._colors[i * 3];\r\n        this._colors[j * 3 + 1] = this._colors[i * 3 + 1];\r\n        this._colors[j * 3 + 2] = this._colors[i * 3 + 2];\r\n      }\r\n\r\n      // rebuild index list\r\n      const numTriangles = this._indices.length / 3;\r\n      let newTriCount = 0;\r\n      for (i = 0; i < numTriangles; ++i) {\r\n        const i0 = vMap[this._indices[3 * i]];\r\n        const i1 = vMap[this._indices[3 * i + 1]];\r\n        const i2 = vMap[this._indices[3 * i + 2]];\r\n        if (i0 >= 0 && i1 >= 0 && i2 >= 0) {\r\n          this._indices[3 * newTriCount] = i0;\r\n          this._indices[3 * newTriCount + 1] = i1;\r\n          this._indices[3 * newTriCount + 2] = i2;\r\n          ++newTriCount;\r\n        }\r\n      }\r\n\r\n      // shrink arrays to data size\r\n      this._position = new Float32Array(this._position.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._normals = new Float32Array(this._normals.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._colors = new Float32Array(this._colors.buffer.slice(0, newVerCount * 3 * 4));\r\n      this._indices = new Uint32Array(this._indices.buffer.slice(0, newTriCount * 3 * 4));\r\n    }\r\n  }\r\n\r\n  toMesh() {\r\n    const geo = new THREE.BufferGeometry();\r\n    geo.setIndex(new THREE.BufferAttribute(this._indices, 1));\r\n    geo.setAttribute('position', new THREE.BufferAttribute(this._position, 3));\r\n    geo.setAttribute('normal', new THREE.BufferAttribute(this._normals, 3));\r\n    geo.setAttribute('color', new THREE.BufferAttribute(this._colors, 3));\r\n    geo.computeBoundingSphere();\r\n    return geo;\r\n  }\r\n}\r\nexport default IsoSurface;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceGeometry from './IsoSurfaceGeometry';\r\nimport IsoSurface from './IsoSurface';\r\nimport utils from '../../utils';\r\n\r\n/**\r\n * This is a base class for volumetric maps based isosurface algorithms.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass VolumeSurfaceGeometry extends IsoSurfaceGeometry {\r\n  _build() {\r\n    const params = this._opts;\r\n    this.numVoxels = [128, 128, 128];\r\n    this.xAxis = new THREE.Vector3(1.0, 0.0, 0.0);\r\n    this.yAxis = new THREE.Vector3(0.0, 1.0, 0.0);\r\n    this.zAxis = new THREE.Vector3(0.0, 0.0, 1.0);\r\n\r\n    this.origin = new THREE.Vector3(0.0, 0.0, 0.0);\r\n    this._visibilitySelector = params.visibilitySelector;\r\n\r\n    this._calcSurface(params);\r\n  }\r\n\r\n  _findMinMax(posRadArray) {\r\n    const itemSize = 4;\r\n    const itemsCount = posRadArray.length / itemSize;\r\n    const maxPosRad = [posRadArray[0], posRadArray[1], posRadArray[2], posRadArray[3]];\r\n    const minPosRad = [posRadArray[0], posRadArray[1], posRadArray[2], posRadArray[3]];\r\n    for (let i = 1; i < itemsCount; ++i) {\r\n      const ind = i * itemSize;\r\n\r\n      for (let itemIdx = 0; itemIdx < itemSize; ++itemIdx) {\r\n        const tmpVal = posRadArray[ind + itemIdx];\r\n        maxPosRad[itemIdx] = Math.max(tmpVal, maxPosRad[itemIdx]);\r\n        minPosRad[itemIdx] = Math.min(tmpVal, minPosRad[itemIdx]);\r\n      }\r\n    }\r\n    return { maxPosRad, minPosRad };\r\n  }\r\n\r\n  _findNumVoxels(posRadArray, params) {\r\n    const { numVoxels } = this;\r\n    const minMaxValues = this._findMinMax(posRadArray);\r\n    const minCoordRad = minMaxValues.minPosRad;\r\n    const maxCoordRad = minMaxValues.maxPosRad;\r\n\r\n    // minrad\r\n    if (minCoordRad[3] > 4.0) {\r\n      params.gridSpacing *= minCoordRad[3];\r\n    }\r\n\r\n    let gridPadding = params.radScale * maxCoordRad[3] * 1.7;\r\n    let padRad = gridPadding;\r\n    padRad = 0.65 * Math.sqrt(4.0 / 3.0 * Math.PI * padRad * padRad * padRad);\r\n    gridPadding = Math.max(gridPadding, padRad);\r\n\r\n    let i = 0;\r\n    for (; i < 3; ++i) {\r\n      minCoordRad[i] -= gridPadding;\r\n      maxCoordRad[i] += gridPadding;\r\n    }\r\n\r\n    for (i = 0; i < 3; ++i) {\r\n      numVoxels[i] = Math.ceil((maxCoordRad[i] - minCoordRad[i]) / params.gridSpacing);\r\n    }\r\n    this.xAxis.x = (numVoxels[0] - 1) * params.gridSpacing;\r\n    this.yAxis.y = (numVoxels[1] - 1) * params.gridSpacing;\r\n    this.zAxis.z = (numVoxels[2] - 1) * params.gridSpacing;\r\n\r\n    [this.origin.x, this.origin.y, this.origin.z] = minCoordRad;\r\n\r\n    return { bbox: minMaxValues, dim: numVoxels };\r\n  }\r\n\r\n  _makeSurface(surface, params) {\r\n    const isoSurf = new IsoSurface();\r\n    isoSurf.compute(surface.volMap, this.origin, params.isoValue, 1);\r\n    isoSurf.vertexFusion(9, 9);// normalization is included\r\n\r\n    if (isoSurf._numTriangles > 0) {\r\n      isoSurf.setColorVolTex(surface.volTexMap, surface.atomMap, surface.atomWeightMap, this._visibilitySelector);\r\n      this.setIndex(new THREE.BufferAttribute(isoSurf._indices, 1));\r\n      this.setAttribute('position', new THREE.BufferAttribute(isoSurf._position, 3));\r\n      this.setAttribute('normal', new THREE.BufferAttribute(isoSurf._normals, 3));\r\n      this.setAttribute('color', new THREE.BufferAttribute(isoSurf._colors, 3));\r\n    } else { // geometry should have at least empty position attributes to be processed in wireframe mode by three.js\r\n      this.setAttribute('position', new THREE.BufferAttribute(utils.allocateTyped(Float32Array, 0), 3));\r\n    }\r\n  }\r\n\r\n  _calcSurface(params) {\r\n    const packedArrays = {\r\n      posRad: this._posRad,\r\n      colors: this._colors,\r\n      atoms: this._opts.atoms,\r\n    };\r\n\r\n    if (packedArrays.posRad.length === 0) {\r\n      return;\r\n    }\r\n    const boundaries = this._findNumVoxels(packedArrays.posRad, params);\r\n\r\n    const box = new THREE.Box3(\r\n      this.origin,\r\n      new THREE.Vector3(this.xAxis.x, this.yAxis.y, this.zAxis.z).add(this.origin),\r\n    );\r\n    const surface = this._computeSurface(packedArrays, box, boundaries, params);\r\n\r\n    this._makeSurface(surface, params);\r\n  }\r\n}\r\n\r\nexport default VolumeSurfaceGeometry;\r\n","import VolumeSurfaceGeometry from './VolumeSurfaceGeometry';\r\nimport chem from '../../chem';\r\n\r\nconst { Volume } = chem;\r\n\r\n/**\r\n * This class implements 'quick' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass QuickSurfGeometry extends VolumeSurfaceGeometry {\r\n  _computeSurface(packedArrays, box, boundaries, params) {\r\n    // beware of shifting this multiple times!\r\n    this._shiftByOrigin(packedArrays.posRad);\r\n\r\n    const surface = {\r\n      volMap: new Volume(Float32Array, this.numVoxels, box),\r\n      volTexMap: new Volume(Float32Array, this.numVoxels, box, 3),\r\n    };\r\n\r\n    if (this._visibilitySelector != null) {\r\n      surface.atomMap = [];\r\n      surface.atomWeightMap = new Volume(Float32Array, this.numVoxels, box);\r\n    }\r\n\r\n    this.gaussdensity(surface, packedArrays, null, params);\r\n    return surface;\r\n  }\r\n\r\n  gaussdensity(surface, packedArrays, atomicNum, params) {\r\n    const numAtoms = packedArrays.posRad.length / 4;\r\n    const { posRad, colors } = packedArrays;\r\n    const { numVoxels } = this;\r\n    const { radScale, gaussLim, gridSpacing } = params;\r\n    const invIsoValue = 1.0 / params.isoValue;\r\n    const invGridSpacing = 1.0 / gridSpacing;\r\n    const maxVoxelX = numVoxels[0] - 1;\r\n    const maxVoxelY = numVoxels[1] - 1;\r\n    const maxVoxelZ = numVoxels[2] - 1;\r\n    // TODO is densityMap and volTexMap initialized?\r\n\r\n    const { volMap, volTexMap } = surface;\r\n    const volData = volMap.getData();\r\n    const strideX = volMap.getStrideX();\r\n\r\n    const volTexData = volTexMap.getData();\r\n    const texStrideX = volTexMap.getStrideX();\r\n\r\n    let atomWeightData;\r\n    if (this._visibilitySelector != null) {\r\n      atomWeightData = surface.atomWeightMap.getData();\r\n    }\r\n\r\n    const { atomMap } = surface;\r\n\r\n    for (let i = 0; i < numAtoms; ++i) {\r\n      const ind = i * 4;\r\n      const scaledRad = posRad[ind + 3] * radScale;\r\n      const atomicNumFactor = atomicNum === null ? 1.0 : atomicNum[i];\r\n      const radInv = 1 / (2 * scaledRad * scaledRad);\r\n      let radLim = gaussLim * scaledRad;\r\n      const radLim2 = radLim * radLim;\r\n      radLim *= invGridSpacing;\r\n\r\n      let tmp = posRad[ind] * invGridSpacing;\r\n      const xMin = Math.max((tmp - radLim) | 0, 0);\r\n      const xMax = Math.min((tmp + radLim) | 0, maxVoxelX);\r\n      tmp = posRad[ind + 1] * invGridSpacing;\r\n      const yMin = Math.max((tmp - radLim) | 0, 0);\r\n      const yMax = Math.min((tmp + radLim) | 0, maxVoxelY);\r\n      tmp = posRad[ind + 2] * invGridSpacing;\r\n      const zMin = Math.max((tmp - radLim) | 0, 0);\r\n      const zMax = Math.min((tmp + radLim) | 0, maxVoxelZ);\r\n\r\n      let dz = zMin * gridSpacing - posRad[ind + 2];\r\n      for (let z = zMin; z <= zMax; ++z, dz += gridSpacing) {\r\n        let dy = yMin * gridSpacing - posRad[ind + 1];\r\n        for (let y = yMin; y <= yMax; ++y, dy += gridSpacing) {\r\n          const dy2dz2 = dy * dy + dz * dz;\r\n\r\n          if (dy2dz2 >= radLim2) {\r\n            continue;\r\n          }\r\n\r\n          let addr = volMap.getDirectIdx(xMin, y, z);\r\n          let texAddr = volTexMap.getDirectIdx(xMin, y, z);\r\n          let dx = xMin * gridSpacing - posRad[ind];\r\n          for (let x = xMin; x <= xMax; ++x, dx += gridSpacing, addr += strideX, texAddr += texStrideX) {\r\n            const r2 = dx * dx + dy2dz2;\r\n            const expVal = -r2 * radInv;\r\n\r\n            let density = Math.exp(expVal) * atomicNumFactor;\r\n\r\n            // store most relevant atom (with highest density)\r\n            if (this._visibilitySelector != null\r\n              && density > atomWeightData[addr]) { // NOSONAR\r\n              atomWeightData[addr] = density;\r\n              // we use same index into atom map and atomWeightMap\r\n              atomMap[addr] = packedArrays.atoms[i];\r\n            }\r\n\r\n            volData[addr] += density;\r\n\r\n            // TODO check for volTexMap routine?\r\n            density *= invIsoValue;\r\n            const colInd = i * 3;\r\n            volTexData[texAddr] += density * colors[colInd];\r\n            volTexData[texAddr + 1] += density * colors[colInd + 1];\r\n            volTexData[texAddr + 2] += density * colors[colInd + 2];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _shiftByOrigin(posRadArray) {\r\n    const originX = this.origin.x;\r\n    const originY = this.origin.y;\r\n    const originZ = this.origin.z;\r\n\r\n    const itemSize = 4;\r\n    const itemsCount = posRadArray.length / itemSize;\r\n    for (let i = 0; i < itemsCount; ++i) {\r\n      const ind = i * itemSize;\r\n\r\n      posRadArray[ind] -= originX;\r\n      posRadArray[ind + 1] -= originY;\r\n      posRadArray[ind + 2] -= originZ;\r\n    }\r\n  }\r\n}\r\n\r\nexport default QuickSurfGeometry;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\n/**\r\n * Modifed from SpatialHash\r\n *\r\n * Main differences are:\r\n * - Optimized grid size to ensure we only ever need to look +/-1 cell\r\n * - Aware of atomic radii and will only output atoms within rAtom + rExtra\r\n *   (see withinRadii method)\r\n *\r\n * (Uses rounding rather than bitshifting as consequence of arbitrary grid size)\r\n * @class\r\n * @param {Float32Array} posRad - x, y, z coordinates and radiuses\r\n * @param {Float32Array} min - xyz min coordinates\r\n * @param {Float32Array} max - xyz max coordinates\r\n * @param {number} maxDistance - max distance\r\n */\r\nfunction AVHash(posRad, min, max, maxDistance) {\r\n  const itemSize = 4;\r\n  const nAtoms = posRad.length / itemSize;\r\n\r\n  const minX = min[0];\r\n  const minY = min[1];\r\n  const minZ = min[2];\r\n\r\n  const maxX = max[0];\r\n  const maxY = max[1];\r\n  const maxZ = max[2];\r\n\r\n  function hashFunc(w, minW) {\r\n    return Math.floor((w - minW) / maxDistance);\r\n  }\r\n\r\n  const iDim = hashFunc(maxX, minX) + 1;\r\n  const jDim = hashFunc(maxY, minY) + 1;\r\n  const kDim = hashFunc(maxZ, minZ) + 1;\r\n\r\n  const nCells = iDim * jDim * kDim;\r\n\r\n  const jkDim = jDim * kDim;\r\n\r\n  /* Get cellID for cartesian x,y,z */\r\n  const cellID = function (x, y, z) {\r\n    return (((hashFunc(x, minX) * jDim) + hashFunc(y, minY)) * kDim) + hashFunc(z, minZ);\r\n  };\r\n\r\n  /* Initial building, could probably be optimized further */\r\n  const preHash = [];\r\n  let i;\r\n  let cid;\r\n  for (i = 0; i < nAtoms; i++) {\r\n    const iIdx = itemSize * i;\r\n    cid = cellID(posRad[iIdx], posRad[iIdx + 1], posRad[iIdx + 2]);\r\n\r\n    if (preHash[cid] === undefined) {\r\n      preHash[cid] = [i];\r\n    } else {\r\n      preHash[cid].push(i);\r\n    }\r\n  }\r\n\r\n  const cellOffsets = utils.allocateTyped(Uint32Array, nCells);\r\n  const cellLengths = utils.allocateTyped(Uint16Array, nCells);\r\n  const data = utils.allocateTyped(Uint32Array, nAtoms);\r\n\r\n  let offset = 0;\r\n  let maxCellLength = 0;\r\n  let j;\r\n  for (i = 0; i < nCells; i++) {\r\n    const start = cellOffsets[i] = offset;\r\n\r\n    const subArray = preHash[i];\r\n\r\n    if (subArray !== undefined) {\r\n      for (j = 0; j < subArray.length; j++) {\r\n        data[offset] = subArray[j];\r\n        offset++;\r\n      }\r\n    }\r\n\r\n    const cellLength = offset - start;\r\n    cellLengths[i] = cellLength;\r\n\r\n    if (cellLength > maxCellLength) {\r\n      maxCellLength = cellLength;\r\n    }\r\n  }\r\n\r\n  // Maximum number of neighbours we could ever produce (27 adjacent cells of equal population)\r\n  this.neighbourListLength = (27 * maxCellLength) + 1;\r\n\r\n  /**\r\n   * Populate the supplied out array with atom indices that are within rAtom + rExtra\r\n   * of x,y,z\r\n   *\r\n   * -1 in out array indicates the end of the list\r\n   *\r\n   * @param  {number} x - x coordinate\r\n   * @param  {number} y - y coordinate\r\n   * @param  {number} z - z coordinate\r\n   * @param  {number} rExtra - additional radius\r\n   * @param  {Float32Array} out - pre-allocated output array\r\n   * @return {undefined}\r\n   */\r\n  this.withinRadii = function (x, y, z, rExtra, out) {\r\n    let outIdx = 0;\r\n\r\n    const nearI = hashFunc(x, minX);\r\n    const nearJ = hashFunc(y, minY);\r\n    const nearK = hashFunc(z, minZ);\r\n\r\n    const loI = Math.max(0, nearI - 1);\r\n    const loJ = Math.max(0, nearJ - 1);\r\n    const loK = Math.max(0, nearK - 1);\r\n\r\n    const hiI = Math.min(iDim - 1, nearI + 1);\r\n    const hiJ = Math.min(jDim - 1, nearJ + 1);\r\n    const hiK = Math.min(kDim - 1, nearK + 1);\r\n\r\n    for (i = loI; i <= hiI; ++i) {\r\n      const iOffset = i * jkDim;\r\n\r\n      for (j = loJ; j <= hiJ; ++j) {\r\n        const jOffset = j * kDim;\r\n\r\n        for (let k = loK; k <= hiK; ++k) {\r\n          cid = iOffset + jOffset + k;\r\n\r\n          const cellStart = cellOffsets[cid];\r\n          const cellEnd = cellStart + cellLengths[cid];\r\n\r\n          for (let dataIndex = cellStart; dataIndex < cellEnd; dataIndex++) {\r\n            const atomIndex = data[dataIndex];\r\n            const baseIndex = itemSize * atomIndex;\r\n            const dx = posRad[baseIndex] - x;\r\n            const dy = posRad[baseIndex + 1] - y;\r\n            const dz = posRad[baseIndex + 2] - z;\r\n            const rSum = posRad[baseIndex + 3] + rExtra;\r\n\r\n            if ((dx * dx + dy * dy + dz * dz) <= (rSum * rSum)) {\r\n              out[outIdx++] = data[dataIndex];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Add terminator\r\n    out[outIdx] = -1;\r\n  };\r\n}\r\nfunction ContactSurface(packedArrays, boundaries, params, _indexList) {\r\n  // Field generation method adapted from AstexViewer (Mike Hartshorn)\r\n  // by Fred Ludlow.\r\n  // Other parts based heavily on NGL (Alexander Rose) EDT Surface class\r\n  //\r\n  // Should work as a drop-in alternative to EDTSurface (though some of\r\n  // the EDT paramters are not relevant in this method).\r\n\r\n  const itemSize = 4;\r\n  const { posRad, colors, atoms } = packedArrays;\r\n  const nAtoms = posRad.length / itemSize;\r\n\r\n  const { bbox } = boundaries;\r\n\r\n  const min = bbox.minPosRad;\r\n  const max = bbox.maxPosRad;\r\n\r\n  let r2; // Atom positions, expanded radii (squared)\r\n  let maxRadius;\r\n\r\n  // Parameters\r\n  let probeRadius;\r\n  let scaleFactor;\r\n  let probePositions;\r\n\r\n  // Cache last value for obscured test\r\n  let lastClip = -1;\r\n\r\n  // Grid params\r\n  let dim;\r\n  let grid;\r\n  let volTex;\r\n  let weights;\r\n  let weightsMap = null;\r\n  let atomMap = null;\r\n  let visibilitySelector = null;\r\n\r\n  // grid indices -> xyz coords\r\n  let gridx;\r\n  let gridy;\r\n  let gridz;\r\n\r\n  // Lookup tables:\r\n  let sinTable;\r\n  let cosTable;\r\n\r\n  // Spatial Hash\r\n  let hash;\r\n\r\n  // Neighbour array to be filled by hash\r\n  let neighbours;\r\n\r\n  // Vectors for Torus Projection\r\n  const mid = new THREE.Vector3(0.0, 0.0, 0.0);\r\n  const n1 = new THREE.Vector3(0.0, 0.0, 0.0);\r\n  const n2 = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  let ngTorus;\r\n\r\n  function uniformArray(TypeName, n, a) {\r\n    const array = utils.allocateTyped(TypeName, n);\r\n    for (let innI = 0; innI < n; ++innI) {\r\n      array[innI] = a;\r\n    }\r\n\r\n    return array;\r\n  }\r\n\r\n  function fillGridDim(a, start, step) {\r\n    for (let innI = 0; innI < a.length; innI++) {\r\n      a[innI] = start + (step * innI);\r\n    }\r\n  }\r\n\r\n  function initializeGrid() {\r\n    ({ scaleFactor } = params);\r\n    ({ dim } = boundaries);\r\n\r\n    ngTorus = Math.min(5, 2 + Math.floor(probeRadius * scaleFactor));\r\n\r\n    const gridSize = dim[0] * dim[1] * dim[2];\r\n    grid = uniformArray(Float32Array, gridSize, -1001.0);\r\n    volTex = utils.allocateTyped(Float32Array, gridSize * 3);\r\n    weights = utils.allocateTyped(Float32Array, gridSize);\r\n    if (visibilitySelector) {\r\n      weightsMap = utils.allocateTyped(Float32Array, gridSize);\r\n      atomMap = [];\r\n    }\r\n\r\n    gridx = utils.allocateTyped(Float32Array, dim[0]);\r\n    gridy = utils.allocateTyped(Float32Array, dim[1]);\r\n    gridz = utils.allocateTyped(Float32Array, dim[2]);\r\n\r\n    fillGridDim(gridx, min[0], 1 / scaleFactor);\r\n    fillGridDim(gridy, min[1], 1 / scaleFactor);\r\n    fillGridDim(gridz, min[2], 1 / scaleFactor);\r\n  }\r\n\r\n  function initializeAngleTables() {\r\n    let theta = 0.0;\r\n    const step = 2 * Math.PI / probePositions;\r\n\r\n    cosTable = utils.allocateTyped(Float32Array, probePositions);\r\n    sinTable = utils.allocateTyped(Float32Array, probePositions);\r\n    for (let innI = 0; innI < probePositions; innI++) {\r\n      cosTable[innI] = Math.cos(theta);\r\n      sinTable[innI] = Math.sin(theta);\r\n      theta += step;\r\n    }\r\n  }\r\n\r\n  function initializeHash() {\r\n    hash = new AVHash(posRad, min, max, 2.01 * maxRadius);\r\n    neighbours = new Int32Array(hash.neighbourListLength);\r\n  }\r\n\r\n  function init() {\r\n    ({\r\n      probeRadius,\r\n      scaleFactor,\r\n      probePositions,\r\n      visibilitySelector,\r\n    } = params);\r\n    r2 = utils.allocateTyped(Float32Array, nAtoms);\r\n    maxRadius = 0;\r\n    for (let innI = 0; innI < nAtoms; ++innI) {\r\n      const rExt = posRad[innI * itemSize + 3] += probeRadius;\r\n      if (rExt > maxRadius) {\r\n        maxRadius = rExt;\r\n      }\r\n      r2[innI] = rExt * rExt;\r\n    }\r\n\r\n    initializeGrid();\r\n    initializeAngleTables();\r\n    initializeHash();\r\n\r\n    lastClip = -1;\r\n  }\r\n\r\n  function singleAtomObscures(ai, innX, innY, innZ) {\r\n    const innCI = itemSize * ai;\r\n    const ra2 = r2[ai];\r\n    const dx = posRad[innCI] - innX;\r\n    const dy = posRad[innCI + 1] - innY;\r\n    const dz = posRad[innCI + 2] - innZ;\r\n    const d2 = dx * dx + dy * dy + dz * dz;\r\n\r\n    return d2 < ra2;\r\n  }\r\n\r\n  function obscured(innX, innY, innZ, a, b) {\r\n    // Is the point at x,y,z obscured by any of the atoms\r\n    // specifeid by indices in neighbours. Ignore indices\r\n    // a and b (these are the relevant atoms in projectPoints/Torii)\r\n\r\n    // Cache the last clipped atom (as very often the same one in\r\n    // subsequent calls)\r\n    let ai;\r\n\r\n    if (lastClip !== -1) {\r\n      ai = lastClip;\r\n      if (ai !== a && ai !== b && singleAtomObscures(ai, innX, innY, innZ)) {\r\n        return ai;\r\n      }\r\n      lastClip = -1;\r\n    }\r\n\r\n    let ni = 0;\r\n    ai = neighbours[ni];\r\n    while (ai >= 0) {\r\n      if (ai !== a && ai !== b && singleAtomObscures(ai, innX, innY, innZ)) {\r\n        lastClip = ai;\r\n        return ai;\r\n      }\r\n      ai = neighbours[++ni];\r\n    }\r\n\r\n    lastClip = -1;\r\n\r\n    return -1;\r\n  }\r\n\r\n  function projectPoints() {\r\n    // For each atom:\r\n    //     Iterate over a subsection of the grid, for each point:\r\n    //         If current value < 0.0, unvisited, set positive\r\n    //\r\n    //         In any case: Project this point onto surface of the atomic sphere\r\n    //         If this projected point is not obscured by any other atom\r\n    //             Calcualte delta distance and set grid value to minimum of\r\n    //             itself and delta\r\n\r\n    // Should we alias frequently accessed closure constiables??\r\n    // Assume JS engine capable of optimizing this\r\n    // anyway...\r\n    const maxRad = 4.0;\r\n    const sigma = (maxRad) / 3;\r\n    const sigma2Inv = 1 / (2 * sigma * sigma);\r\n\r\n    for (let innI = 0; innI < nAtoms; innI++) {\r\n      const innCI = itemSize * innI;\r\n      const ax = posRad[innCI];\r\n      const ay = posRad[innCI + 1];\r\n      const az = posRad[innCI + 2];\r\n      const ar = posRad[innCI + 3];\r\n      const ar2 = r2[innI];\r\n\r\n      hash.withinRadii(ax, ay, az, ar, neighbours);\r\n\r\n      // Number of grid points, round this up...\r\n      const ng = Math.ceil(ar * scaleFactor);\r\n\r\n      // Center of the atom, mapped to grid points (take floor)\r\n      const iax = Math.floor(scaleFactor * (ax - min[0]));\r\n      const iay = Math.floor(scaleFactor * (ay - min[1]));\r\n      const iaz = Math.floor(scaleFactor * (az - min[2]));\r\n\r\n      // Extents of grid to consider for this atom\r\n      const minx = Math.max(0, iax - ng);\r\n      const miny = Math.max(0, iay - ng);\r\n      const minz = Math.max(0, iaz - ng);\r\n\r\n      // Add two to these points:\r\n      // - iax are floor'd values so this ensures coverage\r\n      // - these are loop limits (exclusive)\r\n      const maxx = Math.min(dim[0], iax + ng + 2);\r\n      const maxy = Math.min(dim[1], iay + ng + 2);\r\n      const maxz = Math.min(dim[2], iaz + ng + 2);\r\n\r\n      const colIdx = innI * 3;\r\n      const cr = colors[colIdx];\r\n      const cg = colors[colIdx + 1];\r\n      const cb = colors[colIdx + 2];\r\n\r\n      for (let iz = minz; iz < maxz; iz++) {\r\n        const dz = gridz[iz] - az;\r\n        const zOffset = dim[1] * dim[0] * iz;\r\n\r\n        for (let iy = miny; iy < maxy; iy++) {\r\n          const dy = gridy[iy] - ay;\r\n          const dzy2 = dz * dz + dy * dy;\r\n          const zyOffset = zOffset + dim[0] * iy;\r\n\r\n          for (let ix = minx; ix < maxx; ix++) {\r\n            const idx = ix + zyOffset;\r\n            const dx = gridx[ix] - ax;\r\n            const d2 = dzy2 + dx * dx;\r\n\r\n            if (d2 < ar2) {\r\n              const w = Math.exp(-d2 * sigma2Inv);\r\n              const cIdx = idx * 3;\r\n              volTex[cIdx] += cr * w;\r\n              volTex[cIdx + 1] += cg * w;\r\n              volTex[cIdx + 2] += cb * w;\r\n              weights[idx] += w;\r\n              if (visibilitySelector !== null && w > weightsMap[idx]) {\r\n                weightsMap[idx] = w;\r\n                atomMap[idx] = atoms[innI];\r\n              }\r\n\r\n              if (grid[idx] < 0.0) {\r\n                // Unvisited, make positive\r\n                grid[idx] = -grid[idx];\r\n              }\r\n              // Project on to the surface of the sphere\r\n              // sp is the projected point ( dx, dy, dz ) * ( ra / d )\r\n              const d = Math.sqrt(d2);\r\n              const ap = ar / d;\r\n              let spx = dx * ap;\r\n              let spy = dy * ap;\r\n              let spz = dz * ap;\r\n\r\n              spx += ax;\r\n              spy += ay;\r\n              spz += az;\r\n\r\n              if (obscured(spx, spy, spz, innI, -1) === -1) {\r\n                const dd = ar - d;\r\n                if (dd < grid[idx]) {\r\n                  grid[idx] = dd;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function normalToLine(out, p) {\r\n    out.x = out.y = out.z = 1.0;\r\n    if (p.x !== 0) {\r\n      out.x = (p.y + p.z) / -p.x;\r\n    } else if (p.y !== 0) {\r\n      out.y = (p.x + p.z) / -p.y;\r\n    } else if (p.z !== 0) {\r\n      out.z = (p.x + p.y) / -p.z;\r\n    }\r\n    return out;\r\n  }\r\n\r\n  function projectTorus(a, b) {\r\n    const aIdx = itemSize * a;\r\n    const bIdx = itemSize * b;\r\n    const xa = posRad[aIdx];\r\n    const ya = posRad[aIdx + 1];\r\n    const za = posRad[aIdx + 2];\r\n    const r1 = posRad[aIdx + 3];\r\n    let dx = mid.x = posRad[bIdx] - xa;\r\n    let dy = mid.y = posRad[bIdx + 1] - ya;\r\n    let dz = mid.z = posRad[bIdx + 2] - za;\r\n    const innR2 = posRad[bIdx + 3];\r\n    let d2 = dx * dx + dy * dy + dz * dz;\r\n\r\n    // This check now redundant as already done in AVHash.withinRadii\r\n    // if( d2 > (( r1 + r2 ) * ( r1 + r2 )) ){ return; }\r\n\r\n    const d = Math.sqrt(d2);\r\n\r\n    // Find angle between a->b vector and the circle\r\n    // of their intersection by cosine rule\r\n    const cosA = (r1 * r1 + d * d - innR2 * innR2) / (2.0 * r1 * d);\r\n\r\n    // distance along a->b at intersection\r\n    const dmp = r1 * cosA;\r\n\r\n    mid.normalize();\r\n\r\n    // Create normal to line\r\n    normalToLine(n1, mid);\r\n    n1.normalize();\r\n\r\n    // Cross together for second normal vector\r\n    n2.crossVectors(mid, n1);\r\n    n2.normalize();\r\n\r\n    // r is radius of circle of intersection\r\n    const rInt = Math.sqrt(r1 * r1 - dmp * dmp);\r\n\r\n    n1.multiplyScalar(rInt);\r\n    n2.multiplyScalar(rInt);\r\n    mid.multiplyScalar(dmp);\r\n\r\n    mid.x += xa;\r\n    mid.y += ya;\r\n    mid.z += za;\r\n\r\n    lastClip = -1;\r\n\r\n    const ng = ngTorus;\r\n\r\n    for (let innI = 0; innI < probePositions; innI++) {\r\n      const cost = cosTable[innI];\r\n      const sint = sinTable[innI];\r\n\r\n      const px = mid.x + cost * n1.x + sint * n2.x;\r\n      const py = mid.y + cost * n1.y + sint * n2.y;\r\n      const pz = mid.z + cost * n1.z + sint * n2.z;\r\n\r\n      if (obscured(px, py, pz, a, b) === -1) {\r\n        // As above, iterate over our grid...\r\n        // px, py, pz in grid coords\r\n        const iax = Math.floor(scaleFactor * (px - min[0]));\r\n        const iay = Math.floor(scaleFactor * (py - min[1]));\r\n        const iaz = Math.floor(scaleFactor * (pz - min[2]));\r\n\r\n        const minx = Math.max(0, iax - ng);\r\n        const miny = Math.max(0, iay - ng);\r\n        const minz = Math.max(0, iaz - ng);\r\n\r\n        const maxx = Math.min(dim[0], iax + ng + 2);\r\n        const maxy = Math.min(dim[1], iay + ng + 2);\r\n        const maxz = Math.min(dim[2], iaz + ng + 2);\r\n\r\n        for (let iz = minz; iz < maxz; iz++) {\r\n          dz = pz - gridz[iz];\r\n          const zOffset = dim[1] * dim[0] * iz;\r\n          for (let iy = miny; iy < maxy; iy++) {\r\n            dy = py - gridy[iy];\r\n            const dzy2 = dz * dz + dy * dy;\r\n            const zyOffset = zOffset + dim[0] * iy;\r\n            for (let ix = minx; ix < maxx; ix++) {\r\n              dx = px - gridx[ix];\r\n              d2 = dzy2 + dx * dx;\r\n              const idx = ix + zyOffset;\r\n              const current = grid[idx];\r\n\r\n              if (current > 0.0 && d2 < (current * current)) {\r\n                grid[idx] = Math.sqrt(d2);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function projectTorii() {\r\n    for (let innI = 0; innI < nAtoms; innI++) {\r\n      const innIdx = itemSize * innI;\r\n      hash.withinRadii(\r\n        posRad[innIdx],\r\n        posRad[innIdx + 1],\r\n        posRad[innIdx + 2],\r\n        posRad[innIdx + 3],\r\n        neighbours,\r\n      );\r\n      let ia = 0;\r\n      let ni = neighbours[ia];\r\n      while (ni >= 0) {\r\n        if (innI < ni) {\r\n          projectTorus(innI, ni);\r\n        }\r\n        ni = neighbours[++ia];\r\n      }\r\n    }\r\n  }\r\n\r\n  function fixNegatives() {\r\n    for (let innI = 0, n = grid.length; innI < n; innI++) {\r\n      if (grid[innI] < 0) grid[innI] = 0;\r\n      let w = weights[innI];\r\n      if (w > 0) {\r\n        w = 1 / w;\r\n        const innInnI = innI * 3;\r\n        volTex[innInnI] *= w;\r\n        volTex[innInnI + 1] *= w;\r\n        volTex[innInnI + 2] *= w;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getVolume() {\r\n    // Basic steps are:\r\n    // 1) Initialize\r\n    // 2) Project points\r\n    // 3) Project torii\r\n    console.time('ContactSurface.getVolume');\r\n\r\n    console.time('ContactSurface.init');\r\n    init();\r\n    console.timeEnd('ContactSurface.init');\r\n\r\n    console.time('ContactSurface.projectPoints');\r\n    projectPoints();\r\n    console.timeEnd('ContactSurface.projectPoints');\r\n\r\n    console.time('ContactSurface.projectTorii');\r\n    projectTorii();\r\n    console.timeEnd('ContactSurface.projectTorii');\r\n    fixNegatives();\r\n    console.timeEnd('ContactSurface.getVolume');\r\n  }\r\n\r\n  this.build = function () {\r\n    // type and cutoff left in for compatibility with EDTSurface.getSurface\r\n    // function signature\r\n    getVolume();\r\n    this.volTexMap = volTex;\r\n    this.weightsMap = weightsMap;\r\n    this.atomMap = atomMap;\r\n    this.volMap = grid;\r\n  };\r\n}\r\nexport default ContactSurface;\r\n","import VolumeSurfaceGeometry from './VolumeSurfaceGeometry';\r\nimport ContactSurface from './ContactSurface';\r\nimport chem from '../../chem';\r\n\r\nconst { Volume } = chem;\r\n\r\n/**\r\n * This class implements 'contact' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass ContactSurfaceGeometry extends VolumeSurfaceGeometry {\r\n  _computeSurface(packedArrays, box, boundaries, params) {\r\n    const contactSurface = new ContactSurface(packedArrays, boundaries, params);\r\n    contactSurface.build();\r\n\r\n    const surface = {\r\n      volMap: new Volume(Float32Array, this.numVoxels, box, 1, contactSurface.volMap),\r\n      volTexMap: new Volume(Float32Array, this.numVoxels, box, 3, contactSurface.volTexMap),\r\n      atomMap: contactSurface.atomMap,\r\n      atomWeightMap: new Volume(Float32Array, this.numVoxels, box, 1, contactSurface.weightsMap),\r\n    };\r\n    return surface;\r\n  }\r\n}\r\n\r\nexport default ContactSurfaceGeometry;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Class for colored atom. Need for atom structure clusterization\r\n *\r\n * @param {Vector3} vCenter   Center of atom\r\n * @param {number}  radiusAt  Radius of atom\r\n */\r\nclass IsoSurfaceAtomColored {\r\n  constructor(vCenter, radiusAt) {\r\n    this.coord = new THREE.Vector3();\r\n    this.coord.copy(vCenter);\r\n    this.radius = radiusAt;\r\n    this.colorX = 0.99999;\r\n    this.colorY = 0.0;\r\n    this.colorZ = 0.0;\r\n    this.atomType = 0;\r\n    this.srcAtom = null;\r\n  }\r\n}\r\nexport default IsoSurfaceAtomColored;\r\n","import * as THREE from 'three';\r\nimport utils from '../../utils';\r\n\r\n// suppress some JSHint warnings\r\n/* jshint bitwise: false */\r\n\r\n/**\r\n * Build normals for isosurface, using atoms information\r\n *\r\n * @param {number} numAtoms     - Number of atoms in molecule\r\n * @param {Element} atoms      - Array of atoms\r\n * @param {Vector3} vBoxMin     - Bounding box min\r\n * @param {Vector3} vBoxMax     - Bounding box max\r\n * @param {number} probeRadius     - Normals for output\r\n *\r\n */\r\nclass IsosurfaceBuildNormals {\r\n  constructor(numAtoms, atoms, vBoxMin, vBoxMax, probeRadius) {\r\n    this._numAtoms = numAtoms;\r\n    this._atoms = atoms;\r\n    this._vBoxMin = new THREE.Vector3();\r\n    this._vBoxMax = new THREE.Vector3();\r\n    this._vBoxMin.copy(vBoxMin);\r\n    this._vBoxMax.copy(vBoxMax);\r\n    this._probeRadius = probeRadius;\r\n\r\n    this._atomsList = null;\r\n    this._voxelList = null;\r\n  }\r\n\r\n  createVoxels() {\r\n    let numAtomsRefs;\r\n    let rad;\r\n    const ATOM_VOXEL_REF_SCALE = 4.5;\r\n\r\n    const numAtoms = this._numAtoms | 0;\r\n    const atoms = this._atoms;\r\n    const dx = this._vBoxMax.x - this._vBoxMin.x;\r\n    const dy = this._vBoxMax.y - this._vBoxMin.y;\r\n    const dz = this._vBoxMax.z - this._vBoxMin.z;\r\n    let w = (dx < dy) ? dx : dy;\r\n    w = (dz < w) ? dz : w;\r\n    let maxRad = 0.0;\r\n    let aveRad = 0.0;\r\n\r\n    let i;\r\n    for (i = 0; i < numAtoms; i++) {\r\n      rad = (atoms[i].radius + this._probeRadius) * 2.0;\r\n      maxRad = (rad > maxRad) ? rad : maxRad;\r\n      aveRad += rad;\r\n    }\r\n    let numCells = Math.floor(w / maxRad);\r\n    if (numCells < 2) {\r\n      numCells = 2;\r\n    }\r\n    aveRad /= numAtoms;\r\n\r\n    this._numCells = numCells;\r\n    this._aveRad = aveRad;\r\n    this._maxRad = maxRad;\r\n\r\n    const side = numCells;\r\n    const side2 = numCells * numCells;\r\n    const side3 = numCells * numCells * numCells;\r\n\r\n    const xScale = this._xScale = 1.0 / (this._vBoxMax.x - this._vBoxMin.x);\r\n    const yScale = this._yScale = 1.0 / (this._vBoxMax.y - this._vBoxMin.y);\r\n    const zScale = this._zScale = 1.0 / (this._vBoxMax.z - this._vBoxMin.z);\r\n\r\n    // estimate number of individual atom refs in each voxel list\r\n    let maxAtomsRefs = 0;\r\n\r\n    const xNumVoxMult = xScale * numCells;\r\n    const yNumVoxMult = yScale * numCells;\r\n    const zNumVoxMult = zScale * numCells;\r\n\r\n    for (i = 0; i < numAtoms; i++) {\r\n      const radAffect = (atoms[i].radius + this._probeRadius) * ATOM_VOXEL_REF_SCALE;\r\n      const diaAffect = radAffect * 2.0;\r\n      let numVoxX = Math.floor(xNumVoxMult * diaAffect + 0.8);\r\n      let numVoxY = Math.floor(yNumVoxMult * diaAffect + 0.8);\r\n      let numVoxZ = Math.floor(zNumVoxMult * diaAffect + 0.8);\r\n      // avoid case numVox? == 0\r\n      // also use loop i <=\r\n      numVoxX++;\r\n      numVoxY++;\r\n      numVoxZ++;\r\n      maxAtomsRefs += numVoxX * numVoxY * numVoxZ;\r\n    } // for (i)\r\n    // maxAtomsRefs = numAtoms * MAX_ATOMS_IN_SINGLE_VOXEL;\r\n\r\n    this._voxelList = utils.allocateTyped(Int32Array, side3);\r\n    const atomsList = [];\r\n    atomsList.length = maxAtomsRefs;\r\n    if ((this._voxelList === null) || (atomsList === null)) {\r\n      return 0 - 1;\r\n    }\r\n    // init voxel list\r\n    for (i = 0; i < side3; i++) {\r\n      this._voxelList[i] = -1;\r\n    }\r\n    numAtomsRefs = 0;\r\n\r\n    // create voxel lists\r\n    for (i = 0; i < numAtoms; i++) {\r\n      // use multiplier 4 to locate this atom in different voxels\r\n      rad = (atoms[i].radius + this._probeRadius) * ATOM_VOXEL_REF_SCALE;\r\n      let xIndMin = Math.floor((atoms[i].coord.x - this._vBoxMin.x - rad) * numCells * xScale);\r\n      let yIndMin = Math.floor((atoms[i].coord.y - this._vBoxMin.y - rad) * numCells * yScale);\r\n      let zIndMin = Math.floor((atoms[i].coord.z - this._vBoxMin.z - rad) * numCells * zScale);\r\n      let xIndMax = Math.floor((atoms[i].coord.x - this._vBoxMin.x + rad) * numCells * xScale);\r\n      let yIndMax = Math.floor((atoms[i].coord.y - this._vBoxMin.y + rad) * numCells * yScale);\r\n      let zIndMax = Math.floor((atoms[i].coord.z - this._vBoxMin.z + rad) * numCells * zScale);\r\n\r\n      xIndMin = (xIndMin >= 0) ? xIndMin : 0;\r\n      yIndMin = (yIndMin >= 0) ? yIndMin : 0;\r\n      zIndMin = (zIndMin >= 0) ? zIndMin : 0;\r\n\r\n      xIndMax = (xIndMax < numCells) ? xIndMax : (numCells - 1);\r\n      yIndMax = (yIndMax < numCells) ? yIndMax : (numCells - 1);\r\n      zIndMax = (zIndMax < numCells) ? zIndMax : (numCells - 1);\r\n\r\n      for (let z = zIndMin; z <= zIndMax; z++) {\r\n        for (let y = yIndMin; y <= yIndMax; y++) {\r\n          for (let x = xIndMin; x <= xIndMax; x++) {\r\n            // add atom with index \"i\" to this voxel list\r\n            const indVoxel = x + y * side + z * side2;\r\n            // assert indVoxel >= 0\r\n            // assert indVoxel < side3\r\n\r\n            // add first\r\n            if (this._voxelList[indVoxel] < 0) {\r\n              atomsList[numAtomsRefs * 2 + 0] = i;\r\n              atomsList[numAtomsRefs * 2 + 1] = 0 - 1;\r\n              this._voxelList[indVoxel] = numAtomsRefs;\r\n              numAtomsRefs++;\r\n              // assert numAtomsRefs < maxAtomsRefs - 1\r\n              continue;\r\n            }\r\n            // insert into head of list\r\n            const indexNext = this._voxelList[indVoxel];\r\n            this._voxelList[indVoxel] = numAtomsRefs;\r\n            atomsList[numAtomsRefs * 2 + 0] = i;\r\n            atomsList[numAtomsRefs * 2 + 1] = indexNext;\r\n            numAtomsRefs++;\r\n          } // for (x)\r\n        } // for (y)\r\n      } // for (z)\r\n    } // for (i)\r\n\r\n    // convert Array to Int32Array\r\n    this._atomsList = Int32Array.from(atomsList);\r\n\r\n    return 0;\r\n  }\r\n\r\n  destroyVoxels() {\r\n    this._atomsList = null;\r\n    this._voxelList = null;\r\n\r\n    this._atoms = null;\r\n    this._vertices = null;\r\n    this._vBoxMin = null;\r\n    this._vBoxMax = null;\r\n  }\r\n\r\n  /**\r\n   * Enumerate all atoms affecting specified point\r\n   *\r\n   * @param {Vector3}    point    - point in 3D\r\n   * @param {func(atom)} process  - function to call for each atom\r\n   */\r\n  forEachRelatedAtom(point, process) {\r\n    // find corresponding voxel\r\n    const xInd = Math.floor((point.x - this._vBoxMin.x) * this._numCells * this._xScale);\r\n    const yInd = Math.floor((point.y - this._vBoxMin.y) * this._numCells * this._yScale);\r\n    const zInd = Math.floor((point.z - this._vBoxMin.z) * this._numCells * this._zScale);\r\n    const indVoxel = xInd + yInd * this._numCells + zInd * this._numCells * this._numCells;\r\n\r\n    // run through atoms affecting this voxel\r\n    const atoms = this._atoms;\r\n    for (let ref = this._voxelList[indVoxel]; ref >= 0; ref = this._atomsList[ref * 2 + 1]) {\r\n      const indexAtom = this._atomsList[ref * 2];\r\n      process(atoms[indexAtom]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get atom closest to specified point\r\n   *\r\n   * @param {Vector3} point  - point in 3D\r\n   *\r\n   * @returns {IsoSurfaceAtomColored} atom, or null if not found\r\n   */\r\n  getClosestAtom(point) {\r\n    let closest = null;\r\n    let minDist2 = Number.MAX_VALUE;\r\n\r\n    this.forEachRelatedAtom(point, (atom) => {\r\n      const dist2 = point.distanceToSquared(atom.coord);\r\n      if (dist2 < minDist2) {\r\n        minDist2 = dist2;\r\n        closest = atom;\r\n      }\r\n    });\r\n\r\n    return closest;\r\n  }\r\n\r\n  /**\r\n   * Build normals for isosurface, using atoms information\r\n   *\r\n   * @param {number} numVertices  - Number of vertices in final geometry (to render)\r\n   * @param {Vector3} vertices    - Geometry vertices (3d coordinates array)\r\n   * @param {Vector3} normals     - Normals for output\r\n   *\r\n   * @returns {number} 0, if success\r\n   */\r\n  buildNormals(numVertices, vertices, normals) {\r\n    const self = this;\r\n    let numCloseAtoms = 0;\r\n    let vx = 0;\r\n    let vy = 0;\r\n    let vz = 0;\r\n    let dist2;\r\n    let vNormalX = 0;\r\n    let vNormalY = 0;\r\n    let vNormalZ = 0;\r\n    let koef = 0;\r\n    let w = 0;\r\n    const r25 = 2.5;\r\n    const r01 = 0.1;\r\n\r\n    const maxRadAffect = this._aveRad * r25;\r\n    const maxRadAffect2 = maxRadAffect * maxRadAffect;\r\n    const expScale = -this._aveRad * r01;\r\n\r\n    // some stats\r\n    // numSlowAtoms = 0;\r\n\r\n    const gatherNormals = function (atom) {\r\n      const dx = vx - atom.coord.x;\r\n      const dy = vy - atom.coord.y;\r\n      const dz = vz - atom.coord.z;\r\n      dist2 = dx * dx + dy * dy + dz * dz;\r\n      if (dist2 > maxRadAffect2) {\r\n        return;\r\n      }\r\n\r\n      // get weight for gaussian smoothing\r\n      const rad = atom.radius + self._probeRadius;\r\n      koef = dist2 - (rad * rad);\r\n      if (koef < 0.0) {\r\n        koef = -koef;\r\n      }\r\n      w = Math.exp(expScale * koef);\r\n\r\n      vNormalX += dx * w;\r\n      vNormalY += dy * w;\r\n      vNormalZ += dz * w;\r\n      numCloseAtoms++;\r\n    };\r\n\r\n    let maxClosedAtoms = 0;\r\n    // process all vertices, one by one\r\n    for (let i = 0; i < numVertices; i++) {\r\n      vx = vertices[i].x;\r\n      vy = vertices[i].y;\r\n      vz = vertices[i].z;\r\n\r\n      numCloseAtoms = 0;\r\n      vNormalX = vNormalY = vNormalZ = 0.0;\r\n\r\n      this.forEachRelatedAtom(vertices[i], gatherNormals);\r\n\r\n      maxClosedAtoms = (numCloseAtoms > maxClosedAtoms) ? numCloseAtoms : maxClosedAtoms;\r\n\r\n      // normalize vNormal\r\n      dist2 = vNormalX * vNormalX + vNormalY * vNormalY + vNormalZ * vNormalZ;\r\n      if (numCloseAtoms > 0) {\r\n        koef = 1.0 / Math.sqrt(dist2);\r\n        vNormalX *= koef;\r\n        vNormalY *= koef;\r\n        vNormalZ *= koef;\r\n      }\r\n      normals[i].x = vNormalX;\r\n      normals[i].y = vNormalY;\r\n      normals[i].z = vNormalZ;\r\n    } // for (i) all vertices\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Build vertex colors for isosurface, using atoms information\r\n   *\r\n   * @param {number} numVertices  - Number of vertices in final geometry (to render)\r\n   * @param {Vector3} vertices    - Geometry vertices (3d coordinates array)\r\n   * @param {Vector3} colors                - Colors for output\r\n   * @param {number} radiusColorSmoothness  - Radius of smoothness sphere\r\n   *\r\n   * @returns {number} 0, if success\r\n   */\r\n  buildColors(numVertices, vertices, colors, radiusColorSmoothness) {\r\n    const self = this;\r\n    let vx = 0.0;\r\n    let vy = 0.0;\r\n    let vz = 0.0;\r\n    let koef = 0.0;\r\n    let w = 0.0;\r\n    const KOEF_ADD = 0.8;\r\n\r\n    const maxRadAffect = radiusColorSmoothness;\r\n    const maxRadAffect2 = maxRadAffect * maxRadAffect;\r\n\r\n    let colorsClose = [];\r\n    let weights = [];\r\n    let weightsSum = 0;\r\n\r\n    const gatherColors = function (atom) {\r\n      const dx = vx - atom.coord.x;\r\n      const dy = vy - atom.coord.y;\r\n      const dz = vz - atom.coord.z;\r\n      const dist2 = dx * dx + dy * dy + dz * dz;\r\n      if (dist2 > maxRadAffect2) {\r\n        return;\r\n      }\r\n\r\n      // get weight for gaussian smoothing\r\n      const rad = atom.radius + self._probeRadius;\r\n      koef = dist2 - (rad * rad);\r\n      if (koef < 0.0) {\r\n        koef = -koef;\r\n      }\r\n      w = 1.0 / (KOEF_ADD + koef);\r\n\r\n      colorsClose.push([atom.colorX, atom.colorY, atom.colorZ]);\r\n      weights.push(w); // save weights for use\r\n      weightsSum += w; // calc sum of weights fo further normalization\r\n    };\r\n\r\n    // process all vertices, one by one\r\n    for (let i = 0; i < numVertices; i++) {\r\n      vx = vertices[i].x;\r\n      vy = vertices[i].y;\r\n      vz = vertices[i].z;\r\n\r\n      colorsClose = [];\r\n      weights = [];\r\n      weightsSum = 0;\r\n\r\n      this.forEachRelatedAtom(vertices[i], gatherColors);\r\n\r\n      // normalized weighted sum of colors\r\n      for (let j = 0; j < colorsClose.length; ++j) {\r\n        const weightNormalized = weights[j] / weightsSum;\r\n        colors[i].x += colorsClose[j][0] * weightNormalized;\r\n        colors[i].y += colorsClose[j][1] * weightNormalized;\r\n        colors[i].z += colorsClose[j][2] * weightNormalized;\r\n      }\r\n    } // for (i) all vertices\r\n    return 0;\r\n  }\r\n}\r\nexport default IsosurfaceBuildNormals;\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Class for geometry (triangle mesh) representation\r\n *\r\n *\r\n * @param {number} maxNumVertices Maximum possible number of vertices in mesh\r\n * @param {number} maxNumTriangles Maximum possible number of triangles in mesh\r\n * @param {boolean} needVertexColors Obvious\r\n */\r\nclass IsoSurfaceGeo {\r\n  constructor(maxNumVertices, maxNumTriangles, needVertexColors) {\r\n    this._maxNumVertices = maxNumVertices;\r\n    this._maxNumTriangles = maxNumTriangles;\r\n    this._vertices = new Array(maxNumVertices);\r\n    this._normals = new Array(maxNumVertices);\r\n    this._colors = null;\r\n    if (needVertexColors) {\r\n      this._colors = new Array(maxNumVertices);\r\n    }\r\n    this._indices = new Array(maxNumTriangles * (1 + 2));\r\n    this._numVertices = 0;\r\n    this._numTriangles = 0;\r\n\r\n    let i;\r\n    for (i = 0; i < maxNumVertices; i++) {\r\n      this._vertices[i] = new THREE.Vector3();\r\n      this._normals[i] = new THREE.Vector3();\r\n    }\r\n    for (i = 0; i < maxNumTriangles * (1 + 2); i++) {\r\n      this._indices[i] = -1;\r\n    }\r\n    if (needVertexColors) {\r\n      for (i = 0; i < maxNumVertices; i++) {\r\n        this._colors[i] = new THREE.Vector3();\r\n      }\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this._vertices = null;\r\n    this._normals = null;\r\n    this._indices = null;\r\n  }\r\n}\r\nexport default IsoSurfaceGeo;\r\n","import * as THREE from 'three';\r\nimport IsoSurfaceGeometry from './IsoSurfaceGeometry';\r\nimport IsoSurfaceAtomColored from './IsoSurfaceAtomColored';\r\nimport IsosurfaceBuildNormals from './IsosurfaceBuildNormals';\r\nimport IsoSurfaceMarchCube from './IsoSurfaceMarchCube';\r\nimport IsoSurfaceGeo from './IsoSurfaceGeo';\r\nimport chem from '../../chem';\r\nimport utils from '../../utils';\r\n\r\nconst COLOR_SIZE = 3;\r\nconst HASH_SIZE = 32768;\r\nconst { Element } = chem;\r\n\r\n/**\r\n * This class implements 'quick' isosurface geometry generation algorithm.\r\n * @param spheresCount - number of atoms/spheres\r\n * @param opts - geometry specific options\r\n * @constructor\r\n */\r\n\r\nclass SSIsosurfaceGeometry extends IsoSurfaceGeometry {\r\n  _build() {\r\n    // convert geoOut into arrays of positions, indices, normals\r\n    this._innerBuild();\r\n    const geoOut = this.getGeo();\r\n    this.destroy();\r\n    this._fromGeo(geoOut);\r\n  }\r\n\r\n  _fromGeo(geoOut) {\r\n    let colors = null;\r\n    const positions = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    const normals = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    if (geoOut._colors !== null) {\r\n      colors = utils.allocateTyped(Float32Array, (1 + 2) * geoOut._numVertices);\r\n    }\r\n    const indices = utils.allocateTyped(Uint32Array, (1 + 2) * geoOut._numTriangles);\r\n\r\n    for (let i = 0, j = 0; i < geoOut._numVertices; i++) {\r\n      positions[j + 0] = (geoOut._vertices[i].x);\r\n      positions[j + 1] = (geoOut._vertices[i].y);\r\n      positions[j + 2] = (geoOut._vertices[i].z);\r\n      normals[j + 0] = geoOut._normals[i].x;\r\n      normals[j + 1] = geoOut._normals[i].y;\r\n      normals[j + 2] = geoOut._normals[i].z;\r\n      j += 3;\r\n    }\r\n    if (colors !== null) {\r\n      for (let i = 0, j = 0; i < geoOut._numVertices; i++, j += 3) {\r\n        colors[j + 0] = geoOut._colors[i].x;\r\n        colors[j + 1] = geoOut._colors[i].y;\r\n        colors[j + 2] = geoOut._colors[i].z;\r\n      }\r\n    }\r\n\r\n    const numTri3 = geoOut._numTriangles * (1 + 2);\r\n    for (let i = 0; i < numTri3; i++) {\r\n      indices[i] = geoOut._indices[i];\r\n    }\r\n\r\n    this.setIndex(new THREE.BufferAttribute(indices, 1));\r\n    this.setAttribute('position', new THREE.BufferAttribute(positions, 3));\r\n    this.setAttribute('normal', new THREE.BufferAttribute(normals, 3));\r\n    this.setAttribute('color', new THREE.BufferAttribute(colors, 3));\r\n    this.computeBoundingBox();\r\n    this.computeBoundingSphere();\r\n\r\n    geoOut.destroy();\r\n  }\r\n\r\n  convertToAtomsColored(packedArrays, atomsColored) {\r\n    const { atoms, colors } = packedArrays;\r\n    for (let i = 0, numAtoms = atoms.length; i < numAtoms; i++) {\r\n      const vCenter = atoms[i].position;\r\n      const { radius } = atoms[i].element;\r\n      atomsColored[i] = new IsoSurfaceAtomColored(vCenter, radius);\r\n      const nm = atoms[i].element.number;\r\n      atomsColored[i].atomType = this.getType(nm);\r\n      let cIdx = COLOR_SIZE * i;\r\n      atomsColored[i].colorX = colors[cIdx++];\r\n      atomsColored[i].colorY = colors[cIdx++];\r\n      atomsColored[i].colorZ = colors[cIdx];\r\n      atomsColored[i].srcAtom = atoms[i];\r\n    }\r\n  }\r\n\r\n  getGeo() {\r\n    return this.geoOut;\r\n  }\r\n\r\n  destroy() {\r\n    this.atoms = null;\r\n\r\n    this.hashLines = null;\r\n    this.hashEntries = null;\r\n  }\r\n\r\n  /**\r\n   * Calculates bounding box for array with spheres (atoms)\r\n   *\r\n   * @param {Object}  atoms      Atoms array\r\n   * @param {Vector3} vBoxMin    Bounding box min point\r\n   * @param {Vector3} vBoxMax    Bounding box max point\r\n   */\r\n  getBoundingBox(atoms, vBoxMin, vBoxMax) {\r\n    const bigNum = 10000000.0;\r\n\r\n    vBoxMin.x = vBoxMin.y = vBoxMin.z = bigNum;\r\n    vBoxMax.x = vBoxMax.y = vBoxMax.z = 0 - bigNum;\r\n\r\n    const probeRadius2 = this.probeRadius * this.atomRadiusScale;\r\n    let radMax = 0.0;\r\n    for (let i = 0, num = atoms.length; i < num; i++) {\r\n      const vCenter = atoms[i].coord;\r\n      const rad = atoms[i].radius + probeRadius2;\r\n      radMax = (rad > radMax) ? rad : radMax;\r\n      if (vCenter.x - rad < vBoxMin.x) {\r\n        vBoxMin.x = vCenter.x - rad;\r\n      }\r\n      if (vCenter.y - rad < vBoxMin.y) {\r\n        vBoxMin.y = vCenter.y - rad;\r\n      }\r\n      if (vCenter.z - rad < vBoxMin.z) {\r\n        vBoxMin.z = vCenter.z - rad;\r\n      }\r\n      if (vCenter.x + rad > vBoxMax.x) {\r\n        vBoxMax.x = vCenter.x + rad;\r\n      }\r\n      if (vCenter.y + rad > vBoxMax.y) {\r\n        vBoxMax.y = vCenter.y + rad;\r\n      }\r\n      if (vCenter.z + rad > vBoxMax.z) {\r\n        vBoxMax.z = vCenter.z + rad;\r\n      }\r\n    }\r\n    vBoxMin.x -= radMax;\r\n    vBoxMin.y -= radMax;\r\n    vBoxMin.z -= radMax;\r\n    vBoxMax.x += radMax;\r\n    vBoxMax.y += radMax;\r\n    vBoxMax.z += radMax;\r\n  }\r\n\r\n  /**\r\n   * Calculate (x,y,z) cordinate of the cell corner point\r\n   *\r\n   * @param {Vector3} vBoxMin Bounding box min point\r\n   * @param {Vector3} vBoxMax Bounding box max point\r\n   * @param {number} x Cell integer x coordinate\r\n   * @param {number} y Cell integer y coordinate\r\n   * @param {number} z Cell integer z coordinate\r\n   * @param {number} numPoints NUm points in cell on side\r\n   * @param {Vector3} vOut Output vector\r\n   */\r\n  getCornerCoord(vBoxMin, vBoxMax, x, y, z, numPoints, vOut) {\r\n    const invNP = 1.0 / (numPoints - 1.0);\r\n    const tx = x * invNP;\r\n    const ty = y * invNP;\r\n    const tz = z * invNP;\r\n\r\n    vOut.x = vBoxMin.x * (1.0 - tx) + vBoxMax.x * tx;\r\n    vOut.y = vBoxMin.y * (1.0 - ty) + vBoxMax.y * ty;\r\n    vOut.z = vBoxMin.z * (1.0 - tz) + vBoxMax.z * tz;\r\n  }\r\n\r\n  /**\r\n   * Calculate point of intersection of sphere surface\r\n   * and cell edge, given by [indexA, indexB] line\r\n   *\r\n   * @param {number} indexA Cell vertex index in [0..11]\r\n   * @param {number} indexB Cell vertex index in [0..11]\r\n   * @param {array}  sign   Sign array for all 8 vertices\r\n   * @param {object} cube   Cube\r\n   * @param {number} indexPointValue for value placement\r\n   * @param {Vector3} vOut  Point of intersection\r\n   */\r\n  buildEdgePoint(indexA, indexB, sign, cube, indexPointValue, vOut) {\r\n    if (sign[indexA] ^ sign[indexB]) {\r\n      const cTwentyFour = 24;\r\n      const t = (0 - cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexA])\r\n        / (cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexB]\r\n          - cube.pointsValuesLinear[indexPointValue + cTwentyFour + indexA]);\r\n      const xa = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 0];\r\n      const ya = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 1];\r\n      const za = cube.pointsValuesLinear[indexPointValue + indexA * (2 + 1) + 2];\r\n      const xb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 0];\r\n      const yb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 1];\r\n      const zb = cube.pointsValuesLinear[indexPointValue + indexB * (2 + 1) + 2];\r\n\r\n      vOut.x = xa * (1.0 - t) + xb * t;\r\n      vOut.y = ya * (1.0 - t) + yb * t;\r\n      vOut.z = za * (1.0 - t) + zb * t;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if triangle is visible (vertices are close to atoms included in visibility set)\r\n   *\r\n   * @param {Vector3} v0 Vertex #0\r\n   * @param {Vector3} v1 Vertex #1\r\n   * @param {Vector3} v2 Vertex #2\r\n   * @returns {boolean} true if triangle is visible\r\n   */\r\n  isTriangleVisible(v0, v1, v2) {\r\n    const a0 = this.voxelWorld.getClosestAtom(v0);\r\n    const a1 = this.voxelWorld.getClosestAtom(v1);\r\n    const a2 = this.voxelWorld.getClosestAtom(v2);\r\n    if (a0 === null || a1 === null || a2 === null\r\n      || a0.srcAtom === null || a1.srcAtom === null || a2.srcAtom === null) {\r\n      return false;\r\n    }\r\n\r\n    return this.visibilitySelector.includesAtom(a0.srcAtom)\r\n      && this.visibilitySelector.includesAtom(a1.srcAtom)\r\n      && this.visibilitySelector.includesAtom(a2.srcAtom);\r\n  }\r\n\r\n  /**\r\n   * Add triangle to result geometry\r\n   *\r\n   * @param {Vector3} v0 Vertex #0\r\n   * @param {Vector3} v1 Vertex #1\r\n   * @param {Vector3} v2 Vertex #2\r\n   * @returns {boolean} false if no more triangles can be added\r\n   */\r\n  addTriangle(v0, v1, v2) {\r\n    if (this.visibilitySelector && !this.isTriangleVisible(v0, v1, v2)) {\r\n      return true;\r\n    }\r\n\r\n    const geo = this.geoOut;\r\n\r\n    if (geo._numTriangles >= this.maxNumTriangles) {\r\n      return false;\r\n    }\r\n\r\n    // Add vertex with optimize\r\n    const indInGeo0 = this.addVertexToGeo(geo, v0);\r\n    const indInGeo1 = this.addVertexToGeo(geo, v1);\r\n    const indInGeo2 = this.addVertexToGeo(geo, v2);\r\n    if ((indInGeo0 | indInGeo1 | indInGeo2) < 0) {\r\n      return false;\r\n    }\r\n\r\n    const itr = 3 * geo._numTriangles;\r\n    geo._indices[itr + 0] = indInGeo0;\r\n    geo._indices[itr + 1] = indInGeo1;\r\n    geo._indices[itr + 2] = indInGeo2;\r\n    geo._numTriangles++;\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Build result geometry (triangle mesh) from marching cube cells\r\n   *\r\n   * @param {number} meshRes Marchnig cube vertex count on each side\r\n   * @param {Vector3} vBoxMin Bounding box point min\r\n   * @param {Vector3} vBoxMax Bounding box point max\r\n   * @param {number} corners float values array for each cube point\r\n   * @param {Vector3} vCellStep vector to next cube cell diagonal point\r\n   * @param {object} cube IsoSurfaceMarchCube object\r\n   * @returns {number} 0, if success (<0) is error\r\n   */\r\n  buildGeoFromCorners(meshRes, vBoxMin, vBoxMax, corners, vCellStep, cube) {\r\n    const arrSize = 12;\r\n    const cNumVerts = 8;\r\n    const numCells = meshRes - 1;\r\n    const side = meshRes;\r\n    const side2 = meshRes * meshRes;\r\n\r\n    const vaEdges = new Array(arrSize);\r\n    for (let i = 0; i < arrSize; i++) {\r\n      vaEdges[i] = new THREE.Vector3();\r\n    }\r\n    const sign = [];\r\n    for (let i = 0; i < cNumVerts; i++) {\r\n      sign[i] = 1.0;\r\n    }\r\n    const vCorner = new THREE.Vector3();\r\n    let indCell = 0;\r\n    let indY = 0;\r\n    for (let y = 0; y < numCells; y++, indY += side2) {\r\n      let indZ = 0;\r\n      for (let z = 0; z < numCells; z++, indZ += side) {\r\n        for (let x = 0; x < numCells; x++) {\r\n          if (!cube.hasIntersection[indCell]) {\r\n            // next cell\r\n            indCell++;\r\n            continue;\r\n          }\r\n          const bitsInside = cube.bitsInside[indCell];\r\n\r\n          this.getCornerCoord(vBoxMin, vBoxMax, x, y, z, meshRes, vCorner);\r\n\r\n          const indPointValues = indCell * (2 << (2 + 2));\r\n          for (let i = 0, j = 0; i < cNumVerts; i++) {\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.x;\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.y;\r\n            cube.pointsValuesLinear[indPointValues + j++] = vCorner.z;\r\n          }\r\n\r\n          cube.pointsValuesLinear[indPointValues + 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 2 * 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 5 * 3] += vCellStep.x;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3] += vCellStep.x;\r\n\r\n          cube.pointsValuesLinear[indPointValues + 2 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 3 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3 + 2] += vCellStep.z;\r\n          cube.pointsValuesLinear[indPointValues + 7 * 3 + 2] += vCellStep.z;\r\n\r\n          cube.pointsValuesLinear[indPointValues + 4 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 5 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 6 * 3 + 1] += vCellStep.y;\r\n          cube.pointsValuesLinear[indPointValues + 7 * 3 + 1] += vCellStep.y;\r\n\r\n          // now current cell has intersections (from -x to +x) on some cube edges\r\n          const indValues = indPointValues + 24;\r\n          for (let i = 0; i < cNumVerts; ++i) {\r\n            sign[i] = (cube.pointsValuesLinear[indValues + i] < 0.0) ? 1 : 0;\r\n          }\r\n\r\n          this.buildEdgePoint(0, 1, sign, cube, indPointValues, vaEdges[0]);\r\n          this.buildEdgePoint(1, 2, sign, cube, indPointValues, vaEdges[1]);\r\n          this.buildEdgePoint(2, 3, sign, cube, indPointValues, vaEdges[2]);\r\n          this.buildEdgePoint(3, 0, sign, cube, indPointValues, vaEdges[3]);\r\n\r\n          this.buildEdgePoint(4, 5, sign, cube, indPointValues, vaEdges[4]);\r\n          this.buildEdgePoint(5, 6, sign, cube, indPointValues, vaEdges[5]);\r\n          this.buildEdgePoint(6, 7, sign, cube, indPointValues, vaEdges[6]);\r\n          this.buildEdgePoint(7, 4, sign, cube, indPointValues, vaEdges[7]);\r\n\r\n          this.buildEdgePoint(0, 4, sign, cube, indPointValues, vaEdges[8]);\r\n          this.buildEdgePoint(1, 5, sign, cube, indPointValues, vaEdges[9]);\r\n          this.buildEdgePoint(2, 6, sign, cube, indPointValues, vaEdges[10]);\r\n          this.buildEdgePoint(3, 7, sign, cube, indPointValues, vaEdges[11]);\r\n\r\n          const offs = bitsInside * (2 << (1 + 2));\r\n          for (let numTri = 0, indTri = 0; numTri < (2 + 2 + 2); numTri++, indTri += 3) {\r\n            // s_triIndicesMarchCube is external array, defined in mold_ind.js\r\n            const i0 = cube.striIndicesMarchCube[offs + indTri];\r\n            if (i0 < 0) {\r\n              break;\r\n            }\r\n            const i1 = cube.striIndicesMarchCube[offs + indTri + 1];\r\n            const i2 = cube.striIndicesMarchCube[offs + indTri + 2];\r\n\r\n            if (!this.addTriangle(vaEdges[i0], vaEdges[i1], vaEdges[i2])) {\r\n              return 0 - 2;\r\n            }\r\n          } // for numTri\r\n\r\n          // next cell (cube)\r\n          indCell++;\r\n        } // for (x)\r\n      } // for (z)\r\n    } // for (y)\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Returns number of cell with intersection with at least one sphere.\r\n   * Using this number, we can estimate required number of vertices\r\n   * and triangles to build result mesh.\r\n   *\r\n   * @param {number} side Number of points in cube voxels\r\n   * @param {number} numCells Number of cells in cube voxels (per direction)\r\n   * @param {array} corners Array of float values for cube corner points\r\n   * @param {object} cube IsoSurfaceMarchCube object\r\n   * @returns {number} numIntersectedCells\r\n   */\r\n  getNumIntersectedCells(side, numCells, corners, cube) {\r\n    const side2 = side * side;\r\n    const cNumVerts = 8;\r\n    let numIntersectedCells = 0;\r\n\r\n    let indCell = 0;\r\n    let indY = 0;\r\n    for (let y = 0; y < numCells; y++, indY += side2) {\r\n      let indZ = 0;\r\n      for (let z = 0; z < numCells; z++, indZ += side) {\r\n        for (let x = 0; x < numCells; x++) {\r\n          const cubeValuesIndex = indCell * (2 << (2 + 2)) + 24;\r\n          const indCorner = x + indZ + indY;\r\n\r\n          cube.pointsValuesLinear[cubeValuesIndex] = corners[indCorner];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 1] = corners[indCorner + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 2] = corners[indCorner + side + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 3] = corners[indCorner + side];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 4] = corners[side2 + indCorner];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 5] = corners[side2 + indCorner + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 6] = corners[side2 + indCorner + side + 1];\r\n          cube.pointsValuesLinear[cubeValuesIndex + 7] = corners[side2 + indCorner + side];\r\n\r\n          // check read exception\r\n          // assert(side2 + indCorner + side + 1 < side3);\r\n\r\n          // get bit flags inside\r\n          let bitsInside = 0;\r\n          for (let i = 0; i < cNumVerts; ++i) {\r\n            if (cube.pointsValuesLinear[cubeValuesIndex + i] < 0.0) {\r\n              bitsInside |= (1 << i);\r\n            }\r\n          }\r\n\r\n          if ((bitsInside === 0) || (bitsInside === ((1 << cNumVerts) - 1))) {\r\n            cube.hasIntersection[indCell] = false;\r\n          } else {\r\n            cube.hasIntersection[indCell] = true;\r\n            numIntersectedCells++;\r\n          }\r\n          cube.bitsInside[indCell] = bitsInside;\r\n          // next cell\r\n          indCell++;\r\n        } // for (x)\r\n      } // for (z)\r\n    } // for (y)\r\n    return numIntersectedCells;\r\n  }\r\n\r\n  getType(letter) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const atomT = [0, 0, 1, 1, 2, 6, 3, 6, 4, 6, 5, 6, 6, 0, 7, 3, 8, 2, 9, 6, 10, 6, 11, 6, 12, 6, 13, 6, 14, 6, 15, 4,\r\n      16, 5, 17, 6, 18, 6, 19, 6, 20, 6, 21, 6, 22, 6, 23, 6, 24, 6, 25, 6, 26, 6, 27, 6, 28, 6, 29, 6, 30, 6, 31, 6,\r\n      32, 6, 33, 6, 34, 6, 35, 6, 36, 6, 37, 6, 38, 6, 39, 6, 40, 6, 41, 6, 42, 6, 43, 6, 44, 6, 45, 6, 46, 6, 47, 6,\r\n      48, 6, 49, 6, 50, 6, 51, 6, 52, 6, 53, 6, 54, 6, 55, 6, 56, 6, 57, 6, 58, 6, 59, 6, 60, 6, 61, 6, 62, 6, 63, 6,\r\n      64, 6, 65, 6, 66, 6, 67, 6, 68, 6, 69, 6, 70, 6, 71, 6, 72, 6, 73, 6, 74, 6, 75, 6, 76, 6, 77, 6, 78, 6, 79, 6,\r\n      80, 6, 81, 6, 82, 6, 83, 6, 84, 6, 85, 6, 86, 6, 87, 6, 88, 6, 89, 6, 90, 6, 91, 6, 92, 6, 93, 6, 94, 6, 95, 6,\r\n      96, 6, 97, 6, 98, 6, 99, 6, 100, 6, 101, 6, 102, 6, 103, 6, 104, 6, 105, 6, 106, 6, 107, 6, 108, 6, 109, 6];\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    if (letter < 1 || letter > atomT.length / 2\r\n      || (Object.keys(Element.ByAtomicNumber).length * 2) !== atomT.length) {\r\n      throw new Error('atomT.length  should be equal Element.ByAtomicNumber.length * 2');\r\n    }\r\n    return atomT[letter * 2];\r\n  }\r\n\r\n  /**\r\n   * Calculate values for marching cube grid points\r\n   * positive values are outside sphere, negative - is inside\r\n   *\r\n   * @param {array} corners array of float values\r\n   * @param {number} side Number of point in cube in 1 dimennsion\r\n   * @param {Vector3} vBoxMin Bounding box min point\r\n   * @param {Vector3} vBoxMax Bounding box max point\r\n   * @param {array} atoms Array of input atoms\r\n   * @param {number} probeRad radius for atom probing\r\n   */\r\n  calculateGridCorners(corners, side, vBoxMin, vBoxMax, atoms, probeRad) {\r\n    const side2 = side * side;\r\n    const side3 = side2 * side;\r\n    const vCorner = new THREE.Vector3();\r\n    const vDif = new THREE.Vector3();\r\n    /* eslint-disable no-magic-numbers */\r\n    const aLot = +1.0e12;\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    for (let i = 0; i < side3; i++) {\r\n      corners[i] = aLot; // to large value\r\n    }\r\n\r\n    const xScale = (side - 1) / (vBoxMax.x - vBoxMin.x);\r\n    const yScale = (side - 1) / (vBoxMax.y - vBoxMin.y);\r\n    const zScale = (side - 1) / (vBoxMax.z - vBoxMin.z);\r\n\r\n    for (let s = 0, numAtoms = atoms.length; s < numAtoms; s++) {\r\n      const atom = atoms[s];\r\n      const radius = atom.radius + probeRad;\r\n\r\n      const fx = ((atom.coord.x - radius) - vBoxMin.x) * xScale;\r\n      const fy = ((atom.coord.y - radius) - vBoxMin.y) * yScale;\r\n      const fz = ((atom.coord.z - radius) - vBoxMin.z) * zScale;\r\n\r\n      const indXMin = Math.floor(fx);\r\n      const indYMin = Math.floor(fy);\r\n      const indZMin = Math.floor(fz);\r\n\r\n      let indXMax = Math.floor(((atom.coord.x + radius) - vBoxMin.x) * xScale);\r\n      let indYMax = Math.floor(((atom.coord.y + radius) - vBoxMin.y) * yScale);\r\n      let indZMax = Math.floor(((atom.coord.z + radius) - vBoxMin.z) * zScale);\r\n\r\n      indXMax++;\r\n      indYMax++;\r\n      indZMax++;\r\n      indXMax = (indXMax <= (side - 1)) ? indXMax : (side - 1);\r\n      indYMax = (indYMax <= (side - 1)) ? indYMax : (side - 1);\r\n      indZMax = (indZMax <= (side - 1)) ? indZMax : (side - 1);\r\n\r\n      for (let y = indYMin; y <= indYMax; y++) {\r\n        const indY = y * side2;\r\n        for (let z = indZMin; z <= indZMax; z++) {\r\n          const indZ = z * side;\r\n          for (let x = indXMin; x <= indXMax; x++) {\r\n            const ind = indY + indZ + x;\r\n            this.getCornerCoord(vBoxMin, vBoxMax, x, y, z, side, vCorner);\r\n            vDif.x = vCorner.x - atom.coord.x;\r\n            vDif.y = vCorner.y - atom.coord.y;\r\n            vDif.z = vCorner.z - atom.coord.z;\r\n            const distToSphere = Math.sqrt(vDif.x * vDif.x + vDif.y * vDif.y + vDif.z * vDif.z);\r\n            // val: < 0, if inside sphere\r\n            // val: > 0, if outside sphere\r\n            const val = distToSphere - radius;\r\n            if (val < corners[ind]) {\r\n              corners[ind] = val;\r\n            }\r\n          } // for (x)\r\n        } // for (z)\r\n      } // for (y)\r\n    } // for (s)\r\n  }\r\n\r\n  /**\r\n   * Create memory pool for vertex hash management\r\n   *\r\n   * @param {number} maxNumVertices Maximum possible number of vertices (that will be build)\r\n   * @param {number} maxNumTriangles Maximum possible number of triangles (that will be build)\r\n   * @returns {number} 0, if success. (<0) is non memory\r\n   */\r\n  createVertexHash(maxNumVertices, maxNumTriangles) {\r\n    this.hashLines = utils.allocateTyped(Int32Array, HASH_SIZE * 2);\r\n    if (this.hashLines === null) {\r\n      return 0 - 1;\r\n    }\r\n    for (let i = 0, j = 0; i < HASH_SIZE; i++) {\r\n      this.hashLines[j++] = 0; // num vertices in this hash line\r\n      this.hashLines[j++] = 0 - 1; // index of the first entry\r\n    }\r\n\r\n    this.maxNumVertices = maxNumVertices;\r\n    this.maxNumTriangles = maxNumTriangles;\r\n\r\n    this.numHashEtriesAllocated = maxNumVertices;\r\n    this.hashEntries = utils.allocateTyped(Int32Array, 2 * this.numHashEtriesAllocated);\r\n    if (this.hashEntries === null) {\r\n      return 0 - 1;\r\n    }\r\n    for (let i = 0, j = 0; i < this.numHashEtriesAllocated; i++) {\r\n      this.hashEntries[j++] = 0 - 1; // index of vertex\r\n      this.hashEntries[j++] = 0 - 1; // next hash entry index\r\n    }\r\n    this.numHashEntryIndex = 0;\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Allocate and return new hash entry. Just check possible amount.\r\n   *\r\n   * @returns {number} index of hash entry, that can be used for geometry add vertex functionality\r\n   */\r\n  getNewHashEntry() {\r\n    if (this.numHashEntryIndex < this.numHashEtriesAllocated) {\r\n      const i = this.numHashEntryIndex;\r\n      this.numHashEntryIndex++;\r\n      return i;\r\n    }\r\n    return 0 - 1;\r\n  }\r\n\r\n  /**\r\n   * Add vertex to geometry structure\r\n   * using vertex hash table to quickly check, is this vertex already exist in geometry\r\n   *\r\n   * @param {object} geoOut Geometry to build\r\n   * @param {Vector3} vAdd Vertex to add\r\n   * @returns {number} index of added (or existing) vertex in geometry.\r\n   */\r\n  addVertexToGeo(geoOut, vAdd) {\r\n    let entry;\r\n    const oneHynberes = 0.01;\r\n    const n815851 = 815851;\r\n    const n37633 = 37633;\r\n    const n2453543 = 2453543;\r\n    const r106 = 1.0e-6;\r\n\r\n    const hashResolution = this.marCubeResoultion << 2;\r\n    const v = new THREE.Vector3();\r\n    const ix = Math.floor(hashResolution * (vAdd.x - this.vBoxMin.x) / (this.vBoxMax.x + oneHynberes - this.vBoxMin.x));\r\n    const iy = Math.floor(hashResolution * (vAdd.y - this.vBoxMin.y) / (this.vBoxMax.y + oneHynberes - this.vBoxMin.y));\r\n    const iz = Math.floor(hashResolution * (vAdd.z - this.vBoxMin.z) / (this.vBoxMax.z + oneHynberes - this.vBoxMin.z));\r\n    let iHash = ix * n815851 + iz * n37633 + iy * n2453543;\r\n    iHash &= (HASH_SIZE - 1);\r\n    const hLineIndex = iHash + iHash;\r\n\r\n    // search vertex via hash\r\n    // search in hash list\r\n    if (this.vBoxMin !== null && this.vBoxMax !== null) {\r\n      for (entry = this.hashLines[hLineIndex + 1]; entry >= 0; entry = this.hashEntries[entry * 2 + 1]) {\r\n        const ind = this.hashEntries[entry * 2 + 0]; // vertex index\r\n        v.copy(geoOut._vertices[ind]);\r\n        v.x -= vAdd.x;\r\n        v.y -= vAdd.y;\r\n        v.z -= vAdd.z;\r\n        const dot2 = v.x * v.x + v.y * v.y + v.z * v.z;\r\n        if (dot2 < r106) {\r\n          return ind;\r\n        } // if (found)\r\n      } // for (entry)\r\n    } // search\r\n\r\n    // add new vertex to geometry\r\n    if (geoOut._numVertices >= this.maxNumVertices) {\r\n      return 0 - 1;\r\n    }\r\n\r\n    const iVertAdd = geoOut._numVertices;\r\n    geoOut._vertices[iVertAdd].copy(vAdd);\r\n\r\n    // add to hash\r\n    if (this.vBoxMin !== null && this.vBoxMax !== null) {\r\n      entry = this.getNewHashEntry();\r\n      if (entry < 0) {\r\n        return 0 - 1;\r\n      }\r\n      const entryFirst = this.hashLines[hLineIndex + 1];\r\n      this.hashLines[hLineIndex + 1] = entry;\r\n      this.hashEntries[entry * 2 + 0] = iVertAdd;\r\n      this.hashEntries[entry * 2 + 1] = entryFirst;\r\n\r\n      this.hashLines[hLineIndex + 0]++; // num vertices in line ++\r\n    }\r\n    geoOut._numVertices++;\r\n    return iVertAdd;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {number} side some placeholder description\r\n   * @param {number} probeSphereRadius some placeholder description\r\n   * @param {object} vBoxMin some placeholder description\r\n   * @param {object} vBoxMax some placeholder description\r\n   * @param {object} geoOut some placeholder description\r\n   * @param {object} corners some placeholder description\r\n   * @returns {number} always 0\r\n   */\r\n  modifyExcludedFromGeo(\r\n    side,\r\n    probeSphereRadius,\r\n    vBoxMin,\r\n    vBoxMax,\r\n    geoOut,\r\n    corners,\r\n  ) {\r\n    let ind;\r\n    let distToSphere;\r\n    let distToBorder;\r\n    const r11 = 1.1;\r\n\r\n    function innerBlockWorkAround() {\r\n      if (distToBorder > 0.0) {\r\n        // point is inside probe sphere\r\n        if (corners[ind] < 0.0) {\r\n          corners[ind] = distToBorder; // was inside surface, now is oustide ( > 0)\r\n        }\r\n        if (distToBorder > corners[ind]) {\r\n          corners[ind] = distToBorder; // find positive maximum\r\n        }\r\n      } else if (distToBorder > corners[ind]) { // point is outside sphere\r\n        corners[ind] = distToBorder; // find negative maximum\r\n      }\r\n    }\r\n\r\n    const side2 = side * side;\r\n    const xScale = (side - 1) / (vBoxMax.x - vBoxMin.x);\r\n    const yScale = (side - 1) / (vBoxMax.y - vBoxMin.y);\r\n    const zScale = (side - 1) / (vBoxMax.z - vBoxMin.z);\r\n\r\n    const probeSpRad2 = (probeSphereRadius * 2) * (probeSphereRadius * 2);\r\n    const sideInv = 1.0 / (side - 1);\r\n\r\n    for (let i = 0; i < geoOut._numVertices; i++) {\r\n      const vCenter = geoOut._vertices[i];\r\n\r\n      const radEst = probeSphereRadius * r11;\r\n\r\n      let indXMin = Math.floor(((vCenter.x - radEst) - vBoxMin.x) * xScale);\r\n      let indYMin = Math.floor(((vCenter.y - radEst) - vBoxMin.y) * yScale);\r\n      let indZMin = Math.floor(((vCenter.z - radEst) - vBoxMin.z) * zScale);\r\n\r\n      let indXMax = Math.floor(((vCenter.x + radEst) - vBoxMin.x) * xScale);\r\n      let indYMax = Math.floor(((vCenter.y + radEst) - vBoxMin.y) * yScale);\r\n      let indZMax = Math.floor(((vCenter.z + radEst) - vBoxMin.z) * zScale);\r\n\r\n      indXMin = (indXMin >= 0) ? indXMin : 0;\r\n      indYMin = (indYMin >= 0) ? indYMin : 0;\r\n      indZMin = (indZMin >= 0) ? indZMin : 0;\r\n      indXMax = (indXMax <= (side - 1)) ? indXMax : (side - 1);\r\n      indYMax = (indYMax <= (side - 1)) ? indYMax : (side - 1);\r\n      indZMax = (indZMax <= (side - 1)) ? indZMax : (side - 1);\r\n\r\n      for (let iy = indYMin; iy <= indYMax; iy++) {\r\n        const indY = iy * side2;\r\n        for (let iz = indZMin; iz <= indZMax; iz++) {\r\n          const indZ = iz * side;\r\n          for (let ix = indXMin; ix <= indXMax; ix++) {\r\n            ind = indY + indZ + ix;\r\n            // getCornerCoord(vBoxMin, vBoxMax, ix, iy, iz, side, &vCorner);\r\n            let t = ix * sideInv;\r\n            const xCorner = vBoxMin.x * (1.0 - t) + vBoxMax.x * t;\r\n            t = iy * sideInv;\r\n            const yCorner = vBoxMin.y * (1.0 - t) + vBoxMax.y * t;\r\n            t = iz * sideInv;\r\n            const zCorner = vBoxMin.z * (1.0 - t) + vBoxMax.z * t;\r\n\r\n            const dx = xCorner - vCenter.x;\r\n            const dy = yCorner - vCenter.y;\r\n            const dz = zCorner - vCenter.z;\r\n            const dist2 = dx * dx + dy * dy + dz * dz;\r\n            if (dist2 < probeSpRad2) {\r\n              distToSphere = Math.sqrt(dist2);\r\n              distToBorder = -(distToSphere - probeSphereRadius);\r\n              innerBlockWorkAround();\r\n            } // if (dist from corner point to sphere center more 2 radiuses)\r\n          } // for (ix)\r\n        } // for (iz)\r\n      } // for (iy)\r\n    } // for (i) all geo vertices\r\n    return 0;\r\n  }\r\n\r\n  _innerBuild() {\r\n    let ok;\r\n    const expandFactor = 1.2;\r\n\r\n    // performance test\r\n    // this.performanceTest();\r\n\r\n    // Create temporary atoms (but colored)\r\n    const packedArrays = {\r\n      posRad: this._posRad,\r\n      colors: this._colors,\r\n      atoms: this._opts.atoms,\r\n    };\r\n    this.complex = this._opts.parent;\r\n    this.atoms = packedArrays.atoms;\r\n    this.meshResolution = this._opts.gridSpacing;\r\n    this.atomRadiusScale = this._opts.radScale;\r\n    this.colorMode = this._opts.colorMode;\r\n    this.probeRadius = this._opts.probeRadius;\r\n    this.useVertexColors = true;\r\n    this.excludeProbe = this._opts.excludeProbe;\r\n    this.visibilitySelector = this._opts.visibilitySelector;\r\n\r\n    this.geoOut = null;\r\n\r\n    this.hashLines = null;\r\n    this.hashEntries = null;\r\n    this.numHashEtriesAllocated = 0;\r\n    this.numHashEntryIndex = 0;\r\n    this.maxNumVertices = 0;\r\n    this.maxNumTriangles = 0;\r\n\r\n    const atomsColored = new Array(this.atoms.length);\r\n    this.convertToAtomsColored(packedArrays, atomsColored);\r\n\r\n    // find bbox for spheres scene\r\n    const vBoxMin = this.vBoxMin = new THREE.Vector3();\r\n    const vBoxMax = this.vBoxMax = new THREE.Vector3();\r\n    this.getBoundingBox(atomsColored, vBoxMin, vBoxMax);\r\n\r\n    const marCubeResoultion = this.marCubeResoultion = this.meshResolution * (2 + 2);\r\n\r\n    // build grid corners for Marching cube algorithm\r\n    const side = marCubeResoultion;\r\n    const side2 = side * side;\r\n    const side3 = side2 * side;\r\n    const corners = utils.allocateTyped(Float32Array, side3);\r\n    const rProbeRadius = this.probeRadius * this.atomRadiusScale;\r\n\r\n    this.calculateGridCorners(corners, side, vBoxMin, vBoxMax, atomsColored, rProbeRadius);\r\n\r\n    const numCells = marCubeResoultion - 1;\r\n    const cube = new IsoSurfaceMarchCube();\r\n    ok = cube.create(numCells);\r\n    if (ok < 0) {\r\n      return ok;\r\n    }\r\n    // copy corners to cells\r\n    const vCellStep = new THREE.Vector3();\r\n    vCellStep.x = (vBoxMax.x - vBoxMin.x) / numCells;\r\n    vCellStep.y = (vBoxMax.y - vBoxMin.y) / numCells;\r\n    vCellStep.z = (vBoxMax.z - vBoxMin.z) / numCells;\r\n\r\n    let numIntersectedCellsEstim = this.getNumIntersectedCells(side, numCells, corners, cube);\r\n    let maxNumVertices = Math.floor(numIntersectedCellsEstim * expandFactor);\r\n    let maxNumTriangles = Math.floor(numIntersectedCellsEstim * expandFactor * 2);\r\n\r\n    this.geoOut = new IsoSurfaceGeo(maxNumVertices, maxNumTriangles, this.useVertexColors);\r\n\r\n    ok = this.createVertexHash(maxNumVertices, maxNumTriangles);\r\n    if (ok < 0) {\r\n      return ok;\r\n    }\r\n\r\n    // build voxel world (used to check triangle-to-atom tie and to calculate normals and colors)\r\n    let probeRadForNormalsColors = rProbeRadius;\r\n    if (this.excludeProbe) {\r\n      probeRadForNormalsColors = 0.01;\r\n    }\r\n    this.voxelWorld = new IsosurfaceBuildNormals(\r\n      atomsColored.length,\r\n      atomsColored,\r\n      vBoxMin,\r\n      vBoxMax,\r\n      probeRadForNormalsColors,\r\n    );\r\n    this.voxelWorld.createVoxels();\r\n\r\n    ok = this.buildGeoFromCorners(marCubeResoultion, vBoxMin, vBoxMax, corners, vCellStep, cube);\r\n    if (this.excludeProbe) {\r\n      // using 3d mesh (geoOut) as a surface points\r\n      // move probe sphere and try to minimuze corners values\r\n      this.modifyExcludedFromGeo(side, rProbeRadius, vBoxMin, vBoxMax, this.geoOut, corners);\r\n\r\n      // delete old builded geo\r\n      this.geoOut._vertices = null;\r\n      this.geoOut._colors = null;\r\n      this.geoOut._indices = null;\r\n      this.geoOut._normals = null;\r\n      this.geoOut._numVertices = 0;\r\n      this.geoOut._numTriangles = 0;\r\n      this.geoOut = null;\r\n\r\n      // estimage geo vertices budget again\r\n      numIntersectedCellsEstim = this.getNumIntersectedCells(side, numCells, corners, cube);\r\n      maxNumVertices = Math.floor(numIntersectedCellsEstim * expandFactor);\r\n      maxNumTriangles = Math.floor(numIntersectedCellsEstim * expandFactor * 2);\r\n\r\n      // creates empty new geometry\r\n      this.geoOut = new IsoSurfaceGeo(maxNumVertices, maxNumTriangles, this.useVertexColors);\r\n      ok = this.createVertexHash(maxNumVertices, maxNumTriangles);\r\n      if (ok < 0) {\r\n        return ok;\r\n      }\r\n      // build vertices and triangles from corners values\r\n      ok = this.buildGeoFromCorners(side, vBoxMin, vBoxMax, corners, vCellStep, cube);\r\n    }\r\n\r\n    // build vertex normals\r\n    this.voxelWorld.buildNormals(this.geoOut._vertices.length, this.geoOut._vertices, this.geoOut._normals);\r\n    // More value : more smooth color mixing\r\n    // value about 0.7: very rough colors borders\r\n    let radiusColorSmoothness = 6.5;\r\n    if (this.excludeProbe) {\r\n      radiusColorSmoothness -= 1.5;\r\n    }\r\n    if (this.useVertexColors) {\r\n      this.voxelWorld.buildColors(\r\n        this.geoOut._vertices.length,\r\n        this.geoOut._vertices,\r\n        this.geoOut._colors,\r\n        radiusColorSmoothness,\r\n      );\r\n    }\r\n    this.voxelWorld.destroyVoxels();\r\n    this.voxelWorld = null;\r\n\r\n    // remove objects\r\n    cube.destroy();\r\n\r\n    return ok;\r\n  }\r\n}\r\n\r\n// All code below must be erased from every device and each developer's memory\r\n\r\nexport default SSIsosurfaceGeometry;\r\n","import * as THREE from 'three';\r\nimport EventDispatcher from '../../utils/EventDispatcher';\r\n\r\nfunction createLabel(fieldTxt, className) {\r\n  const text = document.createElement('div');\r\n  text.className = className;\r\n\r\n  if (typeof fieldTxt === 'string') {\r\n    const spanText = document.createElement('span');\r\n    spanText.style.fontSize = '150%';\r\n    const strings = fieldTxt.split('\\n');\r\n\r\n    for (let i = 0, n = strings.length; i < n; ++i) {\r\n      const spanNodeP = document.createElement('span');\r\n      const spanNodeText = document.createTextNode(strings[i]);\r\n      spanNodeP.appendChild(spanNodeText);\r\n      spanText.appendChild(spanNodeP);\r\n      if (i < n - 1) {\r\n        spanText.appendChild(document.createElement('br'));\r\n      }\r\n    }\r\n\r\n    text.appendChild(spanText);\r\n  } else {\r\n    text.appendChild(fieldTxt);\r\n  }\r\n  text.worldPos = new THREE.Vector3();\r\n  return text;\r\n}\r\nclass LabelsGeometry extends EventDispatcher {\r\n  constructor(instanceCount, opts) {\r\n    super();\r\n    this._opts = opts;\r\n    this.items = [];\r\n    this.needsUpdate = false;\r\n\r\n    let xTranslation = -50;\r\n    let yTranslation = -50;\r\n    switch (opts.horizontalAlign) {\r\n      case 'left':\r\n        xTranslation = 0;\r\n        break;\r\n      case 'right':\r\n        xTranslation = -100;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    switch (opts.verticalAlign) {\r\n      case 'top':\r\n        yTranslation = -100;\r\n        break;\r\n      case 'bottom':\r\n        yTranslation = 0;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const deltaPos = new THREE.Vector3(opts.dx || 0, opts.dy || 0, opts.dz || 0);\r\n    this.userData = {\r\n      translation: `translate(${xTranslation}%, ${yTranslation}%)`,\r\n      offset: deltaPos,\r\n    };\r\n  }\r\n\r\n  setItem(itemIdx, itemPos, fieldTxt) {\r\n    const opts = this._opts;\r\n    const text = this.items[itemIdx] || createLabel(fieldTxt, 'label');\r\n\r\n    text.worldPos.copy(itemPos);\r\n    text.style.textAlign = opts.horizontalAlign;\r\n    text.style.verticalAlign = opts.verticalAlign;\r\n    this.items[itemIdx] = text;\r\n  }\r\n\r\n  setColor(itemIdx, fColor, bColor) {\r\n    const text = this.items[itemIdx];\r\n    text.opts = {\r\n      color: fColor,\r\n      background: bColor,\r\n    };\r\n  }\r\n\r\n  startUpdate() {\r\n    return true;\r\n  }\r\n\r\n  finishUpdate() {\r\n    this.needsUpdate = true;\r\n    this.dispatchEvent({ type: 'update' });\r\n  }\r\n\r\n  finalize() {\r\n    this.finishUpdate();\r\n  }\r\n\r\n  // unimplemented functions\r\n  raycast() {\r\n  }\r\n\r\n  setOpacity() {\r\n\r\n  }\r\n\r\n  getSubset() {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default LabelsGeometry;\r\n","import InstancedSpheresGeometry from './InstancedSpheresGeometry';\r\nimport SimpleSpheresGeometry from './SimpleSpheresGeometry';\r\nimport Simple2CCylindersGeometry from './Simple2CCylindersGeometry';\r\nimport Instanced2CCylindersGeometry from './Instanced2CCylindersGeometry';\r\nimport ExtrudedObjectsGeometry from './ExtrudedObjectsGeometry';\r\nimport ChunkedLinesGeometry from './ChunkedLinesGeometry';\r\nimport TwoColorLinesGeometry from './TwoColorLinesGeometry';\r\nimport CrossGeometry from './CrossGeometry';\r\nimport QuickSurfGeometry from './QuickSurfGeometry';\r\nimport ContactSurfaceGeometry from './ContactSurfaceGeometry';\r\nimport SSIsosurfaceGeometry from './SSIsosurfaceGeometry';\r\nimport LabelsGeometry from './LabelsGeometry';\r\n\r\nexport default {\r\n  InstancedSpheresGeometry,\r\n  SimpleSpheresGeometry,\r\n  Simple2CCylindersGeometry,\r\n  Instanced2CCylindersGeometry,\r\n  ExtrudedObjectsGeometry,\r\n  ChunkedLinesGeometry,\r\n  TwoColorLinesGeometry,\r\n  CrossGeometry,\r\n  QuickSurfGeometry,\r\n  ContactSurfaceGeometry,\r\n  SSIsosurfaceGeometry,\r\n  LabelsGeometry,\r\n};\r\n","export default {\r\n\r\n  precision: 'mediump',\r\n\r\n  /**\r\n   *\r\n   * @param {THREE.WebGLRenderer} renderer\r\n   */\r\n  init(renderer) {\r\n    this.precision = renderer.capabilities.getMaxPrecision('highp');\r\n  },\r\n};\r\n","import * as THREE from 'three';\r\n\r\nconst noiseWidth = 4;\r\nconst noiseHeight = 4;\r\nconst _noiseData = new Uint8Array([\r\n  24, 52, 0, 255, 254, 145, 0, 255, 122, 0, 0, 255, 7, 170, 0, 255,\r\n  34, 214, 0, 255, 173, 8, 0, 255, 86, 249, 0, 255, 160, 4, 0, 255,\r\n  226, 46, 0, 255, 224, 211, 0, 255, 3, 157, 0, 255, 174, 247, 0, 255,\r\n  12, 182, 0, 255, 220, 216, 0, 255, 1, 109, 0, 255, 253, 154, 0, 255,\r\n]);\r\nconst _noiseWrapS = THREE.RepeatWrapping;\r\nconst _noiseWrapT = THREE.RepeatWrapping;\r\nconst _noiseMinFilter = THREE.NearestFilter;\r\nconst _noiseMagFilter = THREE.NearestFilter;\r\nconst _noiseMapping = THREE.UVMapping;\r\nconst noiseTexture = new THREE.DataTexture(\r\n  _noiseData,\r\n  noiseWidth,\r\n  noiseHeight,\r\n  THREE.RGBAFormat,\r\n  THREE.UnsignedByteType,\r\n  _noiseMapping,\r\n  _noiseWrapS,\r\n  _noiseWrapT,\r\n  _noiseMagFilter,\r\n  _noiseMinFilter,\r\n  1,\r\n);\r\nnoiseTexture.needsUpdate = true;\r\n\r\nexport default {\r\n  noiseWidth,\r\n  noiseHeight,\r\n  noiseTexture,\r\n};\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './Uber.vert';\r\nimport fragmentShader from './Uber.frag';\r\nimport capabilities from '../capabilities';\r\nimport noise from '../noiseTexture';\r\n\r\n// Length of _samplesKernel is used in Uber.frag\r\n// If you want to change length of _samplesKernel, please, remember change it in Uber.frag too.\r\n// You can easy find places for replace using word:_samplesKernel\r\nconst _samplesKernel = [\r\n  new THREE.Vector2(-0.541978, 0.840393),\r\n  new THREE.Vector2(0.125533, -0.992089),\r\n  new THREE.Vector2(0.374329, 0.927296),\r\n  new THREE.Vector2(-0.105475, 0.994422),\r\n];\r\n\r\nconst defaultUniforms = THREE.UniformsUtils.merge([\r\n\r\n  THREE.UniformsLib.fog,\r\n  THREE.UniformsLib.lights,\r\n\r\n  {\r\n    // are updated automatically by three.js (see THREE.ShaderLib.common)\r\n    diffuse: { value: new THREE.Color(0xeeeeee) },\r\n    opacity: { value: 1.0 },\r\n\r\n    specular: { type: 'c', value: new THREE.Color(0x111111) },\r\n    shininess: { type: 'f', value: 30 },\r\n    fixedColor: { type: 'c', value: new THREE.Color(0xffffff) },\r\n    zOffset: { type: 'f', value: 0.0 },\r\n    zClipValue: { type: 'f', value: 0.0 },\r\n    clipPlaneValue: { type: 'f', value: 0.0 },\r\n    nearPlaneValue: { type: 'f', value: -0.5 },\r\n    invModelViewMatrix: { type: '4fv', value: new THREE.Matrix4() },\r\n    world2colorMatrix: { type: '4fv', value: new THREE.Matrix4() },\r\n    dashedLineSize: { type: 'f', value: 0.1 },\r\n    dashedLinePeriod: { type: 'f', value: 0.2 },\r\n    projMatrixInv: { type: '4fv', value: new THREE.Matrix4() },\r\n    viewport: { type: 'v2', value: new THREE.Vector2() },\r\n    lineWidth: { type: 'f', value: 2.0 },\r\n    // default value must be the same as settings\r\n    fogAlpha: { type: 'f', value: 1.0 },\r\n    samplesKernel: { type: 'v2v', value: null },\r\n    noiseTex: { type: 't', value: null },\r\n    noiseTexelSize: { type: 'v2', value: null },\r\n    srcTexelSize: { type: 'v2', value: null },\r\n  },\r\n\r\n]);\r\n\r\nconst uberOptionNames = [\r\n  'shininess',\r\n  'opacity',\r\n  'zOffset',\r\n  'diffuse',\r\n  'specular',\r\n  'fixedColor',\r\n  'zClipCoef',\r\n  'zClipValue',\r\n  'clipPlaneValue',\r\n  'world2colorMatrix',\r\n  'dashedLineSize',\r\n  'dashedLinePeriod',\r\n  'projMatrixInv',\r\n  'viewport',\r\n  'lineWidth',\r\n  'fogAlpha',\r\n  'samplesKernel',\r\n  'noiseTex',\r\n  'noiseTexelSize',\r\n  'srcTexelSize',\r\n];\r\n\r\n// properties that convert to uniforms\r\nconst uberOptions = {\r\n  diffuse: new THREE.Color(0xffffff), // used in phong lighting\r\n  specular: new THREE.Color(0x111111), // used in phong lighting\r\n  shininess: 30, // used in phong lighting\r\n  opacity: 1, // set mesh opacity\r\n  fixedColor: new THREE.Color(0xffffff), // color to override (see OVERRIDE_COLOR)\r\n  zOffset: 0.0, // used fo zsprites (see SPHERE_SPRITE CYLINDER_SPRITE)\r\n  zClipCoef: 2.0, // use for Surfs clipping (mesh param, isn't used in shader)  FIXME move to representation param\r\n  zClipValue: 0.0, //  value to clip Surfs in shader  (see ZCLIP)\r\n  clipPlaneValue: 0.0, // value to clip scene globally (see CLIPPLANE)\r\n  world2colorMatrix: new THREE.Matrix4(),\r\n  dashedLineSize: 0.1,\r\n  dashedLinePeriod: 0.3,\r\n  projMatrixInv: new THREE.Matrix4(),\r\n  viewport: new THREE.Vector2(800, 600),\r\n  lineWidth: 2.0,\r\n  fogAlpha: 1.0,\r\n  samplesKernel: _samplesKernel,\r\n  noiseTex: noise.noiseTexture,\r\n  noiseTexelSize: new THREE.Vector2(1.0 / noise.noiseWidth, 1.0 / noise.noiseHeight),\r\n  srcTexelSize: new THREE.Vector2(1.0 / 800.0, 1.0 / 600.0),\r\n  copy(source) {\r\n    this.diffuse.copy(source.diffuse);\r\n    this.specular.copy(source.specular);\r\n    this.shininess = source.shininess;\r\n    this.opacity = source.opacity;\r\n    this.fixedColor.copy(source.fixedColor);\r\n    this.zOffset = source.zOffset;\r\n    this.zClipCoef = source.zClipCoef;\r\n    this.zClipValue = source.zClipValue;\r\n    this.clipPlaneValue = source.clipPlaneValue;\r\n    this.world2colorMatrix.copy(source.world2colorMatrix);\r\n    this.dashedLineSize = source.dashedLineSize;\r\n    this.dashedLinePeriod = source.dashedLinePeriod;\r\n    this.projMatrixInv = source.projMatrixInv;\r\n    this.viewport = source.viewport;\r\n    this.lineWidth = source.lineWidth; // used for thick lines only\r\n    this.toonShading = source.toonShading;\r\n    this.fogAlpha = source.fogAlpha;\r\n    this.samplesKernel = source.samplesKernel;\r\n    this.noiseTex = source.noiseTex;\r\n    this.noiseTexelSize = source.noiseTexelSize;\r\n    this.srcTexelSize = source.srcTexelSize;\r\n  },\r\n};\r\n\r\nclass UberMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    // add fog\r\n    this.fog = true;\r\n    // used for instanced geometry\r\n    this.instancedPos = false;\r\n    this.instancedMatrix = false;\r\n    // atoms and links color\r\n    this.attrColor = false;\r\n    // second link color for cylinders\r\n    this.attrColor2 = false;\r\n    //\r\n    this.attrAlphaColor = false;\r\n    // overrides color for all vertices (used in selection)\r\n    this.overrideColor = false;\r\n    // zsrpites\r\n    this.sphereSprite = false;\r\n    this.cylinderSprite = false;\r\n    // clip Surfs individually\r\n    this.zClip = false;\r\n    // clip scene with global clip plane\r\n    this.clipPlane = false;\r\n    // enable fake (chess-like) opacity\r\n    this.fakeOpacity = false;\r\n    // render only depth, don't take care about the pixel color (used for transparency depth prepass)\r\n    this.prepassTransparancy = false;\r\n    // used to render pixel positions\r\n    this.colorFromPos = false;\r\n    // used to render shadowmap\r\n    this.shadowmap = false;\r\n    // used to describe shadowmap type\r\n    this.shadowmapType = 'random';\r\n    // used to render pixel view deph\r\n    this.colorFromDepth = false;\r\n    // mark that rendering is for orthographic camera\r\n    this.orthoCam = false;\r\n    // used to render dashed line\r\n    this.dashedLine = false;\r\n    // mark as transparent\r\n    this.transparent = true;\r\n    // mark as thick lines\r\n    this.thickLine = false;\r\n    // makes fog begin transparency (required for transparent background)\r\n    this.fogTransparent = false;\r\n    // used to render surface normals to G buffer for ssao effect\r\n    this.normalsToGBuffer = false;\r\n    // used for toon material\r\n    this.toonShading = false;\r\n\r\n    // uber options of \"root\" materials are inherited from single uber-options object that resides in prototype\r\n    this.uberOptions = Object.create(UberMaterial.prototype.uberOptions);\r\n\r\n    // set default values\r\n    super.setValues({\r\n      uniforms: THREE.UniformsUtils.clone(defaultUniforms),\r\n      vertexShader: this.precisionString() + vertexShader,\r\n      fragmentShader: this.precisionString() + fragmentShader,\r\n      lights: true,\r\n      fog: true,\r\n      side: THREE.DoubleSide,\r\n    });\r\n\r\n    this.setValues(params);\r\n  }\r\n\r\n  precisionString() {\r\n    const { precision } = capabilities;\r\n    const str = `precision ${precision} float;\\n`\r\n      + `precision ${precision} int;\\n\\n`;\r\n    return str;\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n\r\n    this.fragmentShader = source.fragmentShader;\r\n    this.vertexShader = source.vertexShader;\r\n\r\n    this.uniforms = THREE.UniformsUtils.clone(source.uniforms);\r\n    this.defines = { ...source.defines };\r\n    this.extensions = source.extensions;\r\n\r\n    this.fog = source.fog;\r\n    this.instancedPos = source.instancedPos;\r\n    this.instancedMatrix = source.instancedMatrix;\r\n    this.attrColor = source.attrColor;\r\n    this.attrColor2 = source.attrColor2;\r\n    this.attrAlphaColor = source.attrAlphaColor;\r\n    this.overrideColor = source.overrideColor;\r\n    this.sphereSprite = source.sphereSprite;\r\n    this.cylinderSprite = source.cylinderSprite;\r\n    this.zClip = source.zClip;\r\n    this.clipPlane = source.clipPlane;\r\n    this.fakeOpacity = source.fakeOpacity;\r\n    this.colorFromPos = source.colorFromPos;\r\n    this.shadowmap = source.shadowmap;\r\n    this.shadowmapType = source.shadowmapType;\r\n    this.colorFromDepth = source.colorFromDepth;\r\n    this.orthoCam = source.orthoCam;\r\n    this.prepassTransparancy = source.prepassTransparancy;\r\n    this.dashedLine = source.dashedLine;\r\n    this.thickLine = source.thickLine;\r\n    this.fogTransparent = source.fogTransparent;\r\n    this.normalsToGBuffer = source.normalsToGBuffer;\r\n    this.toonShading = source.toonShading;\r\n\r\n    this.uberOptions.copy(source.uberOptions);\r\n\r\n    return this;\r\n  }\r\n\r\n  // create copy of this material\r\n  // its options are prototyped after this material's options\r\n  createInstance() {\r\n    const inst = new UberMaterial();\r\n    inst.copy(this);\r\n    inst.uberOptions = Object.create(this.uberOptions);\r\n    return inst;\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n\r\n    const defines = {};\r\n    const extensions = {};\r\n\r\n    if (this.fog) {\r\n      defines.USE_FOG = 1;\r\n    }\r\n    if (this.instancedPos) {\r\n      defines.INSTANCED_POS = 1;\r\n    }\r\n    if (this.instancedMatrix) {\r\n      defines.INSTANCED_MATRIX = 1;\r\n    }\r\n    if (this.attrColor) {\r\n      defines.ATTR_COLOR = 1;\r\n    }\r\n    if (this.attrColor2) {\r\n      defines.ATTR_COLOR2 = 1;\r\n    }\r\n    if (this.attrAlphaColor) {\r\n      defines.ATTR_ALPHA_COLOR = 1;\r\n    }\r\n    if (this.overrideColor) {\r\n      defines.OVERRIDE_COLOR = 1;\r\n    }\r\n    if (this.sphereSprite) {\r\n      defines.SPHERE_SPRITE = 1;\r\n      extensions.fragDepth = true;\r\n    }\r\n    if (this.cylinderSprite) {\r\n      defines.CYLINDER_SPRITE = 1;\r\n      extensions.fragDepth = true;\r\n    }\r\n    if (this.zClip) {\r\n      defines.ZCLIP = 1;\r\n    }\r\n    if (this.clipPlane) {\r\n      defines.CLIP_PLANE = 1;\r\n    }\r\n    if (this.fakeOpacity) {\r\n      defines.FAKE_OPACITY = 1;\r\n    }\r\n    if (this.lights) {\r\n      defines.USE_LIGHTS = 1;\r\n    }\r\n    if (this.colorFromPos) {\r\n      defines.COLOR_FROM_POS = 1;\r\n    }\r\n    if (this.shadowmap) {\r\n      defines.SHADOWMAP = 1;\r\n      if (this.shadowmapType === 'pcf') {\r\n        defines.SHADOWMAP_PCF_SHARP = 1;\r\n      } else if (this.shadowmapType === 'random') {\r\n        defines.SHADOWMAP_PCF_RAND = 1;\r\n      } else {\r\n        defines.SHADOWMAP_BASIC = 1;\r\n      }\r\n    }\r\n    if (this.colorFromDepth) {\r\n      defines.COLOR_FROM_DEPTH = 1;\r\n    }\r\n    if (this.orthoCam) {\r\n      defines.ORTHOGRAPHIC_CAMERA = 1;\r\n    }\r\n    if (this.prepassTransparancy) {\r\n      defines.PREPASS_TRANSP = 1;\r\n    }\r\n    if (this.dashedLine) {\r\n      defines.DASHED_LINE = 1;\r\n    }\r\n    if (this.thickLine) {\r\n      defines.THICK_LINE = 1;\r\n    }\r\n    if (this.fogTransparent) {\r\n      defines.FOG_TRANSPARENT = 1;\r\n    }\r\n    if (this.normalsToGBuffer) {\r\n      extensions.drawBuffers = true;\r\n      defines.NORMALS_TO_G_BUFFER = 1;\r\n    }\r\n    if (this.toonShading) {\r\n      defines.TOON_SHADING = 1;\r\n    }\r\n    // set dependent values\r\n    this.defines = defines;\r\n    this.extensions = extensions;\r\n  }\r\n\r\n  setUberOptions(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    for (const key in values) {\r\n      if (!values.hasOwnProperty(key)) {\r\n        continue;\r\n      }\r\n\r\n      if (this.uberOptions[key] instanceof THREE.Color) {\r\n        this.uberOptions[key] = values[key].clone();\r\n      } else {\r\n        this.uberOptions[key] = values[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  clone(shallow) {\r\n    if (!shallow) {\r\n      return super.clone();\r\n    }\r\n    return this.createInstance();\r\n  }\r\n\r\n  updateUniforms() {\r\n    const self = this;\r\n\r\n    uberOptionNames.forEach((p) => {\r\n      if (self.uniforms.hasOwnProperty(p)) {\r\n        if (self.uberOptions[p] instanceof THREE.Color\r\n              || self.uberOptions[p] instanceof THREE.Matrix4) {\r\n          self.uniforms[p].value = self.uberOptions[p].clone();\r\n        } else {\r\n          self.uniforms[p].value = self.uberOptions[p];\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nUberMaterial.prototype.uberOptions = uberOptions;\r\n\r\nexport default UberMaterial;\r\n","import UberMaterial from '../shaders/UberMaterial';\r\n\r\nexport default function (SuperClass) {\r\n  class NewObjectType extends SuperClass {\r\n    constructor(...rest) {\r\n      super(...rest);\r\n      this.onBeforeRender = NewObjectType.prototype.onBeforeRender;\r\n    }\r\n\r\n    onBeforeRender(renderer, scene, camera, geometry, material, group) {\r\n      this._onBeforeRender(renderer, scene, camera, geometry, material, group);\r\n      this._update();\r\n    }\r\n\r\n    _onBeforeRender() {\r\n    }\r\n\r\n    _update() {\r\n      const { material } = this;\r\n      if (!material) {\r\n        return;\r\n      }\r\n\r\n      if (material instanceof UberMaterial) {\r\n        material.updateUniforms();\r\n      }\r\n    }\r\n  }\r\n\r\n  return NewObjectType;\r\n}\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass ZSpriteMesh extends Mesh {\r\n  constructor(...rest) {\r\n    super(...rest);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n\r\n  _onBeforeRender(renderer, scene, camera, _geometry, _material, _group) {\r\n    Mesh.prototype._onBeforeRender.call(this, renderer, scene, camera);\r\n    const { material } = this;\r\n    if (!material) {\r\n      return;\r\n    }\r\n\r\n    if (material.uniforms.invModelViewMatrix) {\r\n      // NOTE: update of modelViewMatrix inside threejs is done after onBeforeRender call,\r\n      // so we have to do it manually in that place\r\n      this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\r\n      // get inverse matrix\r\n      material.uniforms.invModelViewMatrix.value.copy(this.modelViewMatrix).invert();\r\n      material.uniforms.nearPlaneValue.value = camera.near;\r\n      material.uniformsNeedUpdate = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ZSpriteMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass ZClippedMesh extends Mesh {\r\n  constructor(geometry, material) {\r\n    super(geometry, material);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n\r\n  static _mvLength = new THREE.Vector3();\r\n\r\n  static _center = new THREE.Vector3();\r\n\r\n  static _modelView = new THREE.Matrix4();\r\n\r\n  _onBeforeRender(renderer, scene, camera) {\r\n    Mesh.prototype._onBeforeRender.call(this, renderer, scene, camera);\r\n\r\n    const geo = this.geometry;\r\n    const { material } = this;\r\n    if (!geo.zClip || !material.uberOptions) {\r\n      return;\r\n    }\r\n\r\n    const zClipCoef = 0.5;\r\n\r\n    const modelView = ZClippedMesh._modelView;\r\n    const mvLength = ZClippedMesh._mvLength;\r\n    const center = ZClippedMesh._center;\r\n\r\n    modelView.multiplyMatrices(this.matrixWorld, camera.matrixWorldInverse);\r\n    const s = mvLength.setFromMatrixColumn(modelView, 0).length();\r\n    center.copy(geo.boundingSphere.center);\r\n\r\n    this.localToWorld(center);\r\n    material.uberOptions.zClipValue = camera.position.z - center.z\r\n      - s * (zClipCoef * geo.boundingSphere.radius);\r\n  }\r\n}\r\n\r\nexport default ZClippedMesh;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport CSS2DObject from '../CSS2DObject';\r\nimport utils from '../../utils';\r\n\r\nclass TextMesh extends THREE.Group {\r\n  constructor(geometry, _material) {\r\n    super();\r\n    this.geometry = geometry;\r\n\r\n    const self = this;\r\n    self.initialized = false;\r\n    this.geometry.addEventListener('update', () => {\r\n      self.update();\r\n    });\r\n  }\r\n\r\n  init() {\r\n    const { children } = this;\r\n    for (let i = children.length - 1; i >= 0; --i) {\r\n      this.remove(children[i]);\r\n    }\r\n\r\n    const { items, userData } = this.geometry;\r\n    for (let i = 0, n = items.length; i < n; ++i) {\r\n      const srcItem = items[i];\r\n      if (!srcItem) {\r\n        continue;\r\n      }\r\n      const item = utils.shallowCloneNode(srcItem);\r\n      const label = new CSS2DObject(item);\r\n      label.userData = _.clone(userData);\r\n      const el = label.getElement();\r\n      el.style.visibility = 'visible';\r\n      label.source = srcItem;\r\n      this.add(label);\r\n    }\r\n    this.initialized = true;\r\n  }\r\n\r\n  update() {\r\n    const geo = this.geometry;\r\n    if (!geo.needsUpdate) {\r\n      return;\r\n    }\r\n    const { children } = this;\r\n    if (!this.initialized) {\r\n      this.init();\r\n    }\r\n\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      const child = children[i];\r\n      const item = child.source;\r\n      child.position.copy(item.worldPos);\r\n      child.userData.color = item.opts.color;\r\n      child.userData.background = item.opts.background;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TextMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass SimpleMesh extends Mesh {\r\n  constructor(geometry, material) {\r\n    super(geometry, material);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n}\r\n\r\nexport default SimpleMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\nconst _viewport = new THREE.Vector2();\r\n\r\nclass ThickLineMesh extends Mesh {\r\n  _onBeforeRender(renderer, scene, camera, _geometry, _material, _group) {\r\n    const { material } = this;\r\n    if (!material.uberOptions) {\r\n      return;\r\n    }\r\n\r\n    material.uberOptions.projMatrixInv.copy(camera.projectionMatrix).invert();\r\n    renderer.getSize(_viewport);\r\n    material.uberOptions.viewport.set(_viewport.width, _viewport.height);\r\n  }\r\n}\r\n\r\nexport default ThickLineMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\n\r\nconst Mesh = UberObject(THREE.Mesh);\r\n\r\nclass InstancedMesh extends Mesh {\r\n  constructor(...rest) {\r\n    super(...rest);\r\n    this.castShadow = true;\r\n    this.receiveShadow = true;\r\n  }\r\n}\r\n\r\nexport default InstancedMesh;\r\n","import * as THREE from 'three';\r\nimport UberObject from './UberObject';\r\nimport ZSpriteMesh from './ZSpriteMesh';\r\nimport ZClippedMesh from './ZClippedMesh';\r\nimport TextMesh from './TextMesh';\r\nimport SimpleMesh from './SimpleMesh';\r\nimport ThickLineMesh from './ThickLineMesh';\r\nimport InstancedMesh from './InstancedMesh';\r\n\r\nexport default {\r\n  ZClipped: ZClippedMesh,\r\n  ZSprite: ZSpriteMesh,\r\n  Text: TextMesh,\r\n  Line: UberObject(THREE.Line),\r\n  LineSegments: UberObject(THREE.LineSegments),\r\n  Mesh: SimpleMesh,\r\n  ThickLineMesh,\r\n  Instanced: InstancedMesh,\r\n};\r\n","import geometries from '../geometries/geometries';\r\nimport meshes from './meshes';\r\nimport ThickLinesGeometry from '../geometries/ThickLinesGeometry';\r\n\r\nfunction setMatParams(params, uniforms) {\r\n  return function (material) {\r\n    material.setValues(params);\r\n    material.setUberOptions(uniforms);\r\n  };\r\n}\r\n\r\nfunction _createInstancedCylinders(useZSprites, openEnded) {\r\n  function Geometry(a, b) {\r\n    return new geometries.Instanced2CCylindersGeometry(a, b, useZSprites, openEnded);\r\n  }\r\n  return {\r\n    Geometry,\r\n    Object: useZSprites ? meshes.ZSprite : meshes.Instanced,\r\n    initMaterial: setMatParams({\r\n      instancedMatrix: true,\r\n      attrColor: true,\r\n      attrColor2: true,\r\n      attrAlphaColor: true,\r\n      cylinderSprite: useZSprites,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createLineSegmentsGeoTriplet(geo, renderParams) {\r\n  const thickLines = geo.prototype instanceof ThickLinesGeometry;\r\n  const lineWidth = renderParams.lineWidth || 0;\r\n  return {\r\n    Geometry: geo,\r\n    Object: thickLines ? meshes.ThickLineMesh : meshes.LineSegments,\r\n    initMaterial: setMatParams({\r\n      lights: false,\r\n      attrColor: true,\r\n      attrAlphaColor: true,\r\n      thickLine: thickLines,\r\n    }, {\r\n      lineWidth,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createSimpleGeoTriplet(geoClass) {\r\n  return {\r\n    Geometry: geoClass,\r\n    Object: meshes.Mesh,\r\n    initMaterial: setMatParams({\r\n      attrColor: true,\r\n      attrAlphaColor: true,\r\n    }),\r\n  };\r\n}\r\n\r\nfunction _createIsoSurfaceGeoTriplet(geoClass, caps, settings, renderParams) {\r\n  const surfaceOpts = {\r\n    wireframe: !!renderParams.wireframe,\r\n    fakeOpacity: settings.now.isoSurfaceFakeOpacity,\r\n    zClip: renderParams.zClip,\r\n  };\r\n  return {\r\n    Geometry: geoClass,\r\n    Object: meshes.ZClipped,\r\n    initMaterial: setMatParams({\r\n      attrColor: true,\r\n      attrAlphaColor: false,\r\n      wireframe: surfaceOpts.wireframe,\r\n      fakeOpacity: surfaceOpts.fakeOpacity,\r\n      zClip: surfaceOpts.zClip,\r\n    }),\r\n  };\r\n}\r\n\r\nclass MeshCreator {\r\n  static createSpheres(caps, settings) {\r\n    const useZSprites = settings.now.zSprites;\r\n    function Geometry(a, b) {\r\n      return new geometries.InstancedSpheresGeometry(a, b, useZSprites);\r\n    }\r\n    return {\r\n      Geometry,\r\n      Object: useZSprites ? meshes.ZSprite : meshes.Instanced,\r\n      initMaterial: setMatParams({\r\n        instancedPos: true,\r\n        attrColor: true,\r\n        attrAlphaColor: true,\r\n        sphereSprite: useZSprites,\r\n      }),\r\n    };\r\n  }\r\n\r\n  static create2CClosedCylinders(_caps, _settings) {\r\n    return _createInstancedCylinders(false, false);\r\n  }\r\n\r\n  static create2CCylinders(caps, settings) {\r\n    return _createInstancedCylinders(settings.now.zSprites, true);\r\n  }\r\n\r\n  static create2CLines(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.TwoColorLinesGeometry, renderParams);\r\n  }\r\n\r\n  static createCrosses(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.CrossGeometry, renderParams);\r\n  }\r\n\r\n  static createExtrudedChains(_caps, _settings) {\r\n    return _createSimpleGeoTriplet(geometries.ExtrudedObjectsGeometry);\r\n  }\r\n\r\n  static createChunkedLines(_caps, _settings, renderParams) {\r\n    return _createLineSegmentsGeoTriplet(geometries.ChunkedLinesGeometry, renderParams);\r\n  }\r\n\r\n  static createQuickSurface(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.QuickSurfGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createContactSurface(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.ContactSurfaceGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createSASSES(caps, settings, renderParams) {\r\n    return _createIsoSurfaceGeoTriplet(geometries.SSIsosurfaceGeometry, caps, settings, renderParams);\r\n  }\r\n\r\n  static createLabels(_caps, _settings) {\r\n    return {\r\n      Geometry: geometries.LabelsGeometry,\r\n      Object: meshes.Text,\r\n      initMaterial() {\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nexport default MeshCreator;\r\n","import * as THREE from 'three';\r\nimport gfxutils from '../gfxutils';\r\n\r\nclass TransformGroup extends THREE.Object3D {\r\n  static _inverseMatrix = new THREE.Matrix4();\r\n\r\n  static _ray = new THREE.Ray();\r\n\r\n  constructor(geometry, geoParams, material, transforms) {\r\n    super();\r\n    this._geometry = geometry;\r\n    this._geoParams = geoParams;\r\n    const mat = material.createInstance();\r\n    geoParams.initMaterial(mat);\r\n    this._material = mat;\r\n    this._transforms = transforms.length > 0 ? transforms : [new THREE.Matrix4()];\r\n    const meshes = this._createMeshes(geometry);\r\n    for (let i = 0, n = meshes.length; i < n; ++i) {\r\n      this.add(meshes[i]);\r\n    }\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const ray = TransformGroup._ray;\r\n    const inverseMatrix = TransformGroup._inverseMatrix;\r\n    const { children } = this;\r\n    ray.copy(raycaster.ray);\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      const child = children[i];\r\n\r\n      if (!gfxutils.belongToSelectLayers(child)) {\r\n        continue;\r\n      }\r\n\r\n      child.updateMatrixWorld();\r\n      const mtx = child.matrixWorld;\r\n      inverseMatrix.copy(mtx).invert();\r\n      raycaster.ray.copy(ray).applyMatrix4(inverseMatrix);\r\n      const childIntersects = [];\r\n      this._geometry.raycast(raycaster, childIntersects);\r\n\r\n      for (let j = 0, ciCount = childIntersects.length; j < ciCount; ++j) {\r\n        const inters = childIntersects[j];\r\n        if (inters.point) {\r\n          inters.point.applyMatrix4(mtx);\r\n          inters.distance = ray.origin.distanceTo(inters.point);\r\n        }\r\n        inters.object = child;\r\n        intersects[intersects.length] = inters;\r\n      }\r\n    }\r\n    raycaster.ray.copy(ray);\r\n  }\r\n\r\n  getSubset(chunkIndices) {\r\n    const geos = this._geometry.getSubset(chunkIndices);\r\n    const subset = [];\r\n    let subIdx = 0;\r\n\r\n    for (let i = 0, n = geos.length; i < n; ++i) {\r\n      const meshes = this._createMeshes(geos[i]);\r\n      for (let j = 0, meshCnt = meshes.length; j < meshCnt; ++j) {\r\n        subset[subIdx++] = meshes[j];\r\n      }\r\n    }\r\n\r\n    return subset;\r\n  }\r\n\r\n  _createMeshes(geometry) {\r\n    const transforms = this._transforms;\r\n    const Mesh = this._geoParams.Object;\r\n    const material = this._material;\r\n    const meshes = [];\r\n    for (let i = 0, n = transforms.length; i < n; ++i) {\r\n      const mesh = new Mesh(geometry, material);\r\n      mesh.applyMatrix4(transforms[i]);\r\n      meshes[i] = mesh;\r\n    }\r\n\r\n    return meshes;\r\n  }\r\n}\r\n\r\nexport default TransformGroup;\r\n","import RCGroup from '../../RCGroup';\r\nimport TransformGroup from '../../meshes/TransformGroup';\r\n\r\nfunction wrapper(Name, args) {\r\n  const params = [Name].concat(args);\r\n  return Name.bind(...params);\r\n}\r\n\r\nclass ChemGroup extends RCGroup {\r\n  constructor(geoParams, selection, colorer, mode, transforms, polyComplexity, material) {\r\n    super();\r\n    if (this.constructor === ChemGroup) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    this._selection = selection;\r\n    this._mode = mode;\r\n    this._colorer = colorer;\r\n    this._chunksIdc = selection.chunks;\r\n    this._polyComplexity = polyComplexity;\r\n    this._geo = new (wrapper(geoParams.Geometry, this._makeGeoArgs()))();\r\n    this._mesh = new TransformGroup(this._geo, geoParams, material, transforms);\r\n    this.add(this._mesh);\r\n    this._build();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    throw new Error('ChemGroup subclass must override _makeGeoArgs() method');\r\n  }\r\n\r\n  /**\r\n   * Builds subset geometry by ATOMS index list\r\n   *\r\n   * @param {Number} mask - Representation mask\r\n   * @param {Boolean} innerOnly - if true returns inner bonds only - without halves\r\n   * @returns {Array} Subset geometry\r\n   */\r\n  getSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : false;\r\n    const chunksList = this._calcChunksList(mask, innerOnly);\r\n    if (chunksList.length === 0) {\r\n      return [];\r\n    }\r\n    return this._mesh.getSubset(chunksList);\r\n  }\r\n\r\n  _changeSubsetOpacity(mask, value, innerOnly) {\r\n    const chunksList = this._calcChunksList(mask, innerOnly);\r\n    if (chunksList.length === 0) {\r\n      return;\r\n    }\r\n    this._geo.setOpacity(chunksList, value);\r\n  }\r\n\r\n  enableSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : true;\r\n    this._changeSubsetOpacity(mask, 1.0, innerOnly);\r\n  }\r\n\r\n  disableSubset(mask, innerOnly) {\r\n    innerOnly = innerOnly !== undefined ? innerOnly : true;\r\n    this._changeSubsetOpacity(mask, 0.0, innerOnly);\r\n  }\r\n}\r\n\r\nexport default ChemGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass AtomsGroup extends ChemGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { atoms } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const atomsIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const atomIdx = atomsIdc[inters[i].chunkIdx];\r\n      if (atomIdx < atoms.length) {\r\n        inters[i].atom = atoms[atomIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const { atoms } = this._selection;\r\n    const atomsIdc = this._chunksIdc;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      if ((atom.mask & mask) !== 0) {\r\n        chunksList.push(i);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default AtomsGroup;\r\n","import AtomsGroup from './AtomsGroup';\r\n\r\nclass AtomsSphereGroup extends AtomsGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length, this._polyComplexity];\r\n  }\r\n\r\n  _build() {\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      geo.setItem(i, atom.position, mode.calcAtomRadius(atom));\r\n      geo.setColor(i, colorer.getAtomColor(atom, parent));\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      geo.setItem(i, frameData.getAtomPos(atomsIdc[i]), mode.calcAtomRadius(atom));\r\n      if (updateColor) {\r\n        geo.setColor(i, frameData.getAtomColor(colorer, atom));\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default AtomsSphereGroup;\r\n","import AtomsSphereGroup from './AtomsSphereGroup';\r\n\r\nclass AtomsSurfaceGroup extends AtomsSphereGroup {\r\n  _makeGeoArgs() {\r\n    const selectedAtoms = [];\r\n    const { atoms, chunks } = this._selection;\r\n    const n = chunks.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      selectedAtoms[i] = atoms[chunks[i]];\r\n    }\r\n    const opts = this._mode.getSurfaceOpts();\r\n    opts.atoms = selectedAtoms;\r\n    return [n, opts];\r\n  }\r\n}\r\nexport default AtomsSurfaceGroup;\r\n","/* This is a stub class keep it until SAS/SES is refactored */\r\n\r\nimport AtomsSphereGroup from './AtomsSphereGroup';\r\n\r\nclass AtomsSASSESGroupStub extends AtomsSphereGroup {\r\n  _makeGeoArgs() {\r\n    const selectedAtoms = [];\r\n    const { atoms, chunks } = this._selection;\r\n    const n = chunks.length;\r\n    for (let i = 0; i < n; ++i) {\r\n      selectedAtoms[i] = atoms[chunks[i]];\r\n    }\r\n    const opts = this._mode.getSurfaceOpts();\r\n    opts.atoms = selectedAtoms;\r\n    opts.selection = this._selection;\r\n    opts.colorMode = this._colorer;\r\n    return [n, opts];\r\n  }\r\n}\r\n\r\nexport default AtomsSASSESGroupStub;\r\n","import AtomsGroup from './AtomsGroup';\r\nimport utils from '../../../utils';\r\n\r\nfunction adjustColor(color) {\r\n  let r = (color >> 16) & 255;\r\n  let g = (color >> 8) & 255;\r\n  let b = color & 255;\r\n\r\n  if (0.2126 * r + 0.7152 * g + 0.0722 * b > 127) {\r\n    r = r * 3 / 10;\r\n    g = g * 3 / 10;\r\n    b = b * 3 / 10;\r\n  } else {\r\n    r = 255 - ((255 - r) * 3 / 10);\r\n    g = 255 - ((255 - g) * 3 / 10);\r\n    b = 255 - ((255 - b) * 3 / 10);\r\n  }\r\n\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\nfunction inverseColor(color) {\r\n  const r = (color >> 16) & 255;\r\n  const g = (color >> 8) & 255;\r\n  const b = color & 255;\r\n\r\n  return ((255 - r) << 16) | ((255 - g) << 8) | (255 - b);\r\n}\r\n\r\nfunction getAtomText(atom) {\r\n  if (atom.name.getNode() !== null) {\r\n    return atom.name.getNode();\r\n  }\r\n\r\n  return atom.getVisualName();\r\n}\r\n\r\nconst colorMappings = {\r\n  none(c) {\r\n    return c;\r\n  },\r\n  adjust: adjustColor,\r\n  inverse: inverseColor,\r\n};\r\n\r\nfunction propagateColor(color, rule) {\r\n  let result;\r\n  if (colorMappings.hasOwnProperty(rule)) {\r\n    result = utils.hexColor(colorMappings[rule](color));\r\n  } else {\r\n    const val = parseInt(rule, 16);\r\n    if (!Number.isNaN(val) && rule.toLowerCase().startsWith('0x')) {\r\n      result = utils.hexColor(val);\r\n    } else {\r\n      result = '#000000';\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nconst templateMappings = {\r\n  serial(a) {\r\n    return a.serial;\r\n  },\r\n  name(a) {\r\n    return a.getVisualName();\r\n  },\r\n  elem(a) {\r\n    return a.element.name;\r\n  },\r\n  residue(a) {\r\n    return a.residue.getType().getName();\r\n  },\r\n  sequence(a) {\r\n    return a.residue.getSequence();\r\n  },\r\n  chain(a) {\r\n    return a.residue.getChain().getName();\r\n  },\r\n  hetatm(a) {\r\n    return a.isHet();\r\n  },\r\n  water(a) {\r\n    return a.residue.getType().getName() === 'HOH' || a.residue.getType().getName() === 'WAT';\r\n  },\r\n};\r\n\r\nconst parseTemplate = function (atom, str) {\r\n  return str.replace(/\\{\\{(\\s*\\w+\\s*)\\}\\}/g, (m) => {\r\n    let key = m.replace(/\\s+/g, '');\r\n    key = key.substring(2, key.length - 2).toLowerCase();\r\n\r\n    if (templateMappings.hasOwnProperty(key)) {\r\n      return templateMappings[key](atom);\r\n    }\r\n    return 'null';\r\n  });\r\n};\r\n\r\nclass AtomsTextGroup extends AtomsGroup {\r\n  _makeGeoArgs() {\r\n    const opts = this._mode.getLabelOpts();\r\n    return [this._selection.chunks.length, opts];\r\n  }\r\n\r\n  _build() {\r\n    const opts = this._mode.getLabelOpts();\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms, parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      const text = opts.template ? parseTemplate(atom, opts.template) : getAtomText(atom);\r\n      if (!text) {\r\n        continue;\r\n      }\r\n      const color = colorer.getAtomColor(atom, parent);\r\n      const fgColor = parseInt(propagateColor(color, opts.fg).substring(1), 16);\r\n      const bgColor = opts.showBg ? parseInt(propagateColor(color, opts.bg).substring(1), 16) : 'transparent';\r\n      geo.setItem(i, atom.position, text);\r\n      geo.setColor(i, fgColor, bgColor);\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const opts = this._mode.getLabelOpts();\r\n    const atomsIdc = this._selection.chunks;\r\n    const { atoms } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = atomsIdc.length; i < n; ++i) {\r\n      const atom = atoms[atomsIdc[i]];\r\n      const text = opts.template ? parseTemplate(atom, opts.template) : getAtomText(atom);\r\n      if (!text) {\r\n        continue;\r\n      }\r\n      const color = frameData.getAtomColor(colorer, atom);\r\n      const fgColor = parseInt(propagateColor(color, opts.fg).substring(1), 16);\r\n      const bgColor = opts.showBg ? parseInt(propagateColor(color, opts.bg).substring(1), 16) : 'transparent';\r\n      geo.setItem(i, frameData.getAtomPos(atomsIdc[i]), text);\r\n      if (updateColor) {\r\n        geo.setColor(i, fgColor, bgColor);\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default AtomsTextGroup;\r\n","import * as THREE from 'three';\r\nimport AtomsGroup from './AtomsGroup';\r\n\r\nfunction _slerp(omega, v1, v2, t) {\r\n  const oSin = Math.sin(omega);\r\n  return v1.clone().multiplyScalar(Math.sin((1 - t) * omega) / oSin).addScaledVector(v2, Math.sin(t * omega) / oSin);\r\n}\r\n\r\nclass AromaticGroup extends AtomsGroup {\r\n  _buildInner(radOffset, addChunk) {\r\n    const chunksToIdx = this._selection.chunks;\r\n\r\n    const prevVector = new THREE.Vector3();\r\n    const currVector = new THREE.Vector3();\r\n    const segmentsHeight = this._segmentsHeight;\r\n    const leprStep = 1.0 / segmentsHeight;\r\n    const colorer = this._colorer;\r\n\r\n    const { cycles, parent } = this._selection;\r\n    let chunkIdx = 0;\r\n    let currAtomIdx = chunksToIdx[chunkIdx];\r\n\r\n    for (let cIdx = 0, cCount = cycles.length; cIdx < cCount; ++cIdx) {\r\n      const cycle = cycles[cIdx];\r\n      const cycAtoms = cycle.atoms;\r\n      const chunkPoints = [];\r\n      const tmpDir = [];\r\n      const { center } = cycle;\r\n      const cycleRad = cycle.radius - radOffset;\r\n      const n = cycAtoms.length;\r\n      let i = 0;\r\n      const prevPos = cycAtoms[n - 1].position;\r\n      let currPos = cycAtoms[i].position;\r\n      prevVector.subVectors(prevPos, center);\r\n      currVector.subVectors(currPos, center);\r\n      const upDir = currVector.clone().cross(prevVector).normalize();\r\n\r\n      for (; i < n; ++i) {\r\n        const omega = prevVector.angleTo(currVector);\r\n        tmpDir[i] = _slerp(omega, prevVector, currVector, 0.5).normalize();\r\n        currPos = cycAtoms[(i + 1) % n].position;\r\n        prevVector.copy(currVector);\r\n        currVector.subVectors(currPos, center);\r\n      }\r\n\r\n      for (i = 0; i < n; ++i) {\r\n        if (cycAtoms[i].index !== currAtomIdx) {\r\n          continue;\r\n        }\r\n        const start = tmpDir[i];\r\n        const end = tmpDir[(i + 1) % n];\r\n        const color = colorer.getAtomColor(cycAtoms[i], parent);\r\n        const currAngle = start.angleTo(end);\r\n\r\n        for (let j = 0; j <= segmentsHeight; ++j) {\r\n          chunkPoints[j] = _slerp(currAngle, start, end, j * leprStep).multiplyScalar(cycleRad).add(center);\r\n        }\r\n\r\n        addChunk(chunkIdx++, color, chunkPoints, center, upDir);\r\n        currAtomIdx = chunksToIdx[chunkIdx];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default AromaticGroup;\r\n","import * as THREE from 'three';\r\nimport gfxutils from '../../gfxutils';\r\nimport AromaticGroup from './AromaticGroup';\r\n\r\nfunction _createShape(rad, parts) {\r\n  const pts = [];\r\n  for (let i = 0; i < parts; ++i) {\r\n    const a = -2 * i / parts * Math.PI;\r\n    pts.push(new THREE.Vector3(Math.cos(a) * rad, Math.sin(a) * rad, 0));\r\n  }\r\n  return pts;\r\n}\r\nconst { calcChunkMatrix } = gfxutils;\r\n\r\nclass AromaticTorusGroup extends AromaticGroup {\r\n  _build() {\r\n    const segmentsHeight = this._segmentsHeight;\r\n    const torusRad = this._mode.getAromRadius();\r\n    const radiusV = new THREE.Vector2(torusRad, torusRad);\r\n    const radOffset = this._mode.calcStickRadius() + 2 * torusRad;\r\n    const lookAtVector = new THREE.Vector3();\r\n    const mtc = [];\r\n    const geo = this._geo;\r\n    this._buildInner(radOffset, (chunkIdx, color, points, center, upDir) => {\r\n      for (let j = 0; j <= segmentsHeight; ++j) {\r\n        const currPoint = points[j];\r\n        const currDir = currPoint.clone().sub(center).cross(upDir);\r\n        lookAtVector.addVectors(currPoint, currDir);\r\n        mtc[j] = calcChunkMatrix(currPoint, lookAtVector, upDir, radiusV);\r\n      }\r\n      geo.setItem(chunkIdx, mtc);\r\n      geo.setColor(chunkIdx, color);\r\n    });\r\n    geo.finalize();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    this._segmentsHeight = this._polyComplexity;\r\n    return [_createShape(1.0, this._polyComplexity), this._segmentsHeight + 1, this._selection.chunks.length];\r\n  }\r\n}\r\n\r\nexport default AromaticTorusGroup;\r\n","import AromaticGroup from './AromaticGroup';\r\n\r\nclass AromaticLinesGroup extends AromaticGroup {\r\n  _build() {\r\n    const geo = this._geo;\r\n    const radOffset = this._mode.getAromaticOffset();\r\n    this._buildInner(radOffset, (chunkIdx, color, points) => {\r\n      let prevPt = points[0];// do not replace with start\r\n      for (let j = 1; j <= this._segmentsHeight; ++j) {\r\n        const currPoint = points[j];\r\n        geo.setSegment(chunkIdx, j - 1, prevPt, currPoint);\r\n        prevPt = currPoint;\r\n      }\r\n      geo.setColor(chunkIdx, color);\r\n    });\r\n    geo.finalize();\r\n  }\r\n\r\n  _makeGeoArgs() {\r\n    this._segmentsHeight = this._mode.getAromaticArcChunks();\r\n    return [this._selection.chunks.length, this._segmentsHeight, true];\r\n  }\r\n}\r\n\r\nexport default AromaticLinesGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass ResiduesGroup extends ChemGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { residues } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const resIdx = chunksIdc[inters[i].chunkIdx];\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const { residues } = this._selection;\r\n    const resIdc = this._chunksIdc;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      if ((res._mask & mask) !== 0) {\r\n        chunksList.push(i);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default ResiduesGroup;\r\n","import ResiduesGroup from './ResiduesGroup';\r\n\r\nclass NucleicItemGroup extends ResiduesGroup {\r\n  raycast(raycaster, intersects) {\r\n    const { residues } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const resIdx = chunksIdc[Math.floor(inters[i].chunkIdx / 2)];\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const stickRad = this._mode.calcStickRadius();\r\n    let chunkIdx = 0;\r\n\r\n    const resIdc = this._selection.chunks;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      const color = colorer.getResidueColor(res, parent);\r\n      this._processItem(chunkIdx++, res._cylinders[0], res._cylinders[1], stickRad, color);\r\n    }\r\n    geo.finalize();\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    let chunkIdx = 0;\r\n    const { residues } = this._selection;\r\n    const resIdc = this._chunksIdc;\r\n\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      if ((res._mask & mask) !== 0) {\r\n        chunksList[chunkIdx++] = 2 * i;\r\n        chunksList[chunkIdx++] = 2 * i + 1;\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const residues = frameData.getResidues();\r\n    const { parent } = this._selection;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const stickRad = this._mode.calcStickRadius();\r\n    let chunkIdx = 0;\r\n\r\n    const resIdc = this._selection.chunks;\r\n    for (let i = 0, n = resIdc.length; i < n; ++i) {\r\n      const res = residues[resIdc[i]];\r\n      const color = colorer.getResidueColor(res, parent);\r\n      this._processItem(chunkIdx++, res._cylinders[0], res._cylinders[1], stickRad, color);\r\n    }\r\n    geo.finishUpdate();\r\n  }\r\n}\r\n\r\nexport default NucleicItemGroup;\r\n","import NucleicItemGroup from './NucleicItemGroup';\r\n\r\nclass NucleicCylindersGroup extends NucleicItemGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length, this._polyComplexity];\r\n  }\r\n\r\n  _processItem(chunkIdx, cyl1, cyl2, stickRad, color) {\r\n    const geo = this._geo;\r\n    geo.setItem(chunkIdx, cyl1, cyl2, stickRad);\r\n    geo.setColor(chunkIdx, color, color);\r\n  }\r\n}\r\n\r\nexport default NucleicCylindersGroup;\r\n","import NucleicItemGroup from './NucleicItemGroup';\r\n\r\nclass NucleicSpheresGroup extends NucleicItemGroup {\r\n  _makeGeoArgs() {\r\n    return [this._selection.chunks.length * 2, this._polyComplexity];\r\n  }\r\n\r\n  _processItem(chunkIdx, cyl1, cyl2, stickRad, color) {\r\n    const geo = this._geo;\r\n    let idx = chunkIdx * 2;\r\n    geo.setItem(idx, cyl1, stickRad);\r\n    geo.setColor(idx, color);\r\n    idx++;\r\n    geo.setItem(idx, cyl2, stickRad);\r\n    geo.setColor(idx, color);\r\n  }\r\n}\r\n\r\nexport default NucleicSpheresGroup;\r\n","import * as THREE from 'three';\r\nimport { Smooth } from '../../../../vendor/js/Smooth';\r\nimport gfxutils from '../../gfxutils';\r\nimport chem from '../../../chem';\r\n\r\nconst { ResidueType } = chem;\r\n\r\nconst calcMatrix = gfxutils.calcChunkMatrix;\r\n\r\nfunction _buildStructureInterpolator(points, tension) {\r\n  const path = Smooth(points, {\r\n    method: Smooth.METHOD_CUBIC,\r\n    clip: Smooth.CLIP_CLAMP,\r\n    cubicTension: tension,\r\n    scaleTo: 1,\r\n  });\r\n\r\n  return function (t, argTrans) {\r\n    let transformT = argTrans;\r\n    if (transformT === null) {\r\n      // map our range to the [second .. last but one]\r\n      transformT = function (tt) {\r\n        return (tt * ((points.length - 1) - 2) + 1) / (points.length - 1);\r\n      };\r\n    }\r\n    const newt = transformT(t);\r\n    const ans = path(newt);\r\n    return new THREE.Vector3(ans[0], ans[1], ans[2]);\r\n  };\r\n}\r\n\r\nfunction _addPoints(centerPoints, topPoints, idx, residue) {\r\n  if (!residue._isValid) {\r\n    centerPoints[idx] = centerPoints[idx - 1];\r\n    topPoints[idx] = topPoints[idx - 1];\r\n    return;\r\n  }\r\n  const cp = residue._controlPoint;\r\n  centerPoints[idx] = [cp.x, cp.y, cp.z];\r\n  const tp = cp.clone().add(residue._wingVector);\r\n  topPoints[idx] = [tp.x, tp.y, tp.z];\r\n}\r\n\r\nfunction _addPointsForLoneResidue(centerPoints, topPoints, idx, residue) {\r\n  const nucleic = (residue._type.flags & ResidueType.Flags.NUCLEIC) !== 0;\r\n  const nameFrom = nucleic ? 'C5\\'' : 'N';\r\n  const nameTo = nucleic ? 'C3\\'' : 'C';\r\n\r\n  let posFrom;\r\n  let posTo;\r\n  residue.forEachAtom((atom) => {\r\n    const name = atom.getVisualName();\r\n    if (!posFrom && name === nameFrom) {\r\n      posFrom = atom.position;\r\n    } else if (!posTo && name === nameTo) {\r\n      posTo = atom.position;\r\n    }\r\n  });\r\n\r\n  // provide a fallback for unknown residues\r\n  if (!(posFrom && posTo)) {\r\n    posFrom = residue._firstAtom.position;\r\n    posTo = residue._lastAtom.position;\r\n  }\r\n\r\n  if (posFrom && posTo) {\r\n    const shift = posTo.clone().sub(posFrom);\r\n\r\n    const wing = residue._wingVector;\r\n    const cp = residue._controlPoint;\r\n    const tp = cp.clone().add(wing);\r\n\r\n    const cpPrev = cp.clone().sub(shift);\r\n    const tpPrev = cpPrev.clone().add(wing);\r\n    centerPoints[idx] = [cpPrev.x, cpPrev.y, cpPrev.z];\r\n    topPoints[idx] = [tpPrev.x, tpPrev.y, tpPrev.z];\r\n    ++idx;\r\n    centerPoints[idx] = [cpPrev.x, cpPrev.y, cpPrev.z];\r\n    topPoints[idx] = [tpPrev.x, tpPrev.y, tpPrev.z];\r\n    ++idx;\r\n\r\n    centerPoints[idx] = [cp.x, cp.y, cp.z];\r\n    topPoints[idx] = [tp.x, tp.y, tp.z];\r\n    ++idx;\r\n\r\n    const cpNext = cp.clone().add(shift);\r\n    const tpNext = cpNext.clone().add(wing);\r\n    centerPoints[idx] = [cpNext.x, cpNext.y, cpNext.z];\r\n    topPoints[idx] = [tpNext.x, tpNext.y, tpNext.z];\r\n    ++idx;\r\n    centerPoints[idx] = [cpNext.x, cpNext.y, cpNext.z];\r\n    topPoints[idx] = [tpNext.x, tpNext.y, tpNext.z];\r\n  }\r\n}\r\n\r\nfunction _calcPoints(residues, firstIdx, lastIdx, boundaries) {\r\n  const left = boundaries.start;\r\n  const right = boundaries.end;\r\n  function _prevIdx(idx) {\r\n    return idx > left && residues[idx - 1]._isValid ? idx - 1 : idx;\r\n  }\r\n  function _nextIdx(idx) {\r\n    return idx < right && residues[idx + 1]._isValid ? idx + 1 : idx;\r\n  }\r\n\r\n  const topPoints = [];\r\n  const centerPoints = [];\r\n  let arrIdx = 0;\r\n  function _extrapolate2(currIdx, otherIdx) {\r\n    const cp = residues[currIdx]._controlPoint.clone().lerp(residues[otherIdx]._controlPoint, -0.25);\r\n    const tp = cp.clone().add(residues[currIdx]._wingVector);\r\n    centerPoints[arrIdx] = [cp.x, cp.y, cp.z];\r\n    topPoints[arrIdx++] = [tp.x, tp.y, tp.z];\r\n    centerPoints[arrIdx] = [cp.x, cp.y, cp.z];\r\n    topPoints[arrIdx++] = [tp.x, tp.y, tp.z];\r\n  }\r\n\r\n  // a single disconnected residue\r\n  const prevIdx = _prevIdx(firstIdx);\r\n  const nextIdx = _nextIdx(lastIdx);\r\n  if (prevIdx === nextIdx) {\r\n    _addPointsForLoneResidue(centerPoints, topPoints, arrIdx, residues[firstIdx]);\r\n    return { centerPoints, topPoints };\r\n  }\r\n\r\n  // Two points (prev-prev and next-next) are added to support edge conditions for cubic splines, they are ignored\r\n  // Another two (prev and next) were added to support the outside of the sub chain\r\n\r\n  // prev and prev-prev\r\n  if (firstIdx === prevIdx) {\r\n    // do the extrapolation\r\n    _extrapolate2(firstIdx, _nextIdx(firstIdx));\r\n  } else {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[_prevIdx(prevIdx)]);\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[prevIdx]);\r\n  }\r\n\r\n  // main loop\r\n  for (let idx = firstIdx; idx <= lastIdx; ++idx) {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[idx]);\r\n  }\r\n\r\n  // next and next-next\r\n  if (nextIdx === _nextIdx(nextIdx)) {\r\n    // do the extrapolation\r\n    _extrapolate2(lastIdx, _prevIdx(lastIdx));\r\n  } else {\r\n    _addPoints(centerPoints, topPoints, arrIdx++, residues[nextIdx]);\r\n    _addPoints(centerPoints, topPoints, arrIdx, residues[_nextIdx(nextIdx)]);\r\n  }\r\n  return { centerPoints, topPoints };\r\n}\r\n\r\nclass CartoonHelper {\r\n  constructor(residues, startIdx, endIdx, segmentsCount, tension, boundaries) {\r\n    const pointsArrays = _calcPoints(residues, startIdx, endIdx, boundaries);\r\n    this._topInterp = _buildStructureInterpolator(pointsArrays.topPoints, tension);\r\n    this._centerInterp = _buildStructureInterpolator(pointsArrays.centerPoints, tension);\r\n\r\n    this._shift = 0.5 / (endIdx - startIdx + 2);\r\n    this._valueStep = (1.0 - 2 * this._shift) / (2 * (endIdx - startIdx + 1) * (segmentsCount - 1));\r\n    this._segmentsCount = segmentsCount;\r\n  }\r\n\r\n  prepareMatrices(idx, firstRad, secondRad) {\r\n    const mtcCount = this._segmentsCount;\r\n    const outMtc = new Array(mtcCount);\r\n    const currRad = new THREE.Vector2(0, 0);\r\n\r\n    const topInterp = this._topInterp;\r\n    const cenInterp = this._centerInterp;\r\n\r\n    let currentValue = this._shift + this._valueStep * (mtcCount - 1) * idx;\r\n\r\n    for (let mtxIdx = 0; mtxIdx < mtcCount; ++mtxIdx) {\r\n      const lerpVal = Math.min(1.0, mtxIdx / (mtcCount - 1));\r\n      currRad.lerpVectors(firstRad, secondRad, lerpVal);\r\n\r\n      const currTop = topInterp(currentValue, null);\r\n      const currCenter = cenInterp(currentValue, null);\r\n      currentValue += this._valueStep;\r\n      const nextCenter = cenInterp(currentValue, null);\r\n\r\n      outMtc[mtxIdx] = calcMatrix(currCenter.clone(), nextCenter.clone(), currTop.clone().sub(currCenter), currRad);\r\n    }\r\n\r\n    return outMtc;\r\n  }\r\n}\r\n\r\nexport default CartoonHelper;\r\n","import * as THREE from 'three';\r\nimport ResiduesGroup from './ResiduesGroup';\r\nimport CartoonHelper from './CartoonHelper';\r\n\r\nfunction _createShape(rad, parts) {\r\n  const pts = [];\r\n\r\n  for (let i = 0; i < parts; ++i) {\r\n    // starts from pi/2 because it's important that points are lied on the angles of arrows (visual issues if not)\r\n    const a = Math.PI / 2.0 - 2 * Math.PI * i / parts;\r\n\r\n    pts.push(new THREE.Vector3(Math.cos(a) * rad, Math.sin(a) * rad, 0));\r\n  }\r\n  return pts;\r\n}\r\n\r\nfunction _loopThrough(subDiv, residues, segmentsHeight, tension, mode, callback) {\r\n  for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n    const subs = subDiv[subDivI].arr;\r\n    const { boundaries } = subDiv[subDivI];\r\n    for (let i = 0, n = subs.length; i < n; ++i) {\r\n      const idc = [subs[i].start, subs[i].end];\r\n      const matrixHelper = new CartoonHelper(residues, idc[0], idc[1], segmentsHeight, tension, boundaries);\r\n      let prevLast = null;\r\n      const startIdx = subs[i].start * 2;\r\n      const endIdx = subs[i].end * 2 + 1;\r\n      let prevSecondRad = mode.getResidueRadius(residues[0], 0);\r\n      for (let idx = startIdx; idx <= endIdx; ++idx) {\r\n        const resIdx = (idx / 2 | 0);\r\n        const currRes = residues[resIdx];\r\n        const firstRad = mode.getResidueRadius(currRes, idx % 2);\r\n        const secondRad = mode.getResidueRadius(currRes, 1 + (idx % 2));\r\n\r\n        const mtc = matrixHelper.prepareMatrices(idx - idc[0] * 2, firstRad, secondRad);\r\n        mtc.unshift(prevLast === null ? mtc[0] : prevLast);\r\n\r\n        // Slope - radius is changed along this residue part\r\n        const hasSlope = (firstRad.x !== secondRad.x) || (firstRad.y !== secondRad.y);\r\n        // Cut - end radius of previous part not equal to start radius of this part. First section of this part lies in the orthogonal plane\r\n        const hasCut = (firstRad.x !== prevSecondRad.x) || (firstRad.y !== prevSecondRad.y);\r\n\r\n        callback(currRes, mtc, hasSlope, hasCut);\r\n\r\n        prevLast = mtc[segmentsHeight];\r\n        prevSecondRad = secondRad;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass ResiduesSubseqGroup extends ResiduesGroup {\r\n  _makeGeoArgs() {\r\n    const cmpMultiplier = this._mode.getHeightSegmentsRatio();\r\n    this._segmentsHeight = this._polyComplexity * cmpMultiplier | 0;\r\n    return [_createShape(1.0, this._polyComplexity), this._segmentsHeight + 1, this._selection.chunks.length * 2];\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const tension = mode.getTension();\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const chunkIdc = [];\r\n    _loopThrough(this._selection.subdivs, residues, this._segmentsHeight, tension, mode, (currRes, mtc, hasSlope = false, hasCut = false) => {\r\n      const color = colorer.getResidueColor(currRes, parent);\r\n      chunkIdc[chunkIdx] = currRes._index;\r\n      geo.setItem(chunkIdx, mtc, hasSlope, hasCut);\r\n      geo.setColor(chunkIdx++, color);\r\n    });\r\n    this._chunksIdc = chunkIdc;\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const { parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const tension = mode.getTension();\r\n    const geo = this._geo;\r\n    const frameRes = frameData.getResidues();\r\n    let chunkIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    _loopThrough(this._selection.subdivs, frameRes, this._segmentsHeight, tension, mode, (currRes, mtc) => {\r\n      geo.setItem(chunkIdx, mtc);\r\n      if (updateColor) {\r\n        geo.setColor(chunkIdx, colorer.getResidueColor(currRes, parent));\r\n      }\r\n      chunkIdx++;\r\n    });\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default ResiduesSubseqGroup;\r\n","import ChemGroup from './ChemGroup';\r\n\r\nclass ResiduesTraceGroup extends ChemGroup {\r\n  _makeGeoArgs() {\r\n    const subDiv = this._selection.subdivs;\r\n    let chunksCount = 0;\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        chunksCount += subs[i].end - subs[i].start;\r\n      }\r\n    }\r\n    return [chunksCount, this._polyComplexity];\r\n  }\r\n\r\n  _build() {\r\n    const { residues, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const chunkIdc = [];\r\n    const subDiv = this._selection.subdivs;\r\n    const stickRad = mode.calcStickRadius();\r\n\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        const startIdx = subs[i].start;\r\n        const endIdx = subs[i].end;\r\n        let prevRes = residues[startIdx];\r\n        for (let idx = startIdx + 1; idx <= endIdx; ++idx) {\r\n          const currRes = residues[idx];\r\n          chunkIdc[chunkIdx] = { first: prevRes._index, second: currRes._index };\r\n          geo.setItem(chunkIdx, prevRes._controlPoint, currRes._controlPoint, stickRad);\r\n          geo.setColor(chunkIdx, colorer.getResidueColor(prevRes, parent), colorer.getResidueColor(currRes, parent));\r\n          chunkIdx++;\r\n          prevRes = currRes;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._chunksIdc = chunkIdc;\r\n    geo.finalize();\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n\r\n    const residues = frameData.getResidues();\r\n    const { parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    let chunkIdx = 0;\r\n    const subDiv = this._selection.subdivs;\r\n    const stickRad = mode.calcStickRadius();\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n\r\n    for (let subDivI = 0, subDivN = subDiv.length; subDivI < subDivN; ++subDivI) {\r\n      const subs = subDiv[subDivI].arr;\r\n      for (let i = 0, n = subs.length; i < n; ++i) {\r\n        const startIdx = subs[i].start;\r\n        const endIdx = subs[i].end;\r\n        let prevRes = residues[startIdx];\r\n        for (let idx = startIdx + 1; idx <= endIdx; ++idx) {\r\n          const currRes = residues[idx];\r\n          geo.setItem(chunkIdx, prevRes._controlPoint, currRes._controlPoint, stickRad);\r\n          if (updateColor) {\r\n            geo.setColor(chunkIdx, colorer.getResidueColor(prevRes, parent), colorer.getResidueColor(currRes, parent));\r\n          }\r\n          chunkIdx++;\r\n          prevRes = currRes;\r\n        }\r\n      }\r\n    }\r\n\r\n    geo.finalize();\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const inters = [];\r\n    const { residues } = this._selection;\r\n    this._mesh.raycast(raycaster, inters);\r\n    const chunksToIdx = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const { chunkIdx } = inters[i];\r\n      const chunk = chunksToIdx[Math.floor(chunkIdx / 2)];\r\n      const resIdx = chunkIdx % 2 === 0 ? chunk.first : chunk.second;\r\n      if (resIdx < residues.length) {\r\n        inters[i].residue = residues[resIdx];\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask) {\r\n    const chunksList = [];\r\n    const chunksToIdx = this._chunksIdc;\r\n    const { residues } = this._selection;\r\n    for (let i = 0, n = chunksToIdx.length; i < n; ++i) {\r\n      const chunk = chunksToIdx[i];\r\n      if (residues[chunk.first]._mask & mask) {\r\n        chunksList.push(i * 2);\r\n      }\r\n      if (residues[chunk.second]._mask & mask) {\r\n        chunksList.push(i * 2 + 1);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default ResiduesTraceGroup;\r\n","import ChemGroup from './ChemGroup';\r\nimport Bond from '../../../chem/Bond';\r\n\r\nfunction getCylinderCount(bondOrder) {\r\n  return bondOrder < 2 ? 1 : bondOrder;\r\n}\r\n\r\nclass BondsGroup extends ChemGroup {\r\n  _makeGeoArgs() {\r\n    const drawMultiple = this._mode.drawMultiorderBonds();\r\n    const showAromatic = this._mode.showAromaticLoops();\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    let bondsCount = 0;\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      bondsCount += this.getBondOrder(bonds[bondsIdc[i]], drawMultiple, showAromatic);\r\n    }\r\n    return [bondsCount, this._polyComplexity];\r\n  }\r\n\r\n  getBondOrder(bond, drawMultiple, showAromatic) {\r\n    let bondOrder = 1;\r\n    if (drawMultiple && (!showAromatic || bond._type !== Bond.BondType.AROMATIC)) {\r\n      bondOrder = getCylinderCount(bond._order);\r\n    }\r\n    return bondOrder;\r\n  }\r\n\r\n  raycast(raycaster, intersects) {\r\n    const { bonds } = this._selection;\r\n    const inters = [];\r\n    this._mesh.raycast(raycaster, inters);\r\n    const bondsIdc = this._chunksIdc;\r\n    // process inters array - arr object references\r\n    for (let i = 0, n = inters.length; i < n; ++i) {\r\n      if (!inters[i].hasOwnProperty('chunkIdx')) {\r\n        continue;\r\n      }\r\n      const { chunkIdx } = inters[i];\r\n      const bondIdx = bondsIdc[Math.floor(chunkIdx / 2)];\r\n      if (bondIdx < bonds.length) {\r\n        const bond = bonds[bondIdx];\r\n        inters[i].atom = chunkIdx % 2 === 0 ? bond._left : bond._right;\r\n        intersects.push(inters[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _calcChunksList(mask, innerOnly) {\r\n    const chunksList = [];\r\n    const { bonds } = this._selection;\r\n    const chunksToIdx = this._chunksIdc;\r\n    for (let i = 0, n = chunksToIdx.length; i < n; ++i) {\r\n      const bond = bonds[chunksToIdx[i]];\r\n      if ((bond._left.mask & mask) && (!innerOnly || (bond._right.mask & mask))) {\r\n        chunksList.push(2 * i);\r\n      }\r\n      if ((bond._right.mask & mask) && (!innerOnly || (bond._left.mask & mask))) {\r\n        chunksList.push(2 * i + 1);\r\n      }\r\n    }\r\n    return chunksList;\r\n  }\r\n}\r\n\r\nexport default BondsGroup;\r\n","import * as THREE from 'three';\r\nimport BondsGroup from './BondsGroup';\r\n\r\nclass BondsCylinderGroup extends BondsGroup {\r\n  _build() {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const stickRad = mode.calcStickRadius();\r\n    const emptyOffset = mode.calcSpaceFraction();\r\n    let normDir;\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const chunksToIdx = [];\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = atom1.position;\r\n      const a2Pos = atom2.position;\r\n      normDir = bond.calcNormalDir();\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n      const minRad = Math.min(mode.calcAtomRadius(atom1), mode.calcAtomRadius(atom2));\r\n      const dist = 2 * minRad / order;\r\n      const currStickRad = drawMultiple ? Math.min(stickRad, dist * 0.5 * (1.0 - emptyOffset)) : stickRad;\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        const scale = dist * (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        chunksToIdx[currBondIdx] = bond._index;\r\n        leftPos.copy(a1Pos);\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.copy(a2Pos);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos, currStickRad);\r\n        geo.setColor(currBondIdx++, colorer.getAtomColor(atom1, parent), colorer.getAtomColor(atom2, parent));\r\n      }\r\n    }\r\n\r\n    geo.finalize();\r\n    this._chunksIdc = chunksToIdx;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const stickRad = mode.calcStickRadius();\r\n    const emptyOffset = mode.calcSpaceFraction();\r\n    let normDir;\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = frameData.getAtomPos(atom1.index).clone();\r\n      const a2Pos = frameData.getAtomPos(atom2.index);\r\n      normDir = bond.calcNormalDir();\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n      const minRad = Math.min(mode.calcAtomRadius(atom1), mode.calcAtomRadius(atom2));\r\n      const dist = 2 * minRad / order;\r\n      const currStickRad = drawMultiple ? Math.min(stickRad, dist * 0.5 * (1.0 - emptyOffset)) : stickRad;\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        const scale = dist * (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        leftPos.copy(a1Pos);\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.copy(a2Pos);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos, currStickRad);\r\n        if (updateColor) {\r\n          geo.setColor(currBondIdx, frameData.getAtomColor(colorer, atom1), frameData.getAtomColor(colorer, atom2));\r\n        }\r\n        currBondIdx++;\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default BondsCylinderGroup;\r\n","import * as THREE from 'three';\r\nimport BondsGroup from './BondsGroup';\r\n\r\nconst STEP_SIZE = 0.15;\r\n\r\nclass BondsLinesGroup extends BondsGroup {\r\n  _build() {\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds, parent } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const bondDir = new THREE.Vector3();\r\n\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const chunksToIdx = [];\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = atom1.position;\r\n      const a2Pos = atom2.position;\r\n      const a1Hangs = atom1.bonds.length === 1;\r\n      const a2Hangs = atom2.bonds.length === 1;\r\n      bondDir.subVectors(a2Pos, a1Pos);\r\n      const len = bondDir.length();\r\n      const normDir = bond.calcNormalDir();\r\n\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        leftPos.copy(a1Pos);\r\n        rightPos.copy(a2Pos);\r\n        let scale = (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        chunksToIdx[currBondIdx] = bond._index;\r\n        if (order === 2 && (!a1Hangs && !a2Hangs)) {\r\n          scale -= 0.5;\r\n          scale *= -1;\r\n        }\r\n\r\n        if (!a1Hangs && !a2Hangs && order > 1 && scale !== 0) {\r\n          leftPos.lerpVectors(a1Pos, a2Pos, STEP_SIZE / (len));\r\n          rightPos.lerpVectors(a1Pos, a2Pos, 1.0 - STEP_SIZE / (len));\r\n        }\r\n\r\n        scale *= STEP_SIZE;\r\n\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos);\r\n        geo.setColor(currBondIdx++, colorer.getAtomColor(atom1, parent), colorer.getAtomColor(atom2, parent));\r\n      }\r\n    }\r\n    geo.finalize();\r\n    this._chunksIdc = chunksToIdx;\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    // This method looks like a copy paste. However, it\r\n    // was decided to postpone animation refactoring until GFX is fixed.\r\n    const bondsIdc = this._selection.chunks;\r\n    const { bonds } = this._selection;\r\n    const mode = this._mode;\r\n    const colorer = this._colorer;\r\n    const geo = this._geo;\r\n    const drawMultiple = mode.drawMultiorderBonds();\r\n    const showAromatic = mode.showAromaticLoops();\r\n\r\n    const bondDir = new THREE.Vector3();\r\n\r\n    const leftPos = new THREE.Vector3();\r\n    const rightPos = new THREE.Vector3();\r\n    let currBondIdx = 0;\r\n    const updateColor = frameData.needsColorUpdate(colorer);\r\n    for (let i = 0, n = bondsIdc.length; i < n; ++i) {\r\n      const bond = bonds[bondsIdc[i]];\r\n      const atom1 = bond._left;\r\n      const atom2 = bond._right;\r\n      const a1Pos = frameData.getAtomPos(atom1.index).clone();\r\n      const a2Pos = frameData.getAtomPos(atom2.index);\r\n      const a1Hangs = atom1.bonds.length === 1;\r\n      const a2Hangs = atom2.bonds.length === 1;\r\n      bondDir.subVectors(a2Pos, a1Pos);\r\n      const len = bondDir.length();\r\n      const normDir = bond.calcNormalDir();\r\n\r\n      const order = this.getBondOrder(bond, drawMultiple, showAromatic);\r\n\r\n      for (let j = 0; j < order; ++j) {\r\n        leftPos.copy(a1Pos);\r\n        rightPos.copy(a2Pos);\r\n        let scale = (order % 2 === 0\r\n          ? (((j / 2) | 0) + 0.5) * (1 - 2 * (j % 2))\r\n          : (((j + 1) / 2) | 0) * (-1 + 2 * (j % 2)));\r\n        if (order === 2 && (!a1Hangs && !a2Hangs)) {\r\n          scale -= 0.5;\r\n          scale *= -1;\r\n        }\r\n\r\n        if (!a1Hangs && !a2Hangs && order > 1 && scale !== 0) {\r\n          leftPos.lerpVectors(a1Pos, a2Pos, STEP_SIZE / (len));\r\n          rightPos.lerpVectors(a1Pos, a2Pos, 1.0 - STEP_SIZE / (len));\r\n        }\r\n\r\n        scale *= STEP_SIZE;\r\n\r\n        leftPos.addScaledVector(normDir, scale);\r\n        rightPos.addScaledVector(normDir, scale);\r\n        geo.setItem(currBondIdx, leftPos, rightPos);\r\n        if (updateColor) {\r\n          geo.setColor(currBondIdx, frameData.getAtomColor(colorer, atom1), frameData.getAtomColor(colorer, atom2));\r\n        }\r\n        currBondIdx++;\r\n      }\r\n    }\r\n    geo.finalize();\r\n  }\r\n}\r\n\r\nexport default BondsLinesGroup;\r\n","import AtomsSphereGroup from './AtomsSphereGroup';\r\nimport AtomsSurfaceGroup from './AtomsSurfaceGroup';\r\nimport AtomsSASSESGroupStub from './AtomsSASSESGroupStub';\r\nimport AtomsTextGroup from './AtomsTextGroup';\r\nimport AromaticTorusGroup from './AromaticTorusGroup';\r\nimport AromaticLinesGroup from './AromaticLinesGroup';\r\nimport NucleicCylindersGroup from './NucleicCylindersGroup';\r\nimport NucleicSpheresGroup from './NucleicSpheresGroup';\r\nimport ResiduesSubseqGroup from './ResiduesSubseqGroup';\r\nimport ResiduesTraceGroup from './ResiduesTraceGroup';\r\nimport BondsCylinderGroup from './BondsCylinderGroup';\r\nimport BondsLinesGroup from './BondsLinesGroup';\r\n\r\nexport default {\r\n  AtomsSphereGroup,\r\n  AtomsSurfaceGroup,\r\n  AtomsSASSESGroupStub,\r\n  AtomsTextGroup,\r\n  AromaticTorusGroup,\r\n  AromaticLinesGroup,\r\n  NucleicCylindersGroup,\r\n  NucleicSpheresGroup,\r\n  ResiduesSubseqGroup,\r\n  ResiduesTraceGroup,\r\n  BondsCylinderGroup,\r\n  BondsLinesGroup,\r\n};\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass AtomsProcessor extends RCGroup {\r\n  constructor(AtomsGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    this._mode = mode;\r\n    const atoms = complex.getAtoms();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const atomsIdc = [];\r\n      let atomCount = 0;\r\n      component.forEachAtom((atom) => {\r\n        if (!self._checkAtom(atom, mask)) {\r\n          return;\r\n        }\r\n        atomsIdc[atomCount++] = atom.index;\r\n      });\r\n      if (atomCount === 0) {\r\n        return;\r\n      }\r\n      const atomsGroup = new AtomsGroup(geoParams, {\r\n        atoms,\r\n        chunks: atomsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      atomsGroup._component = component;\r\n      self.add(atomsGroup);\r\n    });\r\n  }\r\n\r\n  _checkAtom(atom, mask) {\r\n    return atom.mask & mask;\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default AtomsProcessor;\r\n","import AtomsProcessor from './AtomsProcessor';\r\n\r\nclass OrphanAtomsProcessor extends AtomsProcessor {\r\n  _checkAtom(atom, mask) {\r\n    if (!(atom.mask & mask)) {\r\n      return false;\r\n    }\r\n\r\n    const { bonds } = atom;\r\n    for (let i = 0, n = bonds.length; i < n; ++i) {\r\n      if ((bonds[i]._left.mask & mask) && (bonds[i]._right.mask & mask)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default OrphanAtomsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass ResiduesProcessor extends RCGroup {\r\n  constructor(ResidueGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const residues = complex.getResidues();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      let chunksCount = 0;\r\n      const resIdc = [];\r\n      component.forEachResidue((residue) => {\r\n        if (self._checkResidue(residue, mask)) {\r\n          resIdc[chunksCount++] = residue._index;\r\n        }\r\n      });\r\n\r\n      if (chunksCount === 0) {\r\n        return;\r\n      }\r\n      const residuesGroup = new ResidueGroup(geoParams, {\r\n        residues,\r\n        chunks: resIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      residuesGroup._component = component;\r\n      self.add(residuesGroup);\r\n    });\r\n  }\r\n\r\n  checkResidue(residue, mask) {\r\n    return residue._mask & mask;\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default ResiduesProcessor;\r\n","import ResidueProcessor from './ResiduesProcessor';\r\n\r\nclass NucleicProcessor extends ResidueProcessor {\r\n  _checkResidue(residue, mask) {\r\n    return mask & residue._mask && residue._cylinders !== null;\r\n  }\r\n}\r\nexport default NucleicProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass SubseqsProcessor extends RCGroup {\r\n  constructor(ResidueGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const residues = complex.getResidues();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const subDivs = component.getMaskedSubdivSequences(mask);\r\n\r\n      let chunksCount = 0;\r\n      const resIdc = [];\r\n      for (let subDivI = 0, subDivN = subDivs.length; subDivI < subDivN; ++subDivI) {\r\n        const subs = subDivs[subDivI].arr;\r\n        for (let i = 0, n = subs.length; i < n; ++i) {\r\n          for (let j = subs[i].start, jEnd = subs[i].end; j <= jEnd; ++j) {\r\n            resIdc[chunksCount++] = residues[j]._index;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (chunksCount === 0) {\r\n        return;\r\n      }\r\n      const residuesGroup = new ResidueGroup(geoParams, {\r\n        residues,\r\n        chunks: resIdc,\r\n        subdivs: subDivs,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      residuesGroup._component = component;\r\n      self.add(residuesGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default SubseqsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass BondsProcessor extends RCGroup {\r\n  constructor(BondsGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const bonds = complex.getBonds();\r\n    const transforms = complex.getTransforms();\r\n\r\n    complex.forEachComponent((component) => {\r\n      const bondsIdc = [];\r\n      let bondsCount = 0;\r\n      component.forEachBond((bond) => {\r\n        const atom1 = bond._left;\r\n        const atom2 = bond._right;\r\n        if (!(atom1.mask & mask) || !(atom2.mask & mask)) {\r\n          return;\r\n        }\r\n        bondsIdc[bondsCount++] = bond._index;\r\n      });\r\n      if (bondsCount === 0) {\r\n        return;\r\n      }\r\n      const bondsGroup = new BondsGroup(geoParams, {\r\n        bonds,\r\n        chunks: bondsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      bondsGroup._component = component;\r\n      self.add(bondsGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default BondsProcessor;\r\n","import RCGroup from '../../RCGroup';\r\n\r\nclass AromaticProcessor extends RCGroup {\r\n  constructor(AromaticGroup, geoParams, complex, colorer, mode, polyComplexity, mask, material) {\r\n    super();\r\n    const self = this;\r\n    this._complex = complex;\r\n    const atoms = complex.getAtoms();\r\n    const transforms = complex.getTransforms();\r\n    if (!mode.showAromaticLoops()) {\r\n      return;\r\n    }\r\n\r\n    complex.forEachComponent((component) => {\r\n      const atomsIdc = [];\r\n      let chunksCount = 0;\r\n      const cycles = [];\r\n      let cycleIdx = 0;\r\n      component.forEachCycle((cycle) => {\r\n        const cycAtoms = cycle.atoms;\r\n        let perCycle = 0;\r\n        for (let i = 0, n = cycAtoms.length; i < n; ++i) {\r\n          if ((cycAtoms[i].mask & mask) !== 0) {\r\n            ++perCycle;\r\n            atomsIdc[chunksCount++] = cycAtoms[i].index;\r\n          }\r\n        }\r\n        if (perCycle > 0) {\r\n          cycles[cycleIdx++] = cycle;\r\n        }\r\n      });\r\n\r\n      const atomsGroup = new AromaticGroup(geoParams, {\r\n        cycles,\r\n        atoms,\r\n        chunks: atomsIdc,\r\n        parent: complex,\r\n      }, colorer, mode, transforms, polyComplexity, material);\r\n      atomsGroup._component = component;\r\n      self.add(atomsGroup);\r\n    });\r\n  }\r\n\r\n  getSubset(mask, innerOnly) {\r\n    const totalSubset = [];\r\n    const { children } = this;\r\n    let meshIdx = 0;\r\n    for (let i = 0, n = children.length; i < n; ++i) {\r\n      if (children[i].getSubset) {\r\n        const chSubset = children[i].getSubset(mask, innerOnly);\r\n        for (let j = 0, m = chSubset.length; j < m; ++j) {\r\n          const subsetEl = chSubset[j];\r\n          subsetEl._component = children[i]._component;\r\n          totalSubset[meshIdx++] = subsetEl;\r\n        }\r\n      }\r\n    }\r\n    return totalSubset;\r\n  }\r\n}\r\n\r\nexport default AromaticProcessor;\r\n","import AtomsProcessor from './AtomsProcessor';\r\nimport OrphanAtomsProcessor from './OrphanAtomsProcessor';\r\nimport ResiduesProcessor from './ResiduesProcessor';\r\nimport NucleicProcessor from './NucleicProcessor';\r\nimport SubseqsProcessor from './SubseqsProcessor';\r\nimport BondsProcessor from './BondsProcessor';\r\nimport AromaticProcessor from './AromaticProcessor';\r\n\r\nexport default {\r\n  Atoms: AtomsProcessor,\r\n  OrphanAtoms: OrphanAtomsProcessor,\r\n  Residues: ResiduesProcessor,\r\n  Nucleic: NucleicProcessor,\r\n  Subseqs: SubseqsProcessor,\r\n  Bonds: BondsProcessor,\r\n  Aromatic: AromaticProcessor,\r\n};\r\n","import MeshCreator from '../../meshes/MeshCreator';\r\nimport groups from './groups';\r\nimport processors from '../processors/processors';\r\n\r\nfunction _bakeGroup(triplet, Processor, Group) {\r\n  return function (complex, colorer, mode, polyComplexity, mask, material) {\r\n    return new Processor(Group, triplet, complex, colorer, mode, polyComplexity, mask, material);\r\n  };\r\n}\r\n\r\nclass GroupsFactory {\r\n  static AtomsSpheres(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createSpheres(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSphereGroup);\r\n  }\r\n\r\n  static OrphanedAtomsCrosses(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createCrosses(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.OrphanAtoms, groups.AtomsSphereGroup);\r\n  }\r\n\r\n  static BondsCylinders(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Bonds, groups.BondsCylinderGroup);\r\n  }\r\n\r\n  static BondsLines(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.create2CLines(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Bonds, groups.BondsLinesGroup);\r\n  }\r\n\r\n  static CartoonChains(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createExtrudedChains(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Subseqs, groups.ResiduesSubseqGroup);\r\n  }\r\n\r\n  static TraceChains(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CClosedCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Subseqs, groups.ResiduesTraceGroup);\r\n  }\r\n\r\n  static NucleicSpheres(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createSpheres(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Nucleic, groups.NucleicSpheresGroup);\r\n  }\r\n\r\n  static NucleicCylinders(caps, settings) {\r\n    const gfxTriplet = MeshCreator.create2CCylinders(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Nucleic, groups.NucleicCylindersGroup);\r\n  }\r\n\r\n  static ALoopsTorus(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createExtrudedChains(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Aromatic, groups.AromaticTorusGroup);\r\n  }\r\n\r\n  static ALoopsLines(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createChunkedLines(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Aromatic, groups.AromaticLinesGroup);\r\n  }\r\n\r\n  static QuickSurfGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createQuickSurface(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSurfaceGroup);\r\n  }\r\n\r\n  static ContactSurfaceGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createContactSurface(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSurfaceGroup);\r\n  }\r\n\r\n  static SASSESSurfaceGeo(caps, settings, renderParams) {\r\n    const gfxTriplet = MeshCreator.createSASSES(caps, settings, renderParams);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsSASSESGroupStub);\r\n  }\r\n\r\n  static TextLabelsGeo(caps, settings) {\r\n    const gfxTriplet = MeshCreator.createLabels(caps, settings);\r\n\r\n    return _bakeGroup(gfxTriplet, processors.Atoms, groups.AtomsTextGroup);\r\n  }\r\n}\r\n\r\nexport default GroupsFactory;\r\n","import _ from 'lodash';\r\nimport makeContextDependent from '../../utils/makeContextDependent';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\nimport factory from './groups/GroupsFactory';\r\n\r\n/**\r\n * Create new mode.\r\n *\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the mode after its creation.\r\n *\r\n * @exports Mode\r\n * @this Mode\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all available modes used for building and displaying molecule geometry.\r\n */\r\nclass Mode {\r\n  constructor(opts) {\r\n    if (this.constructor === Mode) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Mode options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.opts = _.merge(utils.deriveDeep(this.settings.now.modes[this.id], true), opts);\r\n  }\r\n\r\n  /**\r\n   * Get mode identification, probably with options.\r\n   * @returns {string|Array} Mode identifier string ({@link Mode#id}) or two-element array containing both mode\r\n   *   identifier and options ({@link Mode#opts}).\r\n   * Options are returned if they were changed during or after the mode creation.\r\n   */\r\n  identify() {\r\n    const diff = utils.objectsDiff(this.opts, this.settings.now.modes[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      return [this.id, diff];\r\n    }\r\n    return this.id;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const polyComplexity = this.opts.polyComplexity ? this.opts.polyComplexity[this.settings.now.resolution] : 0;\r\n    const groupList = this.depGroups;\r\n    const groupCount = groupList.length;\r\n    const group = new gfxutils.RCGroup();\r\n    const self = this;\r\n    for (let i = 0; i < groupCount; ++i) {\r\n      let currGroup = groupList[i];\r\n      let renderParams = {};\r\n      if (_.isArray(currGroup)) {\r\n        renderParams = currGroup[1].call(this);\r\n        [currGroup] = currGroup;\r\n      }\r\n      const Group = factory[currGroup](null, this.settings, renderParams);\r\n      const newGroup = new Group(complex, colorer, self, polyComplexity, mask, material);\r\n      if (newGroup.children.length > 0) {\r\n        group.add(newGroup);\r\n      }\r\n    }\r\n    return group;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Mode.prototype);\r\n\r\n/**\r\n* Mode identifier.\r\n* @type {string}\r\n*/\r\nMode.prototype.id = '__';\r\n\r\n/**\r\n * Mode geo groups.\r\n * @type {Array}\r\n */\r\nMode.prototype.depGroups = [];\r\n\r\nexport default Mode;\r\n","import Mode from './Mode';\r\n\r\nfunction getRenderParams() {\r\n  return {\r\n    lineWidth: this.opts.lineWidth,\r\n  };\r\n}\r\n\r\nclass LinesMode extends Mode {\r\n  static id = 'LN';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    this.depGroups = this.depGroups.slice(0); // clone depGroups to prevent prototype edits\r\n    const groups = this.depGroups;\r\n    for (let i = 0, n = groups.length; i < n; ++i) {\r\n      groups[i] = [groups[i], getRenderParams];\r\n    }\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n\r\n  calcAtomRadius() {\r\n    return this.opts.atom;\r\n  }\r\n\r\n  getAromaticOffset() {\r\n    return this.opts.offsarom;\r\n  }\r\n\r\n  getAromaticArcChunks() {\r\n    return this.opts.chunkarom;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n}\r\n\r\nLinesMode.prototype.id = 'LN';\r\nLinesMode.prototype.name = 'Lines';\r\nLinesMode.prototype.shortName = 'Lines';\r\nLinesMode.prototype.depGroups = [\r\n  'ALoopsLines',\r\n  'BondsLines',\r\n  'OrphanedAtomsCrosses',\r\n];\r\n\r\nexport default LinesMode;\r\n","/* eslint-disable no-magic-numbers */\r\nimport Mode from './Mode';\r\n\r\nclass LicoriceMode extends Mode {\r\n  static id = 'LC';\r\n\r\n  calcAtomRadius(_atom) {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  calcStickRadius() {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  calcSpaceFraction() {\r\n    return this.opts.space;\r\n  }\r\n\r\n  getAromRadius() {\r\n    return this.opts.aromrad;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n}\r\n\r\nLicoriceMode.prototype.id = 'LC';\r\nLicoriceMode.prototype.name = 'Licorice';\r\nLicoriceMode.prototype.shortName = 'Licorice';\r\nLicoriceMode.prototype.depGroups = [\r\n  'AtomsSpheres',\r\n  'BondsCylinders',\r\n  'ALoopsTorus',\r\n];\r\n\r\nexport default LicoriceMode;\r\n","/* eslint-disable no-magic-numbers */\r\nimport Mode from './Mode';\r\n\r\nclass BallsAndSticksMode extends Mode {\r\n  static id = 'BS';\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius * this.opts.atom;\r\n  }\r\n\r\n  calcStickRadius() {\r\n    return this.opts.bond;\r\n  }\r\n\r\n  getAromRadius() {\r\n    return this.opts.aromrad;\r\n  }\r\n\r\n  showAromaticLoops() {\r\n    return this.opts.showarom;\r\n  }\r\n\r\n  calcSpaceFraction() {\r\n    return this.opts.space;\r\n  }\r\n\r\n  drawMultiorderBonds() {\r\n    return this.opts.multibond;\r\n  }\r\n}\r\n\r\nBallsAndSticksMode.prototype.id = 'BS';\r\nBallsAndSticksMode.prototype.name = 'Balls and Sticks';\r\nBallsAndSticksMode.prototype.shortName = 'Balls';\r\nBallsAndSticksMode.prototype.depGroups = [\r\n  'AtomsSpheres',\r\n  'BondsCylinders',\r\n  'ALoopsTorus',\r\n];\r\n\r\nexport default BallsAndSticksMode;\r\n","import Mode from './Mode';\r\n\r\nclass VanDerWaalsMode extends Mode {\r\n  static id = 'VW';\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n}\r\n\r\nVanDerWaalsMode.prototype.id = 'VW';\r\nVanDerWaalsMode.prototype.name = 'Van der Waals';\r\nVanDerWaalsMode.prototype.shortName = 'VDW';\r\nVanDerWaalsMode.prototype.depGroups = ['AtomsSpheres'];\r\n\r\nexport default VanDerWaalsMode;\r\n","import Mode from './Mode';\r\n\r\nclass TraceMode extends Mode {\r\n  static id = 'TR';\r\n\r\n  calcStickRadius() {\r\n    return this.opts.radius;\r\n  }\r\n}\r\n\r\nTraceMode.prototype.id = 'TR';\r\nTraceMode.prototype.name = 'Trace';\r\nTraceMode.prototype.shortName = 'Trace';\r\nTraceMode.prototype.depGroups = ['TraceChains'];\r\n\r\nexport default TraceMode;\r\n","import * as THREE from 'three';\r\nimport Mode from './Mode';\r\n\r\nclass TubeMode extends Mode {\r\n  static id = 'TU';\r\n\r\n  getResidueRadius(_residue) {\r\n    return this.TUBE_RADIUS;\r\n  }\r\n\r\n  getHeightSegmentsRatio() {\r\n    return this.opts.heightSegmentsRatio;\r\n  }\r\n\r\n  getTension() {\r\n    return this.opts.tension;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const rad = this.opts.radius;\r\n    this.TUBE_RADIUS = new THREE.Vector2(rad, rad);\r\n\r\n    return Mode.prototype.buildGeometry.call(this, complex, colorer, mask, material);\r\n  }\r\n}\r\n\r\nTubeMode.prototype.id = 'TU';\r\nTubeMode.prototype.name = 'Tube';\r\nTubeMode.prototype.shortName = 'Tube';\r\nTubeMode.prototype.depGroups = ['CartoonChains'];\r\n\r\nexport default TubeMode;\r\n","import * as THREE from 'three';\r\nimport Mode from './Mode';\r\n\r\nclass CartoonMode extends Mode {\r\n  static id = 'CA';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    // cache for secondary structure options\r\n    this.secCache = {};\r\n  }\r\n\r\n  getResidueStartRadius(residue) {\r\n    const second = residue.getSecondary();\r\n    if (!second || !second.generic) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    const secOpts = this.secCache[second.generic];\r\n    if (!secOpts) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    if (second.term === residue) {\r\n      return secOpts.start;\r\n    }\r\n    return secOpts.center;\r\n  }\r\n\r\n  getResidueEndRadius(residue) {\r\n    const second = residue.getSecondary();\r\n    if (second === null || !second.generic) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    const secOpts = this.secCache[second.generic];\r\n    if (!secOpts) {\r\n      return this.TUBE_RADIUS;\r\n    }\r\n    if (second.term === residue) {\r\n      return this.ARROW_END;\r\n    }\r\n    return secOpts.center;\r\n  }\r\n\r\n  getResidueRadius(residue, val) {\r\n    const startRad = this.getResidueStartRadius(residue);\r\n    if (val === 0) {\r\n      return startRad;\r\n    }\r\n\r\n    const endRad = this.getResidueEndRadius(residue);\r\n    if (val === 2) {\r\n      return endRad;\r\n    }\r\n\r\n    return startRad.clone().lerp(endRad, val / 2.0);\r\n  }\r\n\r\n  calcStickRadius(_res) {\r\n    return this.opts.radius;\r\n  }\r\n\r\n  getHeightSegmentsRatio() {\r\n    return this.opts.heightSegmentsRatio;\r\n  }\r\n\r\n  getTension() {\r\n    return this.opts.tension;\r\n  }\r\n\r\n  buildGeometry(complex, colorer, mask, material) {\r\n    const tubeRad = this.opts.radius;\r\n    const secHeight = this.opts.depth;\r\n\r\n    this.TUBE_RADIUS = new THREE.Vector2(tubeRad, tubeRad);\r\n    this.ARROW_END = new THREE.Vector2(secHeight, tubeRad);\r\n    const secCache = {};\r\n    const secData = this.opts.ss;\r\n    /* eslint-disable guard-for-in */\r\n    for (const prop in secData) {\r\n      secCache[prop] = {\r\n        center: new THREE.Vector2(secHeight, secData[prop].width),\r\n        start: new THREE.Vector2(secHeight, secData[prop].arrow),\r\n      };\r\n    }\r\n    this.secCache = secCache;\r\n    /* eslint-enable guard-for-in */\r\n\r\n    return Mode.prototype.buildGeometry.call(this, complex, colorer, mask, material);\r\n  }\r\n}\r\n\r\nCartoonMode.prototype.id = 'CA';\r\nCartoonMode.prototype.name = 'Cartoon';\r\nCartoonMode.prototype.shortName = 'Cartoon';\r\nCartoonMode.prototype.depGroups = [\r\n  'CartoonChains',\r\n  'NucleicSpheres',\r\n  'NucleicCylinders',\r\n];\r\n\r\nexport default CartoonMode;\r\n","import chem from '../../chem';\r\nimport Mode from './Mode';\r\n\r\nconst { selectors } = chem;\r\n\r\nfunction getRenderParams() {\r\n  return {\r\n    wireframe: this.opts.wireframe,\r\n    zClip: this.opts.zClip,\r\n  };\r\n}\r\n\r\nclass SurfaceMode extends Mode {\r\n  constructor(opts) {\r\n    super(opts);\r\n    this.depGroups = this.depGroups.slice(0); // clone depGroups to prevent prototype edits\r\n    const surfaces = this.surfaceNames;\r\n    const groups = this.depGroups;\r\n    for (let i = 0, n = surfaces.length; i < n; ++i) {\r\n      groups[groups.length] = [surfaces[i], getRenderParams];\r\n    }\r\n  }\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n\r\n  getVisibilitySelector() {\r\n    let visibilitySelector = null;\r\n    if (this.opts.subset !== '') {\r\n      const res = selectors.parse(this.opts.subset);\r\n      if (!res.error) {\r\n        visibilitySelector = res.selector;\r\n      }\r\n    }\r\n    return visibilitySelector;\r\n  }\r\n}\r\n\r\nSurfaceMode.prototype.isSurface = true;\r\nSurfaceMode.prototype.surfaceNames = [];\r\n\r\nexport default SurfaceMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass QuickSurfaceMode extends SurfaceMode {\r\n  static id = 'QS';\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      useBeads: false,\r\n      isoValue: this.opts.isoValue,\r\n      gaussLim: this.opts.gaussLim[this.settings.now.resolution],\r\n      radScale: this.opts.scale,\r\n      gridSpacing: this.opts.gridSpacing[this.settings.now.resolution],\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n    };\r\n  }\r\n}\r\n\r\nQuickSurfaceMode.prototype.id = 'QS';\r\nQuickSurfaceMode.prototype.name = 'Quick Surface';\r\nQuickSurfaceMode.prototype.shortName = 'Quick Surf';\r\nQuickSurfaceMode.prototype.surfaceNames = ['QuickSurfGeo'];\r\n\r\nexport default QuickSurfaceMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass IsoSurfaceMode extends SurfaceMode {\r\n  constructor(excludeProbe, opts) {\r\n    super(opts);\r\n    this._excludeProbe = excludeProbe;\r\n  }\r\n\r\n  calcAtomRadius(atom) {\r\n    return atom.element.radius;\r\n  }\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      gridSpacing: this.opts.polyComplexity[this.settings.now.resolution],\r\n      radScale: this._radScale,\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n      probeRadius: this.opts.probeRadius,\r\n      excludeProbe: this._excludeProbe,\r\n    };\r\n  }\r\n}\r\n\r\nIsoSurfaceMode.prototype.id = 'SU';\r\nIsoSurfaceMode.prototype.name = 'Surface';\r\nIsoSurfaceMode.prototype.shortName = 'Surface';\r\nIsoSurfaceMode.prototype.surfaceNames = ['SASSESSurfaceGeo'];\r\n\r\nIsoSurfaceMode.prototype._radScale = 1;\r\nIsoSurfaceMode.prototype._excludeProbe = false;\r\n\r\nexport default IsoSurfaceMode;\r\n","import IsoSurfaceMode from './IsoSurfaceMode';\r\n\r\nclass IsoSurfaceSASMode extends IsoSurfaceMode {\r\n  static id = 'SA';\r\n\r\n  constructor(opts) {\r\n    super(false, opts);\r\n  }\r\n}\r\n\r\nIsoSurfaceSASMode.prototype.id = 'SA';\r\nIsoSurfaceSASMode.prototype.name = 'Solvent Accessible Surface';\r\nIsoSurfaceSASMode.prototype.shortName = 'SAS';\r\n\r\nexport default IsoSurfaceSASMode;\r\n","import IsoSurfaceMode from './IsoSurfaceMode';\r\n\r\nclass IsoSurfaceSESMode extends IsoSurfaceMode {\r\n  static id = 'SE';\r\n\r\n  constructor(opts) {\r\n    super(true, opts);\r\n  }\r\n}\r\n\r\nIsoSurfaceSESMode.prototype.id = 'SE';\r\nIsoSurfaceSESMode.prototype.name = 'Solvent Excluded Surface';\r\nIsoSurfaceSESMode.prototype.shortName = 'SES';\r\n\r\nexport default IsoSurfaceSESMode;\r\n","import SurfaceMode from './SurfaceMode';\r\n\r\nclass ContactSurfaceMode extends SurfaceMode {\r\n  static id = 'CS';\r\n\r\n  getSurfaceOpts() {\r\n    return {\r\n      probeRadius: this.opts.probeRadius,\r\n      radScale: this.opts.polyComplexity[this.settings.now.resolution],\r\n      scaleFactor: this.opts.polyComplexity[this.settings.now.resolution],\r\n      gridSpacing: 1.0 / this.opts.polyComplexity[this.settings.now.resolution],\r\n      isoValue: this.opts.isoValue,\r\n      probePositions: this.opts.probePositions,\r\n      zClip: this.opts.zClip,\r\n      visibilitySelector: this.getVisibilitySelector(),\r\n    };\r\n  }\r\n}\r\n\r\nContactSurfaceMode.prototype.id = 'CS';\r\nContactSurfaceMode.prototype.name = 'Contact Surface';\r\nContactSurfaceMode.prototype.shortName = 'Contact Surf';\r\nContactSurfaceMode.prototype.isSurface = true;\r\nContactSurfaceMode.prototype.surfaceNames = ['ContactSurfaceGeo'];\r\n\r\nexport default ContactSurfaceMode;\r\n","import _ from 'lodash';\r\nimport Mode from './Mode';\r\n\r\nclass TextMode extends Mode {\r\n  static id = 'TX';\r\n\r\n  getTemplateOptions() {\r\n    return this.opts.template;\r\n  }\r\n\r\n  getLabelOpts() {\r\n    return _.merge(this.opts, {\r\n      colors: true,\r\n      adjustColor: true,\r\n      transparent: true,\r\n    });\r\n  }\r\n}\r\n\r\nTextMode.prototype.id = 'TX';\r\nTextMode.prototype.name = 'Text mode';\r\nTextMode.prototype.shortName = 'Text';\r\nTextMode.prototype.depGroups = ['TextLabelsGeo'];\r\n\r\nexport default TextMode;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport LinesMode from './modes/LinesMode';\r\nimport LicoriceMode from './modes/LicoriceMode';\r\nimport BallsAndSticksMode from './modes/BallsAndSticksMode';\r\nimport VanDerWaalsMode from './modes/VanDerWaalsMode';\r\nimport TraceMode from './modes/TraceMode';\r\nimport TubeMode from './modes/TubeMode';\r\nimport CartoonMode from './modes/CartoonMode';\r\nimport QuickSurfaceMode from './modes/QuickSurfaceMode';\r\nimport IsoSurfaceSASMode from './modes/IsoSurfaceSASMode';\r\nimport IsoSurfaceSESMode from './modes/IsoSurfaceSESMode';\r\nimport ContactSurfaceMode from './modes/ContactSurfaceMode';\r\nimport TextMode from './modes/TextMode';\r\n\r\nconst modes = new EntityList([\r\n  LinesMode,\r\n  LicoriceMode,\r\n  BallsAndSticksMode,\r\n  VanDerWaalsMode,\r\n  TraceMode,\r\n  TubeMode,\r\n  CartoonMode,\r\n  QuickSurfaceMode,\r\n  IsoSurfaceSASMode,\r\n  IsoSurfaceSESMode,\r\n  ContactSurfaceMode,\r\n  TextMode,\r\n]);\r\n\r\nexport default modes;\r\n","import _ from 'lodash';\r\n\r\nfunction clamp(x, a, b) {\r\n  return x <= b ? x < 0 ? 0 : x : b;\r\n}\r\n\r\nfunction lerpColor(c1, c2, alpha) {\r\n  const beta = 1 - alpha;\r\n  const r1 = (c1 >> 16) & 0xff;\r\n  const g1 = (c1 >> 8) & 0xff;\r\n  const b1 = c1 & 0xff;\r\n  const r2 = (c2 >> 16) & 0xff;\r\n  const g2 = (c2 >> 8) & 0xff;\r\n  const b2 = c2 & 0xff;\r\n  const r = beta * r1 + alpha * r2;\r\n  const g = beta * g1 + alpha * g2;\r\n  const b = beta * b1 + alpha * b2;\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\nclass Palette {\r\n  constructor(name, id) {\r\n    this.name = name || 'Custom';\r\n    this.id = id || 'CP';\r\n  }\r\n\r\n  getElementColor(name, asIs = false) {\r\n    const color = this.elementColors[name];\r\n    return color === undefined && !asIs ? this.defaultElementColor : color;\r\n  }\r\n\r\n  getResidueColor(name, asIs = false) {\r\n    const color = this.residueColors[name];\r\n    return color === undefined && !asIs ? this.defaultResidueColor : color;\r\n  }\r\n\r\n  getChainColor(name) {\r\n    let chain = name.charCodeAt(0);\r\n    chain = ((chain < 0 ? 0 : chain >= 256 ? chain - 256 : chain) & 0x1F)\r\n      % this.chainColors.length;\r\n    return this.chainColors[chain];\r\n  }\r\n\r\n  getSecondaryColor(type, asIs = false) {\r\n    const color = this.secondaryColors[type];\r\n    return color === undefined && !asIs ? this.defaultSecondaryColor : color;\r\n  }\r\n\r\n  getSequentialColor(index) {\r\n    const { colors } = this;\r\n    const len = colors.length;\r\n    return index < 0 ? colors[(index % len) + len] : colors[index % len];\r\n  }\r\n\r\n  getGradientColor(value, gradientName) {\r\n    const gradient = this.gradients[gradientName];\r\n    if (!gradient) {\r\n      return this.defaultNamedColor;\r\n    }\r\n    const count = gradient.length;\r\n    const index = value * (count - 1);\r\n    let left = Math.floor(index);\r\n    const right = clamp(left + 1, 0, count - 1);\r\n    left = clamp(left, 0, count - 1);\r\n    return lerpColor(gradient[left], gradient[right], index - left);\r\n  }\r\n\r\n  getNamedColor(name, asIs = false) {\r\n    const color = this.namedColors[name];\r\n    return color === undefined && !asIs ? this.defaultNamedColor : color;\r\n  }\r\n}\r\n\r\n_.assign(Palette.prototype, {\r\n  colors: [0xFFFFFF, 0xFF0000, 0x00FF00, 0x0000FF, 0x808080],\r\n\r\n  minRangeColor: 0x000000,\r\n  midRangeColor: 0x7F7F7F,\r\n  maxRangeColor: 0xFFFFFF,\r\n\r\n  defaultElementColor: 0xFFFFFF,\r\n  elementColors: {},\r\n\r\n  defaultResidueColor: 0xFFFFFF,\r\n  residueColors: {},\r\n\r\n  chainColors: [0xFFFFFF],\r\n\r\n  defaultSecondaryColor: 0xFFFFFF,\r\n  secondaryColors: {},\r\n\r\n  defaultGradientColor: 0x000000,\r\n\r\n  defaultNamedColor: 0xFFFFFF,\r\n  namedColorsArray: [\r\n    /* eslint-disable no-multi-spaces */\r\n    ['indianred',               0xcd5c5c],\r\n    ['lightcoral',              0xf08080],\r\n    ['salmon',                  0xfa8072],\r\n    ['darksalmon',              0xe9967a],\r\n    ['lightsalmon',             0xffa07a],\r\n    ['crimson',                 0xdc143c],\r\n    ['red',                     0xff0000],\r\n    ['firebrick',               0xb22222],\r\n    ['darkred',                 0x8b0000],\r\n    ['pink',                    0xffc0cb],\r\n    ['lightpink',               0xffb6c1],\r\n    ['hotpink',                 0xff69b4],\r\n    ['deeppink',                0xff1493],\r\n    ['mediumvioletred',         0xc71585],\r\n    ['palevioletred',           0xdb7093],\r\n    ['coral',                   0xff7f50],\r\n    ['tomato',                  0xff6347],\r\n    ['orangered',               0xff4500],\r\n    ['darkorange',              0xff8c00],\r\n    ['orange',                  0xffa500],\r\n    ['gold',                    0xffd700],\r\n    ['yellow',                  0xffff00],\r\n    ['lightyellow',             0xffffe0],\r\n    ['lemonchiffon',            0xfffacd],\r\n    ['lightgoldenrodyellow',    0xfafad2],\r\n    ['papayawhip',              0xffefd5],\r\n    ['moccasin',                0xffe4b5],\r\n    ['peachpuff',               0xffdab9],\r\n    ['palegoldenrod',           0xeee8aa],\r\n    ['khaki',                   0xf0e68c],\r\n    ['darkkhaki',               0xbdb76b],\r\n    ['lavender',                0xe6e6fa],\r\n    ['thistle',                 0xd8bfd8],\r\n    ['plum',                    0xdda0dd],\r\n    ['violet',                  0xee82ee],\r\n    ['orchid',                  0xda70d6],\r\n    ['fuchsia',                 0xff00ff],\r\n    ['magenta',                 0xff00ff],\r\n    ['mediumorchid',            0xba55d3],\r\n    ['mediumpurple',            0x9370db],\r\n    ['rebeccapurple',           0x663399],\r\n    ['blueviolet',              0x8a2be2],\r\n    ['darkviolet',              0x9400d3],\r\n    ['darkorchid',              0x9932cc],\r\n    ['darkmagenta',             0x8b008b],\r\n    ['purple',                  0x800080],\r\n    ['indigo',                  0x4b0082],\r\n    ['slateblue',               0x6a5acd],\r\n    ['mediumslateblue',         0x7b68ee],\r\n    ['darkslateblue',           0x483d8b],\r\n    ['greenyellow',             0xadff2f],\r\n    ['chartreuse',              0x7fff00],\r\n    ['lawngreen',               0x7cfc00],\r\n    ['lime',                    0x00ff00],\r\n    ['limegreen',               0x32cd32],\r\n    ['palegreen',               0x98fb98],\r\n    ['lightgreen',              0x90ee90],\r\n    ['mediumspringgreen',       0x00fa9a],\r\n    ['springgreen',             0x00ff7f],\r\n    ['mediumseagreen',          0x3cb371],\r\n    ['seagreen',                0x2e8b57],\r\n    ['forestgreen',             0x228b22],\r\n    ['green',                   0x008000],\r\n    ['darkgreen',               0x006400],\r\n    ['yellowgreen',             0x9acd32],\r\n    ['olivedrab',               0x6b8e23],\r\n    ['olive',                   0x808000],\r\n    ['darkolivegreen',          0x556b2f],\r\n    ['mediumaquamarine',        0x66cdaa],\r\n    ['darkseagreen',            0x8fbc8f],\r\n    ['lightseagreen',           0x20b2aa],\r\n    ['darkcyan',                0x008b8b],\r\n    ['teal',                    0x008080],\r\n    ['aqua',                    0x00ffff],\r\n    ['cyan',                    0x00ffff],\r\n    ['lightcyan',               0xe0ffff],\r\n    ['paleturquoise',           0xafeeee],\r\n    ['aquamarine',              0x7fffd4],\r\n    ['turquoise',               0x40e0d0],\r\n    ['mediumturquoise',         0x48d1cc],\r\n    ['darkturquoise',           0x00ced1],\r\n    ['cadetblue',               0x5f9ea0],\r\n    ['steelblue',               0x4682b4],\r\n    ['lightsteelblue',          0xb0c4de],\r\n    ['powderblue',              0xb0e0e6],\r\n    ['lightblue',               0xadd8e6],\r\n    ['skyblue',                 0x87ceeb],\r\n    ['lightskyblue',            0x87cefa],\r\n    ['deepskyblue',             0x00bfff],\r\n    ['dodgerblue',              0x1e90ff],\r\n    ['cornflowerblue',          0x6495ed],\r\n    ['royalblue',               0x4169e1],\r\n    ['blue',                    0x0000ff],\r\n    ['mediumblue',              0x0000cd],\r\n    ['darkblue',                0x00008b],\r\n    ['navy',                    0x000080],\r\n    ['midnightblue',            0x191970],\r\n    ['cornsilk',                0xfff8dc],\r\n    ['blanchedalmond',          0xffebcd],\r\n    ['bisque',                  0xffe4c4],\r\n    ['navajowhite',             0xffdead],\r\n    ['wheat',                   0xf5deb3],\r\n    ['burlywood',               0xdeb887],\r\n    ['tan',                     0xd2b48c],\r\n    ['rosybrown',               0xbc8f8f],\r\n    ['sandybrown',              0xf4a460],\r\n    ['goldenrod',               0xdaa520],\r\n    ['darkgoldenrod',           0xb8860b],\r\n    ['peru',                    0xcd853f],\r\n    ['chocolate',               0xd2691e],\r\n    ['saddlebrown',             0x8b4513],\r\n    ['sienna',                  0xa0522d],\r\n    ['brown',                   0xa52a2a],\r\n    ['maroon',                  0x800000],\r\n    ['white',                   0xffffff],\r\n    ['snow',                    0xfffafa],\r\n    ['honeydew',                0xf0fff0],\r\n    ['mintcream',               0xf5fffa],\r\n    ['azure',                   0xf0ffff],\r\n    ['aliceblue',               0xf0f8ff],\r\n    ['ghostwhite',              0xf8f8ff],\r\n    ['whitesmoke',              0xf5f5f5],\r\n    ['seashell',                0xfff5ee],\r\n    ['beige',                   0xf5f5dc],\r\n    ['oldlace',                 0xfdf5e6],\r\n    ['floralwhite',             0xfffaf0],\r\n    ['ivory',                   0xfffff0],\r\n    ['antiquewhite',            0xfaebd7],\r\n    ['linen',                   0xfaf0e6],\r\n    ['lavenderblush',           0xfff0f5],\r\n    ['mistyrose',               0xffe4e1],\r\n    ['gainsboro',               0xdcdcdc],\r\n    ['lightgray',               0xd3d3d3],\r\n    ['silver',                  0xc0c0c0],\r\n    ['darkgray',                0xa9a9a9],\r\n    ['gray',                    0x808080],\r\n    ['dimgray',                 0x696969],\r\n    ['lightslategray',          0x778899],\r\n    ['slategray',               0x708090],\r\n    ['darkslategray',           0x2f4f4f],\r\n    ['black',                   0x000000],\r\n    /* eslint-enable no-multi-spaces */\r\n  ],\r\n\r\n  namedColors: {},\r\n  /* eslint-enable no-magic-numbers */\r\n\r\n  gradients: {\r\n    rainbow: [\r\n      0x0000ff, // blue\r\n      0x00ffff, // cyan\r\n      0x00ff00, // green\r\n      0xffff00, // yellow\r\n      0xff0000, // red\r\n    ],\r\n    temp: [\r\n      0x0000ff, // blue\r\n      0x007fff, // light-blue\r\n      0xffffff, // white\r\n      0xff7f00, // orange\r\n      0xff0000, // red\r\n    ],\r\n    hot: [\r\n      0xffffff, // white\r\n      0xff7f00, // orange\r\n      0xff0000, // red\r\n    ],\r\n    cold: [\r\n      0xffffff, // white\r\n      0x007fff, // light-blue\r\n      0x0000ff, // blue\r\n    ],\r\n    'blue-red': [\r\n      0x0000ff, // blue\r\n      0xffffff, // white\r\n      0xff0000, // red\r\n    ],\r\n    reds: [\r\n      0xffffff, // white\r\n      0xff0000, // red\r\n    ],\r\n    blues: [\r\n      0xffffff, // white\r\n      0x0000ff, // blue\r\n    ],\r\n  },\r\n});\r\n\r\nconst { namedColorsArray, namedColors } = Palette.prototype;\r\n\r\nfor (let i = 0, { length } = namedColorsArray; i < length; ++i) {\r\n  const [name, value] = namedColorsArray[i];\r\n  namedColors[name] = value;\r\n}\r\n\r\nexport default Palette;\r\n","import Palette from './Palette';\r\n\r\nconst palette = new Palette('CPK', 'CP');\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  C: 0x202020,\r\n  N: 0x2060FF,\r\n  O: 0xEE2010,\r\n  F: 0x00FF00,\r\n  P: 0x8020FF,\r\n  S: 0xFFFF00,\r\n  CL: 0x00BB00,\r\n  FE: 0xD0D0D0,\r\n  CO: 0xD0D0D0,\r\n  NI: 0xD0D0D0,\r\n  CU: 0xD0D0D0,\r\n  BR: 0x008800,\r\n  I: 0x005500,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\nexport default palette;\r\n","import Palette from './Palette';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst palette = new Palette('Jmol', 'JM');\r\n\r\npalette.colors = [\r\n  /* eslint-disable no-magic-numbers */\r\n  0x0000FF, // blue\r\n  0x0055FF, //\r\n  0x00ABFF, //\r\n  0x00FFFF, // cyan\r\n  0x00FFAB, //\r\n  0x00FF55, //\r\n  0x00FF00, // green\r\n  0x55FF00, //\r\n  0xABFF00, //\r\n  0xFFFF00, // yellow\r\n  0xFFAB00, //\r\n  0xFF5500, //\r\n  0xFF0000, // red\r\n  0xFF0055, //\r\n  0xFF00AB, //\r\n  0xFF00FF, // magenta\r\n  0xAB00FF, //\r\n  0x5500FF, //\r\n  /* eslint-enable no-magic-numbers */\r\n];\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  D: 0xFFFFC0,\r\n  T: 0xFFFFA0,\r\n  HE: 0xD9FFFF,\r\n  LI: 0xCC80FF,\r\n  BE: 0xC2FF00,\r\n  B: 0xFFB5B5,\r\n  C: 0x909090,\r\n  N: 0x3050F8,\r\n  O: 0xFF0D0D,\r\n  F: 0x90E050,\r\n  NE: 0xB3E3F5,\r\n  NA: 0xAB5CF2,\r\n  MG: 0x8AFF00,\r\n  AL: 0xBFA6A6,\r\n  SI: 0xF0C8A0,\r\n  P: 0xFF8000,\r\n  S: 0xFFFF30,\r\n  CL: 0x1FF01F,\r\n  AR: 0x80D1E3,\r\n  K: 0x8F40D4,\r\n  CA: 0x3DFF00,\r\n  SC: 0xE6E6E6,\r\n  TI: 0xBFC2C7,\r\n  V: 0xA6A6AB,\r\n  CR: 0x8A99C7,\r\n  MN: 0x9C7AC7,\r\n  FE: 0xE06633,\r\n  CO: 0xF090A0,\r\n  NI: 0x50D050,\r\n  CU: 0xC88033,\r\n  ZN: 0x7D80B0,\r\n  GA: 0xC28F8F,\r\n  GE: 0x668F8F,\r\n  AS: 0xBD80E3,\r\n  SE: 0xFFA100,\r\n  BR: 0xA62929,\r\n  KR: 0x5CB8D1,\r\n  RB: 0x702EB0,\r\n  SR: 0x00FF00,\r\n  Y: 0x94FFFF,\r\n  ZR: 0x94E0E0,\r\n  NB: 0x73C2C9,\r\n  MO: 0x54B5B5,\r\n  TC: 0x3B9E9E,\r\n  RU: 0x248F8F,\r\n  RH: 0x0A7D8C,\r\n  PD: 0x006985,\r\n  AG: 0xC0C0C0,\r\n  CD: 0xFFD98F,\r\n  IN: 0xA67573,\r\n  SN: 0x668080,\r\n  SB: 0x9E63B5,\r\n  TE: 0xD47A00,\r\n  I: 0x940094,\r\n  XE: 0x429EB0,\r\n  CS: 0x57178F,\r\n  BA: 0x00C900,\r\n  LA: 0x70D4FF,\r\n  CE: 0xFFFFC7,\r\n  PR: 0xD9FFC7,\r\n  ND: 0xC7FFC7,\r\n  PM: 0xA3FFC7,\r\n  SM: 0x8FFFC7,\r\n  EU: 0x61FFC7,\r\n  GD: 0x45FFC7,\r\n  TB: 0x30FFC7,\r\n  DY: 0x1FFFC7,\r\n  HO: 0x00FF9C,\r\n  ER: 0x00E675,\r\n  TM: 0x00D452,\r\n  YB: 0x00BF38,\r\n  LU: 0x00AB24,\r\n  HF: 0x4DC2FF,\r\n  TA: 0x4DA6FF,\r\n  W: 0x2194D6,\r\n  RE: 0x267DAB,\r\n  OS: 0x266696,\r\n  IR: 0x175487,\r\n  PT: 0xD0D0E0,\r\n  AU: 0xFFD123,\r\n  HG: 0xB8B8D0,\r\n  TL: 0xA6544D,\r\n  PB: 0x575961,\r\n  BI: 0x9E4FB5,\r\n  PO: 0xAB5C00,\r\n  AT: 0x754F45,\r\n  RN: 0x428296,\r\n  FR: 0x420066,\r\n  RA: 0x007D00,\r\n  AC: 0x70ABFA,\r\n  TH: 0x00BAFF,\r\n  PA: 0x00A1FF,\r\n  U: 0x008FFF,\r\n  NP: 0x0080FF,\r\n  PU: 0x006BFF,\r\n  AM: 0x545CF2,\r\n  CM: 0x785CE3,\r\n  BK: 0x8A4FE3,\r\n  CF: 0xA136D4,\r\n  ES: 0xB31FD4,\r\n  FM: 0xB31FBA,\r\n  MD: 0xB30DA6,\r\n  NO: 0xBD0D87,\r\n  LR: 0xC70066,\r\n  RF: 0xCC0059,\r\n  DB: 0xD1004F,\r\n  SG: 0xD90045,\r\n  BH: 0xE00038,\r\n  HS: 0xE6002E,\r\n  MT: 0xEB0026,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.defaultResidueColor = 0xBEA06E;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\npalette.residueColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  ALA: 0xC8C8C8,\r\n  ARG: 0x145AFF,\r\n  ASN: 0x00DCDC,\r\n  ASP: 0xE60A0A,\r\n  CYS: 0xE6E600,\r\n  GLN: 0x00DCDC,\r\n  GLU: 0xE60A0A,\r\n  GLY: 0xEBEBEB,\r\n  HIS: 0x8282D2,\r\n  ILE: 0x0F820F,\r\n  LEU: 0x0F820F,\r\n  LYS: 0x145AFF,\r\n  MET: 0xE6E600,\r\n  PHE: 0x3232AA,\r\n  PRO: 0xDC9682,\r\n  SER: 0xFA9600,\r\n  THR: 0xFA9600,\r\n  TRP: 0xB45AB4,\r\n  TYR: 0x3232AA,\r\n  VAL: 0x0F820F,\r\n  A: 0xA0A0FF,\r\n  C: 0xFF8C4B,\r\n  G: 0xFF7070,\r\n  I: 0x80FFFF,\r\n  T: 0xA0FFA0,\r\n  U: 0xFF8080,\r\n  DA: 0xA0A0FF,\r\n  DC: 0xFF8C4B,\r\n  DG: 0xFF7070,\r\n  DI: 0x80FFFF,\r\n  DT: 0xA0FFA0,\r\n  DU: 0xFF8080,\r\n  '+A': 0xA0A0FF,\r\n  '+C': 0xFF8C4B,\r\n  '+G': 0xFF7070,\r\n  '+I': 0x80FFFF,\r\n  '+T': 0xA0FFA0,\r\n  '+U': 0xFF8080,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.chainColors = [\r\n  // ' '->0 'A'->1, 'B'->2\r\n  0xFFffffff, // ' ' & '0' white\r\n  //\r\n  0xFFC0D0FF, // skyblue\r\n  0xFFB0FFB0, // pastel green\r\n  0xFFFFC0C8, // pink\r\n  0xFFFFFF80, // pastel yellow\r\n  0xFFFFC0FF, // pastel magenta\r\n  0xFFB0F0F0, // pastel cyan\r\n  0xFFFFD070, // pastel gold\r\n  0xFFF08080, // lightcoral\r\n\r\n  0xFFF5DEB3, // wheat\r\n  0xFF00BFFF, // deepskyblue\r\n  0xFFCD5C5C, // indianred\r\n  0xFF66CDAA, // mediumaquamarine\r\n  0xFF9ACD32, // yellowgreen\r\n  0xFFEE82EE, // violet\r\n  0xFF00CED1, // darkturquoise\r\n  0xFF00FF7F, // springgreen\r\n  0xFF3CB371, // mediumseagreen\r\n\r\n  0xFF00008B, // darkblue\r\n  0xFFBDB76B, // darkkhaki\r\n  0xFF006400, // darkgreen\r\n  0xFF800000, // maroon\r\n  0xFF808000, // olive\r\n  0xFF800080, // purple\r\n  0xFF008080, // teal\r\n  0xFFB8860B, // darkgoldenrod\r\n  0xFFB22222, // firebrick\r\n];\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\npalette.secondaryColors = {\r\n  [StructuralElementType.HELIX_ALPHA]: 0xFF0080,\r\n  [StructuralElementType.HELIX_PI]: 0x600080,\r\n  [StructuralElementType.HELIX_310]: 0xA00080,\r\n  [StructuralElementType.STRAND]: 0xFFC800,\r\n  [StructuralElementType.TURN]: 0x6080FF,\r\n  dna: 0xAE00FE,\r\n  rna: 0xFD0162,\r\n};\r\n\r\nexport default palette;\r\n","import Palette from './Palette';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst palette = new Palette('VMD', 'VM');\r\n\r\npalette.colors = [\r\n  /* eslint-disable no-magic-numbers */\r\n  0x0000FF, // blue\r\n  0xFF0000, // red\r\n  0x606060, // gray\r\n  0xFF8000, // orange\r\n  0xFFFF00, // yellow\r\n  0x808033, // tan\r\n  0x999999, // silver\r\n  0x00FF00, // green\r\n  0xFFFFFF, // white\r\n  0xFF9999, // pink\r\n  0x40C0C0, // cyan\r\n  0xA600A6, // purple\r\n  0x80E666, // lime\r\n  0xE666B3, // mauve\r\n  0x804D00, // ochre\r\n  0x8080C0, // ice blue\r\n  /* eslint-enable no-magic-numbers */\r\n];\r\n\r\npalette.defaultElementColor = 0x804D00;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from atom_types.csv by atom_types.py.\r\npalette.elementColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  H: 0xFFFFFF,\r\n  C: 0x40BFBF,\r\n  N: 0x0000FF,\r\n  O: 0xFF0000,\r\n  P: 0x808033,\r\n  S: 0xFFFF00,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.defaultResidueColor = 0x40C0C0;\r\n\r\n// DO NOT EDIT MANUALLY! Autogenerated from residue_types.csv by residue_types.py.\r\npalette.residueColors = {\r\n  /* eslint-disable no-magic-numbers */\r\n  ALA: 0x0000FF,\r\n  ARG: 0xFFFFFF,\r\n  ASN: 0x808033,\r\n  ASP: 0xFF0000,\r\n  CYS: 0xFFFF00,\r\n  GLN: 0xFF8000,\r\n  GLU: 0xFF9999,\r\n  GLY: 0xFFFFFF,\r\n  HIS: 0x40C0C0,\r\n  ILE: 0x00FF00,\r\n  LEU: 0xFF9999,\r\n  LYS: 0x40C0C0,\r\n  MET: 0xFFFF00,\r\n  PHE: 0xA600A6,\r\n  PRO: 0x804C00,\r\n  SER: 0xFFFF00,\r\n  THR: 0xE666B3,\r\n  TRP: 0x999999,\r\n  TYR: 0x00FF00,\r\n  VAL: 0x808033,\r\n  A: 0x0000FF,\r\n  C: 0xFF8000,\r\n  G: 0xFFFF00,\r\n  T: 0xA600A6,\r\n  U: 0x00FF00,\r\n  DA: 0x0000FF,\r\n  DC: 0xFF8000,\r\n  DG: 0xFFFF00,\r\n  DT: 0xA600A6,\r\n  DU: 0x00FF00,\r\n  '+A': 0x0000FF,\r\n  '+C': 0xFF8000,\r\n  '+G': 0xFFFF00,\r\n  '+T': 0xA600A6,\r\n  '+U': 0x00FF00,\r\n  WAT: 0x40C0C0,\r\n  H2O: 0x40C0C0,\r\n  HOH: 0x40C0C0,\r\n  /* eslint-enable no-magic-numbers */\r\n};\r\n\r\npalette.chainColors = [0xFFFFFF].concat(palette.colors);\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\npalette.secondaryColors = {\r\n  [StructuralElementType.HELIX_ALPHA]: 0xA600A6,\r\n  [StructuralElementType.HELIX_310]: 0x0000FF,\r\n  [StructuralElementType.HELIX_PI]: 0xFF0000,\r\n  [StructuralElementType.STRAND]: 0xFFFF00,\r\n  [StructuralElementType.BRIDGE]: 0x808033,\r\n  [StructuralElementType.TURN]: 0x40C0C0,\r\n};\r\n\r\nexport default palette;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport cpkPalette from './palettes/cpkPalette';\r\nimport jmolPalette from './palettes/jmolPalette';\r\nimport vmdPalette from './palettes/vmdPalette';\r\n\r\nconst palettes = new EntityList([\r\n  cpkPalette,\r\n  jmolPalette,\r\n  vmdPalette,\r\n]);\r\n\r\nexport default palettes;\r\n","import _ from 'lodash';\r\nimport settings from '../../settings';\r\nimport utils from '../../utils';\r\nimport palettes from '../palettes';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the colorer after its creation.\r\n *\r\n * @exports Colorer\r\n * @this Colorer\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all available coloring algorithms used for building and displaying molecule geometry.\r\n */\r\nclass Colorer {\r\n  constructor(opts) {\r\n    if (this.constructor === Colorer) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Colorer options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.opts = _.merge(utils.deriveDeep(settings.now.colorers[this.id], true), opts);\r\n    /**\r\n     * Palette in use.\r\n     * @type {Palette}\r\n     */\r\n    this.palette = palettes.first;\r\n  }\r\n\r\n  /**\r\n   * Get Colorer identification, probably with options.\r\n   * @returns {string|Array} Colorer identifier string ({@link Colorer#id}) or two-element array containing both colorer\r\n   *   identifier and options ({@link Colorer#opts}).\r\n   * Options are returned if they were changed during or after colorer creation.\r\n   */\r\n  identify() {\r\n    const diff = utils.objectsDiff(this.opts, settings.now.colorers[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      return [this.id, diff];\r\n    }\r\n    return this.id;\r\n  }\r\n}\r\n\r\n/**\r\n * Colorer identifier.\r\n * @type {string}\r\n */\r\n\r\nColorer.prototype.id = '__';\r\n\r\nexport default Colorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Element\r\n *\r\n * @exports ElementColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Coloring algorithm based on chemical element.\r\n */\r\nclass ElementColorer extends Colorer {\r\n  static id = 'EL';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const type = atom.element.name;\r\n    if (type === 'C' && this.opts.carbon >= 0) {\r\n      return this.opts.carbon;\r\n    }\r\n    return this.palette.getElementColor(type);\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.palette.defaultResidueColor;\r\n  }\r\n}\r\n\r\nElementColorer.prototype.id = 'EL';\r\nElementColorer.prototype.name = 'Element';\r\nElementColorer.prototype.shortName = 'Element';\r\n\r\nexport default ElementColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Coloring algorithm based on residue type.\r\n *\r\n * @see ResidueType\r\n *\r\n * @exports ResidueTypeColorer\r\n * @constructor\r\n */\r\nclass ResidueTypeColorer extends Colorer {\r\n  static id = 'RT';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    return this.palette.getResidueColor(residue._type._name);\r\n  }\r\n}\r\n\r\nResidueTypeColorer.prototype.id = 'RT';\r\nResidueTypeColorer.prototype.name = 'Residue Type';\r\nResidueTypeColorer.prototype.shortName = 'Residue';\r\n\r\nexport default ResidueTypeColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass SequenceColorer extends Colorer {\r\n  static id = 'SQ';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const chain = residue._chain;\r\n    if (chain.minSequence === Number.POSITIVE_INFINITY && chain.maxSequence === Number.NEGATIVE_INFINITY) {\r\n      return this.palette.defaultNamedColor;\r\n    }\r\n    const min = chain.minSequence;\r\n    const max = chain.maxSequence > min ? chain.maxSequence : min + 1;\r\n    return this.palette.getGradientColor((residue._sequence - min) / (max - min), this.opts.gradient);\r\n  }\r\n}\r\n\r\nSequenceColorer.prototype.id = 'SQ';\r\nSequenceColorer.prototype.name = 'Sequence';\r\nSequenceColorer.prototype.shortName = 'Sequence';\r\n\r\nexport default SequenceColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass ChainColorer extends Colorer {\r\n  static id = 'CH';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    return this.palette.getChainColor(residue.getChain()._name);\r\n  }\r\n}\r\n\r\nChainColorer.prototype.id = 'CH';\r\nChainColorer.prototype.name = 'Chain';\r\nChainColorer.prototype.shortName = 'Chain';\r\n\r\nexport default ChainColorer;\r\n","import Colorer from './Colorer';\r\nimport ResidueType from '../../chem/ResidueType';\r\n\r\nclass SecondaryStructureColorer extends Colorer {\r\n  static id = 'SS';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    if (residue._type.flags & ResidueType.Flags.DNA) {\r\n      return this.palette.getSecondaryColor('dna');\r\n    }\r\n    if (residue._type.flags & ResidueType.Flags.RNA) {\r\n      return this.palette.getSecondaryColor('rna');\r\n    }\r\n    const secondary = residue.getSecondary();\r\n    if (secondary) {\r\n      let color = this.palette.getSecondaryColor(secondary.type, true);\r\n      if (color === undefined) {\r\n        color = this.palette.getSecondaryColor(secondary.generic);\r\n      }\r\n      return color;\r\n    }\r\n    return this.palette.defaultSecondaryColor;\r\n  }\r\n}\r\n\r\nSecondaryStructureColorer.prototype.id = 'SS';\r\nSecondaryStructureColorer.prototype.name = 'Secondary Structure';\r\nSecondaryStructureColorer.prototype.shortName = 'Structure';\r\n\r\nexport default SecondaryStructureColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass UniformColorer extends Colorer {\r\n  static id = 'UN';\r\n\r\n  getAtomColor(_atom, _complex) {\r\n    return this.opts.color;\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.opts.color;\r\n  }\r\n}\r\n\r\nUniformColorer.prototype.id = 'UN';\r\nUniformColorer.prototype.name = 'Uniform';\r\nUniformColorer.prototype.shortName = 'Uniform';\r\n\r\nexport default UniformColorer;\r\n","import Colorer from './Colorer';\r\nimport selectors from '../../chem/selectors';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @exports ConditionalColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Bicolor coloring algorithm based on a selector string used as a condition.\r\n */\r\nclass ConditionalColorer extends Colorer {\r\n  static id = 'CO';\r\n\r\n  constructor(opts) {\r\n    super(opts);\r\n    const parsed = selectors.parse(this.opts.subset);\r\n    this._subsetCached = parsed.error ? selectors.none() : parsed.selector;\r\n  }\r\n\r\n  getAtomColor(atom, _complex) {\r\n    return this._subsetCached.includesAtom(atom) ? this.opts.color : this.opts.baseColor;\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const subset = this._subsetCached;\r\n    const atoms = residue._atoms;\r\n    for (let i = 0, n = atoms.length; i < n; ++i) {\r\n      if (!subset.includesAtom(atoms[i])) {\r\n        return this.opts.baseColor;\r\n      }\r\n    }\r\n    return this.opts.color;\r\n  }\r\n}\r\n\r\nConditionalColorer.prototype.id = 'CO';\r\nConditionalColorer.prototype.name = 'Conditional';\r\nConditionalColorer.prototype.shortName = 'Conditional';\r\n\r\nexport default ConditionalColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass ConformationColorer extends Colorer {\r\n  static id = 'CF';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    return this.palette.getChainColor(String.fromCharCode(atom.location));\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.palette.defaultResidueColor;\r\n  }\r\n}\r\n\r\nConformationColorer.prototype.id = 'CF';\r\nConformationColorer.prototype.name = 'Conformation';\r\nConformationColorer.prototype.shortName = 'Conformation';\r\n\r\nexport default ConformationColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Temperature\r\n *\r\n * @exports TemperatureColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Coloring algorithm based on temperature of chemical element.\r\n */\r\nclass TemperatureColorer extends Colorer {\r\n  static id = 'TM';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const { opts } = this;\r\n    let factor = 1;\r\n    if (atom.temperature && opts) {\r\n      if (opts.min === opts.max) {\r\n        factor = atom.temperature > opts.max ? 1 : 0;\r\n      } else {\r\n        factor = (atom.temperature - opts.min) / (opts.max - opts.min);\r\n      }\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const { opts } = this;\r\n    if (!opts) {\r\n      return this.palette.defaultGradientColor;\r\n    }\r\n    if (residue.temperature) {\r\n      let factor = 0;\r\n      if (opts.min === opts.max) {\r\n        factor = residue.temperature > opts.max ? 1 : 0;\r\n      } else {\r\n        factor = (residue.temperature - opts.min) / (opts.max - opts.min);\r\n      }\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n}\r\n\r\nTemperatureColorer.prototype.id = 'TM'; // [T]e[M]perature\r\nTemperatureColorer.prototype.name = 'Temperature';\r\nTemperatureColorer.prototype.shortName = 'Temperature';\r\n\r\nexport default TemperatureColorer;\r\n","import Colorer from './Colorer';\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @see Occupancy\r\n *\r\n * @exports OccupancyColorer\r\n * @augments Occupancy\r\n * @constructor\r\n * @classdesc Coloring algorithm based on occupancy of chemical element.\r\n */\r\nclass OccupancyColorer extends Colorer {\r\n  static id = 'OC';\r\n\r\n  _getColorByOccupancy(occupancy, opts) {\r\n    if (occupancy !== undefined) {\r\n      const factor = 1 - occupancy;\r\n      return this.palette.getGradientColor(factor, opts.gradient);\r\n    }\r\n    return this.palette.defaultGradientColor;\r\n  }\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const { opts } = this;\r\n    return this._getColorByOccupancy(atom.occupancy, opts);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const { opts } = this;\r\n    return this._getColorByOccupancy(residue.occupancy, opts);\r\n  }\r\n}\r\n\r\nOccupancyColorer.prototype.id = 'OC'; // [OC]cupancy\r\nOccupancyColorer.prototype.name = 'Occupancy';\r\nOccupancyColorer.prototype.shortName = 'Occupancy';\r\n\r\nexport default OccupancyColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass HydrophobicityColorer extends Colorer {\r\n  static id = 'HY';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    let color = this.palette.defaultResidueColor;\r\n    if (residue._type.hydrophobicity !== undefined) {\r\n      // Kyte Doolitle hydro [-4.5,4.5]->[0.1]\r\n      const min = -4.5;\r\n      const max = 4.5;\r\n      color = this.palette.getGradientColor((residue._type.hydrophobicity - min) / (max - min), this.opts.gradient);\r\n    }\r\n    return color;\r\n  }\r\n}\r\n\r\nHydrophobicityColorer.prototype.id = 'HY';\r\nHydrophobicityColorer.prototype.name = 'Hydrophobicity';\r\nHydrophobicityColorer.prototype.shortName = 'Hydrophobicity';\r\n\r\nexport default HydrophobicityColorer;\r\n","import Colorer from './Colorer';\r\n\r\nclass MoleculeColorer extends Colorer {\r\n  static id = 'MO';\r\n\r\n  getAtomColor(atom, complex) {\r\n    return this.getResidueColor(atom.residue, complex);\r\n  }\r\n\r\n  getResidueColor(residue, _complex) {\r\n    const molecule = residue._molecule;\r\n    const count = _complex.getMoleculeCount();\r\n    if (count > 1) {\r\n      return this.palette.getGradientColor((molecule.index - 1) / (count - 1), this.opts.gradient);\r\n    }\r\n    return this.palette.getGradientColor(0, this.opts.gradient);\r\n  }\r\n}\r\n\r\nMoleculeColorer.prototype.id = 'MO';\r\nMoleculeColorer.prototype.name = 'Molecule';\r\nMoleculeColorer.prototype.shortName = 'Molecule';\r\n\r\nexport default MoleculeColorer;\r\n","import Colorer from './Colorer';\r\nimport Atom from '../../chem/Atom';\r\n\r\nfunction scaleColor(c, factor) {\r\n  const r1 = (c >> 16) & 0xff;\r\n  const g1 = (c >> 8) & 0xff;\r\n  const b1 = c & 0xff;\r\n  const r = factor * r1;\r\n  const g = factor * g1;\r\n  const b = factor * b1;\r\n  return (r << 16) | (g << 8) | b;\r\n}\r\n\r\n/**\r\n * Create new colorer.\r\n *\r\n * @param {object=} opts - Options to override defaults with. See {@link Colorer}.\r\n *\r\n * @exports CarbonColorer\r\n * @augments Colorer\r\n * @constructor\r\n * @classdesc Bicolor coloring algorithm based on selection carbon atoms.\r\n */\r\nclass CarbonColorer extends Colorer {\r\n  static id = 'CB';\r\n\r\n  getAtomColor(atom, _complex) {\r\n    const colorCarbon = this.opts.color;\r\n    const colorNotCarbon = scaleColor(colorCarbon, this.opts.factor);\r\n    return (atom.flags & Atom.Flags.CARBON) ? colorCarbon : colorNotCarbon;\r\n  }\r\n\r\n  getResidueColor(_residue, _complex) {\r\n    return this.opts.color;\r\n  }\r\n}\r\n\r\nCarbonColorer.prototype.id = 'CB';\r\nCarbonColorer.prototype.name = 'Carbon';\r\nCarbonColorer.prototype.shortName = 'Carbon';\r\n\r\nexport default CarbonColorer;\r\n","import EntityList from '../utils/EntityList';\r\n\r\nimport ElementColorer from './colorers/ElementColorer';\r\nimport ResidueTypeColorer from './colorers/ResidueTypeColorer';\r\nimport SequenceColorer from './colorers/SequenceColorer';\r\nimport ChainColorer from './colorers/ChainColorer';\r\nimport SecondaryStructureColorer from './colorers/SecondaryStructureColorer';\r\nimport UniformColorer from './colorers/UniformColorer';\r\nimport ConditionalColorer from './colorers/ConditionalColorer';\r\nimport ConformationColorer from './colorers/ConformationColorer';\r\nimport TemperatureColorer from './colorers/TemperatureColorer';\r\nimport OccupancyColorer from './colorers/OccupancyColorer';\r\nimport HydrophobicityColorer from './colorers/HydrophobicityColorer';\r\nimport MoleculeColorer from './colorers/MoleculeColorer';\r\nimport CarbonColorer from './colorers/CarbonColorer';\r\n\r\nconst colorers = new EntityList([\r\n  ElementColorer,\r\n  ResidueTypeColorer,\r\n  SequenceColorer,\r\n  ChainColorer,\r\n  SecondaryStructureColorer,\r\n  UniformColorer,\r\n  ConditionalColorer,\r\n  ConformationColorer,\r\n  TemperatureColorer,\r\n  OccupancyColorer,\r\n  HydrophobicityColorer,\r\n  MoleculeColorer,\r\n  CarbonColorer,\r\n]);\r\n\r\nexport default colorers;\r\n","import * as THREE from 'three';\r\nimport EntityList from '../utils/EntityList';\r\n\r\nfunction neutralColor(intensity) {\r\n  return new THREE.Color(intensity, intensity, intensity);\r\n}\r\n\r\nconst materialList = [\r\n  {\r\n    id: 'DF',\r\n    name: 'Diffuse',\r\n    shortName: 'Diffuse',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'SF',\r\n    name: 'Soft Plastic',\r\n    shortName: 'Soft',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.1),\r\n      shininess: 30,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'PL',\r\n    name: 'Glossy Plastic',\r\n    shortName: 'Glossy',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.56),\r\n      specular: neutralColor(0.28),\r\n      shininess: 100,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'ME',\r\n    name: 'Metal',\r\n    shortName: 'Metal',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.56),\r\n      specular: neutralColor(0.55),\r\n      shininess: 30,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'TR',\r\n    name: 'Transparent',\r\n    shortName: 'Transparent',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 0.5,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: true,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'GL',\r\n    name: 'Glass',\r\n    shortName: 'Glass',\r\n    uberOptions: {\r\n      diffuse: neutralColor(0.50),\r\n      specular: neutralColor(0.65),\r\n      shininess: 100,\r\n      opacity: 0.5,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: true,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'BA',\r\n    name: 'Backdrop',\r\n    shortName: 'Backdrop',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: false,\r\n      fog: false,\r\n      depthWrite: false,\r\n      transparent: false,\r\n      toonShading: false,\r\n    },\r\n  }, {\r\n    id: 'TN',\r\n    name: 'Toon',\r\n    shortName: 'Toon',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 1,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: true,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n      toonShading: true,\r\n    },\r\n  }, {\r\n    id: 'FL',\r\n    name: 'Flat',\r\n    shortName: 'Flat',\r\n    uberOptions: {\r\n      diffuse: neutralColor(1.0),\r\n      specular: neutralColor(0.0),\r\n      shininess: 0,\r\n      opacity: 1.0,\r\n    },\r\n    values: {\r\n      lights: false,\r\n      fog: true,\r\n      depthWrite: true,\r\n      transparent: false,\r\n    },\r\n  },\r\n];\r\n\r\nconst materials = new EntityList(materialList);\r\n\r\nexport default materials;\r\n","/**\r\n * Utils functions which is worked with meshes\r\n *\r\n * functions for doing something with all/specified meshes\r\n * functions for traversihg tree and create auxiliary meshes for transparency/shadowmaps...\r\n * functions for calculating data connected with meshes\r\n */\r\nimport * as THREE from 'three';\r\nimport UberMaterial from './shaders/UberMaterial';\r\nimport gfxutils from './gfxutils';\r\n\r\nfunction _gatherObjects(root, meshTypes) {\r\n  const meshes = [];\r\n  root.traverse((object) => {\r\n    for (let i = 0; i < meshTypes.length; i++) {\r\n      if (object instanceof meshTypes[i]) {\r\n        meshes[meshes.length] = object;\r\n        break;\r\n      }\r\n    }\r\n  });\r\n  return meshes;\r\n}\r\n\r\n// new mesh with the same geometry and specified material values and layer\r\nfunction createDerivativeMesh(mesh, values, layer) {\r\n  const material = mesh.material.createInstance();\r\n  material.setValues(values);\r\n\r\n  const newMesh = new mesh.constructor(mesh.geometry, material);\r\n  newMesh.material.needsUpdate = true;\r\n  newMesh.applyMatrix4(mesh.matrix);\r\n  newMesh.layers.set(layer);\r\n  return newMesh;\r\n}\r\n\r\nfunction traverseMeshes(root, meshTypes, func) {\r\n  const meshes = _gatherObjects(root, meshTypes);\r\n\r\n  for (let i = 0, n = meshes.length; i < n; ++i) {\r\n    const mesh = meshes[i];\r\n    if (!mesh.parent) {\r\n      continue;\r\n    }\r\n    func(mesh);\r\n  }\r\n}\r\n\r\nfunction applyTransformsToMeshes(root, mtc) {\r\n  const mtcCount = mtc.length;\r\n  if (mtcCount < 1) {\r\n    return;\r\n  }\r\n\r\n  const meshTypes = [THREE.Mesh, THREE.LineSegments, THREE.Line];\r\n  traverseMeshes(root, meshTypes, (mesh) => {\r\n    mesh.applyMatrix4(mtc[0]);\r\n    for (let j = 1; j < mtcCount; ++j) {\r\n      const newMesh = new mesh.constructor(mesh.geometry, mesh.material);\r\n      mesh.parent.add(newMesh);\r\n      newMesh.applyMatrix4(mtc[j]);\r\n    }\r\n  });\r\n}\r\n\r\nconst processTransparentMaterial = (function () {\r\n  const matValues = {\r\n    prepassTransparancy: true,\r\n    fakeOpacity: false,\r\n    transparent: false,\r\n    colorFromDepth: false,\r\n    lights: false,\r\n    shadowmap: false,\r\n    fog: false,\r\n  };\r\n\r\n  return function (root, material) {\r\n    if (!(material instanceof UberMaterial)) {\r\n      return;\r\n    }\r\n\r\n    traverseMeshes(root, [THREE.Mesh, THREE.LineSegments], (mesh) => {\r\n      mesh.material.setValues({ prepassTransparancy: false, fakeOpacity: false });\r\n      mesh.material.needsUpdate = true;\r\n      mesh.layers.set(gfxutils.LAYERS.TRANSPARENT);\r\n\r\n      const prepassTranspMesh = createDerivativeMesh(mesh, matValues, gfxutils.LAYERS.PREPASS_TRANSPARENT);\r\n      mesh.parent.add(prepassTranspMesh);\r\n    });\r\n  };\r\n}());\r\n\r\nconst processColFromPosMaterial = (function () {\r\n  const matValues = {\r\n    colorFromPos: true,\r\n    transparent: false,\r\n    colorFromDepth: false,\r\n    lights: false,\r\n    shadowmap: false,\r\n    fog: false,\r\n    overrideColor: false,\r\n    fogTransparent: false,\r\n    attrColor: false,\r\n    attrColor2: false,\r\n    attrAlphaColor: false,\r\n    fakeOpacity: false,\r\n  };\r\n\r\n  return function (root, material) {\r\n    if (!(material instanceof UberMaterial)) {\r\n      return;\r\n    }\r\n\r\n    traverseMeshes(root, [THREE.Mesh, THREE.LineSegments], (mesh) => {\r\n      const colFromPosMesh = createDerivativeMesh(mesh, matValues, gfxutils.LAYERS.COLOR_FROM_POSITION);\r\n      mesh.parent.add(colFromPosMesh);\r\n    });\r\n  };\r\n}());\r\n\r\nconst createShadowmapMaterial = (function () {\r\n  const matValues = {\r\n    colorFromDepth: true,\r\n    orthoCam: true,\r\n    lights: false,\r\n    shadowmap: false,\r\n    fog: false,\r\n  };\r\n\r\n  return function (root, material) {\r\n    if (!(material instanceof UberMaterial)) {\r\n      return;\r\n    }\r\n    traverseMeshes(root, [THREE.Mesh, THREE.LineSegments], (mesh) => {\r\n      if (!mesh.receiveShadow && mesh.material.shadowmap) { // remove shadow from non-receivers\r\n        mesh.material.setValues({ shadowmap: false });\r\n      }\r\n      if (!mesh.material.lights) { // skip creating shadowmap meshes for materials without lighting\r\n        return;\r\n      }\r\n      if (!mesh.castShadow) { // skip creating shadowmap meshes for non-casters\r\n        return;\r\n      }\r\n      if (!gfxutils.belongToSelectLayers(mesh)) { // skip creating shadowmap meshes for selection layer\r\n        return;\r\n      }\r\n\r\n      const shadowmapMesh = createDerivativeMesh(mesh, matValues, gfxutils.LAYERS.SHADOWMAP);\r\n      shadowmapMesh.isShadowmapMesh = true;\r\n      mesh.parent.add(shadowmapMesh);\r\n    });\r\n  };\r\n}());\r\n\r\nfunction removeShadowmapMaterial(root, material) {\r\n  if (!(material instanceof UberMaterial)) {\r\n    return;\r\n  }\r\n\r\n  traverseMeshes(root, [THREE.Mesh, THREE.LineSegments], (mesh) => {\r\n    if (mesh.isShadowmapMesh) {\r\n      mesh.parent.remove(mesh);\r\n    }\r\n  });\r\n}\r\n\r\nfunction forEachMeshInGroup(group, process) {\r\n  function processObj(object) {\r\n    if (object instanceof THREE.Mesh) {\r\n      process(object);\r\n    }\r\n    for (let i = 0, l = object.children.length; i < l; i++) {\r\n      processObj(object.children[i]);\r\n    }\r\n  }\r\n  processObj(group);\r\n}\r\n\r\nfunction _countMeshTriangles(mesh) {\r\n  const geom = mesh.geometry;\r\n  if (geom instanceof THREE.InstancedBufferGeometry) {\r\n    const attribs = geom.attributes;\r\n    for (const property in attribs) {\r\n      if (attribs.hasOwnProperty(property) && attribs[property] instanceof THREE.InstancedBufferAttribute) {\r\n        const currAttr = attribs[property];\r\n        const indexSize = geom.index ? geom.index.array.length / 3 : 0;\r\n        return indexSize * currAttr.array.length / currAttr.itemSize;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n  if (geom instanceof THREE.BufferGeometry) {\r\n    return geom.index ? geom.index.array.length / 3 : 0;\r\n  }\r\n  return geom.faces ? geom.faces.length : 0;\r\n}\r\n\r\nfunction countTriangles(group) {\r\n  let totalCount = 0;\r\n  forEachMeshInGroup(group, (mesh) => {\r\n    totalCount += _countMeshTriangles(mesh);\r\n  });\r\n  return totalCount;\r\n}\r\n\r\nexport default {\r\n  applyTransformsToMeshes,\r\n  processTransparentMaterial,\r\n  processColFromPosMaterial,\r\n  createShadowmapMaterial,\r\n  removeShadowmapMaterial,\r\n  forEachMeshInGroup,\r\n  countTriangles,\r\n};\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport UberMaterial from './shaders/UberMaterial';\r\nimport gfxutils from './gfxutils';\r\nimport meshutils from './meshutils';\r\nimport settings from '../settings';\r\nimport materials from './materials';\r\nimport chem from '../chem';\r\n\r\nconst { selectors } = chem;\r\n\r\nclass Representation {\r\n  constructor(index, mode, colorer, selector) {\r\n    const startMaterialValues = {\r\n      clipPlane: settings.now.draft.clipPlane,\r\n      fogTransparent: settings.now.bg.transparent,\r\n      shadowmap: settings.now.shadow.on,\r\n      shadowmapType: settings.now.shadow.type,\r\n    };\r\n    this.index = index;\r\n    this.mode = mode;\r\n    this.colorer = colorer;\r\n    this.selector = selector;\r\n    this.selectorString = '';\r\n    this.count = 0;\r\n    this.material = new UberMaterial();\r\n    this.material.setValues(startMaterialValues);\r\n    this.material.setUberOptions({ fogAlpha: settings.now.fogAlpha });\r\n    this.materialPreset = materials.first;\r\n    this.needsRebuild = true;\r\n    this.visible = true;\r\n\r\n    // apply mode params & preset\r\n    this.setMode(mode);\r\n  }\r\n\r\n  markAtoms(complex) {\r\n    this.count = complex.markAtoms(this.selector, 1 << this.index);\r\n    this.needsRebuild = true;\r\n    return this.count;\r\n  }\r\n\r\n  unmarkAtoms(complex) {\r\n    complex.clearAtomBits(1 << this.index);\r\n    this.count = 0;\r\n  }\r\n\r\n  setMode(mode) {\r\n    this.mode = mode;\r\n  }\r\n\r\n  setMaterialPreset(preset) {\r\n    this.materialPreset = preset;\r\n    this.material.setUberOptions(preset.uberOptions);\r\n    this.material.setValues(preset.values);\r\n  }\r\n\r\n  reset() {\r\n    this.geo = null;\r\n    this.selectionGeo = null;\r\n  }\r\n\r\n  buildGeometry(complex) {\r\n    this.reset();\r\n    this.needsRebuild = false;\r\n\r\n    if (settings.now.ao) {\r\n      this.material.setValues({ normalsToGBuffer: settings.now.ao });\r\n    }\r\n\r\n    this.geo = this.mode.buildGeometry(complex, this.colorer, 1 << this.index, this.material);\r\n\r\n    if (this.material.uberOptions.opacity < 0.99 && settings.now.transparency === 'prepass') {\r\n      meshutils.processTransparentMaterial(this.geo, this.material);\r\n    }\r\n    this.geo.visible = this.visible;\r\n\r\n    gfxutils.processObjRenderOrder(this.geo, this.materialPreset.id);\r\n    meshutils.processColFromPosMaterial(this.geo, this.material);\r\n\r\n    if (settings.now.shadow.on) {\r\n      meshutils.createShadowmapMaterial(this.geo, this.material);\r\n    }\r\n\r\n    return this.geo;\r\n  }\r\n\r\n  buildSelectionGeometry(mask) {\r\n    let sg = null;\r\n\r\n    if (this.geo && ('getSubset' in this.geo)) {\r\n      const meshes = this.geo.getSubset(mask);\r\n      if (meshes && meshes.length > 0) {\r\n        sg = new THREE.Group();\r\n        sg.matrixAutoUpdate = false;\r\n        sg.matrix = this.geo.matrix;\r\n\r\n        for (let j = 0; j < meshes.length; j++) {\r\n          const m = meshes[j];\r\n          sg.add(m);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (sg) {\r\n      sg.visible = this.visible;\r\n    }\r\n\r\n    this.selectionGeo = sg;\r\n    return this.selectionGeo;\r\n  }\r\n\r\n  /**\r\n   * Create object that represents difference between current and another rep\r\n   * anotherRep could be undefined. In this case everything is reported.\r\n   */\r\n  compare(repSettings) {\r\n    const diff = {};\r\n\r\n    const selStr = String(this.selector);\r\n    if (!repSettings || selStr.valueOf() !== String(repSettings.selector).valueOf()) {\r\n      diff.selector = selStr;\r\n    }\r\n\r\n    const modeDiff = this.mode.identify();\r\n    if (!repSettings || Array.isArray(modeDiff) || modeDiff !== repSettings.mode) {\r\n      diff.mode = modeDiff;\r\n    }\r\n\r\n    const colorerDiff = this.colorer.identify();\r\n    if (!repSettings || Array.isArray(colorerDiff) || colorerDiff !== repSettings.colorer) {\r\n      diff.colorer = colorerDiff;\r\n    }\r\n\r\n    if (!repSettings || this.materialPreset.id !== repSettings.material) {\r\n      diff.material = this.materialPreset.id;\r\n    }\r\n\r\n    return diff;\r\n  }\r\n\r\n  /**\r\n   * Change representation. Write fields what was changed into new object, return it.\r\n   */\r\n  change(repSettings, complex, mode, color) {\r\n    const diff = {};\r\n\r\n    // modify selector\r\n    if (repSettings.selector) {\r\n      const newSelectorObject = selectors.parse(repSettings.selector).selector;\r\n      const newSelector = String(newSelectorObject);\r\n      if (this.selectorString !== newSelector) {\r\n        diff.selector = newSelector;\r\n        this.selectorString = newSelector;\r\n        this.selector = newSelectorObject;\r\n        this.markAtoms(complex);\r\n      }\r\n    }\r\n\r\n    // modify mode\r\n    if (repSettings.mode) {\r\n      const newMode = repSettings.mode;\r\n      if (!_.isEqual(this.mode.identify(), newMode)) {\r\n        diff.mode = newMode;\r\n        this.setMode(mode);\r\n      }\r\n    }\r\n\r\n    // modify colorer\r\n    if (repSettings.colorer) {\r\n      const newColorer = repSettings.colorer;\r\n      if (!_.isEqual(this.colorer.identify(), newColorer)) {\r\n        diff.colorer = newColorer;\r\n        this.colorer = color;\r\n      }\r\n    }\r\n\r\n    // modify material\r\n    if (repSettings.material) {\r\n      const newMaterial = repSettings.material;\r\n      if (!_.isEqual(this.materialPreset.id, newMaterial)) {\r\n        diff.material = newMaterial;\r\n        this.setMaterialPreset(materials.get(repSettings.material));\r\n      }\r\n    }\r\n\r\n    return diff;\r\n  }\r\n\r\n  show(visible) {\r\n    this.visible = visible;\r\n    if (this.geo) {\r\n      this.geo.visible = visible;\r\n    }\r\n    if (this.selectionGeo) {\r\n      this.selectionGeo.visible = visible;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Representation;\r\n","import * as THREE from 'three';\r\nimport logger from './utils/logger';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport './gfx/modes';\r\n\r\nfunction _traverseComponentGroups(root, component, callback) {\r\n  const { children } = root;\r\n  if (!children) {\r\n    return;\r\n  }\r\n\r\n  for (let i = 0, n = children.length; i < n; ++i) {\r\n    const child = children[i];\r\n    if (child._component === component) {\r\n      callback(child);\r\n    }\r\n    if (child instanceof gfxutils.RCGroup) {\r\n      _traverseComponentGroups(child, component, callback);\r\n    }\r\n  }\r\n}\r\n\r\nfunction ComplexEditor() {\r\n}\r\n\r\nclass ComplexComponentEditor extends ComplexEditor {\r\n  constructor(complexVisual) {\r\n    super();\r\n    this._complexVisual = complexVisual;\r\n    this._inProgress = false;\r\n  }\r\n\r\n  begin() {\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    // init component matrices\r\n    this._componentTransforms = [];\r\n    for (let i = 0; i < complex._components.length; ++i) {\r\n      const component = complex._components[i];\r\n      this._componentTransforms[component._index] = new THREE.Object3D();\r\n    }\r\n\r\n    this._inProgress = true;\r\n\r\n    return true;\r\n  }\r\n\r\n  apply() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    for (let i = 0; i < complex._components.length; ++i) {\r\n      this._bakeComponentTransform(complex._components[i]);\r\n    }\r\n\r\n    complex.onAtomPositionChanged();\r\n\r\n    this._resetComponentTransform();\r\n\r\n    this._complexVisual.finalizeEdit();\r\n  }\r\n\r\n  discard() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    this._resetComponentTransform();\r\n\r\n    this._complexVisual.finalizeEdit();\r\n  }\r\n\r\n  getAltObj() {\r\n    const res = {\r\n      objects: [],\r\n      pivot: new THREE.Vector3(0, 0, 0),\r\n    };\r\n\r\n    const visual = this._complexVisual;\r\n    const component = visual.getSelectedComponent();\r\n\r\n    if (component === null) {\r\n      return res;\r\n    }\r\n\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n    const selectionMask = 1 << visual.getSelectionBit();\r\n    let i;\r\n    let j;\r\n    let reprNode;\r\n    let geo;\r\n\r\n    // find all geo nodes for this component\r\n    _traverseComponentGroups(visual, component, (child) => {\r\n      res.objects.push(child);\r\n    });\r\n\r\n    // find all selection nodes for this component\r\n    for (i = 0; i < selection.children.length; ++i) {\r\n      reprNode = selection.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component') && geo._component === component) {\r\n          res.objects.push(geo);\r\n        }\r\n      }\r\n    }\r\n\r\n    // add dummy object that stores component transformation\r\n    res.objects.push(this._componentTransforms[component._index]);\r\n\r\n    const bbmin = new THREE.Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n    const bbmax = new THREE.Vector3(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\r\n\r\n    component.forEachResidue((residue) => {\r\n      const atoms = residue._atoms;\r\n      for (j = 0; j < atoms.length; ++j) {\r\n        if (atoms[j].mask & selectionMask) {\r\n          bbmin.min(atoms[j].position);\r\n          bbmax.max(atoms[j].position);\r\n        }\r\n      }\r\n    });\r\n\r\n    res.pivot.lerpVectors(bbmin, bbmax, 0.5);\r\n    return res;\r\n  }\r\n\r\n  _bakeComponentTransform(component) {\r\n    const t = this._componentTransforms[component._index];\r\n    if (t && (!(t.position.x === 0 && t.position.y === 0 && t.position.z === 0)\r\n      || !(t.quaternion.x === 0 && t.quaternion.y === 0 && t.quaternion.z === 0 && t.quaternion.w === 1))) {\r\n      t.updateMatrix();\r\n\r\n      component.forEachResidue((residue) => {\r\n        const atoms = residue._atoms;\r\n        for (let j = 0; j < atoms.length; ++j) {\r\n          atoms[j].position.applyMatrix4(t.matrix);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  _resetComponentTransform() {\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n    let i;\r\n    let j;\r\n    let reprNode;\r\n    let geo;\r\n\r\n    for (i = 0; i < this._componentTransforms.length; ++i) {\r\n      geo = this._componentTransforms[i];\r\n      geo.position.set(0, 0, 0);\r\n      geo.quaternion.set(0, 0, 0, 1);\r\n    }\r\n\r\n    // reset all geo nodes\r\n    for (i = 0; i < visual.children.length; ++i) {\r\n      reprNode = visual.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component')) {\r\n          geo.position.set(0, 0, 0);\r\n          geo.quaternion.set(0, 0, 0, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // reset all selection nodes\r\n    for (i = 0; i < selection.children.length; ++i) {\r\n      reprNode = selection.children[i];\r\n      for (j = 0; j < reprNode.children.length; ++j) {\r\n        geo = reprNode.children[j];\r\n        if (geo.hasOwnProperty('_component')) {\r\n          geo.position.set(0, 0, 0);\r\n          geo.quaternion.set(0, 0, 0, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass ComplexFragmentEditor extends ComplexEditor {\r\n  constructor(complexVisual) {\r\n    super();\r\n    this._complexVisual = complexVisual;\r\n    this._inProgress = false;\r\n  }\r\n\r\n  begin() {\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n\r\n    const atoms = this._getSelectionBorderAtoms();\r\n    if (atoms.length < 1 || atoms.length > 2) {\r\n      logger.error('Can only edit fragments with one or two bound atoms.');\r\n      return false;\r\n    }\r\n\r\n    this._fragmentBoundAtoms = atoms;\r\n\r\n    const selectionMask = 1 << visual.getSelectionBit();\r\n\r\n    // hide selected fragment in main model\r\n    visual.disableSubset(selectionMask, true);\r\n\r\n    // hide selection geo in main model\r\n    for (let k = 0; k < selection.children.length; ++k) {\r\n      selection.children[k].visible = false;\r\n    }\r\n\r\n    // create visible fragment representation to rotate\r\n    const pivotPos = atoms[0].position.clone();\r\n\r\n    if (atoms.length === 2) {\r\n      pivotPos.lerp(atoms[1].position, 0.5);\r\n    }\r\n\r\n    this._fragmentGeo = new THREE.Group();\r\n    visual.add(this._fragmentGeo);\r\n    this._fragmentGeo.position.copy(pivotPos);\r\n\r\n    this._fragmentSelectionGeo = new THREE.Group();\r\n    selection.add(this._fragmentSelectionGeo);\r\n    this._fragmentSelectionGeo.position.copy(pivotPos);\r\n\r\n    const offset = pivotPos.clone();\r\n    offset.negate();\r\n\r\n    for (let i = 0; i < visual.children.length; ++i) {\r\n      const g = visual.children[i];\r\n      if (!('getSubset' in g)) {\r\n        continue;\r\n      }\r\n\r\n      const vg = new THREE.Group();\r\n      this._fragmentGeo.add(vg);\r\n\r\n      const sg = new THREE.Group();\r\n      this._fragmentSelectionGeo.add(sg);\r\n\r\n      const meshes = g.getSubset(selectionMask, true);\r\n      for (let j = 0; j < meshes.length; j++) {\r\n        const m = meshes[j];\r\n        vg.add(m);\r\n        m.position.copy(offset);\r\n      }\r\n\r\n      const smeshes = g.getSubset(selectionMask, true);\r\n      for (let h = 0; h < smeshes.length; h++) {\r\n        const sm = smeshes[h];\r\n        sg.add(sm);\r\n        sm.position.copy(offset);\r\n      }\r\n    }\r\n\r\n    gfxutils.applySelectionMaterial(this._fragmentSelectionGeo);\r\n\r\n    this._inProgress = true;\r\n    return true;\r\n  }\r\n\r\n  apply() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const visual = this._complexVisual;\r\n    const selectionBit = visual.getSelectionBit();\r\n\r\n    const p = this._fragmentGeo.position;\r\n    const m = this._fragmentGeo.matrix.clone();\r\n    m.multiply(new THREE.Matrix4().makeTranslation(-p.x, -p.y, -p.z));\r\n\r\n    this._bakeAtomTransform(m, 1 << selectionBit);\r\n\r\n    // show selected fragment in main model\r\n    visual.enableSubset(1 << selectionBit, true);\r\n\r\n    visual.getComplex().onAtomPositionChanged();\r\n\r\n    visual.finalizeEdit();\r\n  }\r\n\r\n  discard() {\r\n    if (!this._inProgress) {\r\n      return;\r\n    }\r\n\r\n    const visual = this._complexVisual;\r\n    const selection = this._complexVisual.getSelectionGeo();\r\n\r\n    this._fragmentGeo.parent.remove(this._fragmentGeo);\r\n\r\n    // show selected fragment in main model\r\n    visual.enableSubset(1 << visual.getSelectionBit(), true);\r\n\r\n    // show selection geo in main model (+ remove fragment selection geo)\r\n    for (let i = 0; i < selection.children.length; ++i) {\r\n      const node = selection.children[i];\r\n      if (node.visible) {\r\n        selection.remove(node);\r\n      } else {\r\n        node.visible = true;\r\n      }\r\n    }\r\n\r\n    visual.finalizeEdit();\r\n  }\r\n\r\n  isFreeRotationAllowed() {\r\n    return (this._fragmentBoundAtoms.length < 2);\r\n  }\r\n\r\n  getAltObj() {\r\n    const res = {\r\n      objects: [],\r\n      pivot: new THREE.Vector3(0, 0, 0),\r\n    };\r\n\r\n    res.objects.push(this._fragmentGeo, this._fragmentSelectionGeo);\r\n\r\n    const boundAtoms = this._fragmentBoundAtoms;\r\n    if (boundAtoms.length === 1) {\r\n      if (boundAtoms[0].bonds.length === 1) {\r\n        // single external bond allows rotation about bond axis\r\n        const bond = boundAtoms[0].bonds[0];\r\n        res.axis = new THREE.Vector3().subVectors(bond._right.position, bond._left.position);\r\n        res.axis.normalize();\r\n        res.axis.transformDirection(this._complexVisual.matrixWorld);\r\n      }\r\n    } else if (boundAtoms.length === 2) {\r\n      // two bound atoms allow rotation only about axis running through their centers\r\n      res.axis = new THREE.Vector3().subVectors(boundAtoms[1].position, boundAtoms[0].position);\r\n      res.axis.normalize();\r\n      res.axis.transformDirection(this._complexVisual.matrixWorld);\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  _getSelectionBorderAtoms() {\r\n    const complex = this._complexVisual.getComplex();\r\n\r\n    const selectionMask = 1 << this._complexVisual.getSelectionBit();\r\n    const atomHash = {};\r\n\r\n    complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          atomHash[bond._left.index] = 1;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        atomHash[bond._right.index] = 1;\r\n      }\r\n    });\r\n\r\n    const atoms = [];\r\n    const keys = Object.keys(atomHash);\r\n    for (let i = 0, n = keys.length; i < n; ++i) {\r\n      const idx = keys[i];\r\n      atoms.push(complex._atoms[idx]);\r\n    }\r\n\r\n    return atoms;\r\n  }\r\n\r\n  _bakeAtomTransform(matrix, mask) {\r\n    this._complexVisual.getComplex().forEachAtom((atom) => {\r\n      if (atom.mask & mask) {\r\n        atom.position.applyMatrix4(matrix);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default {\r\n  ComponentEditor: ComplexComponentEditor,\r\n  FragmentEditor: ComplexFragmentEditor,\r\n};\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport utils from './utils';\r\nimport logger from './utils/logger';\r\nimport chem from './chem';\r\nimport settings from './settings';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport modes from './gfx/modes';\r\nimport colorers from './gfx/colorers';\r\nimport palettes from './gfx/palettes';\r\nimport materials from './gfx/materials';\r\nimport Representation from './gfx/Representation';\r\nimport Visual from './Visual';\r\nimport ComplexVisualEdit from './ComplexVisualEdit';\r\nimport meshutils from './gfx/meshutils';\r\n\r\nconst { selectors } = chem;\r\n\r\nfunction lookupAndCreate(entityList, specs) {\r\n  if (!Array.isArray(specs)) {\r\n    specs = [specs];\r\n  }\r\n  const [id, opts] = specs;\r\n  const Entity = entityList.get(id) || entityList.first;\r\n  return new Entity(opts);\r\n}\r\n\r\nclass ComplexVisual extends Visual {\r\n  constructor(name, dataSource) {\r\n    super(name, dataSource);\r\n    this._complex = dataSource;\r\n\r\n    /** @type {Representation[]} */\r\n    this._reprList = [];\r\n    /** @type {?Representation} */\r\n    this._repr = null;\r\n    this._reprListChanged = true;\r\n\r\n    this._selectionBit = 0;\r\n    this._reprUsedBits = 0;\r\n    this._selectionCount = 0;\r\n\r\n    this._selectionGeometry = new THREE.Group();\r\n  }\r\n\r\n  getBoundaries() {\r\n    return this._complex.getBoundaries();\r\n  }\r\n\r\n  release() {\r\n    if (this._selectionGeometry.parent) {\r\n      this._selectionGeometry.remove(this._selectionGeometry);\r\n    }\r\n    Visual.prototype.release.call(this);\r\n  }\r\n\r\n  getComplex() {\r\n    return this._complex;\r\n  }\r\n\r\n  getSelectionCount() {\r\n    return this._selectionCount;\r\n  }\r\n\r\n  getSelectionGeo() {\r\n    return this._selectionGeometry;\r\n  }\r\n\r\n  getSelectionBit() {\r\n    return this._selectionBit;\r\n  }\r\n\r\n  getEditor() {\r\n    return this._editor;\r\n  }\r\n\r\n  resetReps(reps) {\r\n    // Create all necessary representations\r\n    if (this._complex) {\r\n      this._complex.clearAtomBits(~0);\r\n    }\r\n    this._reprListChanged = true;\r\n    this._reprUsedBits = 0;\r\n    this._reprList.length = reps.length;\r\n    for (let i = 0, n = reps.length; i < n; ++i) {\r\n      const rep = reps[i];\r\n\r\n      let selector;\r\n      let selectorString;\r\n      if (typeof rep.selector === 'string') {\r\n        selectorString = rep.selector;\r\n        ({ selector } = selectors.parse(selectorString));\r\n      } else if (typeof rep.selector === 'undefined') {\r\n        selectorString = settings.now.presets.default[0].selector;\r\n        ({ selector } = selectors.parse(selectorString));\r\n      } else {\r\n        ({ selector } = rep);\r\n        selectorString = selector.toString();\r\n      }\r\n      const mode = lookupAndCreate(modes, rep.mode);\r\n      const colorer = lookupAndCreate(colorers, rep.colorer);\r\n      const material = materials.get(rep.material) || materials.first;\r\n\r\n      this._reprList[i] = new Representation(i, mode, colorer, selector);\r\n      this._reprList[i].setMaterialPreset(material);\r\n      this._reprList[i].selectorString = selectorString;\r\n\r\n      if (this._complex) {\r\n        this._complex.markAtoms(selector, 1 << i);\r\n      }\r\n\r\n      this._reprUsedBits |= 1 << i;\r\n    }\r\n    this._repr = reps.length > 0 ? this._reprList[0] : null;\r\n\r\n    this._selectionBit = reps.length;\r\n    this._reprUsedBits |= 1 << this._selectionBit; // selection uses one bit\r\n    this._selectionCount = 0;\r\n\r\n    if (this._complex) {\r\n      this._complex.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get number of representations created so far.\r\n   * @returns {number} Number of reps.\r\n   */\r\n  repCount() {\r\n    return this._reprList.length;\r\n  }\r\n\r\n  /**\r\n   * Get or set the current representation index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @returns {number} The current index.\r\n   */\r\n  repCurrent(index) {\r\n    if (index >= 0 && index < this._reprList.length) {\r\n      this._repr = this._reprList[index];\r\n    } else {\r\n      index = this._reprList.indexOf(this._repr);\r\n    }\r\n    return index;\r\n  }\r\n\r\n  /**\r\n   * Get or set representation by index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @param {object=} rep - Optional representation description.\r\n   * @param {string=} rep.selector - Selector string.\r\n   * @param {string=} rep.mode - Mode id.\r\n   * @param {string=} rep.colorer - Colorer id.\r\n   * @param {string=} rep.material - Material id.\r\n   * @returns {Object} {desc, index, status} field desc contains rep description, index - index of correspondent rep,\r\n   * status - one of three strings: 'created', 'changed', ''. 'created' means new rep was created during this function,\r\n   * 'changed' - rep was changed during this function. '' - something else.\r\n   */\r\n  rep(index, rep) {\r\n    // if index is missing then it is the current\r\n    if (!rep && (index === undefined || index instanceof Object)) {\r\n      rep = index;\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index > this._reprList.length) {\r\n      logger.error(`Rep ${index} does not exist!`);\r\n      return null;\r\n    }\r\n\r\n    // a special case of adding just after the end\r\n    if (index === this._reprList.length) {\r\n      const res = this.repAdd(rep);\r\n      logger.warn(`Rep ${index} does not exist! New representation was created.`);\r\n      return { desc: res.desc, index, status: 'created' };\r\n    }\r\n\r\n    // gather description\r\n    const target = this._reprList[index];\r\n    const desc = {\r\n      selector: target.selectorString,\r\n      mode: target.mode.identify(),\r\n      colorer: target.colorer.identify(),\r\n      material: target.materialPreset.id,\r\n    };\r\n\r\n    // modification is requested\r\n    if (rep) {\r\n      // modify\r\n      const diff = target.change(\r\n        rep,\r\n        this._complex,\r\n        lookupAndCreate(modes, rep.mode),\r\n        lookupAndCreate(colorers, rep.colorer),\r\n      );\r\n\r\n      // something was changed\r\n      if (!_.isEmpty(diff)) {\r\n        target.needsRebuild = true;\r\n        for (const key in diff) {\r\n          if (diff.hasOwnProperty(key)) {\r\n            desc[key] = diff[key];\r\n            logger.debug(`rep[${index}].${key} changed to ${diff[key]}`);\r\n          }\r\n        }\r\n\r\n        // safety trick: lower resolution for surface modes\r\n        if (diff.mode && target.mode.isSurface\r\n          && (settings.now.resolution === 'ultra' || settings.now.resolution === 'high')) {\r\n          logger.report('Surface resolution was changed to \"medium\" to avoid hang-ups.');\r\n          settings.set('resolution', 'medium');\r\n        }\r\n        return { desc, index, status: 'changed' };\r\n      }\r\n    }\r\n    return { desc, index, status: '' };\r\n  }\r\n\r\n  /**\r\n   * Get representation (not just description) by index.\r\n   * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n   * @returns {?object} Representation.\r\n   */\r\n  repGet(index) {\r\n    // if index is missing then it is the current\r\n    if (index === undefined || index instanceof Object) {\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index >= this._reprList.length) {\r\n      return null;\r\n    }\r\n\r\n    return this._reprList[index];\r\n  }\r\n\r\n  _getFreeReprIdx() {\r\n    let bits = this._reprUsedBits;\r\n    for (let i = 0; i <= ComplexVisual.NUM_REPRESENTATION_BITS; ++i, bits >>= 1) {\r\n      if ((bits & 1) === 0) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Add new representation.\r\n   * @param {object=} rep - Representation description.\r\n   * @returns {Object} {desc, index} field desc contains added rep description, index - index of this rep.\r\n   */\r\n  repAdd(rep) {\r\n    if (this._reprList.length >= ComplexVisual.NUM_REPRESENTATION_BITS) {\r\n      return null;\r\n    }\r\n\r\n    const newSelectionBit = this._getFreeReprIdx();\r\n    if (newSelectionBit < 0) {\r\n      return null; // no more slots for representations\r\n    }\r\n\r\n    const originalSelection = this.buildSelectorFromMask(1 << this._selectionBit);\r\n\r\n    // Fill in default values\r\n    const def = settings.now.presets.default[0];\r\n    const desc = _.merge({\r\n      selector: def.selector,\r\n      mode: def.mode,\r\n      colorer: def.colorer,\r\n      material: def.material,\r\n    }, rep);\r\n\r\n    const selector = (typeof desc.selector === 'string') ? selectors.parse(desc.selector).selector : desc.selector;\r\n    const target = new Representation(\r\n      this._selectionBit,\r\n      lookupAndCreate(modes, desc.mode),\r\n      lookupAndCreate(colorers, desc.colorer),\r\n      selector,\r\n    );\r\n    target.selectorString = selector.toString();\r\n    target.setMaterialPreset(materials.get(desc.material));\r\n    target.markAtoms(this._complex);\r\n    this._reprList.push(target);\r\n\r\n    // change selection bit\r\n    this._selectionBit = newSelectionBit;\r\n    this._reprUsedBits |= 1 << this._selectionBit;\r\n\r\n    // restore selection using new selection bit\r\n    this._complex.markAtoms(originalSelection, 1 << this._selectionBit);\r\n\r\n    return { desc, index: this._reprList.length - 1 };\r\n  }\r\n\r\n  /**\r\n   * Remove representation.\r\n   * @param {number=} index - Zero-based representation index.\r\n   */\r\n  repRemove(index) {\r\n    if (index === undefined) {\r\n      index = this.repCurrent();\r\n    }\r\n\r\n    // catch out of bounds case\r\n    let count = this._reprList.length;\r\n    if (index < 0 || index >= count || count <= 1) { // do not allow to remove the single rep\r\n      return;\r\n    }\r\n\r\n    const target = this._reprList[index];\r\n    target.unmarkAtoms(this._complex);\r\n    this._reprUsedBits &= ~(1 << target.index);\r\n\r\n    this._reprList.splice(index, 1);\r\n\r\n    // update current rep\r\n    if (target === this._repr) {\r\n      --count;\r\n      index = index < count ? index : count - 1;\r\n      this._repr = this._reprList[index];\r\n    }\r\n    this._reprListChanged = true;\r\n  }\r\n\r\n  /**\r\n   * Hide representation.\r\n   * @param {number} index - Zero-based representation index.\r\n   * @param {boolean=} hide - Specify false to make rep visible, true to hide (by default).\r\n   */\r\n  repHide(index, hide) {\r\n    if (hide === undefined) {\r\n      hide = true;\r\n    }\r\n\r\n    // fail if out of bounds\r\n    if (index < 0 || index >= this._reprList.length) {\r\n      return;\r\n    }\r\n\r\n    const target = this._reprList[index];\r\n    target.show(!hide);\r\n  }\r\n\r\n  /**\r\n   * Select atoms with selector\r\n   * @param {Selector} selector - selector\r\n   * @param {boolean=} append - true to append selection atoms to current selection, false to rewrite selection\r\n   */\r\n  select(selector, append) {\r\n    if (append) {\r\n      this._selectionCount += this._complex.markAtomsAdditionally(selector, 1 << this._selectionBit);\r\n    } else {\r\n      this._selectionCount = this._complex.markAtoms(selector, 1 << this._selectionBit);\r\n    }\r\n    this._complex.updateStructuresMask();\r\n    this.rebuildSelectionGeometry();\r\n  }\r\n\r\n  resetSelectionMask() {\r\n    if (this._selectionCount !== 0) {\r\n      this._selectionCount = 0;\r\n      if (this._complex) {\r\n        this._complex.clearAtomBits(1 << this._selectionBit);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSelectionMask(pickedObj) {\r\n    const self = this;\r\n    const { atom } = pickedObj;\r\n    let { residue, chain, molecule } = pickedObj;\r\n    const setMask = 1 << this._selectionBit;\r\n    const clearMask = ~setMask;\r\n\r\n    if (atom) {\r\n      residue = atom.residue;\r\n      chain = residue._chain;\r\n      molecule = residue._molecule;\r\n\r\n      if (atom.mask & setMask) {\r\n        atom.mask &= clearMask;\r\n        residue._mask &= clearMask;\r\n        chain._mask &= clearMask;\r\n        if (molecule) {\r\n          molecule.mask &= clearMask;\r\n        }\r\n        this._selectionCount--;\r\n      } else {\r\n        atom.mask |= setMask;\r\n        this._selectionCount++;\r\n\r\n        // select residue if all atoms in it are selected\r\n        residue.collectMask();\r\n        // select chain and molecule if all residues in it are selected\r\n        chain.collectMask();\r\n        if (molecule) {\r\n          molecule.collectMask();\r\n        }\r\n      }\r\n    } else if (residue) {\r\n      chain = residue._chain;\r\n      molecule = residue._molecule;\r\n\r\n      if (residue._mask & setMask) {\r\n        residue._mask &= clearMask;\r\n        chain._mask &= clearMask;\r\n        residue.forEachAtom((a) => {\r\n          if (a.mask & setMask) {\r\n            a.mask &= clearMask;\r\n            self._selectionCount--;\r\n          }\r\n        });\r\n      } else {\r\n        residue._mask |= setMask;\r\n        residue.forEachAtom((a) => {\r\n          if (!(a.mask & setMask)) {\r\n            a.mask |= setMask;\r\n            self._selectionCount++;\r\n          }\r\n        });\r\n\r\n        // select chain and molecule if all residues in it are selected\r\n        chain.collectMask();\r\n        if (molecule) {\r\n          molecule.collectMask();\r\n        }\r\n      }\r\n    } else if (chain || molecule) {\r\n      const obj = chain || molecule;\r\n      if (obj._mask & setMask) {\r\n        obj._mask &= clearMask;\r\n        obj.forEachResidue((r) => {\r\n          if (r._mask & setMask) {\r\n            r._mask &= clearMask;\r\n            r.forEachAtom((a) => {\r\n              if (a.mask & setMask) {\r\n                a.mask &= clearMask;\r\n                self._selectionCount--;\r\n              }\r\n            });\r\n            r._mask &= clearMask;\r\n          }\r\n        });\r\n      } else {\r\n        obj._mask |= setMask;\r\n        obj.forEachResidue((r) => {\r\n          if (!(r._mask & setMask)) {\r\n            r._mask |= setMask;\r\n            r.forEachAtom((a) => {\r\n              if (!(a.mask & setMask)) {\r\n                a.mask |= setMask;\r\n                self._selectionCount++;\r\n              }\r\n            });\r\n            const otherObj = chain ? r.getMolecule() : r.getChain();\r\n            if (otherObj) {\r\n              otherObj.collectMask();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      this.resetSelectionMask();\r\n    }\r\n  }\r\n\r\n  expandSelection() {\r\n    const self = this;\r\n    const selectionMask = 1 << this._selectionBit;\r\n    const tmpMask = 1 << 31;\r\n\r\n    // mark atoms to add\r\n    this._complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          bond._right.mask |= tmpMask;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        bond._left.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // select marked atoms\r\n    const deselectionMask = ~tmpMask;\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & tmpMask) {\r\n        atom.mask = (atom.mask & deselectionMask) | selectionMask;\r\n        ++self._selectionCount;\r\n      }\r\n    });\r\n\r\n    this._complex.updateStructuresMask();\r\n  }\r\n\r\n  shrinkSelection() {\r\n    const self = this;\r\n    const selectionMask = 1 << this._selectionBit;\r\n    const tmpMask = 1 << 31;\r\n\r\n    // mark atoms neighbouring to unselected ones\r\n    this._complex.forEachBond((bond) => {\r\n      if (bond._left.mask & selectionMask) {\r\n        if ((bond._right.mask & selectionMask) === 0) {\r\n          bond._left.mask |= tmpMask;\r\n        }\r\n      } else if (bond._right.mask & selectionMask) {\r\n        bond._right.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // mark hanging atoms\r\n    this._complex.forEachAtom((atom) => {\r\n      if ((atom.mask & selectionMask) && (atom.bonds.length === 1)) {\r\n        atom.mask |= tmpMask;\r\n      }\r\n    });\r\n\r\n    // deselect marked atoms\r\n    const deselectionMask = ~(selectionMask | tmpMask);\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & tmpMask) {\r\n        atom.mask &= deselectionMask;\r\n        --self._selectionCount;\r\n      }\r\n    });\r\n\r\n    this._complex.updateStructuresMask();\r\n  }\r\n\r\n  getSelectedComponent() {\r\n    const selectionMask = 1 << this._selectionBit;\r\n\r\n    let component = null;\r\n    let multiple = false;\r\n\r\n    // find which component is selected (exclusively)\r\n    this._complex.forEachAtom((atom) => {\r\n      if (atom.mask & selectionMask) {\r\n        if (component === null) {\r\n          component = atom.residue._component;\r\n        } else if (component !== atom.residue._component) {\r\n          multiple = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    return multiple ? null : component;\r\n  }\r\n\r\n  getSelectionCenter(center, includesAtom, selRule) {\r\n    center.set(0.0, 0.0, 0.0);\r\n    let count = 0;\r\n\r\n    this._complex.forEachAtom((atom) => {\r\n      if (includesAtom(atom, selRule)) {\r\n        center.add(atom.position);\r\n        count++;\r\n      }\r\n    });\r\n    if (count === 0) {\r\n      return false;\r\n    }\r\n    center.divideScalar(count);\r\n    center.applyMatrix4(this.matrix);\r\n    return true;\r\n  }\r\n\r\n  needsRebuild() {\r\n    if (this._reprListChanged) {\r\n      return true;\r\n    }\r\n    const reprList = this._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      const repr = reprList[i];\r\n      if (repr.needsRebuild) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Rebuild molecule geometry asynchronously.\r\n   */\r\n  rebuild() {\r\n    const self = this;\r\n\r\n    // Destroy current geometry\r\n    gfxutils.clearTree(this);\r\n\r\n    return new Promise(((resolve) => {\r\n      // Nothing to do?\r\n      const complex = self._complex;\r\n      if (!complex) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      let errorOccured = false;\r\n      setTimeout(() => {\r\n        console.time('build');\r\n        const reprList = self._reprList;\r\n        const palette = palettes.get(settings.now.palette) || palettes.first;\r\n        let hasGeometry = false;\r\n        for (let i = 0, n = reprList.length; i < n; ++i) {\r\n          const repr = reprList[i];\r\n          repr.colorer.palette = palette;\r\n\r\n          if (repr.needsRebuild) {\r\n            repr.reset();\r\n\r\n            try {\r\n              repr.buildGeometry(complex);\r\n            } catch (e) {\r\n              if (e instanceof utils.OutOfMemoryError) {\r\n                repr.needsRebuild = false;\r\n                repr.reset();\r\n                logger.error(`Not enough memory to build geometry for representation ${repr.index + 1}`);\r\n                errorOccured = true;\r\n              } else {\r\n                throw e;\r\n              }\r\n            }\r\n\r\n            if (DEBUG && !errorOccured) {\r\n              logger.debug(`Triangles count: ${meshutils.countTriangles(repr.geo)}`);\r\n            }\r\n          }\r\n\r\n          hasGeometry = errorOccured || hasGeometry || gfxutils.groupHasGeometryToRender(repr.geo);\r\n\r\n          if (repr.geo) {\r\n            self.add(repr.geo);\r\n          }\r\n        }\r\n\r\n        self._reprListChanged = false;\r\n\r\n        console.timeEnd('build');\r\n        resolve();\r\n      }, 10);\r\n    }));\r\n  }\r\n\r\n  setNeedsRebuild() {\r\n    // invalidate all representations\r\n    const reprList = this._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      reprList[i].needsRebuild = true;\r\n    }\r\n  }\r\n\r\n  rebuildSelectionGeometry() {\r\n    const mask = 1 << this._selectionBit;\r\n\r\n    gfxutils.clearTree(this._selectionGeometry);\r\n\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const repr = this._reprList[i];\r\n      const sg = repr.buildSelectionGeometry(mask);\r\n      if (!sg) {\r\n        continue;\r\n      }\r\n\r\n      this._selectionGeometry.add(sg);\r\n      for (let j = 0; j < sg.children.length; j++) {\r\n        const m = sg.children[j];\r\n\r\n        // copy component transform (that's not applied yet)\r\n        // TODO make this code obsolete, accessing editor is bad\r\n        if (this._editor && this._editor._componentTransforms) {\r\n          const t = this._editor._componentTransforms[m._component._index];\r\n          if (t) {\r\n            m.position.copy(t.position);\r\n            m.quaternion.copy(t.quaternion);\r\n          }\r\n        }\r\n      }\r\n\r\n      gfxutils.applySelectionMaterial(sg);\r\n    }\r\n  }\r\n\r\n  _buildSelectorFromSortedLists(atoms, residues, chains) {\r\n    const complex = this._complex;\r\n\r\n    function optimizeList(list) {\r\n      const result = [];\r\n      let k = 0;\r\n      let first = NaN;\r\n      let last = NaN;\r\n      for (let i = 0, n = list.length; i < n; ++i) {\r\n        const value = list[i];\r\n        if (value === last + 1) {\r\n          last = value;\r\n        } else {\r\n          if (!Number.isNaN(first)) {\r\n            result[k++] = new selectors.Range(first, last);\r\n          }\r\n          first = last = value;\r\n        }\r\n      }\r\n      if (!Number.isNaN(first)) {\r\n        result[k] = new selectors.Range(first, last);\r\n      }\r\n      return result;\r\n    }\r\n\r\n    let expression = null;\r\n    if (chains.length === complex._chains.length) {\r\n      expression = selectors.all();\r\n    } else {\r\n      let selector;\r\n      if (chains.length > 0) {\r\n        selector = selectors.chain(chains);\r\n        expression = expression ? selectors.or(expression, selector) : selector;// NOSONAR\r\n      }\r\n      if (Object.keys(residues).length > 0) {\r\n        for (const ch in residues) {\r\n          if (residues.hasOwnProperty(ch)) {\r\n            selector = selectors.and(\r\n              selectors.chain(ch),\r\n              selectors.residx(optimizeList(residues[ch])),\r\n            );\r\n            expression = expression ? selectors.or(expression, selector) : selector;\r\n          }\r\n        }\r\n      }\r\n      if (atoms.length > 0) {\r\n        selector = selectors.serial(optimizeList(atoms));\r\n        expression = expression ? selectors.or(expression, selector) : selector;\r\n      }\r\n\r\n      if (!expression) {\r\n        expression = selectors.none();\r\n      }\r\n    }\r\n\r\n    return expression;\r\n  }\r\n\r\n  buildSelectorFromMask(mask) {\r\n    const complex = this._complex;\r\n    const chains = [];\r\n    const residues = {};\r\n    const atoms = [];\r\n\r\n    complex.forEachChain((chain) => {\r\n      if (chain._mask & mask) {\r\n        chains.push(chain._name);\r\n      }\r\n    });\r\n\r\n    complex.forEachResidue((residue) => {\r\n      if (residue._mask & mask && !(residue._chain._mask & mask)) {\r\n        const c = residue._chain._name;\r\n        if (!(c in residues)) {\r\n          residues[c] = [residue._index];\r\n        } else {\r\n          residues[c].push(residue._index);\r\n        }\r\n      }\r\n    });\r\n\r\n    complex.forEachAtom((atom) => {\r\n      if (atom.mask & mask && !(atom.residue._mask & mask)) {\r\n        atoms.push(atom.serial);\r\n      }\r\n    });\r\n\r\n    return this._buildSelectorFromSortedLists(atoms, residues, chains);\r\n  }\r\n\r\n  forSelectedResidues(process) {\r\n    const selectionMask = 1 << this._selectionBit;\r\n    this._complex.forEachResidue((residue) => {\r\n      if (residue._mask & selectionMask) {\r\n        process(residue);\r\n      }\r\n    });\r\n  }\r\n\r\n  beginComponentEdit() {\r\n    if (this._editor) {\r\n      return null;\r\n    }\r\n\r\n    const editor = new ComplexVisualEdit.ComponentEditor(this);\r\n    if (!editor.begin()) {\r\n      return null;\r\n    }\r\n\r\n    this._editor = editor;\r\n    return editor;\r\n  }\r\n\r\n  beginFragmentEdit() {\r\n    if (this._editor) {\r\n      return null;\r\n    }\r\n\r\n    const editor = new ComplexVisualEdit.FragmentEditor(this);\r\n    if (!editor.begin()) {\r\n      return null;\r\n    }\r\n\r\n    this._editor = editor;\r\n    return editor;\r\n  }\r\n\r\n  // should only be called by editors\r\n  finalizeEdit() {\r\n    this._editor = null;\r\n  }\r\n\r\n  setMaterialValues(values, needTraverse = false, process = undefined) {\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const rep = this._reprList[i];\r\n      rep.material.setValues(values);\r\n      if (needTraverse) {\r\n        rep.geo.traverse((object) => {\r\n          if (object instanceof THREE.Mesh) {\r\n            object.material.setValues(values);\r\n\r\n            if (process !== undefined) {\r\n              process(object);\r\n            }\r\n\r\n            object.material.needsUpdate = true;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  setUberOptions(values) {\r\n    for (let i = 0, n = this._reprList.length; i < n; ++i) {\r\n      const rep = this._reprList[i];\r\n      rep.material.setUberOptions(values);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build selector that contains all atoms within given distance from group of atoms\r\n   * @param {Selector} selector - selector describing source group of atoms\r\n   * @param {number} radius - distance\r\n   * @returns {Selector} selector describing result group of atoms\r\n   */\r\n  within(selector, radius) {\r\n    const vw = this._complex.getVoxelWorld();\r\n    if (vw === null) {\r\n      return false;\r\n    }\r\n\r\n    // mark atoms of the group as selected\r\n    const selectionMask = 1 << this._selectionBit;\r\n    this._complex.markAtoms(selector, selectionMask);\r\n\r\n    // mark all atoms within distance as selected\r\n    if (vw) {\r\n      vw.forEachAtomWithinDistFromMasked(this._complex, selectionMask, Number(radius), (atom) => {\r\n        atom.mask |= selectionMask;\r\n      });\r\n    }\r\n\r\n    // update selection count\r\n    this._selectionCount = this._complex.countAtomsByMask(selectionMask);\r\n\r\n    // update secondary structure mask\r\n    this._complex.updateStructuresMask();\r\n\r\n    return this.buildSelectorFromMask(selectionMask);\r\n  }\r\n}\r\n// 32 bits = 30 bits for reps + 1 for selection + 1 for selection expansion\r\nComplexVisual.NUM_REPRESENTATION_BITS = 30;\r\n\r\nexport default ComplexVisual;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexVolumeFaces from './VolumeFaces.vert';\r\nimport fragmentVolumeFaces from './VolumeFaces.frag';\r\nimport vertexVolume from './Volume.vert';\r\nimport fragmentVolume from './Volume.frag';\r\nimport vertexFarPlane from './VolumeFarPlane.vert';\r\nimport fragmentFarPlane from './VolumeFarPlane.frag';\r\nimport settings from '../../settings';\r\n\r\nconst volumeUniforms = THREE.UniformsUtils.merge([\r\n  {\r\n    volumeDim: { type: 'v3', value: new THREE.Vector3(512, 512, 512) },\r\n    tileTex: { type: 't', value: null },\r\n    tileTexSize: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n    tileStride: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n\r\n    boxAngles: { type: 'v3', value: new THREE.Vector3(1, 1, 1) },\r\n    delta: { type: 'v3', value: new THREE.Vector3(0, 0, 0) },\r\n\r\n    _isoLevel0: { type: 'v2', value: new THREE.Vector3(0.5, 0.75, 1.0) },\r\n    _flipV: { type: 'f', value: 0.0 },\r\n    _BFLeft: { type: 't', value: null },\r\n    _BFRight: { type: 't', value: null },\r\n    _FFLeft: { type: 't', value: null },\r\n    _FFRight: { type: 't', value: null },\r\n    _WFFLeft: { type: 't', value: null },\r\n    _WFFRight: { type: 't', value: null },\r\n  },\r\n]);\r\n\r\nfunction overrideUniforms(params, defUniforms) {\r\n  const uniforms = THREE.UniformsUtils.clone(defUniforms);\r\n  for (const p in params) {\r\n    if (uniforms.hasOwnProperty(p)) {\r\n      uniforms[p].value = params[p];\r\n    }\r\n  }\r\n  return uniforms;\r\n}\r\n\r\nfunction facesPosMaterialParams(params, sideType) {\r\n  return {\r\n    uniforms: overrideUniforms(params, {}),\r\n    vertexShader: vertexVolumeFaces,\r\n    fragmentShader: fragmentVolumeFaces,\r\n    transparent: false,\r\n    depthTest: false,\r\n    depthWrite: false,\r\n    side: sideType,\r\n  };\r\n}\r\n\r\nclass BackFacePosMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const backFaceParams = facesPosMaterialParams(params, THREE.BackSide);\r\n    super(backFaceParams);\r\n  }\r\n}\r\n\r\nclass ShaderParams {\r\n  constructor(params, uniforms, vertexShader, fragmentShader) {\r\n    this.uniforms = overrideUniforms(params, uniforms);\r\n    this.vertexShader = vertexShader;\r\n    this.fragmentShader = fragmentShader;\r\n    this.transparent = false;\r\n    this.depthTest = false;\r\n    this.depthWrite = false;\r\n    this.side = THREE.FrontSide;\r\n  }\r\n}\r\n\r\nclass BackFacePosMaterialFarPlane extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const matUniforms = THREE.UniformsUtils.merge([\r\n      {\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        farZ: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        matWorld2Volume: { type: '4fv', value: new THREE.Matrix4() },\r\n      },\r\n    ]);\r\n\r\n    const shaderParams = new ShaderParams(params, matUniforms, vertexFarPlane, fragmentFarPlane);\r\n    super(shaderParams);\r\n  }\r\n}\r\n\r\nclass FrontFacePosMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const frontFaceParams = facesPosMaterialParams(params, THREE.FrontSide);\r\n    super(frontFaceParams);\r\n  }\r\n}\r\n\r\nclass VolumeMaterial extends THREE.ShaderMaterial {\r\n  constructor(params) {\r\n    const shaderParams = new ShaderParams(params, volumeUniforms, vertexVolume, fragmentVolume);\r\n    shaderParams.transparent = true;\r\n    shaderParams.depthTest = true;\r\n\r\n    super(shaderParams);\r\n    this.updateDefines();\r\n  }\r\n\r\n  updateDefines() {\r\n    this.defines = {\r\n      ISO_MODE: settings.now.modes.VD.isoMode,\r\n      STEPS_COUNT: settings.now.modes.VD.polyComplexity[settings.now.resolution] * 100,\r\n    };\r\n    this.needsUpdate = true;\r\n  }\r\n}\r\n\r\nexport default {\r\n  BackFacePosMaterial,\r\n  BackFacePosMaterialFarPlane,\r\n  FrontFacePosMaterial,\r\n  VolumeMaterial,\r\n};\r\n","import * as THREE from 'three';\r\nimport VolumeMaterial from './shaders/VolumeMaterial';\r\nimport settings from '../settings';\r\n\r\nclass VolumeMesh extends THREE.Mesh {\r\n  volumeInfo = {}; // data for noise filter\r\n\r\n  constructor() {\r\n    const geo = new THREE.BufferGeometry();\r\n    super(geo);\r\n    this.clipPlane = new THREE.Plane();\r\n    const size = new THREE.Vector3(0.5, 0.5, 0.5);\r\n    this.size = size;\r\n\r\n    this.cullFlag = [\r\n      true, true, true, true,\r\n      true, true, true, true,\r\n      false, false, false, false, false, false,\r\n    ];\r\n\r\n    this.faces = [\r\n      { indices: [], norm: new THREE.Vector3(0, 0, -1) },\r\n      { indices: [], norm: new THREE.Vector3(0, 0, 1) },\r\n      { indices: [], norm: new THREE.Vector3(0, -1, 0) },\r\n      { indices: [], norm: new THREE.Vector3(0, 1, 0) },\r\n      { indices: [], norm: new THREE.Vector3(-1, 0, 0) },\r\n      { indices: [], norm: new THREE.Vector3(1, 0, 0) },\r\n      { indices: [], norm: new THREE.Vector3(0, 0, 0) },\r\n    ];\r\n\r\n    this.vertices = [\r\n      new THREE.Vector3(-size.x, -size.y, -size.z),\r\n      new THREE.Vector3(-size.x, size.y, -size.z),\r\n      new THREE.Vector3(size.x, -size.y, -size.z),\r\n      new THREE.Vector3(size.x, size.y, -size.z),\r\n      new THREE.Vector3(-size.x, -size.y, size.z),\r\n      new THREE.Vector3(-size.x, size.y, size.z),\r\n      new THREE.Vector3(size.x, -size.y, size.z),\r\n      new THREE.Vector3(size.x, size.y, size.z),\r\n      new THREE.Vector3(0.0, 0.0, 0.0), // Placeholder for section\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n      new THREE.Vector3(0.0, 0.0, 0.0),\r\n    ];\r\n\r\n    geo.setAttribute('position', new THREE.BufferAttribute(new Float32Array(this.vertices.length * 3), 3));\r\n\r\n    this.name = 'VolumeMesh';\r\n  }\r\n\r\n  static _corners = [\r\n    // x, y, z, edge1, edge2, edge3\r\n    [-1, -1, -1, 0, 4, 8],\r\n    [1, -1, -1, 0, 5, 9],\r\n    [1, 1, -1, 1, 5, 10],\r\n    [-1, 1, -1, 1, 4, 11],\r\n    [-1, -1, 1, 2, 6, 8],\r\n    [1, -1, 1, 2, 7, 9],\r\n    [1, 1, 1, 3, 7, 10],\r\n    [-1, 1, 1, 3, 6, 11],\r\n  ];\r\n\r\n  static _edges = [\r\n    // corner1, corner2, center_x, center_y, center_z\r\n    [0, 1, 0, -1, -1],\r\n    [2, 3, 0, 1, -1],\r\n    [4, 5, 0, -1, 1],\r\n    [6, 7, 0, 1, 1],\r\n    [0, 3, -1, 0, -1],\r\n    [1, 2, 1, 0, -1],\r\n    [4, 7, -1, 0, 1],\r\n    [5, 6, 1, 0, 1],\r\n    [0, 4, -1, -1, 0],\r\n    [1, 5, 1, -1, 0],\r\n    [2, 6, -1, 1, 0],\r\n    [3, 7, 1, 1, 0],\r\n  ];\r\n\r\n  static _edgeIntersections = (function () {\r\n    const edgeIntersections = [];\r\n    for (let j = 0; j < 12; ++j) {\r\n      edgeIntersections.push(new THREE.Vector3());\r\n    }\r\n    return edgeIntersections;\r\n  }());\r\n\r\n  _updateVertices() {\r\n    // Algorithm:\r\n    // 1. Get plane parameters\r\n    // 2. Compute culling flags for all vertices\r\n    // 3. If intersection occurs => compute from 3 to 6 intersection points\r\n    const corners = VolumeMesh._corners;\r\n    const edges = VolumeMesh._edges;\r\n    const edgeIntersections = VolumeMesh._edgeIntersections;\r\n\r\n    let i;\r\n\r\n    const norm = this.clipPlane.normal;\r\n    const D = this.clipPlane.constant;\r\n\r\n    const vert = this.vertices;\r\n    const { size } = this;\r\n\r\n    const cornerMark = [0, 0, 0, 0, 0, 0, 0, 0];\r\n    const edgeMark = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\r\n    const curEdge = new THREE.Vector3();\r\n    let curEdgeInter = null;\r\n\r\n    function CheckX() {\r\n      if (norm.x === 0) return 0;\r\n      const x = -(norm.dot(curEdge) + D) / norm.x;\r\n      if (-size.x <= x && x <= size.x) {\r\n        curEdgeInter.set(x, curEdge.y, curEdge.z);\r\n        if (x === size.x) return 2;\r\n        if (x === -size.x) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    function CheckY() {\r\n      if (norm.y === 0) return 0;\r\n      const y = -(norm.dot(curEdge) + D) / norm.y;\r\n      if (-size.y <= y && y <= size.y) {\r\n        curEdgeInter.set(curEdge.x, y, curEdge.z);\r\n        if (y === size.y) return 2;\r\n        if (y === -size.y) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    function CheckZ() {\r\n      if (norm.z === 0) return 0;\r\n      const z = -(norm.dot(curEdge) + D) / norm.z;\r\n      if (-size.z <= z && z <= size.z) {\r\n        curEdgeInter.set(curEdge.x, curEdge.y, z);\r\n        if (z === size.z) return 2;\r\n        if (z === -size.z) return -2;\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n\r\n    // for each edge\r\n    for (let curEdgeIdx = 0; curEdgeIdx < 12; ++curEdgeIdx) {\r\n      const curEdgeSource = edges[curEdgeIdx];\r\n      curEdgeInter = edgeIntersections[curEdgeIdx];\r\n\r\n      curEdge.set(curEdgeSource[2], curEdgeSource[3], curEdgeSource[4]);\r\n      curEdge.multiply(size);\r\n\r\n      // calculate intersection point\r\n      let flag = 0;\r\n      if (curEdgeSource[2] === 0) flag = CheckX();\r\n      if (curEdgeSource[3] === 0) flag = CheckY();\r\n      if (curEdgeSource[4] === 0) flag = CheckZ();\r\n\r\n      // mark corresponding corner (if plane cuts through one)\r\n      if (flag === -2) {\r\n        cornerMark[curEdgeSource[0]] = 1;\r\n      } else if (flag === 2) {\r\n        cornerMark[curEdgeSource[1]] = 1;\r\n      } else if (flag === 0) {\r\n        // edge is not intersected by the plane (doesn't produce a vertex)\r\n        edgeMark[curEdgeIdx] = 0;\r\n      }\r\n    }\r\n\r\n    const face = {\r\n      indices: [],\r\n      norm: norm.clone().negate(),\r\n    };\r\n\r\n    let nextVertex = 8;\r\n\r\n    // for each marked corner\r\n    for (i = 0; i < 8; ++i) {\r\n      if (cornerMark[i] === 1) {\r\n        // add corner as vertex to the face\r\n        vert[nextVertex].set(corners[i][0], corners[i][1], corners[i][2]).multiply(size);\r\n        face.indices.push(nextVertex++);\r\n        // skip adjacent edges\r\n        edgeMark[corners[i][3]] = 0;\r\n        edgeMark[corners[i][4]] = 0;\r\n        edgeMark[corners[i][5]] = 0;\r\n      }\r\n    }\r\n\r\n    // for each edge that has internal intersection\r\n    for (i = 0; i < 12; ++i) {\r\n      if (edgeMark[i] === 1) {\r\n        // add intersection point as vertex to the face\r\n        vert[nextVertex].copy(edgeIntersections[i]);\r\n        face.indices.push(nextVertex++);\r\n      }\r\n    }\r\n\r\n    this.faces[6] = face;\r\n\r\n    const diff = new THREE.Vector3();\r\n    const coplanarPoint = new THREE.Vector3();\r\n    this.clipPlane.coplanarPoint(coplanarPoint);\r\n    for (i = 0; i < vert.length; ++i) {\r\n      this.cullFlag[i] = false;\r\n      if (i < 8) {\r\n        // corners should be culled by clipping plane\r\n        diff.subVectors(vert[i], coplanarPoint);\r\n        this.cullFlag[i] = (norm.dot(diff) >= 0.0);\r\n      } else if (i < 8 + face.indices.length) {\r\n        // cross section vertices don't get culled\r\n        this.cullFlag[i] = true;\r\n      }\r\n    }\r\n\r\n    // write data to vertex buffer\r\n    const positions = this.geometry.getAttribute('position');\r\n    let idx = 0;\r\n    for (i = 0; i < vert.length; ++i) {\r\n      positions.array[idx++] = vert[i].x;\r\n      positions.array[idx++] = vert[i].y;\r\n      positions.array[idx++] = vert[i].z;\r\n    }\r\n    positions.needsUpdate = true;\r\n  }\r\n\r\n  _collectVertices(face, filter) {\r\n    let i;\r\n    const vert = this.vertices;\r\n    face.indices = [];\r\n    for (i = 0; i < vert.length; ++i) {\r\n      if (this.cullFlag[i] && filter(vert[i])) {\r\n        face.indices.push(i);\r\n      }\r\n    }\r\n  }\r\n\r\n  _sortIndices(face, right) {\r\n    let i;\r\n    let j;\r\n    const vert = this.vertices;\r\n    const angle = [];\r\n\r\n    const dir = new THREE.Vector3();\r\n    for (i = 1; i < face.indices.length; ++i) {\r\n      dir.subVectors(vert[face.indices[i]], vert[face.indices[0]]);\r\n      dir.normalize();\r\n      dir.cross(right);\r\n      dir.negate();\r\n      angle[i] = face.norm.dot(dir);\r\n    }\r\n\r\n    // Exchange sort\r\n    for (i = 1; i < face.indices.length - 1; ++i) {\r\n      for (j = i + 1; j < face.indices.length; ++j) {\r\n        if (angle[j] < angle[i]) {\r\n          // swap\r\n          let t = angle[i];\r\n          angle[i] = angle[j];\r\n          angle[j] = t;\r\n\r\n          t = face.indices[i];\r\n          face.indices[i] = face.indices[j];\r\n          face.indices[j] = t;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateIndices() {\r\n    // Algorithm:\r\n    // 1. Get plane vertices (from 3 to 6 vertices)\r\n    // 2. Get \"right\" vector in plane\r\n    // 3. Sort vertices using Graham-like method\r\n    // 4. Create indices\r\n\r\n    let i;\r\n    let faceIdx;\r\n    let face;\r\n    const vert = this.vertices;\r\n    const { size } = this;\r\n\r\n    this._collectVertices(this.faces[0], (vertex) => vertex.z === -size.z);\r\n    this._collectVertices(this.faces[1], (vertex) => vertex.z === size.z);\r\n    this._collectVertices(this.faces[2], (vertex) => vertex.y === -size.y);\r\n    this._collectVertices(this.faces[3], (vertex) => vertex.y === size.y);\r\n    this._collectVertices(this.faces[4], (vertex) => vertex.x === -size.x);\r\n    this._collectVertices(this.faces[5], (vertex) => vertex.x === size.x);\r\n\r\n    const vCenter = new THREE.Vector3();\r\n    const vRight = new THREE.Vector3();\r\n    const vDir = new THREE.Vector3();\r\n\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n\r\n      if (face.indices.length === 0) continue;\r\n\r\n      vCenter.set(0, 0, 0);\r\n      for (i = 0; i < face.indices.length; ++i) {\r\n        vCenter.add(vert[face.indices[i]]);\r\n      }\r\n      vCenter.multiplyScalar(1.0 / face.indices.length);\r\n      vRight.subVectors(vert[face.indices[0]], vCenter);\r\n      vRight.normalize();\r\n\r\n      const rightProj = [];\r\n      for (i = 0; i < face.indices.length; ++i) {\r\n        vDir.subVectors(vert[face.indices[i]], vCenter);\r\n        rightProj[i] = vDir.dot(vRight);\r\n      }\r\n      for (i = 1; i < face.indices.length; ++i) {\r\n        if (rightProj[i] < rightProj[0]) {\r\n          // swap\r\n          let t = rightProj[0];\r\n          rightProj[0] = rightProj[i];\r\n          rightProj[i] = t;\r\n\r\n          [t] = face.indices;\r\n          face.indices[0] = face.indices[i];\r\n          face.indices[i] = t;\r\n        }\r\n      }\r\n\r\n      this._sortIndices(face, vRight);\r\n    }\r\n\r\n    let numIndices = 0;\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n      if (face.indices.length >= 3) {\r\n        numIndices += 3 * (face.indices.length - 2);\r\n      }\r\n    }\r\n    let offset = 0;\r\n    const indices = new Uint16Array(numIndices);\r\n    for (faceIdx = 0; faceIdx < this.faces.length; ++faceIdx) {\r\n      face = this.faces[faceIdx];\r\n      for (i = 0; i < face.indices.length - 2; ++i) {\r\n        indices[offset] = face.indices[0]; // eslint-disable-line prefer-destructuring\r\n        indices[offset + 1] = face.indices[i + 1];\r\n        indices[offset + 2] = face.indices[i + 2];\r\n        offset += 3;\r\n      }\r\n    }\r\n\r\n    this.geometry.setIndex(new THREE.BufferAttribute(indices, 1));\r\n  }\r\n\r\n  setDataSource(dataSource) {\r\n    const vm = new VolumeMaterial.VolumeMaterial();\r\n    const dim = dataSource.getDimensions();\r\n    const stride = dataSource.getTiledTextureStride();\r\n    const texture = dataSource.buildTiledTexture();\r\n    const bbox = dataSource.getBox();\r\n    vm.uniforms.volumeDim.value.set(dim[0], dim[1], dim[2]);\r\n    vm.uniforms.tileTex.value = texture;\r\n    vm.uniforms.tileTexSize.value.set(texture.image.width, texture.image.height);\r\n    vm.uniforms.tileStride.value.set(stride[0], stride[1]);\r\n    Object.assign(this.volumeInfo, dataSource.getVolumeInfo());\r\n\r\n    const volInfo = this.volumeInfo;\r\n    vm.uniforms.delta.value.copy(volInfo.delta);\r\n    vm.uniforms.boxAngles.value.set(volInfo.obtuseAngle[0], volInfo.obtuseAngle[1], volInfo.obtuseAngle[2]);\r\n\r\n    this.material = vm;\r\n\r\n    bbox.getSize(this.scale);\r\n    bbox.getCenter(this.position);\r\n  }\r\n\r\n  _updateIsoLevel() {\r\n    const { kSigma, kSigmaMed, kSigmaMax } = settings.now.modes.VD;\r\n    const volInfo = this.volumeInfo;\r\n    const mean = volInfo.dmean - volInfo.dmin;\r\n    const span = volInfo.dmax - volInfo.dmin;\r\n    const level = (k) => (mean + k * volInfo.sd) / span;\r\n    this.material.uniforms._isoLevel0.value.set(level(kSigma), level(kSigmaMed), level(kSigmaMax));\r\n  }\r\n\r\n  static _nearClipPlaneOffset = 0.2;\r\n\r\n  static _pos = new THREE.Vector3();\r\n\r\n  static _norm = new THREE.Vector3();\r\n\r\n  static _norm4D = new THREE.Vector4();\r\n\r\n  static _matrixWorldToLocal = new THREE.Matrix4();\r\n\r\n  static _clipPlane = new THREE.Plane();\r\n\r\n  rebuild(camera) {\r\n    const nearClipPlaneOffset = VolumeMesh._nearClipPlaneOffset;\r\n    const pos = VolumeMesh._pos;\r\n    const norm = VolumeMesh._norm;\r\n    const norm4D = VolumeMesh._norm4D;\r\n    const matrixWorldToLocal = VolumeMesh._matrixWorldToLocal;\r\n    const clipPlane = VolumeMesh._clipPlane;\r\n\r\n    this._updateIsoLevel();\r\n\r\n    // get clip plane in local space\r\n    camera.getWorldDirection(norm);\r\n    camera.getWorldPosition(pos);\r\n    pos.addScaledVector(norm, camera.near + nearClipPlaneOffset);\r\n\r\n    // transform pos to local CS\r\n    matrixWorldToLocal.copy(this.matrixWorld).invert();\r\n    pos.applyMatrix4(matrixWorldToLocal);\r\n\r\n    // transform norm to local CS\r\n    norm4D.set(norm.x, norm.y, norm.z, 0.0); // NOTE: use homogeneous norm for proper transformation\r\n    norm4D.applyMatrix4(matrixWorldToLocal);\r\n    norm.copy(norm4D);\r\n    norm.normalize();\r\n\r\n    clipPlane.setFromNormalAndCoplanarPoint(norm, pos);\r\n\r\n    if (!this.clipPlane.equals(clipPlane)) {\r\n      this.clipPlane = clipPlane.clone();\r\n      this._updateVertices();\r\n      this._updateIndices();\r\n    }\r\n  }\r\n}\r\n\r\nexport default VolumeMesh;\r\n","import * as THREE from 'three';\r\nimport gfxutils from './gfxutils';\r\n\r\nfunction _flattenArray(input) {\r\n  const n = input.length;\r\n  const output = new Float32Array(n * 3);\r\n  for (let i = 0; i < n; ++i) {\r\n    const j = 3 * i;\r\n    const v = input[i];\r\n    output[j] = v.x;\r\n    output[j + 1] = v.y;\r\n    output[j + 2] = v.z;\r\n  }\r\n  return output;\r\n}\r\n\r\nclass VolumeBounds {\r\n  static _projectionTable = { // corresponds between (origin axes and angles between them) and between saving vector coordinates\r\n    XY: ['x', 2],\r\n    XZ: ['y', 1],\r\n    YZ: ['z', 0],\r\n  };\r\n\r\n  constructor(bBox, volInfo) {\r\n    const { delta } = volInfo; // {x: XY, y : XZ, z: YZ}\r\n    const { obtuseAngle } = volInfo; // 1 - obtuse, 0 - acute\r\n\r\n    const bSize = new THREE.Vector3();\r\n    bBox.getSize(bSize);\r\n    bSize.multiplyScalar(0.5);\r\n\r\n    const offsetVert = this._getBaseVertices(delta, obtuseAngle);\r\n\r\n    const geometry = new THREE.BufferGeometry();\r\n    const vertices = [];\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n      vertices.push(offsetVert[i].clone().multiply(bSize));\r\n      vertices.push(offsetVert[(i + 1) % 4].clone().multiply(bSize));\r\n    }\r\n    const translation = new THREE.Vector3(2 * bSize.x * (1 - delta.x - delta.y), 0, 0);\r\n    for (let i = 0; i < 8; i++) {\r\n      vertices.push(vertices[i].clone().add(translation));\r\n    }\r\n    for (let i = 0; i < 4; i++) {\r\n      vertices.push(vertices[i * 2].clone());\r\n      vertices.push(vertices[i * 2 + 8].clone());\r\n    }\r\n    const center = new THREE.Vector3();\r\n    bBox.getCenter(center);\r\n    vertices.forEach((vertex) => vertex.add(center)); // pivot shift\r\n\r\n    const flatVertices = _flattenArray(vertices);\r\n    geometry.setAttribute('position', new THREE.BufferAttribute(flatVertices, 3));\r\n\r\n    this._lines = new THREE.LineSegments(geometry, new THREE.LineBasicMaterial({ color: 0xFFFFFF }));\r\n    this._lines.layers.set(gfxutils.LAYERS.VOLUME);\r\n  }\r\n\r\n  // Set one edge (4 points) of frame, from which with parallel transfer  the rest of the frame points can be obtained\r\n  _getBaseVertices(delta, obtuseAngle) {\r\n    const projTable = VolumeBounds._projectionTable;\r\n\r\n    const proj = ((index, inv) => { // tricky function to take account of projections: their position(related to box) and sign\r\n      const currDelta = delta[projTable[index][0]];\r\n      const angleValue = -0.5 * (inv - 1) + inv * obtuseAngle[projTable[index][1]];// inv = 1: alpha; inv = -1: 1 - alpha\r\n      return angleValue * currDelta;\r\n    });\r\n\r\n    const offsetVert = [\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', 1) + proj('XY', 1)), -1 + 2 * proj('YZ', 1), -1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', -1) + proj('XY', 1)), -1 + 2 * proj('YZ', -1), 1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', -1) + proj('XY', -1)), 1 - 2 * proj('YZ', 1), 1),\r\n      new THREE.Vector3(-1 + 2 * (proj('XZ', 1) + proj('XY', -1)), 1 - 2 * proj('YZ', -1), -1),\r\n    ];\r\n\r\n    return offsetVert;\r\n  }\r\n\r\n  getMesh() {\r\n    return this._lines;\r\n  }\r\n}\r\n\r\nexport default VolumeBounds;\r\n","import * as THREE from 'three';\r\nimport VolumeMaterial from './shaders/VolumeMaterial';\r\nimport meshes from './meshes/meshes';\r\nimport gfxutils from './gfxutils';\r\n\r\n// Thes geometric far plane is required for correct filling in the BFTexture in case, when far plane cuts the volume\r\n// cube. In cut place of cube there is no correct data in BFTexture and volume rendering integral is calculated\r\n// with errors.\r\n// Far plane cuts the cube in case of large volume scale (zoom), because farplane doesn't change\r\nclass VolumeFarPlane {\r\n  // create plane with unit corners coords (for future rescale in vshader according to camera properties)\r\n  constructor(volume, width, height) {\r\n    const planeGeo = this._initPlaneGeo(width, height);\r\n\r\n    const mat = new VolumeMaterial.BackFacePosMaterialFarPlane();\r\n    this._plane = new meshes.Mesh(planeGeo, mat);\r\n    this._plane.frustumCulled = false;\r\n    this._plane.doubleSided = true;\r\n    const matWorldToVolume = new THREE.Matrix4();\r\n\r\n    this._plane._onBeforeRender = function (_renderer, _scene, camera, _geometry, _material, _group) {\r\n      const { material } = this;\r\n      if (!volume || !material) {\r\n        return;\r\n      }\r\n\r\n      // count point in world at farplane place\r\n      const planeCamPos = new THREE.Vector4(0, 0, -(camera.far - 0.1), 1);\r\n      planeCamPos.applyMatrix4(camera.matrixWorld);\r\n\r\n      // recalc matrices to make plane be placed as farplane in the World relative to camera\r\n      this.matrix.identity();\r\n      this.matrix.makeTranslation(planeCamPos.x, planeCamPos.y, planeCamPos.z);\r\n      this.matrixWorld.copy(this.matrix);\r\n      this.modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse, this.matrixWorld);\r\n      this.normalMatrix.getNormalMatrix(this.modelViewMatrix);\r\n\r\n      // build worldToVolume matrix to transform plane into volumeCS (volumeCS coords are written to BackFaceTexture)\r\n      const volumeMatrix = volume.matrixWorld;\r\n      matWorldToVolume.copy(volumeMatrix).invert();\r\n\r\n      // update material props\r\n      material.uniforms.aspectRatio.value = camera.aspect;\r\n      material.uniforms.farZ.value = camera.far;\r\n      material.uniforms.tanHalfFOV.value = Math.tan(THREE.MathUtils.DEG2RAD * 0.5 * camera.fov);\r\n      material.uniforms.matWorld2Volume.value = matWorldToVolume;\r\n    };\r\n\r\n    // set it to special layer to draw only into BFTexture\r\n    this._plane.layers.set(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n  }\r\n\r\n  _initPlaneGeo(width, height) {\r\n    const planeGeo = new THREE.BufferGeometry();\r\n\r\n    width = width || 1;\r\n    height = height || 1;\r\n\r\n    const vertices = new Float32Array([\r\n      -0.5 * width, 0.5 * height, 0,\r\n      0.5 * width, 0.5 * height, 0,\r\n      -0.5 * width, -0.5 * height, 0,\r\n      0.5 * width, -0.5 * height, 0,\r\n    ]);\r\n\r\n    planeGeo.setAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n    planeGeo.setIndex([0, 2, 1, 2, 3, 1]);\r\n\r\n    return planeGeo;\r\n  }\r\n\r\n  getMesh() {\r\n    return this._plane;\r\n  }\r\n}\r\n\r\nexport default VolumeFarPlane;\r\n","import * as THREE from 'three';\r\nimport VolumeMesh from './gfx/VolumeMesh';\r\nimport VolumeBounds from './gfx/VolumeBounds';\r\nimport VolumeFarPlane from './gfx/VolumeFarPlane';\r\nimport Visual from './Visual';\r\nimport settings from './settings';\r\n\r\nclass VolumeVisual extends Visual {\r\n  constructor(name, dataSource) {\r\n    super(name, dataSource);\r\n    this._mesh = new VolumeMesh();\r\n    this._mesh.setDataSource(dataSource);\r\n    this.add(this._mesh);\r\n\r\n    this._frame = new VolumeBounds(this.getBoundaries().boundingBox, this._mesh.volumeInfo);\r\n    this.add(this._frame.getMesh());\r\n    this.showFrame(settings.now.modes.VD.frame);\r\n\r\n    this._farPlane = new VolumeFarPlane(this._mesh, 2, 2);\r\n    this.add(this._farPlane.getMesh());\r\n  }\r\n\r\n  getBoundaries() {\r\n    const box = this._dataSource.getBox();\r\n    const sphere = new THREE.Sphere();\r\n    box.getBoundingSphere(sphere);\r\n\r\n    return {\r\n      boundingBox: box,\r\n      boundingSphere: sphere,\r\n    };\r\n  }\r\n\r\n  getMesh() {\r\n    return this._mesh;\r\n  }\r\n\r\n  showFrame(needShow) {\r\n    this._frame.getMesh().material.visible = needShow;\r\n  }\r\n}\r\n\r\nexport default VolumeVisual;\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available loaders.\r\n * @extends EntityList\r\n */\r\nclass LoaderList extends EntityList {\r\n  /**\r\n   * Create a list of loaders.\r\n   * The loaders are indexed by supported source types (`.types` property of a Loader\r\n   * subclass).\r\n   * The loaders can be retrieved later by matching against specs (see {@link LoaderList#find}).\r\n   *\r\n   * @param {!Array<function(new:Loader)>=} someLoaders A list of {@link Loader} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see LoaderList#register\r\n   */\r\n  constructor(someLoaders = []) {\r\n    super(someLoaders, ['types']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable loader for a source type.\r\n   *\r\n   * @param {Object} specs Loader specifications.\r\n   * @param {string=} specs.type Supported source type.\r\n   * @param {*=} specs.source Source to load from.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.type) {\r\n      list = this._dict.types[specs.type.toLowerCase()] || [];\r\n    } else if (specs.source) {\r\n      return this._list.filter((SomeLoader) => SomeLoader.canProbablyLoad && SomeLoader.canProbablyLoad(specs.source));\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default LoaderList;\r\n","import EventDispatcher from '../../utils/EventDispatcher';\r\nimport makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Loader extends EventDispatcher {\r\n  constructor(source, options) {\r\n    super();\r\n    this._source = source;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n    this._agent = null;\r\n  }\r\n\r\n  load() {\r\n    return Promise.reject(new Error('Loading from this source is not implemented'));\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n    if (this._agent) {\r\n      this._agent.abort();\r\n    }\r\n  }\r\n\r\n  static extractName(_source) {\r\n    return undefined;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Loader.prototype);\r\n","import Loader from './Loader';\r\n\r\nexport default class FileLoader extends Loader {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n\r\n    options = this._options;\r\n    this._binary = options.binary === true;\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n\r\n      const blob = this._source;\r\n      const reader = this._agent = new FileReader();\r\n\r\n      reader.addEventListener('load', () => {\r\n        resolve(reader.result);\r\n      });\r\n      reader.addEventListener('error', () => {\r\n        reject(reader.error);\r\n      });\r\n      reader.addEventListener('abort', () => {\r\n        reject(new Error('Loading aborted'));\r\n      });\r\n      reader.addEventListener('progress', (event) => {\r\n        this.dispatchEvent(event);\r\n      });\r\n\r\n      if (this._binary) {\r\n        reader.readAsArrayBuffer(blob);\r\n      } else {\r\n        reader.readAsText(blob);\r\n      }\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(source) {\r\n    return (File && source instanceof File) || (Blob && source instanceof Blob);\r\n  }\r\n\r\n  static extractName(source) {\r\n    return source && source.name;\r\n  }\r\n}\r\n\r\nFileLoader.types = ['file', 'blob'];\r\n","import _ from 'lodash';\r\nimport Loader from './Loader';\r\n\r\n// we don't need to detect all kinds of URLs, just the evident ones\r\nconst urlStartRegexp = /^(https?|ftp):\\/\\//i;\r\n\r\nexport default class XHRLoader extends Loader {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n\r\n    options = this._options;\r\n    this._binary = (options.binary === true);\r\n  }\r\n\r\n  load() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n\r\n      const url = this._source;\r\n      const request = this._agent = new XMLHttpRequest();\r\n\r\n      request.addEventListener('load', () => {\r\n        if (request.status === 200) {\r\n          resolve(request.response);\r\n        } else {\r\n          reject(new Error(`HTTP ${request.status} while fetching ${url}`));\r\n        }\r\n      });\r\n      request.addEventListener('error', () => {\r\n        reject(new Error('HTTP request failed'));\r\n      });\r\n      request.addEventListener('abort', () => {\r\n        reject(new Error('Loading aborted'));\r\n      });\r\n      request.addEventListener('progress', (event) => {\r\n        this.dispatchEvent(event);\r\n      });\r\n\r\n      request.open('GET', url);\r\n      if (this._binary) {\r\n        request.responseType = 'arraybuffer';\r\n      } else {\r\n        request.responseType = 'text';\r\n      }\r\n      request.send();\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(source) {\r\n    return _.isString(source) && urlStartRegexp.test(source);\r\n  }\r\n\r\n  static extractName(source) {\r\n    if (source) {\r\n      const last = (source.indexOf('?') + 1 || source.lastIndexOf('#') + 1 || source.length + 1) - 1;\r\n      return source.slice(source.lastIndexOf('/', last) + 1, last);\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n\r\nXHRLoader.types = ['url'];\r\n","import Loader from './Loader';\r\n\r\nexport default class ImmediateLoader extends Loader {\r\n  load() {\r\n    return new Promise((resolve) => {\r\n      if (this._abort) {\r\n        throw new Error('Loading aborted');\r\n      }\r\n      resolve(this._source);\r\n    });\r\n  }\r\n\r\n  static canProbablyLoad(_source) {\r\n    return false;\r\n  }\r\n}\r\n\r\nImmediateLoader.types = ['immediate'];\r\n","import LoaderList from './loaders/LoaderList';\r\n\r\nimport FileLoader from './loaders/FileLoader';\r\nimport XHRLoader from './loaders/XHRLoader';\r\nimport ImmediateLoader from './loaders/ImmediateLoader';\r\n\r\nexport default new LoaderList([\r\n  // note: order might be important\r\n  FileLoader,\r\n  XHRLoader,\r\n  ImmediateLoader,\r\n]);\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available parsers.\r\n * @extends EntityList\r\n */\r\nclass ParserList extends EntityList {\r\n  /**\r\n   * Create a list of parsers.\r\n   * The parsers are indexed by supported data formats and file extensions (`.formats` and\r\n   * `.extensions` properties of a Parser subclass).\r\n   * The parsers can be retrieved later by matching against specs (see {@link ParsrerList#find}).\r\n   *\r\n   * @param {!Array<function(new:Parser)>=} someParsers A list of {@link Parser} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see ParserList#register\r\n   */\r\n  constructor(someParsers = []) {\r\n    super(someParsers, ['formats', 'extensions']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable parser for data.\r\n   *\r\n   * @param {Object} specs Parser specifications.\r\n   * @param {string=} specs.format Supported data format.\r\n   * @param {string=} specs.ext Supported filename extension.\r\n   * @param {*=} specs.data Data to parse.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.format) {\r\n      list = this._dict.formats[specs.format.toLowerCase()] || [];\r\n    } else if (specs.ext) {\r\n      list = this._dict.extensions[specs.ext.toLowerCase()] || [];\r\n    }\r\n    // autodetect only if no format is forced\r\n    if (list.length === 0 && !specs.format && specs.data) {\r\n      return this._list.filter((SomeParser) => SomeParser.canProbablyParse && SomeParser.canProbablyParse(specs.data));\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default ParserList;\r\n","import makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Parser {\r\n  constructor(data, options) {\r\n    this._data = data;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n  }\r\n\r\n  parseSync() {\r\n    throw new Error('Parsing this type of data is not implemented');\r\n  }\r\n\r\n  parse() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (this._abort) {\r\n            return reject(new Error('Parsing aborted'));\r\n          }\r\n          return resolve(this.parseSync());\r\n        } catch (error) {\r\n          return reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // only for volume Parsers\r\n  getModel() {\r\n    this.model._parseHeader(this._data);\r\n    return this.model;\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Parser.prototype);\r\n","import * as THREE from 'three';\r\n\r\n/**\r\n * Parser helper for PDB tag \"REMARK 290\".\r\n *\r\n * @exports Remark290\r\n * @constructor\r\n */\r\nclass Remark290 {\r\n  constructor() {\r\n    /** @type {THREE.Matrix4[]} */\r\n    this.matrices = [];\r\n\r\n    /** @type {?THREE.Matrix4} */\r\n    this._matrix = null;\r\n    /** @type {number} */\r\n    this._matrixIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Parse a single line of a stream.\r\n   * @param {PDBStream} stream - stream to parse\r\n   */\r\n\r\n  parse(stream) {\r\n    /** @type {?THREE.Matrix4} */\r\n    let matrix = this._matrix;\r\n\r\n    if (stream.readString(12, 18) === '  SMTRY') {\r\n      const matrixRow = stream.readCharCode(19) - 49; // convert '1', '2', or '3' -> 0, 1, or 2\r\n      const matrixData = stream.readString(20, 80).trim().split(/\\s+/);\r\n      const matrixIndex = parseInt(matrixData[0], 10);\r\n      if (this._matrix === null || matrixIndex !== this._matrixIndex) {\r\n        // TODO: assert(matrixIndex === this.matrices.length + 1);\r\n        this._matrixIndex = matrixIndex;\r\n        this._matrix = matrix = new THREE.Matrix4();\r\n        this.matrices[this.matrices.length] = matrix;\r\n      }\r\n\r\n      const { elements } = matrix;\r\n      elements[matrixRow] = parseFloat(matrixData[1]);\r\n      elements[matrixRow + 4] = parseFloat(matrixData[2]);\r\n      elements[matrixRow + 8] = parseFloat(matrixData[3]);\r\n      elements[matrixRow + 12] = parseFloat(matrixData[4]);\r\n    }\r\n  }\r\n}\r\n\r\nRemark290.prototype.id = 290;\r\n\r\nexport default Remark290;\r\n","import * as THREE from 'three';\r\nimport chem from '../../../chem';\r\n\r\nconst { Assembly } = chem;\r\n\r\n/**\r\n * Parser helper for PDB tag \"REMARK 350\".\r\n *\r\n * @exports Remark350\r\n * @constructor\r\n */\r\nclass Remark350 {\r\n  constructor(complex) {\r\n    /** @type {Complex} */\r\n    this._complex = complex;\r\n    /** @type {Assembly[]} */\r\n    this.assemblies = [];\r\n\r\n    /** @type {?Assembly} */\r\n    this._assembly = null;\r\n    /** @type {?THREE.Matrix4} */\r\n    this._matrix = null;\r\n    /** @type {number} */\r\n    this._matrixIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Parse a single line of a stream.\r\n   * @param {PDBStream} stream - stream to parse\r\n   */\r\n\r\n  parse(stream) {\r\n    /** @type {?Assembly} */\r\n    let assembly = this._assembly;\r\n    /** @type {?THREE.Matrix4} */\r\n    let matrix = this._matrix;\r\n\r\n    if (assembly && stream.readString(12, 18) === '  BIOMT') {\r\n      const matrixRow = stream.readCharCode(19) - 49; // convert '1', '2', or '3' -> 0, 1, or 2\r\n      const matrixData = stream.readString(20, 80).trim().split(/\\s+/);\r\n      const matrixIndex = parseInt(matrixData[0], 10);\r\n      if (this._matrix === null || matrixIndex !== this._matrixIndex) {\r\n        // TODO: assert(matrixIndex === assembly.matrices.length + 1);\r\n        this._matrixIndex = matrixIndex;\r\n        this._matrix = matrix = new THREE.Matrix4();\r\n        assembly.addMatrix(matrix);\r\n      }\r\n\r\n      const { elements } = matrix;\r\n      elements[matrixRow] = parseFloat(matrixData[1]);\r\n      elements[matrixRow + 4] = parseFloat(matrixData[2]);\r\n      elements[matrixRow + 8] = parseFloat(matrixData[3]);\r\n      elements[matrixRow + 12] = parseFloat(matrixData[4]);\r\n    } else if (assembly && stream.readString(35, 41) === 'CHAINS:') {\r\n      const entries = stream.readString(42, 80).split(',');\r\n      for (let i = 0, n = entries.length; i < n; ++i) {\r\n        const chain = entries[i].trim();\r\n        if (chain.length > 0) {\r\n          assembly.addChain(chain);\r\n        }\r\n      }\r\n    } else if (stream.readString(12, 23) === 'BIOMOLECULE:') {\r\n      // assert molIndex === this.assemblies.length + 1\r\n      this._matrix = null;\r\n      this._matrixIndex = -1;\r\n      this._assembly = assembly = new Assembly(this._complex);\r\n      this.assemblies.push(assembly);\r\n    }\r\n  }\r\n}\r\n\r\nRemark350.prototype.id = 350;\r\n\r\nexport default Remark350;\r\n","/** Helper class for stream-like reading input files. */\r\nclass PDBStream {\r\n  /**\r\n   * Create a stream\r\n   * @param {String} data Input data\r\n   */\r\n  constructor(data) {\r\n    /** @type String */\r\n    this._data = data; // Input file\r\n    /** @type Number */\r\n    this._start = 0; // Starting position of line\r\n    /** @type Number */\r\n    this._nextCR = -1; // Position of next CR (0x0D)\r\n    /** @type Number */\r\n    this._nextLF = -1; // Position of next LF (0x0A)\r\n    /** @type Number */\r\n    this._next = -1; // End position of line\r\n    /** @type Number */\r\n    this._end = data.length; // End of data\r\n\r\n    this.next();\r\n  }\r\n\r\n  /**\r\n   * Reading next line.\r\n   * @returns {String} Next line in data (ending with LF or CR)\r\n   */\r\n  readLine() {\r\n    return this._data.slice(this._start, this._next);\r\n  }\r\n\r\n  /**\r\n   * Reading character from position.\r\n   * @param {Number} pos - Position in current line.\r\n   * @returns {String} Character from position\r\n   */\r\n  readChar(pos) {\r\n    pos = this._start + pos - 1;\r\n    return pos < this._next ? this._data[pos] : ' ';\r\n  }\r\n\r\n  /**\r\n   * Reading character code from position.\r\n   * @param {Number} pos - Position in current line.\r\n   * @returns {Number} Character code from position\r\n   */\r\n  readCharCode(pos) {\r\n    pos = this._start + pos - 1;\r\n    return pos < this._next ? this._data.charCodeAt(pos) : 32;\r\n  }\r\n\r\n  /**\r\n   * Reading string from begin to end points.\r\n   * For a reason unknown, numbering assumed not to start from 0, but from 1.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {String} String from begin to end\r\n   */\r\n  readString(begin, end) {\r\n    const from = this._start + begin - 1;\r\n    const to = this._start + end;\r\n    return this._data.slice(from, to < this._next ? to : this._next);\r\n  }\r\n\r\n  /**\r\n   * Reading integer from begin to end points.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {Number} Integer from begin to end\r\n   */\r\n  readInt(begin, end) {\r\n    return parseInt(this.readString(begin, end), 10);\r\n  }\r\n\r\n  /**\r\n   * Reading float from begin to end points.\r\n   * @param {Number} begin - Begin point in current line.\r\n   * @param {Number} end - End point in current line.\r\n   * @returns {Number} Float from begin to end\r\n   */\r\n  readFloat(begin, end) {\r\n    return parseFloat(this.readString(begin, end));\r\n  }\r\n\r\n  /**\r\n   * Checking for end of data.\r\n   * @returns {boolean} True if data is ended, false otherwise\r\n   */\r\n  end() {\r\n    return this._start >= this._end;\r\n  }\r\n\r\n  /**\r\n   * Procedure to re-arrange current pointers in data.\r\n   */\r\n  next() {\r\n    const start = this._next + 1;\r\n    this._start = start < this._end ? start : this._end;\r\n\r\n    // support CR, LF, CR+LF line endings\r\n    // do not support LF+CR, CR+CR+LF, and other strange combinations\r\n\r\n    if (this._start > this._nextCR) {\r\n      this._nextCR = (this._data.indexOf('\\r', this._start) + 1 || this._end + 1) - 1;\r\n    }\r\n    if (this._start > this._nextLF) {\r\n      this._nextLF = (this._data.indexOf('\\n', this._start) + 1 || this._end + 1) - 1;\r\n    }\r\n    this._next = this._nextCR + 1 < this._nextLF ? this._nextCR : this._nextLF;\r\n  }\r\n}\r\n\r\nexport default PDBStream;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport Remark290 from './pdb/Remark290';\r\nimport Remark350 from './pdb/Remark350';\r\nimport PDBStream from './PDBStream';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst TAG_LENGTH = 6;\r\n\r\nfunction nameToElement(name) {\r\n  // http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\r\n  //\r\n  // http://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note1\r\n  //\r\n  // Atom names start with element symbols right-justified in columns 13-14\r\n  // as permitted by the length of the name. For example, the symbol FE for\r\n  // iron appears in columns 13-14, whereas the symbol C for carbon appears\r\n  // in column 14 (see Misaligned Atom Names). If an atom name has four\r\n  // characters, however, it must start in column 13 even if the element\r\n  // symbol is a single character (for example, see Hydrogen Atoms).\r\n\r\n  const veryLong = name.trim().length === 4;\r\n  return name.slice(0, veryLong ? 1 : 2).trim();\r\n}\r\n\r\n// the most frequently used beginnings; although HEADER is mandatory, it is often missing in handmade files\r\nconst pdbStartRegexp = /^(HEADER\\s|COMPND\\s|REMARK\\s|ATOM {2}|HETATM|MODEL )/i;\r\n\r\nconst remarkParsers = {\r\n  // NOTE: please forget the idea to build the method name in runtime, it can be obfuscated.\r\n  290: Remark290,\r\n  350: Remark350,\r\n};\r\n\r\nclass PDBParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._sheet = null;\r\n    this._serialAtomMap = null;\r\n    this._modelId = 1;\r\n    this._compaundFound = false;\r\n    this._biomoleculeFound = false;\r\n    this._allowedChainsIDs = null;\r\n    this._lastMolId = -1;\r\n\r\n    this._remarks = {};\r\n    this._remark = null;\r\n\r\n    this._molecules = [];\r\n    this._molecule = null;\r\n    this._compndCurrToken = '';\r\n\r\n    this._options.fileType = 'pdb';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && pdbStartRegexp.test(data);\r\n  }\r\n\r\n  _finalize() {\r\n    this._fixBondsArray();\r\n    this._fixChains();\r\n\r\n    // keep crystallographic symmetry transformations\r\n    const remark290 = this._remarks[290];\r\n    this._complex.symmetry = _.isUndefined(remark290) ? [] : remark290.matrices;\r\n\r\n    // add loaded biological assemblies\r\n    const remark350 = this._remarks[350];\r\n    this._complex.units = this._complex.units.concat(_.isUndefined(remark350) ? [] : remark350.assemblies);\r\n\r\n    // add loaded macromolecules\r\n    this._finalizeMolecules();\r\n\r\n    // create secondary structure etc.\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // get chains from complex\r\n    const chainDict = {};\r\n    let i;\r\n    const chains = this._complex._chains;\r\n    for (i = 0; i < chains.length; ++i) {\r\n      const chainObj = chains[i];\r\n      const chainName = chainObj._name;\r\n      chainDict[chainName] = chainObj;\r\n    }\r\n\r\n    // aggregate residues from chains\r\n    for (i = 0; i < this._molecules.length; i++) {\r\n      const m = this._molecules[i];\r\n      let residues = [];\r\n      for (let j = 0; j < m._chains.length; j++) {\r\n        const name = m._chains[j];\r\n        const chain = chainDict[name];\r\n        residues = residues.concat(chain._residues.slice());\r\n      }\r\n      const molecule = new Molecule(this._complex, m._name, i + 1);\r\n      molecule.residues = residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  _fixChains() {\r\n    const idChainMap = {};\r\n    const complex = this._complex;\r\n\r\n    // prepare\r\n    for (let i = 0; i < complex._chains.length; i++) {\r\n      const chain = complex._chains[i];\r\n      idChainMap[chain._name.charCodeAt(0)] = chain;\r\n    }\r\n  }\r\n\r\n  // FIXME: This function is redundant, CONECT records always follow ATOM and HETATM. Build the map online.\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const complex = this._complex;\r\n\r\n    const atoms = complex._atoms;\r\n    for (let i = 0, ni = atoms.length; i < ni; ++i) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    const { logger } = this;\r\n    for (let j = 0, nj = bonds.length; j < nj; ++j) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        logger.debug('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _parseATOM(stream) {\r\n    if (this._modelId !== 1) {\r\n      return;\r\n    }\r\n\r\n    /* eslint-disable no-magic-numbers */\r\n    const het = stream.readCharCode(1) === 0x48;\r\n\r\n    // field names according to wwPDB Format\r\n    // NOTE: Chimera allows (nonstandard) use of columns 6-11 for the integer atom serial number in ATOM records.\r\n    const serial = het ? stream.readInt(7, 11) : stream.readInt(6, 11);\r\n    let name = stream.readString(13, 16);\r\n    const altLoc = stream.readChar(17);\r\n    const resName = stream.readString(18, 20).trim();\r\n    const chainID = stream.readChar(22);\r\n    const resSeq = stream.readInt(23, 26);\r\n    const iCode = stream.readChar(27);\r\n    const x = stream.readFloat(31, 38);\r\n    const y = stream.readFloat(39, 46);\r\n    const z = stream.readFloat(47, 54);\r\n    const occupancy = stream.readFloat(55, 60);\r\n    const tempFactor = stream.readFloat(61, 66);\r\n    const element = stream.readString(77, 78).trim() || nameToElement(name);\r\n    const charge = stream.readInt(79, 80) || 0;\r\n    /* eslint-enable no-magic-numbers */\r\n    // skip waters (there may be lots of them)\r\n    if (this.settings.now.nowater) {\r\n      if (resName === 'HOH' || resName === 'WAT') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    // PDB uses positional system for atom names. It helps derive element type from the name\r\n    // but names may include extra spaces. From this point on we don't need those spaces anymore.\r\n    name = name.trim();\r\n\r\n    const type = Element.getByName(element);\r\n    const role = Element.Role[name]; // FIXME: Maybe should use type as additional index (\" CA \" vs. \"CA  \")\r\n\r\n    // NOTE: Residues of a particular chain are not required to be listed next to each other.\r\n    // https://github.com/biasmv/pv/commit/7319b898b7473ba380c26699e3b028b2b1a7e1a1\r\n    let chain = this._chain;\r\n    if (!chain || chain.getName() !== chainID) {\r\n      this._chain = chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n      this._residue = null;\r\n    }\r\n\r\n    let residue = this._residue;\r\n    if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n      this._residue = residue = chain.addResidue(resName, resSeq, iCode);\r\n    }\r\n\r\n    const xyz = new THREE.Vector3(x, y, z);\r\n    residue.addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n  }\r\n\r\n  _parseENDMDL() {\r\n    this._modelId += 1;\r\n  }\r\n\r\n  _parseCONECT(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const serial0 = stream.readInt(7, 11);\r\n    const serial1 = stream.readInt(12, 16);\r\n    const serial2 = stream.readInt(17, 21);\r\n    const serial3 = stream.readInt(22, 26);\r\n    const serial4 = stream.readInt(27, 31);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    const complex = this._complex;\r\n\r\n    // Keep bonds ordered by atom serial\r\n    if (serial1 && serial1 > serial0) {\r\n      complex.addBond(serial0, serial1, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial2 && serial2 > serial0) {\r\n      complex.addBond(serial0, serial2, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial3 && serial3 > serial0) {\r\n      complex.addBond(serial0, serial3, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n    if (serial4 && serial4 > serial0) {\r\n      complex.addBond(serial0, serial4, 0, Bond.BondType.UNKNOWN, true);\r\n    }\r\n  }\r\n\r\n  _parseCOMPND(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const str = stream.readString(11, 80);\r\n    const tokenIdx = str.indexOf(':');\r\n    this._compndCurrToken = tokenIdx > 0 ? str.substring(0, tokenIdx).trim() : this._compndCurrToken;\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // start reading new molecule\r\n    if (this._compndCurrToken === 'MOL_ID') {\r\n      this._molecule = { _index: '', _chains: [] };\r\n      this._molecule._index = parseInt(str.substring(tokenIdx + 1, str.indexOf(';')), 10);\r\n      this._molecules.push(this._molecule);\r\n      // parse molecule name\r\n    } else if (this._compndCurrToken === 'MOLECULE' && this._molecule != null) {\r\n      this._molecule._name = str.substring(tokenIdx + 1, str.indexOf(';')).trim();\r\n      // parse molecule chains\r\n    } else if (this._compndCurrToken === 'CHAIN' && this._molecule != null) {\r\n      let chainStr = str.substring(tokenIdx + 1, 80).trim();\r\n      const lastChar = chainStr[chainStr.length - 1];\r\n      if (lastChar === ';' || lastChar === ',') {\r\n        chainStr = chainStr.slice(0, -1);\r\n      }\r\n      chainStr = chainStr.replace(/\\s+/g, '');\r\n      const chains = chainStr.split(',');\r\n      this._molecule._chains = this._molecule._chains.concat(chains);\r\n    }\r\n  }\r\n\r\n  _parseREMARK(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const remarkNum = stream.readInt(8, 10);\r\n    /* eslint-enable no-magic-numbers */\r\n\r\n    // create remark parser if needed\r\n    let remark = this._remarks[remarkNum];\r\n    if (_.isUndefined(remark)) {\r\n      const RemarkParser = remarkParsers[remarkNum];\r\n      if (_.isFunction(RemarkParser)) {\r\n        this._remarks[remarkNum] = remark = new RemarkParser(this._complex);\r\n      }\r\n    }\r\n\r\n    // delegate parsing\r\n    if (!_.isUndefined(remark)) {\r\n      remark.parse(stream);\r\n    }\r\n  }\r\n\r\n  _parseHELIX(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const fields = [20, 22, 32, 34];\r\n    /* eslint-enable no-magic-numbers */\r\n    this._parseSTRUCTURE(stream, fields, (obj) => {\r\n      this._complex.addHelix(obj);\r\n      this._complex.structures.push(obj);\r\n    });\r\n  }\r\n\r\n  _parseSHEET(stream) {\r\n    /* eslint-disable no-magic-numbers */\r\n    const fields = [22, 23, 33, 34];\r\n    /* eslint-enable no-magic-numbers */\r\n    this._parseSTRUCTURE(stream, fields, (obj) => {\r\n      this._complex.addSheet(obj);\r\n    });\r\n  }\r\n\r\n  _parseSTRUCTURE(stream, pars, adder) {\r\n    const startId = 0;\r\n    const startIndex = 1;\r\n    const endId = 2;\r\n    const endIndex = 3;\r\n\r\n    // identify fields: debugging and stuff\r\n    /* eslint-disable no-magic-numbers */\r\n    const codeOfS = 0x53;\r\n    const serialNumber = stream.readInt(8, 10);\r\n    const structureName = stream.readString(12, 14).trim(); // FIXME: LString(3) forbids trim()\r\n    const comment = stream.readString(41, 70).trim();\r\n    const helLength = stream.readInt(72, 76);\r\n    const helixClass = stream.readInt(39, 40);\r\n    const shWidth = stream.readInt(15, 16);\r\n    const shCur = stream.readInt(42, 45);\r\n    const shPrev = stream.readInt(57, 60);\r\n    /* eslint-enable no-magic-numbers */\r\n    // file fields\r\n    const startChainID = stream.readString(pars[startId], pars[endId] + 1).charCodeAt(0);\r\n    const endChainID = stream.readString(pars[endId], pars[endId] + 1).charCodeAt(0);\r\n    const startSequenceNumber = stream.readInt(pars[startIndex], pars[startIndex] + 3);\r\n    let iCodeStr = stream.readString(pars[startIndex] + 4, pars[startIndex] + 4);\r\n    let startICode = 0;\r\n\r\n    if (iCodeStr.length > 0) {\r\n      startICode = iCodeStr.charCodeAt(0);\r\n    }\r\n    const endSequenceNumber = stream.readInt(pars[endIndex], pars[endIndex] + 3);\r\n    iCodeStr = stream.readString(pars[endIndex] + 4, pars[endIndex] + 4);\r\n    let endICode = 0;\r\n    if (iCodeStr.length > 0) {\r\n      endICode = iCodeStr.charCodeAt(0);\r\n    }\r\n\r\n    let obj;\r\n    let cs = this._sheet;\r\n    if (stream.readCharCode(1) === codeOfS) {\r\n      if (cs !== null && cs.getName() !== structureName) {\r\n        cs = null;\r\n        this._sheet = null;\r\n      }\r\n      if (cs === null) {\r\n        this._sheet = obj = new Sheet(structureName, shWidth);\r\n        adder(obj);\r\n      } else {\r\n        obj = cs;\r\n      }\r\n      const strand = new Strand(\r\n        obj,\r\n        this._complex.getUnifiedSerial(startChainID, startSequenceNumber, startICode),\r\n        this._complex.getUnifiedSerial(endChainID, endSequenceNumber, endICode),\r\n        helixClass,\r\n        shCur,\r\n        shPrev,\r\n      );\r\n      obj.addStrand(strand);\r\n      this._complex.structures.push(strand);\r\n    } else {\r\n      obj = new Helix(\r\n        helixClass,\r\n        this._complex.getUnifiedSerial(startChainID, startSequenceNumber, startICode),\r\n        this._complex.getUnifiedSerial(endChainID, endSequenceNumber, endICode),\r\n        serialNumber,\r\n        structureName,\r\n        comment,\r\n        helLength,\r\n      );\r\n      adder(obj);\r\n    }\r\n  }\r\n\r\n  _parseHEADER(stream) {\r\n    const { metadata } = this._complex;\r\n    metadata.classification = stream.readString(11, 50).trim();\r\n    metadata.date = stream.readString(51, 59).trim();\r\n\r\n    const id = stream.readString(63, 66).trim();\r\n    metadata.id = id;\r\n    if (id) {\r\n      this._complex.name = id;\r\n    }\r\n    metadata.format = 'pdb';\r\n  }\r\n\r\n  _parseTITLE(stream) {\r\n    const { metadata } = this._complex;\r\n    metadata.title = metadata.title || [];\r\n\r\n    const line = stream.readInt(9, 10) || 1;\r\n    metadata.title[line - 1] = stream.readString(11, 80).trim();\r\n  }\r\n\r\n  static tagParsers = {\r\n    HEADER: PDBParser.prototype._parseHEADER,\r\n    'TITLE ': PDBParser.prototype._parseTITLE,\r\n    'ATOM  ': PDBParser.prototype._parseATOM,\r\n    HETATM: PDBParser.prototype._parseATOM,\r\n    ENDMDL: PDBParser.prototype._parseENDMDL,\r\n    CONECT: PDBParser.prototype._parseCONECT,\r\n    COMPND: PDBParser.prototype._parseCOMPND,\r\n    REMARK: PDBParser.prototype._parseREMARK,\r\n    // 'SOURCE': PDBParser.prototype._parseSOURCE,\r\n    'HELIX ': PDBParser.prototype._parseHELIX,\r\n    'SHEET ': PDBParser.prototype._parseSHEET,\r\n\r\n    // nonstandard extension to allow range 100,000 - 999,999\r\n    'ATOM 1': PDBParser.prototype._parseATOM,\r\n    'ATOM 2': PDBParser.prototype._parseATOM,\r\n    'ATOM 3': PDBParser.prototype._parseATOM,\r\n    'ATOM 4': PDBParser.prototype._parseATOM,\r\n    'ATOM 5': PDBParser.prototype._parseATOM,\r\n    'ATOM 6': PDBParser.prototype._parseATOM,\r\n    'ATOM 7': PDBParser.prototype._parseATOM,\r\n    'ATOM 8': PDBParser.prototype._parseATOM,\r\n    'ATOM 9': PDBParser.prototype._parseATOM,\r\n  };\r\n\r\n  parseSync() {\r\n    const stream = new PDBStream(this._data);\r\n    const result = this._complex = new Complex();\r\n\r\n    // parse PDB line by line\r\n    while (!stream.end()) {\r\n      const tag = stream.readString(1, TAG_LENGTH);\r\n      const func = PDBParser.tagParsers[tag];\r\n      if (_.isFunction(func)) {\r\n        func.call(this, stream);\r\n      }\r\n      stream.next();\r\n    }\r\n\r\n    // Resolve indices and serials to objects\r\n    this._finalize();\r\n\r\n    // cleanup\r\n    this._serialAtomMap = null;\r\n    this._sheet = null;\r\n    this._residue = null;\r\n    this._chain = null;\r\n    this._complex = null;\r\n\r\n    if (result.getAtomCount() === 0) {\r\n      throw new Error('The data does not contain valid atoms');\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nPDBParser.formats = ['pdb'];\r\nPDBParser.extensions = ['.pdb', '.ent'];\r\n\r\nexport default PDBParser;\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  SGroup,\r\n  Bond,\r\n} = chem;\r\n\r\nconst cOrderCharCodes = {\r\n  A: 0,\r\n  S: 1,\r\n  D: 2,\r\n  T: 3,\r\n};\r\n\r\nconst cmlStartRegexp = /\\s*<\\?xml\\b[^?>]*\\?>\\s*<(?:cml|molecule)\\b/i;\r\n\r\nclass CMLParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._complex = null;\r\n    this._residue = null;\r\n    this._serialAtomMap = null;\r\n    this._modelId = 1;\r\n    this._lastMolId = -1;\r\n    this._readOnlyOneMolecule = false;\r\n    this._options.fileType = 'cml';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && cmlStartRegexp.test(data);\r\n  }\r\n\r\n  _rebuidBondIndexes(atoms, bonds) {\r\n    const count = atoms.length;\r\n    for (let i = 0; i < count; i++) {\r\n      const atomId = atoms[i].id;\r\n\r\n      const countBonds = bonds.length;\r\n      for (let j = 0; j < countBonds; j++) {\r\n        const idxs = bonds[j].atomRefs2.split(' ');\r\n        if (idxs[0] === atomId) {\r\n          bonds[j].start = i;\r\n        }\r\n\r\n        if (idxs[1] === atomId) {\r\n          bonds[j].end = i;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _createSGroup(molecule, moleculeArr) {\r\n    const newGroup = new SGroup(\r\n      molecule.id,\r\n      molecule.fieldData,\r\n      new THREE.Vector3(parseFloat(molecule.x), parseFloat(molecule.y), 0),\r\n      molecule.atomRefs,\r\n      molecule,\r\n    );\r\n    if (molecule.placement === 'Relative') {\r\n      newGroup._center = new THREE.Vector3(0, 0, 0);\r\n    }\r\n    if (molecule.fieldName === 'MDLBG_FRAGMENT_CHARGE') {\r\n      newGroup._charge = parseInt(molecule.fieldData, 10) || 0;\r\n    }\r\n    if (molecule.fieldName === 'MDLBG_FRAGMENT_COEFFICIENT') {\r\n      newGroup._repeat = parseInt(molecule.fieldData, 10) || 1;\r\n    }\r\n    moleculeArr.push(newGroup);\r\n  }\r\n\r\n  _extractSGroup(molecule, moleculeArr) {\r\n    if (!Array.isArray(moleculeArr)) {\r\n      moleculeArr = [];\r\n    }\r\n\r\n    if (molecule) {\r\n      if (Array.isArray(molecule)) {\r\n        const count = molecule.length;\r\n        for (let i = 0; i < count; i++) {\r\n          if (molecule[i].molecule) {\r\n            moleculeArr = moleculeArr.concat(this._extractSGroup(molecule[i].molecule));\r\n          }\r\n          this._createSGroup(molecule[i], moleculeArr);\r\n        }\r\n      } else {\r\n        if (molecule.molecule) {\r\n          if (molecule.molecule) {\r\n            moleculeArr = moleculeArr.concat(this._extractSGroup(molecule.molecule));\r\n          }\r\n        }\r\n        this._createSGroup(molecule, moleculeArr);\r\n      }\r\n    }\r\n\r\n    return moleculeArr;\r\n  }\r\n\r\n  _extractSGroups(molecule, atoms) {\r\n    const moleculeArr = this._extractSGroup(molecule);\r\n\r\n    const count = atoms.length;\r\n    let i;\r\n    let j;\r\n\r\n    for (i = 0; i < count; i++) {\r\n      const atomId = atoms[i].id;\r\n      for (j = 0; j < moleculeArr.length; j++) {\r\n        const firstAtomRef = moleculeArr[j]._atoms.split(' ')[0];\r\n        if (firstAtomRef === atomId) {\r\n          if (!atoms[i].sgroupRef) {\r\n            atoms[i].sgroupRef = [];\r\n          }\r\n          atoms[i].sgroupRef.push(moleculeArr[j]);\r\n        }\r\n      }\r\n    }\r\n    // build sGroups centers\r\n    let atomMap = {}; // sgrpmap cache\r\n    let mapEntry = null;\r\n    const nLimon = 100000000;\r\n    const bLow = new THREE.Vector3(nLimon, nLimon, nLimon);\r\n    const bHight = new THREE.Vector3(-nLimon, -nLimon, -nLimon);\r\n\r\n    function cycleFuncInner(e) {\r\n      mapEntry = atomMap[e];\r\n      if (mapEntry) {\r\n        moleculeArr[j]._atoms.push(mapEntry.a);\r\n      }\r\n    }\r\n\r\n    function cycleFunc(e) {\r\n      mapEntry = atomMap[e];\r\n      if (mapEntry) {\r\n        bLow.set(Math.min(bLow.x, mapEntry.x), Math.min(bLow.y, mapEntry.y), Math.min(bLow.z, mapEntry.z));\r\n        bHight.set(Math.max(bHight.x, mapEntry.x), Math.max(bHight.y, mapEntry.y), Math.max(bHight.z, mapEntry.z));\r\n        cycleFuncInner(e);\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < atoms.length; i++) {\r\n      atomMap[atoms[i].id] = {};\r\n      atomMap[atoms[i].id].x = atoms[i].x2;\r\n      if (atoms[i].x3) {\r\n        atomMap[atoms[i].id].x = atoms[i].x3;\r\n      }\r\n      atomMap[atoms[i].id].x = parseFloat(atomMap[atoms[i].id].x);\r\n      atomMap[atoms[i].id].y = atoms[i].y2;\r\n      if (atoms[i].y3) {\r\n        atomMap[atoms[i].id].y = atoms[i].y3;\r\n      }\r\n      atomMap[atoms[i].id].y = parseFloat(atomMap[atoms[i].id].y);\r\n      atomMap[atoms[i].id].z = '0.0';\r\n      if (atoms[i].z3) {\r\n        atomMap[atoms[i].id].z = atoms[i].z3;\r\n      }\r\n      atomMap[atoms[i].id].z = parseFloat(atomMap[atoms[i].id].z);\r\n      atomMap[atoms[i].id].a = atoms[i];\r\n    }\r\n\r\n    let atomsRef;\r\n    for (j = 0; j < moleculeArr.length; j++) {\r\n      if (moleculeArr[j]._center !== null) {\r\n        bLow.set(nLimon, nLimon, nLimon);\r\n        bHight.set(-nLimon, -nLimon, -nLimon);\r\n        atomsRef = moleculeArr[j]._atoms.split(' ');\r\n        moleculeArr[j]._atoms = [];\r\n        atomsRef.forEach(cycleFunc);\r\n\r\n        moleculeArr[j]._center.addVectors(bLow, bHight);\r\n        moleculeArr[j]._center.multiplyScalar(0.5);\r\n      } else {\r\n        atomsRef = moleculeArr[j]._atoms.split(' ');\r\n        moleculeArr[j]._atoms = [];\r\n        atomsRef.forEach(cycleFuncInner);\r\n      }\r\n    }\r\n    atomMap = null;\r\n  }\r\n\r\n  _traverseData(dom) {\r\n    function isArray(o) {\r\n      return Object.prototype.toString.apply(o) === '[object Array]';\r\n    }\r\n\r\n    function parseNode(xmlNode, result) {\r\n      if (xmlNode.nodeName === '#text' && xmlNode.nodeValue.trim() === '') {\r\n        return;\r\n      }\r\n\r\n      const jsonNode = {};\r\n      jsonNode.xmlNode = xmlNode;\r\n      const existing = result[xmlNode.nodeName];\r\n      if (existing) {\r\n        if (!isArray(existing)) {\r\n          result[xmlNode.nodeName] = [existing, jsonNode];\r\n        } else {\r\n          result[xmlNode.nodeName].push(jsonNode);\r\n        }\r\n      } else {\r\n        result[xmlNode.nodeName] = jsonNode;\r\n      }\r\n\r\n      let length;\r\n      let i;\r\n      if (xmlNode.attributes) {\r\n        ({ length } = xmlNode.attributes);\r\n        for (i = 0; i < length; i++) {\r\n          const attribute = xmlNode.attributes[i];\r\n          jsonNode[attribute.nodeName] = attribute.nodeValue;\r\n        }\r\n      }\r\n\r\n      ({ length } = xmlNode.childNodes);\r\n      for (i = 0; i < length; i++) {\r\n        parseNode(xmlNode.childNodes[i], jsonNode);\r\n      }\r\n    }\r\n\r\n    const result = {};\r\n    if (dom.childNodes.length) {\r\n      parseNode(dom.childNodes[0], result);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  _findSuitableMolecule(data, molSet) {\r\n    for (const key in data) {\r\n      if (key === 'xmlNode') {\r\n        continue;\r\n      } else if (key === 'molecule') {\r\n        if (data.molecule) {\r\n          if (data.molecule.atomArray && data.molecule.atomArray.atom) {\r\n            molSet.push(data);\r\n          }\r\n          if (Array.isArray(data.molecule)) {\r\n            for (let i = 0; i < data.molecule.length; i++) {\r\n              if (data.molecule[i].atomArray && data.molecule[i].atomArray.atom) {\r\n                molSet.push({ molecule: data.molecule[i] });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (data[key] && data[key] !== null && typeof (data[key]) === 'object') {\r\n        this._findSuitableMolecule(data[key], molSet);\r\n      }\r\n    }\r\n  }\r\n\r\n  _selectComponents(text) {\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(text, 'application/xml');\r\n    const traversedData = this._traverseData(doc);\r\n    let rawData;\r\n    const self = this;\r\n\r\n    function prepareComponentCompound(data) {\r\n      let atoms = [];\r\n      if (data.molecule && data.molecule.atomArray && data.molecule.atomArray.atom) {\r\n        if (!Array.isArray(data.molecule.atomArray.atom)) {\r\n          atoms.push(data.molecule.atomArray.atom);\r\n        } else {\r\n          atoms = data.molecule.atomArray.atom;\r\n        }\r\n      } else if (!data.molecule) {\r\n        const ret = {};\r\n        ret.atomLabels = null;\r\n        ret.labelsCount = 1;\r\n        return ret;\r\n      }\r\n\r\n      if (data.molecule.molecule) {\r\n        self._extractSGroups(data.molecule.molecule, atoms);\r\n      }\r\n\r\n      let atom;\r\n      let count = atoms.length;\r\n      for (let i = 0; i < count; i++) {\r\n        atom = atoms[i];\r\n        atom.edges = [];\r\n      }\r\n\r\n      let localBond = [];\r\n      if (data.molecule.bondArray && data.molecule.bondArray.bond) {\r\n        if (!Array.isArray(data.molecule.bondArray.bond)) {\r\n          localBond.push(data.molecule.bondArray.bond);\r\n        } else {\r\n          localBond = data.molecule.bondArray.bond;\r\n        }\r\n      }\r\n      let bond;\r\n      count = localBond.length;\r\n      self._rebuidBondIndexes(atoms, localBond);\r\n\r\n      function addCurrBond(index) {\r\n        bond = localBond[index];\r\n        atom = atoms[bond.start];\r\n        if (!atom) {\r\n          return false;\r\n        }\r\n        atom.edges.push(bond.end);\r\n        atom = atoms[bond.end];\r\n        if (!atom) {\r\n          return false;\r\n        }\r\n        atom.edges.push(bond.start);\r\n        return true;\r\n      }\r\n\r\n      for (let i = 0; i < count; i++) {\r\n        if (!addCurrBond(i)) {\r\n          // ignore invalid bond\r\n          continue;\r\n        }\r\n        const orderAttr = bond.xmlNode.getAttribute('order');\r\n        const tc = parseInt(orderAttr, 10);\r\n        // the default bond order is unknown\r\n        localBond[i].order = 0;\r\n        localBond[i].type = Bond.BondType.UNKNOWN;\r\n        if (tc > 1) {\r\n          localBond[i].order = tc;\r\n        } else {\r\n          // another option - bond order is a string\r\n          const order = cOrderCharCodes[orderAttr];\r\n          if (order !== undefined) {\r\n            localBond[i].order = order;\r\n            if (orderAttr === 'A') {\r\n              localBond[i].type = Bond.BondType.AROMATIC;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      count = atoms.length;\r\n      for (let i = 0; i < count; i++) {\r\n        atom = atoms[i];\r\n        atom.edges.sort();\r\n      }\r\n\r\n      const labels = self._breadWidthSearch(atoms, 0); // for now\r\n\r\n      const retStruct = {};\r\n      retStruct.atoms = atoms;\r\n      retStruct.bonds = localBond;\r\n      retStruct.labels = labels.atomLabels;\r\n      retStruct.count = Math.min(1, labels.labelsCount); // for now\r\n      retStruct.curr = -1;\r\n      retStruct.originalCML = doc;\r\n\r\n      return retStruct;\r\n    }\r\n\r\n    if (traversedData.cml) {\r\n      rawData = traversedData.cml;\r\n    } else {\r\n      rawData = traversedData;\r\n    }\r\n    const retData = [];\r\n    const filteredData = [];\r\n    this._findSuitableMolecule(rawData, filteredData);\r\n    if (this._readOnlyOneMolecule && filteredData.length > 1) {\r\n      filteredData.splice(1, filteredData.length - 1);\r\n    }\r\n    filteredData.forEach((d) => {\r\n      const rd = prepareComponentCompound(d);\r\n      if (rd.atoms.length > 0) {\r\n        retData.push(rd);\r\n      }\r\n    });\r\n    return retData;\r\n  }\r\n\r\n  _packLabel(compId, molId) {\r\n    const shift = 16;\r\n    return (molId << shift) + compId;\r\n  }\r\n\r\n  _unpackLabel(l) {\r\n    const shift = 16;\r\n    const mask = (1 << shift) - 1;\r\n    return { molId: l >>> shift, compId: l & mask };\r\n  }\r\n\r\n  _breadWidthSearch(atoms, molID) {\r\n    const atomLabels = new Array(atoms.length);\r\n\r\n    let id;\r\n    for (id = 0; id < atomLabels.length; id++) {\r\n      atomLabels[id] = this._packLabel(0, molID);\r\n    }\r\n\r\n    const breadthQueue = [];\r\n    let componentID = 0;\r\n    let labeledAtoms = atoms.length;\r\n\r\n    while (labeledAtoms > 0) {\r\n      componentID++;\r\n\r\n      let startID = -1;\r\n      for (id = 0; id < atomLabels.length; id++) {\r\n        if (this._unpackLabel(atomLabels[id]).compId === 0) {\r\n          startID = id;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (startID < 0) {\r\n        break;\r\n      }\r\n\r\n      // Bread first search\r\n      breadthQueue.push(atoms[startID]);\r\n      atomLabels[startID] = this._packLabel(componentID, molID);\r\n      labeledAtoms--;\r\n\r\n      while (breadthQueue.length > 0) {\r\n        const curr = breadthQueue.shift();\r\n        if (!curr) {\r\n          continue;\r\n        }\r\n\r\n        for (let i = 0; i < curr.edges.length; i++) {\r\n          if (atomLabels[curr.edges[i]] !== componentID) {\r\n            breadthQueue.push(atoms[curr.edges[i]]);\r\n            atomLabels[curr.edges[i]] = componentID;\r\n            labeledAtoms--;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const ret = {};\r\n    ret.atomLabels = atomLabels;\r\n    ret.labelsCount = componentID;\r\n    return ret;\r\n  }\r\n\r\n  _parseBond(eAtom, mainAtom, order, type) {\r\n    if (eAtom >= 0) {\r\n      const h = [Math.min(eAtom, mainAtom), Math.max(eAtom, mainAtom)];\r\n      this._complex.addBond(h[0], h[1], order, type, true);\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const complex = this._complex;\r\n\r\n    const atoms = complex._atoms;\r\n    for (let i = 0, ni = atoms.length; i < ni; ++i) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    const { logger } = this;\r\n    for (let j = 0, nj = bonds.length; j < nj; ++j) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        logger.debug('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _parseSet(varData) {\r\n    const complex = this._complex = new Complex();\r\n    const data = varData;\r\n    const currentLabel = data.curr;\r\n    const { atoms, labels } = data;\r\n    let atom = null;\r\n    let i;\r\n    let j;\r\n    const count = atoms.length;\r\n\r\n    function addFunc(a) {\r\n      a.xmlNodeRef = atom;\r\n      if (atom.x2) {\r\n        atom.x3 = atom.x2;\r\n        delete atom.x2;\r\n      }\r\n      if (atom.y2) {\r\n        atom.y3 = atom.y2;\r\n        delete atom.y2;\r\n      }\r\n      if (!(atom.z3)) {\r\n        atom.z3 = '0.0';\r\n      }\r\n      atom.complexAtom = a;\r\n    }\r\n\r\n    let chains = {};\r\n    // parse atoms in label order\r\n    const reorder = [];\r\n    for (i = 0; i < count; i++) {\r\n      reorder.push(i);\r\n    }\r\n    reorder.sort((a, b) => labels[a] - labels[b]);\r\n    for (i = 0; i < count; i++) {\r\n      const atomCharge = 0;\r\n      const lLabel = labels[reorder[i]];\r\n      if (this._unpackLabel(lLabel).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[reorder[i]];\r\n        const atomFullNameStruct = atom.elementType;\r\n\r\n        if (atom.sgroupRef) {\r\n          const countRef = atom.sgroupRef.length;\r\n          for (let k = 0; k < countRef; ++k) {\r\n            complex._sgroups.push(atom.sgroupRef[k]);\r\n          }\r\n        }\r\n\r\n        if (atom.x3 || atom.x2) {\r\n          const currAtomComp = this._unpackLabel(lLabel).compId;\r\n          // use ' ' by default instead of synthetic creation of chain names\r\n          const chainID = ' '; //= String.fromCharCode('A'.charCodeAt(0) + currAtomComp);\r\n          const resSeq = currAtomComp;\r\n          const iCode = ' ';\r\n          let strLabel = currAtomComp.toString();\r\n          if (strLabel.length === 1) {\r\n            strLabel = `0${strLabel}`;\r\n          }\r\n          const resName = `N${strLabel}`;\r\n          let chain = chains[chainID];\r\n          if (!chain || chain.getName() !== chainID) {\r\n            chains[chainID] = chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n            this._residue = null;\r\n          }\r\n\r\n          let residue = this._residue;\r\n          if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n            this._residue = residue = chain.addResidue(resName, resSeq, iCode);\r\n          }\r\n\r\n          // _x, _y, _z, mname, mindex, atomNameFull, atomName, chainID, serial, isHet, atlLocInd, atomNameToTypeF\r\n          let xyz = null;\r\n          if (atom.x3) {\r\n            xyz = new THREE.Vector3(parseFloat(atom.x3), parseFloat(atom.y3), parseFloat(atom.z3));\r\n          } else if (atom.x2) {\r\n            xyz = new THREE.Vector3(parseFloat(atom.x2), parseFloat(atom.y2), 0);\r\n          }\r\n          let element = Element.ByName[atom.elementType.toUpperCase()];\r\n          if (!element) {\r\n            element = (JSON.parse(JSON.stringify(Element.ByName[\r\n              Object.keys(Element.ByName)[Object.keys(Element.ByName).length - 1]])));\r\n            element.number += 1;\r\n            element.name = atom.elementType.toUpperCase();\r\n            element.fullName = 'Unknown';\r\n            Element.ByName[atom.elementType.toUpperCase()] = element;\r\n          }\r\n          const atomSerial = parseInt(atom.id.replace(/[^0-9]/, ''), 10);\r\n          const added = residue.addAtom(\r\n            atomFullNameStruct,\r\n            element,\r\n            xyz,\r\n            Element.Role.SG,\r\n            true,\r\n            atomSerial,\r\n            ' ',\r\n            1.0,\r\n            0.0,\r\n            atomCharge,\r\n          );\r\n          if (atom.hydrogenCount) {\r\n            added.hydrogenCount = parseInt(atom.hydrogenCount, 10);\r\n          }\r\n          if (atom.mrvValence) {\r\n            added.valence = parseInt(atom.mrvValence, 10);\r\n          }\r\n          addFunc(added);\r\n        }\r\n      }\r\n    }\r\n    chains = null;// NOSONAR\r\n    for (i = 0; i < data.bonds.length; i++) {\r\n      const cb = data.bonds[i];\r\n      if (this._unpackLabel(labels[cb.start]).molId === this._unpackLabel(currentLabel).molId\r\n          && this._unpackLabel(labels[cb.end]).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[cb.start];\r\n        if (!atom || !(atoms[cb.end])) {\r\n          continue; // skip invalid\r\n        }\r\n        this._parseBond(\r\n          parseInt(atom.id.replace(/[^0-9]/, ''), 10),\r\n          parseInt(atoms[cb.end].id.replace(/[^0-9]/, ''), 10),\r\n          cb.order,\r\n          cb.type,\r\n        );\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < this._complex.getSGroupCount(); i++) {\r\n      const sGrp = this._complex.getSGroups()[i];\r\n      for (j = 0; j < sGrp._atoms.length; j++) {\r\n        sGrp._atoms[j] = sGrp._atoms[j].complexAtom;\r\n      }\r\n    }\r\n    for (i = 0; i < count; i++) {\r\n      if (this._unpackLabel(labels[i]).molId === this._unpackLabel(currentLabel).molId) {\r\n        atom = atoms[i];\r\n        atom.complexAtom = null;\r\n        delete atom.complexAtom;\r\n      }\r\n    }\r\n    this._complex.originalCML = data.originalCML;\r\n    this._fixBondsArray();\r\n    complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n    this._serialAtomMap = null;\r\n    this._complex = null;\r\n    return complex;\r\n  }\r\n\r\n  parseSync() {\r\n    const complexes = [];\r\n    const self = this;\r\n    const moleculaSet = this._selectComponents(this._data);\r\n    moleculaSet.forEach((molSet) => {\r\n      molSet.curr = 2;\r\n      if (molSet.count === 0) {\r\n        molSet.count = 1;\r\n      }\r\n      for (let i = 0; i < molSet.count; i++) {\r\n        molSet.curr = (i + 1);\r\n        complexes.push(self._parseSet(molSet, false));\r\n      }\r\n    });\r\n\r\n    let totalAtomsParsed = 0;\r\n    complexes.forEach((c) => {\r\n      totalAtomsParsed += c.getAtomCount();\r\n    });\r\n    if (totalAtomsParsed <= 0) {\r\n      throw new Error('The data does not contain valid atoms');\r\n    }\r\n\r\n    if (complexes.length > 1) {\r\n      const joinedComplex = new Complex();\r\n      joinedComplex.joinComplexes(complexes);\r\n      joinedComplex.originalCML = complexes[0].originalCML;\r\n      return joinedComplex;\r\n    }\r\n    if (complexes.length === 1) {\r\n      return complexes[0];\r\n    }\r\n    return new Complex();\r\n  }\r\n}\r\n\r\nCMLParser.formats = ['cml'];\r\nCMLParser.extensions = ['.cml'];\r\n\r\nexport default CMLParser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport MMTF from '../../../vendor/js/mmtf';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\n\r\nconst {\r\n  Complex,\r\n  Chain,\r\n  Atom,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Bond,\r\n  Assembly,\r\n  Molecule,\r\n} = chem;\r\n\r\nclass ArrayComparator {\r\n  constructor(original) {\r\n    this._original = Array.from(original);\r\n    this._original.sort();\r\n\r\n    this._sum = 0;\r\n    for (let i = 0; i < this._original.length; ++i) {\r\n      this._sum += this._original[i];\r\n    }\r\n  }\r\n\r\n  compare(candidate) {\r\n    const len = candidate.length;\r\n    if (len !== this._original.length) {\r\n      return false;\r\n    }\r\n\r\n    let sum = 0;\r\n    let i;\r\n    for (i = 0; i < len; ++i) {\r\n      sum += candidate[i];\r\n    }\r\n\r\n    if (sum !== this._sum) {\r\n      return false;\r\n    }\r\n\r\n    const sorted = Array.from(candidate);\r\n    sorted.sort();\r\n\r\n    for (i = 0; i < len; ++i) {\r\n      if (sorted[i] !== this._original[i]) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nArrayComparator.prototype.constructor = ArrayComparator;\r\n\r\nconst StructuralElementType = StructuralElement.Type;\r\n\r\n// see https://github.com/rcsb/mmtf-javascript/blob/master/src/mmtf-traverse.js\r\nconst secStructToType = [\r\n  StructuralElementType.HELIX_PI, // 0\r\n  StructuralElementType.BEND, // 1\r\n  StructuralElementType.HELIX_ALPHA, // 2\r\n  StructuralElementType.STRAND, // 3\r\n  StructuralElementType.HELIX_310, // 4\r\n  StructuralElementType.BRIDGE, // 5\r\n  StructuralElementType.TURN, // 6\r\n  StructuralElementType.COIL, // 7\r\n];\r\n\r\nfunction getFirstByte(buf) {\r\n  const bytes = new Uint8Array(buf, 0, 1);\r\n  return bytes[0];\r\n}\r\n\r\nclass MMTFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'mmtf';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    // check if it's binary MessagePack format containing a map (dictionary)\r\n    // see https://github.com/msgpack/msgpack/blob/master/spec.md\r\n    return _.isArrayBuffer(data) && ((getFirstByte(data) | 1) === 0xDF);\r\n  }\r\n\r\n  _onModel(_modelData) {\r\n  }\r\n\r\n  _onChain(chainData) {\r\n    if (chainData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    const chain = new Chain(this._complex, chainData.chainName);\r\n    this._complex._chains[chainData.chainIndex] = chain;\r\n    chain._index = chainData.chainIndex;\r\n  }\r\n\r\n  _onGroup(groupData) {\r\n    if (groupData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    if (this.settings.now.nowater) {\r\n      // skip water\r\n      if (groupData.groupName === 'HOH' || groupData.groupName === 'WAT') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const chain = this._complex._chains[groupData.chainIndex];\r\n    const icode = !groupData.insCode.charCodeAt(0) ? '' : groupData.insCode;\r\n    const residue = chain.addResidue(groupData.groupName, groupData.groupId, icode);\r\n    residue._index = groupData.groupIndex;\r\n\r\n    this._updateSecStructure(this._complex, residue, groupData);\r\n  }\r\n\r\n  _onAtom(atomData) {\r\n    if (atomData.modelIndex !== 0) {\r\n      return;\r\n    }\r\n\r\n    const altLoc = !atomData.altLoc.charCodeAt(0) ? '' : atomData.altLoc;\r\n    const atom = new Atom(\r\n      atomData.groupIndex, // we store residue index here to replace it later with actual reference\r\n      atomData.atomName,\r\n      Element.getByName(atomData.element.toUpperCase()),\r\n      new THREE.Vector3(atomData.xCoord, atomData.yCoord, atomData.zCoord),\r\n      Element.Role[atomData.atomName],\r\n      false, // hetero atoms will be marked later\r\n      atomData.atomId,\r\n      altLoc,\r\n      atomData.occupancy,\r\n      atomData.bFactor,\r\n      atomData.formalCharge,\r\n    );\r\n\r\n    this._complex._atoms[atomData.atomIndex] = atom;\r\n    atom.index = atomData.atomIndex;\r\n\r\n    this._serialAtomMap[atomData.atomId] = atom;\r\n  }\r\n\r\n  _onBond(bondData) {\r\n    const right = Math.max(bondData.atomIndex1, bondData.atomIndex2);\r\n    if (right >= this._complex._atoms.length) {\r\n      return;\r\n    }\r\n    const left = Math.min(bondData.atomIndex1, bondData.atomIndex2);\r\n    this._complex.addBond(\r\n      this._complex._atoms[left],\r\n      this._complex._atoms[right],\r\n      bondData.bondOrder,\r\n      Bond.BondType.UNKNOWN,\r\n      true,\r\n    );\r\n  }\r\n\r\n  _updateSecStructure(complex, residue, groupData) {\r\n    const helixClasses = [3, -1, 1, -1, 5];\r\n\r\n    if (!_.isUndefined(groupData) && groupData.secStruct === this._ssType) {\r\n      residue._secondary = this._ssStruct;\r\n      if (this._ssStruct) {\r\n        this._ssStruct.term = residue;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (!_.isUndefined(groupData)) {\r\n      // start new secondary structure\r\n      const type = secStructToType[groupData.secStruct];\r\n      this._ssType = groupData.secStruct;\r\n      this._ssStart = residue;\r\n\r\n      let struct = null;\r\n      switch (this._ssType) {\r\n        case -1: // undefined\r\n        case 7: // coil\r\n          break;\r\n        case 0: // pi helix\r\n        case 2: // alpha helix\r\n        case 4: // 3-10 helix\r\n          struct = new Helix(helixClasses[this._ssType], residue, residue, 0, '', '', 0);\r\n          complex._helices.push(struct);\r\n          break;\r\n        case 3: { // extended\r\n          const sheet = new Sheet('', 0);\r\n          complex._sheets.push(sheet);\r\n          struct = new Strand(sheet, residue, residue, 0, null, null);\r\n          break;\r\n        }\r\n        default:\r\n          if (type !== undefined) {\r\n            struct = new StructuralElement(type, residue, residue);\r\n          }\r\n          break;\r\n      }\r\n\r\n      this._ssStruct = struct;\r\n      residue._secondary = struct;\r\n      if (struct) {\r\n        complex.structures.push(struct);\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateMolecules(mmtfData) {\r\n    const entities = mmtfData.entityList;\r\n    if (!entities) {\r\n      return;\r\n    }\r\n\r\n    const chainsInModel0 = mmtfData.chainsPerModel[0];\r\n    for (let i = 0; i < entities.length; i++) {\r\n      const entity = entities[i];\r\n      const chains = entity.chainIndexList;\r\n      let residues = [];\r\n      for (let j = 0; j < chains.length; j++) {\r\n        const chainIndex = chains[j];\r\n        // skip chains in models other than the first one\r\n        if (chainIndex >= chainsInModel0) {\r\n          continue;\r\n        }\r\n        const chain = this._complex._chains[chainIndex];\r\n        residues = residues.concat(chain._residues.slice());\r\n      }\r\n      const molecule = new Molecule(this._complex, entity.description, i + 1);\r\n      molecule.residues = residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  // populate complex with chains, residues and atoms\r\n  _traverse(mmtfData) {\r\n    const self = this;\r\n\r\n    // get metadata\r\n    const { metadata } = this._complex;\r\n    metadata.id = mmtfData.structureId;\r\n    metadata.title = [];\r\n    metadata.title[0] = mmtfData.title;\r\n    metadata.date = mmtfData.releaseDate;\r\n    metadata.format = 'mmtf';\r\n\r\n    // create event callback functions\r\n    const eventCallbacks = {\r\n      onModel(modelData) {\r\n        self._onModel(modelData);\r\n      },\r\n      onChain(chainData) {\r\n        self._onChain(chainData);\r\n      },\r\n      onGroup(groupData) {\r\n        self._onGroup(groupData);\r\n      },\r\n      onAtom(atomData) {\r\n        self._onAtom(atomData);\r\n      },\r\n      onBond(bondData) {\r\n        self._onBond(bondData);\r\n      },\r\n    };\r\n\r\n    // temporary variables used during traversal to track secondary structures\r\n    this._ssType = -1;\r\n    this._ssStruct = null;\r\n    this._ssStart = null;\r\n\r\n    // traverse the structure and listen to the events\r\n    MMTF.traverse(mmtfData, eventCallbacks);\r\n\r\n    this._updateSecStructure(this._complex);\r\n    this._updateMolecules(mmtfData);\r\n  }\r\n\r\n  // During traversal atoms and residues don't come sequentially\r\n  // so a residue for certain atom can be unavailable. Thus we\r\n  // store residue index in atom.\r\n  // This function being called after traversal replaces the index\r\n  // with actual reference, and also populates atom lists in residues.\r\n  _linkAtomsToResidues() {\r\n    for (let i = 0; i < this._complex._atoms.length; ++i) {\r\n      const atom = this._complex._atoms[i];\r\n      const residue = this._complex._residues[atom.residue];\r\n      atom.residue = residue;\r\n      residue._atoms.push(atom);\r\n    }\r\n  }\r\n\r\n  _findSynonymousChains() {\r\n    const named = {};\r\n    for (let i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i];\r\n      const name = chain.getName();\r\n      if (!named.hasOwnProperty(name)) {\r\n        named[name] = [];\r\n      }\r\n\r\n      named[name].push(chain._index);\r\n    }\r\n\r\n    return named;\r\n  }\r\n\r\n  // NOTE: This function relies on original chain indices, so it must be called before any magic happens to chains.\r\n  _parseAssemblyInfo(mmtfData) {\r\n    let i;\r\n    let j;\r\n    let k;\r\n    const assemblies = [];\r\n    const { logger } = this;\r\n\r\n    for (i = 0; i < mmtfData.bioAssemblyList.length; ++i) {\r\n      const baInfo = mmtfData.bioAssemblyList[i];\r\n      if (baInfo.transformList.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      const chains = baInfo.transformList[0].chainIndexList;\r\n      const chainListCheck = new ArrayComparator(chains);\r\n\r\n      // build list of chain names\r\n      const chainNames = {};\r\n      for (j = 0; j < chains.length; ++j) {\r\n        chainNames[this._complex._chains[chains[j]].getName()] = 1;\r\n      }\r\n\r\n      // all chains with the same name should belong to assembly if one of them belongs\r\n      const allChains = [];\r\n      let name;\r\n      for (name in chainNames) {\r\n        if (chainNames.hasOwnProperty(name)) {\r\n          // just concat arrays -- there should be no duplicates\r\n          Array.prototype.push.apply(allChains, this._chainsByName[name]);\r\n        }\r\n      }\r\n      if (!chainListCheck.compare(allChains)) {\r\n        // assembly is missing some of the chains\r\n        logger.debug('MMTF: Assembly is missing some of the synonymous chains. Skipping...');\r\n      }\r\n\r\n      const a = new Assembly(this._complex);\r\n\r\n      // add chains to assembly\r\n      for (name in chainNames) {\r\n        if (chainNames.hasOwnProperty(name)) {\r\n          a.addChain(name);\r\n        }\r\n      }\r\n\r\n      // add unique matrices to assembly\r\n      a.addMatrix(new THREE.Matrix4().fromArray(baInfo.transformList[0].matrix).transpose());\r\n      for (j = 1; j < baInfo.transformList.length; ++j) {\r\n        const transform = baInfo.transformList[j];\r\n\r\n        if (!chainListCheck.compare(transform.chainIndexList)) {\r\n          // list of chains for this transform doesn't match that for other transforms\r\n          // this is illegal in our structure\r\n          logger.debug('MMTF: Chain lists differ for different transforms in one assembly. Skipping...');\r\n          continue;\r\n        }\r\n\r\n        const m = new THREE.Matrix4().fromArray(transform.matrix).transpose();\r\n\r\n        // check if matrix is already in the list\r\n        for (k = 0; k < a.matrices.length; ++k) {\r\n          if (a.matrices[k].equals(m)) {\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (k === a.matrices.length) {\r\n          a.addMatrix(m);\r\n        }\r\n      }\r\n\r\n      a.finalize();\r\n      assemblies.push(a);\r\n    }\r\n\r\n    return assemblies;\r\n  }\r\n\r\n  // NOTE: This function relies on original chain indices, so it must be called before any magic happens to chains.\r\n  _markHeteroAtoms(mmtfData) {\r\n    const chainsInModel0 = mmtfData.chainsPerModel[0];\r\n    for (let i = 0; i < mmtfData.entityList.length; ++i) {\r\n      const entity = mmtfData.entityList[i];\r\n      if (entity.type !== 'polymer') {\r\n        for (let j = 0; j < entity.chainIndexList.length; ++j) {\r\n          const chainIndex = entity.chainIndexList[j];\r\n          // skip chains in models other than the first one\r\n          if (chainIndex >= chainsInModel0) {\r\n            continue;\r\n          }\r\n          const chain = this._complex._chains[chainIndex];\r\n          for (let k = 0; k < chain._residues.length; ++k) {\r\n            const res = chain._residues[k];\r\n            for (let m = 0; m < res._atoms.length; ++m) {\r\n              res._atoms[m].het = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // joins chains with the same name into single chain\r\n  _joinSynonymousChains() {\r\n    let i;\r\n    let j;\r\n\r\n    const primaryChainsArray = [];\r\n    const primaryChainsHash = {};\r\n\r\n    // join chains\r\n    for (i = 0; i < this._complex._chains.length; ++i) {\r\n      const chain = this._complex._chains[i];\r\n      const name = chain.getName();\r\n      if (!primaryChainsHash.hasOwnProperty(name)) {\r\n        // new name -- this is a primary chain\r\n        primaryChainsHash[name] = chain;\r\n        chain._index = primaryChainsArray.length; // update index as this array will later replace original chain list\r\n        primaryChainsArray.push(chain);\r\n        continue;\r\n      }\r\n\r\n      // this chain should be joined with the primary chain of the same name\r\n      const primary = primaryChainsHash[name];\r\n      for (j = 0; j < chain._residues.length; ++j) {\r\n        const residue = chain._residues[j];\r\n        primary._residues.push(residue);\r\n        residue._chain = primary;\r\n      }\r\n    }\r\n\r\n    // replace chains list with one containing only primary chains\r\n    // dropping references to all chains but primary\r\n    this._complex._chains = primaryChainsArray;\r\n  }\r\n\r\n  parseSync() {\r\n    const mmtfData = MMTF.decode(this._data);\r\n\r\n    this._complex = new Complex();\r\n    this._serialAtomMap = {}; // filled during traversal\r\n\r\n    this._traverse(mmtfData);\r\n    this._linkAtomsToResidues();\r\n    this._markHeteroAtoms(mmtfData);\r\n    this._chainsByName = this._findSynonymousChains();\r\n    Array.prototype.push.apply(this._complex.units, this._parseAssemblyInfo(mmtfData));\r\n    this._joinSynonymousChains();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n\r\n    return this._complex;\r\n  }\r\n}\r\n\r\nMMTFParser.formats = ['mmtf'];\r\nMMTFParser.extensions = ['.mmtf'];\r\nMMTFParser.binary = true;\r\n\r\nexport default MMTFParser;\r\n","class ParsingError extends Error {\r\n  constructor(message, line, column) {\r\n    super(`data:${line}:${column}: ${message}`);\r\n\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(this, ParsingError);\r\n    }\r\n\r\n    this.name = 'ParsingError';\r\n    this.parseLine = line;\r\n    this.parseColumn = column;\r\n  }\r\n}\r\n\r\nexport default ParsingError;\r\n","import _ from 'lodash';\r\nimport ParsingError from './ParsingError';\r\n\r\n// Implemented and being tested against: https://www.iucr.org/resources/cif/spec/version1.1/cifsyntax\r\n\r\nfunction _isWhitespace(ch) {\r\n  return ch === 32 || ch === 10 || ch === 13 || ch === 9;\r\n}\r\n\r\nfunction _inlineIndexOf(ch0, str, idx) {\r\n  const len = str.length;\r\n  let ch = -1;\r\n  while (idx < len) {\r\n    ch = str.charCodeAt(idx);\r\n    if (ch === ch0 || ch === 10) {\r\n      break;\r\n    }\r\n    ++idx;\r\n  }\r\n  return ch === ch0 ? idx : -1;\r\n}\r\n\r\nexport default function readCIF(source) {\r\n  let i = 0;\r\n  let j = 0;\r\n  const n = source.length;\r\n  let code = NaN;\r\n  let newline = true;\r\n  let line = 1;\r\n  let column = 1;\r\n  let begin;\r\n  let state = 0; // 0 - start, 1 - block, 2 - item, 3 - loop, 4 - values, 5 - value\r\n  const result = {};\r\n  let block = {};\r\n  let keys = [];\r\n  let keysCount = 0;\r\n  let key = '';\r\n  let values = [];\r\n  let valuesCount = 0;\r\n  let value;\r\n\r\n  function _parseValue() {\r\n    let val;\r\n    if ((code === 46 || code === 63) && (i + 1 >= n || _isWhitespace(source.charCodeAt(i + 1)))) { // '.' or '?' .....\r\n      // it's a missing value\r\n      ++column;\r\n      ++i;\r\n      return undefined;\r\n    }\r\n    if (newline && code === 59) { // ';' ......................................................................\r\n      // parse multi-line string\r\n      j = i;\r\n      let lines = 0;\r\n      do {\r\n        j = _inlineIndexOf(10, source, j + 1); // '\\n'\r\n        if (j === -1) {\r\n          throw new ParsingError('Unterminated text block found', line, column);\r\n        }\r\n        ++lines;\r\n      } while ((j + 1 < n && source.charCodeAt(j + 1) !== code) || j + 1 >= n);\r\n      val = source.substring(i + 1, j).replace(/\\r/g, '');\r\n      i = j + 2;\r\n      line += lines;\r\n      column = 1;\r\n      newline = false;\r\n      return val;\r\n    }\r\n    if (code === 39 || code === 34) { // ''' or '\"' ...........................................................\r\n      // parse quoted string\r\n      j = i;\r\n      do {\r\n        j = _inlineIndexOf(code, source, j + 1);\r\n        if (j === -1) {\r\n          throw new ParsingError('Unterminated quoted string found', line, column);\r\n        }\r\n      } while (j + 1 < n && !_isWhitespace(source.charCodeAt(j + 1)));\r\n      val = source.substring(i + 1, j);\r\n      column += j - i + 1;\r\n      i = j + 1;\r\n      return val;\r\n    } // ......................................................................................................\r\n    // parse until the first whitespace\r\n    j = i;\r\n    while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n      ++j;\r\n    }\r\n    val = source.substring(i, j);\r\n    column += j - i;\r\n    i = j;\r\n    // try to convert to a number\r\n    const num = Number(val);\r\n    if (!Number.isNaN(num)) {\r\n      return num;\r\n    }\r\n    // or leave as an unquoted string\r\n    return val;\r\n  }\r\n\r\n  function _storeKey(tag) {\r\n    keys[keysCount++] = tag;\r\n  }\r\n\r\n  function _storeValue(val) {\r\n    const keyIndex = valuesCount % keysCount;\r\n    values[keyIndex].push(val);\r\n    ++valuesCount;\r\n    return val;\r\n  }\r\n\r\n  while (i <= n) {\r\n    code = source.charCodeAt(i); // 'NaN' in place of '<eof>'\r\n    if (code === 13) { // '\\r' .......................................................................................\r\n      // just ignore\r\n    } else if (code === 10) { // '\\n' ................................................................................\r\n      // take note of new lines\r\n      newline = true;\r\n      ++line;\r\n      column = 1;\r\n    } else {\r\n      // process inline characters\r\n      if (code === 32 || code === 9) { // ' ' or '\\t' ................................................................\r\n        // just ignore\r\n      } else if (code === 35) { // '#' ...............................................................................\r\n        // skip the comment until before the end of the line\r\n        i = _inlineIndexOf(10, source, i + 1); // '\\n'\r\n        if (i === -1) {\r\n          break;\r\n        } else {\r\n          continue; // don't forget to process the new line\r\n        }\r\n      } else if (state === 0) { // start =============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          j = i + 5;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // add new data block\r\n            result[source.substring(begin, i)] = block = {};\r\n            state = 1; // block\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Data block name missing', line, column);\r\n          }\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          break;\r\n        } else { // ..................................................................................................\r\n          throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n        }\r\n      } else if (state === 1) { // block =============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          state = 0; // start\r\n          continue; // parse again in a different state\r\n        } else if (code === 95) { // '_' .............................................................................\r\n          j = i + 1;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // start new item\r\n            key = source.substring(begin, i);\r\n            state = 2; // item\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Tag name missing', line, column);\r\n          }\r\n        } else if ((code === 76 || code === 108) && source.substr(i + 1, 4).toLowerCase() === 'oop_') { // 'loop_' ...\r\n          i += 5;\r\n          column += 5;\r\n          if (i < n && !_isWhitespace(source.charCodeAt(i))) {\r\n            throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n          } else {\r\n            // start new loop\r\n            keys = [];\r\n            keysCount = 0;\r\n            values = [];\r\n            valuesCount = 0;\r\n            state = 3; // loop\r\n            continue; // don't forget to process the whitespace\r\n          }\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          break;\r\n        } else { // ..................................................................................................\r\n          throw new ParsingError(`Unexpected character in state ${state}`, line, column);\r\n        }\r\n      } else if (state === 2) { // item ==============================================================================\r\n        if (Number.isNaN(code)) {\r\n          break;\r\n        }\r\n        value = _parseValue();\r\n        _.set(block, key, value);\r\n        state = 1; // block\r\n        continue;\r\n      } else if (state === 3) { // loop ==============================================================================\r\n        if (code === 95) { // '_' ....................................................................................\r\n          j = i + 1;\r\n          begin = j;\r\n          while (j < n && !_isWhitespace(source.charCodeAt(j))) {\r\n            ++j;\r\n          }\r\n          column += j - i;\r\n          i = j;\r\n          if (begin < i) {\r\n            // add new key\r\n            _storeKey(source.substring(begin, i));\r\n            continue; // don't forget to process the whitespace\r\n          } else {\r\n            throw new ParsingError('Tag name missing', line, column);\r\n          }\r\n        } else { // ..................................................................................................\r\n          if (keysCount > 0) {\r\n            for (let keyIndex = 0; keyIndex < keysCount; ++keyIndex) {\r\n              value = [];\r\n              values[keyIndex] = value;\r\n              _.set(block, keys[keyIndex], value);\r\n            }\r\n            state = 4;\r\n            continue; // parse again in a different state\r\n          }\r\n          throw new ParsingError('Data tags are missing inside a loop', line, column);\r\n        }\r\n      } else if (state === 4) { // values ============================================================================\r\n        if ((code === 68 || code === 100) && source.substr(i + 1, 4).toLowerCase() === 'ata_') { // 'data_' ..........\r\n          state = 0; // start\r\n        } else if (code === 95) { // '_' .............................................................................\r\n          state = 1; // block\r\n        } else if ((code === 76 || code === 108) && source.substr(i + 1, 4).toLowerCase() === 'oop_') { // 'loop_' ...\r\n          state = 1; // block\r\n        } else if (Number.isNaN(code)) { // <eof> ....................................................................\r\n          state = 0;\r\n        } else { // ..................................................................................................\r\n          _storeValue(_parseValue());\r\n        }\r\n        continue; // parse again in a different state\r\n      } else { // ====================================================================================================\r\n        throw new ParsingError(`Unexpected internal state ${state}`, line, column);\r\n      }\r\n\r\n      newline = false;\r\n      ++column;\r\n    }\r\n    ++i;\r\n  }\r\n\r\n  if (state === 2) { // item\r\n    throw new ParsingError(`Unexpected end of file in state ${state}`, line, column);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport StructuralElement from '../../chem/StructuralElement';\r\nimport readCIF from './readCIF';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Helix,\r\n  Sheet,\r\n  Strand,\r\n  Assembly,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst cRequiredAtomFields = [\r\n  'auth_seq_id',\r\n  'Cartn_x',\r\n  'Cartn_y',\r\n  'Cartn_z',\r\n  'label_atom_id',\r\n];\r\n\r\nconst cSecondaryCoding = {\r\n  helx: 'helix',\r\n  turn: 'turn',\r\n  strn: 'strand',\r\n};\r\n\r\nfunction getTypeFromId(string) {\r\n  const typeId = /[A-Za-z]+/.exec(string);\r\n  if (!typeId) {\r\n    return null;\r\n  }\r\n\r\n  return cSecondaryCoding[typeId[0].toLowerCase()];\r\n}\r\n\r\n/**\r\n * Make valid object an array\r\n * @param arrayLikeObject\r\n * @return {array, object} array or object\r\n */\r\nfunction arrize(arrayLikeObject) {\r\n  if (arrayLikeObject === null || arrayLikeObject === undefined || _.isArray(arrayLikeObject)) {\r\n    return arrayLikeObject;\r\n  }\r\n  return [arrayLikeObject];\r\n}\r\n\r\nfunction nameToElement(name) {\r\n  // http://www.wwpdb.org/documentation/file-format-content/format33/sect9.html#ATOM\r\n  //\r\n  // http://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note1\r\n  //\r\n  // Atom names start with element symbols right-justified in columns 13-14\r\n  // as permitted by the length of the name. For example, the symbol FE for\r\n  // iron appears in columns 13-14, whereas the symbol C for carbon appears\r\n  // in column 14 (see Misaligned Atom Names). If an atom name has four\r\n  // characters, however, it must start in column 13 even if the element\r\n  // symbol is a single character (for example, see Hydrogen Atoms).\r\n\r\n  const veryLong = name.trim().length === 4;\r\n  return name.slice(0, veryLong ? 1 : 2).trim();\r\n}\r\n\r\nclass AtomDataError extends Error {\r\n  constructor(message) {\r\n    super();\r\n    this.name = 'AtomDataError';\r\n    this.message = message;\r\n  }\r\n}\r\n\r\nfunction _getOperations(operList) {\r\n  if (!operList) {\r\n    return null;\r\n  }\r\n  const idc = arrize(operList.id);\r\n  const { matrix, vector } = operList;\r\n  if (!idc || !matrix || !vector) {\r\n    return null;\r\n  }\r\n\r\n  const ops = [];\r\n  for (let i = 0, n = idc.length; i < n; ++i) {\r\n    const mtx = new THREE.Matrix4();\r\n    const { elements } = mtx;\r\n\r\n    for (let row = 0; row < 3; ++row) {\r\n      const matrixData = matrix[row + 1];\r\n      elements[row] = arrize(matrixData[1])[i];\r\n      elements[row + 4] = arrize(matrixData[2])[i];\r\n      elements[row + 8] = arrize(matrixData[3])[i];\r\n      elements[row + 12] = arrize(vector[row + 1])[i];\r\n    }\r\n    ops[idc[i]] = mtx;\r\n  }\r\n  return ops;\r\n}\r\n\r\nfunction _extractOperations(assemblyGen, opsDict) {\r\n  assemblyGen = _.isString(assemblyGen) ? assemblyGen : `${assemblyGen}`;\r\n  const l = assemblyGen.replace(/\\)\\s*\\(/g, '!').replace(/[()']/g, '');\r\n  const groupStr = l.split('!');\r\n  const gps = [];\r\n\r\n  for (let grIdx = 0, grCount = groupStr.length; grIdx < grCount; ++grIdx) {\r\n    const gr = groupStr[grIdx].split(',');\r\n    const gp = [];\r\n    let idx = 0;\r\n    for (let i = 0, n = gr.length; i < n; ++i) {\r\n      const s = gr[i];\r\n      if (s.includes('-')) {\r\n        const es = s.split('-');\r\n        let j = parseInt(es[0], 10);\r\n        const m = parseInt(es[1], 10);\r\n        for (; j <= m; ++j) {\r\n          gp[idx++] = opsDict[j];\r\n        }\r\n      } else {\r\n        gp[idx++] = opsDict[s];\r\n      }\r\n    }\r\n    gps.push(gp);\r\n  }\r\n\r\n  // traverse all groups from the end of array and make all mults\r\n  const matrices = [];\r\n  let cnt = 0;\r\n  function traverse(level, mtx) {\r\n    for (let ii = 0, nn = gps[level].length; ii < nn; ++ii) {\r\n      const newMtx = mtx ? mtx.clone() : new THREE.Matrix4();\r\n      newMtx.multiplyMatrices(gps[level][ii], newMtx);\r\n      if (level === 0) {\r\n        matrices[cnt++] = newMtx;\r\n      } else {\r\n        traverse(level - 1, newMtx);\r\n      }\r\n    }\r\n  }\r\n  traverse(gps.length - 1);\r\n  return matrices;\r\n}\r\n\r\nclass CIFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this.asymDict = {};\r\n    this.molecules = [];\r\n    this._options.fileType = 'cif';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && /^\\s*data_/i.test(data);\r\n  }\r\n\r\n  parseSync() {\r\n    this.logger.info('Parsing CIF file..');\r\n    const data = readCIF(this._data);\r\n    return this._toComplex(data);\r\n  }\r\n\r\n  /**\r\n   * Convert intermediate structure into our valid Complex object\r\n   * @param cifData intermediate CIF object\r\n   * @returns {Complex} complex\r\n   * @private\r\n   */\r\n  _toComplex(cifData) {\r\n    const complex = new Complex();\r\n    const complexData = cifData[Object.keys(cifData)[0]];\r\n    this._extractAtoms(complex, complexData);\r\n    this._extractSecondary(complex, complexData);\r\n    this._extractAssemblies(complex, complexData);\r\n    this._extractMolecules(complex, complexData);\r\n    this._extractMetadata(complex, complexData);\r\n    complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n    });\r\n\r\n    return complex;\r\n  }\r\n\r\n  /**\r\n   * Extract metadata\r\n   * @param complex structure to fill\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n\r\n  _extractMetadata(complex, complexData) {\r\n    const { metadata } = complex;\r\n    metadata.id = complexData.entry.id;\r\n    metadata.classification = complexData.struct_keywords.pdbx_keywords;\r\n    const databaserev = complexData.database_PDB_rev;\r\n    metadata.date = (databaserev && databaserev.date_original) ? databaserev.date_original : '';\r\n    metadata.format = 'cif';\r\n    metadata.title = [];\r\n    metadata.title[0] = complexData.struct.title;\r\n  }\r\n\r\n  /**\r\n   * Extract molecules information from CIF structure (should be called strictly after _extractAtoms)\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractMolecules(complex, complexData) {\r\n    const molData = complexData.entity;\r\n    const names = arrize(molData.pdbx_description);\r\n    const count = names.length;\r\n    let i;\r\n\r\n    // molecules names from cif\r\n    for (i = 0; i < count; i++) {\r\n      if (this.molecules[i]) { // molecule was created during atoms processing\r\n        this.molecules[i].name = names[i];\r\n      } else { // molecule wasn't created, because there is no atom which is contained\r\n        this.molecules[i] = { name: names[i], residues: [] };\r\n      }\r\n    }\r\n\r\n    // reorganize molecules for complex and check chains\r\n    const molecules = complex.getMolecules();\r\n    for (i = 0; i < count; i++) {\r\n      const molecule = this.molecules[i];\r\n      molecules[i] = new Molecule(complex, molecule.name, i + 1);\r\n      molecules[i].residues = molecule.residues;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract atom information from CIF structure and fill complex\r\n   * @param {Complex} complex\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractAtoms(complex, complexData) {\r\n    const atomData = complexData.atom_site;\r\n    if (!atomData) {\r\n      throw new AtomDataError('CIF parsing error: atom_site is not specified!');\r\n    }\r\n\r\n    for (let f = 0, n = cRequiredAtomFields.length; f < n; ++f) {\r\n      if (!atomData[cRequiredAtomFields[f]]) {\r\n        throw new AtomDataError(`CIF parsing error: requires field ${cRequiredAtomFields[f]} not found!`);\r\n      }\r\n    }\r\n\r\n    const { asymDict } = this;\r\n    // required fields\r\n    const resIdc = arrize(atomData.auth_seq_id);\r\n    const x = arrize(atomData.Cartn_x);\r\n    const y = arrize(atomData.Cartn_y);\r\n    const z = arrize(atomData.Cartn_z);\r\n    const names = arrize(atomData.label_atom_id);\r\n    const count = names.length;\r\n    // optional fields\r\n    const group = arrize(atomData.group_PDB) || [];\r\n    const chainIdc = arrize(atomData.auth_asym_id) || [];\r\n    const chainLabelIdc = arrize(atomData.label_asym_id) || [];\r\n    const serials = arrize(atomData.id) || [];\r\n    const iCodes = arrize(atomData.pdbx_PDB_ins_code) || [];\r\n    const resNames = arrize(atomData.label_comp_id) || [];\r\n    const elements = arrize(atomData.type_symbol) || [];\r\n    const tempFactors = arrize(atomData.B_iso_or_equiv) || [];\r\n    const occupancies = arrize(atomData.occupancy) || [];\r\n    const charges = arrize(atomData.pdbx_formal_charge) || [];\r\n    const altLocs = arrize(atomData.label_alt_id) || [];\r\n    const models = arrize(atomData.pdbx_PDB_model_num) || [];\r\n    const molecules = arrize(atomData.label_entity_id) || [];\r\n\r\n    let chain = null;\r\n    let residue = null;\r\n    for (let i = 0; i < count; ++i) {\r\n      const model = models[i] || 1;\r\n      if (model !== 1) {\r\n        continue;\r\n      }\r\n      const chainID = String(chainIdc[i] || ' ');\r\n\r\n      if (!chain || chain.getName() !== chainID) {\r\n        chain = complex.getChain(chainID) || complex.addChain(chainID);\r\n      }\r\n      asymDict[String(chainLabelIdc[i] || ' ')] = chainID;\r\n      const resSeq = resIdc[i];\r\n      const iCode = String(iCodes[i] || ' ');\r\n      const resName = String(resNames[i] || '');\r\n      if (!residue || residue.getSequence() !== resSeq || residue.getICode() !== iCode) {\r\n        residue = chain.addResidue(resName, resSeq, iCode);\r\n\r\n        // store residue in appropriate molecule\r\n        const moleculeIdx = molecules[i] - 1;\r\n        let entity = this.molecules[moleculeIdx];\r\n        if (!entity) { // create new molecule if it hasn't been created\r\n          this.molecules[moleculeIdx] = { name: '', residues: [] };\r\n          entity = this.molecules[moleculeIdx];\r\n        }\r\n        entity.residues.push(residue);\r\n      }\r\n\r\n      const name = names[i];\r\n      const element = elements[i] || nameToElement(name);\r\n      const type = Element.getByName(element);\r\n      const role = Element.Role[name.trim()];\r\n      const xyz = new THREE.Vector3(x[i], y[i], z[i]);\r\n      const het = group[i] === 'HETATM' || false;\r\n      const serial = serials[i] || i;\r\n      const tempFactor = tempFactors[i] || 0.0;\r\n      const occupancy = occupancies[i] || 0.0;\r\n      const altLoc = String(altLocs[i] || '');\r\n      const charge = charges[i] || 0;\r\n\r\n      residue.addAtom(\r\n        name,\r\n        type,\r\n        xyz,\r\n        role,\r\n        het,\r\n        serial,\r\n        altLoc,\r\n        occupancy,\r\n        tempFactor,\r\n        charge,\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts secondary structure information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex - complex to fill\r\n   * @param complexData - CIF complex data\r\n   * @private\r\n   */\r\n  _extractSecondary(complex, complexData) {\r\n    if (complexData.struct_conf) {\r\n      this._extractConfs(complex, complexData.struct_conf);\r\n    }\r\n    if (complexData.struct_sheet_range) {\r\n      this._extractSheets(complex, complexData.struct_sheet_range);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts sheets information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex\r\n   * @param sheetData\r\n   * @private\r\n   */\r\n  _extractSheets(complex, sheetData) {\r\n    const { asymDict } = this;\r\n    if (!sheetData.sheet_id || !sheetData.id || !sheetData.beg_label_seq_id || !sheetData.end_label_seq_id\r\n      || !sheetData.beg_label_asym_id) {\r\n      return;\r\n    }\r\n    // Strand(sheet, start, end, sense, cur, prev)\r\n    const sheets = complex._sheets;\r\n\r\n    function getSheet(name) {\r\n      const n = sheets.length;\r\n      for (let i = 0; i < n; ++i) {\r\n        if (sheets[i]._name === name) {\r\n          return sheets[i];\r\n        }\r\n      }\r\n      sheets[n] = new Sheet(name, 0);\r\n      return sheets[n];\r\n    }\r\n\r\n    const sheetNames = arrize(sheetData.sheet_id);\r\n    const strandNames = arrize(sheetData.id);\r\n    const starts = arrize(sheetData.beg_auth_seq_id);\r\n    const ends = arrize(sheetData.end_auth_seq_id);\r\n    const chains = arrize(sheetData.beg_label_asym_id);\r\n    const stICodes = arrize(sheetData.pdbx_beg_PDB_ins_code) || [];\r\n    const endICodes = arrize(sheetData.pdbx_end_PDB_ins_code) || [];\r\n\r\n    for (let i = 0, n = strandNames.length; i < n; ++i) {\r\n      const chain = complex.getChain(asymDict[chains[i]]);\r\n      const sheet = getSheet(sheetNames[i]);\r\n      const startIdx = starts[i];\r\n      const endIdx = ends[i];\r\n      const startICode = stICodes[i] || ' ';\r\n      const endICode = endICodes[i] || ' ';\r\n\r\n      const start = chain.findResidue(startIdx, startICode);\r\n      const end = chain.findResidue(endIdx, endICode);\r\n\r\n      // TODO think about last condition\r\n      if (!start || !end) {\r\n        continue;\r\n      }\r\n\r\n      const strand = new Strand(sheet, start[0], end[0], 0, null, null);\r\n      const residues = chain.getResidues();\r\n      for (let r = start[1]; r <= end[1]; ++r) {\r\n        residues[r]._secondary = strand;\r\n      }\r\n      sheet.addStrand(strand);\r\n      complex.structures.push(strand);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts helix/turn/strand(?) information from CIF intermediate data\r\n   * and adds it into complex\r\n   * @param {Complex} complex\r\n   * @param helicesData\r\n   * @private\r\n   */\r\n  _extractConfs(complex, helicesData) {\r\n    const { asymDict } = this;\r\n    if (!helicesData.conf_type_id || !helicesData.beg_label_seq_id || !helicesData.end_label_seq_id\r\n      || !helicesData.beg_label_asym_id) {\r\n      return;\r\n    }\r\n\r\n    const types = arrize(helicesData.conf_type_id);\r\n    const starts = arrize(helicesData.beg_auth_seq_id);\r\n    const stICodes = arrize(helicesData.pdbx_beg_PDB_ins_code) || [];\r\n    const ends = arrize(helicesData.end_auth_seq_id);\r\n    const endICodes = arrize(helicesData.pdbx_end_PDB_ins_code) || [];\r\n    const comments = arrize(helicesData.details) || [];\r\n    const lengths = arrize(helicesData.pdbx_PDB_helix_length) || [];\r\n    const helixClasses = arrize(helicesData.pdbx_PDB_helix_class) || [];\r\n    const names = arrize(helicesData.id) || [];\r\n    const chains = arrize(helicesData.beg_label_asym_id);\r\n\r\n    for (let i = 0, n = types.length; i < n; ++i) {\r\n      const type = getTypeFromId(types[i]);\r\n      if (!type) {\r\n        continue;\r\n      }\r\n      const name = names[i] || types[i];\r\n      const chain = complex.getChain(asymDict[chains[i]]);\r\n\r\n      const startIdx = starts[i];\r\n      const endIdx = ends[i];\r\n      const startICode = stICodes[i] || ' ';\r\n      const endICode = endICodes[i] || ' ';\r\n\r\n      const start = chain.findResidue(startIdx, startICode);\r\n      const end = chain.findResidue(endIdx, endICode);\r\n\r\n      // TODO think about last condition\r\n      if (!start || !end) {\r\n        continue;\r\n      }\r\n      const comment = comments[i] || '';\r\n      const length = lengths[i] || 0;\r\n      const helixClass = helixClasses[i] || ' ';\r\n      let struct;\r\n      if (type === 'helix') {\r\n        const idx = complex._helices.length;\r\n        struct = new Helix(helixClass, start[0], end[0], idx, name, comment, length);\r\n        complex.addHelix(struct);\r\n        complex.structures.push(struct);\r\n      } else if (type === 'turn') {\r\n        struct = new StructuralElement(StructuralElement.Type.TURN, start[0], end[0]);\r\n        complex.structures.push(struct);\r\n      } else {\r\n        struct = null;\r\n      }\r\n      if (!struct) {\r\n        continue;\r\n      }\r\n      const residues = chain.getResidues();\r\n      for (let r = start[1]; r <= end[1]; ++r) {\r\n        residues[r]._secondary = struct;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extract biological assemblies information from CIF structure and fill complex\r\n   * @param {Complex} complex\r\n   * @param complexData complex data from CIF file\r\n   * @private\r\n   */\r\n  _extractAssemblies(complex, complexData) {\r\n    const { asymDict } = this;\r\n    const asmGen = complexData.pdbx_struct_assembly_gen;\r\n    if (!asmGen) {\r\n      return;\r\n    }\r\n\r\n    const asmIdx = arrize(asmGen.assembly_id);\r\n    const asmOper = arrize(asmGen.oper_expression);\r\n    const asmList = arrize(asmGen.asym_id_list);\r\n    if (!asmIdx || !asmOper || !asmList) {\r\n      return;\r\n    }\r\n\r\n    const operList = _getOperations(complexData.pdbx_struct_oper_list);\r\n    if (!operList) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0, n = asmIdx.length; i < n; ++i) {\r\n      const asm = new Assembly(complex);\r\n      const assemblyOps = _extractOperations(asmOper[i], operList);\r\n      const entries = asmList[i].split(',');\r\n      for (let ii = 0, nn = entries.length; ii < nn; ++ii) {\r\n        const chain = entries[ii].trim();\r\n        if (chain.length > 0) {\r\n          asm.addChain(asymDict[chain]);\r\n        }\r\n      }\r\n      asm.matrices = assemblyOps;\r\n      complex.units.push(asm);\r\n    }\r\n  }\r\n}\r\n\r\nCIFParser.formats = ['cif', 'mmcif'];\r\nCIFParser.extensions = ['.cif', '.mmcif'];\r\n\r\nexport default CIFParser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Volume from '../../chem/Volume';\r\n\r\nexport const valueType = {\r\n  singular: 0,\r\n  vector: 1,\r\n  array: 2,\r\n  buffer: 3,\r\n};\r\n\r\nclass VolumeModel {\r\n  _xyz2crs = [];\r\n\r\n  _origin = new THREE.Vector3(0, 0, 0);\r\n\r\n  constructor() {\r\n    this._header = {};\r\n    this._boxSize = new THREE.Vector3();\r\n    this._boxStart = new THREE.Vector3();\r\n    this._header.delta = {};\r\n    this._header.extent = [];\r\n    this._header.nstart = [];\r\n    this._header.grid = [];\r\n    this._header.crs2xyz = [];\r\n    this._header.cellDims = new THREE.Vector3();\r\n    this._header.angles = [];\r\n    this._header.origin = new THREE.Vector3(0, 0, 0);\r\n    this._header.dmin = 0;\r\n    this._header.dmean = 0;\r\n    this._header.dmax = 0;\r\n  }\r\n\r\n  _typedCheck() {\r\n    if (_.isTypedArray(this._buff)) {\r\n      this._buff = this._buff.buffer;\r\n    } else if (!_.isArrayBuffer(this._buff)) {\r\n      throw new TypeError('Expected ArrayBuffer or TypedArray');\r\n    }\r\n  }\r\n\r\n  _fillHeader(headerFormat, arrays) {\r\n    for (const key in headerFormat) {\r\n      if (headerFormat.hasOwnProperty(key)) {\r\n        switch (headerFormat[key][0]) {\r\n          case valueType.singular:\r\n            this._header[key] = arrays[headerFormat[key][1]][headerFormat[key][2]];\r\n            break;\r\n\r\n          case valueType.array:\r\n            this._parseArray(this._header[key], arrays[headerFormat[key][1]], headerFormat[key][2]);\r\n            break;\r\n\r\n          case valueType.vector:\r\n            this._parseVector(this._header[key], arrays[headerFormat[key][1]], headerFormat[key][2]);\r\n            break;\r\n\r\n          case valueType.buffer:\r\n            this._header[key] = new Uint8Array(\r\n              arrays[headerFormat[key][1]],\r\n              [headerFormat[key][2]] * 4,\r\n              [headerFormat[key][3]] * 4,\r\n            );\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _parseVector(vector, arr, pos) {\r\n    [vector.x, vector.y, vector.z] = [arr[pos], arr[pos + 1], arr[pos + 2]];\r\n  }\r\n\r\n  _parseArray(vector, arr, pos) {\r\n    vector[0] = arr[pos];\r\n    vector[1] = arr[pos + 1];\r\n    vector[2] = arr[pos + 2];\r\n  }\r\n\r\n  _parseHeader(_buffer) {}\r\n\r\n  _setAxisIndices() {}\r\n\r\n  _setOrigins() {}\r\n\r\n  _getAxis() {\r\n    const header = this._header;\r\n\r\n    const xScale = header.cellDims.x / header.grid[0];\r\n    const yScale = header.cellDims.y / header.grid[1];\r\n    const zScale = header.cellDims.z / header.grid[2];\r\n\r\n    const [alpha, beta, gamma] = header.angles;\r\n\r\n    const z1 = Math.cos(beta);\r\n    const z2 = (Math.cos(alpha) - Math.cos(beta)\r\n      * Math.cos(gamma)) / Math.sin(gamma);\r\n    const z3 = Math.sqrt(1.0 - z1 * z1 - z2 * z2);\r\n\r\n    const xaxis = new THREE.Vector3(xScale, 0, 0);\r\n    const yaxis = new THREE.Vector3(Math.cos(gamma) * yScale, Math.sin(gamma) * yScale, 0);\r\n    const zaxis = new THREE.Vector3(z1 * zScale, z2 * zScale, z3 * zScale);\r\n\r\n    return [xaxis, yaxis, zaxis];\r\n  }\r\n\r\n  _getXYZdim() {\r\n    return [this._header.extent[this._xyz2crs[0]],\r\n      this._header.extent[this._xyz2crs[1]],\r\n      this._header.extent[this._xyz2crs[2]]];\r\n  }\r\n\r\n  _getVolumeInfo() {\r\n    const volInfo = _.pick(this._header, ['dmean', 'dmin', 'dmax', 'sd', 'delta']);\r\n    volInfo.obtuseAngle = this._header.angles.map((angle) => Number(angle >= (Math.PI / 2)));\r\n    return volInfo;\r\n  }\r\n\r\n  _setBoxParams(xaxis, yaxis, zaxis) {\r\n    // if axes are not orthogonal, the origins might not match with box coordinates - need to make shift\r\n    let shiftX = 0;\r\n    let shiftY = 0;\r\n    const [alpha, beta, gamma] = this._header.angles;\r\n\r\n    if (gamma >= Math.PI / 2) {\r\n      shiftX += Math.abs(yaxis.x);\r\n    }\r\n    if (beta >= Math.PI / 2) {\r\n      shiftX += Math.abs(zaxis.x);\r\n    }\r\n    if (alpha >= Math.PI / 2) {\r\n      shiftY += Math.abs(zaxis.y);\r\n    }\r\n\r\n    this._boxStart = new THREE.Vector3(this._origin.x - shiftX, this._origin.y - shiftY, this._origin.z);\r\n    this._boxSize = new THREE.Vector3(\r\n      Math.abs(xaxis.x) + Math.abs(yaxis.x) + Math.abs(zaxis.x),\r\n      Math.abs(yaxis.y) + Math.abs(zaxis.y),\r\n      Math.abs(zaxis.z),\r\n    );\r\n\r\n    const delta = (axe, proj) => (Math.abs(axe[proj]) / this._boxSize[proj]);\r\n    this._header.delta.x = delta(yaxis, 'x');\r\n    this._header.delta.y = delta(zaxis, 'x');\r\n    this._header.delta.z = delta(zaxis, 'y');\r\n  }\r\n\r\n  _getXYZbox() {\r\n    return new THREE.Box3(this._boxStart.clone(), this._boxStart.clone().add(this._boxSize));\r\n  }\r\n\r\n  _toXYZData() {}\r\n\r\n  parse(data) {\r\n    this._parseHeader(data);\r\n    this._setOrigins();\r\n    return new Volume(Float32Array, this._getXYZdim(), this._getXYZbox(), 1, this._toXYZData(), this._getVolumeInfo());\r\n  }\r\n}\r\n\r\nexport default VolumeModel;\r\n","import Parser from './Parser';\r\nimport VolumeModel, { valueType } from './VolumeModel';\r\n\r\nconst CCP4Header = {\r\n  extent: [valueType.array, 'u32', 0],\r\n  type: [valueType.singular, 'u32', 3],\r\n  nstart: [valueType.array, 'i32', 4],\r\n  grid: [valueType.array, 'u32', 7],\r\n  cellDims: [valueType.vector, 'f32', 10],\r\n  angles: [valueType.array, 'f32', 13],\r\n  crs2xyz: [valueType.array, 'i32', 16],\r\n  dmin: [valueType.singular, 'f32', 19],\r\n  dmax: [valueType.singular, 'f32', 20],\r\n  dmean: [valueType.singular, 'f32', 21],\r\n  ispg: [valueType.singular, 'u32', 22],\r\n  nsymbt: [valueType.singular, 'u32', 23],\r\n  lksflg: [valueType.singular, 'u32', 24],\r\n  customData: [valueType.buffer, 'buffer', 25, 9],\r\n  origin: [valueType.vector, 'f32', 34],\r\n  map: [valueType.buffer, 'buffer', 52, 1],\r\n  machine: [valueType.singular, 'u32', 53],\r\n  sd: [valueType.singular, 'f32', 54],\r\n  nlabel: [valueType.singular, 'f32', 55],\r\n  label: [valueType.buffer, 'buffer', 56, 200],\r\n};\r\n\r\nclass Ccp4Model extends VolumeModel {\r\n  // read header (http://www.ccp4.ac.uk/html/maplib.html)\r\n  _parseHeader(_buffer) {\r\n    this._buff = _buffer;\r\n    this._typedCheck();\r\n    const arrays = {};\r\n    arrays.u32 = new Uint32Array(this._buff, 0, 56);\r\n    arrays.i32 = new Int32Array(this._buff, 0, 56);\r\n    arrays.f32 = new Float32Array(this._buff, 0, 56);\r\n    arrays.buffer = this._buff;\r\n    const header = this._header;\r\n\r\n    this._fillHeader(CCP4Header, arrays);\r\n\r\n    // calculate non-orthogonal unit cell coordinates\r\n    header.angles.forEach((angle, i, a) => { a[i] *= Math.PI / 180.0; });\r\n  }\r\n\r\n  _setAxisIndices() {\r\n    const header = this._header;\r\n\r\n    if (header.cellDims.x === 0.0 && header.cellDims.y === 0.0 && header.cellDims.z === 0.0) {\r\n      header.cellDims.set(1.0, 1.0, 1.0);\r\n    }\r\n    // Apply header conversion\r\n    // Mapping between CCP4 column, row, section and VMD x, y, z.\r\n    const { crs2xyz } = this._header;\r\n    if (crs2xyz[0] === 0 && crs2xyz[1] === 0 && crs2xyz[2] === 0) {\r\n      crs2xyz[0] = 1;\r\n      crs2xyz[1] = 2;\r\n      crs2xyz[2] = 3;\r\n    }\r\n\r\n    const xyz2crs = this._xyz2crs;\r\n    xyz2crs[crs2xyz[0] - 1] = 0; // column\r\n    xyz2crs[crs2xyz[1] - 1] = 1; // row\r\n    xyz2crs[crs2xyz[2] - 1] = 2; // section\r\n  }\r\n\r\n  _setOrigins() {\r\n    const [xaxis, yaxis, zaxis] = this._getAxis();\r\n    this._setAxisIndices();\r\n\r\n    const header = this._header;\r\n    const xyz2crs = this._xyz2crs;\r\n    // Handle both MRC-2000 and older format maps\r\n    if (header.origin.x === 0.0 && header.origin.y === 0.0 && header.origin.z === 0.0) {\r\n      this._origin.addScaledVector(xaxis, header.nstart[xyz2crs[0]]);\r\n      this._origin.addScaledVector(yaxis, header.nstart[xyz2crs[1]]);\r\n      this._origin.addScaledVector(zaxis, header.nstart[xyz2crs[2]]);\r\n    } else {\r\n      this._origin = header.origin;\r\n      // Use ORIGIN records rather than old n[xyz]start records\r\n      //   http://www2.mrc-lmb.cam.ac.uk/image2000.html\r\n      // XXX the ORIGIN field is only used by the EM community, and\r\n      // has undefined meaning for non-orthogonal maps and/or non-cubic voxels, etc.\r\n    }\r\n    xaxis.multiplyScalar(header.extent[xyz2crs[0]] - 1);\r\n    yaxis.multiplyScalar(header.extent[xyz2crs[1]] - 1);\r\n    zaxis.multiplyScalar(header.extent[xyz2crs[2]] - 1);\r\n\r\n    if (header.type === 2) {\r\n      this._data = new Float32Array(\r\n        this._buff,\r\n        1024 + header.nsymbt,\r\n        header.extent[0] * header.extent[1] * header.extent[2],\r\n      );\r\n    } else {\r\n      throw new Error(`CCP4: Unsupported format ${header.type}`);\r\n    }\r\n\r\n    this._setBoxParams(xaxis, yaxis, zaxis);\r\n  }\r\n\r\n  _toXYZData() {\r\n    const header = this._header;\r\n    const data = this._data;\r\n    const xyz2crs = this._xyz2crs;\r\n    const xyzData = new Float32Array(data.length);\r\n\r\n    const dim = this._getXYZdim();\r\n    const xSize = dim[0];\r\n    const ySize = dim[1];\r\n\r\n    let crsIdx = 0;\r\n    const coord = [];\r\n    let x;\r\n    let y;\r\n    let z;\r\n    for (coord[2] = 0; coord[2] < header.extent[2]; coord[2]++) { // Site\r\n      for (coord[1] = 0; coord[1] < header.extent[1]; coord[1]++) { // Row\r\n        for (coord[0] = 0; coord[0] < header.extent[0]; coord[0]++, crsIdx++) { // Column\r\n          x = coord[xyz2crs[0]];\r\n          y = coord[xyz2crs[1]];\r\n          z = coord[xyz2crs[2]];\r\n          xyzData[x + xSize * (y + ySize * z)] = data[crsIdx];\r\n        }\r\n      }\r\n    }\r\n\r\n    return xyzData;\r\n  }\r\n}\r\n\r\nclass CCP4Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'ccp4';\r\n    this.model = new Ccp4Model();\r\n  }\r\n\r\n  static canProbablyParse(_data) {\r\n    return false; // Autodetection is not implemented yet\r\n  }\r\n\r\n  parseSync() {\r\n    return this.model.parse(this._data);\r\n  }\r\n}\r\n\r\nCCP4Parser.formats = ['ccp4'];\r\nCCP4Parser.extensions = ['.ccp4', '.map', '.mrc'];\r\nCCP4Parser.binary = true;\r\n\r\nexport default CCP4Parser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst { Complex, Element, Molecule } = chem;\r\n\r\nclass XYZParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._atomsInf = null;\r\n\r\n    this._options.fileType = 'xyz';\r\n    this._fileName = options.name;\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && /^\\s*\\d+ *\\n[^\\n]*\\n\\s*\\w{1,3}\\s+-?\\d/.test(data);\r\n  }\r\n\r\n  _parseToAtomsInf(source) {\r\n    const endnAtoms = source.indexOf('\\n');\r\n    const nAtoms = parseInt(source.substring(0, endnAtoms), 10);\r\n    const endComment = source.indexOf('\\n', endnAtoms + 1);\r\n    let comment = source.slice(endnAtoms + 1, endComment).trim();\r\n    if (comment.length === 0) {\r\n      comment = this._fileName;\r\n    }\r\n\r\n    const startAtomsInf = endComment + source.substring(endComment).search(/\\S/);\r\n    this._atomsInf = source.substring(startAtomsInf).split(/[\\s,]*\\n[\\s,]*/);\r\n    if (!Number.isNaN(nAtoms) && (this._atomsInf.length - 1 !== nAtoms)) {\r\n      this._complex.error = {\r\n        message: 'wrong number of atoms',\r\n      };\r\n      return;\r\n    }\r\n\r\n    this._complex.metadata.format = 'xyz';\r\n    this._complex.name = comment;\r\n  }\r\n\r\n  _parseAtomsInf() {\r\n    const het = true;\r\n    const altLoc = ' ';\r\n    const occupancy = 1;\r\n    const tempFactor = 1;\r\n    const charge = 0;\r\n\r\n    const chain = this._complex.addChain('A');\r\n    const residue = chain.addResidue('UNK', 1, ' ');\r\n\r\n    for (let i = 0; i < this._atomsInf.length - 1; i++) {\r\n      const words = this._atomsInf[i].split(/[\\s,]+/);\r\n\r\n      if (words.length !== 4) {\r\n        this._complex.error = {\r\n          message: 'missed parameters',\r\n        };\r\n        break;\r\n      }\r\n\r\n      const serial = i + 1;\r\n      const name = words[0];\r\n      const xyz = new THREE.Vector3(parseFloat(words[1]), parseFloat(words[2]), parseFloat(words[3]));\r\n      const type = Element.getByName(name);\r\n      const role = undefined;\r\n\r\n      residue.addAtom(name, type, xyz, role, het, serial, altLoc, occupancy, tempFactor, charge);\r\n    }\r\n\r\n    const molecule = new Molecule(this._complex, this._complex.name, 1);\r\n    molecule.residues = residue;\r\n    this._complex._molecules[0] = molecule;\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n\r\n    this._parseToAtomsInf(this._data);\r\n    this._parseAtomsInf();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n\r\n    this._complex = null;\r\n    this._atomsInf = null;\r\n\r\n    if (result.error) {\r\n      throw new Error(result.error.message);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static formats = ['xyz'];\r\n\r\n  static extensions = ['.xyz'];\r\n}\r\n\r\nexport default XYZParser;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst { Complex, Element } = chem;\r\n\r\nclass PubChemParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'pubchem+json';\r\n  }\r\n\r\n  static canProbablyParse(data) {\r\n    return _.isString(data) && data[0] === '{';\r\n  }\r\n\r\n  parseSync() {\r\n    this.logger.info('Parsing PubChem JSON file...');\r\n    return this._toComplex(JSON.parse(this._data));\r\n  }\r\n\r\n  _toComplex(jsonData) {\r\n    const complex = new Complex();\r\n    const complexData = jsonData.PC_Compounds && jsonData.PC_Compounds[0];\r\n    if (complexData) {\r\n      this._extractAtoms(complex, complexData);\r\n      complex.finalize({\r\n        needAutoBonding: false,\r\n        detectAromaticLoops: this.settings.now.aromatic,\r\n        enableEditing: this.settings.now.editing,\r\n      });\r\n    }\r\n    return complex;\r\n  }\r\n\r\n  _extractAtoms(complex, complexData) {\r\n    let aids = complexData.atoms && complexData.atoms.aid;\r\n    let elements = aids && complexData.atoms.element;\r\n    if (!elements || aids.length !== elements.length) {\r\n      throw new Error('Unable to parse atom elements');\r\n    }\r\n    elements = _.fromPairs(_.zip(aids, elements));\r\n    const atoms = {};\r\n\r\n    const coords = complexData.coords && complexData.coords[0];\r\n    const model = coords && coords.conformers && coords.conformers[0];\r\n    const xs = model && model.x;\r\n    const ys = model && model.y;\r\n    const zs = (model && model.z) || [];\r\n    aids = coords && coords.aid;\r\n    if (!aids || !xs || !ys) {\r\n      throw new Error('Coordinates are not found in the file');\r\n    }\r\n\r\n    const chain = complex.addChain(' ');\r\n    const residue = chain.addResidue('UNK', 1, ' ');\r\n\r\n    for (let i = 0, n = aids.length; i < n; ++i) {\r\n      const aid = aids[i];\r\n      const element = Element.ByAtomicNumber[elements[aid]];\r\n      const xyz = new THREE.Vector3(xs[i], ys[i], zs[i] || 0.0);\r\n      atoms[aid] = residue.addAtom(element.name, element, xyz, undefined, true, aid, ' ', 1.0, 0.0, 0);\r\n    }\r\n\r\n    const aids1 = complexData.bonds && complexData.bonds.aid1;\r\n    const aids2 = complexData.bonds && complexData.bonds.aid2;\r\n    const orders = (complexData.bonds && complexData.bonds.order) || [];\r\n    if (!aids1 || !aids2 || aids1.length !== aids2.length) {\r\n      return;\r\n    }\r\n\r\n    for (let j = 0, m = aids1.length; j < m; ++j) {\r\n      complex.addBond(atoms[aids1[j]], atoms[aids2[j]], orders[j] || 1, 0, true);\r\n    }\r\n  }\r\n}\r\n\r\nPubChemParser.formats = ['pubchem', 'pubchem+json', 'pc'];\r\nPubChemParser.extensions = ['.json'];\r\n\r\nexport default PubChemParser;\r\n","import _ from 'lodash';\r\n\r\nexport default class SDFStream {\r\n  constructor(data) {\r\n    this._strings = data.split(/\\r?\\n|\\r/);\r\n    this._currentStart = 0;\r\n    this._currentStringIndx = 0;\r\n  }\r\n\r\n  setStart(start) {\r\n    if (start >= this._strings.length) {\r\n      this._currentStart = this._strings.length - 1;\r\n      this._currentStringIndx = this._strings.length - 1;\r\n    } else {\r\n      this._currentStart = start;\r\n      this._currentStringIndx = start;\r\n    }\r\n  }\r\n\r\n  getNextString() {\r\n    return this._strings[++this._currentStringIndx];\r\n  }\r\n\r\n  getCurrentString() {\r\n    return this._strings[this._currentStringIndx];\r\n  }\r\n\r\n  getStringFromStart(numb) {\r\n    this._currentStringIndx = this._currentStart + numb;\r\n    return this._strings[this._currentStart + numb];\r\n  }\r\n\r\n  findNextDataItem() {\r\n    let curStr = this.getNextString();\r\n    let res = false;\r\n    while (!_.isUndefined(curStr) && curStr.trim() !== '$$$$') {\r\n      if (curStr.match(/>\\s+<(.*)>/)) {\r\n        res = true;\r\n        break;\r\n      }\r\n      curStr = this.getNextString();\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  findNextCompoundStart() {\r\n    let curStr = this.getCurrentString();\r\n    while (!_.isUndefined(curStr) && curStr.trim() !== '$$$$') {\r\n      curStr = this.getNextString();\r\n    }\r\n    this.setStart(++this._currentStringIndx);\r\n    return this.probablyHaveDataToParse();\r\n  }\r\n\r\n  probablyHaveDataToParse() {\r\n    return this._currentStringIndx < this._strings.length - 2;\r\n  }\r\n}\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport SDFStream from './SDFStream';\r\nimport Assembly from '../../chem/Assembly';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst chargeMap = [0, 3, 2, 1, 0, -1, -2, -3];\r\nconst orderMap = [0, 1, 2, 3, 1, 1, 1, 2];\r\nconst typeMap = [\r\n  Bond.BondType.UNKNOWN, // 0 - error\r\n  Bond.BondType.COVALENT, // 1 - single\r\n  Bond.BondType.COVALENT, // 2 - double\r\n  Bond.BondType.COVALENT, // 3 - triple\r\n  Bond.BondType.AROMATIC, // 4 - aromatic\r\n  Bond.BondType.UNKNOWN, // 5 - single or double\r\n  Bond.BondType.AROMATIC, // 6 - single or aromatic\r\n  Bond.BondType.AROMATIC, // 7 - double or aromatic\r\n  // 8 - any\r\n  // 9 - coordination\r\n  // 10 - hydrogen\r\n];\r\n\r\nconst sdfAndMolRegexp = /.*(M\\s\\sEND).*|.*(^$$$$).*|.*>\\s+<(.+)>.*/;\r\nconst sdfRegExp = /.*($$$$).*|.*>\\s+<(.+)>.*/;\r\n\r\nconst fileFormat = { SDF: 'sdf', MOL: 'mol' };\r\n\r\nconst possibleNameTags = ['PUBCHEM_IUPAC_TRADITIONAL_NAME', /PUBCHEM_(.+)_NAME/, /(.+)name/, /(.+)NAME/];\r\nconst possibleIDTags = ['PUBCHEM_COMPOUND_CID', 'id', 'ID', /.*CID/, /.*ID/, /.*id/];\r\nconst possibleTitleTags = ['msg', 'MSG', 'message', 'title', 'description', 'desc'];\r\nconst tagsNames = ['name', 'id', 'title'];\r\nconst tags = { name: possibleNameTags, id: possibleIDTags, title: possibleTitleTags };\r\n\r\nfunction buildChainID(index) {\r\n  if (!index) {\r\n    return 'A';\r\n  }\r\n\r\n  const codes = [];\r\n  while (index) {\r\n    codes.push(65 + (index % 26));\r\n    index = Math.trunc(index / 26);\r\n  }\r\n  if (codes.length > 1) {\r\n    codes.reverse();\r\n    codes[0] -= 1;\r\n  }\r\n\r\n  return String.fromCharCode(...codes);\r\n}\r\n\r\nexport default class SDFParser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._format = 'sdf';\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._molecules = null;\r\n    this._metadata = {};\r\n    this._metadata.molecules = [];\r\n    this._currentMolProps = {};\r\n    this._compoundIndx = -1;\r\n    this._assemblies = [];\r\n    this._atomsParsed = 0;\r\n    this._atomsIndexes = [];\r\n  }\r\n\r\n  canProbablyParse(data) {\r\n    return _.isString(data) && sdfAndMolRegexp.test(data);\r\n  }\r\n\r\n  _parseHeader(stream) {\r\n    const molecule = {};\r\n    molecule.name = stream.getStringFromStart(0);\r\n    const date = parseInt(stream.getStringFromStart(1).substr(10, 6).trim(), 10);\r\n    molecule.date = date.toString() || '';\r\n    molecule.title = stream.getStringFromStart(2);\r\n    this._metadata.molecules.push(molecule);\r\n  }\r\n\r\n  _parseAtoms(stream, atomsNum) {\r\n    let curStr;\r\n    let serial = this._atomsParsed;\r\n\r\n    // each molecule = chain\\residue\r\n    const chainID = buildChainID(this._compoundIndx);\r\n    const resName = 'UNK';\r\n    const resSeq = 1;\r\n\r\n    this._chain = this._complex.getChain(chainID) || this._complex.addChain(chainID);\r\n    this._residue = this._chain.addResidue(resName, resSeq, ' ');\r\n\r\n    for (let i = 0; i < atomsNum; i++) {\r\n      curStr = stream.getNextString();\r\n      serial++;\r\n      const x = parseFloat(curStr.substr(0, 10));\r\n      const y = parseFloat(curStr.substr(10, 10));\r\n      const z = parseFloat(curStr.substr(20, 10));\r\n      const charge = chargeMap[parseInt(curStr.substr(36, 3), 10)];\r\n      const xyz = new THREE.Vector3(x, y, z);\r\n      let name = curStr.substr(31, 3).trim().toUpperCase();\r\n      const type = Element.getByName(name);\r\n      if (!this._atomsIndexes[name]) {\r\n        this._atomsIndexes[name] = 0;\r\n      }\r\n      this._atomsIndexes[name] += 1;\r\n      name += this._atomsIndexes[name]; // every atom need to have unique name.\r\n\r\n      this._residue.addAtom(name, type, xyz, undefined, true, serial, ' ', 1.0, 0.0, charge);\r\n    }\r\n  }\r\n\r\n  _parseBonds(stream, bondsNum) {\r\n    let curStr;\r\n\r\n    for (let i = 0; i < bondsNum; i++) {\r\n      curStr = stream.getNextString();\r\n      let atom1 = parseInt(curStr.substr(0, 3), 10) + this._atomsParsed;\r\n      let atom2 = parseInt(curStr.substr(3, 3), 10) + this._atomsParsed;\r\n      const bondType = parseInt(curStr.substr(6, 3), 10);\r\n\r\n      if (atom1 > atom2) {\r\n        [atom1, atom2] = [atom2, atom1];\r\n      }\r\n      this._complex.addBond(\r\n        atom1,\r\n        atom2,\r\n        orderMap[bondType] || 1,\r\n        typeMap[bondType] || Bond.BondType.UNKNOWN,\r\n        true,\r\n      );\r\n    }\r\n  }\r\n\r\n  _parseMOL(stream) {\r\n    this._compoundIndx++;\r\n\r\n    this._parseHeader(stream);\r\n    const countsLine = stream.getStringFromStart(3);\r\n    const atomsNum = parseInt(countsLine.substr(0, 3), 10);\r\n    const bondsNum = parseInt(countsLine.substr(3, 3), 10);\r\n    this._parseAtoms(stream, atomsNum);\r\n    this._parseBonds(stream, bondsNum);\r\n\r\n    this._atomsParsed += atomsNum;\r\n\r\n    this._metadata.molecules[this._compoundIndx]._residues = [];\r\n    this._metadata.molecules[this._compoundIndx]._residues.push(this._residue);\r\n  }\r\n\r\n  _parseDataItem(stream) {\r\n    const tag = stream.getCurrentString();\r\n\r\n    let data = [];\r\n    let curStr = stream.getNextString();\r\n\r\n    // read data\r\n    while (curStr.trim() !== '') {\r\n      data.push(curStr);\r\n      curStr = stream.getNextString();\r\n    }\r\n    if (data.length === 1) {\r\n      [data] = data;\r\n    }\r\n    this._currentMolProps[tag.replace(/[<>]/g, '').trim()] = data;\r\n  }\r\n\r\n  _parseCompound(stream) {\r\n    this._parseMOL(stream);\r\n\r\n    // parse data items block\r\n    if (this._format === fileFormat.SDF) {\r\n      this._currentMolProps = {};\r\n      while (stream.findNextDataItem()) {\r\n        this._parseDataItem(stream);\r\n      }\r\n      if (Object.keys(this._currentMolProps).length !== 0) {\r\n        const molecule = this._metadata.molecules[this._compoundIndx];\r\n        molecule.props = this._currentMolProps;\r\n        this._tryToUpdateMoleculeData(molecule);\r\n      }\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap;\r\n    const complex = this._complex;\r\n\r\n    const bonds = complex._bonds;\r\n    for (let j = 0; j < bonds.length; j++) {\r\n      const bond = bonds[j];\r\n      if (bond._right < bond._left) {\r\n        console.log('_fixBondsArray: Logic error.');\r\n      }\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _buildAssemblies() {\r\n    const chains = this._complex._chains;\r\n\r\n    if (chains.length === 1) {\r\n      return this._assemblies;\r\n    }\r\n\r\n    for (let i = 0; i < chains.length; i++) {\r\n      const assembly = new Assembly(this._complex);\r\n      const matrix = new THREE.Matrix4();\r\n      assembly.addMatrix(matrix);\r\n      assembly.addChain(chains[i]._name);\r\n      this._assemblies.push(assembly);\r\n    }\r\n\r\n    return this._assemblies;\r\n  }\r\n\r\n  _buildMolecules() {\r\n    this._complex._molecules = [];\r\n    const { molecules } = this._metadata;\r\n    for (let i = 0; i < molecules.length; i++) {\r\n      const molecule = new Molecule(this._complex, molecules[i].name, i + 1);\r\n      molecule.residues = molecules[i]._residues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n\r\n    return this._complex._molecules;\r\n  }\r\n\r\n  _searchTag(tag, props) {\r\n    for (let i = 0; i < props.length; i++) {\r\n      if ((tag instanceof RegExp && tag.test(props[i].tag)) || tag === props[i].tag) {\r\n        return props[i].data;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  _tryToFind(tagsList, props) {\r\n    for (let j = 0; j < tagsList.length; j++) {\r\n      const res = this._searchTag(tagsList[j], props);\r\n      if (res) {\r\n        return res;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  _tryToUpdateMoleculeData(molecule) {\r\n    let res = false;\r\n    for (let i = 0; i < tagsNames.length; i++) {\r\n      const tagPossibleNames = tags[tagsNames[i]];\r\n      const data = this._tryToFind(tagPossibleNames, molecule.props);\r\n      if (data) {\r\n        molecule[tagsNames[i]] = data;\r\n        res = true;\r\n      }\r\n    }\r\n\r\n    molecule.name = molecule.name || molecule.id;\r\n    if (molecule.name.match(/^\\d+$/)) {\r\n      molecule.name = `CID: ${molecule.name}`;\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  _finalizeMetadata() {\r\n    const { molecules } = this._metadata;\r\n    const { metadata } = this._complex;\r\n    const complex = this._complex;\r\n\r\n    if (molecules.length === 1) {\r\n      complex.name = molecules[0].name;\r\n      metadata.title = molecules[0].title;\r\n      metadata.date = molecules[0].date;\r\n      metadata.properties = molecules[0].props;\r\n    } else if (molecules.length > 1) {\r\n      metadata.molecules = [];\r\n      for (let i = 0; i < molecules.length; i++) {\r\n        metadata.molecules.push({\r\n          name: molecules[i].name, date: molecules[i].date, title: molecules[i].title, properties: molecules[i].props,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _finalize() {\r\n    const serialAtomMap = this._serialAtomMap = {};\r\n    const atoms = this._complex._atoms;\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const atom = atoms[i];\r\n      serialAtomMap[atom.serial] = atom;\r\n    }\r\n\r\n    this._complex._finalizeBonds();\r\n    this._fixBondsArray();\r\n    this._finalizeMetadata();\r\n    this._buildAssemblies();\r\n    this._complex.units = this._complex.units.concat(this._assemblies);\r\n    this._buildMolecules();\r\n    this._complex.finalize({\r\n      needAutoBonding: false, detectAromaticLoops: false, enableEditing: false, serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  defineFormat(data) {\r\n    let format;\r\n    if (sdfRegExp.test(data)) {\r\n      format = fileFormat.SDF;\r\n    } else {\r\n      format = fileFormat.MOL;\r\n    }\r\n\r\n    return format;\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n    const stream = new SDFStream(this._data);\r\n\r\n    this._format = this.defineFormat(this._data);\r\n    result.metadata.format = this._format;\r\n\r\n    do {\r\n      this._parseCompound(stream);\r\n    } while (stream.findNextCompoundStart());\r\n\r\n    this._finalize();\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nSDFParser.formats = ['mol', 'sdf'];\r\nSDFParser.extensions = ['.mol', '.sdf'];\r\n","import * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport VolumeModel, { valueType } from './VolumeModel';\r\n\r\n// http://www.uoxray.uoregon.edu/tnt/manual/node104.html\r\nconst DSN6Header = {\r\n  nstart: [valueType.array, 'i16', 0],\r\n  extent: [valueType.array, 'i16', 3],\r\n  grid: [valueType.array, 'i16', 6],\r\n  cellDims: [valueType.vector, 'i16', 9],\r\n  angles: [valueType.array, 'i16', 12],\r\n  div: [valueType.singular, 'i16', 15],\r\n  adder: [valueType.singular, 'i16', 16],\r\n  scaleFactor: [valueType.singular, 'i16', 17],\r\n};\r\n\r\nclass DSN6Model extends VolumeModel {\r\n  _parseHeader(_buffer) {\r\n    this._buff = _buffer;\r\n    this._typedCheck();\r\n\r\n    const arrays = {};\r\n    arrays.i16 = new Int16Array(this._buff);\r\n\r\n    // check and reverse if big endian\r\n    if (arrays.i16[18] !== 100) {\r\n      for (let i = 0, n = arrays.i16.length; i < n; ++i) {\r\n        const val = arrays.i16[i];\r\n        arrays.i16[i] = ((val & 0xff) << 8) | ((val >> 8) & 0xff);\r\n      }\r\n    }\r\n    if (arrays.i16[18] !== 100) {\r\n      throw new Error('DSN6: Incorrect format ');\r\n    }\r\n\r\n    const header = this._header;\r\n\r\n    this._fillHeader(DSN6Header, arrays);\r\n    header.cellDims.multiplyScalar(1.0 / header.scaleFactor);\r\n    header.angles.forEach((angle, i, a) => { a[i] *= (Math.PI / 180.0) / header.scaleFactor; });\r\n    header.div /= 100;\r\n  }\r\n\r\n  _setAxisIndices() {\r\n    this._xyz2crs[0] = 0;\r\n    this._xyz2crs[1] = 1;\r\n    this._xyz2crs[2] = 2;\r\n  }\r\n\r\n  _setOrigins() {\r\n    const header = this._header;\r\n    const [xaxis, yaxis, zaxis] = this._getAxis();\r\n    this._setAxisIndices();\r\n\r\n    this._origin.addScaledVector(xaxis, header.nstart[0]);\r\n    this._origin.addScaledVector(yaxis, header.nstart[1]);\r\n    this._origin.addScaledVector(zaxis, header.nstart[2]);\r\n\r\n    xaxis.multiplyScalar(header.extent[0]);\r\n    yaxis.multiplyScalar(header.extent[1]);\r\n    zaxis.multiplyScalar(header.extent[2]);\r\n\r\n    this._setBoxParams(xaxis, yaxis, zaxis);\r\n  }\r\n\r\n  _pointCalculate(xyzData, byteBuffer, z, y, x, pos, i) {\r\n    const header = this._header;\r\n\r\n    if (x < header.extent[0] && y < header.extent[1] && z < header.extent[2]) {\r\n      const idx = x + header.extent[0] * (y + header.extent[1] * z);\r\n      xyzData[idx] = (byteBuffer[pos.counter] - header.adder) / header.div;\r\n      ++pos.counter;\r\n    } else {\r\n      pos.counter += 8 - i;\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  _blockCalculate(xyzData, byteBuffer, zBlock, yBlock, xBlock, pos) {\r\n    for (let k = 0; k < 8; ++k) {\r\n      const z = 8 * zBlock + k;\r\n      for (let j = 0; j < 8; ++j) {\r\n        const y = 8 * yBlock + j;\r\n        let inRange = true;\r\n        let i = 0;\r\n        while (inRange && i < 8) {\r\n          const x = 8 * xBlock + i;\r\n          inRange = this._pointCalculate(xyzData, byteBuffer, z, y, x, pos, i);\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _toXYZData() {\r\n    const header = this._header;\r\n    const byteBuffer = new Uint8Array(this._buff);\r\n    const xyzData = new Float32Array(header.extent[0] * header.extent[1] * header.extent[2]);\r\n\r\n    const blocks = new THREE.Vector3(header.extent[0] / 8, header.extent[1] / 8, header.extent[2] / 8);\r\n\r\n    const pos = {};\r\n    pos.counter = 512;\r\n\r\n    for (let zBlock = 0; zBlock < blocks.z; ++zBlock) {\r\n      for (let yBlock = 0; yBlock < blocks.y; ++yBlock) {\r\n        for (let xBlock = 0; xBlock < blocks.x; ++xBlock) {\r\n          this._blockCalculate(xyzData, byteBuffer, zBlock, yBlock, xBlock, pos);\r\n        }\r\n      }\r\n    }\r\n    this._calculateInfoParams(xyzData);\r\n    return xyzData;\r\n  }\r\n\r\n  _calculateInfoParams(xyzData) {\r\n    this._header.dmean /= xyzData.length;\r\n    let dispersion = 0;\r\n    let minDensity = xyzData[0];\r\n    let maxDensity = xyzData[0];\r\n    for (let j = 0; j < xyzData.length; j++) {\r\n      dispersion += (this._header.dmean - xyzData[j]) ** 2;\r\n\r\n      if (xyzData[j] < minDensity) {\r\n        minDensity = xyzData[j];\r\n      }\r\n      if (xyzData[j] > maxDensity) {\r\n        maxDensity = xyzData[j];\r\n      }\r\n    }\r\n    this._header.sd = Math.sqrt(dispersion / xyzData.length);\r\n    this._header.dmax = maxDensity;\r\n    this._header.dmin = minDensity;\r\n  }\r\n}\r\n\r\nclass DSN6Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    this._options.fileType = 'dsn6';\r\n    this.model = new DSN6Model();\r\n  }\r\n\r\n  static canParse(data, options) {\r\n    if (!data) {\r\n      return false;\r\n    }\r\n    return data instanceof ArrayBuffer && Parser.checkDataTypeOptions(options, 'dsn6');\r\n  }\r\n\r\n  static canProbablyParse(_data) {\r\n    return false;\r\n  }\r\n\r\n  parseSync() {\r\n    return this.model.parse(this._data);\r\n  }\r\n}\r\n\r\nDSN6Parser.formats = ['dsn6'];\r\nDSN6Parser.extensions = ['.dsn6', '.omap'];\r\nDSN6Parser.binary = true;\r\n\r\nexport default DSN6Parser;\r\n","import PDBStream from './PDBStream';\r\n\r\n/**\r\n * Little helper class for GRO Parser usage.\r\n * @extends PDBStream\r\n */\r\nclass GROReader extends PDBStream {\r\n  constructor(data) {\r\n    super(data);\r\n    /** @type Number */\r\n    this._next = -1; // End position of line\r\n    this.next();\r\n  }\r\n\r\n  /**\r\n   * Getting end of string.\r\n   * @returns {Number} Pointer to end of string\r\n   */\r\n  getNext() {\r\n    return this._next;\r\n  }\r\n}\r\n\r\nexport default GROReader;\r\n","import * as THREE from 'three';\r\nimport _ from 'lodash';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\nimport GROReader from './GROReader';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Molecule,\r\n} = chem;\r\n\r\n/**\r\n * Gromos87 file format parser.\r\n * @extends Parser\r\n */\r\nclass GROParser extends Parser {\r\n  /**\r\n   * Create parser for .gro file format\r\n   *\r\n   * @param {String} data Input file\r\n   * @param {String} options Input options (optional field)\r\n   */\r\n  constructor(data, options) {\r\n    super(data, options);\r\n    /** @type Date */\r\n    this._time = null; // Time in ps, optional field for animations\r\n    /** @type Number */\r\n    this._numAtoms = null; // Number of atoms in complex\r\n    /** @type Number */\r\n    this._residueNumber = null; // Number of exact residue\r\n    /** @type String */\r\n    this._residueName = ''; // Scientific name of exact residue\r\n    /** @type String */\r\n    this._atomName = ''; // Scientific name of exact atom\r\n    /** @type Number */\r\n    this._atomNumber = null; // Sorted number of exact atom\r\n    /** @type Array */\r\n    this._atomPosition = []; // Array which contains x, y, z position of exact atom\r\n    /** @type Array */\r\n    this._atomVelocity = []; // Array which contains x, y, z velocity of exact atom (optional)\r\n    /** @type Complex */\r\n    this._complex = null; // Complex structure for unified molecule representation\r\n    /** @type Vector3 */\r\n    this._molecules = []; // Molecules array\r\n    /** @type Molecule */\r\n    this._molecule = null; // Single molecule\r\n    /** @type String */\r\n    this._options.filetype = 'gro'; // Extension of data file.\r\n  }\r\n\r\n  /**\r\n   * General check for possibility of parsing.\r\n   * @param {String} data - Input file\r\n   * @returns {boolean} true if this file is in ascii, false otherwise\r\n   */\r\n  canProbablyParse(data) {\r\n    return _.isString(this._data) && /^\\s*[^\\n]*\\n\\s*\\d+ *\\n\\s*\\d+[^\\n\\d]{3}\\s*\\w+\\s*\\d+\\s*-?\\d/.test(data);\r\n  }\r\n\r\n  /**\r\n   * Parsing title of molecule complex.\r\n   * NOTE: that names are ESTIMATES, there is no strict rules in Gromos87 standard for first line in input file.\r\n   * @param {GROReader} line - Line containing title and time.\r\n   */\r\n  _parseTitle(line) {\r\n    const { metadata } = this._complex;\r\n    metadata.id = line.readLine().trim();\r\n    metadata.name = metadata.id.slice(metadata.id.lastIndexOf('\\\\') + 1, metadata.id.lastIndexOf('.'));\r\n    metadata.format = 'gro';\r\n  }\r\n\r\n  /**\r\n   * Parsing line containing number of atoms information.\r\n   * @param {GROReader} line - Line containing number of atoms.\r\n   */\r\n  _parseNumberOfAtoms(line) {\r\n    this._numAtoms = line.readInt(0, line.getNext());\r\n    if (Number.isNaN(this._numAtoms)) {\r\n      throw new Error('Line 2 is not representing atom number. Consider checking input file');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parsing line containing information about residues, atoms etc. Also information about box vectors.\r\n   * Format of atoms MUST (by Gromos87 standard) be this: (note that numbering starts not from 0, but from 1!)\r\n   * ResidueNumber[1 - 5]  ResidueName[6 - 10] AtomName[11 - 15] AtomNumber[16 - 20] Position[21 - 45] Velocity[46 - 69]\r\n   * @param {GROReader} line - Line containing information about atom.\r\n   */\r\n  _parseAtom(line) {\r\n    this._residueNumber = line.readInt(1, 5);\r\n    this._residueName = line.readString(6, 10).trim();\r\n    this._atomName = line.readString(11, 15).trim();\r\n    this._atomNumber = line.readInt(16, 20);\r\n    const positionX = line.readFloat(21, 28) * 10;\r\n    const positionY = line.readFloat(29, 36) * 10;\r\n    const positionZ = line.readFloat(37, 45) * 10;\r\n    if (Number.isNaN(positionX) || Number.isNaN(positionY) || Number.isNaN(positionZ)) {\r\n      this._complex.error = {\r\n        message: `Atom position is invalid in \"${line.readLine()}\"`,\r\n      };\r\n      return;\r\n    }\r\n    /* const velocityX = line.readFloat(46, 53);\r\n    const velocityY = line.readFloat(54, 61);\r\n    const velocityZ = line.readFloat(62, 69); */\r\n    /* Adding residue and atom to complex structure */\r\n    const type = Element.getByName(this._atomName[0]); /* MAGIC 0. REASONS: This name is something like \"CA\", where\r\n     C - is an element an A is something else. But what about Calcium? */\r\n    if (type.fullName === 'Unknown') {\r\n      this._complex.error = {\r\n        message: `${this._atomName[0]} hasn't been recognised as an atom name.`,\r\n      };\r\n      return;\r\n    }\r\n    const role = Element.Role[this._atomName];\r\n    /* Firstly, create a dummy chain */\r\n    let chain = this._chain;\r\n    if (!chain) {\r\n      this._chain = chain = this._complex.addChain('A');\r\n    }\r\n    /* Secondly, add residue to that chain */\r\n    let residue = this._residue;\r\n    if (!residue || residue.getSequence() !== this._residueNumber) {\r\n      this._residue = residue = chain.addResidue(this._residueName, this._residueNumber, ' ');\r\n    }\r\n    /* Lastly, add atom to that residue */\r\n    this._atomPosition = new THREE.Vector3(positionX, positionY, positionZ);\r\n    /* Adding default constants to correct atom addition process */\r\n    const het = true;\r\n    const altLoc = ' ';\r\n    const occupancy = 1;\r\n    const tempFactor = 1;\r\n    const charge = 0;\r\n    residue.addAtom(this._atomName, type, this._atomPosition, role, het, this._atomNumber, altLoc, occupancy, tempFactor, charge);\r\n  }\r\n\r\n  /**\r\n   * Some finalizing procedures. In '.gro' file format there is only 1 chain and 1 molecule.\r\n   */\r\n  _finalize() {\r\n    const molecule = new Molecule(this._complex, this._complex.metadata.name, 1);\r\n    // aggregate residues from chain\r\n    molecule.residues = this._chain._residues;\r\n    molecule._chains = this._chain;\r\n    this._complex._molecules[0] = molecule;\r\n    this._molecules.push(molecule);\r\n    this._complex.finalize({\r\n      needAutoBonding: true,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main parsing procedure.\r\n   * @returns {Complex} Complex structure for visualizing.\r\n   */\r\n  parseSync() {\r\n    /* Create \"Complex\" variable */\r\n    const result = this._complex = new Complex();\r\n    /* Parse input file line-by-line */\r\n    const reader = new GROReader(this._data);\r\n    let counter = 0; /* Simple counter regarding to format of .gro file */\r\n    /* First two lines - technical information, other lines - Atoms */\r\n    this._parseTitle(reader);\r\n    reader.next();\r\n    this._parseNumberOfAtoms(reader);\r\n    reader.next();\r\n    for (counter = 0; counter < this._numAtoms; ++counter) {\r\n      if (!reader.end()) {\r\n        this._parseAtom(reader);\r\n        reader.next();\r\n      } else break;\r\n    }\r\n    /* If number of atoms in second line is less then actual atoms in file */\r\n    if (counter < this._numAtoms) {\r\n      this._complex.error = {\r\n        message: 'File ended unexpectedly.',\r\n      };\r\n    }\r\n    /* Catch errors occurred in parsing process */\r\n    if (result.error) {\r\n      throw new Error(result.error.message);\r\n    }\r\n\r\n    /* Finalizing data */\r\n    this._finalize();\r\n\r\n    /* Cleaning up */\r\n    this._atomPosition = null;\r\n    this._complex = null;\r\n    this._molecules = null;\r\n    this._molecule = null;\r\n\r\n    /* Return resulting Complex variable */\r\n    return result;\r\n  }\r\n}\r\n\r\nGROParser.formats = ['gro'];\r\nGROParser.extensions = ['.gro'];\r\n\r\nexport default GROParser;\r\n","import * as THREE from 'three';\r\nimport Parser from './Parser';\r\nimport chem from '../../chem';\r\n\r\nconst {\r\n  Complex,\r\n  Element,\r\n  Bond,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst orderMap = {\r\n  un: 0,\r\n  1: 1,\r\n  2: 2,\r\n  3: 3,\r\n  ar: 1,\r\n  am: 1,\r\n  nc: 0,\r\n  du: 1,\r\n};\r\nconst typeMap = {\r\n  un: Bond.BondType.UNKNOWN, // unknown (cannot be determined from the parameter tables)\r\n  1: Bond.BondType.COVALENT, // single\r\n  2: Bond.BondType.COVALENT, // double\r\n  3: Bond.BondType.COVALENT, // triple\r\n  ar: Bond.BondType.AROMATIC, // aromatic\r\n  am: Bond.BondType.COVALENT, // amide\r\n  nc: Bond.BondType.UNKNOWN, // not connected\r\n  du: Bond.BondType.COVALENT, // dummy\r\n};\r\n\r\nconst resNumberRegex = /\\d+$/;\r\nconst spacesRegex = /\\s+/;\r\n\r\nfunction splitToFields(str) {\r\n  return str.trim().split(spacesRegex);\r\n}\r\n/* There is no jsdoc documentation because of eslint corrections:\r\n * not all Parser methods are implemented\r\n */\r\n\r\nclass MOL2Parser extends Parser {\r\n  constructor(data, options) {\r\n    super(data, options);\r\n\r\n    this._complex = null;\r\n    this._chain = null;\r\n    this._residue = null;\r\n    this._compoundIndx = -1;\r\n\r\n    this._molecules = [];\r\n    this._molecule = null;\r\n\r\n    this._currPosIdx = 0;\r\n    this._currStartIdx = 0;\r\n\r\n    this._serialAtomMap = {};\r\n\r\n    this._options.fileType = 'mol2';\r\n  }\r\n\r\n  _parseRawStrings(data) {\r\n    return data.split(/\\r?\\n|\\r/);\r\n  }\r\n\r\n  _toStringFromStart(numb, MOL2Data) {\r\n    const newPosIdx = this._currStartIdx + numb;\r\n    this._currPosIdx = (newPosIdx < MOL2Data.length) ? newPosIdx : this._currStartIdx;\r\n  }\r\n\r\n  _toHeaderString(header, MOL2Data) {\r\n    this._toStringFromStart(0, MOL2Data);\r\n    while (this._currPosIdx < MOL2Data.length) {\r\n      if (MOL2Data[this._currPosIdx].match(`@<TRIPOS>${header}`)) {\r\n        return;\r\n      }\r\n      this._currPosIdx++;\r\n    }\r\n    this._toStringFromStart(0, MOL2Data);\r\n  }\r\n\r\n  _toStringFromHeader(header, numb, MOL2Data) {\r\n    this._toHeaderString(header, MOL2Data);\r\n    const newPosIdx = this._currPosIdx + numb;\r\n\r\n    if (MOL2Data[this._currPosIdx].match(`@<TRIPOS>${header}`) && newPosIdx < MOL2Data.length) {\r\n      this._currPosIdx = newPosIdx;\r\n    }\r\n  }\r\n\r\n  _setStart(startPos, MOL2Data) {\r\n    if (startPos >= MOL2Data.length) {\r\n      this._currStartIdx = this._currPosIdx = MOL2Data.length - 1;\r\n    } else {\r\n      this._currStartIdx = this._currPosIdx = startPos;\r\n    }\r\n  }\r\n\r\n  _probablyHaveDataToParse(MOL2Data) {\r\n    return this._currPosIdx < MOL2Data.length - 2;\r\n  }\r\n\r\n  _findNextCompoundStart(MOL2Data) {\r\n    while (this._currPosIdx < MOL2Data.length && MOL2Data[this._currPosIdx].trim() !== '@<TRIPOS>MOLECULE>') {\r\n      this._currPosIdx++;\r\n    }\r\n    this._setStart(++this._currPosIdx, MOL2Data);\r\n    return this._probablyHaveDataToParse(MOL2Data);\r\n  }\r\n\r\n  _parseMolecule(MOL2Data) {\r\n    this._toHeaderString('MOLECULE', MOL2Data);\r\n\r\n    const { metadata } = this._complex;\r\n    metadata.name = MOL2Data[++this._currPosIdx];\r\n    metadata.format = 'mol2';\r\n\r\n    this._molecule = { _index: '', _chains: [] };\r\n    this._molecule._index = this._compoundIndx + 1;\r\n    this._molecules.push(this._molecule);\r\n  }\r\n\r\n  /* Atom format description:\r\n   * atomId atomName x y z element [resSeq [resName [charge [statusBit]]]]\r\n   * statusBits is the internal SYBYL status bits associated with the atom.\r\n   * These should never be set by the user.\r\n   * Source: http://chemyang.ccnu.edu.cn/ccb/server/AIMMS/mol2.pdf\r\n   */\r\n  _parseAtoms(atomsNum, MOL2Data) {\r\n    this._toHeaderString('ATOM', MOL2Data);\r\n\r\n    for (let i = 0; i < atomsNum; i++) {\r\n      const parsedStr = splitToFields(MOL2Data[++this._currPosIdx]);\r\n\r\n      if (parsedStr.length < 6) {\r\n        throw new Error('MOL2 parsing error: Not enough information to create atom!');\r\n      }\r\n      const atomId = parseInt(parsedStr[0], 10);\r\n      const atomName = parsedStr[1];\r\n\r\n      const x = parseFloat(parsedStr[2]);\r\n      const y = parseFloat(parsedStr[3]);\r\n      const z = parseFloat(parsedStr[4]);\r\n\r\n      const element = parsedStr[5].split('.')[0].toUpperCase();\r\n\r\n      let charge = 0;\r\n      if (parsedStr.length >= 9) {\r\n        charge = parseFloat(parsedStr[8]) || 0.0;\r\n      }\r\n\r\n      let chain = this._chain;\r\n      if (!chain) {\r\n        // .mol2 may contain information about multiple molecules, but they can't be visualized\r\n        // at the same time now. There is no need to create different chain IDs then.\r\n        this._chain = chain = this._complex.getChain('A') || this._complex.addChain('A');\r\n        this._residue = null;\r\n      }\r\n      if (!this._setResidue(parsedStr)) {\r\n        continue;\r\n      }\r\n\r\n      // These fields are not listed in mol2 format. Set them default.\r\n      // Atoms and het atoms doesn't differ in .mol2,\r\n      // but het atoms have special residues. It can be used in next updates\r\n      const het = false;\r\n      const altLoc = ' ';\r\n      const occupancy = 1.0;\r\n      const tempFactor = 0.0;\r\n      const type = Element.getByName(element);\r\n      const role = Element.Role[atomName];\r\n\r\n      const xyz = new THREE.Vector3(x, y, z);\r\n      this._residue.addAtom(atomName, type, xyz, role, het, atomId, altLoc, occupancy, tempFactor, charge);\r\n    }\r\n  }\r\n\r\n  _setResidue(parsedStr) {\r\n    let resSeq = 1;\r\n    let resName = 'UNK'; // The same meaning has '<0>' in some mol2 files\r\n\r\n    if (parsedStr.length >= 7) {\r\n      resSeq = parseInt(parsedStr[6], 10);\r\n    }\r\n    if (parsedStr.length >= 8 && parsedStr[7] !== '<0>') {\r\n      resName = parsedStr[7].replace(resNumberRegex, '');\r\n    }\r\n    if (this.settings.now.nowater) {\r\n      if (resName === 'HOH' || resName === 'WAT') {\r\n        return false;\r\n      }\r\n    }\r\n    const residue = this._residue;\r\n    const chain = this._chain;\r\n    if (!residue || residue.getSequence() !== resSeq) {\r\n      this._residue = chain.addResidue(resName, resSeq, 'A');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /* Bond format description\r\n   * bondId originAtomId targetAtomId bondType [statusBits]\r\n   */\r\n  _parseBonds(bondsNum, MOL2Data) {\r\n    this._toHeaderString('BOND', MOL2Data);\r\n\r\n    for (let i = 0; i < bondsNum; i++) {\r\n      const parsedStr = splitToFields(MOL2Data[++this._currPosIdx]);\r\n\r\n      if (parsedStr.length < 3) {\r\n        throw new Error('MOL2 parsing error: Missing information about bonds!');\r\n      }\r\n\r\n      let originAtomId = parseInt(parsedStr[1], 10);\r\n      let targetAtomId = parseInt(parsedStr[2], 10);\r\n      const bondType = parsedStr[3];\r\n\r\n      if (originAtomId > targetAtomId) {\r\n        [originAtomId, targetAtomId] = [targetAtomId, originAtomId];\r\n      }\r\n      this._complex.addBond(\r\n        originAtomId,\r\n        targetAtomId,\r\n        orderMap[bondType] || 0,\r\n        typeMap[bondType] || Bond.BondType.UNKNOWN,\r\n        true,\r\n      );\r\n    }\r\n  }\r\n\r\n  _fixSerialAtoms() {\r\n    const atoms = this._complex._atoms;\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const atom = atoms[i];\r\n      this._serialAtomMap[atom.serial] = atom;\r\n    }\r\n  }\r\n\r\n  _fixBondsArray() {\r\n    const serialAtomMap = this._serialAtomMap;\r\n    const complex = this._complex;\r\n\r\n    if (Object.keys(serialAtomMap).length === 0) {\r\n      throw new Error('MOL2 parsing error: Missing atom information!');\r\n    }\r\n\r\n    const bonds = complex._bonds;\r\n    for (let j = 0; j < bonds.length; j++) {\r\n      const bond = bonds[j];\r\n      bond._left = serialAtomMap[bond._left] || null;\r\n      bond._right = serialAtomMap[bond._right] || null;\r\n    }\r\n  }\r\n\r\n  _finalizeMolecules() {\r\n    // Get chain from complex\r\n    const chain = this._complex._chains[0];\r\n    this._complex._molecules = [];\r\n\r\n    // Aggregate residues from chains\r\n    // (to be precise from the chain 'A')\r\n    for (let i = 0; i < this._molecules.length; i++) {\r\n      const currMolecule = this._molecules[i];\r\n      const molResidues = chain._residues;\r\n      const molecule = new Molecule(this._complex, currMolecule._name, i + 1);\r\n      molecule.residues = molResidues;\r\n      this._complex._molecules[i] = molecule;\r\n    }\r\n  }\r\n\r\n  _finalize() {\r\n    this._complex._finalizeBonds();\r\n    this._fixSerialAtoms();\r\n    this._fixBondsArray();\r\n    this._finalizeMolecules();\r\n\r\n    this._complex.finalize({\r\n      needAutoBonding: false,\r\n      detectAromaticLoops: this.settings.now.aromatic,\r\n      enableEditing: this.settings.now.editing,\r\n      serialAtomMap: this._serialAtomMap,\r\n    });\r\n  }\r\n\r\n  _parseCompound(MOL2Data) {\r\n    this._compoundIndx++;\r\n    this._parseMolecule(MOL2Data);\r\n\r\n    // Ignoring comments and everything before @<TRIPOS>MOLECULE block\r\n    this._toStringFromHeader('MOLECULE', 2, MOL2Data);\r\n\r\n    const parsedStr = MOL2Data[this._currPosIdx].trim().split(spacesRegex);\r\n    const atomsNum = parsedStr[0];\r\n    const bondsNum = parsedStr[1];\r\n\r\n    this._parseAtoms(atomsNum, MOL2Data);\r\n    this._parseBonds(bondsNum, MOL2Data);\r\n  }\r\n\r\n  parseSync() {\r\n    const result = this._complex = new Complex();\r\n    const MOL2Data = this._parseRawStrings(this._data);\r\n    do {\r\n      this._parseCompound(MOL2Data);\r\n    } while (this._findNextCompoundStart(MOL2Data));\r\n\r\n    this._finalize();\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nMOL2Parser.formats = ['mol2'];\r\nMOL2Parser.extensions = ['.mol2', '.ml2', '.sy2'];\r\n\r\nexport default MOL2Parser;\r\n","import ParserList from './parsers/ParserList';\r\n\r\nimport PDBParser from './parsers/PDBParser';\r\nimport CMLParser from './parsers/CMLParser';\r\nimport MMTFParser from './parsers/MMTFParser';\r\nimport CIFParser from './parsers/CIFParser';\r\nimport CCP4Parser from './parsers/CCP4Parser';\r\nimport XYZParser from './parsers/XYZParser';\r\nimport PubChemParser from './parsers/PubChemParser';\r\nimport SDFParser from './parsers/SDFParser';\r\nimport DSN6Parser from './parsers/DSN6Parser';\r\nimport GROParser from './parsers/GROParser';\r\nimport MOL2Parser from './parsers/MOL2Parser';\r\n\r\nexport default new ParserList([\r\n  // note: order might be important\r\n  PDBParser,\r\n  CIFParser,\r\n  MMTFParser,\r\n  XYZParser,\r\n  CMLParser,\r\n  PubChemParser,\r\n  SDFParser,\r\n  CCP4Parser,\r\n  DSN6Parser,\r\n  GROParser,\r\n  MOL2Parser,\r\n]);\r\n","import EntityList from '../../utils/EntityList';\r\n\r\n/**\r\n * A list of available exporters.\r\n * @extends EntityList\r\n */\r\nclass ExporterList extends EntityList {\r\n  /**\r\n   * Create a list of exporters.\r\n   * The exporters are indexed by supported data formats (`.formats` and\r\n   * `.extensions` properties of a Exporter subclass).\r\n   * The Exporters can be retrieved later by matching against specs (see {@link ExporterList#find}).\r\n   *\r\n   * @param {!Array<function(new:Exporter)>=} someExporters A list of {@link Exporter} subclasses to\r\n   *   automatically register at creation time.\r\n   * @see ExporterList#register\r\n   */\r\n  constructor(someExporters = []) {\r\n    super(someExporters, ['formats']);\r\n  }\r\n\r\n  /**\r\n   * Find a suitable exporter for data.\r\n   *\r\n   * @param {Object} specs Exporter specifications.\r\n   * @param {string=} specs.format Supported data format.\r\n   * @param {*=} specs.data Data to export.\r\n   */\r\n  find(specs) {\r\n    let list = [];\r\n    if (specs.format) {\r\n      list = this._dict.formats[specs.format.toLowerCase()] || [];\r\n    }\r\n    return [...list];\r\n  }\r\n}\r\n\r\nexport default ExporterList;\r\n","import makeContextDependent from '../../utils/makeContextDependent';\r\n\r\nexport default class Exporter {\r\n  constructor(source, options) {\r\n    this._source = source;\r\n    this._options = options || {};\r\n    this._abort = false;\r\n  }\r\n\r\n  exportSync() {\r\n    throw new Error('Exporting to this source is not implemented');\r\n  }\r\n\r\n  export() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        try {\r\n          if (this._abort) {\r\n            return reject(new Error('Export aborted'));\r\n          }\r\n          return resolve(this.exportSync());\r\n        } catch (error) {\r\n          return reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  abort() {\r\n    this._abort = true;\r\n  }\r\n}\r\n\r\nmakeContextDependent(Exporter.prototype);\r\n","import _ from 'lodash';\r\nimport { Matrix4 } from 'three';\r\n\r\nexport default class PDBResult {\r\n  constructor() {\r\n    this._resultArray = [];\r\n    this._currentStr = -1;\r\n    this._tag = null;\r\n    this._fixedNumeration = false;\r\n    this._numeration = false;\r\n    this._tagStrNum = 0;\r\n  }\r\n\r\n  getResult() {\r\n    this.writeString('\\n', 81, 81);\r\n    return this._resultArray.join('');\r\n  }\r\n\r\n  _currentStrLength() {\r\n    const curStr = this._resultArray[this._currentStr];\r\n    return curStr ? curStr.length : 0;\r\n  }\r\n\r\n  // numeration can be number or boolean\r\n  // if numeration is number then just put this number to 8-10 pos in string\r\n  // if numeration is boolean then increase number for all new strings\r\n  newTag(tag, numeration) {\r\n    if (!tag) {\r\n      this._tag = null;\r\n    } else {\r\n      this._tag = tag;\r\n    }\r\n    if (!_.isUndefined(numeration)) {\r\n      if (_.isNumber(numeration)) {\r\n        this._tagStrNum = numeration;\r\n        this._numeration = true;\r\n        this._fixedNumeration = true;\r\n      } else if (_.isBoolean(numeration)) {\r\n        this._tagStrNum = 0;\r\n        this._numeration = numeration;\r\n        this._fixedNumeration = false;\r\n      }\r\n    } else {\r\n      this._numeration = false;\r\n      this._fixedNumeration = false;\r\n      this._tagStrNum = 0;\r\n    }\r\n  }\r\n\r\n  newString(tag) {\r\n    this.writeString('\\n', 81, 81);\r\n    this._currentStr++;\r\n    this._resultArray.push('');\r\n\r\n    if (tag) {\r\n      this.writeString(tag, 1, 6);\r\n    } else if (this._tag) {\r\n      this.writeString(this._tag, 1, 6);\r\n    }\r\n\r\n    if (this._numeration) {\r\n      if (!this._fixedNumeration) {\r\n        this._tagStrNum++;\r\n      }\r\n      if (this._tagStrNum !== 1) {\r\n        this.writeString(this._tagStrNum.toString(), 10, 8);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeEntireString(string, maxStrPos, concat) {\r\n    if (!maxStrPos) {\r\n      maxStrPos = 81;\r\n    }\r\n    for (let j = 0; j < string.length; j++) {\r\n      if (this._currentStrLength() === maxStrPos && j !== string.length - 1) {\r\n        this.newString();\r\n        if (concat) { // pretty hardcoddy\r\n          this.writeString(concat.tag, concat.begin, concat.end);\r\n        }\r\n      }\r\n      if (string[j] === '\\n') {\r\n        this.newString();\r\n      } else {\r\n        this.writeString(string[j]);\r\n      }\r\n    }\r\n  }\r\n\r\n  writeString(string, begin, end) {\r\n    let curStr = this._resultArray[this._currentStr];\r\n    let str;\r\n\r\n    const curStrLength = curStr ? curStr.length : 0;\r\n\r\n    if (_.isUndefined(string)) {\r\n      return;\r\n    }\r\n\r\n    if (!_.isNumber(begin)) {\r\n      begin = curStrLength + 1;\r\n    }\r\n\r\n    if (!_.isNumber(end)) {\r\n      end = curStrLength + string.length;\r\n    }\r\n\r\n    if (!_.isString(string)) {\r\n      str = string.toString();\r\n    } else {\r\n      str = string;\r\n    }\r\n\r\n    const finish = begin < end ? end : begin;\r\n    const start = begin < end ? begin : end;\r\n\r\n    if (str.length > Math.abs(begin - end) + 1) {\r\n      str = str.substr(0, Math.abs(begin - end + 1));\r\n    }\r\n\r\n    // spaces before start of new data\r\n    if (start > curStrLength + 1) {\r\n      this._resultArray[this._currentStr] += ' '.repeat(start - curStrLength - 1);\r\n    } else if (start <= curStrLength) {\r\n      const cStr = this._resultArray[this._currentStr];\r\n      this._resultArray[this._currentStr] = cStr.slice(0, start - 1);\r\n    }\r\n\r\n    // if reverse order\r\n    // reverse order of end and begin means that user wants to align text right\r\n    if (end < begin) {\r\n      const len = begin - end + 1;\r\n      str = ' '.repeat(len - str.length) + str;\r\n    }\r\n\r\n    // some hardcode fix for space between string numeration and data\r\n    // (see pdb file format description)\r\n    if (start === 11 && this._numeration && this._tagStrNum !== 1) {\r\n      str = ` ${str}`;\r\n    }\r\n\r\n    // append new data to string\r\n    this._resultArray[this._currentStr] += str;\r\n    curStr = this._resultArray[this._currentStr];\r\n\r\n    if (finish > curStr.length) {\r\n      this._resultArray[this._currentStr] += ' '.repeat(finish - curStr.length);\r\n    }\r\n  }\r\n\r\n  writeBondsArray(bonds, atom) {\r\n    const bondsArrays = this._getSubArrays(bonds, 4);\r\n\r\n    for (let k = 0; k < bondsArrays.length; k++) {\r\n      this.newString();\r\n      this.writeString(atom.serial, 11, 7);\r\n\r\n      for (let j = 0; j < bondsArrays[k].length; j++) {\r\n        const serial = (bondsArrays[k][j]._left.serial === atom.serial)\r\n          ? bondsArrays[k][j]._right.serial : bondsArrays[k][j]._left.serial;\r\n\r\n        this.writeString(serial, 16 + 5 * j, 12 + 5 * j);\r\n      }\r\n    }\r\n  }\r\n\r\n  _getSubArrays(arr, subArraySize) {\r\n    const subArrays = [];\r\n    for (let i = 0; i < arr.length; i += subArraySize) {\r\n      subArrays.push(arr.slice(i, i + subArraySize));\r\n    }\r\n    return subArrays;\r\n  }\r\n\r\n  // function for writing matrix in Remark290 and Remark350 tags\r\n  // (see pdb file description)\r\n  writeMatrix(matrix, matrixIndx, tag) {\r\n    for (let j = 0; j < 3; j++) {\r\n      this.newString();\r\n      this.writeString(tag, 14, 18);\r\n      this.writeString((j + 1).toString(), 19, 19);\r\n      this.writeString(matrixIndx.toString(), 23, 20);\r\n      for (let k = 0; k < 3; k++) {\r\n        const numb = parseFloat(matrix.elements[j * 4 + k]).toFixed(6);\r\n        this.writeString(numb.toString(), 33 + k * 10, 24 + k * 10);\r\n      }\r\n\r\n      const numb = parseFloat(matrix.elements[j * 4 + 3]).toFixed(5);\r\n      this.writeString(numb.toString(), 68, 55);\r\n    }\r\n  }\r\n\r\n  writeMatrices(matrices, string) {\r\n    if (!matrices) {\r\n      return;\r\n    }\r\n    const matrix = new Matrix4();\r\n    for (let j = 0; j < matrices.length; j++) {\r\n      matrix.copy(matrices[j]).transpose();\r\n      this.writeMatrix(matrix, j + 1, string);\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport Complex from '../../chem/Complex';\r\nimport Exporter from './Exporter';\r\nimport PDBResult from './PDBResult';\r\nimport Assembly from '../../chem/Assembly';\r\nimport { typeByPDBHelixClass } from '../../chem/Helix';\r\n\r\nexport default class PDBExporter extends Exporter {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n    this._tags = ['HEADER', 'TITLE', 'COMPND', 'REMARK', 'HELIX', 'SHEET', 'ATOM and HETATM', 'CONECT'];\r\n    this._result = null;\r\n    this._tagExtractors = {\r\n      HEADER: this._extractHEADER,\r\n      TITLE: this._extractTITLE,\r\n      'ATOM and HETATM': this._extractATOM,\r\n      CONECT: this._extractCONECT,\r\n      COMPND: this._extractCOMPND,\r\n      REMARK: this._extractREMARK,\r\n      HELIX: this._extractHELIX,\r\n      SHEET: this._extractSHEET,\r\n    };\r\n    this._stringForRemark350 = 'COORDINATES FOR A COMPLETE MULTIMER REPRESENTING THE KNOWN\\n'\r\n                             + 'BIOLOGICALLY SIGNIFICANT OLIGOMERIZATION STATE OF THE\\n'\r\n                             + 'MOLECULE CAN BE GENERATED BY APPLYING BIOMT TRANSFORMATIONS\\n'\r\n                             + 'GIVEN BELOW.  BOTH NON-CRYSTALLOGRAPHIC AND\\n'\r\n                             + 'CRYSTALLOGRAPHIC OPERATIONS ARE GIVEN.';\r\n\r\n    this._stringForRemark290 = 'CRYSTALLOGRAPHIC SYMMETRY TRANSFORMATIONS\\n'\r\n                             + 'THE FOLLOWING TRANSFORMATIONS OPERATE ON THE ATOM/HETATM\\n'\r\n                             + 'RECORDS IN THIS ENTRY TO PRODUCE CRYSTALLOGRAPHICALLY\\n'\r\n                             + 'RELATED MOLECULES.';\r\n  }\r\n\r\n  exportSync() {\r\n    const result = new PDBResult();\r\n    if (!this._source) {\r\n      return this._result;\r\n    }\r\n\r\n    for (let i = 0; i < this._tags.length; i++) {\r\n      const tag = this._tags[i];\r\n      const func = this._tagExtractors[tag];\r\n      if (_.isFunction(func)) {\r\n        func.call(this, result);\r\n      }\r\n    }\r\n\r\n    this._result = result.getResult();\r\n\r\n    return this._result;\r\n  }\r\n\r\n  _extractHEADER(result) {\r\n    if (!this._source.metadata) {\r\n      return;\r\n    }\r\n    const { metadata } = this._source;\r\n    result.newTag('HEADER');\r\n    result.newString();\r\n    if (metadata.classification) {\r\n      result.writeString(metadata.classification, 11, 50);\r\n    }\r\n    if (metadata.date) {\r\n      result.writeString(metadata.date, 51, 59);\r\n    }\r\n    if (metadata.id) {\r\n      result.writeString(metadata.id, 63, 66);\r\n    }\r\n  }\r\n\r\n  _extractTITLE(result) {\r\n    if (!this._source.metadata) {\r\n      return;\r\n    }\r\n    const { metadata } = this._source;\r\n    if (!metadata.title) {\r\n      return;\r\n    }\r\n    result.newTag('TITLE', true);\r\n    for (let i = 0; i < metadata.title.length; i++) {\r\n      result.newString();\r\n      result.writeString(metadata.title[i], 11, 80);\r\n    }\r\n  }\r\n\r\n  _extractCONECT(result) {\r\n    if (!this._source._atoms) {\r\n      return;\r\n    }\r\n\r\n    const atoms = this._source._atoms;\r\n    result.newTag('CONECT');\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const fixedBonds = atoms[i].bonds.filter((bond) => bond._fixed);\r\n      if (fixedBonds.length !== 0) {\r\n        result.writeBondsArray(fixedBonds.reverse(), atoms[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractSHEET(result) {\r\n    if (!this._source._sheets) {\r\n      return;\r\n    }\r\n\r\n    result.newTag('SHEET');\r\n\r\n    const sheets = this._source._sheets;\r\n    for (let i = 0; i < sheets.length; i++) {\r\n      if (sheets[i]._strands) {\r\n        const strands = sheets[i]._strands;\r\n        for (let j = 0; j < strands.length; j++) {\r\n          result.newString();\r\n          result.writeString(j + 1, 10, 8);\r\n          result.writeString(sheets[i]._name, 14, 12);\r\n          result.writeString(strands.length, 16, 15);\r\n          result.writeString(strands[j].init._type._name, 18, 20);\r\n          result.writeString(strands[j].init._chain._name, 22, 22);\r\n          result.writeString(strands[j].init._sequence, 26, 23);\r\n          result.writeString(strands[j].init._icode, 27, 27);\r\n          result.writeString(strands[j].term._type._name, 29, 31);\r\n          result.writeString(strands[j].init._chain._name, 33, 33);\r\n          result.writeString(strands[j].term._sequence, 37, 34);\r\n          result.writeString(strands[j].term._icode, 38, 38);\r\n          result.writeString(strands[j].sense, 40, 39);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractHELIX(result) {\r\n    if (!this._source._helices) {\r\n      return;\r\n    }\r\n\r\n    result.newTag('HELIX');\r\n    const helices = this._source._helices;\r\n    for (let i = 0; i < helices.length; i++) {\r\n      const helix = helices[i];\r\n      const helixClass = _.invert(typeByPDBHelixClass);\r\n      result.newString();\r\n      result.writeString(helix.serial, 10, 8);\r\n      result.writeString(helix.name, 14, 12);\r\n      result.writeString(helix.init._type._name, 16, 18);\r\n      result.writeString(helix.init._chain._name, 20, 20);\r\n      result.writeString(helix.init._sequence, 25, 22);\r\n      result.writeString(helix.init._icode, 26, 26);\r\n      result.writeString(helix.term._type._name, 28, 30);\r\n      result.writeString(helix.term._chain._name, 32, 32);\r\n      result.writeString(helix.term._sequence, 37, 34);\r\n      result.writeString(helix.term._icode, 38, 38);\r\n      result.writeString(helixClass[helix.type], 40, 39);\r\n      result.writeString(helix.comment, 41, 70);\r\n      result.writeString(helix.length, 76, 72);\r\n    }\r\n  }\r\n\r\n  _extractATOM(result) {\r\n    if (!this._source._atoms) {\r\n      return;\r\n    }\r\n    const atoms = this._source._atoms;\r\n\r\n    for (let i = 0; i < atoms.length; i++) {\r\n      const tag = atoms[i].het ? 'HETATM' : 'ATOM';\r\n      result.newString(tag);\r\n      const startIndx = (atoms[i].element.name.length > 1 || atoms[i].name.length > 3) ? 13 : 14;\r\n      result.writeString(atoms[i].serial, 11, 7);\r\n      result.writeString(atoms[i].name, startIndx, 16);\r\n      result.writeString(String.fromCharCode(atoms[i].location), 17, 17);\r\n      result.writeString(atoms[i].residue._type._name, 20, 18);\r\n      result.writeString(atoms[i].residue._chain._name, 22, 22);\r\n      result.writeString(atoms[i].residue._sequence, 26, 23);\r\n      result.writeString(atoms[i].residue._icode, 27, 27);\r\n      result.writeString(atoms[i].position.x.toFixed(3), 38, 31);\r\n      result.writeString(atoms[i].position.y.toFixed(3), 46, 39);\r\n      result.writeString(atoms[i].position.z.toFixed(3), 54, 47);\r\n      result.writeString(atoms[i].occupancy.toFixed(2), 60, 55);\r\n      result.writeString(atoms[i].temperature.toFixed(2), 66, 61);\r\n      result.writeString(atoms[i].element.name, 78, 77);\r\n      if (atoms[i].charge) {\r\n        result.writeString(atoms[i].charge, 79, 80);\r\n      }\r\n    }\r\n  }\r\n\r\n  _extractCOMPND(result) {\r\n    if (!this._source._molecules) {\r\n      return;\r\n    }\r\n    const molecules = this._source._molecules;\r\n    result.newTag('COMPND', true);\r\n\r\n    for (let i = 0; i < molecules.length; i++) {\r\n      const chains = this._getMoleculeChains(molecules[i]);\r\n      result.newString();\r\n      result.writeString(`MOL_ID: ${molecules[i].index};`, 11, 80);\r\n      result.newString();\r\n      result.writeString(`MOLECULE: ${molecules[i].name};`, 11, 80);\r\n      result.newString();\r\n      result.writeString('CHAIN: ', 11, 18);\r\n      const chainsString = `${chains.join(', ')};`;\r\n      result.writeEntireString(chainsString, 81);\r\n    }\r\n  }\r\n\r\n  _extractREMARK(result) {\r\n    this._Remark290(result);\r\n    this._Remark350(result);\r\n  }\r\n\r\n  _Remark290(result) {\r\n    if (!this._source.symmetry) {\r\n      return;\r\n    }\r\n\r\n    if (this._source.symmetry.length !== 0) {\r\n      const matrices = this._source.symmetry;\r\n      result.newTag('REMARK', 290);\r\n      result.newString();\r\n      result.newString();\r\n      result.writeEntireString(this._stringForRemark290);\r\n      result.writeMatrices(matrices, 'SMTRY');\r\n      result.newString();\r\n      result.newString();\r\n      result.writeString('REMARK: NULL', 11, 80);\r\n    }\r\n  }\r\n\r\n  _Remark350(result) {\r\n    if (!this._source.units) {\r\n      return;\r\n    }\r\n    const { units } = this._source;\r\n    let biomolIndx = 0;\r\n\r\n    result.newTag('REMARK', 350);\r\n    result.newString();\r\n    result.newString();\r\n    result.writeEntireString(this._stringForRemark350);\r\n\r\n    const assemblies = units.filter((unit) => unit instanceof Assembly);\r\n\r\n    for (let i = 0; i < assemblies.length; i++) {\r\n      result.newString();\r\n      result.newString();\r\n      biomolIndx++;\r\n      result.writeString(`BIOMOLECULE: ${biomolIndx}`, 11, 80);\r\n      const chains = assemblies[i].chains.join(', ');\r\n      result.newString();\r\n      result.writeString('APPLY THE FOLLOWING TO CHAINS: ');\r\n      result.writeEntireString(chains, 69, { tag: 'AND CHAINS: ', begin: 31, end: 42 });\r\n\r\n      const { matrices } = assemblies[i];\r\n      result.writeMatrices(matrices, 'BIOMT');\r\n    }\r\n  }\r\n\r\n  _getMoleculeChains(molecule) {\r\n    function getChainName(residue) {\r\n      return residue._chain._name;\r\n    }\r\n    const chainNames = molecule.residues.map(getChainName);\r\n    return chainNames.filter((item, pos) => chainNames.indexOf(item) === pos);\r\n  }\r\n}\r\n\r\nPDBExporter.formats = ['pdb'];\r\nPDBExporter.SourceClass = Complex;\r\n","import * as THREE from 'three';\r\n\r\nconst FBX_POS_SIZE = 3;\r\nconst FBX_NORM_SIZE = 3;\r\nconst FBX_COL_SIZE = 4;\r\n\r\nfunction copyFbxPoint3(src, srcIdx, dst, dstIdx) {\r\n  dst[dstIdx] = src[srcIdx];\r\n  dst[dstIdx + 1] = src[srcIdx + 1];\r\n  dst[dstIdx + 2] = src[srcIdx + 2];\r\n}\r\n\r\nfunction copyFbxPoint4(src, srcIdx, dst, dstIdx, value) {\r\n  dst[dstIdx] = src[srcIdx];\r\n  dst[dstIdx + 1] = src[srcIdx + 1];\r\n  dst[dstIdx + 2] = src[srcIdx + 2];\r\n  dst[dstIdx + 3] = value;\r\n}\r\n\r\nconst vector4 = new THREE.Vector4();\r\nfunction copyTransformedPoint3(src, srcIdx, dst, dstIdx, opts) {\r\n  vector4.set(src[srcIdx], src[srcIdx + 1], src[srcIdx + 2], opts.w);\r\n  vector4.applyMatrix4(opts.matrix);\r\n  dst[dstIdx] = vector4.x;\r\n  dst[dstIdx + 1] = vector4.y;\r\n  dst[dstIdx + 2] = vector4.z;\r\n}\r\n\r\nfunction setSubArray(src, dst, count, copyFunctor, functorOpts) {\r\n  if ((dst.array.length - dst.start) / dst.stride < count\r\n    || (src.array.length - src.start) / src.stride < count) {\r\n    return; // we've got no space\r\n  }\r\n  if (src.stride === dst.stride) { // stride is the same\r\n    dst.array.set(src.array, dst.start);\r\n  } else {\r\n    let idx = dst.start;\r\n    let arridx = src.start;\r\n    for (let i = 0; i < count; ++i, idx += dst.stride, arridx += src.stride) {\r\n      copyFunctor(src.array, arridx, dst.array, idx, functorOpts);\r\n    }\r\n  }\r\n}\r\n\r\nexport default class FBXModel {\r\n  constructor() {\r\n    this.positions = null;\r\n    this.normals = null;\r\n    this.colors = null;\r\n    this.indices = null;\r\n    this.lastPos = 0;\r\n    this.lastNorm = 0;\r\n    this.lastCol = 0;\r\n    this.lastIdx = 0;\r\n  }\r\n\r\n  init(vertsCount, indsCount) {\r\n    this.positions = new Float32Array(vertsCount * FBX_POS_SIZE);\r\n    this.normals = new Float32Array(vertsCount * FBX_NORM_SIZE);\r\n    this.colors = new Float32Array(vertsCount * FBX_COL_SIZE);\r\n    this.indices = new Int32Array(indsCount);\r\n  }\r\n\r\n  setPositions(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.positions,\r\n      start: this.lastPos,\r\n      stride: FBX_POS_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint3);\r\n    this.lastPos += count * FBX_POS_SIZE;\r\n  }\r\n\r\n  setTransformedPositions(array, start, count, stride, matrix) {\r\n    let idx = this.lastPos;\r\n    let arrIdx = start;\r\n    const opts = { matrix, w: 1 };\r\n    for (let i = 0; i < count; ++i, arrIdx += stride, idx += FBX_POS_SIZE) {\r\n      copyTransformedPoint3(array, arrIdx, this.positions, idx, opts);\r\n    }\r\n    this.lastPos += count * FBX_POS_SIZE;\r\n  }\r\n\r\n  setNormals(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.normals,\r\n      start: this.lastNorm,\r\n      stride: FBX_NORM_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint3);\r\n    this.lastNorm += count * FBX_NORM_SIZE;\r\n  }\r\n\r\n  setTransformedNormals(array, start, count, stride, matrix) {\r\n    let idx = this.lastNorm;\r\n    let arrIdx = start;\r\n    const opts = { matrix, w: 0 };\r\n    for (let i = 0; i < count; ++i, arrIdx += stride, idx += FBX_NORM_SIZE) {\r\n      copyTransformedPoint3(array, arrIdx, this.normals, idx, opts);\r\n    }\r\n    this.lastNorm += count * FBX_NORM_SIZE;\r\n  }\r\n\r\n  setColors(array, start, count, stride) {\r\n    const src = {\r\n      array,\r\n      start,\r\n      stride,\r\n    };\r\n    const dst = {\r\n      array: this.colors,\r\n      start: this.lastCol,\r\n      stride: FBX_COL_SIZE,\r\n    };\r\n    setSubArray(src, dst, count, copyFbxPoint4, 1);\r\n    this.lastCol += count * FBX_COL_SIZE;\r\n  }\r\n\r\n  setIndices(array, start, count) {\r\n    this.indices.set(array, this.lastIdx);\r\n    this.lastIdx += count;\r\n  }\r\n\r\n  setShiftedIndices(array, count, shift) {\r\n    const shifted = array.map((x) => x + shift);\r\n    this.setIndices(shifted, 0, count);\r\n  }\r\n\r\n  getVerticesNumber() {\r\n    return this.lastPos / FBX_POS_SIZE;\r\n  }\r\n\r\n  addInstance(matrix, geo) {\r\n    // add indices at first to take old number of vertices for shift\r\n    const currentCount = this.getVerticesNumber();\r\n    this.setShiftedIndices(geo.indices, geo.indices.length, currentCount);\r\n    // simply write vertices at empty space\r\n    const size = geo.itemSize;\r\n    this.setTransformedPositions(geo.positions, 0, geo.vertsCount, size.position, matrix);\r\n    this.setTransformedNormals(geo.normals, 0, geo.vertsCount, size.normal, matrix);\r\n    this.setColors(geo.colors, 0, geo.vertsCount, size.color);\r\n  }\r\n}\r\n","/** Base class for fbx geometry contains simply organized attributes: positions+normals+colors, indices. */\r\nexport default class FBXGeometry {\r\n  /**\r\n   * Create a base geo with necessary members.\r\n   */\r\n  constructor() {\r\n    this.positions = null;\r\n    this.normals = null;\r\n    this.colors = null;\r\n    this.indices = null;\r\n    this.vertsCount = 0;\r\n    this.itemSize = null;\r\n  }\r\n\r\n  /**\r\n   * Initialize base geo storing items info from attributes.\r\n   * @param {Object} geo - THREE.BufferGeometry.\r\n   */\r\n  init(geo, _info) {\r\n    const { attributes } = geo;\r\n    // save item size\r\n    this.itemSize = {\r\n      position: attributes.position.itemSize,\r\n      normal: attributes.normal.itemSize,\r\n      color: attributes.color.itemSize,\r\n    };\r\n  }\r\n}\r\n","import FBXGeometry from './FBXGeometry';\r\n\r\n/**\r\n * Fbx geometry, that copies positions+normals, indexes and creates colors filled with defined value.\r\n * @extends FBXGeometry\r\n */\r\nexport default class FBX1CGeometry extends FBXGeometry {\r\n  /**\r\n   * Initialize geo storing positions, normals, indices and create colors.\r\n   * @param {Object} geo - THREE.BufferGeometry.\r\n   */\r\n  init(geo, _info) {\r\n    super.init(geo, _info);\r\n    const {\r\n      attributes: {\r\n        position,\r\n        normal,\r\n      },\r\n      index,\r\n    } = geo;\r\n    // copy vertices attributes\r\n    this.vertsCount = position.count;\r\n    this.positions = position.array;\r\n    this.normals = normal.array;\r\n    // create color array\r\n    this.colors = new Float32Array(this.vertsCount * this.itemSize.color);\r\n    // indices\r\n    this.indices = index.array;\r\n  }\r\n\r\n  /**\r\n   * Set defined color for all items in color attribute\r\n   * @param {Object} color - THREE.Color.\r\n   */\r\n  setColors(color) {\r\n    let offset = 0;\r\n    for (let i = 0, l = this.colors.length, cl = this.itemSize.color; i < l; i += cl) {\r\n      this.colors[offset++] = color.r;\r\n      this.colors[offset++] = color.g;\r\n      this.colors[offset++] = color.b;\r\n    }\r\n  }\r\n}\r\n","import FBXGeometry from './FBXGeometry';\r\n\r\n/**\r\n * Fbx geometry, that copies positions+normals, indexes from cylinder  geometry and creates colors filled with two\r\n * defined values.\r\n * @extends FBXGeometry\r\n */\r\nexport default class FBX2CCylinder extends FBXGeometry {\r\n  constructor() {\r\n    super();\r\n    this._cutRawStart = 0;\r\n    this._cutRawEnd = 0;\r\n    this._facesPerSlice = 0;\r\n  }\r\n\r\n  /**\r\n   * Initialize geo by creating new attributes, because we extend number of vertices to make cylinder two-colored.\r\n   * Indices remain the same. We process open- end close-ended cylinders and consider cylinders od 2 segments\r\n   * in height ONLY.\r\n   * NOTE: cylinder consists of 2 height segments and stores parts in the order: tube, topCap, bottomCap\r\n   * @param {Object} geo - THREE.BufferGeometry.\r\n   * @param {Object} info - information needed for geo extend\r\n   */\r\n  init(geo, info) {\r\n    super.init(geo, info);\r\n    const {\r\n      attributes: {\r\n        position,\r\n      },\r\n      index,\r\n    } = geo;\r\n    // extend vertices arrays\r\n    this.vertsCount = position.count + info.addPerCylinder;\r\n    this._facesPerSlice = info.addPerCylinder;\r\n    this.positions = new Float32Array(this.vertsCount * position.itemSize);\r\n    this.normals = new Float32Array(this.vertsCount * this.itemSize.normal);\r\n    this.colors = new Float32Array(this.vertsCount * this.itemSize.color);\r\n    this._extendVertices(geo, info);\r\n    // number of indices stays the same\r\n    this.indices = new Uint32Array(index.count);\r\n    this._extendIndices(geo, info);\r\n  }\r\n\r\n  /** Extend vertex attributes to have one more slice to make sharp middle startColor-endColor line. */\r\n  _extendVertices(geo, info) {\r\n    const { position } = geo.attributes;\r\n    const { normal } = geo.attributes;\r\n    const geoParams = geo.getGeoParams();\r\n    const cutRaw = 1; // we expect cylinders of 2 segments in height => so half segment = 1\r\n    this._cutRawStart = cutRaw * geoParams.radialSegments;\r\n    this._cutRawEnd = this._cutRawStart + info.addPerCylinder;\r\n    { // write first half of cylinder\r\n      let temp = position.array.slice(0, this._cutRawEnd * position.itemSize);\r\n      this.positions.set(temp, 0);\r\n      temp = normal.array.slice(0, this._cutRawEnd * normal.itemSize);\r\n      this.normals.set(temp, 0);\r\n    }\r\n    { // write second part of cylinder\r\n      let temp = position.array.slice(this._cutRawStart * position.itemSize, position.array.length);\r\n      this.positions.set(temp, this._cutRawEnd * position.itemSize);\r\n      temp = normal.array.slice(this._cutRawStart * normal.itemSize, normal.array.length);\r\n      this.normals.set(temp, this._cutRawEnd * normal.itemSize);\r\n    }\r\n  }\r\n\r\n  /** Shift values of second part (+caps) indices by newly added vertices count. Number of faces remains the same. */\r\n  _extendIndices(geo, info) {\r\n    const { index } = geo;\r\n    const indicesPerQuad = 6; // quad = 2 triangles => 6 indices\r\n    const startToShift = info.addPerCylinder * indicesPerQuad;\r\n    const shift = info.addPerCylinder;\r\n    let shifted = index.array.slice(startToShift, index.count);\r\n    shifted = shifted.map((x) => x + shift); // shift only the endings\r\n    this.indices.set(index.array, 0);\r\n    this.indices.set(shifted, startToShift);\r\n  }\r\n\r\n  /**\r\n   * Set defined colors: (first part + bottom cap), (second part + top cap)\r\n   * @param {number} start - start color index\r\n   * @param {number} end - start color index\r\n   * @param {array} array - array of colors\r\n   * @param {array} color - color value components\r\n   */\r\n  _setColorRange(start, end, array, color) {\r\n    const colorSize = color.length;\r\n    for (let i = start; i < end; i += colorSize) {\r\n      array.set(color, i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set defined colors: (first part + bottom cap), (second part + top cap)\r\n   * @param {Object} color1 - THREE.Color.\r\n   * @param {Object} color2 - THREE.Color.\r\n   */\r\n  setColors(color1, color2) {\r\n    const colorSize = this.itemSize.color;\r\n    const part1End = this._cutRawEnd * colorSize;\r\n    const part2End = part1End * 2;\r\n    this._setColorRange(0, part1End, this.colors, color1.toArray());\r\n    this._setColorRange(part1End, part2End, this.colors, color2.toArray());\r\n    if (part2End < this.colors.length) { // cylinder has caps, lets paint them\r\n      const capSize = (this._facesPerSlice + 1) * colorSize;\r\n      const cap1End = part2End + capSize;\r\n      this._setColorRange(part2End, cap1End, this.colors, color2.toArray());\r\n      const cap2End = cap1End + capSize; // should be equal to this.colors.length;\r\n      this._setColorRange(cap1End, cap2End, this.colors, color1.toArray());\r\n    }\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport * as THREE from 'three';\r\n\r\nimport utils from '../../../utils';\r\nimport gfxutils from '../../../gfx/gfxutils';\r\nimport logger from '../../../utils/logger';\r\n\r\nimport FBXModel from './FBXModel';\r\nimport ThickLineMesh from '../../../gfx/meshes/ThickLineMesh';\r\nimport ZSpriteMesh from '../../../gfx/meshes/ZSpriteMesh';\r\nimport InstancedSpheresGeometry from '../../../gfx/geometries/InstancedSpheresGeometry';\r\nimport Instanced2CCylindersGeometry from '../../../gfx/geometries/Instanced2CCylindersGeometry';\r\nimport FBX1CGeometry from './FBX1CGeometry';\r\nimport FBX2CCylinder from './FBX2CCylinder';\r\n\r\nexport default class FBXInfoExtractor {\r\n  constructor() {\r\n    this._materials = [];\r\n    this._models = [];\r\n  }\r\n\r\n  process(data) {\r\n    this._extractModelsAndMaterials(data);\r\n    const models = this._flattenModels();\r\n\r\n    return {\r\n      name: data.name,\r\n      models,\r\n      materials: this._materials,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Extract fbx object information from ComplexVisual\r\n   * @param {object} data - complexVisual to get geometry info from\r\n   */\r\n  _extractModelsAndMaterials(data) {\r\n    const layersOfInterest = new THREE.Layers();\r\n    layersOfInterest.set(gfxutils.LAYERS.DEFAULT);\r\n    layersOfInterest.enable(gfxutils.LAYERS.TRANSPARENT);\r\n    data.traverse((object) => {\r\n      if (object instanceof THREE.Mesh && object.layers.test(layersOfInterest) && this.checkExportAbility(object)) {\r\n        if (object.geometry.type === 'InstancedBufferGeometry') {\r\n          this._collectInstancedGeoInfo(object);\r\n        } else {\r\n          this._collectGeoInfo(object);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reworking indices buffer, see https://banexdevblog.wordpress.com/2014/06/23/a-quick-tutorial-about-the-fbx-ascii-format/\r\n   * basically, every triangle in Miew has been represented hat way (e.g.) : 0,1,7, but we must (for FBX) rework that\r\n   * into: 0,1,-8.\r\n   * @param {array} indices - belongs to [0, maxVertIndex]\r\n   */\r\n  _reworkIndices(indices) {\r\n    const faceSize = 3;\r\n    for (let i = faceSize - 1; i < indices.length; i += faceSize) {\r\n      indices[i] *= -1;\r\n      indices[i]--;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Combine geometry from several models having the same material into one Model and finally prepare indices\r\n    * @returns {array} models, combined by material id\r\n   */\r\n  _flattenModels() {\r\n    let overallVertsCount = 0;\r\n    function shift(x) {\r\n      return x + overallVertsCount;\r\n    }\r\n    const combined = [];\r\n    // flatten models geometry\r\n    for (let i = 0, n = this._models.length; i < n; i++) {\r\n      const models = this._models[i];\r\n      let indices = [];\r\n      let positions = [];\r\n      let normals = [];\r\n      let colors = [];\r\n      // reorganize every attributes as array of arrays\r\n      overallVertsCount = 0;\r\n      for (let j = 0; j < models.length; j++) {\r\n        const m = models[j];\r\n        indices.push(m.indices.map(shift));\r\n        overallVertsCount += m.getVerticesNumber();\r\n        positions.push(m.positions);\r\n        normals.push(m.normals);\r\n        colors.push(m.colors);\r\n      }\r\n      // join all subarrays into one\r\n      indices = utils.mergeTypedArraysUnsafe(indices);\r\n      this._reworkIndices(indices);\r\n      positions = utils.mergeTypedArraysUnsafe(positions);\r\n      normals = utils.mergeTypedArraysUnsafe(normals);\r\n      colors = utils.mergeTypedArraysUnsafe(colors);\r\n      combined.push({\r\n        indices,\r\n        positions,\r\n        normals,\r\n        colors,\r\n        verticesCount: overallVertsCount,\r\n      });\r\n    }\r\n    return combined;\r\n  }\r\n\r\n  /**\r\n   * Check ability to export the kind of mesh.\r\n   * @param {object} mesh - given mesh to check\r\n   * @returns {boolean} result of check\r\n   */\r\n  checkExportAbility(mesh) {\r\n    // check mesh on not being empty\r\n    if (mesh.geometry.attributes.position.count === 0) {\r\n      return false;\r\n    }\r\n    // check type of mesh\r\n    // if (mesh.geometry.isInstancedBufferGeometry && settings.now.zSprites) {\r\n    if (mesh instanceof ZSpriteMesh) {\r\n      logger.warn('Currently we cannot export \\'sprites\\' modes, like BS, WV, LC. Please turn of settings \\'zSprites\\' and try again');\r\n      return false;\r\n    }\r\n    if (mesh instanceof ThickLineMesh) {\r\n      logger.warn('Currently we cannot export Lines mode');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Save geometry info from common mesh, like Surface or Cartoon\r\n   */\r\n  _collectGeoInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n          normal,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const vertCount = position.count;\r\n    model.init(vertCount, index.count);\r\n    if (matrix.isIdentity()) {\r\n      model.setPositions(position.array, 0, vertCount, position.itemSize);\r\n      model.setNormals(normal.array, 0, vertCount, normal.itemSize);\r\n    } else {\r\n      model.setTransformedPositions(position.array, 0, vertCount, position.itemSize, matrix);\r\n      model.setTransformedNormals(normal.array, 0, vertCount, normal.itemSize, matrix);\r\n    }\r\n    model.setColors(color.array, 0, vertCount, color.itemSize);\r\n    model.setIndices(index.array, 0, index.count);\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Collect instanced spheres geometry and materials.\r\n   * @param {object} mesh - mesh with instanced spheres info\r\n   */\r\n  _collectSpheresInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const instCount = mesh.geometry.instanceCount;\r\n    const vertCount = position.count;\r\n    const indsCount = index.count;\r\n    model.init(instCount * vertCount, instCount * indsCount);\r\n    const geo = new FBX1CGeometry();\r\n    geo.init(mesh.geometry);\r\n    const instMatrix = new THREE.Matrix4();\r\n    const objMatrix = new THREE.Matrix4();\r\n    const sphereColor = new THREE.Color();\r\n    for (let instanceIndex = 0; instanceIndex < instCount; ++instanceIndex) {\r\n      // update colors in geometry\r\n      const colorIdx = instanceIndex * color.itemSize;\r\n      sphereColor.fromArray(color.array, colorIdx);\r\n      geo.setColors(sphereColor);\r\n      // add instance to the model\r\n      this._getSphereInstanceMatrix(mesh.geometry, instanceIndex, instMatrix);\r\n      objMatrix.multiplyMatrices(matrix, instMatrix);\r\n      model.addInstance(objMatrix, geo);\r\n    }\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Getting all instanced cylinders from given mesh.\r\n   * Divide cylinder (add additional vertexes) for prettiness therefore algorithm is a bit complicated\r\n   * @param {object} mesh - given mesh with instanced cylinders\r\n   */\r\n  _collectCylindersInfo(mesh) {\r\n    const {\r\n      geometry: {\r\n        attributes: {\r\n          position,\r\n          color,\r\n          color2,\r\n        },\r\n        index,\r\n      },\r\n      matrix,\r\n    } = mesh;\r\n\r\n    const model = new FBXModel();\r\n    const instCount = mesh.geometry.instanceCount;\r\n    const oneCCylinder = new FBX1CGeometry();\r\n    oneCCylinder.init(mesh.geometry);\r\n    const splittingInfo = this._gatherCylindersColoringInfo(mesh.geometry);\r\n    let twoCCylinder = null;\r\n    if (splittingInfo.needToSplit > 0) {\r\n      twoCCylinder = new FBX2CCylinder();\r\n      twoCCylinder.init(mesh.geometry, splittingInfo);\r\n    }\r\n    const additionalVertsCount = splittingInfo.addPerCylinder * splittingInfo.needToSplit;\r\n    const vertCount = position.count;\r\n    const indsCount = index.count;\r\n    model.init(instCount * vertCount + additionalVertsCount, instCount * indsCount);\r\n    const instMatrix = new THREE.Matrix4();\r\n    const objMatrix = new THREE.Matrix4();\r\n    const colorStart = new THREE.Color();\r\n    const colorEnd = new THREE.Color();\r\n    let geo = {};\r\n    for (let instanceIndex = 0; instanceIndex < instCount; ++instanceIndex) {\r\n      // update colors in geometry\r\n      const colorIdx = instanceIndex * color.itemSize;\r\n      if (splittingInfo.is2Colored[instanceIndex]) {\r\n        // .color2 contains starting color, and .color contains starting color (see uber.frag ATTR_COLOR2)\r\n        colorStart.fromArray(color2.array, colorIdx);\r\n        colorEnd.fromArray(color.array, colorIdx);\r\n        if (twoCCylinder) {\r\n          twoCCylinder.setColors(colorStart, colorEnd);\r\n          geo = twoCCylinder;\r\n        }\r\n      } else {\r\n        // has one color per cylinder\r\n        colorStart.fromArray(color.array, colorIdx);\r\n        oneCCylinder.setColors(colorStart);\r\n        geo = oneCCylinder;\r\n      }\r\n      // add instance to the model\r\n      this._getCylinderInstanceMatrix(mesh.geometry, instanceIndex, instMatrix);\r\n      objMatrix.multiplyMatrices(matrix, instMatrix);\r\n      model.addInstance(objMatrix, geo);\r\n    }\r\n    const material = this._collectMaterialInfo(mesh);\r\n    this._addToPool(model, material);\r\n  }\r\n\r\n  /**\r\n   * Adding model to pool of models or extend existing ones\r\n   * @param {object} model - model to add\r\n   * @param {object} material - material to add\r\n   */\r\n  _addToPool(model, material) {\r\n    const materialIdx = this._checkExistingMaterial(material);\r\n    if (materialIdx < 0) { // new model-material pair\r\n      this._models.push([model]);\r\n      this._materials.push(material);\r\n    } else { // add model to existing model-material pair\r\n      const models = this._models[materialIdx];\r\n      models.push(model);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checking if given material already was registered in materials pool (no need to create new one)\r\n   * @param {object} material - given material\r\n   * @returns {number} number of model-material pair\r\n   */\r\n  _checkExistingMaterial(material) {\r\n    return _.findIndex(this._materials, (m) => _.isEqual(m, material));\r\n  }\r\n\r\n  _gatherCylindersColoringInfo(geo) {\r\n    const instCount = geo.instanceCount;\r\n    const color1 = geo.attributes.color.array;\r\n    const color2 = geo.attributes.color2.array;\r\n    const stride = geo.attributes.color.itemSize;\r\n    const is2Colored = new Array(instCount);\r\n    // analyze color instance attributes\r\n    let needToSplit = 0;\r\n    let colIdx = 0;\r\n    for (let i = 0; i < instCount; i++, colIdx += stride) {\r\n      const differs = (Math.abs(color1[colIdx] - color2[colIdx]) > 0.0000001) // compare ending colors\r\n        || (Math.abs(color1[colIdx + 1] - color2[colIdx + 1]) > 0.0000001)\r\n        || (Math.abs(color1[colIdx + 2] - color2[colIdx + 2]) > 0.0000001);\r\n      is2Colored[i] = differs;\r\n      needToSplit += differs; // count number of 2-colored cylinders\r\n    }\r\n    // calc number of vertices to add into 2-colored\r\n    const geoParams = geo.getGeoParams();\r\n    const addPerCylinder = geoParams.radialSegments;\r\n    return { is2Colored, needToSplit, addPerCylinder };\r\n  }\r\n\r\n  /**\r\n   * Collect instanced models and materials.\r\n   * @param {object} mesh - given mesh with instanced something (spheres or cylinders)\r\n   */\r\n  _collectInstancedGeoInfo(mesh) {\r\n    if (mesh.geometry instanceof InstancedSpheresGeometry) {\r\n      this._collectSpheresInfo(mesh);\r\n    } else if (mesh.geometry instanceof Instanced2CCylindersGeometry) {\r\n      this._collectCylindersInfo(mesh);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Collect Material info from given mesh.\r\n   * @param {object} mesh - given mesh with material info\r\n   * @returns {object} material\r\n   */\r\n  _collectMaterialInfo(mesh) {\r\n    const { uberOptions } = mesh.material;\r\n    return ({\r\n      diffuse: uberOptions.diffuse.toArray(),\r\n      opacity: uberOptions.opacity,\r\n      shininess: uberOptions.shininess,\r\n      specular: uberOptions.specular.toArray(),\r\n    });\r\n  }\r\n\r\n  _getCylinderInstanceMatrix(geo, instIdx, matrix) {\r\n    const matVector1 = geo.attributes.matVector1.array;\r\n    const matVector2 = geo.attributes.matVector2.array;\r\n    const matVector3 = geo.attributes.matVector3.array;\r\n    const idxOffset = instIdx * 4; // used 4 because offset arrays are stored in quads\r\n    matrix.set(\r\n      matVector1[idxOffset],\r\n      matVector1[idxOffset + 1],\r\n      matVector1[idxOffset + 2],\r\n      matVector1[idxOffset + 3],\r\n      matVector2[idxOffset],\r\n      matVector2[idxOffset + 1],\r\n      matVector2[idxOffset + 2],\r\n      matVector2[idxOffset + 3],\r\n      matVector3[idxOffset],\r\n      matVector3[idxOffset + 1],\r\n      matVector3[idxOffset + 2],\r\n      matVector3[idxOffset + 3],\r\n      0,\r\n      0,\r\n      0,\r\n      1,\r\n    );\r\n  }\r\n\r\n  _getSphereInstanceMatrix(geo, instIdx, matrix) {\r\n    const { offset } = geo.attributes;\r\n    const idx = instIdx * offset.itemSize;\r\n    const x = offset.array[idx];\r\n    const y = offset.array[idx + 1];\r\n    const z = offset.array[idx + 2];\r\n    const scale = offset.array[idx + 3];\r\n    matrix.set(\r\n      scale,\r\n      0,\r\n      0,\r\n      x,\r\n      0,\r\n      scale,\r\n      0,\r\n      y,\r\n      0,\r\n      0,\r\n      scale,\r\n      z,\r\n      0,\r\n      0,\r\n      0,\r\n      1,\r\n    );\r\n  }\r\n}\r\n","// Forming default definitions block\r\nconst defaultDefinitions = `\r\nDefinitions:  {\r\n  Version: 100\r\n  Count: 3\r\n  ObjectType: \"Model\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Geometry\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Material\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"Pose\" {\r\n    Count: 1\r\n  }\r\n  ObjectType: \"GlobalSettings\" {\r\n    Count: 1\r\n  }\r\n} `;\r\n\r\n// Default model properties\r\nconst defaultProperties = `Properties60: {\r\n      Property: \"QuaternionInterpolate\", \"bool\", \"\",0\r\n      Property: \"Visibility\", \"Visibility\", \"A\",1\r\n      Property: \"Lcl Translation\", \"Lcl Translation\", \"A\",0.000000000000000,0.000000000000000,-1789.238037109375000\r\n      Property: \"Lcl Rotation\", \"Lcl Rotation\", \"A\",0.000009334667643,-0.000000000000000,0.000000000000000\r\n      Property: \"Lcl Scaling\", \"Lcl Scaling\", \"A\",1.000000000000000,1.000000000000000,1.000000000000000\r\n      Property: \"RotationOffset\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationPivot\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"ScalingOffset\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"ScalingPivot\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationActive\", \"bool\", \"\",0\r\n      Property: \"TranslationMin\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationMax\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TranslationMinX\", \"bool\", \"\",0\r\n      Property: \"TranslationMinY\", \"bool\", \"\",0\r\n      Property: \"TranslationMinZ\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxX\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxY\", \"bool\", \"\",0\r\n      Property: \"TranslationMaxZ\", \"bool\", \"\",0\r\n      Property: \"RotationOrder\", \"enum\", \"\",0\r\n      Property: \"RotationSpaceForLimitOnly\", \"bool\", \"\",0\r\n      Property: \"AxisLen\", \"double\", \"\",10\r\n      Property: \"PreRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"PostRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationActive\", \"bool\", \"\",0\r\n      Property: \"RotationMin\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationMax\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"RotationMinX\", \"bool\", \"\",0\r\n      Property: \"RotationMinY\", \"bool\", \"\",0\r\n      Property: \"RotationMinZ\", \"bool\", \"\",0\r\n      Property: \"RotationMaxX\", \"bool\", \"\",0\r\n      Property: \"RotationMaxY\", \"bool\", \"\",0\r\n      Property: \"RotationMaxZ\", \"bool\", \"\",0\r\n      Property: \"RotationStiffnessX\", \"double\", \"\",0\r\n      Property: \"RotationStiffnessY\", \"double\", \"\",0\r\n      Property: \"RotationStiffnessZ\", \"double\", \"\",0\r\n      Property: \"MinDampRangeX\", \"double\", \"\",0\r\n      Property: \"MinDampRangeY\", \"double\", \"\",0\r\n      Property: \"MinDampRangeZ\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeX\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeY\", \"double\", \"\",0\r\n      Property: \"MaxDampRangeZ\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthX\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthY\", \"double\", \"\",0\r\n      Property: \"MinDampStrengthZ\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthX\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthY\", \"double\", \"\",0\r\n      Property: \"MaxDampStrengthZ\", \"double\", \"\",0\r\n      Property: \"PreferedAngleX\", \"double\", \"\",0\r\n      Property: \"PreferedAngleY\", \"double\", \"\",0\r\n      Property: \"PreferedAngleZ\", \"double\", \"\",0\r\n      Property: \"InheritType\", \"enum\", \"\",0\r\n      Property: \"ScalingActive\", \"bool\", \"\",0\r\n      Property: \"ScalingMin\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"ScalingMax\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"ScalingMinX\", \"bool\", \"\",0\r\n      Property: \"ScalingMinY\", \"bool\", \"\",0\r\n      Property: \"ScalingMinZ\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxX\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxY\", \"bool\", \"\",0\r\n      Property: \"ScalingMaxZ\", \"bool\", \"\",0\r\n      Property: \"GeometricTranslation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"GeometricRotation\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"GeometricScaling\", \"Vector3D\", \"\",1,1,1\r\n      Property: \"LookAtProperty\", \"object\", \"\"\r\n      Property: \"UpVectorProperty\", \"object\", \"\"\r\n      Property: \"Show\", \"bool\", \"\",1\r\n      Property: \"NegativePercentShapeSupport\", \"bool\", \"\",1\r\n      Property: \"DefaultAttributeIndex\", \"int\", \"\",0\r\n      Property: \"Color\", \"Color\", \"A+\",0,0,0\r\n      Property: \"Size\", \"double\", \"\",100\r\n      Property: \"Look\", \"enum\", \"\",1\r\n    }`;\r\n\r\n// Default materials layer\r\nconst defaultMaterialLayer = `\r\n    LayerElementMaterial: 0 {\r\n      Version: 101\r\n      Name: \"\"\r\n      MappingInformationType: \"AllSame\"\r\n      ReferenceInformationType: \"Direct\"\r\n      Materials: 0\r\n    }`;\r\n\r\n// Default layers block\r\nconst defaultLayerBlock = `\r\n    Layer: 0 {\r\n      Version: 100\r\n      LayerElement:  {\r\n        Type: \"LayerElementNormal\"\r\n        TypedIndex: 0\r\n      }\r\n      LayerElement:  {\r\n        Type: \"LayerElementColor\"\r\n        TypedIndex: 0\r\n      }\r\n      LayerElement:  {\r\n        Type: \"LayerElementMaterial\"\r\n        TypedIndex: 0\r\n      }\r\n    }`;\r\n\r\n/**\r\n * globalSettings info in output file.\r\n */\r\nconst globalSettings = `GlobalSettings: {\r\n    Version: 1000\r\n    Properties60:  {\r\n      Property: \"UpAxis\", \"int\", \"\",1\r\n      Property: \"UpAxisSign\", \"int\", \"\",1\r\n      Property: \"FrontAxis\", \"int\", \"\",2\r\n      Property: \"FrontAxisSign\", \"int\", \"\",1\r\n      Property: \"CoordAxis\", \"int\", \"\",0\r\n      Property: \"CoordAxisSign\", \"int\", \"\",1\r\n      Property: \"UnitScaleFactor\", \"double\", \"\",1\r\n    }\r\n  }`;\r\n\r\nexport default class FBXResult {\r\n  constructor() {\r\n    this._resultArray = [];\r\n    this._info = null;\r\n  }\r\n\r\n  getResult(info) {\r\n    this._info = info;\r\n    this._resultArray.push(this._writeHeader());\r\n    this._resultArray.push(this._writeDefinitions());\r\n    this._resultArray.push(this._writeObjects(info.models, info.materials));\r\n    this._resultArray.push(this._writeRelations());\r\n    this._resultArray.push(this._writeConnections()); // connections between models and materials)\r\n    this._info = null;\r\n    return this._resultArray.join('');\r\n  }\r\n\r\n  /**\r\n   * Add FBXHeader info to output file.\r\n   * Some fields are really confusing, but it seems that all listed fields are very informative\r\n   */\r\n  _writeHeader() {\r\n    const FBXHeaderVersion = 1003; // 1003 is some number which appears to present in many 6.1 ASCII files\r\n    const FBXVersion = 6100; // Mandatory and only supported version\r\n    const date = new Date();\r\n    const timeStampVersion = 1000;\r\n    const creator = `Miew FBX Exporter v${this._info.version}`; // Supposed to be an engine\r\n\r\n    return `; FBX 6.1.0 project file\r\n; Created by ${creator} Copyright (c) 2015-2024 EPAM Systems, Inc.\r\n; For support please contact miew@epam.com\r\n; ----------------------------------------------------\r\n\r\nFBXHeaderExtension:  {\r\n  FBXHeaderVersion: ${FBXHeaderVersion}\r\n  FBXVersion: ${FBXVersion}\r\n  CreationTimeStamp:  {\r\n    Version: ${timeStampVersion}\r\n    Year: ${date.getFullYear()}\r\n    Month: ${date.getMonth() + 1}\r\n    Day: ${date.getDate()}\r\n    Hour: ${date.getHours()}\r\n    Minute: ${date.getMinutes()}\r\n    Second: ${date.getSeconds()}\r\n    Millisecond: ${date.getMilliseconds()}\r\n  }\r\n  Creator: \"${creator}\"\r\n  OtherFlags:  {\r\n    FlagPLE: 0\r\n  }\r\n}\r\nCreationTime: \"${date}\"\r\nCreator: \"${creator}\"\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Add Definitions info to output file.\r\n   * Not exactly sure if this section is template section (as it is in 7.4+) or it should every time be like this\r\n   */\r\n  _writeDefinitions() {\r\n    return `\r\n; Object definitions\r\n;------------------------------------------------------------------\r\n\r\n${defaultDefinitions}\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Adding gathered information about Models to resulting string.\r\n   * Reminder - there may be more then 1 model in scene, but we must place materials after ALL models.\r\n   * @returns {string} string containing all models (vertices, indices, colors, normals etc)\r\n   */\r\n  _models() {\r\n    const modelVersion = 232;\r\n    let allModels = '';\r\n    const { models } = this._info;\r\n    for (let i = 0; i < models.length; ++i) {\r\n      const model = models[i];\r\n      const vertCount = model.verticesCount;\r\n      allModels += `\r\n  Model: \"Model::${this._info.name}_${i}\", \"Mesh\" {\r\n    Version: ${modelVersion}\r\n    ${defaultProperties}\r\n    ${this._verticesIndices(model.positions, model.indices)}\r\n    ${this._normalLayer(model.normals)}\r\n    ${this._colorLayer(model.colors, vertCount)}\r\n    ${defaultMaterialLayer}\r\n    ${defaultLayerBlock}\r\n  }`;\r\n    }\r\n    return allModels;\r\n  }\r\n\r\n  /**\r\n   * Add Material info to result\r\n   */\r\n  _materials() {\r\n    const materialVersion = 102;\r\n    let allMaterials = '';\r\n    const { materials } = this._info;\r\n    for (let i = 0; i < materials.length; ++i) {\r\n      const material = materials[i];\r\n      allMaterials += `\r\n  Material: \"Material::${this._info.name}_${i}_default\", \"\" {\r\n    Version: ${materialVersion}\r\n    ShadingModel: \"lambert\"\r\n    MultiLayer: 0\r\n    ${this._materialProperties(material)}\r\n  }`;\r\n    }\r\n    return allMaterials;\r\n  }\r\n\r\n  /**\r\n   * Add Objects info to output file.\r\n   */\r\n  _writeObjects() {\r\n    return `\r\n; Object properties\r\n;------------------------------------------------------------------\r\n\r\nObjects:  {\r\n  ${this._models()}\r\n  ${this._materials()}\r\n  ${globalSettings}\r\n}\r\n`;\r\n  }\r\n\r\n  /**\r\n   * Add Relations info to output file.\r\n   */\r\n  _writeRelations() {\r\n    let modelsList = '';\r\n    for (let i = 0; i < this._info.models.length; ++i) {\r\n      modelsList += `\r\n  Model: \"Model::${this._info.name}_${i}\", \"Mesh\" {\r\n  }`;\r\n    }\r\n    let materialList = '';\r\n    for (let i = 0; i < this._info.materials.length; ++i) {\r\n      materialList += `\r\n  Material: \"Material::${this._info.name}_${i}_default\", \"\" {\r\n  }`;\r\n    }\r\n\r\n    return `\r\n; Object relations\r\n;------------------------------------------------------------------\r\n\r\nRelations:  {\r\n  ${modelsList}\r\n  Model: \"Model::Producer Perspective\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Top\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Bottom\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Front\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Back\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Right\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Producer Left\", \"Camera\" {\r\n  }\r\n  Model: \"Model::Camera Switcher\", \"CameraSwitcher\" {\r\n  }\r\n  ${materialList}\r\n}`;\r\n  }\r\n\r\n  /**\r\n   * Add Connections info to output file.\r\n   */\r\n  _writeConnections() {\r\n    let modelsList = '';\r\n    const { name } = this._info;\r\n    for (let i = 0; i < this._info.models.length; ++i) {\r\n      modelsList += `\r\n  Connect: \"OO\", \"Model::${name}_${i}\", \"Model::Scene\"`;\r\n    }\r\n\r\n    let materialList = '';\r\n    for (let i = 0; i < this._info.materials.length; ++i) {\r\n      materialList += `\r\n  Connect: \"OO\", \"Material::${name}_${i}_default\", \"Model::${name}_${i}\"`;\r\n    }\r\n\r\n    return `\r\n; Object connections\r\n;------------------------------------------------------------------\r\n\r\nConnections:  {\r\n  ${modelsList}\r\n  ${materialList}\r\n}`;\r\n  }\r\n\r\n  /**\r\n   * Write float array to string with limited precision\r\n   * @param {Float32Array} array - array to be fixed\r\n   * @returns {String} String with fixed floats\r\n   */\r\n  _floatArrayToString(array) {\r\n    const str = [];\r\n    for (let i = 0; i < array.length; ++i) {\r\n      str[i] = array[i].toFixed(6);\r\n    }\r\n    return str.join(',');\r\n  }\r\n\r\n  /**\r\n   * Adding color layer to resulting file\r\n   * @param {Float32Array} colorArray attribute\r\n   * @param {number} vertCount - number of vertices in the model\r\n   * @returns {string} color layer info\r\n   */\r\n  _colorLayer(colorArray, vertCount) {\r\n    const layerElementColorNumber = 0;\r\n    const layerElementColorVersion = 101;\r\n    const layerElementColorName = '';\r\n    const colorsStr = this._floatArrayToString(colorArray);\r\n    // Mapping Information type and Reference Information type are mandatory for our Miew! Must not be changed\r\n    // As said [..Array(...)] - fastest and easiest way to produce [0, 1, .....] array\r\n    const colorIndices = [...Array(vertCount).keys()];\r\n    return `\r\n    LayerElementColor: ${layerElementColorNumber} {\r\n      Version: ${layerElementColorVersion}\r\n      Name: \"${layerElementColorName}\"\r\n      MappingInformationType: \"ByVertice\"\r\n      ReferenceInformationType: \"Direct\"\r\n      Colors: ${colorsStr}\r\n      ColorIndex: ${colorIndices}\r\n    }`;\r\n  }\r\n\r\n  /**\r\n   * Adding normal layer to resulting file\r\n   * @param {Float32Array} normalArray attribute\r\n   * @returns {string} normal layer info\r\n   */\r\n  _normalLayer(normalArray) {\r\n    const layerElementNormalNumber = 0;\r\n    const layerElementNormalVersion = 101;\r\n    const layerElementNormalName = '';\r\n    const normalsStr = this._floatArrayToString(normalArray);\r\n    // Mapping Information type and Reference Information type are mandatory for our Miew! Must not be changed\r\n    return `\r\n    LayerElementNormal: ${layerElementNormalNumber} {\r\n      Version: ${layerElementNormalVersion}\r\n      Name: \"${layerElementNormalName}\"\r\n      MappingInformationType: \"ByVertice\"\r\n      ReferenceInformationType: \"Direct\"\r\n      Normals: ${normalsStr}\r\n    }`;\r\n  }\r\n\r\n  /**\r\n   * Adding vertices and indices to resulting string\r\n   * @return {string} resulting string in FBX notation\r\n   */\r\n  _verticesIndices(positions, indices) {\r\n    const multiLayer = 0;\r\n    const multiTake = 1;\r\n    const shading = 'Y';\r\n    const culling = 'CullingOff';\r\n    const geometryVersion = 124;\r\n    const vertStr = this._floatArrayToString(positions);\r\n    /* About _correctArrayNotation: Float32Arrays will contains only Float32 numbers, which implies that it will be floating points with 17 numbers after point.\r\n    * We cannot (and it's logically incorrect) save all this information, so we convert this Float32Array into Array-like object with numbers with only 6 numbers after point\r\n    * Reminder - this is big memory loss (as we must save at one moment two arrays with similar information) */\r\n    return `MultiLayer: ${multiLayer}\r\n    MultiTake: ${multiTake}\r\n    Shading: ${shading}\r\n    Culling: \"${culling}\"\r\n    Vertices: ${vertStr}\r\n    PolygonVertexIndex: ${indices}\r\n    GeometryVersion: ${geometryVersion}`;\r\n  }\r\n\r\n  /**\r\n   * Forming material properties block.\r\n   * @param {Object} material - given material of model\r\n   * @returns {String} material properties string\r\n   */\r\n  _materialProperties(material) {\r\n    return `Properties60:  {\r\n      Property: \"ShadingModel\", \"KString\", \"\", \"Lambert\"\r\n      Property: \"MultiLayer\", \"bool\", \"\",0\r\n      Property: \"EmissiveColor\", \"ColorRGB\", \"\",0,0,0\r\n      Property: \"EmissiveFactor\", \"double\", \"\",0.0000\r\n      Property: \"AmbientColor\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"AmbientFactor\", \"double\", \"\",0.0000\r\n      Property: \"DiffuseColor\", \"ColorRGB\", \"\",${material.diffuse}\r\n      Property: \"DiffuseFactor\", \"double\", \"\",1.0000\r\n      Property: \"Bump\", \"Vector3D\", \"\",0,0,0\r\n      Property: \"TransparentColor\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"TransparencyFactor\", \"double\", \"\",0.0000\r\n      Property: \"SpecularColor\", \"ColorRGB\", \"\",${material.specular}\r\n      Property: \"SpecularFactor\", \"double\", \"\",1.0000\r\n      Property: \"ShininessExponent\", \"double\", \"\",${material.shininess}\r\n      Property: \"ReflectionColor\", \"ColorRGB\", \"\",0,0,0\r\n      Property: \"ReflectionFactor\", \"double\", \"\",1\r\n      Property: \"Ambient\", \"ColorRGB\", \"\",1,1,1\r\n      Property: \"Diffuse\", \"ColorRGB\", \"\",${material.diffuse}\r\n      Property: \"Specular\", \"ColorRGB\", \"\",${material.specular}\r\n      Property: \"Shininess\", \"double\", \"\",${material.shininess}\r\n      Property: \"Opacity\", \"double\", \"\",${material.opacity}\r\n      Property: \"Reflectivity\", \"double\", \"\",0\r\n    }`;\r\n  }\r\n}\r\n","import Exporter from './Exporter';\r\nimport FBXInfoExtractor from './fbx/FBXInfoExtractor';\r\nimport FBXResult from './fbx/FBXResult';\r\nimport ComplexVisual from '../../ComplexVisual';\r\n\r\nexport default class FBXExporter extends Exporter {\r\n  constructor(source, options) {\r\n    super(source, options);\r\n    // Data\r\n    this._data = source;\r\n    this._version = options.miewVersion || '0.0-UNSPECIFIED';\r\n    this._extractor = new FBXInfoExtractor();\r\n  }\r\n\r\n  /**\r\n   * Entry point to exporter.\r\n   */\r\n  exportSync() {\r\n    // Creating mandatory blocks\r\n    const result = new FBXResult();\r\n    if (!this._source) {\r\n      return this._result;\r\n    }\r\n\r\n    const info = this._extractor.process(this._data);\r\n    info.version = this._version;\r\n    this._result = result.getResult(info);\r\n    return this._result;\r\n  }\r\n}\r\n\r\nFBXExporter.formats = ['fbx'];\r\nFBXExporter.SourceClass = ComplexVisual;\r\n","import ExporterList from './exporters/ExporterList';\r\n\r\nimport PDBExporter from './exporters/PDBExporter';\r\nimport FBXExporter from './exporters/FBXExporter';\r\n\r\nexport default new ExporterList([\r\n  PDBExporter,\r\n  FBXExporter,\r\n]);\r\n","import loaders from './loaders';\r\nimport parsers from './parsers';\r\nimport exporters from './exporters';\r\n\r\nexport default {\r\n  loaders,\r\n  parsers,\r\n  exporters,\r\n};\r\n","/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\nimport CSS2DObject from './CSS2DObject';\r\n\r\nconst tempColor = new THREE.Color();\r\n\r\nclass CSS2DRenderer {\r\n  constructor() {\r\n    this._width = 0;\r\n    this._height = 0;\r\n    this._widthHalf = 0;\r\n    this._heightHalf = 0;\r\n\r\n    this._vector = new THREE.Vector3();\r\n    this._viewMatrix = new THREE.Matrix4();\r\n    this._projectionMatrix = new THREE.Matrix4();\r\n\r\n    this._domElement = document.createElement('div');\r\n    this._domElement.style.overflow = 'hidden';\r\n    this._domElement.style.position = 'absolute';\r\n    this._domElement.style.top = '0';\r\n    this._domElement.style.zIndex = '0'; // start a new Stacking Context to enclose all z-ordered children\r\n    this._domElement.style.pointerEvents = 'none';\r\n  }\r\n\r\n  getElement() {\r\n    return this._domElement;\r\n  }\r\n\r\n  reset() {\r\n    const myNode = this.getElement();\r\n    while (myNode.firstChild) {\r\n      myNode.removeChild(myNode.firstChild);\r\n    }\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this._width = width;\r\n    this._height = height;\r\n\r\n    this._widthHalf = this._width / 2;\r\n    this._heightHalf = this._height / 2;\r\n\r\n    this._domElement.style.width = `${width}px`;\r\n    this._domElement.style.height = `${height}px`;\r\n  }\r\n\r\n  _renderObject(object, camera, scene) {\r\n    function lerpColorAsHex(a, b, t) {\r\n      tempColor.setHex(a);\r\n      tempColor.lerp(b, t);\r\n      return `#${tempColor.getHexString()}`;\r\n    }\r\n\r\n    function colorAsHex(a) {\r\n      tempColor.setHex(a);\r\n      return `#${tempColor.getHexString()}`;\r\n    }\r\n\r\n    if (object instanceof CSS2DObject) {\r\n      this._vector.setFromMatrixPosition(object.matrixWorld);\r\n\r\n      if (object.userData !== undefined && object.userData.offset !== undefined) {\r\n        const localOffset = new THREE.Vector3(object.userData.offset.x, object.userData.offset.y, 0);\r\n        this._vector.add(localOffset.multiplyScalar(object.matrixWorld.getMaxScaleOnAxis()));\r\n      }\r\n\r\n      this._vector.applyMatrix4(this._viewMatrix);\r\n\r\n      const visibility = this._vector.z > -camera.near ? 'hidden' : 'visible';\r\n      const zIndex = 10000 * (camera.far - (-this._vector.z)) / (camera.far - camera.near);\r\n\r\n      const element = object.getElement();\r\n      if (typeof scene.fog === 'undefined') {\r\n        element.style.color = colorAsHex(object.userData.color);\r\n        if (object.userData.background !== 'transparent') {\r\n          element.style.background = colorAsHex(object.userData.background);\r\n        }\r\n      } else {\r\n        const fogFactor = THREE.MathUtils.smoothstep(-this._vector.z, scene.fog.near, scene.fog.far);\r\n        element.style.color = lerpColorAsHex(object.userData.color, scene.fog.color, fogFactor);\r\n        if (object.userData.background !== 'transparent') {\r\n          element.style.background = lerpColorAsHex(object.userData.background, scene.fog.color, fogFactor);\r\n        }\r\n      }\r\n\r\n      this._vector.applyMatrix4(this._projectionMatrix);\r\n\r\n      const style = `${object.userData !== {} ? object.userData.translation : 'translate(-50%, -50%) '\r\n      }translate(${this._vector.x * this._widthHalf + this._widthHalf}px,${\r\n        -this._vector.y * this._heightHalf + this._heightHalf}px)`;\r\n      element.style.visibility = visibility;\r\n      element.style.WebkitTransform = style;\r\n      element.style.MozTransform = style;\r\n      element.style.oTransform = style;\r\n      element.style.transform = style;\r\n      element.style.zIndex = Number(zIndex).toFixed(0);\r\n\r\n      if (element.parentNode !== this._domElement) {\r\n        this._domElement.appendChild(element);\r\n      }\r\n    }\r\n\r\n    for (let i = 0, l = object.children.length; i < l; i++) {\r\n      this._renderObject(object.children[i], camera, scene);\r\n    }\r\n  }\r\n\r\n  render(scene, camera) {\r\n    scene.updateMatrixWorld();\r\n\r\n    if (camera.parent === null) {\r\n      camera.updateMatrixWorld();\r\n    }\r\n\r\n    camera.matrixWorldInverse.copy(camera.matrixWorld).invert();\r\n\r\n    this._viewMatrix.copy(camera.matrixWorldInverse);\r\n    this._projectionMatrix.copy(camera.projectionMatrix);\r\n\r\n    this._renderObject(scene, camera, scene);\r\n  }\r\n}\r\nexport default CSS2DRenderer;\r\n","export default function getTopWindow() {\r\n  // intercept the exception if we have cross-origin iframe\r\n  try {\r\n    if (window.top.location.href !== undefined) {\r\n      return window.top;\r\n    }\r\n  } catch (e) {\r\n    // provide fallback\r\n  }\r\n  return window;\r\n}\r\n","import * as THREE from 'three';\r\nimport Timer from '../Timer';\r\nimport settings from '../settings';\r\nimport EventDispatcher from '../utils/EventDispatcher';\r\nimport getTopWindow from '../utils/getTopWindow';\r\n\r\nconst VK_LEFT = 37;\r\nconst VK_UP = 38;\r\nconst VK_RIGHT = 39;\r\nconst VK_DOWN = 40;\r\n\r\nconst STATE = {\r\n  NONE: -1, ROTATE: 0, TRANSLATE: 1, SCALE: 2, TRANSLATE_PIVOT: 3,\r\n};\r\n\r\n// pausing for this amount of time before releasing mouse button prevents inertial rotation (seconds)\r\nconst FULL_STOP_THRESHOLD = 0.1;\r\n\r\nconst quaternion = new THREE.Quaternion();\r\nconst matrix4 = new THREE.Matrix4();\r\n\r\n// pivot -- local offset of the rotation pivot point\r\nfunction ObjectHandler(objects, camera, pivot, options) {\r\n  this.objects = objects;\r\n  [this.object] = objects;\r\n  this.camera = camera;\r\n  this.pivot = pivot;\r\n  this.axis = new THREE.Vector3(0, 0, 1);\r\n  this.options = options;\r\n\r\n  this.lastRotation = {\r\n    axis: new THREE.Vector3(),\r\n    angle: 0.0,\r\n  };\r\n}\r\n\r\nObjectHandler.prototype._rotate = (function () {\r\n  const p = new THREE.Vector3();\r\n  const q = new THREE.Quaternion();\r\n  const s = new THREE.Vector3();\r\n\r\n  const m = new THREE.Matrix4();\r\n\r\n  return function (quat) {\r\n    const zeroPivot = (this.pivot.x === 0.0 && this.pivot.y === 0.0 && this.pivot.z === 0.0);\r\n\r\n    m.copy(this.object.matrix);\r\n\r\n    if (zeroPivot) {\r\n      m.multiply(matrix4.makeRotationFromQuaternion(quat));\r\n    } else {\r\n      m.multiply(matrix4.makeTranslation(this.pivot.x, this.pivot.y, this.pivot.z));\r\n      m.multiply(matrix4.makeRotationFromQuaternion(quat));\r\n      m.multiply(matrix4.makeTranslation(-this.pivot.x, -this.pivot.y, -this.pivot.z));\r\n    }\r\n\r\n    m.decompose(p, q, s);\r\n\r\n    // update objects\r\n    if (!zeroPivot) {\r\n      for (let i = 0; i < this.objects.length; ++i) {\r\n        this.objects[i].position.copy(p);\r\n      }\r\n    }\r\n\r\n    for (let j = 0; j < this.objects.length; ++j) {\r\n      this.objects[j].quaternion.copy(q);\r\n      this.objects[j].updateMatrix();\r\n    }\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.setObjects = function (objects) {\r\n  this.objects = objects;\r\n  [this.object] = objects;\r\n};\r\n\r\nObjectHandler.prototype.rotate = (function () {\r\n  const rot = {\r\n    axis: new THREE.Vector3(),\r\n    angle: 0.0,\r\n  };\r\n\r\n  return function (quat, mousePrevPos, mouseCurPos, aboutAxis) {\r\n    this.mouse2rotation(rot, mousePrevPos, mouseCurPos, aboutAxis);\r\n    quat.setFromAxisAngle(rot.axis, rot.angle);\r\n\r\n    if (rot.angle) {\r\n      this._rotate(quat);\r\n    }\r\n\r\n    this.lastRotation = rot;\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.translate = (function () {\r\n  const dir = new THREE.Vector3();\r\n  const pivot = new THREE.Vector3();\r\n\r\n  return function (delta) {\r\n    // reverse-project viewport movement to view coords (compensate for screen aspect ratio)\r\n    dir.set(\r\n      delta.x / this.camera.projectionMatrix.elements[0],\r\n      delta.y / this.camera.projectionMatrix.elements[5],\r\n      0,\r\n    );\r\n    let dist = dir.length();\r\n    dir.normalize();\r\n\r\n    // transform movement direction to object local coords\r\n    dir.transformDirection(matrix4.copy(this.object.matrixWorld).invert());\r\n\r\n    // visible translate distance shouldn't depend on camera-to-object distance\r\n    pivot.copy(this.pivot);\r\n    this.object.localToWorld(pivot);\r\n    dist *= Math.abs(pivot.z - this.camera.position.z);\r\n\r\n    // visible translate distance shouldn't depend on object scale\r\n    dist /= this.object.matrixWorld.getMaxScaleOnAxis();\r\n\r\n    // all objects are translated similar to principal object\r\n    // (we assume they all have identical pivot and scale)\r\n    for (let i = 0; i < this.objects.length; ++i) {\r\n      this.objects[i].translateOnAxis(dir, dist);\r\n    }\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.update = (function () {\r\n  const axis = new THREE.Vector3();\r\n\r\n  return function (timeSinceLastUpdate, timeSinceMove) {\r\n    if (settings.now.autoRotation !== 0.0) {\r\n      // auto-rotation with constant speed\r\n\r\n      // if rotation axis is fixed or hasn't been defined yet\r\n      if (settings.now.autoRotationAxisFixed || this.lastRotation.axis.length() === 0.0) {\r\n        // use Y-axis (transformed to local object coords)\r\n        axis.set(0, 1, 0).transformDirection(matrix4.copy(this.object.matrixWorld).invert());\r\n      } else {\r\n        // use axis defined by last user rotation\r\n        axis.copy(this.lastRotation.axis);\r\n      }\r\n\r\n      this._rotate(quaternion.setFromAxisAngle(axis, settings.now.autoRotation * timeSinceLastUpdate));\r\n      return true;\r\n    }\r\n\r\n    if (this.options.intertia && this.lastRotation.angle) {\r\n      // inertial object rotation\r\n      const angle = this.lastRotation.angle * ((1.0 - this.options.dynamicDampingFactor) ** (40.0 * timeSinceMove));\r\n\r\n      if (Math.abs(angle) <= this.options.intertiaThreshold) {\r\n        this.lastRotation.angle = 0.0;\r\n      } else {\r\n        this._rotate(quaternion.setFromAxisAngle(this.lastRotation.axis, angle));\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n}());\r\n\r\nObjectHandler.prototype.stop = function () {\r\n  this.lastRotation.angle = 0.0;\r\n};\r\n\r\n// calculate (axis, angle) pair from mouse/touch movement\r\nObjectHandler.prototype.mouse2rotation = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  const eye = new THREE.Vector3();\r\n  const eyeDirection = new THREE.Vector3();\r\n\r\n  const cameraUpDirection = new THREE.Vector3();\r\n  const cameraSidewaysDirection = new THREE.Vector3();\r\n\r\n  const moveDirection = new THREE.Vector3();\r\n\r\n  const mouseDelta = new THREE.Vector2();\r\n\r\n  return function (rot, mousePrev, mouseCur, aboutAxis) {\r\n    if (aboutAxis) {\r\n      rot.axis.copy(this.axis);\r\n      rot.angle = this.options.axisRotateFactor * (mouseCur.y - mousePrev.y);\r\n\r\n      /* cool method that allows rotation around Z axis to be \"tied\" to mouse cursor\r\n\r\n        res.axis.copy(this.axis);\r\n\r\n        var pivot = this.pivot.clone();\r\n        this.object.localToWorld(pivot);\r\n        pivot.project(this.camera);\r\n\r\n        var v1 = new THREE.Vector3(mousePrev.x, mousePrev.y, this.camera.position.z);\r\n        v1.sub(pivot);\r\n        var v2 = new THREE.Vector3(mouseCur.x, mouseCur.y, this.camera.position.z);\r\n        v2.sub(pivot);\r\n\r\n        v1.sub(res.axis.clone().multiplyScalar(v1.dot(res.axis)));\r\n        v2.sub(res.axis.clone().multiplyScalar(v2.dot(res.axis)));\r\n\r\n        var abs = v1.length() * v2.length();\r\n        if (abs > 0) {\r\n          res.angle = res.axis.dot(v1.cross(v2)) / abs;\r\n        }\r\n      */\r\n    } else {\r\n      mouseDelta.subVectors(mouseCur, mousePrev);\r\n      const angle = mouseDelta.length();\r\n      if (angle === 0.0) {\r\n        return;\r\n      }\r\n\r\n      center.copy(this.pivot);\r\n      this.object.localToWorld(center);\r\n      eye.subVectors(this.camera.position, center);\r\n      eyeDirection.copy(eye).normalize();\r\n\r\n      cameraUpDirection.copy(this.camera.up).normalize();\r\n      cameraSidewaysDirection.crossVectors(cameraUpDirection, eyeDirection).normalize();\r\n\r\n      cameraUpDirection.setLength(mouseDelta.y);\r\n      cameraSidewaysDirection.setLength(mouseDelta.x);\r\n\r\n      moveDirection.copy(cameraUpDirection.add(cameraSidewaysDirection));\r\n\r\n      rot.axis.crossVectors(moveDirection, eye);\r\n\r\n      rot.angle = -angle * this.options.rotateFactor;\r\n    }\r\n\r\n    rot.axis.transformDirection(matrix4.copy(this.object.matrixWorld).invert());\r\n\r\n    // make sure angle is always positive (thus 'axis' defines both axis and direction of rotation)\r\n    if (rot.angle < 0.0) {\r\n      rot.axis.negate();\r\n      rot.angle = -rot.angle;\r\n    }\r\n  };\r\n}());\r\n\r\nfunction ObjectControls(object, objectPivot, camera, domElement, getAltObj) {\r\n  EventDispatcher.call(this);\r\n  const self = this;\r\n\r\n  this.object = object;\r\n  this.objectPivot = objectPivot;\r\n  this.camera = camera;\r\n  this.domElement = (typeof domElement !== 'undefined') ? domElement : document;\r\n  this.getAltObj = getAltObj;\r\n\r\n  // API\r\n\r\n  this.enabled = true;\r\n  this.hotkeysEnabled = true;\r\n\r\n  this.screen = {\r\n    left: 0, top: 0, width: 0, height: 0,\r\n  };\r\n\r\n  this.options = {\r\n    rotateFactor: Math.PI, // full screen slide (along short side) would roughly mean 180 deg. rotation\r\n    axisRotateFactor: 4 * Math.PI, // full screen slide (along short side) would roughly mean 720 deg. rotation\r\n    intertia: true,\r\n    dynamicDampingFactor: 0.1,\r\n    intertiaThreshold: 1e-3,\r\n  };\r\n\r\n  // internals\r\n\r\n  this._state = STATE.NONE;\r\n\r\n  this._mousePrevPos = new THREE.Vector2();\r\n  this._mouseCurPos = new THREE.Vector2();\r\n\r\n  this._mainObj = new ObjectHandler([this.object], this.camera, new THREE.Vector3(0, 0, 0), this.options);\r\n  this._altObj = new ObjectHandler([this.object], this.camera, new THREE.Vector3(0, 0, 0), this.options);\r\n  this._affectedObj = this._mainObj;\r\n  this._isAltObjFreeRotationAllowed = true;\r\n  this._isTranslationAllowed = true;\r\n  this._isKeysTranslatingObj = false;\r\n\r\n  this._pressedKeys = [];\r\n\r\n  this._clock = new Timer();\r\n  this._clock.start();\r\n  this._lastUpdateTime = this._clock.getElapsedTime();\r\n\r\n  // events\r\n  this._listeners = [\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousedown',\r\n      handler(e) {\r\n        self.mousedown(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseup',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousemove',\r\n      handler(e) {\r\n        self.mousemove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousewheel',\r\n      handler(e) {\r\n        self.mousewheel(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'DOMMouseScroll',\r\n      handler(e) {\r\n        self.mousewheel(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseout',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchstart',\r\n      handler(e) {\r\n        self.touchstartend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchend',\r\n      handler(e) {\r\n        self.touchstartend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchmove',\r\n      handler(e) {\r\n        self.touchmove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.getKeyBindObject(),\r\n      type: 'keydown',\r\n      handler(e) {\r\n        self.keydownup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.getKeyBindObject(),\r\n      type: 'keyup',\r\n      handler(e) {\r\n        self.keydownup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'resize',\r\n      handler() {\r\n        self.handleResize();\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'blur',\r\n      handler() {\r\n        self.resetKeys();\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'contextmenu',\r\n      handler(e) {\r\n        self.contextmenu(e);\r\n      },\r\n    }];\r\n\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.addEventListener(l.type, l.handler);\r\n  }\r\n\r\n  this.handleResize();\r\n\r\n  this.resetKeys();\r\n\r\n  // force an update at start\r\n  this.update();\r\n}\r\n\r\n// methods\r\n\r\nObjectControls.prototype = Object.create(EventDispatcher.prototype);\r\nObjectControls.prototype.constructor = ObjectControls;\r\n\r\nObjectControls.prototype.resetKeys = function () {\r\n  this._pressedKeys[VK_LEFT] = false;\r\n  this._pressedKeys[VK_UP] = false;\r\n  this._pressedKeys[VK_RIGHT] = false;\r\n  this._pressedKeys[VK_DOWN] = false;\r\n};\r\n\r\nObjectControls.prototype.contextmenu = function (e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n};\r\n\r\nObjectControls.prototype.handleResize = function () {\r\n  if (this.domElement === document) {\r\n    this.screen.left = 0;\r\n    this.screen.top = 0;\r\n    this.screen.width = window.innerWidth;\r\n    this.screen.height = window.innerHeight;\r\n  } else {\r\n    const box = this.domElement.getBoundingClientRect();\r\n    // adjustments come from similar code in the jquery offset() function\r\n    const d = this.domElement.ownerDocument.documentElement;\r\n    this.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n    this.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n    this.screen.width = box.width;\r\n    this.screen.height = box.height;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.enable = function (enable) {\r\n  this.enabled = enable;\r\n};\r\n\r\nObjectControls.prototype.enableHotkeys = function (enable) {\r\n  this.hotkeysEnabled = enable;\r\n};\r\n\r\nObjectControls.prototype.allowTranslation = function (allow) {\r\n  this._isTranslationAllowed = allow;\r\n};\r\n\r\nObjectControls.prototype.allowAltObjFreeRotation = function (allow) {\r\n  this._isAltObjFreeRotationAllowed = allow;\r\n};\r\n\r\nObjectControls.prototype.keysTranslateObj = function (on) {\r\n  this._isKeysTranslatingObj = on;\r\n};\r\n\r\nObjectControls.prototype.isEditingAltObj = function () {\r\n  return ((this._state === STATE.ROTATE) || (this._state === STATE.TRANSLATE))\r\n            && (this._affectedObj === this._altObj);\r\n};\r\n\r\n// convert page coords of mouse/touch to uniform coords with smaller side being [-0.5, 0.5]\r\n// (uniform coords keep direct proportion with screen distance travelled by mouse regardless of screen aspect ratio)\r\nObjectControls.prototype.convertMouseToOnCircle = function (coords, pageX, pageY) {\r\n  const screenSize = Math.min(this.screen.width, this.screen.height);\r\n\r\n  if (screenSize === 0) {\r\n    coords.set(0, 0);\r\n    return;\r\n  }\r\n\r\n  coords.set(\r\n    ((pageX - this.screen.width * 0.5 - this.screen.left) / screenSize),\r\n    ((0.5 * this.screen.height + this.screen.top - pageY) / screenSize),\r\n  );\r\n};\r\n\r\n// convert page coords of mouse/touch to viewport coords with both sides being [-1, 1]\r\n// (those are non-uniform coords affected by screen aspect ratio)\r\nObjectControls.prototype.convertMouseToViewport = function (coords, pageX, pageY) {\r\n  if (this.screen.width === 0 || this.screen.height === 0) {\r\n    coords.set(0, 0);\r\n    return;\r\n  }\r\n\r\n  coords.set(\r\n    (2.0 * (pageX - this.screen.width * 0.5 - this.screen.left) / this.screen.width),\r\n    (2.0 * (0.5 * this.screen.height + this.screen.top - pageY) / this.screen.height),\r\n  );\r\n};\r\n\r\nObjectControls.prototype.stop = function () {\r\n  this._mainObj.stop();\r\n  this._altObj.stop();\r\n};\r\n\r\n// rotate object based on latest mouse/touch movement\r\nObjectControls.prototype.rotateByMouse = (function () {\r\n  const quat = new THREE.Quaternion();\r\n\r\n  return function (aboutZAxis) {\r\n    this._affectedObj.rotate(quat, this._mousePrevPos, this._mouseCurPos, aboutZAxis);\r\n    this.dispatchEvent({ type: 'change', action: 'rotate', quaternion: quat });\r\n  };\r\n}());\r\n\r\n// rotate object by specified quaternion\r\nObjectControls.prototype.rotate = function (quat) {\r\n  this.object.quaternion.multiply(quat);\r\n  this.dispatchEvent({ type: 'change', action: 'rotate', quaternion: quat });\r\n};\r\n\r\n// get object's orientation\r\nObjectControls.prototype.getOrientation = function () {\r\n  return this.object.quaternion;\r\n};\r\n\r\n// set object's orientation\r\nObjectControls.prototype.setOrientation = function (quat) {\r\n  this.object.quaternion.copy(quat);\r\n};\r\n\r\n// translate object based on latest mouse/touch movement\r\nObjectControls.prototype.translate = (function () {\r\n  const delta = new THREE.Vector2();\r\n  return function () {\r\n    delta.subVectors(this._mouseCurPos, this._mousePrevPos);\r\n    this._affectedObj.translate(delta);\r\n    this.dispatchEvent({ type: 'change', action: 'translate' });\r\n  };\r\n}());\r\n\r\n// get object scale\r\nObjectControls.prototype.getScale = function () {\r\n  return this.object.scale.x;\r\n};\r\n\r\n// set uniform object scale\r\nObjectControls.prototype.setScale = function (scale) {\r\n  this.object.scale.set(scale, scale, scale);\r\n};\r\n\r\n// scale object by factor (factor should be greater than zero)\r\nObjectControls.prototype.scale = function (factor) {\r\n  if (factor <= 0) {\r\n    return;\r\n  }\r\n  this.setScale(this.object.scale.x * factor);\r\n  this.dispatchEvent({ type: 'change', action: 'zoom', factor });\r\n};\r\n\r\nObjectControls.prototype.update = (function () {\r\n  const shift = new THREE.Vector2();\r\n\r\n  return function () {\r\n    const curTime = this._clock.getElapsedTime();\r\n    const timeSinceLastUpdate = curTime - this._lastUpdateTime;\r\n\r\n    // update object handler\r\n    if (this._state === STATE.NONE) {\r\n      const timeSinceMove = curTime - this._lastMouseMoveTime;\r\n      if (this._mainObj.update(timeSinceLastUpdate, timeSinceMove)\r\n        || this._altObj.update(timeSinceLastUpdate, timeSinceMove)) {\r\n        this.dispatchEvent({ type: 'change', action: 'auto' });\r\n      }\r\n    }\r\n\r\n    // apply arrow keys\r\n    if (this._isKeysTranslatingObj) {\r\n      const speedX = Number(this._pressedKeys[VK_RIGHT]) - Number(this._pressedKeys[VK_LEFT]);\r\n      const speedY = Number(this._pressedKeys[VK_UP]) - Number(this._pressedKeys[VK_DOWN]);\r\n      if (speedX !== 0.0 || speedY !== 0.0) {\r\n        const delta = timeSinceLastUpdate;\r\n\r\n        // update object translation\r\n        const altObj = this.getAltObj();\r\n        if (altObj.objects.length > 0) {\r\n          this._altObj.setObjects(altObj.objects);\r\n          this._altObj.pivot = altObj.pivot;\r\n\r\n          if ('axis' in altObj) {\r\n            this._altObj.axis = altObj.axis.clone();\r\n          } else {\r\n            this._altObj.axis.set(0, 0, 1);\r\n          }\r\n\r\n          shift.set(delta * speedX, delta * speedY);\r\n          this._altObj.translate(shift);\r\n          this.dispatchEvent({ type: 'change', action: 'translate' });\r\n        }\r\n      }\r\n    }\r\n\r\n    this._lastUpdateTime = curTime;\r\n  };\r\n}());\r\n\r\nObjectControls.prototype.reset = function () {\r\n  this._state = STATE.NONE;\r\n\r\n  this.object.quaternion.copy(quaternion.set(0, 0, 0, 1));\r\n};\r\n\r\n// listeners\r\n\r\nObjectControls.prototype.mousedown = function (event) {\r\n  if (this.enabled === false || this._state !== STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (this._state === STATE.NONE) {\r\n    if (event.button === 0) {\r\n      this._affectedObj.stop(); // can edit only one object at a time\r\n\r\n      let workWithAltObj = false;\r\n\r\n      if (event.altKey) {\r\n        const altObj = this.getAltObj();\r\n        workWithAltObj = (altObj.objects.length > 0);\r\n        if (workWithAltObj) {\r\n          this._altObj.setObjects(altObj.objects);\r\n          this._altObj.pivot = altObj.pivot;\r\n\r\n          if ('axis' in altObj) {\r\n            this._altObj.axis = altObj.axis.clone();\r\n          } else {\r\n            this._altObj.axis.set(0, 0, 1);\r\n          }\r\n        }\r\n      }\r\n\r\n      this._affectedObj = workWithAltObj ? this._altObj : this._mainObj;\r\n\r\n      this._state = (workWithAltObj && event.ctrlKey && this._isTranslationAllowed) ? STATE.TRANSLATE : STATE.ROTATE;\r\n    } else if (event.button === 2) {\r\n      this._state = STATE.TRANSLATE_PIVOT;\r\n    }\r\n  }\r\n\r\n  if (this._state === STATE.ROTATE) {\r\n    this.convertMouseToOnCircle(this._mouseCurPos, event.pageX, event.pageY);\r\n    this._mousePrevPos.copy(this._mouseCurPos);\r\n  }\r\n\r\n  if (this._state === STATE.TRANSLATE || this._state === STATE.TRANSLATE_PIVOT) {\r\n    this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n    this._mousePrevPos.copy(this._mouseCurPos);\r\n  }\r\n};\r\n\r\nObjectControls.prototype.mousemove = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (this._state) {\r\n    case STATE.ROTATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.rotateByMouse((event.altKey && !this._isAltObjFreeRotationAllowed) || event.shiftKey);\r\n      this._lastMouseMoveTime = this._clock.getElapsedTime();\r\n      break;\r\n\r\n    case STATE.TRANSLATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.translate();\r\n      break;\r\n\r\n    case STATE.TRANSLATE_PIVOT:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToViewport(this._mouseCurPos, event.pageX, event.pageY);\r\n      this.translatePivotByMouse();\r\n      break;\r\n\r\n    default: break;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.mousewheel = function (event) {\r\n  if (this.enabled === false || !settings.now.zooming || this._state !== STATE.NONE || event.shiftKey) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n\r\n  let delta = 0;\r\n\r\n  if (event.wheelDelta) {\r\n    // WebKit / Opera / Explorer 9\r\n    delta = event.wheelDelta / 40;\r\n  } else if (event.detail) {\r\n    // Firefox\r\n    delta = -event.detail / 3;\r\n  }\r\n\r\n  let factor = 1.0 + delta * 0.05;\r\n  factor = Math.max(factor, 0.01);\r\n  this.scale(factor);\r\n};\r\n\r\nObjectControls.prototype.mouseup = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  this._state = STATE.NONE;\r\n\r\n  if (this._clock.getElapsedTime() - this._lastMouseMoveTime > FULL_STOP_THRESHOLD) {\r\n    this._affectedObj.stop();\r\n  }\r\n};\r\n\r\nObjectControls.prototype.touchstartend = function (event) {\r\n  if (this.enabled === false) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (event.touches.length) {\r\n    case 1:\r\n      this._state = STATE.ROTATE;\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.touches[0].pageX, event.touches[0].pageY);\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      break;\r\n\r\n    case 2: {\r\n      // prevent inertial rotation\r\n      this._mainObj.stop();\r\n      this._altObj.stop();\r\n\r\n      this._state = STATE.SCALE;\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n      this._touchDistanceCur = this._touchDistanceStart = Math.sqrt(dx * dx + dy * dy);\r\n      this._scaleStart = this.object.scale.x;\r\n      break;\r\n    }\r\n\r\n    default:\r\n      this._state = STATE.NONE;\r\n  }\r\n};\r\n\r\nObjectControls.prototype.touchmove = function (event) {\r\n  if (this.enabled === false || this._state === STATE.NONE) {\r\n    return;\r\n  }\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  switch (this._state) {\r\n    case STATE.ROTATE:\r\n      this._mousePrevPos.copy(this._mouseCurPos);\r\n      this.convertMouseToOnCircle(this._mouseCurPos, event.touches[0].pageX, event.touches[0].pageY);\r\n      this.rotateByMouse(false);\r\n\r\n      this._lastMouseMoveTime = this._clock.getElapsedTime();\r\n      break;\r\n\r\n    case STATE.SCALE:\r\n      if (settings.now.zooming) {\r\n        // update scale\r\n        const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n        const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n        this._touchDistanceCur = Math.sqrt(dx * dx + dy * dy);\r\n        const newScale = this._scaleStart * this._touchDistanceCur / this._touchDistanceStart;\r\n        const factor = newScale / this.object.scale.x;\r\n        this.scale(factor);\r\n      }\r\n      break;\r\n\r\n    default:\r\n  }\r\n};\r\n\r\nObjectControls.prototype.keydownup = function (event) {\r\n  if (this.enabled === false || this.hotkeysEnabled === false) {\r\n    return;\r\n  }\r\n\r\n  switch (event.keyCode) {\r\n    case VK_LEFT:\r\n    case VK_UP:\r\n    case VK_RIGHT:\r\n    case VK_DOWN:\r\n      this._pressedKeys[event.keyCode] = (event.type === 'keydown');\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      break;\r\n    default:\r\n  }\r\n};\r\n\r\nObjectControls.prototype.getKeyBindObject = function () {\r\n  return getTopWindow();\r\n};\r\n\r\nObjectControls.prototype.dispose = function () {\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.removeEventListener(l.type, l.handler);\r\n  }\r\n};\r\n\r\nObjectControls.prototype.translatePivotByMouse = (function () {\r\n  const delta = new THREE.Vector2();\r\n  return function () {\r\n    delta.subVectors(this._mouseCurPos, this._mousePrevPos);\r\n    this.translatePivotInWorld(settings.now.translationSpeed * delta.x, settings.now.translationSpeed * delta.y, 0);\r\n  };\r\n}());\r\n\r\n// Translate in WorldCS, translation is scaled with root scale matrix\r\nObjectControls.prototype.translatePivotInWorld = function (x, y, z) {\r\n  const pos = this.objectPivot.position;\r\n  pos.applyMatrix4(this.object.matrixWorld);\r\n  pos.setX(pos.x + x);\r\n  pos.setY(pos.y + y);\r\n  pos.setZ(pos.z + z);\r\n  pos.applyMatrix4(matrix4.copy(this.object.matrixWorld).invert());\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\n// Translate in ModelCS, x, y, z are Ang\r\nObjectControls.prototype.translatePivot = function (x, y, z) {\r\n  const pos = this.objectPivot.position;\r\n  pos.setX(pos.x + x);\r\n  pos.setY(pos.y + y);\r\n  pos.setZ(pos.z + z);\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\n// Set pivot\r\nObjectControls.prototype.setPivot = function (newPivot) {\r\n  this.objectPivot.position.copy(newPivot);\r\n\r\n  this.dispatchEvent({ type: 'change', action: 'translatePivot' });\r\n};\r\n\r\nexport default ObjectControls;\r\n","import * as THREE from 'three';\r\nimport settings from '../settings';\r\nimport Timer from '../Timer';\r\nimport EventDispatcher from '../utils/EventDispatcher';\r\n\r\nfunction Picker(gfxObj, camera, domElement) {\r\n  EventDispatcher.call(this);\r\n  const self = this;\r\n\r\n  this.gfxObj = gfxObj;\r\n  this.camera = camera;\r\n  this.domElement = (typeof domElement !== 'undefined') ? domElement : document;\r\n  this.screen = {\r\n    left: 0, top: 0, width: 0, height: 0,\r\n  };\r\n  this._lastMousePos = new THREE.Vector2(0, 0);\r\n  this._mouseTotalDist = 0.0;\r\n  this._lastClickBeginTime = -1000.0;\r\n  this._lastClickPos = new THREE.Vector2(0, 0);\r\n  this._clickBeginTime = 0.0;\r\n\r\n  this._clock = new Timer();\r\n  this._clock.start();\r\n\r\n  this._listeners = [\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousedown',\r\n      handler(e) {\r\n        self.mousedown(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mouseup',\r\n      handler(e) {\r\n        self.mouseup(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'mousemove',\r\n      handler(e) {\r\n        self.mousemove(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchstart',\r\n      handler(e) {\r\n        self.touchstart(e);\r\n      },\r\n    },\r\n    {\r\n      obj: self.domElement,\r\n      type: 'touchend',\r\n      handler(e) {\r\n        self.touchend(e);\r\n      },\r\n    },\r\n    {\r\n      obj: window,\r\n      type: 'resize',\r\n      handler() {\r\n        self.handleResize();\r\n      },\r\n    }];\r\n\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.addEventListener(l.type, l.handler);\r\n  }\r\n\r\n  this.handleResize();\r\n}\r\n\r\nPicker.prototype = Object.create(EventDispatcher.prototype);\r\nPicker.prototype.constructor = Picker;\r\n\r\nPicker.prototype.reset = function () {\r\n  this.picked = {};\r\n  this.dispatchEvent({ type: 'newpick', obj: {} });\r\n};\r\n\r\nPicker.prototype.handleResize = function () {\r\n  if (this.domElement === document) {\r\n    this.screen.left = 0;\r\n    this.screen.top = 0;\r\n    this.screen.width = window.innerWidth;\r\n    this.screen.height = window.innerHeight;\r\n  } else {\r\n    const box = this.domElement.getBoundingClientRect();\r\n    // adjustments come from similar code in the jquery offset() function\r\n    const d = this.domElement.ownerDocument.documentElement;\r\n    this.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n    this.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n    this.screen.width = box.width;\r\n    this.screen.height = box.height;\r\n  }\r\n};\r\n\r\nPicker.prototype.pickObject = function (screenPos) {\r\n  if (!this.gfxObj) {\r\n    this.picked = {};\r\n    this.dispatchEvent({ type: 'newpick', obj: {} });\r\n    return;\r\n  }\r\n\r\n  const { gfxObj } = this;\r\n  const rayCaster = new THREE.Raycaster();\r\n  rayCaster.ray.origin.setFromMatrixPosition(this.camera.matrixWorld);\r\n  rayCaster.ray.direction.set(screenPos.x, screenPos.y, 0.5).unproject(this.camera).sub(rayCaster.ray.origin).normalize();\r\n\r\n  const clipPlane = (settings.now.draft.clipPlane && this.clipPlaneValue) ? this.clipPlaneValue : Infinity;\r\n  const fogFarPlane = (settings.now.fog && this.fogFarValue) ? this.fogFarValue : Infinity;\r\n  const point = rayCaster.intersectVisibleObject(gfxObj, this.camera, clipPlane, fogFarPlane);\r\n  if (!point) {\r\n    this.picked = {};\r\n    this.dispatchEvent({ type: 'newpick', obj: {} });\r\n    return;\r\n  }\r\n\r\n  let picked = {};\r\n  if (point.residue || point.atom) {\r\n    const residue = point.residue || point.atom.residue;\r\n    if (settings.now.pick === 'chain') {\r\n      picked = { chain: residue.getChain() };\r\n    } else if (settings.now.pick === 'molecule') {\r\n      picked = { molecule: residue.getMolecule() };\r\n    } else if (point.residue || settings.now.pick === 'residue') {\r\n      picked = { residue };\r\n    } else if (point.atom) {\r\n      picked = { atom: point.atom };\r\n    }\r\n  }\r\n  this.picked = picked;\r\n  this.dispatchEvent({ type: 'newpick', obj: picked });\r\n};\r\n\r\nPicker.prototype.getMouseInViewport = function (pageX, pageY) {\r\n  return new THREE.Vector2(\r\n    (pageX - this.screen.left) / this.screen.width * 2 - 1,\r\n    -(pageY - this.screen.top) / this.screen.height * 2 + 1,\r\n  );\r\n};\r\n\r\nPicker.prototype.mousedown = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.button === 0) {\r\n    this._lastMousePos = this.getMouseInViewport(event.pageX, event.pageY);\r\n    this._mouseTotalDist = 0.0;\r\n    this._clickBeginTime = this._clock.getElapsedTime();\r\n  }\r\n};\r\n\r\nPicker.prototype.mousemove = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  const pos = this.getMouseInViewport(event.pageX, event.pageY);\r\n  this._mouseTotalDist += pos.sub(this._lastMousePos).length();\r\n};\r\n\r\nPicker.prototype.mouseup = function (event) {\r\n  const self = this;\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.button === 0) {\r\n    if (this._mouseTotalDist < 0.01) {\r\n      const curTime = this._clock.getElapsedTime();\r\n      const curPos = this.getMouseInViewport(event.pageX, event.pageY);\r\n\r\n      const timeSinceLastClickBegin = curTime - this._lastClickBeginTime;\r\n      if (timeSinceLastClickBegin < 0.7) {\r\n        const clickDist = new THREE.Vector2().subVectors(curPos, this._lastClickPos);\r\n        if (clickDist.length() < 0.01) {\r\n          // it's a double click\r\n          this.dispatchEvent({ type: 'dblclick', obj: this.picked });\r\n\r\n          this._lastClickPos = curPos;\r\n          this._lastClickBeginTime = -1000; // this click cannot serve as first click in double-click\r\n          return;\r\n        }\r\n      }\r\n\r\n      setTimeout(() => {\r\n        self.pickObject(curPos);\r\n      }, 0);\r\n\r\n      this._lastClickPos = curPos;\r\n      this._lastClickBeginTime = this._clickBeginTime;\r\n    }\r\n  }\r\n};\r\n\r\nPicker.prototype.touchstart = function (event) {\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.touches.length === 1) {\r\n    this._lastTouchdownPos = this.getMouseInViewport(event.touches[0].pageX, event.touches[0].pageY);\r\n  }\r\n};\r\n\r\nPicker.prototype.touchend = function (event) {\r\n  const self = this;\r\n\r\n  event.preventDefault();\r\n  event.stopPropagation();\r\n\r\n  if (event.touches.length === 0\r\n        && event.changedTouches.length === 1) {\r\n    const pos = this.getMouseInViewport(event.changedTouches[0].pageX, event.changedTouches[0].pageY);\r\n    const dist = pos.sub(this._lastTouchdownPos).length();\r\n    if (dist < 0.01) {\r\n      setTimeout(() => {\r\n        self.pickObject(self._lastTouchdownPos);\r\n      }, 0);\r\n    }\r\n  }\r\n};\r\n\r\nPicker.prototype.dispose = function () {\r\n  for (let i = 0; i < this._listeners.length; i++) {\r\n    const l = this._listeners[i];\r\n    l.obj.removeEventListener(l.type, l.handler);\r\n  }\r\n};\r\n\r\nexport default Picker;\r\n","import * as THREE from 'three';\r\n\r\nclass Axes {\r\n  constructor(target, targetCamera) {\r\n    this._target = target;\r\n    this._targetCamera = targetCamera;\r\n    this._camera = new THREE.PerspectiveCamera(targetCamera.fov, targetCamera.aspect, 1, 100);\r\n    this._object = new THREE.AxesHelper(1);\r\n    this._scene = new THREE.Scene();\r\n    this._scene.add(this._object);\r\n    this._full = new THREE.Vector2();\r\n\r\n    this._update();\r\n  }\r\n\r\n  _update() {\r\n    const { fov } = this._targetCamera;\r\n    const camera = this._camera;\r\n    camera.aspect = this._targetCamera.aspect;\r\n    camera.setMinimalFov(fov);\r\n    camera.setDistanceToFit(1.0, fov);\r\n    camera.updateProjectionMatrix();\r\n\r\n    this._object.quaternion.copy(this._target.quaternion);\r\n  }\r\n\r\n  render(renderer) {\r\n    this._update();\r\n\r\n    renderer.getSize(this._full);\r\n    const width = this._full.width * 0.25;\r\n    const height = this._full.height * 0.25;\r\n\r\n    const { autoClear } = renderer;\r\n    renderer.autoClear = false;\r\n    renderer.setViewport(0.0, 0.0, width, height);\r\n    renderer.clear(false, true, false);\r\n    renderer.render(this._scene, this._camera);\r\n    renderer.setViewport(0, 0, this._full.width, this._full.height);\r\n    renderer.autoClear = autoClear;\r\n  }\r\n}\r\nexport default Axes;\r\n","import * as THREE from 'three';\r\nimport SecondaryStructureColorer from './colorers/SecondaryStructureColorer';\r\n\r\nconst cDataOffset = 12;\r\nconst cFirstMask = 0x0FFFFF00;\r\nconst cFirstShift = 8;\r\nconst cSecMask1 = 0x000000FF;\r\nconst cSecShift1 = 12;\r\nconst cSecMask2 = 0xFFF00000;\r\nconst cSecShift2 = 20;\r\nconst cThirdMask = 0x000FFFFF;\r\nconst cStrMask = 0xF0000000;\r\nconst cStrShift = 28;\r\nconst c219 = 1 << 19;\r\nconst c220 = 1 << 20;\r\n\r\nconst cHelixIdx = 1;\r\nconst cSheetIdx = 2;\r\nconst secTypes = ['helix', 'strand'];\r\nconst cSecNames = ['fs', 'ps', 'ns', 'us'];\r\n\r\nfunction _createSecondary(strArray, complex) {\r\n  const residues = complex._residues;\r\n  const nRes = residues.length;\r\n  const resid = new Uint8Array(nRes);\r\n\r\n  const atoms = complex._atoms;\r\n  for (let i = 0, n = strArray.length; i < n; ++i) {\r\n    const atom = atoms[i];\r\n    resid[atom.residue._index] = strArray[i];\r\n  }\r\n\r\n  const secondary = [];\r\n  let rIdx = 0;\r\n  while (rIdx < nRes) {\r\n    if (resid[rIdx] !== 0) {\r\n      const start = rIdx;\r\n      const val = resid[rIdx];\r\n      while (rIdx < nRes - 1 && resid[rIdx + 1] === val\r\n      && residues[rIdx].isConnected(residues[rIdx + 1])) {\r\n        ++rIdx;\r\n      }\r\n      secondary.push({ start, end: rIdx, type: secTypes[val - 1] });\r\n    }\r\n    ++rIdx;\r\n  }\r\n  return secondary;\r\n}\r\n\r\nfunction fromUInt20ToInt20(uint20) {\r\n  return uint20 >= c219 ? uint20 - c220 : uint20;\r\n}\r\n\r\nclass FrameInfo {\r\n  constructor(complex, payload, callbacks) {\r\n    this._complex = complex;\r\n    this._secondary = null;\r\n    this.isLoading = false;\r\n    this._framesRange = {\r\n      start: 0,\r\n      end: -1,\r\n    };\r\n    this.frameIsReady = false;\r\n    this._buffer = null;\r\n    this._frameRequest = null;\r\n    this._callbacks = callbacks;\r\n    if (typeof payload === 'function') {\r\n      this._framesRequestLength = 1;\r\n      this._downloadDataFn = payload;\r\n    } else {\r\n      this.parseBinaryData(payload, true);\r\n    }\r\n    this.reset();\r\n    this.setFrame(0);\r\n  }\r\n\r\n  _prepareBuffer(framesStart, framesEnd) {\r\n    if (framesStart === undefined || framesStart === null) {\r\n      framesStart = 0;\r\n    }\r\n    if (framesEnd === undefined || framesEnd === null) {\r\n      framesEnd = framesStart + this._framesRequestLength;\r\n    }\r\n    if (this._framesCount !== undefined) {\r\n      framesEnd = Math.min(this._framesCount - 1, framesEnd);\r\n    }\r\n    if (this._downloadDataFn) {\r\n      const self = this;\r\n      const onDone = function (data) {\r\n        self.isLoading = false;\r\n        if (self._callbacks && typeof self._callbacks.onLoadStatusChanged === 'function') {\r\n          self._callbacks.onLoadStatusChanged();\r\n        }\r\n        self._buffer = {\r\n          data,\r\n          state: 'ready',\r\n          start: framesStart,\r\n          end: framesEnd,\r\n        };\r\n        if (self._frameRequest !== null) {\r\n          const idx = self._frameRequest;\r\n          self._frameRequest = null;\r\n          self.setFrame(idx);\r\n        }\r\n      };\r\n      const onFail = function () {\r\n        self.isLoading = false;\r\n        if (self._callbacks && typeof self._callbacks.onError === 'function') {\r\n          self._callbacks.onError('Streaming failed');\r\n        }\r\n      };\r\n      if (!this._buffer) {\r\n        this._buffer = {};\r\n      }\r\n      this._buffer.state = 'downloading';\r\n      this.isLoading = true;\r\n      if (self._callbacks && typeof self._callbacks.onLoadStatusChanged === 'function') {\r\n        self._callbacks.onLoadStatusChanged();\r\n      }\r\n      this._downloadDataFn({ start: framesStart, end: framesEnd + 1 }, onDone, onFail);\r\n    }\r\n  }\r\n\r\n  _parseBuffer() {\r\n    if (this._buffer && this._buffer.state === 'ready') {\r\n      this._framesRange = {\r\n        start: this._buffer.start,\r\n        end: this._buffer.end,\r\n      };\r\n      this.parseBinaryData(this._buffer.data, false);\r\n      let _bufferRequestStart = (this._buffer.end + 1) % this._framesCount;\r\n      if (_bufferRequestStart >= this._framesCount) {\r\n        _bufferRequestStart = 0;\r\n      }\r\n      this._buffer = {\r\n        state: 'none',\r\n      };\r\n      this._prepareBuffer(_bufferRequestStart, _bufferRequestStart + this._framesRequestLength);\r\n      if (this._frameRequest !== null) {\r\n        const idx = this._frameRequest;\r\n        this._frameRequest = null;\r\n        this.setFrame(idx);\r\n      }\r\n    }\r\n  }\r\n\r\n  parseBinaryData(arrayBuffer) {\r\n    const dataView = new DataView(arrayBuffer);\r\n    let offset = 0;\r\n    const atomsCount = dataView.getUint32(offset, true);\r\n    offset += 4;\r\n    const framesCount = dataView.getUint32(offset, true);\r\n    this._framesCount = framesCount;\r\n    this._framesRange.end = this._framesRange.end > 0\r\n      ? Math.min(this._framesRange.end, framesCount - 1) : framesCount - 1;\r\n    offset += 4;\r\n    this._atomsCount = atomsCount;\r\n    const maxSize = 1024 * 1024; // 1 MB\r\n    this._framesRequestLength = Math.ceil(maxSize / (atomsCount * 8));\r\n    const chunkedFramesCount = this._framesRange.end - this._framesRange.start + 1;\r\n    if (atomsCount !== this._complex._atoms.length\r\n      || arrayBuffer.byteLength !== cDataOffset + chunkedFramesCount * atomsCount * 8) {\r\n      throw new Error();\r\n    }\r\n    const complex = this._complex;\r\n    let timeStep = dataView.getUint32(offset, true);\r\n    let iName = 0;\r\n    while (timeStep > 1000 && iName < cSecNames.length - 1) {\r\n      timeStep /= 1000;\r\n      ++iName;\r\n    }\r\n\r\n    this._timeStep = `${timeStep.toString()} ${cSecNames[iName]}`;\r\n    offset += 4;\r\n    const secondary = [];\r\n    const posData = new Float32Array(chunkedFramesCount * atomsCount * 3);\r\n    let coordIdx = 0;\r\n    const secondaryArr = new Int8Array(atomsCount);\r\n    for (let j = 0; j < chunkedFramesCount; ++j) {\r\n      for (let i = 0; i < atomsCount; ++i) {\r\n        const hiWord = dataView.getUint32(offset, true);\r\n        offset += 4;\r\n        const loWord = dataView.getUint32(offset, true);\r\n        offset += 4;\r\n        const str = (loWord & cStrMask) >>> cStrShift;\r\n        const x = fromUInt20ToInt20(((loWord & cFirstMask) >>> cFirstShift) >> 0);\r\n        const y = fromUInt20ToInt20((((loWord & cSecMask1) << cSecShift1)\r\n          | ((hiWord & cSecMask2) >>> cSecShift2)) >> 0);\r\n        const z = fromUInt20ToInt20((hiWord & cThirdMask) >> 0);\r\n        secondaryArr[i] = 0;\r\n        if (str > 0 && str < 4) {\r\n          secondaryArr[i] = cHelixIdx;\r\n        } else if (str === 4) {\r\n          secondaryArr[i] = cSheetIdx;\r\n        }\r\n        posData[coordIdx++] = x / 100;\r\n        posData[coordIdx++] = y / 100;\r\n        posData[coordIdx++] = z / 100;\r\n      }\r\n      secondary.push(_createSecondary(secondaryArr, complex));\r\n    }\r\n    this._secondaryData = secondary;\r\n    this._data = posData;\r\n  }\r\n\r\n  nextFrame() {\r\n    this.setFrame((this._currFrame + 1) % this._framesCount);\r\n  }\r\n\r\n  needsColorUpdate(colorer) {\r\n    return colorer instanceof SecondaryStructureColorer;\r\n  }\r\n\r\n  getAtomColor(colorer, atom) {\r\n    return colorer.getResidueColor(this._residues[atom.residue._index], this._complex);\r\n  }\r\n\r\n  getResidueColor(colorer, residue) {\r\n    return colorer.getResidueColor(this._residues[residue._index], this._complex);\r\n  }\r\n\r\n  _updateSecondary() {\r\n    let i;\r\n    const myResidues = this._residues;\r\n    let n = myResidues.length;\r\n    for (i = 0; i < n; ++i) {\r\n      myResidues[i]._secondary = null;\r\n    }\r\n    const sec = this._secondaryData[this._currFrame - this._framesRange.start];\r\n    for (i = 0, n = sec.length; i < n; ++i) {\r\n      const oldSec = sec[i];\r\n      const { start, end } = oldSec;\r\n      const nSec = {\r\n        _start: myResidues[start],\r\n        _end: myResidues[end],\r\n        type: oldSec.type,\r\n        generic: oldSec.generic,\r\n      };\r\n      for (let j = start; j <= end; ++j) {\r\n        myResidues[j]._secondary = nSec;\r\n      }\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    const compRes = this._complex._residues;\r\n    const n = compRes.length;\r\n    this._residues = new Array(n);\r\n    const myResidues = this._residues;\r\n    const getSec = function () {\r\n      return this._secondary;\r\n    };\r\n    for (let i = 0; i < n; ++i) {\r\n      myResidues[i] = {\r\n        _type: compRes[i]._type,\r\n        _isValid: compRes[i]._isValid,\r\n        _controlPoint: null,\r\n        _wingVector: null,\r\n        _secondary: null,\r\n        getSecondary: getSec,\r\n      };\r\n    }\r\n  }\r\n\r\n  setFrame(frameIdx) {\r\n    this.frameIsReady = false;\r\n    if (frameIdx >= this._framesRange.start && frameIdx <= this._framesRange.end) {\r\n      this._currFrame = frameIdx;\r\n      this._cachedResidues = false;\r\n      this._updateSecondary();\r\n      this.frameIsReady = true;\r\n    } else {\r\n      this._frameRequest = frameIdx;\r\n      if (!this._buffer) {\r\n        this._prepareBuffer(frameIdx);\r\n      } else {\r\n        const self = this;\r\n        switch (this._buffer.state) {\r\n          case 'none':\r\n            this._prepareBuffer(frameIdx);\r\n            break;\r\n          case 'ready':\r\n            self._parseBuffer();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  disableEvents() {\r\n    this._callbacks = null;\r\n  }\r\n\r\n  /**\r\n   * Returns link to atom pos vector, clone it if needed\r\n   */\r\n\r\n  static _vec = new THREE.Vector3();\r\n\r\n  getAtomPos(atomIdx) {\r\n    const vec = FrameInfo._vec;\r\n    const self = this;\r\n    const data = self._data;\r\n    const idx = (self._atomsCount * (self._currFrame - self._framesRange.start) + atomIdx) * 3;\r\n    vec.set(data[idx], data[idx + 1], data[idx + 2]);\r\n    return vec;\r\n  }\r\n\r\n  getResidues() {\r\n    if (this._cachedResidues) {\r\n      return this._residues;\r\n    }\r\n    this._complex.updateToFrame(this);\r\n    return this._residues;\r\n  }\r\n}\r\nexport default FrameInfo;\r\n","import _ from 'lodash';\r\nimport settings from '../../settings';\r\nimport utils from '../../utils';\r\nimport gfxutils from '../gfxutils';\r\n\r\n/**\r\n * Create new scene object.\r\n *\r\n * @param {array=} params - Object required params.\r\n * @param {object=} opts - Options to override defaults with.\r\n *\r\n *   These options are copied locally and not kept by reference, so the created instance will not reflect further\r\n *   changes to the `opts` object. However, changes in defaults **will** affect the colorer after its creation.\r\n *\r\n * @exports SceneObject\r\n * @this SceneObject\r\n * @abstract\r\n * @constructor\r\n * @classdesc Basic class for all scene objects that are not reps.\r\n */\r\nclass SceneObject {\r\n  constructor(params, opts) {\r\n    if (this.constructor === SceneObject) {\r\n      throw new Error('Can not instantiate abstract class!');\r\n    }\r\n    /**\r\n     * Object's options inherited (prototyped) from defaults.\r\n     * @type {object}\r\n     */\r\n    this.params = params;\r\n    this.opts = _.merge(utils.deriveDeep(settings.now.objects[this.type], true), opts);\r\n    this.needsRebuild = false;\r\n    this._mesh = null;\r\n    this.id = null;\r\n  }\r\n\r\n  /**\r\n   * Get object identification, probably with options.\r\n   *  @returns {Object} field type contains type information, params - object's formal parameters,\r\n   * opts - changed options\r\n   * Options are returned if they were changed during or after object creation.\r\n   */\r\n  identify() {\r\n    const result = {\r\n      type: this.type,\r\n      params: this.params,\r\n    };\r\n    const diff = utils.objectsDiff(this.opts, settings.now.modes[this.id]);\r\n    if (!_.isEmpty(diff)) {\r\n      result.opts = diff;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  toString() {\r\n    const paramsStr = `o=${this.type},${this.params.join(',')}`;\r\n    const optsStr = utils.compareOptionsWithDefaults(this.opts, settings.defaults.objects[this.type]);\r\n    return paramsStr + optsStr;\r\n  }\r\n\r\n  getGeometry() {\r\n    return this._mesh;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._mesh) {\r\n      gfxutils.destroyObject(this._mesh);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Scene object identifier.\r\n * @type {string}\r\n */\r\nSceneObject.prototype.type = '__';\r\n\r\nexport default SceneObject;\r\n","import * as THREE from 'three';\r\nimport SceneObject from './SceneObject';\r\nimport meshutils from '../meshutils';\r\nimport UberMaterial from '../shaders/UberMaterial';\r\nimport meshes from '../meshes/meshes';\r\nimport settings from '../../settings';\r\n\r\nclass LinesObj extends SceneObject {\r\n  constructor(params, opts) {\r\n    super(params, opts);\r\n    if (params.length < 2) {\r\n      throw new Error('Wrong number of argumets on line object creation!');\r\n    }\r\n    [this._id1, this._id2] = params;\r\n  }\r\n\r\n  _getAtomFromName(complex, atomId) {\r\n    const err = ' - Wrong atom format it must be \\'#CHAIN_NAME.#RESIDUE_NUMBER.#ATOM_NAME\\' (e.g. \\'A.38.CO1\\')';\r\n    const atom1 = complex.getAtomByFullname(atomId);\r\n    if (!atom1) {\r\n      throw new Error(atomId + err);\r\n    }\r\n    return atom1;\r\n  }\r\n\r\n  build(complex) {\r\n    const geom = new THREE.BufferGeometry();\r\n    this._atom1 = this._getAtomFromName(complex, this._id1);\r\n    this._atom2 = this._getAtomFromName(complex, this._id2);\r\n\r\n    const p1 = this._atom1.position;\r\n    const p2 = this._atom2.position;\r\n    const vertices = new Float32Array([\r\n      p1.x, p1.y, p1.z,\r\n      p2.x, p2.y, p2.z,\r\n    ]);\r\n\r\n    geom.setAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n    geom.computeBoundingBox();\r\n\r\n    this._line = new meshes.Line(geom, new UberMaterial({\r\n      lights: false,\r\n      overrideColor: true,\r\n      dashedLine: true,\r\n      fogTransparent: settings.now.bg.transparent,\r\n    }));\r\n    this._line.computeLineDistances();\r\n    this._line.material.setUberOptions({\r\n      fixedColor: new THREE.Color(this.opts.color),\r\n      dashedLineSize: this.opts.dashSize,\r\n      dashedLinePeriod: this.opts.dashSize + this.opts.gapSize,\r\n    });\r\n    this._line.material.updateUniforms();\r\n\r\n    this._line.raycast = function (_raycaster, _intersects) {};\r\n    this._mesh = this._line;\r\n    const transforms = complex.getTransforms();\r\n    if (transforms.length > 0) {\r\n      this._mesh = new THREE.Group();\r\n      this._mesh.add(this._line);\r\n      meshutils.applyTransformsToMeshes(this._mesh, transforms);\r\n    }\r\n  }\r\n\r\n  updateToFrame(frameData) {\r\n    if (!this._atom1 || !this._atom2 || !this._line) {\r\n      return;\r\n    }\r\n\r\n    const geo = this._line.geometry;\r\n    geo.vertices[0].copy(frameData.getAtomPos(this._atom1.index));\r\n    geo.vertices[1].copy(frameData.getAtomPos(this._atom2.index));\r\n    this._line.computeLineDistances();\r\n    geo.computeBoundingSphere();\r\n\r\n    geo.verticesNeedUpdate = true;\r\n  }\r\n}\r\n\r\nLinesObj.prototype.constructor = LinesObj;\r\nLinesObj.prototype.type = 'line';\r\n\r\nexport default LinesObj;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './Outline.frag';\r\n\r\nclass OutlineMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    // add depth outline\r\n    super(params);\r\n\r\n    const settings = {\r\n      uniforms: {\r\n        srcTex: { type: 't', value: null },\r\n        srcDepthTex: { type: 't', value: null },\r\n        srcTexSize: { type: 'v2', value: new THREE.Vector2(512, 512) },\r\n        color: { type: 'v3', value: null },\r\n        threshold: { type: 'f', value: null },\r\n        opacity: { type: 'f', value: 1.0 },\r\n        thickness: { type: 'v2', value: new THREE.Vector2(1, 1) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: true,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    };\r\n\r\n    this.setValues(settings);\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.depth = source.depth;\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n    const defines = {};\r\n\r\n    if (this.depth) {\r\n      defines.DEPTH_OUTLINE = 1;\r\n    }\r\n\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nOutlineMaterial.prototype.depth = false;\r\n\r\nexport default OutlineMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './FXAA.frag';\r\n\r\nclass FXAAMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        srcTex: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        bgColor: { type: 'c', value: new THREE.Color(0xffffff) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n\r\n    this.setValues(params);\r\n  }\r\n\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.depth = source.depth;\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n\r\n    const defines = {};\r\n\r\n    if (this.bgTransparent) {\r\n      defines.BG_TRANSPARENT = 1;\r\n    }\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nFXAAMaterial.prototype.bgTransparent = false;\r\n\r\nexport default FXAAMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AO.frag';\r\nimport noise from '../noiseTexture';\r\n\r\nconst _samplesKernel = [\r\n  // hemisphere samples adopted to sphere\r\n  new THREE.Vector3(0.295184, 0.077723, 0.068429),\r\n  new THREE.Vector3(-0.271976, -0.365221, 0.838363),\r\n  new THREE.Vector3(0.547713, 0.467576, 0.488515),\r\n  new THREE.Vector3(0.662808, -0.031733, 0.584758),\r\n  new THREE.Vector3(-0.025717, 0.218955, 0.657094),\r\n  new THREE.Vector3(-0.310153, -0.365223, 0.370701),\r\n  new THREE.Vector3(-0.101407, -0.006313, 0.747665),\r\n  new THREE.Vector3(-0.769138, 0.360399, 0.086847),\r\n  new THREE.Vector3(-0.271988, -0.275140, 0.905353),\r\n  new THREE.Vector3(0.096740, -0.566901, 0.700151),\r\n  new THREE.Vector3(0.562872, -0.735136, 0.094647),\r\n  new THREE.Vector3(0.379877, 0.359278, 0.190061),\r\n  new THREE.Vector3(0.519064, -0.023055, 0.405068),\r\n  new THREE.Vector3(-0.301036, 0.114696, 0.088885),\r\n  new THREE.Vector3(-0.282922, 0.598305, 0.487214),\r\n  new THREE.Vector3(-0.181859, 0.251670, 0.679702),\r\n  new THREE.Vector3(-0.191463, -0.635818, 0.512919),\r\n  new THREE.Vector3(-0.293655, 0.427423, 0.078921),\r\n  new THREE.Vector3(-0.267983, 0.680534, 0.132880),\r\n  new THREE.Vector3(0.139611, 0.319637, 0.477439),\r\n  new THREE.Vector3(-0.352086, 0.311040, 0.653913),\r\n  new THREE.Vector3(0.321032, 0.805279, 0.487345),\r\n  new THREE.Vector3(0.073516, 0.820734, 0.414183),\r\n  new THREE.Vector3(-0.155324, 0.589983, 0.411460),\r\n  new THREE.Vector3(0.335976, 0.170782, 0.527627),\r\n  new THREE.Vector3(0.463460, -0.355658, 0.167689),\r\n  new THREE.Vector3(0.222654, 0.596550, 0.769406),\r\n  new THREE.Vector3(0.922138, -0.042070, 0.147555),\r\n  new THREE.Vector3(-0.727050, -0.329192, 0.369826),\r\n  new THREE.Vector3(-0.090731, 0.533820, 0.463767),\r\n  new THREE.Vector3(-0.323457, -0.876559, 0.238524),\r\n  new THREE.Vector3(-0.663277, -0.372384, 0.342856),\r\n];\r\n\r\nclass AOMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        noiseTexture: { type: 't', value: noise.noiseTexture },\r\n        noiseTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / noise.noiseWidth, 1.0 / noise.noiseHeight) },\r\n        diffuseTexture: { type: 't', value: null },\r\n        normalTexture: { type: 't', value: null },\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        camNearFar: { type: 'v2', value: new THREE.Vector2(1.0, 10.0) },\r\n        projMatrix: { type: 'mat4', value: new THREE.Matrix4() },\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        samplesKernel: { type: 'v3v', value: _samplesKernel },\r\n        kernelRadius: { type: 'f', value: 1.0 },\r\n        depthThreshold: { type: 'f', value: 1.0 },\r\n        factor: { type: 'f', value: 1.0 },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n  }\r\n}\r\n\r\nexport default AOMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AOHorBlur.frag';\r\n\r\nconst _kernelOffsets = [-2.0, -1.0, 0.0, 1.0, 2.0];\r\n\r\nclass AOHorBlurMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        aoMap: { type: 't', value: null },\r\n        samplesOffsets: { type: 'fv1', value: _kernelOffsets },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n  }\r\n}\r\n\r\nexport default AOHorBlurMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './AOVertBlurWithBlend.frag';\r\n\r\nconst _kernelOffsets = [-2.0, -1.0, 0.0, 1.0, 2.0];\r\n\r\nclass AOVertBlurWithBlendMaterial extends THREE.RawShaderMaterial {\r\n  constructor(params) {\r\n    super(params);\r\n\r\n    // set default values\r\n    this.setValues.call(this, {\r\n      uniforms: {\r\n        diffuseTexture: { type: 't', value: null },\r\n        depthTexture: { type: 't', value: null },\r\n        srcTexelSize: { type: 'v2', value: new THREE.Vector2(1.0 / 512.0, 1.0 / 512.0) },\r\n        aoMap: { type: 't', value: null },\r\n        samplesOffsets: { type: 'fv1', value: _kernelOffsets },\r\n        projMatrix: { type: 'mat4', value: new THREE.Matrix4() },\r\n        aspectRatio: { type: 'f', value: 0.0 },\r\n        tanHalfFOV: { type: 'f', value: 0.0 },\r\n        fogNearFar: { type: 'v2', value: new THREE.Vector2(100.0, 100.0) },\r\n        fogColor: { type: 'v4', value: new THREE.Vector4(0.0, 0.5, 0.0, 1.0) },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    });\r\n\r\n    this.setValues(params);\r\n  }\r\n\r\n  setValues(values) {\r\n    if (typeof values === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    // set direct values\r\n    super.setValues(values);\r\n\r\n    const defines = {};\r\n\r\n    if (this.useFog) {\r\n      defines.USE_FOG = 1;\r\n    }\r\n    if (this.fogTransparent) {\r\n      defines.FOG_TRANSPARENT = 1;\r\n    }\r\n    // set dependent values\r\n    this.defines = defines;\r\n  }\r\n}\r\n\r\nAOVertBlurWithBlendMaterial.prototype.useFog = true;\r\nAOVertBlurWithBlendMaterial.prototype.fogTransparent = false;\r\n\r\nexport default AOVertBlurWithBlendMaterial;\r\n","/* eslint-disable no-magic-numbers */\r\n/* eslint-disable guard-for-in */\r\nimport * as THREE from 'three';\r\nimport vertexShader from './ScreenQuad.vert';\r\nimport fragmentShader from './Anaglyph.frag';\r\n\r\nclass AnaglyphMaterial extends THREE.RawShaderMaterial {\r\n  constructor() {\r\n    super();\r\n    const settings = {\r\n      uniforms: {\r\n        srcL: { type: 't', value: null },\r\n        srcR: { type: 't', value: null },\r\n      },\r\n      vertexShader,\r\n      fragmentShader,\r\n      transparent: false,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n    };\r\n    this.setValues(settings);\r\n  }\r\n}\r\n\r\nexport default AnaglyphMaterial;\r\n","import * as THREE from 'three';\r\nimport settings from '../settings';\r\n\r\nclass View {\r\n  constructor() {\r\n    this.position = new THREE.Vector3(0, 0, 0);\r\n    this.scale = 1;\r\n    this.orientation = new THREE.Quaternion(0, 0, 0, 1);\r\n  }\r\n\r\n  set(position, scale, orientation) {\r\n    this.position = position;\r\n    this.scale = scale;\r\n    this.orientation = orientation;\r\n  }\r\n}\r\n\r\nconst _transitionTime = 1.5; // in seconds\r\n\r\nexport default class ViewInterpolator {\r\n  setup(startView, endView) {\r\n    this._startTime = undefined;\r\n    this._endTime = undefined;\r\n    this._isPaused = false;\r\n\r\n    this._srcView = startView;\r\n    this._dstView = endView;\r\n    this._isMoving = false;\r\n  }\r\n\r\n  isMoving() {\r\n    return this._isMoving;\r\n  }\r\n\r\n  wasStarted() {\r\n    return typeof this._startTime !== 'undefined' && typeof this._endTime !== 'undefined';\r\n  }\r\n\r\n  start() {\r\n    this._startTime = Date.now();\r\n    const transTime = settings.now.interpolateViews ? _transitionTime * 1000 : 0;\r\n    this._endTime = this._startTime + transTime;\r\n    this._isMoving = true;\r\n  }\r\n\r\n  getCurrentView() {\r\n    if (typeof this._srcView === 'undefined' || typeof this._dstView === 'undefined'\r\n      || !this._isMoving || !this.wasStarted()) {\r\n      return { success: false };\r\n    }\r\n\r\n    let view = this.createView();\r\n    const time = Date.now();\r\n    if (time > this._endTime) {\r\n      view = this._dstView;\r\n      this.reset();\r\n      return { success: true, view };\r\n    }\r\n\r\n    const factor = (time - this._startTime) / (this._endTime - this._startTime);\r\n    view.position.copy(this._srcView.position);\r\n    view.position.lerp(this._dstView.position, factor);\r\n    view.scale = (1 - factor) * this._srcView.scale + factor * this._dstView.scale;\r\n    view.orientation.copy(this._srcView.orientation);\r\n    view.orientation.slerp(this._dstView.orientation, factor);\r\n    return { success: true, view };\r\n  }\r\n\r\n  reset() {\r\n    this._startTime = this._endTime = 0;\r\n    this._isMoving = false;\r\n  }\r\n\r\n  pause() {\r\n    if (!this._isPaused) {\r\n      this.setup(this.getCurrentView().view, this._dstView);\r\n      this._isPaused = true;\r\n    }\r\n  }\r\n\r\n  resume() {\r\n    this._isPaused = false;\r\n  }\r\n\r\n  createView() {\r\n    return new View();\r\n  }\r\n}\r\n","import _ from 'lodash';\r\nimport makeContextDependent from './makeContextDependent';\r\n\r\nconst MAX_COOKIE_LEN = 4000;\r\nconst COUNT_SUFFIX = 'Cnt';\r\n\r\nfunction _chunkString(string, chunkLen) {\r\n  const l = string.length;\r\n  const chunks = [];\r\n  for (let c = 0, lc = 0; lc < l; c++, lc += chunkLen) {\r\n    chunks[c] = string.slice(lc, lc + chunkLen);\r\n  }\r\n  return chunks;\r\n}\r\n\r\n/**\r\n * Create new context dependent Cookie holder object.\r\n * @param context\r\n * @param {Object} opts - options\r\n * @param {string} opts.path - cookie path\r\n * @constructor\r\n */\r\nfunction Cookies(context, opts) {\r\n  this.context = context;\r\n  this._opts = _.merge({\r\n    path: '/',\r\n  }, opts);\r\n}\r\n\r\nmakeContextDependent(Cookies.prototype);\r\n\r\n/**\r\n * Remove cookie by the name.\r\n * @param key\r\n */\r\nCookies.prototype.removeCookie = function (key) {\r\n  const cntKey = this._toCount(key);\r\n  let cntVal = this._getSimpleCookie(cntKey);\r\n  if (!cntVal) {\r\n    this._removeSimpleCookie(key);\r\n    return;\r\n  }\r\n  this._removeSimpleCookie(cntKey);\r\n  cntVal = parseInt(cntVal, 10);\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    this._removeSimpleCookie(key + i);\r\n  }\r\n};\r\n\r\n/**\r\n * Set new cookie value. Automatically splits\r\n * values that are too large into multiple cookies.\r\n * @param key\r\n * @param value\r\n */\r\nCookies.prototype.setCookie = function (key, value) {\r\n  this.removeCookie(key);\r\n  value = encodeURIComponent(value);\r\n  const values = _chunkString(value, MAX_COOKIE_LEN - key.length - 1);\r\n  const cntVal = values.length;\r\n  if (cntVal === 1) {\r\n    this._setSimpleCookie(key, value);\r\n    return;\r\n  }\r\n  const cntKey = this._toCount(key);\r\n  this._setSimpleCookie(cntKey, cntVal.toString());\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    this._setSimpleCookie(key + i, values[i]);\r\n  }\r\n};\r\n\r\n/**\r\n * Obtain the value of a compound cookie.\r\n * @param key\r\n */\r\nCookies.prototype.getCookie = function (key) {\r\n  const cntKey = this._toCount(key);\r\n  let cntVal = this._getSimpleCookie(cntKey);\r\n  if (!cntVal) {\r\n    return this._getSimpleCookie(key);\r\n  }\r\n  cntVal = parseInt(cntVal, 10);\r\n  const value = [];\r\n  for (let i = 0; i < cntVal; ++i) {\r\n    value[i] = this._getSimpleCookie(key + i);\r\n  }\r\n  return value.join('');\r\n};\r\n\r\nCookies.prototype._toCount = function (key) {\r\n  return key + COUNT_SUFFIX;\r\n};\r\n\r\nCookies.prototype._removeSimpleCookie = function (key) {\r\n  document.cookie = `${key}=; expires=Thu, 01 Jan 1970 00:00:01 GMT;`;\r\n};\r\n\r\nCookies.prototype._getExpirationDate = function () {\r\n  const today = new Date();\r\n  const EXP_PERIOD_YEARS = 10;\r\n  today.setFullYear(today.getFullYear() + EXP_PERIOD_YEARS);\r\n  return today;\r\n};\r\n\r\nCookies.prototype._setSimpleCookie = function (key, value) {\r\n  document.cookie = `${key}=${value\r\n  };expires=${this._getExpirationDate().toUTCString()\r\n  };path=${this._opts.path}`;\r\n};\r\n\r\nCookies.prototype._getSimpleCookie = function (key) {\r\n  const matches = document.cookie.match(new RegExp(`(?:^|; )${key}=([^;]*)`));\r\n  return matches ? decodeURIComponent(matches[1]) : '';\r\n};\r\n\r\nCookies.prototype._exists = function (key) {\r\n  return document.cookie.match(new RegExp(`(?:^|; )${key}=([^;]*)`));\r\n};\r\n\r\nexport default Cookies;\r\n","/*\r\n * Toggling WebVR is done through button.click because of limitations on calling requestPresent in webVR:\r\n * VRDisplay::requestPresent should be called from user gesture:\r\n * https://developer.mozilla.org/en-US/docs/Web/API/VRDisplay/requestPresent\r\n */\r\nexport default function (webVRPoC) {\r\n  function showEnterVR(button) {\r\n    button.style.display = '';\r\n    button.style.cursor = 'pointer';\r\n    button.style.left = 'calc(50% - 50px)';\r\n    button.style.width = '100px';\r\n\r\n    button.textContent = 'ENTER VR';\r\n\r\n    let currentSession = null;\r\n\r\n    function onSessionEnded(/* event */) {\r\n      currentSession.removeEventListener('end', onSessionEnded);\r\n      button.textContent = 'ENTER VR';\r\n      currentSession = null;\r\n    }\r\n\r\n    function onSessionStarted(session) {\r\n      session.addEventListener('end', onSessionEnded);\r\n      webVRPoC._gfx.renderer.xr.setReferenceSpaceType('local');\r\n      webVRPoC._gfx.renderer.xr.setSession(session);\r\n      button.textContent = 'EXIT VR';\r\n      currentSession = session;\r\n    }\r\n\r\n    button.onmouseenter = function () { button.style.opacity = '1.0'; };\r\n    button.onmouseleave = function () { button.style.opacity = '0.5'; };\r\n\r\n    button.onclick = function () {\r\n      if (currentSession === null) {\r\n        // WebXR's requestReferenceSpace only works if the corresponding feature\r\n        // was requested at session creation time. For simplicity, just ask for\r\n        // the interesting ones as optional features, but be aware that the\r\n        // requestReferenceSpace call will fail if it turns out to be unavailable.\r\n        // ('local' is always available for immersive sessions and doesn't need to\r\n        // be requested separately.)\r\n\r\n        const sessionInit = { optionalFeatures: ['local-floor', 'bounded-floor'] };\r\n        navigator.xr.requestSession('immersive-vr', sessionInit).then(onSessionStarted);\r\n        webVRPoC.moveSceneBehindHeadset();\r\n      } else {\r\n        currentSession.end();\r\n      }\r\n    };\r\n  }\r\n\r\n  function showWebXRNotFound(button) {\r\n    button.style.display = '';\r\n    button.style.cursor = 'auto';\r\n    button.style.left = 'calc(50% - 75px)';\r\n    button.style.width = '150px';\r\n    button.textContent = 'VR NOT FOUND';\r\n    button.onmouseenter = null;\r\n    button.onmouseleave = null;\r\n    button.onclick = null;\r\n  }\r\n\r\n  function stylizeElement(element) {\r\n    element.style.position = 'absolute';\r\n    element.style.bottom = '20px';\r\n    element.style.padding = '12px 6px';\r\n    element.style.border = '1px solid #fff';\r\n    element.style.borderRadius = '4px';\r\n    element.style.background = 'transparent';\r\n    element.style.color = '#fff';\r\n    element.style.font = 'normal 13px sans-serif';\r\n    element.style.textAlign = 'center';\r\n    element.style.opacity = '0.5';\r\n    element.style.outline = 'none';\r\n    element.style.zIndex = '999';\r\n  }\r\n\r\n  if ('xr' in navigator) {\r\n    const button = document.createElement('button');\r\n    button.style.display = 'none';\r\n    stylizeElement(button);\r\n    navigator.xr.isSessionSupported('immersive-vr').then((supported) => (\r\n      supported ? showEnterVR(button) : showWebXRNotFound(button)\r\n    ));\r\n    return button;\r\n  }\r\n  const message = document.createElement('a');\r\n  message.href = 'https://webvr.info';\r\n  message.innerHTML = 'WEBXR NOT SUPPORTED';\r\n  message.style.left = 'calc(50% - 90px)';\r\n  message.style.width = '180px';\r\n  message.style.textDecoration = 'none';\r\n  stylizeElement(message);\r\n  return message;\r\n}\r\n","import * as THREE from 'three';\r\nimport createWebVRButton from './createWebVRButton';\r\nimport gfxutils from '../gfxutils';\r\nimport logger from '../../utils/logger';\r\nimport settings from '../../settings';\r\nimport UberMaterial from '../shaders/UberMaterial';\r\n\r\nexport default class WebVRPoC {\r\n  constructor(onToggle) {\r\n    this._mainCamera = new THREE.PerspectiveCamera();\r\n    this._button = null;\r\n    this._onToggle = onToggle;\r\n\r\n    this._molContainer = new gfxutils.RCGroup();\r\n    this._user = new gfxutils.RCGroup();\r\n    this._scalingPivot = new THREE.Object3D();\r\n    this._user.add(this._scalingPivot);\r\n\r\n    this._controller1 = null;\r\n    this._controller2 = null;\r\n    this._pressedGripsCounter = 0;\r\n    this._distance = 0;\r\n\r\n    this._gfx = null;\r\n  }\r\n\r\n  startScalingByControllers() {\r\n    // reset scale\r\n    this._distance = this._controller1.position.distanceTo(this._controller2.position);\r\n    gfxutils.getMiddlePoint(this._controller1.position, this._controller2.position, this._scalingPivot.position);\r\n    this._scalingPivot.scale.set(1, 1, 1);\r\n    this._scalingPivot.updateMatrix();\r\n    this._scalingPivot.updateMatrixWorld();\r\n    // link molecule to pivot\r\n    this._scalingPivot.addSavingWorldTransform(this._molContainer);\r\n  }\r\n\r\n  stopScalingByControllers() {\r\n    this._gfx.scene.addSavingWorldTransform(this._molContainer);\r\n  }\r\n\r\n  handleGripsDown(event) {\r\n    this._pressedGripsCounter++;\r\n    if (this._pressedGripsCounter === 2) {\r\n      this.startScalingByControllers();\r\n    } else if (this._pressedGripsCounter === 1) {\r\n      event.target.addSavingWorldTransform(this._molContainer);\r\n    }\r\n  }\r\n\r\n  handleGripsUp(event) {\r\n    this._pressedGripsCounter--;\r\n    if (this._pressedGripsCounter === 1) {\r\n      this.stopScalingByControllers();\r\n      // reattach molecule to other controller\r\n      const anotherController = event.target === this._controller1 ? this._controller2 : this._controller1;\r\n      anotherController.addSavingWorldTransform(this._molContainer);\r\n    } else if (this._pressedGripsCounter === 0) {\r\n      this._gfx.scene.addSavingWorldTransform(this._molContainer);\r\n    }\r\n  }\r\n\r\n  enable(gfx) {\r\n    if (!gfx) {\r\n      logger.warn('WebVR couldn\\'t be enabled, because gfx is not defined');\r\n      return;\r\n    }\r\n    this._gfx = gfx;\r\n    const { renderer, camera } = gfx;\r\n    if (!renderer) {\r\n      throw new Error('No renderer is available to toggle WebVR');\r\n    }\r\n    if (!camera) {\r\n      throw new Error('No camera is available to toggle WebVR');\r\n    }\r\n\r\n    // enable xr in renderer\r\n    renderer.xr.enabled = true;\r\n    // add button for turning vr mode\r\n    if (!this._button) {\r\n      this._button = createWebVRButton(this);\r\n      document.body.appendChild(this._button);\r\n    } else {\r\n      this._button.style.display = 'block';\r\n    }\r\n    // store fog setting\r\n    this._mainFog = settings.now.fog;\r\n    settings.set('fog', false);\r\n\r\n    this._plugVRNodesIntoScene(gfx, renderer);\r\n    this._setControllersListeners();\r\n\r\n    // make some Miew job\r\n    if (this._onToggle) {\r\n      this._onToggle(true);\r\n    }\r\n  }\r\n\r\n  _plugVRNodesIntoScene(gfx, renderer) {\r\n    // store common scene camera\r\n    this._mainCamera.copy(gfx.camera);\r\n    // add hierarchical structure for webVR into scene\r\n    gfx.scene.add(this._user);\r\n    // turn on webvr transformation\r\n    gfx.scene.add(this._molContainer);\r\n    this._molContainer.add(gfx.root);\r\n\r\n    this._controller1 = renderer.xr.getController(0);\r\n    this._controller2 = renderer.xr.getController(1);\r\n    const mesh = this._createControllerMesh();\r\n    this._controller1.add(mesh);\r\n    this._controller2.add(mesh.clone());\r\n    this._user.add(this._controller1);\r\n    this._user.add(this._controller2);\r\n  }\r\n\r\n  _setControllersListeners() {\r\n    this._controller1.addEventListener('selectstart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller1.addEventListener('selectend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n    this._controller2.addEventListener('selectstart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller2.addEventListener('selectend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n\r\n    this._controller1.addEventListener('squeezestart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller1.addEventListener('squeezeend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n    this._controller2.addEventListener('squeezestart', (event) => {\r\n      this.handleGripsDown(event);\r\n    });\r\n    this._controller2.addEventListener('squeezeend', (event) => {\r\n      this.handleGripsUp(event);\r\n    });\r\n  }\r\n\r\n  disable() {\r\n    if (!this._gfx) {\r\n      return;\r\n    }\r\n    const { renderer, camera } = this._gfx;\r\n    if (!renderer) {\r\n      throw new Error('No renderer is available to toggle WebVR');\r\n    }\r\n\r\n    // nullify webxr callback for animation frame\r\n    renderer.setAnimationLoop(null);\r\n    const session = renderer.xr.getSession();\r\n    if (session) {\r\n      session.end();\r\n    }\r\n    renderer.xr.enabled = false;\r\n    // remove button of VR entering\r\n    if (this._button) {\r\n      this._button.style.display = 'none';\r\n    }\r\n    // restore fog param\r\n    settings.set('fog', this._mainFog);\r\n\r\n    this._unplugVRNodesFromScene(camera);\r\n\r\n    // make some Miew job\r\n    if (this._onToggle) {\r\n      this._onToggle(false);\r\n    }\r\n  }\r\n\r\n  _unplugVRNodesFromScene(camera) {\r\n    // restore common camera\r\n    if (this._mainCamera && camera) {\r\n      camera.copy(this._mainCamera);\r\n    }\r\n    // turn off webvr transformation\r\n    const root = this._molContainer.children[0];\r\n    if (root) {\r\n      this._gfx.scene.add(root);\r\n    }\r\n    this._molContainer.parent.remove(this._molContainer);\r\n    if (this._user) {\r\n      this._gfx.scene.remove(this._user);\r\n    }\r\n    // free scene nodes\r\n    this._molContainer = null;\r\n    this._user = null;\r\n    this._scalingPivot = null;\r\n    this._user = null;\r\n    this._controller1 = null;\r\n    this._controller2 = null;\r\n  }\r\n\r\n  _createControllerMesh() {\r\n    // visualize controllers with cylinders\r\n    const geometry = new THREE.CylinderGeometry(0.04, 0.04, 0.3);\r\n    const material = new UberMaterial({ lights: false, overrideColor: true });\r\n    material.setUberOptions({ fixedColor: new THREE.Color(0x4444ff) });\r\n    material.updateUniforms();\r\n    const cylinder = new THREE.Mesh(geometry, material);\r\n    cylinder.rotateX(-Math.PI / 2);\r\n    return cylinder;\r\n  }\r\n\r\n  updateMoleculeScale() {\r\n    if (!this._controller1 || !this._controller2) {\r\n      return;\r\n    }\r\n\r\n    const self = this;\r\n    // update molecule scaling by controllers\r\n    if (self._pressedGripsCounter === 2) {\r\n      // recalc scaling pivot\r\n      gfxutils.getMiddlePoint(self._controller1.position, self._controller2.position, self._scalingPivot.position);\r\n      // recalc scaler\r\n      const dist = self._controller1.position.distanceTo(self._controller2.position);\r\n      const scaler = dist / self._distance;\r\n      self._scalingPivot.scale.multiplyScalar(scaler);\r\n      // save cur distance for next frame\r\n      self._distance = dist;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reposition molecule right before the camera.\r\n   * @note The proper way is to initiate headset in the place of common Miew's camera.\r\n   * But threejs limitations on setting new XRReferenceSpace enforce the molecule repositioning\r\n   * Hope, something will change.\r\n   */\r\n  moveSceneBehindHeadset() {\r\n    const gfx = this._gfx;\r\n    const { camera } = gfx;\r\n\r\n    // set container position in camera space\r\n    const container = this._molContainer;\r\n    container.matrix.identity();\r\n    container.position.set(0, 0, -4.0);\r\n    container.updateMatrix();\r\n\r\n    // update container world matrix\r\n    container.matrixWorld.multiplyMatrices(camera.matrixWorld, container.matrix);\r\n    // readd to scene\r\n    gfx.scene.addSavingWorldTransform(container);\r\n    if (this._onToggle) {\r\n      this._onToggle(true);\r\n    }\r\n  }\r\n\r\n  getCanvas() {\r\n    const gfx = this._gfx;\r\n    return (gfx && gfx.renderer) ? gfx.renderer.domElement : null;\r\n  }\r\n}\r\n","/* global PACKAGE_VERSION:false */\r\nimport _ from 'lodash';\r\nimport * as THREE from 'three';\r\nimport { Spinner } from 'spin.js';\r\nimport Stats from './gfx/Stats';\r\nimport utils from './utils';\r\nimport JobHandle from './utils/JobHandle';\r\nimport options from './options';\r\nimport settings from './settings';\r\nimport chem from './chem';\r\nimport Visual from './Visual';\r\nimport ComplexVisual from './ComplexVisual';\r\nimport Complex from './chem/Complex';\r\nimport VolumeVisual from './VolumeVisual';\r\nimport io from './io/io';\r\nimport modes from './gfx/modes';\r\nimport colorers from './gfx/colorers';\r\nimport palettes from './gfx/palettes';\r\nimport materials from './gfx/materials';\r\nimport Representation from './gfx/Representation';\r\nimport CSS2DRenderer from './gfx/CSS2DRenderer';\r\nimport ObjectControls from './ui/ObjectControls';\r\nimport Picker from './ui/Picker';\r\nimport Axes from './gfx/Axes';\r\nimport gfxutils from './gfx/gfxutils';\r\nimport meshutils from './gfx/meshutils';\r\nimport FrameInfo from './gfx/FrameInfo';\r\nimport meshes from './gfx/meshes/meshes';\r\nimport LinesObject from './gfx/objects/LinesObj';\r\nimport UberMaterial from './gfx/shaders/UberMaterial';\r\nimport OutlineMaterial from './gfx/shaders/OutlineMaterial';\r\nimport FXAAMaterial from './gfx/shaders/FXAAMaterial';\r\nimport AOMaterial from './gfx/shaders/AOMaterial';\r\nimport AOHorBlurMaterial from './gfx/shaders/AOHorBlurMaterial';\r\nimport AOVertBlurWithBlendMaterial from './gfx/shaders/AOVertBlurWithBlendMaterial';\r\nimport AnaglyphMaterial from './gfx/shaders/AnaglyphMaterial';\r\nimport VolumeMaterial from './gfx/shaders/VolumeMaterial';\r\nimport ViewInterpolator from './gfx/ViewInterpolator';\r\nimport EventDispatcher from './utils/EventDispatcher';\r\nimport logger from './utils/logger';\r\nimport Cookies from './utils/Cookies';\r\nimport capabilities from './gfx/capabilities';\r\nimport WebVRPoC from './gfx/vr/WebVRPoC';\r\nimport vertexScreenQuadShader from './gfx/shaders/ScreenQuad.vert';\r\nimport fragmentScreenQuadFromDistTex from './gfx/shaders/ScreenQuadFromDistortionTex.frag';\r\nimport getTopWindow from './utils/getTopWindow';\r\n\r\nconst {\r\n  selectors,\r\n  Atom,\r\n  Residue,\r\n  Chain,\r\n  Molecule,\r\n} = chem;\r\n\r\nconst EDIT_MODE = { COMPLEX: 0, COMPONENT: 1, FRAGMENT: 2 };\r\n\r\nconst LOADER_NOT_FOUND = 'Could not find suitable loader for this source';\r\nconst PARSER_NOT_FOUND = 'Could not find suitable parser for this source';\r\n\r\n// Color management changed a lot in threejs 152+ version.\r\n// To keep miew colors we disable the new color management system\r\nTHREE.ColorManagement.enabled = false;\r\n\r\nconst { createElement } = utils;\r\n\r\nfunction updateFogRange(fog, center, radius) {\r\n  fog.near = center - radius * settings.now.fogNearFactor;\r\n  fog.far = center + radius * settings.now.fogFarFactor;\r\n}\r\n\r\nfunction removeExtension(fileName) {\r\n  const dot = fileName.lastIndexOf('.');\r\n  if (dot >= 0) {\r\n    fileName = fileName.substr(0, dot);\r\n  }\r\n  return fileName;\r\n}\r\n\r\nfunction hasValidResidues(complex) {\r\n  let hasValidRes = false;\r\n  complex.forEachComponent((component) => {\r\n    component.forEachResidue((residue) => {\r\n      if (residue._isValid) {\r\n        hasValidRes = true;\r\n      }\r\n    });\r\n  });\r\n  return hasValidRes;\r\n}\r\n\r\nfunction reportProgress(log, action, percent) {\r\n  const TOTAL_PERCENT = 100;\r\n  if (percent !== undefined) {\r\n    log.debug(`${action}... ${Math.floor(percent * TOTAL_PERCENT)}%`);\r\n  } else {\r\n    log.debug(`${action}...`);\r\n  }\r\n}\r\n\r\nfunction chooseFogColor() {\r\n  return settings.now.fogColorEnable ? settings.now.fogColor : settings.now.bg.color;\r\n}\r\n\r\n// ////////////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Main 3D Molecular Viewer class.\r\n *\r\n * @param {object} opts - Viewer options.\r\n * @param {HTMLElement=} opts.container - DOM element that serves as a viewer container.\r\n * @param {object=} opts.settings - An object with properties to override default settings.\r\n * @param {string=} opts.settingsCookie='settings' - The name of the cookie to save current settings to.\r\n * @param {string=} opts.cookiePath='/' - The path option for cookies. Defaults to root.\r\n *\r\n * @exports Miew\r\n * @constructor\r\n */\r\nfunction Miew(opts) {\r\n  EventDispatcher.call(this);\r\n  this._opts = _.merge({\r\n    settingsCookie: 'settings',\r\n    cookiePath: '/',\r\n  }, opts);\r\n  /** @type {?object} */\r\n  this._gfx = null;\r\n  /** @type {ViewInterpolator} */\r\n  this._interpolator = new ViewInterpolator();\r\n  /** @type {HTMLElement} */\r\n  this._container = (opts && opts.container)\r\n    || document.getElementById('miew-container')\r\n    || _.head(document.getElementsByClassName('miew-container'))\r\n    || document.body;\r\n  /** @type {HTMLElement} */\r\n  this._containerRoot = this._container;\r\n\r\n  /** @type {boolean} */\r\n  this._running = false;\r\n  /** @type {boolean} */\r\n  this._halting = false;\r\n  /** @type {boolean} */\r\n  this._building = false;\r\n  /** @type {boolean} */\r\n  this._needRender = true;\r\n  /** @type {boolean} */\r\n  this._hotKeysEnabled = true;\r\n\r\n  /** @type {Settings} */\r\n  this.settings = settings;\r\n  const log = logger;\r\n  log.console = DEBUG;\r\n  log.level = DEBUG ? 'debug' : 'info';\r\n  /**\r\n   * @type {Logger}\r\n   * @example\r\n   * miew.logger.addEventListener('message', function _onLogMessage(evt) {\r\n   *   console.log(evt.message);\r\n   * });\r\n   */\r\n  this.logger = log;\r\n\r\n  this._cookies = new Cookies(this);\r\n  this.restoreSettings();\r\n  if (opts && opts.settings) {\r\n    this.settings.set(opts.settings);\r\n  }\r\n\r\n  /** @type {?Spinner} */\r\n  this._spinner = null;\r\n  /** @type {JobHandle[]} */\r\n  this._loading = [];\r\n  /** @type {?number}\r\n   * @deprecated until Animation system refactoring\r\n   */\r\n  this._animInterval = null;\r\n\r\n  /** @type {object} */\r\n  this._visuals = {};\r\n  /** @type {?string} */\r\n  this._curVisualName = null;\r\n\r\n  /** @type {array} */\r\n  this._objects = [];\r\n\r\n  /** @type {object} */\r\n  this._sourceWindow = null;\r\n\r\n  this.reset();\r\n\r\n  if (this._repr) {\r\n    log.debug(`Selected ${this._repr.mode.name} mode with ${this._repr.colorer.name} colorer.`);\r\n  }\r\n\r\n  const self = this;\r\n  Miew.registeredPlugins.forEach((plugin) => {\r\n    plugin.call(self);\r\n  });\r\n\r\n  this._initOnSettingsChanged();\r\n}\r\n\r\nMiew.prototype = Object.create(EventDispatcher.prototype);\r\nMiew.prototype.constructor = Miew;\r\n\r\nMiew.prototype.getMaxRepresentationCount = function () {\r\n  return ComplexVisual.NUM_REPRESENTATION_BITS;\r\n};\r\n\r\n/**\r\n * Replace viewer container contents with a DOM element.\r\n * @param {HTMLElement} container - parent container.\r\n * @param {HTMLElement} element - DOM element to show.\r\n * @private\r\n */\r\nfunction _setContainerContents(container, element) {\r\n  const parent = container;\r\n  while (parent.firstChild) {\r\n    parent.removeChild(parent.firstChild);\r\n  }\r\n  parent.appendChild(element);\r\n}\r\n\r\n/**\r\n * Update Shadow Camera target position and frustum.\r\n * @private\r\n */\r\nMiew.prototype._updateShadowCamera = (function () {\r\n  const shadowMatrix = new THREE.Matrix4();\r\n  const direction = new THREE.Vector3();\r\n  const OBB = { center: new THREE.Vector3(), halfSize: new THREE.Vector3() };\r\n\r\n  return function () {\r\n    this._gfx.scene.updateMatrixWorld();\r\n    for (let i = 0; i < this._gfx.scene.children.length; i++) {\r\n      if (this._gfx.scene.children[i].type === 'DirectionalLight') {\r\n        const light = this._gfx.scene.children[i];\r\n        shadowMatrix.copy(light.shadow.camera.matrixWorldInverse);\r\n        this.getOBB(shadowMatrix, OBB);\r\n\r\n        direction.subVectors(light.target.position, light.position);\r\n        light.position.subVectors(OBB.center, direction);\r\n        light.target.position.copy(OBB.center);\r\n\r\n        light.shadow.bias = 0.09;\r\n        light.shadow.camera.bottom = -OBB.halfSize.y;\r\n        light.shadow.camera.top = OBB.halfSize.y;\r\n        light.shadow.camera.right = OBB.halfSize.x;\r\n        light.shadow.camera.left = -OBB.halfSize.x;\r\n        light.shadow.camera.near = direction.length() - OBB.halfSize.z;\r\n        light.shadow.camera.far = direction.length() + OBB.halfSize.z;\r\n\r\n        light.shadow.camera.updateProjectionMatrix();\r\n      }\r\n    }\r\n  };\r\n}());\r\n\r\n/**\r\n * Initialize the viewer.\r\n * @returns {boolean} true on success.\r\n * @throws Forwards exception raised during initialization.\r\n * @see Miew#term\r\n */\r\nMiew.prototype.init = function () {\r\n  const container = this._container;\r\n  const elem = utils.createElement('div', { class: 'miew-canvas' });\r\n  _setContainerContents(container, elem);\r\n  this._container = elem;\r\n\r\n  const frag = document.createDocumentFragment();\r\n  frag.appendChild(this._msgMode = createElement(\r\n    'div',\r\n    { class: 'mode-message overlay' },\r\n    createElement('p', {}, 'COMPONENT EDIT MODE'),\r\n  ));\r\n  frag.appendChild(this._msgAtomInfo = createElement(\r\n    'div',\r\n    { class: 'atom-info overlay' },\r\n    createElement('p', {}, ''),\r\n  ));\r\n  container.appendChild(frag);\r\n\r\n  if (this._gfx !== null) { // block double init\r\n    return true;\r\n  }\r\n\r\n  const self = this;\r\n  this._showMessage('Viewer is being initialized...');\r\n  try {\r\n    this._initGfx();\r\n\r\n    this._initListeners();\r\n    this._spinner = new Spinner({\r\n      lines: 13,\r\n      length: 28,\r\n      width: 14,\r\n      radius: 42,\r\n      color: '#fff',\r\n      zIndex: 700,\r\n    });\r\n\r\n    const target = getTopWindow();\r\n    target.addEventListener('keydown', (event) => {\r\n      self._onKeyDown(event);\r\n    });\r\n\r\n    target.addEventListener('keyup', (event) => {\r\n      self._onKeyUp(event);\r\n    });\r\n\r\n    this._objectControls = new ObjectControls(\r\n      this._gfx.root,\r\n      this._gfx.pivot,\r\n      this._gfx.camera,\r\n      this._gfx.renderer.domElement,\r\n      () => self._getAltObj(),\r\n    );\r\n    this._objectControls.addEventListener('change', (e) => {\r\n      if (settings.now.shadow.on) {\r\n        self._updateShadowCamera();\r\n      }\r\n      // route rotate, zoom, translate and translatePivot events to the external API\r\n      switch (e.action) {\r\n        case 'rotate':\r\n          self.dispatchEvent({ type: 'rotate', quaternion: e.quaternion });\r\n          break;\r\n        case 'zoom':\r\n          self.dispatchEvent({ type: 'zoom', factor: e.factor });\r\n          break;\r\n        default:\r\n          self.dispatchEvent({ type: e.action });\r\n      }\r\n      self.dispatchEvent({ type: 'transform' });\r\n      self._needRender = true;\r\n    });\r\n\r\n    const gfx = this._gfx;\r\n    this._picker = new Picker(gfx.root, gfx.camera, gfx.renderer.domElement);\r\n    this._picker.addEventListener('newpick', (event) => {\r\n      self._onPick(event);\r\n    });\r\n    this._picker.addEventListener('dblclick', (event) => {\r\n      self.center(event);\r\n    });\r\n  } catch (error) {\r\n    if (error.name === 'TypeError' && error.message === 'Cannot read property \\'getExtension\\' of null') {\r\n      this._showMessage('Could not create WebGL context.');\r\n    } else if (error.message.search(/webgl/i) > 1) {\r\n      this._showMessage(error.message);\r\n    } else {\r\n      this._showMessage('Viewer initialization failed.');\r\n      throw error;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // automatically load default file\r\n  const file = this._opts && this._opts.load;\r\n  if (file) {\r\n    const type = this._opts && this._opts.type;\r\n    this.load(file, { fileType: type, keepRepsInfo: true });\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Terminate the viewer completely.\r\n * @see Miew#init\r\n */\r\nMiew.prototype.term = function () {\r\n  this._showMessage('Viewer has been terminated.');\r\n  this._loading.forEach((job) => {\r\n    job.cancel();\r\n  });\r\n  this._loading.length = 0;\r\n  this.halt();\r\n  this._gfx = null;\r\n};\r\n\r\n/**\r\n * Display message inside the viewer container, hiding WebGL canvas.\r\n * @param {string} msg - Message to show.\r\n * @private\r\n */\r\nMiew.prototype._showMessage = function (msg) {\r\n  const element = document.createElement('div');\r\n  element.setAttribute('class', 'miew-message');\r\n  element.appendChild(document.createElement('p')).appendChild(document.createTextNode(msg));\r\n  _setContainerContents(this._container, element);\r\n};\r\n\r\n/**\r\n * Display WebGL canvas inside the viewer container, hiding any message shown.\r\n * @private\r\n */\r\nMiew.prototype._showCanvas = function () {\r\n  _setContainerContents(this._container, this._gfx.renderer.domElement);\r\n};\r\n\r\nMiew.prototype._requestAnimationFrame = function (callback) {\r\n  const { xr } = this._gfx.renderer;\r\n  if (xr && xr.enabled) {\r\n    this._gfx.renderer.setAnimationLoop(callback);\r\n    return;\r\n  }\r\n  requestAnimationFrame(callback);\r\n};\r\n\r\nfunction arezSpritesSupported(context) {\r\n  return context.getExtension('EXT_frag_depth');\r\n}\r\n\r\nfunction isAOSupported(context) {\r\n  return (context.getExtension('WEBGL_depth_texture')\r\n  && context.getExtension('WEBGL_draw_buffers'));\r\n}\r\n\r\n/**\r\n * Initialize WebGL and set 3D scene up.\r\n * @private\r\n */\r\nMiew.prototype._initGfx = function () {\r\n  const gfx = {\r\n    width: this._container.clientWidth,\r\n    height: this._container.clientHeight,\r\n  };\r\n\r\n  const webGLOptions = { preserveDrawingBuffer: true, alpha: true, premultipliedAlpha: false };\r\n  if (settings.now.antialias) {\r\n    webGLOptions.antialias = true;\r\n  }\r\n\r\n  gfx.renderer2d = new CSS2DRenderer();\r\n\r\n  gfx.renderer = new THREE.WebGL1Renderer(webGLOptions);\r\n  gfx.renderer.shadowMap.enabled = settings.now.shadow.on;\r\n  gfx.renderer.shadowMap.autoUpdate = false;\r\n  gfx.renderer.shadowMap.type = THREE.PCFShadowMap;\r\n  capabilities.init(gfx.renderer);\r\n\r\n  // z-sprites and ambient occlusion possibility\r\n  if (!arezSpritesSupported(gfx.renderer.getContext())) {\r\n    settings.set('zSprites', false);\r\n  }\r\n  if (!isAOSupported(gfx.renderer.getContext())) {\r\n    settings.set('ao', false);\r\n  }\r\n\r\n  gfx.renderer.autoClear = false;\r\n  gfx.renderer.setPixelRatio(window.devicePixelRatio);\r\n  gfx.renderer.setSize(gfx.width, gfx.height);\r\n  gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n  gfx.renderer.clearColor();\r\n\r\n  gfx.renderer2d.setSize(gfx.width, gfx.height);\r\n\r\n  gfx.camera = new THREE.PerspectiveCamera(\r\n    settings.now.camFov,\r\n    gfx.width / gfx.height,\r\n    settings.now.camNear,\r\n    settings.now.camFar,\r\n  );\r\n  gfx.camera.setMinimalFov(settings.now.camFov);\r\n  gfx.camera.position.z = settings.now.camDistance;\r\n  gfx.camera.updateProjectionMatrix();\r\n  gfx.camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  gfx.camera.layers.enable(gfxutils.LAYERS.VOLUME);\r\n  gfx.camera.layers.enable(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n\r\n  gfx.stereoCam = new THREE.StereoCamera();\r\n\r\n  gfx.scene = new THREE.Scene();\r\n\r\n  const color = chooseFogColor();\r\n  gfx.scene.fog = new THREE.Fog(color, settings.now.camNear, settings.now.camFar);\r\n\r\n  gfx.root = new gfxutils.RCGroup();\r\n  gfx.scene.add(gfx.root);\r\n\r\n  gfx.pivot = new gfxutils.RCGroup();\r\n  gfx.root.add(gfx.pivot);\r\n\r\n  gfx.selectionScene = new THREE.Scene();\r\n  gfx.selectionRoot = new THREE.Group();\r\n  gfx.selectionRoot.matrixAutoUpdate = false;\r\n  gfx.selectionScene.add(gfx.selectionRoot);\r\n\r\n  gfx.selectionPivot = new THREE.Group();\r\n  gfx.selectionPivot.matrixAutoUpdate = false;\r\n  gfx.selectionRoot.add(gfx.selectionPivot);\r\n\r\n  const light12 = new THREE.DirectionalLight(0xffffff, 0.45);\r\n  light12.position.set(0, 0.414, 1);\r\n  light12.layers.enable(gfxutils.LAYERS.TRANSPARENT);\r\n  light12.castShadow = true;\r\n  light12.shadow.bias = 0.09;\r\n  light12.shadow.radius = settings.now.shadow.radius;\r\n  light12.shadow.camera.layers.set(gfxutils.LAYERS.SHADOWMAP);\r\n\r\n  const pixelRatio = gfx.renderer.getPixelRatio();\r\n  const shadowMapSize = Math.max(gfx.width, gfx.height) * pixelRatio;\r\n  light12.shadow.mapSize.width = shadowMapSize;\r\n  light12.shadow.mapSize.height = shadowMapSize;\r\n  light12.target.position.set(0.0, 0.0, 0.0);\r\n  gfx.scene.add(light12);\r\n  gfx.scene.add(light12.target);\r\n\r\n  const light3 = new THREE.AmbientLight(0x666666);\r\n  light3.layers.enable(gfxutils.LAYERS.TRANSPARENT);\r\n  gfx.scene.add(light3);\r\n\r\n  // add axes\r\n  gfx.axes = new Axes(gfx.root, gfx.camera);\r\n  const deviceWidth = gfx.width * pixelRatio;\r\n  const deviceHeight = gfx.height * pixelRatio;\r\n\r\n  gfx.offscreenBuf = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat, depthBuffer: true,\r\n    },\r\n  );\r\n\r\n  if (gfx.renderer.getContext().getExtension('WEBGL_depth_texture')) {\r\n    gfx.offscreenBuf.depthTexture = new THREE.DepthTexture();\r\n    gfx.offscreenBuf.depthTexture.type = THREE.UnsignedShortType;\r\n  }\r\n\r\n  gfx.offscreenBuf2 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.offscreenBuf3 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.offscreenBuf4 = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.volBFTex = gfx.offscreenBuf3;\r\n  gfx.volFFTex = gfx.offscreenBuf4;\r\n  gfx.volWFFTex = gfx.offscreenBuf;\r\n\r\n  // use float textures for volume rendering if possible\r\n  if (gfx.renderer.getContext().getExtension('OES_texture_float')) {\r\n    gfx.offscreenBuf5 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: false,\r\n      },\r\n    );\r\n\r\n    gfx.offscreenBuf6 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: false,\r\n      },\r\n    );\r\n\r\n    gfx.offscreenBuf7 = new THREE.WebGLRenderTarget(\r\n      deviceWidth,\r\n      deviceHeight,\r\n      {\r\n        minFilter: THREE.LinearFilter,\r\n        magFilter: THREE.LinearFilter,\r\n        format: THREE.RGBAFormat,\r\n        type: THREE.FloatType,\r\n        depthBuffer: true,\r\n      },\r\n    );\r\n\r\n    gfx.volBFTex = gfx.offscreenBuf5;\r\n    gfx.volFFTex = gfx.offscreenBuf6;\r\n    gfx.volWFFTex = gfx.offscreenBuf7;\r\n  } else {\r\n    this.logger.warn('Device doesn\\'t support OES_texture_float extension');\r\n  }\r\n\r\n  gfx.stereoBufL = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  gfx.stereoBufR = new THREE.WebGLRenderTarget(\r\n    deviceWidth,\r\n    deviceHeight,\r\n    {\r\n      minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, depthBuffer: false,\r\n    },\r\n  );\r\n\r\n  this._gfx = gfx;\r\n  this._showCanvas();\r\n\r\n  this._embedWebXR(settings.now.stereo === 'WEBVR');\r\n\r\n  this._container.appendChild(gfx.renderer2d.getElement());\r\n\r\n  // add FPS counter\r\n  const stats = new Stats();\r\n  stats.domElement.style.position = 'absolute';\r\n  stats.domElement.style.right = '0';\r\n  stats.domElement.style.bottom = '0';\r\n  this._container.appendChild(stats.domElement);\r\n  this._fps = stats;\r\n  this._fps.show(settings.now.fps);\r\n};\r\n\r\n/**\r\n * Setup event listeners.\r\n * @private\r\n */\r\nMiew.prototype._initListeners = function () {\r\n  const self = this;\r\n  window.addEventListener('resize', () => {\r\n    self._onResize();\r\n  });\r\n};\r\n\r\n/**\r\n * Try to add numbers to the base name to make it unique among visuals\r\n * @private\r\n */\r\nMiew.prototype._makeUniqueVisualName = function (baseName) {\r\n  if (!baseName) {\r\n    return Math.random().toString();\r\n  }\r\n\r\n  let name = baseName;\r\n  let suffix = 1;\r\n  while (this._visuals.hasOwnProperty(name)) {\r\n    name = `${baseName} (${suffix.toString()})`;\r\n    suffix++;\r\n  }\r\n\r\n  return name;\r\n};\r\n\r\n/**\r\n * Add visual to the viewer\r\n * @private\r\n */\r\nMiew.prototype._addVisual = function (visual) {\r\n  if (!visual) {\r\n    return null;\r\n  }\r\n\r\n  // change visual name in order to make it unique\r\n  const name = this._makeUniqueVisualName(visual.name);\r\n  visual.name = name;\r\n\r\n  this._visuals[name] = visual;\r\n  this._gfx.pivot.add(visual);\r\n  if (visual.getSelectionGeo) {\r\n    this._gfx.selectionPivot.add(visual.getSelectionGeo());\r\n  }\r\n\r\n  return name;\r\n};\r\n\r\n/**\r\n * Remove visual from the viewer\r\n * @private\r\n */\r\nMiew.prototype._removeVisual = function (visual) {\r\n  let name = '';\r\n  let obj = null;\r\n  if (visual instanceof Visual) {\r\n    ({ name } = visual);\r\n    obj = visual;\r\n  } else if (typeof visual === 'string') {\r\n    name = visual;\r\n    obj = this._visuals[name];\r\n  }\r\n\r\n  if (!obj || !this._visuals.hasOwnProperty(name) || this._visuals[name] !== obj) {\r\n    return;\r\n  }\r\n\r\n  if (name === this._curVisualName) {\r\n    this._curVisualName = undefined;\r\n  }\r\n\r\n  delete this._visuals[name];\r\n  obj.release(); // removes nodes from scene\r\n\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Call specified function for each Visual\r\n * @private\r\n */\r\nMiew.prototype._forEachVisual = function (callback) {\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)) {\r\n      callback(this._visuals[name]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Release (destroy) all visuals in the scene\r\n * @private\r\n */\r\nMiew.prototype._releaseAllVisuals = function () {\r\n  if (!this._gfx || !this._gfx.pivot) {\r\n    return;\r\n  }\r\n\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)) {\r\n      this._visuals[name].release();\r\n    }\r\n  }\r\n\r\n  this._visuals = {};\r\n};\r\n\r\n/**\r\n * Call specified function for each ComplexVisual\r\n * @private\r\n */\r\nMiew.prototype._forEachComplexVisual = function (callback) {\r\n  if (!this._gfx || !this._gfx.pivot) {\r\n    return;\r\n  }\r\n\r\n  for (const name in this._visuals) {\r\n    if (this._visuals.hasOwnProperty(name)\r\n          && this._visuals[name] instanceof ComplexVisual) {\r\n      callback(this._visuals[name]);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Returns ComplexVisual with specified name, or current (if not found), or any, or null\r\n * @private\r\n */\r\nMiew.prototype._getComplexVisual = function (name) {\r\n  name = name || this._curVisualName;\r\n  let any = null;\r\n  let named = null;\r\n  this._forEachComplexVisual((visual) => {\r\n    any = visual;\r\n    if (visual.name === name) {\r\n      named = visual;\r\n    }\r\n  });\r\n  return named || any;\r\n};\r\n\r\n/**\r\n * Returns first found VolumeVisual (no more than one should be present actually)\r\n * @private\r\n */\r\nMiew.prototype._getVolumeVisual = function () {\r\n  let any = null;\r\n  this._forEachVisual((visual) => {\r\n    if (visual instanceof VolumeVisual) {\r\n      any = visual;\r\n    }\r\n  });\r\n  return any;\r\n};\r\n\r\n/**\r\n * Returns ComplexVisual corresponding to specified complex\r\n * @private\r\n */\r\nMiew.prototype._getVisualForComplex = function (complex) {\r\n  if (!complex) {\r\n    return null;\r\n  }\r\n\r\n  let found = null;\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.getComplex() === complex) {\r\n      found = visual;\r\n    }\r\n  });\r\n  return found;\r\n};\r\n\r\n/*\r\n   * Get a list of names of visuals currently shown by the viewer\r\n   */\r\nMiew.prototype.getVisuals = function () {\r\n  return Object.keys(this._visuals);\r\n};\r\n\r\n/*\r\n   * Get complex visuals count\r\n   */\r\nMiew.prototype.getComplexVisualsCount = function () {\r\n  let count = 0;\r\n  this._forEachComplexVisual(() => count++);\r\n  return count;\r\n};\r\n\r\n/*\r\n   * Get current visual\r\n   */\r\nMiew.prototype.getCurrentVisual = function () {\r\n  return this._curVisualName;\r\n};\r\n\r\n/*\r\n   * Set current visual.\r\n   * All further operations will be performed on this visual (complex) if not stated otherwise.\r\n   */\r\nMiew.prototype.setCurrentVisual = function (name) {\r\n  if (!this._visuals[name]) {\r\n    return;\r\n  }\r\n\r\n  this._curVisualName = name;\r\n};\r\n\r\n/**\r\n * Run the viewer, start processing update/render frames periodically.\r\n * Has no effect if already running.\r\n * @see Miew#halt\r\n */\r\nMiew.prototype.run = function () {\r\n  if (!this._running) {\r\n    this._running = true;\r\n    if (this._halting) {\r\n      this._halting = false;\r\n      return;\r\n    }\r\n\r\n    this._objectControls.enable(true);\r\n    this._interpolator.resume();\r\n\r\n    this._requestAnimationFrame(() => this._onTick());\r\n  }\r\n};\r\n\r\n/**\r\n * Request the viewer to stop.\r\n * Will be processed during the next frame.\r\n * @see Miew#run\r\n */\r\nMiew.prototype.halt = function () {\r\n  if (this._running) {\r\n    this._discardComponentEdit();\r\n    this._discardFragmentEdit();\r\n    this._objectControls.enable(false);\r\n    this._interpolator.pause();\r\n    this._halting = true;\r\n  }\r\n};\r\n\r\n/**\r\n * Request the viewer to start / stop responsing\r\n * on hot keys.\r\n * @param enabled - start (true) or stop (false) response on hot keys.\r\n */\r\nMiew.prototype.enableHotKeys = function (enabled) {\r\n  this._hotKeysEnabled = enabled;\r\n  this._objectControls.enableHotkeys(enabled);\r\n};\r\n\r\n/**\r\n * Callback which processes window resize.\r\n * @private\r\n */\r\nMiew.prototype._onResize = function () {\r\n  const gfx = this._gfx;\r\n  if (!gfx) {\r\n    return;\r\n  }\r\n\r\n  this._needRender = true;\r\n\r\n  gfx.width = this._container.clientWidth;\r\n  gfx.height = this._container.clientHeight;\r\n\r\n  gfx.camera.aspect = gfx.width / gfx.height;\r\n  gfx.camera.setMinimalFov(settings.now.camFov);\r\n  gfx.camera.updateProjectionMatrix();\r\n\r\n  gfx.renderer.setSize(gfx.width, gfx.height);\r\n  gfx.renderer2d.setSize(gfx.width, gfx.height);\r\n\r\n  this.dispatchEvent({ type: 'resize' });\r\n};\r\n\r\nMiew.prototype._resizeOffscreenBuffers = function (width, height, stereo) {\r\n  const gfx = this._gfx;\r\n  stereo = stereo || 'NONE';\r\n  const isAnaglyph = (stereo === 'NONE' || stereo === 'ANAGLYPH');\r\n  const multi = isAnaglyph ? 1 : 0.5;\r\n  gfx.offscreenBuf.setSize(multi * width, height);\r\n  gfx.offscreenBuf2.setSize(multi * width, height);\r\n  gfx.offscreenBuf3.setSize(multi * width, height);\r\n  gfx.offscreenBuf4.setSize(multi * width, height);\r\n  if (gfx.offscreenBuf5) {\r\n    gfx.offscreenBuf5.setSize(multi * width, height);\r\n  }\r\n  if (gfx.offscreenBuf6) {\r\n    gfx.offscreenBuf6.setSize(multi * width, height);\r\n  }\r\n  if (gfx.offscreenBuf7) {\r\n    gfx.offscreenBuf7.setSize(multi * width, height);\r\n  }\r\n  if (isAnaglyph) {\r\n    gfx.stereoBufL.setSize(width, height);\r\n    gfx.stereoBufR.setSize(width, height);\r\n  }\r\n};\r\n\r\n/**\r\n * Callback which processes update/render frames.\r\n * @private\r\n */\r\nMiew.prototype._onTick = function () {\r\n  if (this._halting) {\r\n    this._running = false;\r\n    this._halting = false;\r\n    return;\r\n  }\r\n\r\n  this._fps.update();\r\n\r\n  this._requestAnimationFrame(() => this._onTick());\r\n\r\n  this._onUpdate();\r\n  if (this._needRender) {\r\n    this._onRender();\r\n    this._needRender = !settings.now.suspendRender || settings.now.stereo === 'WEBVR';\r\n  }\r\n};\r\n\r\nMiew.prototype._getBSphereRadius = function () {\r\n  // calculate radius that would include all visuals\r\n  let radius = 0;\r\n  this._forEachVisual((visual) => {\r\n    radius = Math.max(radius, visual.getBoundaries().boundingSphere.radius);\r\n  });\r\n  return radius * this._objectControls.getScale();\r\n};\r\n\r\n/**\r\n * Calculate bounding box that would include all visuals and being axis aligned in world defined by\r\n * transformation matrix: matrix\r\n * @param {Matrix4} matrix - transformation matrix.\r\n * @param {object}  OBB           - calculating bounding box.\r\n * @param {Vector3} OBB.center    - OBB center.\r\n * @param {Vector3} OBB.halfSize  - half magnitude of OBB sizes.\r\n */\r\nMiew.prototype.getOBB = (function () {\r\n  const _bSphereForOneVisual = new THREE.Sphere();\r\n  const _bBoxForOneVisual = new THREE.Box3();\r\n  const _bBox = new THREE.Box3();\r\n\r\n  const _invMatrix = new THREE.Matrix4();\r\n\r\n  const _points = [\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n    new THREE.Vector3(),\r\n  ];\r\n\r\n  return function (matrix, OBB) {\r\n    _bBox.makeEmpty();\r\n\r\n    this._forEachVisual((visual) => {\r\n      _bSphereForOneVisual.copy(visual.getBoundaries().boundingSphere);\r\n      _bSphereForOneVisual.applyMatrix4(visual.matrixWorld).applyMatrix4(matrix);\r\n      _bSphereForOneVisual.getBoundingBox(_bBoxForOneVisual);\r\n      _bBox.union(_bBoxForOneVisual);\r\n    });\r\n    _bBox.getCenter(OBB.center);\r\n\r\n    _invMatrix.copy(matrix).invert();\r\n    OBB.center.applyMatrix4(_invMatrix);\r\n\r\n    const { min } = _bBox;\r\n    const { max } = _bBox;\r\n    _points[0].set(min.x, min.y, min.z); // 000\r\n    _points[1].set(max.x, min.y, min.z); // 100\r\n    _points[2].set(min.x, max.y, min.z); // 010\r\n    _points[3].set(min.x, min.y, max.z); // 001\r\n    for (let i = 0, l = _points.length; i < l; i++) {\r\n      _points[i].applyMatrix4(_invMatrix);\r\n    }\r\n\r\n    OBB.halfSize.set(\r\n      Math.abs(_points[0].x - _points[1].x),\r\n      Math.abs(_points[0].y - _points[2].y),\r\n      Math.abs(_points[0].z - _points[3].z),\r\n    ).multiplyScalar(0.5);\r\n  };\r\n}());\r\n\r\nMiew.prototype._updateFog = function () {\r\n  const gfx = this._gfx;\r\n\r\n  if (settings.now.fog) {\r\n    if (typeof gfx.scene.fog === 'undefined' || gfx.scene.fog === null) {\r\n      const color = chooseFogColor();\r\n      gfx.scene.fog = new THREE.Fog(color);\r\n      this._setUberMaterialValues({ fog: settings.now.fog });\r\n    }\r\n    updateFogRange(gfx.scene.fog, gfx.camera.position.z, this._getBSphereRadius());\r\n  } else if (gfx.scene.fog) {\r\n    gfx.scene.fog = undefined;\r\n    this._setUberMaterialValues({ fog: settings.now.fog });\r\n  }\r\n};\r\n\r\nMiew.prototype._onUpdate = function () {\r\n  if (this.isScriptingCommandAvailable !== undefined && this.isScriptingCommandAvailable() && !this._building) {\r\n    this.callNextCmd();\r\n  }\r\n\r\n  this._objectControls.update();\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.getComplex().update();\r\n  });\r\n\r\n  if (settings.now.autobuild && !this._loading.length && !this._building && this._needRebuild()) {\r\n    this.rebuild();\r\n  }\r\n\r\n  if (!this._loading.length && !this._building && !this._needRebuild()) {\r\n    this._updateView();\r\n  }\r\n\r\n  this._updateFog();\r\n\r\n  if (this._gfx.renderer.xr.enabled) {\r\n    this.webVR.updateMoleculeScale();\r\n  }\r\n};\r\n\r\nMiew.prototype._onRender = function () {\r\n  const gfx = this._gfx;\r\n\r\n  // update all matrices\r\n  gfx.scene.updateMatrixWorld();\r\n  gfx.camera.updateMatrixWorld();\r\n\r\n  this._clipPlaneUpdateValue(this._getBSphereRadius());\r\n  this._fogFarUpdateValue();\r\n\r\n  gfx.renderer.setRenderTarget(null);\r\n  gfx.renderer.clear();\r\n\r\n  this._renderFrame(settings.now.stereo);\r\n};\r\n\r\nMiew.prototype._renderFrame = (function () {\r\n  const _anaglyphMat = new AnaglyphMaterial();\r\n  const _size = new THREE.Vector2();\r\n\r\n  return function (stereo) {\r\n    const gfx = this._gfx;\r\n    const { renderer } = gfx;\r\n\r\n    renderer.getSize(_size);\r\n\r\n    if (stereo !== 'NONE') {\r\n      gfx.camera.focus = gfx.camera.position.z; // set focus to the center of the object\r\n      gfx.stereoCam.aspect = 1.0;\r\n\r\n      // in anaglyph mode we render full-size image for each eye\r\n      // while in other stereo modes only half-size (two images on the screen)\r\n      if (stereo === 'ANAGLYPH') {\r\n        gfx.stereoCam.update(gfx.camera);\r\n      } else {\r\n        gfx.stereoCam.updateHalfSized(gfx.camera, settings.now.camFov);\r\n      }\r\n    }\r\n\r\n    // resize offscreen buffers to match the target\r\n    const pixelRatio = gfx.renderer.getPixelRatio();\r\n    this._resizeOffscreenBuffers(_size.width * pixelRatio, _size.height * pixelRatio, stereo);\r\n\r\n    this._renderShadowMap();\r\n\r\n    switch (stereo) {\r\n      case 'WEBVR':\r\n      case 'NONE':\r\n        this._renderScene(gfx.camera, false);\r\n        break;\r\n      case 'SIMPLE':\r\n      case 'DISTORTED':\r\n        renderer.setScissorTest(true);\r\n\r\n        renderer.setScissor(0, 0, _size.width / 2, _size.height);\r\n        renderer.setViewport(0, 0, _size.width / 2, _size.height);\r\n        this._renderScene(this._gfx.stereoCam.cameraL, stereo === 'DISTORTED');\r\n\r\n        renderer.setScissor(_size.width / 2, 0, _size.width / 2, _size.height);\r\n        renderer.setViewport(_size.width / 2, 0, _size.width / 2, _size.height);\r\n        this._renderScene(this._gfx.stereoCam.cameraR, stereo === 'DISTORTED');\r\n\r\n        renderer.setScissorTest(false);\r\n        break;\r\n      case 'ANAGLYPH':\r\n        this._renderScene(this._gfx.stereoCam.cameraL, false, gfx.stereoBufL);\r\n        this._renderScene(this._gfx.stereoCam.cameraR, false, gfx.stereoBufR);\r\n        renderer.setRenderTarget(null);\r\n        _anaglyphMat.uniforms.srcL.value = gfx.stereoBufL.texture;\r\n        _anaglyphMat.uniforms.srcR.value = gfx.stereoBufR.texture;\r\n        gfx.renderer.renderScreenQuad(_anaglyphMat);\r\n        break;\r\n      default:\r\n    }\r\n\r\n    gfx.renderer2d.render(gfx.scene, gfx.camera);\r\n\r\n    if (settings.now.axes && gfx.axes && !gfx.renderer.xr.enabled) {\r\n      gfx.axes.render(renderer);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._onBgColorChanged = function () {\r\n  const gfx = this._gfx;\r\n  const color = chooseFogColor();\r\n  if (gfx) {\r\n    if (gfx.scene.fog) {\r\n      gfx.scene.fog.color.set(color);\r\n    }\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._onFogColorChanged = function () {\r\n  const gfx = this._gfx;\r\n  const color = chooseFogColor();\r\n  if (gfx && gfx.scene.fog) {\r\n    gfx.scene.fog.color.set(color);\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._setUberMaterialValues = function (values) {\r\n  this._gfx.root.traverse((obj) => {\r\n    if ((obj instanceof THREE.Mesh || obj instanceof THREE.LineSegments || obj instanceof THREE.Line)\r\n        && obj.material instanceof UberMaterial) {\r\n      obj.material.setValues(values);\r\n      obj.material.needsUpdate = true;\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype._enableMRT = function (on, renderBuffer, textureBuffer) {\r\n  const gfx = this._gfx;\r\n  const gl = gfx.renderer.getContext();\r\n  const ext = gl.getExtension('WEBGL_draw_buffers');\r\n  const { properties } = gfx.renderer;\r\n\r\n  if (!on) {\r\n    ext.drawBuffersWEBGL([gl.COLOR_ATTACHMENT0, null]);\r\n    return;\r\n  }\r\n\r\n  // take extra texture from Texture Buffer\r\n  gfx.renderer.setRenderTarget(textureBuffer);\r\n  const tx8 = properties.get(textureBuffer.texture).__webglTexture;\r\n  gl.bindTexture(gl.TEXTURE_2D, tx8);\r\n\r\n  // take texture and framebuffer from renderbuffer\r\n  gfx.renderer.setRenderTarget(renderBuffer);\r\n  const fb = properties.get(renderBuffer).__webglFramebuffer;\r\n  const tx = properties.get(renderBuffer.texture).__webglTexture;\r\n\r\n  // set framebuffer\r\n  gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\r\n  fb.width = renderBuffer.width;\r\n  fb.height = renderBuffer.height;\r\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tx, 0);\r\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, ext.COLOR_ATTACHMENT1_WEBGL, gl.TEXTURE_2D, tx8, 0);\r\n\r\n  // mapping textures\r\n  ext.drawBuffersWEBGL([gl.COLOR_ATTACHMENT0, ext.COLOR_ATTACHMENT1_WEBGL]);\r\n};\r\n\r\nMiew.prototype._renderScene = (function () {\r\n  return function (camera, distortion, target) {\r\n    distortion = distortion || false;\r\n    target = target || null;\r\n\r\n    const gfx = this._gfx;\r\n\r\n    // render to offscreen buffer\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(target);\r\n    gfx.renderer.clear();\r\n    if (gfx.renderer.xr.enabled) {\r\n      gfx.renderer.render(gfx.scene, camera);\r\n      return;\r\n    }\r\n\r\n    // clean buffer for normals texture\r\n    gfx.renderer.setClearColor(0x000000, 0.0);\r\n    gfx.renderer.setRenderTarget(gfx.offscreenBuf4);\r\n    gfx.renderer.clearColor();\r\n\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n    gfx.renderer.clear();\r\n\r\n    const bHaveComplexes = (this._getComplexVisual() !== null);\r\n    const volumeVisual = this._getVolumeVisual();\r\n    const ssao = bHaveComplexes && settings.now.ao;\r\n\r\n    if (ssao) {\r\n      this._enableMRT(true, gfx.offscreenBuf, gfx.offscreenBuf4);\r\n    }\r\n\r\n    if (settings.now.transparency === 'prepass') {\r\n      this._renderWithPrepassTransparency(camera, gfx.offscreenBuf);\r\n    } else if (settings.now.transparency === 'standard') {\r\n      gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n      gfx.renderer.render(gfx.scene, camera);\r\n    }\r\n\r\n    if (ssao) {\r\n      this._enableMRT(false, null, null);\r\n    }\r\n\r\n    // when fxaa we should get resulting image in temp off-screen buff2 for further postprocessing with fxaa filter\r\n    // otherwise we render to canvas\r\n    const outline = bHaveComplexes && settings.now.outline.on;\r\n    const fxaa = bHaveComplexes && settings.now.fxaa;\r\n    const volume = (volumeVisual !== null) && (volumeVisual.getMesh().material != null);\r\n    let dstBuffer = (ssao || outline || volume || fxaa || distortion) ? gfx.offscreenBuf2 : target;\r\n    let srcBuffer = gfx.offscreenBuf;\r\n\r\n    if (ssao) {\r\n      this._performAO(\r\n        srcBuffer,\r\n        gfx.offscreenBuf4,\r\n        gfx.offscreenBuf.depthTexture,\r\n        dstBuffer,\r\n        gfx.offscreenBuf3,\r\n        gfx.offscreenBuf2,\r\n      );\r\n      if (!fxaa && !distortion && !volume && !outline) {\r\n        srcBuffer = dstBuffer;\r\n        dstBuffer = target;\r\n        gfx.renderer.setRenderTarget(dstBuffer);\r\n        gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 1.0);\r\n      }\r\n    } else {\r\n      // just copy color buffer to dst buffer\r\n      gfx.renderer.setRenderTarget(dstBuffer);\r\n      gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 1.0);\r\n    }\r\n\r\n    // outline\r\n    if (outline) {\r\n      srcBuffer = dstBuffer;\r\n      dstBuffer = (volume || fxaa || distortion) ? gfx.offscreenBuf3 : target;\r\n      if (srcBuffer != null) {\r\n        this._renderOutline(camera, gfx.offscreenBuf, srcBuffer, dstBuffer);\r\n      }\r\n    }\r\n\r\n    // render selected part with outline material\r\n    this._renderSelection(camera, gfx.offscreenBuf, dstBuffer);\r\n\r\n    if (volume) {\r\n      // copy current picture to the buffer that retains depth-data of the original molecule render\r\n      // so that volume renderer could use depth-test\r\n      gfx.renderer.setRenderTarget(gfx.offscreenBuf);\r\n      gfx.renderer.renderScreenQuadFromTex(dstBuffer.texture, 1.0);\r\n      dstBuffer = gfx.offscreenBuf;\r\n      this._renderVolume(volumeVisual, camera, dstBuffer, gfx.volBFTex, gfx.volFFTex, gfx.volWFFTex);\r\n\r\n      // if this is the last stage -- copy image to target\r\n      if (!fxaa && !distortion) {\r\n        gfx.renderer.setRenderTarget(target);\r\n        gfx.renderer.renderScreenQuadFromTex(dstBuffer.texture, 1.0);\r\n      }\r\n    }\r\n\r\n    srcBuffer = dstBuffer;\r\n\r\n    if (fxaa) {\r\n      dstBuffer = distortion ? gfx.offscreenBuf4 : target;\r\n      this._performFXAA(srcBuffer, dstBuffer);\r\n      srcBuffer = dstBuffer;\r\n    }\r\n\r\n    if (distortion) {\r\n      dstBuffer = target;\r\n      this._performDistortion(srcBuffer, dstBuffer, true);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._performDistortion = (function () {\r\n  const _scene = new THREE.Scene();\r\n  const _camera = new THREE.OrthographicCamera(-1.0, 1.0, 1.0, -1.0, -500, 1000);\r\n\r\n  const _material = new THREE.RawShaderMaterial({\r\n    uniforms: {\r\n      srcTex: { type: 't', value: null },\r\n      aberration: { type: 'fv3', value: new THREE.Vector3(1.0) },\r\n    },\r\n    vertexShader: vertexScreenQuadShader,\r\n    fragmentShader: fragmentScreenQuadFromDistTex,\r\n    transparent: false,\r\n    depthTest: false,\r\n    depthWrite: false,\r\n  });\r\n\r\n  const _geo = gfxutils.buildDistorionMesh(10, 10, settings.now.debug.stereoBarrel);\r\n  _scene.add(new meshes.Mesh(_geo, _material));\r\n\r\n  return function (srcBuffer, targetBuffer, mesh) {\r\n    this._gfx.renderer.setRenderTarget(targetBuffer);\r\n    this._gfx.renderer.clear();\r\n\r\n    if (mesh) {\r\n      _material.uniforms.srcTex.value = srcBuffer.texture;\r\n      _material.uniforms.aberration.value.set(0.995, 1.0, 1.01);\r\n      this._gfx.renderer.render(_scene, _camera);\r\n    } else {\r\n      this._gfx.renderer.renderScreenQuadFromTexWithDistortion(srcBuffer, settings.now.debug.stereoBarrel);\r\n    }\r\n  };\r\n}());\r\n\r\nMiew.prototype._renderOutline = (function () {\r\n  const _outlineMaterial = new OutlineMaterial({ depth: true });\r\n\r\n  return function (camera, srcDepthBuffer, srcColorBuffer, targetBuffer) {\r\n    const self = this;\r\n    const gfx = self._gfx;\r\n\r\n    // apply Sobel filter -- draw outline\r\n    _outlineMaterial.uniforms.srcTex.value = srcColorBuffer.texture;\r\n    _outlineMaterial.uniforms.srcDepthTex.value = srcDepthBuffer.depthTexture;\r\n    _outlineMaterial.uniforms.srcTexSize.value.set(srcDepthBuffer.width, srcDepthBuffer.height);\r\n    _outlineMaterial.uniforms.color.value = new THREE.Color(settings.now.outline.color);\r\n    _outlineMaterial.uniforms.threshold.value = settings.now.outline.threshold;\r\n    _outlineMaterial.uniforms.thickness.value = new THREE.Vector2(\r\n      settings.now.outline.thickness,\r\n      settings.now.outline.thickness,\r\n    );\r\n\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuad(_outlineMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._renderShadowMap = (function () {\r\n  const pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\r\n\r\n  return function () {\r\n    if (!settings.now.shadow.on) {\r\n      return;\r\n    }\r\n\r\n    const gfx = this._gfx;\r\n    const currentRenderTarget = gfx.renderer.getRenderTarget();\r\n    const activeCubeFace = gfx.renderer.getActiveCubeFace();\r\n    const activeMipmapLevel = gfx.renderer.getActiveMipmapLevel();\r\n\r\n    const _state = gfx.renderer.state;\r\n\r\n    // Set GL state for depth map.\r\n    _state.setBlending(THREE.NoBlending);\r\n    _state.buffers.color.setClear(1, 1, 1, 1);\r\n    _state.buffers.depth.setTest(true);\r\n    _state.setScissorTest(false);\r\n\r\n    for (let i = 0; i < gfx.scene.children.length; i++) {\r\n      if (gfx.scene.children[i].type === 'DirectionalLight') {\r\n        const light = gfx.scene.children[i];\r\n\r\n        if (light.shadow.map == null) {\r\n          light.shadow.map = new THREE.WebGLRenderTarget(light.shadow.mapSize.width, light.shadow.mapSize.height, pars);\r\n          light.shadow.camera.updateProjectionMatrix();\r\n        }\r\n        light.shadow.updateMatrices(light);\r\n\r\n        gfx.renderer.setRenderTarget(light.shadow.map);\r\n        gfx.renderer.clear();\r\n\r\n        gfx.renderer.render(gfx.scene, light.shadow.camera);\r\n      }\r\n    }\r\n    gfx.renderer.setRenderTarget(currentRenderTarget, activeCubeFace, activeMipmapLevel);\r\n  };\r\n}());\r\n\r\n/**\r\n * Check if there is selection which must be rendered or not.\r\n * @private\r\n * @returns {boolean} true on existing selection to render\r\n */\r\nMiew.prototype._hasSelectionToRender = function () {\r\n  const selPivot = this._gfx.selectionPivot;\r\n\r\n  for (let i = 0; i < selPivot.children.length; i++) {\r\n    const selPivotChild = selPivot.children[i];\r\n    if (selPivotChild.children.length > 0) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nMiew.prototype._renderSelection = (function () {\r\n  const _outlineMaterial = new OutlineMaterial();\r\n\r\n  return function (camera, srcBuffer, targetBuffer) {\r\n    const self = this;\r\n    const gfx = self._gfx;\r\n\r\n    // clear offscreen buffer (leave z-buffer intact)\r\n    gfx.renderer.setClearColor('black', 0);\r\n\r\n    // render selection to offscreen buffer\r\n    gfx.renderer.setRenderTarget(srcBuffer);\r\n    gfx.renderer.clear(true, false, false);\r\n    if (self._hasSelectionToRender()) {\r\n      gfx.selectionRoot.matrix = gfx.root.matrix;\r\n      gfx.selectionPivot.matrix = gfx.pivot.matrix;\r\n      gfx.renderer.render(gfx.selectionScene, camera);\r\n    } else {\r\n      // just render something to force \"target clear\" operation to finish\r\n      gfx.renderer.renderDummyQuad();\r\n    }\r\n\r\n    // overlay to screen\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuadFromTex(srcBuffer.texture, 0.6);\r\n\r\n    // apply Sobel filter -- draw outline\r\n    _outlineMaterial.uniforms.srcTex.value = srcBuffer.texture;\r\n    _outlineMaterial.uniforms.srcTexSize.value.set(srcBuffer.width, srcBuffer.height);\r\n    gfx.renderer.renderScreenQuad(_outlineMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._checkVolumeRenderingSupport = function (renderTarget) {\r\n  if (!renderTarget) {\r\n    return false;\r\n  }\r\n  const gfx = this._gfx;\r\n  const oldRT = gfx.renderer.getRenderTarget();\r\n\r\n  gfx.renderer.setRenderTarget(renderTarget);\r\n  const context = gfx.renderer.getContext();\r\n  const result = context.checkFramebufferStatus(context.FRAMEBUFFER);\r\n  gfx.renderer.setRenderTarget(oldRT);\r\n  if (result !== context.FRAMEBUFFER_COMPLETE) {\r\n    // floatFrameBufferWarning = ;\r\n    this.logger.warn('Device doesn\\'t support electron density rendering');\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nMiew.prototype._renderVolume = (function () {\r\n  const volumeBFMat = new VolumeMaterial.BackFacePosMaterial();\r\n  const volumeFFMat = new VolumeMaterial.FrontFacePosMaterial();\r\n  const cubeOffsetMat = new THREE.Matrix4().makeTranslation(0.5, 0.5, 0.5);\r\n  const world2colorMat = new THREE.Matrix4();\r\n\r\n  let volumeRenderingSupported;\r\n\r\n  return function (volumeVisual, camera, dstBuf, tmpBuf1, tmpBuf2, tmpBuf3) {\r\n    const gfx = this._gfx;\r\n\r\n    if (typeof volumeRenderingSupported === 'undefined') {\r\n      volumeRenderingSupported = this._checkVolumeRenderingSupport(tmpBuf1);\r\n    }\r\n\r\n    if (!volumeRenderingSupported) {\r\n      return;\r\n    }\r\n\r\n    const mesh = volumeVisual.getMesh();\r\n\r\n    mesh.rebuild(gfx.camera);\r\n\r\n    // use main camera to prepare special textures to be used by volumetric rendering\r\n    // these textures have the size of the window and are stored in offscreen buffers\r\n    gfx.renderer.setClearColor('black', 0);\r\n    gfx.renderer.setRenderTarget(tmpBuf1);\r\n    gfx.renderer.clear();\r\n    gfx.renderer.setRenderTarget(tmpBuf2);\r\n    gfx.renderer.clear();\r\n    gfx.renderer.setRenderTarget(tmpBuf3);\r\n    gfx.renderer.clear();\r\n\r\n    gfx.renderer.setRenderTarget(tmpBuf1);\r\n    // draw plane with its own material, because it differs slightly from volumeBFMat\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME_BFPLANE);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.scene.overrideMaterial = volumeBFMat;\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    gfx.renderer.setRenderTarget(tmpBuf2);\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.scene.overrideMaterial = volumeFFMat;\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    gfx.scene.overrideMaterial = null;\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n\r\n    // prepare texture that contains molecule positions\r\n    world2colorMat.copy(mesh.matrixWorld).invert();\r\n    UberMaterial.prototype.uberOptions.world2colorMatrix.multiplyMatrices(cubeOffsetMat, world2colorMat);\r\n    camera.layers.set(gfxutils.LAYERS.COLOR_FROM_POSITION);\r\n    gfx.renderer.setRenderTarget(tmpBuf3);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // render volume\r\n    const vm = mesh.material;\r\n    vm.uniforms._BFRight.value = tmpBuf1.texture;\r\n    vm.uniforms._FFRight.value = tmpBuf2.texture;\r\n    vm.uniforms._WFFRight.value = tmpBuf3.texture;\r\n    camera.layers.set(gfxutils.LAYERS.VOLUME);\r\n    gfx.renderer.setRenderTarget(dstBuf);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  };\r\n}());\r\n\r\n/*  Render scene with 'ZPrepass transparency Effect'\r\n   * Idea: transparent objects are rendered in two passes. The first one writes result only into depth buffer.\r\n   * The second pass reads depth buffer and writes only to color buffer. The method results in\r\n   * correct image of front part of the semi-transparent objects, but we can see only front transparent objects\r\n   * and opaque objects inside, there is no transparent objects inside.\r\n   * Notes: 1. Opaque objects should be rendered strictly before semi-transparent ones.\r\n   * 2. Realization doesn't use camera layers because scene traversing is used for material changes and\r\n   * we can use it to select needed meshes and don't complicate meshes builders with layers\r\n  */\r\nMiew.prototype._renderWithPrepassTransparency = (function () {\r\n  return function (camera, targetBuffer) {\r\n    const gfx = this._gfx;\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n\r\n    // opaque objects\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // transparent objects z prepass\r\n    camera.layers.set(gfxutils.LAYERS.PREPASS_TRANSPARENT);\r\n    gfx.renderer.getContext().colorMask(false, false, false, false); // don't update color buffer\r\n    gfx.renderer.render(gfx.scene, camera);\r\n    gfx.renderer.getContext().colorMask(true, true, true, true); // update color buffer\r\n\r\n    // transparent objects color pass\r\n    camera.layers.set(gfxutils.LAYERS.TRANSPARENT);\r\n    gfx.renderer.render(gfx.scene, camera);\r\n\r\n    // restore default layer\r\n    camera.layers.set(gfxutils.LAYERS.DEFAULT);\r\n  };\r\n}());\r\n\r\nMiew.prototype._performFXAA = (function () {\r\n  const _fxaaMaterial = new FXAAMaterial();\r\n\r\n  return function (srcBuffer, targetBuffer) {\r\n    if (typeof srcBuffer === 'undefined' || typeof targetBuffer === 'undefined') {\r\n      return;\r\n    }\r\n\r\n    const gfx = this._gfx;\r\n\r\n    // clear canvas\r\n    gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.clear();\r\n\r\n    // do fxaa processing of offscreen buff2\r\n    _fxaaMaterial.uniforms.srcTex.value = srcBuffer.texture;\r\n    _fxaaMaterial.uniforms.srcTexelSize.value.set(1.0 / srcBuffer.width, 1.0 / srcBuffer.height);\r\n    _fxaaMaterial.uniforms.bgColor.value.set(settings.now.bg.color);\r\n\r\n    if (_fxaaMaterial.bgTransparent !== settings.now.bg.transparent) {\r\n      _fxaaMaterial.setValues({ bgTransparent: settings.now.bg.transparent });\r\n      _fxaaMaterial.needsUpdate = true;\r\n    }\r\n    gfx.renderer.renderScreenQuad(_fxaaMaterial);\r\n  };\r\n}());\r\n\r\nMiew.prototype._performAO = (function () {\r\n  const _aoMaterial = new AOMaterial();\r\n  const _horBlurMaterial = new AOHorBlurMaterial();\r\n  const _vertBlurMaterial = new AOVertBlurWithBlendMaterial();\r\n\r\n  const _scale = new THREE.Vector3();\r\n  return function (srcColorBuffer, normalBuffer, srcDepthTexture, targetBuffer, tempBuffer, tempBuffer1) {\r\n    if (!srcColorBuffer || !normalBuffer || !srcDepthTexture || !targetBuffer || !tempBuffer || !tempBuffer1) {\r\n      return;\r\n    }\r\n    const gfx = this._gfx;\r\n    const tanHalfFOV = Math.tan(THREE.MathUtils.DEG2RAD * 0.5 * gfx.camera.fov);\r\n\r\n    _aoMaterial.uniforms.diffuseTexture.value = srcColorBuffer.texture;\r\n    _aoMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    _aoMaterial.uniforms.normalTexture.value = normalBuffer.texture;\r\n    _aoMaterial.uniforms.srcTexelSize.value.set(1.0 / srcColorBuffer.width, 1.0 / srcColorBuffer.height);\r\n    _aoMaterial.uniforms.camNearFar.value.set(gfx.camera.near, gfx.camera.far);\r\n    _aoMaterial.uniforms.projMatrix.value = gfx.camera.projectionMatrix;\r\n    _aoMaterial.uniforms.aspectRatio.value = gfx.camera.aspect;\r\n    _aoMaterial.uniforms.tanHalfFOV.value = tanHalfFOV;\r\n    gfx.root.matrix.extractScale(_scale);\r\n    _aoMaterial.uniforms.kernelRadius.value = settings.now.debug.ssaoKernelRadius * _scale.x;\r\n    _aoMaterial.uniforms.depthThreshold.value = 2.0 * this._getBSphereRadius(); // diameter\r\n    _aoMaterial.uniforms.factor.value = settings.now.debug.ssaoFactor;\r\n    // N: should be tempBuffer1 for proper use of buffers (see buffers using outside the function)\r\n    gfx.renderer.setRenderTarget(tempBuffer1);\r\n    gfx.renderer.renderScreenQuad(_aoMaterial);\r\n\r\n    _horBlurMaterial.uniforms.aoMap.value = tempBuffer1.texture;\r\n    _horBlurMaterial.uniforms.srcTexelSize.value.set(1.0 / tempBuffer1.width, 1.0 / tempBuffer1.height);\r\n    _horBlurMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    gfx.renderer.setRenderTarget(tempBuffer);\r\n    gfx.renderer.renderScreenQuad(_horBlurMaterial);\r\n\r\n    _vertBlurMaterial.uniforms.aoMap.value = tempBuffer.texture;\r\n    _vertBlurMaterial.uniforms.diffuseTexture.value = srcColorBuffer.texture;\r\n    _vertBlurMaterial.uniforms.srcTexelSize.value.set(1.0 / tempBuffer.width, 1.0 / tempBuffer.height);\r\n    _vertBlurMaterial.uniforms.depthTexture.value = srcDepthTexture;\r\n    _vertBlurMaterial.uniforms.projMatrix.value = gfx.camera.projectionMatrix;\r\n    _vertBlurMaterial.uniforms.aspectRatio.value = gfx.camera.aspect;\r\n    _vertBlurMaterial.uniforms.tanHalfFOV.value = tanHalfFOV;\r\n    const { fog } = gfx.scene;\r\n    if (fog) {\r\n      _vertBlurMaterial.uniforms.fogNearFar.value.set(fog.near, fog.far);\r\n      _vertBlurMaterial.uniforms.fogColor.value.set(fog.color.r, fog.color.g, fog.color.b, settings.now.fogAlpha);\r\n    }\r\n    if ((_vertBlurMaterial.useFog !== settings.now.fog)\r\n      || (_vertBlurMaterial.fogTransparent !== settings.now.bg.transparent)) {\r\n      _vertBlurMaterial.setValues({ useFog: settings.now.fog, fogTransparent: settings.now.bg.transparent });\r\n      _vertBlurMaterial.needsUpdate = true;\r\n    }\r\n    gfx.renderer.setRenderTarget(targetBuffer);\r\n    gfx.renderer.renderScreenQuad(_vertBlurMaterial);\r\n  };\r\n}());\r\n\r\n/**\r\n * Reset the viewer, unload molecules.\r\n * @param {boolean=} keepReps - Keep representations while resetting viewer state.\r\n */\r\nMiew.prototype.reset = function (/* keepReps */) {\r\n  if (this._picker) {\r\n    this._picker.reset();\r\n  }\r\n  this._lastPick = null;\r\n\r\n  this._releaseAllVisuals();\r\n\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this._resetObjects();\r\n\r\n  if (this._gfx) {\r\n    gfxutils.clearTree(this._gfx.pivot);\r\n    this._gfx.renderer2d.reset();\r\n  }\r\n\r\n  this.setNeedRender();\r\n};\r\n\r\nMiew.prototype._resetScene = function () {\r\n  this._objectControls.reset();\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n  this.resetReps();\r\n  this.resetPivot();\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype.resetView = function () {\r\n  // reset controls\r\n  if (this._picker) {\r\n    this._picker.reset();\r\n  }\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._resetScene();\r\n\r\n  // reset selection\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.updateSelectionMask({});\r\n    visual.rebuildSelectionGeometry();\r\n  });\r\n};\r\n\r\nMiew.prototype._export = function (format) {\r\n  const TheExporter = _.head(io.exporters.find({ format }));\r\n  if (!TheExporter) {\r\n    this.logger.error('Could not find suitable exporter for this source');\r\n    return Promise.reject(new Error('Could not find suitable exporter for this source'));\r\n  }\r\n  this.dispatchEvent({ type: 'exporting' });\r\n\r\n  if (this._visuals[this._curVisualName] instanceof ComplexVisual) {\r\n    let dataSource = null;\r\n    if (TheExporter.SourceClass === ComplexVisual) {\r\n      dataSource = this._visuals[this._curVisualName];\r\n    } else if (TheExporter.SourceClass === Complex) {\r\n      dataSource = this._visuals[this._curVisualName]._complex;\r\n    }\r\n    const exporter = new TheExporter(dataSource, { miewVersion: Miew.VERSION });\r\n    return exporter.export().then((data) => data);\r\n  }\r\n  if (this._visuals[this._curVisualName] instanceof VolumeVisual) {\r\n    return Promise.reject(new Error('Sorry, exporter for volume data not implemented yet'));\r\n  }\r\n  return Promise.reject(new Error('Unexpected format of data'));\r\n};\r\n\r\nconst rePdbId = /^(?:(pdb|cif|ccp4|dsn6):\\s*)?(\\d[a-z\\d]{3})$/i;\r\nconst rePubchem = /^(?:pc|pubchem):\\s*([a-z]+)$/i;\r\nconst reUrlScheme = /^([a-z][a-z\\d\\-+.]*):/i;\r\n\r\nfunction resolveSourceShortcut(source, opts) {\r\n  if (!_.isString(source)) {\r\n    return source;\r\n  }\r\n\r\n  // e.g. \"cif:1CRN\"\r\n  const matchesPdbId = rePdbId.exec(source);\r\n  if (matchesPdbId) {\r\n    let [, format = 'pdb', id] = matchesPdbId;\r\n\r\n    format = format.toLowerCase();\r\n    id = id.toUpperCase();\r\n\r\n    switch (format) {\r\n      case 'pdb':\r\n        source = `https://files.rcsb.org/download/${id}.pdb`;\r\n        break;\r\n      case 'cif':\r\n        source = `https://files.rcsb.org/download/${id}.cif`;\r\n        break;\r\n      case 'ccp4':\r\n        source = `https://www.ebi.ac.uk/pdbe/coordinates/files/${id.toLowerCase()}.ccp4`;\r\n        break;\r\n      case 'dsn6':\r\n        source = `https://edmaps.rcsb.org/maps/${id.toLowerCase()}_2fofc.dsn6`;\r\n        break;\r\n      default:\r\n        throw new Error('Unexpected data format shortcut');\r\n    }\r\n\r\n    opts.fileType = format;\r\n    opts.fileName = `${id}.${format}`;\r\n    opts.sourceType = 'url';\r\n    return source;\r\n  }\r\n\r\n  // e.g. \"pc:aspirin\"\r\n  const matchesPubchem = rePubchem.exec(source);\r\n  if (matchesPubchem) {\r\n    const compound = matchesPubchem[1].toLowerCase();\r\n    source = `https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/name/${compound}/JSON?record_type=3d`;\r\n    opts.fileType = 'pubchem';\r\n    opts.fileName = `${compound}.json`;\r\n    opts.sourceType = 'url';\r\n    return source;\r\n  }\r\n\r\n  // otherwise is should be an URL\r\n  if (opts.sourceType === 'url' || opts.sourceType === undefined) {\r\n    opts.sourceType = 'url';\r\n\r\n    // e.g. \"./data/1CRN.pdb\"\r\n    if (!reUrlScheme.test(source)) {\r\n      source = utils.resolveURL(source);\r\n    }\r\n  }\r\n\r\n  return source;\r\n}\r\n\r\nfunction updateBinaryMode(opts) {\r\n  let { binary } = opts;\r\n\r\n  // detect by format\r\n  if (opts.fileType !== undefined) {\r\n    const TheParser = _.head(io.parsers.find({ format: opts.fileType }));\r\n    if (TheParser) {\r\n      binary = TheParser.binary || false;\r\n    } else {\r\n      throw new Error('Could not find suitable parser for this format');\r\n    }\r\n  }\r\n\r\n  // detect by file extension\r\n  if (binary === undefined && opts.fileExt !== undefined) {\r\n    const TheParser = _.head(io.parsers.find({ ext: opts.fileExt }));\r\n    if (TheParser) {\r\n      binary = TheParser.binary || false;\r\n    }\r\n  }\r\n\r\n  // temporary workaround for animation\r\n  if (opts.fileExt !== undefined && opts.fileExt.toLowerCase() === '.man') {\r\n    opts.binary = true;\r\n    opts.animation = true; // who cares?\r\n  }\r\n\r\n  // update if detected\r\n  if (binary !== undefined) {\r\n    if (opts.binary !== undefined && opts.binary !== binary) {\r\n      opts.context.logger.warn('Overriding incorrect binary mode');\r\n    }\r\n  }\r\n\r\n  opts.binary = binary || false;\r\n}\r\n\r\nfunction _fetchData(source, opts, job) {\r\n  return new Promise(((resolve) => {\r\n    if (job.shouldCancel()) {\r\n      throw new Error('Operation cancelled');\r\n    }\r\n    job.notify({ type: 'fetching' });\r\n\r\n    // allow for source shortcuts\r\n    source = resolveSourceShortcut(source, opts);\r\n\r\n    // detect a proper loader\r\n    const TheLoader = _.head(io.loaders.find({ type: opts.sourceType, source }));\r\n    if (!TheLoader) {\r\n      throw new Error(LOADER_NOT_FOUND);\r\n    }\r\n\r\n    // split file name\r\n    const fileName = opts.fileName || TheLoader.extractName(source);\r\n    if (fileName) {\r\n      const [name, fileExt] = utils.splitFileName(fileName);\r\n      _.defaults(opts, { name, fileExt, fileName });\r\n    }\r\n\r\n    // should it be text or binary?\r\n    updateBinaryMode(opts);\r\n\r\n    // FIXME: All new settings retrieved from server are applied after the loading is complete. However, we need some\r\n    // flags to alter the loading process itself. Here we apply them in advance. Dirty hack. Kill the server, remove\r\n    // all hacks and everybody's happy.\r\n    let newOptions = _.get(opts, 'preset.expression');\r\n    if (!_.isUndefined(newOptions)) {\r\n      newOptions = JSON.parse(newOptions);\r\n      if (newOptions && newOptions.settings) {\r\n        const keys = ['singleUnit'];\r\n        for (let keyIndex = 0, keyCount = keys.length; keyIndex < keyCount; ++keyIndex) {\r\n          const key = keys[keyIndex];\r\n          const value = _.get(newOptions.settings, key);\r\n          if (!_.isUndefined(value)) {\r\n            settings.set(key, value);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // create a loader\r\n    const loader = new TheLoader(source, opts);\r\n    loader.context = opts.context;\r\n    job.addEventListener('cancel', () => loader.abort());\r\n\r\n    loader.addEventListener('progress', (event) => {\r\n      if (event.lengthComputable && event.total > 0) {\r\n        reportProgress(loader.logger, 'Fetching', event.loaded / event.total);\r\n      } else {\r\n        reportProgress(loader.logger, 'Fetching');\r\n      }\r\n    });\r\n\r\n    console.time('fetch');\r\n    const promise = loader.load()\r\n      .then((data) => {\r\n        console.timeEnd('fetch');\r\n        opts.context.logger.info('Fetching finished');\r\n        job.notify({ type: 'fetchingDone', data });\r\n        return data;\r\n      })\r\n      .catch((error) => {\r\n        console.timeEnd('fetch');\r\n        opts.context.logger.debug(error.message);\r\n        if (error.stack) {\r\n          opts.context.logger.debug(error.stack);\r\n        }\r\n        opts.context.logger.error('Fetching failed');\r\n        job.notify({ type: 'fetchingDone', error });\r\n        throw error;\r\n      });\r\n    resolve(promise);\r\n  }));\r\n}\r\n\r\nfunction _parseData(data, opts, job) {\r\n  if (job.shouldCancel()) {\r\n    return Promise.reject(new Error('Operation cancelled'));\r\n  }\r\n\r\n  job.notify({ type: 'parsing' });\r\n\r\n  const TheParser = _.head(io.parsers.find({ format: opts.fileType, ext: opts.fileExt, data }));\r\n  if (!TheParser) {\r\n    return Promise.reject(new Error('Could not find suitable parser'));\r\n  }\r\n\r\n  const parser = new TheParser(data, opts);\r\n  parser.context = opts.context;\r\n  job.addEventListener('cancel', () => parser.abort());\r\n\r\n  console.time('parse');\r\n  return parser.parse()\r\n    .then((dataSet) => {\r\n      console.timeEnd('parse');\r\n      job.notify({ type: 'parsingDone', data: dataSet });\r\n      return dataSet;\r\n    })\r\n    .catch((error) => {\r\n      console.timeEnd('parse');\r\n      opts.error = error;\r\n      opts.context.logger.debug(error.message);\r\n      if (error.stack) {\r\n        opts.context.logger.debug(error.stack);\r\n      }\r\n      opts.context.logger.error('Parsing failed');\r\n      job.notify({ type: 'parsingDone', error });\r\n      throw error;\r\n    });\r\n}\r\n\r\n/**\r\n * Load molecule asynchronously.\r\n * @param {string|File} source - Molecule source to load (e.g. PDB ID, URL or File object).\r\n * @param {object=} opts - Options.\r\n * @param {string=} opts.sourceType - Data source type (e.g. 'url', 'file').\r\n * @param {string=} opts.fileType - Data contents type (e.g. 'pdb', 'cml').\r\n * @param {string=} opts.mdFile - .nc file path.\r\n * @param {boolean=} opts.keepRepsInfo - prevent reset of object and reps information.\r\n * @returns {Promise} name of the visual that was added to the viewer\r\n */\r\nMiew.prototype.load = function (source, opts) {\r\n  opts = _.merge({}, opts, {\r\n    context: this,\r\n  });\r\n\r\n  // for a single-file scenario\r\n  if (!this.settings.now.use.multiFile) {\r\n    // abort all loaders in progress\r\n    if (this._loading.length) {\r\n      this._loading.forEach((job) => {\r\n        job.cancel();\r\n      });\r\n      this._loading.length = 0;\r\n    }\r\n\r\n    // reset\r\n    if (!opts.animation) { // FIXME: sometimes it is set AFTERWARDS!\r\n      this.reset(true);\r\n    }\r\n  }\r\n\r\n  this._interpolator.reset();\r\n\r\n  this.dispatchEvent({ type: 'loading', options: opts, source });\r\n\r\n  const job = new JobHandle();\r\n  this._loading.push(job);\r\n  job.addEventListener('notification', (e) => {\r\n    this.dispatchEvent(e.slaveEvent);\r\n  });\r\n\r\n  this._spinner.spin(this._container);\r\n\r\n  const onLoadEnd = (anything) => {\r\n    const jobIndex = this._loading.indexOf(job);\r\n    if (jobIndex !== -1) {\r\n      this._loading.splice(jobIndex, 1);\r\n    }\r\n    this._spinner.stop();\r\n    this._refreshTitle();\r\n    job.notify({ type: 'loadingDone', anything });\r\n    return anything;\r\n  };\r\n\r\n  return _fetchData(source, opts, job)\r\n    .then((data) => _parseData(data, opts, job))\r\n    .then((object) => {\r\n      const name = this._onLoad(object, opts);\r\n      return onLoadEnd(name);\r\n    })\r\n    .catch((err) => {\r\n      this.logger.error('Could not load data');\r\n      this.logger.debug(err);\r\n      throw onLoadEnd(err);\r\n    });\r\n};\r\n\r\n/**\r\n * Unload molecule (delete corresponding visual).\r\n * @param {string=} name - name of the visual\r\n */\r\nMiew.prototype.unload = function (name) {\r\n  this._removeVisual(name || this.getCurrentVisual());\r\n  this.resetPivot();\r\n  if (settings.now.shadow.on) {\r\n    this._updateShadowCamera();\r\n  }\r\n};\r\n\r\n/**\r\n * Start new animation. Now is broken.\r\n * @param fileData - new data to animate\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._startAnimation = function (fileData) {\r\n  this._stopAnimation();\r\n  const self = this;\r\n  const visual = this._getComplexVisual();\r\n  if (visual === null) {\r\n    this.logger.error('Unable to start animation - no molecule is loaded.');\r\n    return;\r\n  }\r\n  try {\r\n    this._frameInfo = new FrameInfo(\r\n      visual.getComplex(),\r\n      fileData,\r\n      {\r\n        onLoadStatusChanged() {\r\n          self.dispatchEvent({\r\n            type: 'mdPlayerStateChanged',\r\n            state: {\r\n              isPlaying: self._isAnimating,\r\n              isLoading: self._frameInfo ? self._frameInfo.isLoading : true,\r\n            },\r\n          });\r\n        },\r\n        onError(message) {\r\n          self._stopAnimation();\r\n          self.logger.error(message);\r\n        },\r\n      },\r\n    );\r\n  } catch (e) {\r\n    this.logger.error('Animation file does not fit to current complex!');\r\n    return;\r\n  }\r\n  this._continueAnimation();\r\n};\r\n\r\n/**\r\n * Pause current animation. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._pauseAnimation = function () {\r\n  if (this._animInterval === null) {\r\n    return;\r\n  }\r\n  this._isAnimating = false;\r\n  clearInterval(this._animInterval);\r\n  this._animInterval = null;\r\n  if (this._frameInfo) {\r\n    this.dispatchEvent({\r\n      type: 'mdPlayerStateChanged',\r\n      state: {\r\n        isPlaying: this._isAnimating,\r\n        isLoading: this._frameInfo.isLoading,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Continue current animation after pausing. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._continueAnimation = function () {\r\n  this._isAnimating = true;\r\n  let minFrameTime = 1000 / settings.now.maxfps;\r\n  minFrameTime = Number.isNaN(minFrameTime) ? 0 : minFrameTime;\r\n  const self = this;\r\n  const { pivot } = self._gfx;\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    visual.resetSelectionMask();\r\n    visual.rebuildSelectionGeometry();\r\n    this._msgAtomInfo.style.opacity = 0.0;\r\n  }\r\n  this._animInterval = setInterval(() => {\r\n    self.dispatchEvent({\r\n      type: 'mdPlayerStateChanged',\r\n      state: {\r\n        isPlaying: self._isAnimating,\r\n        isLoading: self._frameInfo.isLoading,\r\n      },\r\n    });\r\n    if (self._frameInfo.frameIsReady) {\r\n      pivot.updateToFrame(self._frameInfo);\r\n      self._updateObjsToFrame(self._frameInfo);\r\n      self._refreshTitle(` Frame ${self._frameInfo._currFrame} of ${self._frameInfo._framesCount\r\n      } time interval - ${self._frameInfo._timeStep}`);\r\n      try {\r\n        self._frameInfo.nextFrame();\r\n      } catch (e) {\r\n        self.logger.error('Error during animation');\r\n        self._stopAnimation();\r\n        return;\r\n      }\r\n      self._needRender = true;\r\n    }\r\n  }, minFrameTime);\r\n};\r\n\r\n/**\r\n * Stop current animation. Now is broken.\r\n * @private\r\n * @deprecated until animation system refactoring.\r\n */\r\nMiew.prototype._stopAnimation = function () {\r\n  if (this._animInterval === null) {\r\n    return;\r\n  }\r\n  clearInterval(this._animInterval);\r\n  this._frameInfo.disableEvents();\r\n  this._frameInfo = null;\r\n  this._animInterval = null;\r\n  this.dispatchEvent({\r\n    type: 'mdPlayerStateChanged',\r\n    state: null,\r\n  });\r\n};\r\n\r\n/**\r\n * Invoked upon successful loading of some data source\r\n * @param {DataSource} dataSource - Data source for visualization (molecular complex or other)\r\n * @param {object} opts - Options.\r\n * @private\r\n */\r\nMiew.prototype._onLoad = function (dataSource, opts) {\r\n  const gfx = this._gfx;\r\n  let visualName = null;\r\n\r\n  if (opts.animation) {\r\n    this._refreshTitle();\r\n    this._startAnimation(dataSource);\r\n    return null;\r\n  }\r\n  this._stopAnimation();\r\n  if (!opts || !opts.keepRepsInfo) {\r\n    this._opts.reps = null;\r\n    this._opts._objects = null;\r\n  }\r\n\r\n  if (dataSource.id === 'Complex') {\r\n    const complex = dataSource;\r\n\r\n    // update title\r\n    if (opts.fileName) {\r\n      complex.name = complex.name || removeExtension(opts.fileName).toUpperCase();\r\n    } else if (opts.amberFileName) {\r\n      complex.name = complex.name || removeExtension(opts.amberFileName).toUpperCase();\r\n    } else {\r\n      complex.name = `Dynamic ${opts.fileType} molecule`;\r\n    }\r\n\r\n    visualName = this._addVisual(new ComplexVisual(complex.name, complex));\r\n    this._curVisualName = visualName;\r\n\r\n    const desc = this.info();\r\n    this.logger.info(`Parsed ${opts.fileName} (${\r\n      desc.atoms} atoms, ${\r\n      desc.bonds} bonds, ${\r\n      desc.residues} residues, ${\r\n      desc.chains} chains).`);\r\n\r\n    if (_.isNumber(this._opts.unit)) {\r\n      complex.setCurrentUnit(this._opts.unit);\r\n    }\r\n\r\n    if (opts.preset) {\r\n      // ...removed server access...\r\n    } else if (settings.now.autoPreset) {\r\n      switch (opts.fileType) {\r\n        case 'cml':\r\n          this.resetReps('small');\r\n          break;\r\n        case 'pdb':\r\n        case 'mmtf':\r\n        case 'cif':\r\n          if (hasValidResidues(complex)) {\r\n            this.resetReps('macro');\r\n          } else {\r\n            this.resetReps('small');\r\n          }\r\n          break;\r\n        default:\r\n          this.resetReps('default');\r\n          break;\r\n      }\r\n    } else {\r\n      this.resetReps('default');\r\n    }\r\n  } else if (dataSource.id === 'Volume') {\r\n    this.resetEd();\r\n    visualName = this._onLoadEd(dataSource);\r\n  }\r\n\r\n  gfx.camera.updateProjectionMatrix();\r\n  this._updateFog();\r\n\r\n  // reset global transform\r\n  gfx.root.resetTransform();\r\n  this.resetPivot();\r\n\r\n  // set scale to fit everything on the screen\r\n  this._objectControls.setScale(settings.now.radiusToFit / this._getBSphereRadius());\r\n\r\n  this._resetObjects();\r\n\r\n  if (settings.now.autoResolution) {\r\n    this._tweakResolution();\r\n  }\r\n\r\n  if (settings.now.shadow.on) {\r\n    this._updateShadowCamera();\r\n  }\r\n\r\n  if (this._opts.view) {\r\n    this.view(this._opts.view);\r\n    delete this._opts.view;\r\n  }\r\n\r\n  this._refreshTitle();\r\n\r\n  return visualName;\r\n};\r\n\r\nMiew.prototype.resetEd = function () {\r\n  if (this._edLoader) {\r\n    this._edLoader.abort();\r\n    this._edLoader = null;\r\n  }\r\n\r\n  // free all resources\r\n  this._removeVisual(this._getVolumeVisual());\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype.loadEd = function (source) {\r\n  this.resetEd();\r\n\r\n  const TheLoader = _.head(io.loaders.find({ source }));\r\n  if (!TheLoader) {\r\n    this.logger.error(LOADER_NOT_FOUND);\r\n    return Promise.reject(new Error(LOADER_NOT_FOUND));\r\n  }\r\n\r\n  const loader = this._edLoader = new TheLoader(source, { binary: true });\r\n  loader.context = this;\r\n  return loader.load().then((data) => {\r\n    const TheParser = _.head(io.parsers.find({ format: 'ccp4' }));\r\n    if (!TheParser) {\r\n      throw new Error(PARSER_NOT_FOUND);\r\n    }\r\n    const parser = new TheParser(data);\r\n    parser.context = this;\r\n    return parser.parse().then((dataSource) => {\r\n      this._onLoadEd(dataSource);\r\n    });\r\n  }).catch((error) => {\r\n    this.logger.error('Could not load ED data');\r\n    this.logger.debug(error);\r\n  });\r\n};\r\n\r\nMiew.prototype._onLoadEd = function (dataSource) {\r\n  dataSource.normalize();\r\n\r\n  const volumeVisual = new VolumeVisual('volume', dataSource);\r\n  volumeVisual.getMesh().layers.set(gfxutils.LAYERS.VOLUME); // volume mesh is not visible to common render\r\n  const visualName = this._addVisual(volumeVisual);\r\n\r\n  this._needRender = true;\r\n  return visualName;\r\n};\r\n\r\nMiew.prototype._needRebuild = function () {\r\n  let needsRebuild = false;\r\n  this._forEachComplexVisual((visual) => {\r\n    needsRebuild = needsRebuild || visual.needsRebuild();\r\n  });\r\n  return needsRebuild;\r\n};\r\n\r\nMiew.prototype._rebuildObjects = function () {\r\n  const self = this;\r\n  const gfx = this._gfx;\r\n  let i;\r\n  let n;\r\n\r\n  // remove old object geometry\r\n  const toRemove = [];\r\n  for (i = 0; i < gfx.pivot.children.length; ++i) {\r\n    const child = gfx.pivot.children[i];\r\n    if (!(child instanceof Visual)) {\r\n      toRemove.push(child);\r\n    }\r\n  }\r\n  for (i = 0; i < toRemove.length; ++i) {\r\n    toRemove[i].parent.remove(toRemove[i]);\r\n  }\r\n\r\n  setTimeout(() => {\r\n    const objList = self._objects;\r\n    for (i = 0, n = objList.length; i < n; ++i) {\r\n      const obj = objList[i];\r\n      if (obj.needsRebuild) {\r\n        obj.build();\r\n      }\r\n      if (obj.getGeometry()) {\r\n        gfx.pivot.add(obj.getGeometry());\r\n      }\r\n    }\r\n  }, 10);\r\n};\r\n\r\nMiew.prototype.changeUnit = function (unitIdx, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    throw new Error('There is no complex to change!');\r\n  }\r\n\r\n  function currentUnitInfo() {\r\n    const unit = visual ? visual.getComplex().getCurrentUnit() : 0;\r\n    const type = unit > 0 ? (`Bio molecule ${unit}`) : 'Asymmetric unit';\r\n    return `Current unit: ${unit} (${type})`;\r\n  }\r\n\r\n  if (unitIdx === undefined) {\r\n    return currentUnitInfo();\r\n  }\r\n  if (_.isString(unitIdx)) {\r\n    unitIdx = Math.max(parseInt(unitIdx, 10), 0);\r\n  }\r\n  if (visual.getComplex().setCurrentUnit(unitIdx)) {\r\n    this._resetScene();\r\n    this._updateInfoPanel();\r\n  }\r\n  return currentUnitInfo();\r\n};\r\n\r\n/**\r\n * Start to rebuild geometry asynchronously.\r\n */\r\nMiew.prototype.rebuild = function () {\r\n  if (this._building) {\r\n    this.logger.warn('Miew.rebuild(): already building!');\r\n    return;\r\n  }\r\n  this._building = true;\r\n\r\n  this.dispatchEvent({ type: 'rebuilding' });\r\n\r\n  this._rebuildObjects();\r\n\r\n  this._gfx.renderer2d.reset();\r\n\r\n  const rebuildActions = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.needsRebuild()) {\r\n      rebuildActions.push(visual.rebuild().then(() => new Promise(((resolve) => {\r\n        visual.rebuildSelectionGeometry();\r\n        resolve();\r\n      }))));\r\n    }\r\n  });\r\n\r\n  // Start asynchronous rebuild\r\n  const self = this;\r\n  this._spinner.spin(this._container);\r\n  Promise.all(rebuildActions).then(() => {\r\n    self._spinner.stop();\r\n\r\n    self._needRender = true;\r\n\r\n    self._refreshTitle();\r\n    this.dispatchEvent({ type: 'buildingDone' });\r\n    self._building = false;\r\n  });\r\n};\r\n\r\n/** Mark all representations for rebuilding */\r\nMiew.prototype.rebuildAll = function () {\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setNeedsRebuild();\r\n  });\r\n};\r\n\r\nMiew.prototype._refreshTitle = function (appendix) {\r\n  let title;\r\n  appendix = appendix === undefined ? '' : appendix;\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    title = visual.getComplex().name;\r\n    const rep = visual.repGet(visual.repCurrent());\r\n    title += (rep ? ` – ${rep.mode.name} Mode` : '');\r\n  } else {\r\n    title = Object.keys(this._visuals).length > 0 ? 'Unknown' : 'No Data';\r\n  }\r\n  title += appendix;\r\n\r\n  this.dispatchEvent({ type: 'titleChanged', data: title });\r\n};\r\n\r\nMiew.prototype.setNeedRender = function () {\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._extractRepresentation = function () {\r\n  const changed = [];\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual.getSelectionCount() === 0) {\r\n      return;\r\n    }\r\n\r\n    const selector = visual.buildSelectorFromMask(1 << visual.getSelectionBit());\r\n    const defPreset = settings.now.presets.default;\r\n    const res = visual.repAdd({\r\n      selector,\r\n      mode: defPreset[0].mode.id,\r\n      colorer: defPreset[0].colorer.id,\r\n      material: defPreset[0].material.id,\r\n    });\r\n    if (!res) {\r\n      if (visual.repCount() === ComplexVisual.NUM_REPRESENTATION_BITS) {\r\n        this.logger.warn(`Number of representations is limited to ${ComplexVisual.NUM_REPRESENTATION_BITS}`);\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name: visual.name });\r\n    visual.repCurrent(res.index);\r\n\r\n    changed.push(visual.name);\r\n  });\r\n\r\n  if (changed.length > 0) {\r\n    this.logger.report(`New representation from selection for complexes: ${changed.join(', ')}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Change current representation list.\r\n * @param {array} reps - Representation list.\r\n */\r\nMiew.prototype._setReps = function (reps) {\r\n  reps = reps || (this._opts && this._opts.reps) || [];\r\n  this._forEachComplexVisual((visual) => visual.resetReps(reps));\r\n};\r\n\r\n/**\r\n * Apply existing preset to current scene.\r\n * @param preset\r\n */\r\nMiew.prototype.applyPreset = function (preset) {\r\n  const { presets } = settings.now;\r\n  const presList = [\r\n    preset || settings.defaults.preset,\r\n    settings.defaults.preset,\r\n    Object.keys(presets)[0],\r\n  ];\r\n  let reps = null;\r\n  for (let i = 0; !reps && i < presList.length; ++i) {\r\n    settings.set('preset', presList[i]);\r\n    reps = presets[settings.now.preset];\r\n    if (!reps) {\r\n      this.logger.warn(`Unknown preset \"${settings.now.preset}\"`);\r\n    }\r\n  }\r\n  this._setReps(reps);\r\n};\r\n\r\n/**\r\n * Reset current representation list to initial values.\r\n * @param {string} [preset] - The source preset in case of uninitialized representation list.\r\n */\r\nMiew.prototype.resetReps = function (preset) {\r\n  const reps = this._opts && this._opts.reps;\r\n  if (reps) {\r\n    this._setReps(reps);\r\n  } else {\r\n    this.applyPreset(preset);\r\n  }\r\n};\r\n\r\n/**\r\n * Get number of representations created so far.\r\n * @returns {number} Number of reps.\r\n */\r\nMiew.prototype.repCount = function (name) {\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repCount() : 0;\r\n};\r\n\r\n/**\r\n * Get or set the current representation index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount()}. Defaults to the current one.\r\n * @param {string=} [name] - Complex name. Defaults to the current one.\r\n * @returns {number} The current index.\r\n */\r\nMiew.prototype.repCurrent = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  const newIdx = visual ? visual.repCurrent(index) : -1;\r\n  if (index && newIdx !== index) {\r\n    this.logger.warn(`Representation ${index} was not found. Current rep remains unchanged.`);\r\n  }\r\n  return newIdx;\r\n};\r\n\r\n/**\r\n * Get or set representation by index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount}(). Defaults to the current one.\r\n * @param {object=} rep - Optional representation description.\r\n * @param {string=} rep.selector - Selector string.\r\n * @param {string=} rep.mode - Mode id.\r\n * @param {string=} rep.colorer - Colorer id.\r\n * @param {string=} rep.material - Material id.\r\n * @returns {?object} Representation description.\r\n */\r\nMiew.prototype.rep = function (index, rep) {\r\n  const visual = this._getComplexVisual('');\r\n  if (!visual) {\r\n    return null;\r\n  }\r\n  const res = visual.rep(index, rep);\r\n  if (res.status === 'created') {\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name: visual.name });\r\n  } else if (res.status === 'changed') {\r\n    this.dispatchEvent({ type: 'repChanged', index: res.index, name: visual.name });\r\n  }\r\n  return res.desc;\r\n};\r\n\r\n/**\r\n * Get representation (not just description) by index.\r\n * @param {number=} index - Zero-based index, up to {@link Miew#repCount}(). Defaults to the current one.\r\n * @returns {?object} Representation.\r\n */\r\nMiew.prototype.repGet = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repGet(index) : null;\r\n};\r\n\r\n/**\r\n * Add new representation.\r\n * @param {object=} rep - Representation description.\r\n * @returns {number} Index of the new representation.\r\n */\r\nMiew.prototype.repAdd = function (rep, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return -1;\r\n  }\r\n\r\n  const res = visual.repAdd(rep);\r\n  if (res) {\r\n    this.dispatchEvent({ type: 'repAdded', index: res.index, name });\r\n    return res.index;\r\n  }\r\n  return -1;\r\n};\r\n\r\n/**\r\n * Remove representation.\r\n * @param {number=} index - Zero-based representation index.\r\n */\r\nMiew.prototype.repRemove = function (index, name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return;\r\n  }\r\n\r\n  visual.repRemove(index);\r\n  this.dispatchEvent({ type: 'repRemoved', index, name });\r\n};\r\n\r\n/**\r\n * Hide representation.\r\n * @param {number} index - Zero-based representation index.\r\n * @param {boolean=} hide - Specify false to make rep visible, true to hide (by default).\r\n */\r\nMiew.prototype.repHide = function (index, hide, name) {\r\n  this._needRender = true;\r\n  const visual = this._getComplexVisual(name);\r\n  return visual ? visual.repHide(index, hide) : null;\r\n};\r\n\r\nMiew.prototype._setEditMode = function (mode) {\r\n  this._editMode = mode;\r\n\r\n  const elem = this._msgMode;\r\n  if (elem) {\r\n    elem.style.opacity = (mode === EDIT_MODE.COMPLEX) ? 0.0 : 1.0;\r\n\r\n    if (mode !== EDIT_MODE.COMPLEX) {\r\n      const t = elem.getElementsByTagName('p')[0];\r\n      t.innerHTML = (mode === EDIT_MODE.COMPONENT) ? 'COMPONENT EDIT MODE' : 'FRAGMENT EDIT MODE';\r\n    }\r\n  }\r\n\r\n  this.dispatchEvent({ type: 'editModeChanged', data: mode === EDIT_MODE.COMPLEX });\r\n};\r\n\r\nMiew.prototype._enterComponentEditMode = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPLEX) {\r\n    return;\r\n  }\r\n\r\n  const editors = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    const editor = visual.beginComponentEdit();\r\n    if (editor) {\r\n      editors.push(editor);\r\n    }\r\n  });\r\n\r\n  if (editors === []) {\r\n    return;\r\n  }\r\n\r\n  this._editors = editors;\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- ON');\r\n  this._setEditMode(EDIT_MODE.COMPONENT);\r\n  this._objectControls.keysTranslateObj(true);\r\n};\r\n\r\nMiew.prototype._applyComponentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPONENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n  this._objectControls.keysTranslateObj(false);\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].apply();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- OFF (applied)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._discardComponentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPONENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n  this._objectControls.keysTranslateObj(false);\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].discard();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('COMPONENT EDIT MODE -- OFF (discarded)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n\r\n  this._needRender = true;\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._enterFragmentEditMode = function () {\r\n  if (this._editMode !== EDIT_MODE.COMPLEX) {\r\n    return;\r\n  }\r\n\r\n  const selectedVisuals = [];\r\n  this._forEachComplexVisual((visual) => {\r\n    if (visual instanceof ComplexVisual\r\n          && visual.getSelectionCount() > 0) {\r\n      selectedVisuals.push(visual);\r\n    }\r\n  });\r\n\r\n  if (selectedVisuals.length !== 1) {\r\n    // either we have no selection or\r\n    // we have selected atoms in two or more visuals -- not supported\r\n    return;\r\n  }\r\n\r\n  const editor = selectedVisuals[0].beginFragmentEdit();\r\n  if (!editor) {\r\n    return;\r\n  }\r\n  this._editors = [editor];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- ON (single bond)');\r\n  this._setEditMode(EDIT_MODE.FRAGMENT);\r\n  this._objectControls.allowTranslation(false);\r\n  this._objectControls.allowAltObjFreeRotation(editor.isFreeRotationAllowed());\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._applyFragmentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.FRAGMENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].apply();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- OFF (applied)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n\r\n  this.rebuildAll();\r\n};\r\n\r\nMiew.prototype._discardFragmentEdit = function () {\r\n  if (this._editMode !== EDIT_MODE.FRAGMENT) {\r\n    return;\r\n  }\r\n\r\n  this._objectControls.stop();\r\n\r\n  for (let i = 0; i < this._editors.length; ++i) {\r\n    this._editors[i].discard();\r\n  }\r\n  this._editors = [];\r\n\r\n  this.logger.info('FRAGMENT EDIT MODE -- OFF (discarded)');\r\n  this._setEditMode(EDIT_MODE.COMPLEX);\r\n  this._objectControls.allowTranslation(true);\r\n  this._objectControls.allowAltObjFreeRotation(true);\r\n\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._onPick = function (event) {\r\n  if (!settings.now.picking) {\r\n    // picking is disabled\r\n    return;\r\n  }\r\n\r\n  if (this._animInterval !== null) {\r\n    // animation playback is on\r\n    return;\r\n  }\r\n\r\n  if (this._editMode === EDIT_MODE.FRAGMENT) {\r\n    // prevent picking in fragment edit mode\r\n    return;\r\n  }\r\n\r\n  if (this._objectControls.isEditingAltObj()) {\r\n    // prevent picking during component rotation\r\n    return;\r\n  }\r\n\r\n  // update last pick & find complex\r\n  let complex = null;\r\n  if (event.obj.atom) {\r\n    complex = event.obj.atom.residue.getChain().getComplex();\r\n    this._lastPick = event.obj.atom;\r\n  } else if (event.obj.residue) {\r\n    complex = event.obj.residue.getChain().getComplex();\r\n    this._lastPick = event.obj.residue;\r\n  } else if (event.obj.chain) {\r\n    complex = event.obj.chain.getComplex();\r\n    this._lastPick = event.obj.chain;\r\n  } else if (event.obj.molecule) {\r\n    complex = event.obj.molecule.complex;\r\n    this._lastPick = event.obj.molecule;\r\n  } else {\r\n    this._lastPick = null;\r\n  }\r\n\r\n  function _updateSelection(visual) {\r\n    visual.updateSelectionMask(event.obj);\r\n    visual.rebuildSelectionGeometry();\r\n  }\r\n\r\n  // update visual\r\n  if (complex) {\r\n    const visual = this._getVisualForComplex(complex);\r\n    if (visual) {\r\n      _updateSelection(visual);\r\n      this._needRender = true;\r\n    }\r\n  } else {\r\n    this._forEachComplexVisual(_updateSelection);\r\n    this._needRender = true;\r\n  }\r\n\r\n  this._updateInfoPanel();\r\n  this.dispatchEvent(event);\r\n};\r\n\r\nMiew.prototype._onKeyDown = function (event) {\r\n  if (!this._running || !this._hotKeysEnabled) {\r\n    return;\r\n  }\r\n\r\n  // editing keys\r\n  if (settings.now.editing) {\r\n    switch (event.code) {\r\n      case 'KeyC':\r\n        this._enterComponentEditMode();\r\n        break;\r\n      case 'KeyF':\r\n        this._enterFragmentEditMode();\r\n        break;\r\n      case 'KeyA':\r\n        switch (this._editMode) {\r\n          case EDIT_MODE.COMPONENT:\r\n            this._applyComponentEdit();\r\n            break;\r\n          case EDIT_MODE.FRAGMENT:\r\n            this._applyFragmentEdit();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      case 'KeyD':\r\n        switch (this._editMode) {\r\n          case EDIT_MODE.COMPONENT:\r\n            this._discardComponentEdit();\r\n            break;\r\n          case EDIT_MODE.FRAGMENT:\r\n            this._discardFragmentEdit();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n\r\n  // other keys\r\n  switch (event.code) {\r\n    case 'NumpadAdd':\r\n      if (event.altKey) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this._forEachComplexVisual((visual) => {\r\n          visual.expandSelection();\r\n          visual.rebuildSelectionGeometry();\r\n        });\r\n        this._updateInfoPanel();\r\n        this._needRender = true;\r\n      }\r\n      break;\r\n    case 'NumpadSubtract':\r\n      if (event.altKey) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this._forEachComplexVisual((visual) => {\r\n          visual.shrinkSelection();\r\n          visual.rebuildSelectionGeometry();\r\n        });\r\n        this._updateInfoPanel();\r\n        this._needRender = true;\r\n      }\r\n      break;\r\n    default:\r\n  }\r\n};\r\n\r\nMiew.prototype._onKeyUp = function (event) {\r\n  if (!this._running || !this._hotKeysEnabled) {\r\n    return;\r\n  }\r\n\r\n  if (event.code === 'KeyX') {\r\n    this._extractRepresentation();\r\n  }\r\n};\r\n\r\nMiew.prototype._updateInfoPanel = function () {\r\n  const info = this._msgAtomInfo.getElementsByTagName('p')[0];\r\n  let atom;\r\n  let residue;\r\n\r\n  let count = 0;\r\n  this._forEachComplexVisual((visual) => {\r\n    count += visual.getSelectionCount();\r\n  });\r\n\r\n  while (info.firstChild) {\r\n    info.removeChild(info.firstChild);\r\n  }\r\n\r\n  if (count === 0) {\r\n    this._msgAtomInfo.style.opacity = 0.0;\r\n    return;\r\n  }\r\n\r\n  let firstLine = `${String(count)} atom${count !== 1 ? 's' : ''} selected`;\r\n  if (this._lastPick !== null) {\r\n    firstLine += ', the last pick:';\r\n  }\r\n  let secondLine = '';\r\n  let aName = '';\r\n  let coordLine = '';\r\n\r\n  if (this._lastPick instanceof Atom) {\r\n    atom = this._lastPick;\r\n    residue = atom.residue;\r\n\r\n    aName = atom.name;\r\n    const location = (atom.location !== 32) ? String.fromCharCode(atom.location) : ''; // 32 is code of white-space\r\n    secondLine = `${atom.element.fullName} #${atom.serial}${location}: \\\r\n      ${residue._chain._name}.${residue._type._name}${residue._sequence}${residue._icode.trim()}.`;\r\n    secondLine += aName;\r\n\r\n    coordLine = `Coord: (${atom.position.x.toFixed(2).toString()},\\\r\n     ${atom.position.y.toFixed(2).toString()},\\\r\n     ${atom.position.z.toFixed(2).toString()})`;\r\n  } else if (this._lastPick instanceof Residue) {\r\n    residue = this._lastPick;\r\n\r\n    secondLine = `${residue._type._fullName}: \\\r\n      ${residue._chain._name}.${residue._type._name}${residue._sequence}${residue._icode.trim()}`;\r\n  } else if (this._lastPick instanceof Chain) {\r\n    secondLine = `chain ${this._lastPick._name}`;\r\n  } else if (this._lastPick instanceof Molecule) {\r\n    secondLine = `molecule ${this._lastPick._name}`;\r\n  }\r\n\r\n  info.appendChild(document.createTextNode(firstLine));\r\n\r\n  if (secondLine !== '') {\r\n    info.appendChild(document.createElement('br'));\r\n    info.appendChild(document.createTextNode(secondLine));\r\n  }\r\n\r\n  if (coordLine !== '') {\r\n    info.appendChild(document.createElement('br'));\r\n    info.appendChild(document.createTextNode(coordLine));\r\n  }\r\n\r\n  this._msgAtomInfo.style.opacity = 1.0;\r\n};\r\n\r\nMiew.prototype._getAltObj = function () {\r\n  if (this._editors) {\r\n    let altObj = null;\r\n    for (let i = 0; i < this._editors.length; ++i) {\r\n      const nextAltObj = this._editors[i].getAltObj();\r\n      if (nextAltObj.objects.length > 0) {\r\n        if (altObj) {\r\n          // we have selected atoms in two or more visuals -- not supported\r\n          altObj = null;\r\n          break;\r\n        }\r\n        altObj = nextAltObj;\r\n      }\r\n    }\r\n    if (altObj) {\r\n      return altObj;\r\n    }\r\n  }\r\n\r\n  return {\r\n    objects: [],\r\n    pivot: new THREE.Vector3(0, 0, 0),\r\n  };\r\n};\r\n\r\nMiew.prototype.resetPivot = (function () {\r\n  const boundingBox = new THREE.Box3();\r\n  const center = new THREE.Vector3();\r\n\r\n  return function () {\r\n    boundingBox.makeEmpty();\r\n    this._forEachVisual((visual) => {\r\n      boundingBox.union(visual.getBoundaries().boundingBox);\r\n    });\r\n\r\n    boundingBox.getCenter(center);\r\n    this._objectControls.setPivot(center.negate());\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotResidue = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  return function (residue) {\r\n    const visual = this._getVisualForComplex(residue.getChain().getComplex());\r\n    if (!visual) {\r\n      return;\r\n    }\r\n\r\n    if (residue._controlPoint) {\r\n      center.copy(residue._controlPoint);\r\n    } else {\r\n      let x = 0;\r\n      let y = 0;\r\n      let z = 0;\r\n      const amount = residue._atoms.length;\r\n      for (let i = 0; i < amount; ++i) {\r\n        const p = residue._atoms[i].position;\r\n        x += p.x / amount;\r\n        y += p.y / amount;\r\n        z += p.z / amount;\r\n      }\r\n      center.set(x, y, z);\r\n    }\r\n    center.applyMatrix4(visual.matrix).negate();\r\n    this._objectControls.setPivot(center);\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotAtom = (function () {\r\n  const center = new THREE.Vector3();\r\n\r\n  return function (atom) {\r\n    const visual = this._getVisualForComplex(atom.residue.getChain().getComplex());\r\n    if (!visual) {\r\n      return;\r\n    }\r\n\r\n    center.copy(atom.position);\r\n    center.applyMatrix4(visual.matrix).negate();\r\n    this._objectControls.setPivot(center);\r\n    this.dispatchEvent({ type: 'transform' });\r\n  };\r\n}());\r\n\r\nMiew.prototype.getSelectionCenter = (function () {\r\n  const _centerInVisual = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  return function (center, includesAtom, selector) {\r\n    center.set(0.0, 0.0, 0.0);\r\n    let count = 0;\r\n\r\n    this._forEachComplexVisual((visual) => {\r\n      if (visual.getSelectionCenter(_centerInVisual, includesAtom, selector || visual.getSelectionBit())) {\r\n        center.add(_centerInVisual);\r\n        count++;\r\n      }\r\n    });\r\n    if (count === 0) {\r\n      return false;\r\n    }\r\n    center.divideScalar(count);\r\n    center.negate();\r\n    return true;\r\n  };\r\n}());\r\n\r\nMiew.prototype.setPivotSubset = (function () {\r\n  const _center = new THREE.Vector3(0.0, 0.0, 0.0);\r\n\r\n  function _includesInCurSelection(atom, selectionBit) {\r\n    return atom.mask & (1 << selectionBit);\r\n  }\r\n\r\n  function _includesInSelector(atom, selector) {\r\n    return selector.selector.includesAtom(atom);\r\n  }\r\n\r\n  return function (selector) {\r\n    const includesAtom = (selector) ? _includesInSelector : _includesInCurSelection;\r\n\r\n    if (this.getSelectionCenter(_center, includesAtom, selector)) {\r\n      this._objectControls.setPivot(_center);\r\n      this.dispatchEvent({ type: 'transform' });\r\n    } else {\r\n      this.logger.warn('selection is empty. Center operation not performed');\r\n    }\r\n  };\r\n}());\r\n\r\n/**\r\n * Makes a screenshot.\r\n * @param {number} [width] - Width of an image. Defaults to the canvas width.\r\n * @param {number} [height] - Height of an image. Defaults to the width (square) or canvas height,\r\n *        if width is omitted too.\r\n * @returns {string} Data URL representing the image contents.\r\n */\r\nMiew.prototype.screenshot = function (width, height) {\r\n  const gfx = this._gfx;\r\n  const deviceWidth = gfx.renderer.domElement.width;\r\n  const deviceHeight = gfx.renderer.domElement.height;\r\n\r\n  function fov2Tan(fov) {\r\n    return Math.tan(THREE.MathUtils.degToRad(0.5 * fov));\r\n  }\r\n\r\n  function tan2Fov(tan) {\r\n    return THREE.MathUtils.radToDeg(Math.atan(tan)) * 2.0;\r\n  }\r\n\r\n  function getDataURL() {\r\n    let dataURL;\r\n    const currBrowser = utils.getBrowser();\r\n\r\n    if (currBrowser === utils.browserType.SAFARI) {\r\n      const canvas = document.createElement('canvas');\r\n      const canvasContext = canvas.getContext('2d');\r\n\r\n      canvas.width = width === undefined ? deviceWidth : width;\r\n      canvas.height = height === undefined ? deviceHeight : height;\r\n\r\n      canvasContext.drawImage(gfx.renderer.domElement, 0, 0, canvas.width, canvas.height);\r\n      dataURL = canvas.toDataURL('image/png');\r\n    } else {\r\n      // Copy current canvas to screenshot\r\n      dataURL = gfx.renderer.domElement.toDataURL('image/png');\r\n    }\r\n    return dataURL;\r\n  }\r\n  height = height || width;\r\n\r\n  let screenshotURI;\r\n  if ((width === undefined && height === undefined)\r\n    || (width === deviceWidth && height === deviceHeight)) {\r\n    // renderer.domElement.toDataURL('image/png') returns flipped image in Safari\r\n    // It hasn't been resolved yet, but getScreenshotSafari()\r\n    // fixes it using an extra canvas.\r\n    screenshotURI = getDataURL();\r\n  } else {\r\n    const originalAspect = gfx.camera.aspect;\r\n    const originalFov = gfx.camera.fov;\r\n    const originalTanFov2 = fov2Tan(gfx.camera.fov);\r\n\r\n    // screenshot should contain the principal area of interest (a centered square touching screen sides)\r\n    const areaOfInterestSize = Math.min(gfx.width, gfx.height);\r\n    const areaOfInterestTanFov2 = originalTanFov2 * areaOfInterestSize / gfx.height;\r\n\r\n    // set appropriate camera aspect & FOV\r\n    const shotAspect = width / height;\r\n    gfx.renderer.setPixelRatio(1);\r\n    gfx.camera.aspect = shotAspect;\r\n    gfx.camera.fov = tan2Fov(areaOfInterestTanFov2 / Math.min(shotAspect, 1.0));\r\n    gfx.camera.updateProjectionMatrix();\r\n\r\n    // resize canvas to the required size of screenshot\r\n    gfx.renderer.setDrawingBufferSize(width, height, 1);\r\n\r\n    // make screenshot\r\n    this._renderFrame(settings.now.stereo);\r\n    screenshotURI = getDataURL();\r\n\r\n    // restore original camera & canvas proportions\r\n    gfx.renderer.setPixelRatio(window.devicePixelRatio);\r\n    gfx.camera.aspect = originalAspect;\r\n    gfx.camera.fov = originalFov;\r\n    gfx.camera.updateProjectionMatrix();\r\n    gfx.renderer.setDrawingBufferSize(gfx.width, gfx.height, window.devicePixelRatio);\r\n    this._needRender = true;\r\n  }\r\n\r\n  return screenshotURI;\r\n};\r\n\r\n/**\r\n * Makes screenshot and initiates a download.\r\n * @param {string} [filename] - Name of a file. Default to a 'screenshot-XXXXX.png', where XXXXX is a current\r\n *        date/time in seconds.\r\n * @param {number} [width] - Width of an image. Defaults to the canvas width.\r\n * @param {number} [height] - Height of an image. Defaults to the width (square) or canvas height,\r\n *        if width is omitted too.\r\n */\r\nMiew.prototype.screenshotSave = function (filename, width, height) {\r\n  const uri = this.screenshot(width, height);\r\n  utils.shotDownload(uri, filename);\r\n};\r\n\r\nMiew.prototype.save = function (opts) {\r\n  this._export(opts.fileType).then((dataString) => {\r\n    const filename = this._visuals[this._curVisualName]._complex.name;\r\n    utils.download(dataString, filename, opts.fileType);\r\n    this._refreshTitle();\r\n    this.dispatchEvent({ type: 'exportingDone' });\r\n  }).catch((error) => {\r\n    this.logger.error('Could not export data');\r\n    this.logger.debug(error);\r\n    this._refreshTitle();\r\n    this.dispatchEvent({ type: 'exportingDone', error });\r\n  });\r\n};\r\n\r\nMiew.prototype._tweakResolution = function () {\r\n  const maxPerf = [\r\n    ['poor', 100],\r\n    ['low', 500],\r\n    ['medium', 1000],\r\n    ['high', 5000],\r\n    ['ultra', Number.MAX_VALUE],\r\n  ];\r\n\r\n  let atomCount = 0;\r\n  this._forEachComplexVisual((visual) => {\r\n    atomCount += visual.getComplex().getAtomCount();\r\n  });\r\n\r\n  if (atomCount > 0) {\r\n    const performance = this._gfxScore * 10e5 / atomCount;\r\n    // set resolution based on estimated performance\r\n    for (let i = 0; i < maxPerf.length; ++i) {\r\n      if (performance < maxPerf[i][1]) {\r\n        this._autoChangeResolution(maxPerf[i][0]);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._autoChangeResolution = function (resolution) {\r\n  if (resolution !== settings.now.resolution) {\r\n    this.logger.report(`Your rendering resolution was changed to \"${resolution}\" for best performance.`);\r\n  }\r\n  settings.now.resolution = resolution;\r\n};\r\n\r\n/**\r\n * Save current settings to cookies.\r\n */\r\nMiew.prototype.saveSettings = function () {\r\n  this._cookies.setCookie(this._opts.settingsCookie, JSON.stringify(this.settings.getDiffs(true)));\r\n};\r\n\r\n/**\r\n * Load settings from cookies.\r\n */\r\nMiew.prototype.restoreSettings = function () {\r\n  try {\r\n    const cookie = this._cookies.getCookie(this._opts.settingsCookie);\r\n    const diffs = cookie ? JSON.parse(cookie) : {};\r\n    this.settings.applyDiffs(diffs, true);\r\n  } catch (e) {\r\n    this.logger.error(`Cookies parse error: ${e.message}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Reset current settings to the defaults.\r\n */\r\nMiew.prototype.resetSettings = function () {\r\n  this.settings.reset();\r\n};\r\n\r\n/*\r\n   * DANGEROUS and TEMPORARY. The method should change or disappear in future versions.\r\n   * @param {string|object} opts - See {@link Miew} constructor.\r\n   * @see {@link Miew#set}, {@link Miew#repAdd}, {@link Miew#rep}.\r\n   */\r\nMiew.prototype.setOptions = function (opts) {\r\n  if (typeof opts === 'string') {\r\n    opts = Miew.options.fromAttr(opts);\r\n  }\r\n  if (opts.reps) {\r\n    this._opts.reps = null;\r\n  }\r\n  _.merge(this._opts, opts);\r\n  if (opts.settings) {\r\n    this.set(opts.settings);\r\n  }\r\n\r\n  this._opts._objects = opts._objects;\r\n  this._resetObjects();\r\n\r\n  if (opts.load) {\r\n    this.load(opts.load, { fileType: opts.type });\r\n  }\r\n\r\n  if (opts.preset) {\r\n    settings.now.preset = opts.preset;\r\n  }\r\n\r\n  if (opts.reps) {\r\n    this.resetReps(opts.preset);\r\n  }\r\n\r\n  if (this._opts.view) {\r\n    this.view(this._opts.view);\r\n    delete this._opts.view;\r\n  }\r\n\r\n  const visual = this._getComplexVisual();\r\n  if (visual) {\r\n    visual.getComplex().resetCurrentUnit();\r\n    if (_.isNumber(opts.unit)) {\r\n      visual.getComplex().setCurrentUnit(opts.unit);\r\n    }\r\n    this.resetView();\r\n    this.rebuildAll();\r\n  }\r\n};\r\n\r\nMiew.prototype.info = function (name) {\r\n  const visual = this._getComplexVisual(name);\r\n  if (!visual) {\r\n    return {};\r\n  }\r\n  const complex = visual.getComplex();\r\n  const { metadata } = complex;\r\n  return {\r\n    id: metadata.id || complex.name || 'UNKNOWN',\r\n    title: (metadata.title && metadata.title.join(' ')) || 'UNKNOWN DATA',\r\n    atoms: complex.getAtomCount(),\r\n    bonds: complex.getBondCount(),\r\n    residues: complex.getResidueCount(),\r\n    chains: complex.getChainCount(),\r\n  };\r\n};\r\n\r\n/*\r\n   * OBJECTS SEGMENT\r\n   */\r\n\r\nMiew.prototype.addObject = function (objData, bThrow) {\r\n  let Ctor = null;\r\n\r\n  if (objData.type === LinesObject.prototype.type) {\r\n    Ctor = LinesObject;\r\n  }\r\n\r\n  if (Ctor === null) {\r\n    throw new Error(`Unknown scene object type - ${objData.type}`);\r\n  }\r\n\r\n  try {\r\n    const newObj = new Ctor(objData.params, objData.opts);\r\n    this._addSceneObject(newObj);\r\n  } catch (error) {\r\n    if (!bThrow) {\r\n      this.logger.debug(`Error during scene object creation: ${error.message}`);\r\n    } else {\r\n      throw error;\r\n    }\r\n  }\r\n  this._needRender = true;\r\n};\r\n\r\nMiew.prototype._addSceneObject = function (sceneObject) {\r\n  const visual = this._getComplexVisual();\r\n  if (sceneObject.build && visual) {\r\n    sceneObject.build(visual.getComplex());\r\n    this._gfx.pivot.add(sceneObject.getGeometry());\r\n  }\r\n  const objects = this._objects;\r\n  objects[objects.length] = sceneObject;\r\n};\r\n\r\nMiew.prototype._updateObjsToFrame = function (frameData) {\r\n  const objs = this._objects;\r\n  for (let i = 0, n = objs.length; i < n; ++i) {\r\n    if (objs[i].updateToFrame) {\r\n      objs[i].updateToFrame(frameData);\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._resetObjects = function () {\r\n  const objs = this._opts._objects;\r\n\r\n  this._objects = [];\r\n  if (objs) {\r\n    for (let i = 0, n = objs.length; i < n; ++i) {\r\n      this.addObject(objs[i], false);\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype.removeObject = function (index) {\r\n  const obj = this._objects[index];\r\n  if (!obj) {\r\n    throw new Error(`Scene object with index ${index} does not exist`);\r\n  }\r\n  obj.destroy();\r\n  this._objects.splice(index, 1);\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Get a string with a URL to reproduce the current scene.\r\n *\r\n * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n * preset information regardless of the differences with settings\r\n * @param {boolean} [opts.settings=false] - when this flag is true, changes in settings are included\r\n * @param {boolean} [opts.view=false] - when this flag is true, a view information is included\r\n * @returns {string} URL\r\n */\r\nMiew.prototype.getURL = function (opts) {\r\n  return options.toURL(this.getState(_.defaults(opts, {\r\n    compact: true,\r\n    settings: false,\r\n    view: false,\r\n  })));\r\n};\r\n\r\n/**\r\n * Get a string with a script to reproduce the current scene.\r\n *\r\n * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n * preset information regardless of the differences with settings\r\n * @param {boolean} [opts.settings=true] - when this flag is true, changes in settings are included\r\n * @param {boolean} [opts.view=true] - when this flag is true, a view information is included\r\n * @returns {string} script\r\n */\r\nMiew.prototype.getScript = function (opts) {\r\n  return options.toScript(this.getState(_.defaults(opts, {\r\n    compact: true,\r\n    settings: true,\r\n    view: true,\r\n  })));\r\n};\r\n\r\n/*\r\n   * Generates object that represents the current state of representations list\r\n   * @param {boolean} compareWithDefaults - when this flag is true, reps list is compared (if possible)\r\n   * to preset's defaults and only diffs are generated\r\n   */\r\nMiew.prototype._compareReps = function (complexVisual, compareWithDefaults) {\r\n  const ans = {};\r\n  let repCount = 0;\r\n\r\n  if (complexVisual) {\r\n    repCount = complexVisual.repCount();\r\n  }\r\n\r\n  const currPreset = settings.defaults.presets[settings.now.preset];\r\n  let compare = compareWithDefaults;\r\n  if (currPreset === undefined || currPreset.length > repCount) {\r\n    compare = false;\r\n    ans.preset = 'empty';\r\n  } else if (settings.now.preset !== settings.defaults.preset) {\r\n    ans.preset = settings.now.preset;\r\n  }\r\n\r\n  const repsDiff = [];\r\n  let emptyReps = true;\r\n  for (let i = 0, n = repCount; i < n; ++i) {\r\n    repsDiff[i] = complexVisual.repGet(i).compare(compare ? currPreset[i] : null);\r\n    if (!_.isEmpty(repsDiff[i])) {\r\n      emptyReps = false;\r\n    }\r\n  }\r\n  if (!emptyReps) {\r\n    ans.reps = repsDiff;\r\n  }\r\n  return ans;\r\n};\r\n\r\n/*\r\n   * Obtain object that represents current state of miew (might be used as options in constructor).\r\n   * @param {boolean} [opts.compact=true] - set this flag to false if you want to include full\r\n   * preset information regardless of the differences with settings\r\n   * @param {boolean} [opts.settings=false] - when this flag is true, changes in settings are included\r\n   * @param {boolean} [opts.view=false] - when this flag is true, a view information is included\r\n   * @returns {Object} State object.\r\n   */\r\nMiew.prototype.getState = function (opts) {\r\n  const state = {};\r\n\r\n  opts = _.defaults(opts, {\r\n    compact: true,\r\n    settings: false,\r\n    view: false,\r\n  });\r\n\r\n  // load\r\n  const visual = this._getComplexVisual();\r\n  if (visual !== null) {\r\n    const complex = visual.getComplex();\r\n    const { metadata } = complex;\r\n    if (metadata.id) {\r\n      const format = metadata.format ? `${metadata.format}:` : '';\r\n      state.load = format + metadata.id;\r\n    }\r\n    const unit = complex.getCurrentUnit();\r\n    if (unit !== 1) {\r\n      state.unit = unit;\r\n    }\r\n  }\r\n\r\n  // representations\r\n  const repsInfo = this._compareReps(visual, opts.compact);\r\n  if (repsInfo.preset) {\r\n    state.preset = repsInfo.preset;\r\n  }\r\n\r\n  if (repsInfo.reps) {\r\n    state.reps = repsInfo.reps;\r\n  }\r\n\r\n  // objects\r\n  const objects = this._objects;\r\n  const objectsState = [];\r\n  for (let i = 0, n = objects.length; i < n; ++i) {\r\n    objectsState[i] = objects[i].identify();\r\n  }\r\n  if (objects.length > 0) {\r\n    state._objects = objectsState;\r\n  }\r\n\r\n  // view\r\n  if (opts.view) {\r\n    state.view = this.view();\r\n  }\r\n\r\n  // settings\r\n  if (opts.settings) {\r\n    const diff = this.settings.getDiffs(false);\r\n    if (!_.isEmpty(diff)) {\r\n      state.settings = diff;\r\n    }\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\n/**\r\n * Get parameter value.\r\n * @param {string} param - Parameter name or path (e.g. 'modes.BS.atom').\r\n * @param {*=} value - Default value.\r\n * @returns {*} Parameter value.\r\n */\r\nMiew.prototype.get = function (param, value) {\r\n  return settings.get(param, value);\r\n};\r\n\r\nMiew.prototype._clipPlaneUpdateValue = function (radius) {\r\n  const clipPlaneValue = Math.max(\r\n    this._gfx.camera.position.z - radius * settings.now.draft.clipPlaneFactor,\r\n    settings.now.camNear,\r\n  );\r\n\r\n  const opts = { clipPlaneValue };\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setUberOptions(opts);\r\n  });\r\n  for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n    const obj = this._objects[i];\r\n    if (obj._line) {\r\n      obj._line.material.setUberOptions(opts);\r\n    }\r\n  }\r\n  if (this._picker !== null) {\r\n    this._picker.clipPlaneValue = clipPlaneValue;\r\n  }\r\n};\r\n\r\nMiew.prototype._fogFarUpdateValue = function () {\r\n  if (this._picker !== null) {\r\n    if (this._gfx.scene.fog) {\r\n      this._picker.fogFarValue = this._gfx.scene.fog.far;\r\n    } else {\r\n      this._picker.fogFarValue = undefined;\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._updateShadowmapMeshes = function (process) {\r\n  this._forEachComplexVisual((visual) => {\r\n    const reprList = visual._reprList;\r\n    for (let i = 0, n = reprList.length; i < n; ++i) {\r\n      const repr = reprList[i];\r\n      process(repr.geo, repr.material);\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype._updateMaterials = function (values, needTraverse = false, process = undefined) {\r\n  this._forEachComplexVisual((visual) => visual.setMaterialValues(values, needTraverse, process));\r\n  for (let i = 0, n = this._objects.length; i < n; ++i) {\r\n    const obj = this._objects[i];\r\n    if (obj._line) {\r\n      obj._line.material.setValues(values);\r\n      obj._line.material.needsUpdate = true;\r\n    }\r\n  }\r\n};\r\n\r\nMiew.prototype._fogAlphaChanged = function () {\r\n  this._forEachComplexVisual((visual) => {\r\n    visual.setUberOptions({\r\n      fogAlpha: settings.now.fogAlpha,\r\n    });\r\n  });\r\n};\r\n\r\nMiew.prototype._embedWebXR = function () {\r\n  // switch off\r\n  if (settings.now.stereo !== 'WEBVR') {\r\n    if (this.webVR) {\r\n      this.webVR.disable();\r\n    }\r\n    this.webVR = null;\r\n    return;\r\n  }\r\n  // switch on\r\n  if (!this.webVR) {\r\n    this.webVR = new WebVRPoC(() => {\r\n      this._requestAnimationFrame(() => this._onTick());\r\n      this._needRender = true;\r\n      this._onResize();\r\n    });\r\n  }\r\n  this.webVR.enable(this._gfx);\r\n};\r\n\r\nMiew.prototype._initOnSettingsChanged = function () {\r\n  const on = (props, func) => {\r\n    props = _.isArray(props) ? props : [props];\r\n    props.forEach((prop) => {\r\n      this.settings.addEventListener(`change:${prop}`, func);\r\n    });\r\n  };\r\n\r\n  on('modes.VD.frame', () => {\r\n    const volume = this._getVolumeVisual();\r\n    if (volume === null) return;\r\n\r\n    volume.showFrame(settings.now.modes.VD.frame);\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('modes.VD.isoMode', () => {\r\n    const volume = this._getVolumeVisual();\r\n    if (volume === null) return;\r\n\r\n    volume.getMesh().material.updateDefines();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('bg.color', () => {\r\n    this._onBgColorChanged();\r\n  });\r\n\r\n  on('ao', () => {\r\n    if (settings.now.ao && !isAOSupported(this._gfx.renderer.getContext())) {\r\n      this.logger.warn('Your device or browser does not support ao');\r\n      settings.set('ao', false);\r\n    } else {\r\n      const values = { normalsToGBuffer: settings.now.ao };\r\n      this._setUberMaterialValues(values);\r\n    }\r\n  });\r\n\r\n  on('zSprites', () => {\r\n    if (settings.now.zSprites && !arezSpritesSupported(this._gfx.renderer.getContext())) {\r\n      this.logger.warn('Your device or browser does not support zSprites');\r\n      settings.set('zSprites', false);\r\n    }\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('fogColor', () => {\r\n    this._onFogColorChanged();\r\n  });\r\n\r\n  on('fogColorEnable', () => {\r\n    this._onFogColorChanged();\r\n  });\r\n\r\n  on('bg.transparent', (evt) => {\r\n    const gfx = this._gfx;\r\n    if (gfx) {\r\n      gfx.renderer.setClearColor(settings.now.bg.color, Number(!settings.now.bg.transparent));\r\n    }\r\n    // update materials\r\n    this._updateMaterials({ fogTransparent: evt.value });\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('draft.clipPlane', (evt) => {\r\n    // update materials\r\n    this._updateMaterials({ clipPlane: evt.value });\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('shadow.on', (evt) => {\r\n    // update materials\r\n    const values = { shadowmap: evt.value, shadowmapType: settings.now.shadow.type };\r\n    const gfx = this._gfx;\r\n    if (gfx) {\r\n      gfx.renderer.shadowMap.enabled = Boolean(values.shadowmap);\r\n    }\r\n    this._updateMaterials(values, true);\r\n    if (values.shadowmap) {\r\n      this._updateShadowCamera();\r\n      this._updateShadowmapMeshes(meshutils.createShadowmapMaterial);\r\n    } else {\r\n      this._updateShadowmapMeshes(meshutils.removeShadowmapMaterial);\r\n    }\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('shadow.type', (evt) => {\r\n    // update materials if shadowmap is enable\r\n    if (settings.now.shadow.on) {\r\n      this._updateMaterials({ shadowmapType: evt.value }, true);\r\n      this._needRender = true;\r\n    }\r\n  });\r\n\r\n  on('shadow.radius', (evt) => {\r\n    for (let i = 0; i < this._gfx.scene.children.length; i++) {\r\n      if (this._gfx.scene.children[i].shadow !== undefined) {\r\n        const light = this._gfx.scene.children[i];\r\n        light.shadow.radius = evt.value;\r\n        this._needRender = true;\r\n      }\r\n    }\r\n  });\r\n\r\n  on('fps', () => {\r\n    this._fps.show(settings.now.fps);\r\n  });\r\n\r\n  on(['fog', 'fogNearFactor', 'fogFarFactor'], () => {\r\n    this._updateFog();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('fogAlpha', () => {\r\n    const { fogAlpha } = settings.now;\r\n    if (fogAlpha < 0 || fogAlpha > 1) {\r\n      this.logger.warn('fogAlpha must belong range [0,1]');\r\n    }\r\n    this._fogAlphaChanged();\r\n    this._needRender = true;\r\n  });\r\n\r\n  on('autoResolution', (evt) => {\r\n    if (evt.value && !this._gfxScore) {\r\n      this.logger.warn('Benchmarks are missed, autoresolution will not work! '\r\n        + 'Autoresolution should be set during miew startup.');\r\n    }\r\n  });\r\n\r\n  on('stereo', () => {\r\n    this._embedWebXR(settings.now.stereo === 'WEBVR');\r\n    this._needRender = true;\r\n  });\r\n\r\n  on(['transparency', 'palette'], () => {\r\n    this.rebuildAll();\r\n  });\r\n\r\n  on('resolution', () => {\r\n    // update complex visuals\r\n    this.rebuildAll();\r\n\r\n    // update volume visual\r\n    const volume = this._getVolumeVisual();\r\n    if (volume) {\r\n      volume.getMesh().material.updateDefines();\r\n      this._needRender = true;\r\n    }\r\n  });\r\n\r\n  on(['axes', 'fxaa', 'ao',\r\n    'outline.on', 'outline.color', 'outline.threshold', 'outline.thickness'], () => {\r\n    this._needRender = true;\r\n  });\r\n};\r\n\r\n/**\r\n * Set parameter value.\r\n * @param {string|object} params - Parameter name or path (e.g. 'modes.BS.atom') or even settings object.\r\n * @param {*=} value - Value.\r\n */\r\nMiew.prototype.set = function (params, value) {\r\n  settings.set(params, value);\r\n};\r\n\r\n/**\r\n * Select atoms with selection string.\r\n * @param {string} expression - string expression of selection\r\n * @param {boolean=} append - true to append selection atoms to current selection, false to rewrite selection\r\n */\r\nMiew.prototype.select = function (expression, append) {\r\n  const visual = this._getComplexVisual();\r\n  if (!visual) {\r\n    return;\r\n  }\r\n\r\n  let sel = expression;\r\n  if (_.isString(expression)) {\r\n    sel = selectors.parse(expression).selector;\r\n  }\r\n\r\n  visual.select(sel, append);\r\n  this._lastPick = null;\r\n\r\n  this._updateInfoPanel();\r\n  this._needRender = true;\r\n};\r\n\r\nconst VIEW_VERSION = '1';\r\n\r\n/**\r\n * Get or set view info packed into string.\r\n *\r\n * **Note:** view is stored for *left-handed* cs, euler angles are stored in radians and *ZXY-order*,\r\n *\r\n * @param {string=} expression - Optional string encoded the view\r\n */\r\nMiew.prototype.view = function (expression) {\r\n  const self = this;\r\n  const { pivot } = this._gfx;\r\n  let transform = [];\r\n  const eulerOrder = 'ZXY';\r\n\r\n  function encode() {\r\n    const pos = pivot.position;\r\n    const scale = self._objectControls.getScale() / settings.now.radiusToFit;\r\n    const euler = new THREE.Euler();\r\n    euler.setFromQuaternion(self._objectControls.getOrientation(), eulerOrder);\r\n    transform = [\r\n      pos.x, pos.y, pos.z,\r\n      scale,\r\n      euler.x, euler.y, euler.z,\r\n    ];\r\n    return VIEW_VERSION + utils.arrayToBase64(transform, Float32Array);\r\n  }\r\n\r\n  function decode() {\r\n    // backwards compatible: old non-versioned view is the 0th version\r\n    if (expression.length === 40) {\r\n      expression = `0${expression}`;\r\n    }\r\n\r\n    const version = expression[0];\r\n    transform = utils.arrayFromBase64(expression.substr(1), Float32Array);\r\n\r\n    // apply adapter for old versions\r\n    if (version !== VIEW_VERSION) {\r\n      if (version === '0') {\r\n        // cancel radiusToFit included in old views\r\n        transform[3] /= 8.0;\r\n      } else {\r\n        // do nothing\r\n        self.logger.warn(`Encoded view version mismatch, stored as ${version} vs ${VIEW_VERSION} expected`);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const interpolator = self._interpolator;\r\n    const srcView = interpolator.createView();\r\n    srcView.position.copy(pivot.position);\r\n    srcView.scale = self._objectControls.getScale();\r\n    srcView.orientation.copy(self._objectControls.getOrientation());\r\n\r\n    const dstView = interpolator.createView();\r\n    dstView.position.set(transform[0], transform[1], transform[2]);\r\n\r\n    // hack to make preset views work after we moved centering offset to visual nodes\r\n    // FIXME should only store main pivot offset in preset\r\n    if (self._getComplexVisual()) {\r\n      dstView.position.sub(self._getComplexVisual().position);\r\n    }\r\n\r\n    dstView.scale = transform[3]; // eslint-disable-line prefer-destructuring\r\n    dstView.orientation.setFromEuler(new THREE.Euler(transform[4], transform[5], transform[6], eulerOrder));\r\n\r\n    interpolator.setup(srcView, dstView);\r\n  }\r\n\r\n  if (typeof expression === 'undefined') {\r\n    return encode();\r\n  }\r\n  decode();\r\n\r\n  return expression;\r\n};\r\n\r\n/*\r\n   * Update current view due to viewinterpolator state\r\n   */\r\nMiew.prototype._updateView = function () {\r\n  const self = this;\r\n  const { pivot } = this._gfx;\r\n\r\n  const interpolator = this._interpolator;\r\n  if (!interpolator.wasStarted()) {\r\n    interpolator.start();\r\n  }\r\n\r\n  if (!interpolator.isMoving()) {\r\n    return;\r\n  }\r\n\r\n  const res = interpolator.getCurrentView();\r\n  if (res.success) {\r\n    const curr = res.view;\r\n    pivot.position.copy(curr.position);\r\n    self._objectControls.setScale(curr.scale * settings.now.radiusToFit);\r\n    self._objectControls.setOrientation(curr.orientation);\r\n    this.dispatchEvent({ type: 'transform' });\r\n    self._needRender = true;\r\n  }\r\n};\r\n\r\n/**\r\n * Translate object by vector\r\n * @param {number} x - translation value (Ang) along model's X axis\r\n * @param {number} y - translation value (Ang) along model's Y axis\r\n * @param {number} z - translation value (Ang) along model's Z axis\r\n */\r\nMiew.prototype.translate = function (x, y, z) {\r\n  this._objectControls.translatePivot(x, y, z);\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Rotate object by Euler angles\r\n * @param {number} x - rotation angle around X axis in radians\r\n * @param {number} y - rotation angle around Y axis in radians\r\n * @param {number} z - rotation angle around Z axis in radians\r\n */\r\nMiew.prototype.rotate = function (x, y, z) {\r\n  this._objectControls.rotate(new THREE.Quaternion().setFromEuler(new THREE.Euler(x, y, z, 'XYZ')));\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Scale object by factor\r\n * @param {number} factor - scale multiplier, should greater than zero\r\n */\r\nMiew.prototype.scale = function (factor) {\r\n  if (factor <= 0) {\r\n    throw new RangeError('Scale should be greater than zero');\r\n  }\r\n  this._objectControls.scale(factor);\r\n  this.dispatchEvent({ type: 'transform' });\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Center view on selection\r\n * @param {empty | subset | string} selector - defines part of molecule which must be centered (\r\n * empty - center on current selection;\r\n * subset - center on picked atom/residue/molecule;\r\n * string - center on atoms correspond to selection string)\r\n */\r\nMiew.prototype.center = function (selector) {\r\n  // no arguments - center on current selection;\r\n  if (selector === undefined) {\r\n    this.setPivotSubset();\r\n    this._needRender = true;\r\n    return;\r\n  }\r\n  // subset with atom or residue - center on picked atom/residue;\r\n  if (selector.obj !== undefined && ('atom' in selector.obj || 'residue' in selector.obj)) { // from event with selection\r\n    if ('atom' in selector.obj) {\r\n      this.setPivotAtom(selector.obj.atom);\r\n    } else {\r\n      this.setPivotResidue(selector.obj.residue);\r\n    }\r\n    this._needRender = true;\r\n    return;\r\n  }\r\n  // string - center on atoms correspond to selection string\r\n  if (selector.obj === undefined && selector !== '') {\r\n    const sel = selectors.parse(selector);\r\n    if (sel.error === undefined) {\r\n      this.setPivotSubset(sel);\r\n      this._needRender = true;\r\n      return;\r\n    }\r\n  }\r\n  // empty subset or incorrect/empty string - center on all molecule;\r\n  this.resetPivot();\r\n  this._needRender = true;\r\n};\r\n\r\n/**\r\n * Build selector that contains all atoms within given distance from group of atoms\r\n * @param {Selector} selector - selector describing source group of atoms\r\n * @param {number} radius - distance\r\n * @returns {Selector} selector describing result group of atoms\r\n */\r\nMiew.prototype.within = function (selector, radius) {\r\n  const visual = this._getComplexVisual();\r\n  if (!visual) {\r\n    return selectors.None();\r\n  }\r\n\r\n  if (selector instanceof String) {\r\n    selector = selectors.parse(selector);\r\n  }\r\n\r\n  const res = visual.within(selector, radius);\r\n  if (res) {\r\n    visual.rebuildSelectionGeometry();\r\n    this._needRender = true;\r\n  }\r\n  return res;\r\n};\r\n\r\n/**\r\n * Get atom position in 2D canvas coords\r\n * @param {string} fullAtomName - full atom name, like A.38.CG\r\n * @returns {Object} {x, y} or false if atom not found\r\n */\r\nMiew.prototype.projected = function (fullAtomName, complexName) {\r\n  const visual = this._getComplexVisual(complexName);\r\n  if (!visual) {\r\n    return false;\r\n  }\r\n\r\n  const atom = visual.getComplex().getAtomByFullname(fullAtomName);\r\n  if (atom === null) {\r\n    return false;\r\n  }\r\n\r\n  const pos = atom.position.clone();\r\n  // we consider atom position to be affected only by common complex transform\r\n  // ignoring any transformations that may add during editing\r\n  this._gfx.pivot.updateMatrixWorldRecursive();\r\n  this._gfx.camera.updateMatrixWorldRecursive();\r\n  this._gfx.pivot.localToWorld(pos);\r\n  pos.project(this._gfx.camera);\r\n\r\n  return {\r\n    x: (pos.x + 1.0) * 0.5 * this._gfx.width,\r\n    y: (1.0 - pos.y) * 0.5 * this._gfx.height,\r\n  };\r\n};\r\n\r\n/**\r\n * Replace secondary structure with calculated one.\r\n *\r\n * DSSP algorithm implementation is used.\r\n *\r\n * Kabsch W, Sander C. 1983. Dictionary of protein secondary structure: pattern recognition of hydrogen-bonded and\r\n * geometrical features. Biopolymers. 22(12):2577-2637. doi:10.1002/bip.360221211.\r\n *\r\n * @param {string=} complexName - complex name\r\n */\r\nMiew.prototype.dssp = function (complexName) {\r\n  const visual = this._getComplexVisual(complexName);\r\n  if (!visual) {\r\n    return;\r\n  }\r\n  visual.getComplex().dssp();\r\n\r\n  // rebuild dependent representations (cartoon or ss-colored)\r\n  visual._reprList.forEach((rep) => {\r\n    if (rep.mode.id === 'CA' || rep.colorer.id === 'SS') {\r\n      rep.needsRebuild = true;\r\n    }\r\n  });\r\n};\r\n\r\nMiew.prototype.exportCML = function () {\r\n  const self = this;\r\n\r\n  function extractRotation(m) {\r\n    const xAxis = new THREE.Vector3();\r\n    const yAxis = new THREE.Vector3();\r\n    const zAxis = new THREE.Vector3();\r\n    m.extractBasis(xAxis, yAxis, zAxis);\r\n    xAxis.normalize();\r\n    yAxis.normalize();\r\n    zAxis.normalize();\r\n    const retMat = new THREE.Matrix4();\r\n    retMat.identity();\r\n    retMat.makeBasis(xAxis, yAxis, zAxis);\r\n    return retMat;\r\n  }\r\n\r\n  function updateCMLData(complex) {\r\n    const { root } = self._gfx;\r\n    const mat = extractRotation(root.matrixWorld);\r\n    const v4 = new THREE.Vector4(0, 0, 0, 0);\r\n    const vCenter = new THREE.Vector4(0, 0, 0, 0);\r\n    let xml = null;\r\n    let ap = null;\r\n\r\n    // update atoms in cml\r\n    complex.forEachAtom((atom) => {\r\n      if (atom.xmlNodeRef && atom.xmlNodeRef.xmlNode) {\r\n        xml = atom.xmlNodeRef.xmlNode;\r\n        ap = atom.position;\r\n        v4.set(ap.x, ap.y, ap.z, 1.0);\r\n        v4.applyMatrix4(mat);\r\n        xml.setAttribute('x3', v4.x.toString());\r\n        xml.setAttribute('y3', v4.y.toString());\r\n        xml.setAttribute('z3', v4.z.toString());\r\n        xml.removeAttribute('x2');\r\n        xml.removeAttribute('y2');\r\n      }\r\n    });\r\n    // update stereo groups in cml\r\n    complex.forEachSGroup((sGroup) => {\r\n      if (sGroup.xmlNodeRef && sGroup.xmlNodeRef.xmlNode) {\r\n        xml = sGroup.xmlNodeRef.xmlNode;\r\n        ap = sGroup.getPosition();\r\n        v4.set(ap.x, ap.y, ap.z, 1.0);\r\n        const cp = sGroup.getCentralPoint();\r\n        if (cp === null) {\r\n          v4.applyMatrix4(mat);\r\n        } else {\r\n          vCenter.set(cp.x, cp.y, cp.z, 0.0);\r\n          v4.add(vCenter);\r\n          v4.applyMatrix4(mat); // pos in global space\r\n          vCenter.set(cp.x, cp.y, cp.z, 1.0);\r\n          vCenter.applyMatrix4(mat);\r\n          v4.sub(vCenter);\r\n        }\r\n        xml.setAttribute('x', v4.x.toString());\r\n        xml.setAttribute('y', v4.y.toString());\r\n        xml.setAttribute('z', v4.z.toString());\r\n      }\r\n    });\r\n  }\r\n\r\n  const visual = self._getComplexVisual();\r\n  const complex = visual ? visual.getComplex() : null;\r\n  if (complex && complex.originalCML) {\r\n    updateCMLData(complex);\r\n\r\n    // serialize xml structure to string\r\n    const oSerializer = new XMLSerializer();\r\n    return oSerializer.serializeToString(complex.originalCML);\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n/**\r\n * Reproduce the RCSB PDB Molecule of the Month style by David S. Goodsell\r\n *\r\n * @see http://pdb101.rcsb.org/motm/motm-about\r\n */\r\nMiew.prototype.motm = function () {\r\n  settings.set({\r\n    fogColorEnable: true,\r\n    fogColor: 0x000000,\r\n    outline: { on: true, threshold: 0.01 },\r\n    bg: { color: 0xffffff },\r\n  });\r\n\r\n  this._forEachComplexVisual((visual) => {\r\n    const rep = [];\r\n    const complex = visual.getComplex();\r\n    const palette = palettes.get(settings.now.palette);\r\n    for (let i = 0; i < complex.getChainCount(); i++) {\r\n      const curChainName = complex._chains[i]._name;\r\n      const curChainColor = palette.getChainColor(curChainName);\r\n      rep[i] = {\r\n        selector: `chain ${curChainName}`,\r\n        mode: 'VW',\r\n        colorer: ['CB', { color: curChainColor, factor: 0.9 }],\r\n        material: 'FL',\r\n      };\r\n    }\r\n    visual.resetReps(rep);\r\n  });\r\n};\r\n\r\nMiew.prototype.VERSION = (typeof PACKAGE_VERSION !== 'undefined' && PACKAGE_VERSION) || '0.0.0-dev';\r\n\r\n// Uncomment this to get debug trace:\r\n// Miew.prototype.debugTracer = new utils.DebugTracer(Miew.prototype);\r\n\r\n_.assign(Miew, /** @lends Miew */ {\r\n  VERSION: Miew.prototype.VERSION,\r\n\r\n  registeredPlugins: [],\r\n\r\n  // export namespaces // TODO: WIP: refactoring external interface\r\n  chem,\r\n  io,\r\n  modes,\r\n  colorers,\r\n  materials,\r\n  palettes,\r\n  options,\r\n  settings,\r\n  utils,\r\n  gfx: {\r\n    Representation,\r\n  },\r\n\r\n  /**\r\n   * Third-party libraries packaged together with Miew.\r\n   *\r\n   * @property {object} lodash - [Lodash](https://lodash.com/), a modern JavaScript utility library delivering\r\n   *   modularity, performance & extras.\r\n   * @property {object} three - [three.js](https://threejs.org/), JavaScript 3D library.\r\n   *\r\n   * @example\r\n   * var _ = Miew.thirdParty.lodash;\r\n   * var opts = _.merge({ ... }, Miew.options.fromURL(window.location.search));\r\n   * var miew = new Miew(opts);\r\n   */\r\n  thirdParty: {\r\n    lodash: _,\r\n    three: THREE,\r\n  },\r\n});\r\n\r\nexport default Miew;\r\n","import palettes from '../gfx/palettes';\r\nimport settings from '../settings';\r\n\r\nconst modeIdDesc = {\r\n  $help: [\r\n    'Rendering mode shortcut',\r\n    '    BS - balls and sticks mode',\r\n    '    LN - lines mode',\r\n    '    LC - licorice mode',\r\n    '    VW - van der waals mode',\r\n    '    TR - trace mode',\r\n    '    TU - tube mode',\r\n    '    CA - cartoon mode',\r\n    '    SA - isosurface mode',\r\n    '    QS - quick surface mode',\r\n    '    SE - solvent excluded mode',\r\n    '    TX - text mode',\r\n  ],\r\n  BS: {\r\n    $help: [\r\n      '   Balls and sticks',\r\n      '      aromrad = <number> #aromatic radius',\r\n      '      atom = <number>    #atom radius',\r\n      '      bond = <number>    #bond radius',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      space = <number>   #space value\\n',\r\n    ],\r\n  },\r\n  CA: {\r\n    $help: [\r\n      '   Cartoon',\r\n      '      arrow = <number>   #arrow size',\r\n      '      depth = <number>   #depth of surface',\r\n      '      heightSegmentsRatio = <number>',\r\n      '      radius = <number>  #tube radius',\r\n      '      tension = <number> #',\r\n      '      width = <number>  #secondary width\\n',\r\n    ],\r\n  },\r\n  LN: {\r\n    $help: [\r\n      '   Lines',\r\n      '      atom = <number>    #atom radius',\r\n      '      chunkarom = <number>',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      offsarom = <number>\\n',\r\n    ],\r\n  },\r\n  LC: {\r\n    $help: [\r\n      '   Licorice',\r\n      '      aromrad = <number> #aromatic radius',\r\n      '      bond = <number>    #bond radius',\r\n      '      multibond = <bool> #use multibond',\r\n      '      showarom = <bool>  #show aromatic',\r\n      '      space = <number>   #space value\\n',\r\n    ],\r\n  },\r\n  VW: {\r\n    $help: [\r\n      '   Van der Waals',\r\n      '      nothing\\n',\r\n    ],\r\n  },\r\n  TR: {\r\n    $help: [\r\n      '   Trace',\r\n      '      radius = <number>  #tube radius\\n',\r\n    ],\r\n  },\r\n  TU: {\r\n    $help: [\r\n      '   Tube',\r\n      '      heightSegmentsRatio = <number>',\r\n      '      radius = <number>  #tube radius',\r\n      '      tension = <number> \\n',\r\n    ],\r\n  },\r\n  SA: {\r\n    $help: [\r\n      '   Surface',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  QS: {\r\n    $help: [\r\n      '   Quick surface',\r\n      '      isoValue = <number>',\r\n      '      scale = <number>',\r\n      '      wireframe = <bool>',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  SE: {\r\n    $help: [\r\n      '   Solvent excluded surface',\r\n      '      zClip = <bool> #clip z plane\\n',\r\n    ],\r\n  },\r\n  TX: {\r\n    $help: [\r\n      '   Text mode',\r\n      '      template = <format string> string that can include \"{{ id }}\"',\r\n      '          it will be replaced by value, id can be one of next:',\r\n      '          serial, name, type, sequence, residue, chain, hetatm, water\\n',\r\n      '      horizontalAlign = <string> {\"left\", \"right\", \"center\"}',\r\n      '      verticalAlign = <string> {\"top\", \"bottom\", \"middle\"}',\r\n      '      dx = <number> #offset along x',\r\n      '      dy = <number> #offset along y',\r\n      '      dz = <number> #offset along z',\r\n      '      fg = <string> #text color modificator',\r\n      '           could be keyword, named color or hex',\r\n      '      fg = <string> #back color modificator',\r\n      '           could be keyword, named color or hex',\r\n      '      showBg = <bool> #if set show background',\r\n      '           plate under text',\r\n    ],\r\n  },\r\n};\r\n\r\nconst colorDesc = {\r\n  $help: [\r\n    'Coloring mode shortcut',\r\n    '    EL - color by element',\r\n    '    CH - color by chain',\r\n    '    SQ - color by sequence',\r\n    '    RT - color by residue type',\r\n    '    SS - color by secondary structure',\r\n    '    UN - uniform',\r\n  ],\r\n  UN: {\r\n    $help: [\r\n      'Parameters of coloring modes customization',\r\n      '   Uniform',\r\n      '      color = <number|color> #RGB->HEX->dec\\n',\r\n    ],\r\n    color: {\r\n      $help: Object.keys(palettes.get(settings.now.palette).namedColors).sort().join('\\n'),\r\n    },\r\n  },\r\n};\r\n\r\nconst materialDesc = {\r\n  $help: [\r\n    'Material shortcut',\r\n    '    DF - diffuse',\r\n    '    TR - transparent',\r\n    '    SF - soft plastic',\r\n    '    PL - glossy plastic',\r\n    '    ME - metal',\r\n    '    GL - glass',\r\n  ],\r\n};\r\n\r\nconst addRepDesc = {\r\n  $help: [\r\n    'Short (packed) representation description as a set of variables',\r\n    '    s=<EXPRESSION>',\r\n    '        selector property',\r\n    '    m=<MODE_ID>[!<PARAMETER>:<VALUE>[,...]]',\r\n    '        render mode property',\r\n    '    c=<COLORER_ID>[!<PARAMETER>:<VALUE>[,...]]',\r\n    '        color mode property',\r\n    '    mt=<MATERIAL_ID>',\r\n    '        material property',\r\n  ],\r\n  s: {\r\n    $help: 'Selection expression string as it is in menu->representations->selection',\r\n  },\r\n  m: modeIdDesc,\r\n  c: colorDesc,\r\n  mt: materialDesc,\r\n};\r\n\r\nconst setGetParameterDesc = {\r\n  $help: [\r\n    'Parameters of rendering modes customization: modes',\r\n    'Parameters of colorer customization: colorers',\r\n    'Autobuild: autobuild = (<number>|<bool>)',\r\n  ],\r\n  modes: modeIdDesc,\r\n  colorers: colorDesc,\r\n};\r\n\r\nconst help = {\r\n  $help: [\r\n    'help (<cmd name>| <path to property>)',\r\n    'You can get detailed information about command options',\r\n    '   using \"help cmd.opt.opt.[...]\"\\n',\r\n    '   you can use one line comments',\r\n    '   everything started from (#|//) will be skipped',\r\n    '   Example: >build //some comment\\n',\r\n    'List of available commands:',\r\n  ],\r\n  reset: {\r\n    $help: [\r\n      'Reload current object, delete all representations',\r\n      '    Nothing will work until load new object',\r\n    ],\r\n  },\r\n  load: {\r\n    $help: [\r\n      'load (<PDBID>|<URL>|-f [<*.NC FILE URL STRING>])',\r\n      '    Load new pdb object from selected source',\r\n    ],\r\n    PDBID: {\r\n      $help: 'pdb id in remote molecule database',\r\n    },\r\n    URL: {\r\n      $help: 'url to source file',\r\n    },\r\n    f: {\r\n      $help: [\r\n        'open file system dialog to fetch local file',\r\n        'optionally you can determine trajectory file',\r\n        'via URL for *.top model',\r\n      ],\r\n    },\r\n  },\r\n  clear: {\r\n    $help: 'No args. Clear terminal',\r\n  },\r\n  add: {\r\n    $help: [\r\n      'add [<REP_NAME>] [<DESCRIPTION>]',\r\n      '    Add new item to representation set with',\r\n      '    default or <DESCRIPTION> params',\r\n    ],\r\n    REP_NAME: {\r\n      $help: 'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n    },\r\n    DESCRIPTION: addRepDesc,\r\n  },\r\n  rep: {\r\n    $help: [\r\n      'rep [<REP_NAME>|<REP_INDEX>] [<DESCRIPTION>]',\r\n      '    set current representation by name or index',\r\n      '    edit current representation by <DESCRIPTION>',\r\n    ],\r\n    REP_NAME: {\r\n      $help: [\r\n        'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n        'Must be declared before',\r\n      ],\r\n    },\r\n    REP_INDEX: {\r\n      $help: 'Index of available representation',\r\n    },\r\n    DESCRIPTION: addRepDesc,\r\n  },\r\n  remove: {\r\n    $help: [\r\n      'remove (<REP_NAME>|<REP_INDEX>)',\r\n      'Remove representation by name or index',\r\n    ],\r\n    REP_NAME: {\r\n      $help: [\r\n        'Identifier string [_,a-z,A-Z,0-9] can not start from digit',\r\n        'Must be declared before',\r\n      ],\r\n    },\r\n    REP_INDEX: {\r\n      $help: 'Index of available representation',\r\n    },\r\n  },\r\n  selector: {\r\n    $help: [\r\n      'selector <EXPRESSION>',\r\n      '   set selector from EXPRESSION to current representation',\r\n    ],\r\n    EXPRESSION: {\r\n      $help: 'Selection expression string as it is in menu->representations->selection',\r\n    },\r\n  },\r\n  mode: {\r\n    $help: [\r\n      'mode <MODE_ID> [<PARAMETER>=<VALUE>...]',\r\n      '   set rendering mode and apply parameters to current representation',\r\n    ],\r\n    MODE_ID: modeIdDesc,\r\n  },\r\n  color: {\r\n    $help: [\r\n      'color <COLORER_ID> [<PARAMETER>=<VALUE>...]',\r\n      '   set colorer and apply parameters to current representation',\r\n    ],\r\n    COLORER_ID: colorDesc,\r\n  },\r\n  material: {\r\n    $help: [\r\n      'material <MATERIAL_ID>',\r\n      '   set material to current representation',\r\n    ],\r\n    MATERIAL_ID: materialDesc,\r\n  },\r\n  build: {\r\n    $help: 'build help str',\r\n    add: {\r\n      $help: 'build.add',\r\n      new: {\r\n        $help: [\r\n          'add.new',\r\n          'add.new new line 1',\r\n          'add.new new line 2',\r\n          'add.new new line 3',\r\n        ],\r\n      },\r\n    },\r\n    del: {\r\n      $help: 'build.del',\r\n    },\r\n  },\r\n  list: {\r\n    $help: [\r\n      'list [-e|-s|<REP_NAME>|<REP_INDEX>]',\r\n      'Print representations if no args print list of representations',\r\n      '    -e expand list and show all representations',\r\n      '    -s show all user-registered selectors',\r\n      '    <REP_NAME>|<REP_INDEX> show only current representation',\r\n    ],\r\n  },\r\n  hide: {\r\n    $help: [\r\n      'hide (<REP_NAME>|<REP_INDEX>)',\r\n      'Hide representation referenced in args',\r\n    ],\r\n  },\r\n  show: {\r\n    $help: [\r\n      'show (<REP_NAME>|<REP_INDEX>)',\r\n      'Show representation referenced in args',\r\n    ],\r\n  },\r\n  get: {\r\n    $help: [\r\n      'get <PARAMETER>',\r\n      'Print <PARAMETER> value',\r\n      '    <PARAMETER> - path to option use get.PARAMETER to get more info',\r\n    ],\r\n    PARAMETER: setGetParameterDesc,\r\n  },\r\n  set: {\r\n    $help: [\r\n      'set <PARAMETER> <VALUE>',\r\n      'Set <PARAMETER> with <VALUE>',\r\n      '    <PARAMETER> - path to option use set.PARAMETER to get more info',\r\n    ],\r\n    PARAMETER: setGetParameterDesc,\r\n  },\r\n  set_save: {\r\n    $help: [\r\n      'set_save',\r\n      'Save current settings to cookie',\r\n    ],\r\n  },\r\n  set_restore: {\r\n    $help: [\r\n      'set_restore',\r\n      'Load and apply settings from cookie',\r\n    ],\r\n  },\r\n  set_reset: {\r\n    $help: [\r\n      'set_reset',\r\n      'Reset current settings to the defaults',\r\n    ],\r\n  },\r\n  preset: {\r\n    $help: [\r\n      'preset [<PRESET>]',\r\n      'Reset current representation or set preset to <PRESET>',\r\n    ],\r\n    PRESET: {\r\n      $help: [\r\n        'default',\r\n        'wire',\r\n        'small',\r\n        'macro',\r\n      ],\r\n    },\r\n  },\r\n  unit: {\r\n    $help: [\r\n      'unit [<unit_id>]',\r\n      'Change current biological structure view. Zero <unit_id> value means asymmetric unit,',\r\n      'positive values set an assembly with corresponding number.',\r\n      'Being called with no parameters command prints current unit information.',\r\n    ],\r\n  },\r\n  view: {\r\n    $help: [\r\n      'view [<ENCODED_VIEW>]',\r\n      'Get current encoded view or set if ENCODED_VIEW placed as argument',\r\n    ],\r\n    ENCODED_VIEW: {\r\n      $help: [\r\n        'encoded view matrix string (binary code)',\r\n      ],\r\n    },\r\n  },\r\n  rotate: {\r\n    $help: [\r\n      'rotate (x|y|z) [<DEGREES>] [(x|y|z) [<DEGREES>]]...',\r\n      'Rotate scene',\r\n    ],\r\n  },\r\n  scale: {\r\n    $help: [\r\n      'scale <SCALE>',\r\n      'Scale scene',\r\n    ],\r\n  },\r\n  select: {\r\n    $help: [\r\n      'select <SELECTOR_STRING> [as <SELECTOR_NAME>]',\r\n      'Select atoms using selector defined in SELECTOR_STRING',\r\n      '    and if SELECTOR_NAME is defined register it in viewer',\r\n      '    you can use it later as a complex selector',\r\n    ],\r\n  },\r\n  within: {\r\n    $help: [\r\n      'within <DISTANCE> of <SELECTOR_STRING> as <SELECTOR_NAME>',\r\n      'Build within named selector',\r\n      '    DISTANCE        <number>',\r\n      '    SELECTOR_STRING <string(selection language)>',\r\n      '    SELECTOR_NAME   <identifier>',\r\n    ],\r\n  },\r\n  url: {\r\n    $help: [\r\n      'url [-s] [-v]',\r\n      'Report URL encoded scene',\r\n      '    if -s set that include settings in the URL',\r\n      '    if -v set that include view in the URL',\r\n    ],\r\n  },\r\n  screenshot: {\r\n    $help: [\r\n      'screenshot [<WIDTH> [<HEIGHT>]]',\r\n      'Make a screenshot of the scene',\r\n      '    WIDTH  <number> in pixels',\r\n      '    HEIGHT <number> in pixels, equal to WIDTH by default',\r\n    ],\r\n  },\r\n  line: {\r\n    $help: [\r\n      'line <first_atom_path> <second_atom_path> [<PARAMETER>=<VALUE>]',\r\n      'Draw dashed line between two specified atoms',\r\n    ],\r\n  },\r\n  removeobj: {\r\n    $help: [\r\n      'removeobj <id>',\r\n      'Remove scene object by its index. Indices could be obtained by <listobj> command',\r\n    ],\r\n  },\r\n  listobj: {\r\n    $help: [\r\n      'listobj',\r\n      'Display the list of all existing scene objects',\r\n    ],\r\n  },\r\n};\r\n\r\nexport default help;\r\n","import _ from 'lodash';\r\nimport Miew from './Miew';\r\nimport { parser as parsercli } from './utils/MiewCLIParser';\r\nimport clihelp from './utils/MiewCLIHelp';\r\nimport logger from './utils/logger';\r\nimport utils from './utils';\r\n\r\nconst {\r\n  chem: { selectors },\r\n  modes,\r\n  colorers,\r\n  materials,\r\n  palettes,\r\n  options,\r\n  settings,\r\n} = Miew;\r\n\r\nfunction None() {\r\n}\r\n\r\nconst NULL = (function () {\r\n  const obj = new None();\r\n  return function () {\r\n    return obj;\r\n  };\r\n}());\r\n\r\nclass RepresentationMap {\r\n  constructor() {\r\n    this.representationMap = {};\r\n    this.representationID = {};\r\n  }\r\n\r\n  get(strId) {\r\n    return this.representationMap[strId] || this.representationID[strId] || '<no name>';\r\n  }\r\n\r\n  add(strId, index) {\r\n    if (strId === -1) {\r\n      return 'Can not create representation: there is no data';\r\n    }\r\n\r\n    if (index !== undefined) {\r\n      if (!this.representationMap.hasOwnProperty(strId)) {\r\n        this.representationMap[strId.toString()] = index;\r\n        this.representationID[index] = strId.toString();\r\n      } else {\r\n        return 'This name has already existed, registered without name';\r\n      }\r\n    }\r\n    return `Representation ${strId} successfully added`;\r\n  }\r\n\r\n  remove(index) {\r\n    if (index && this.representationID.hasOwnProperty(index)) {\r\n      delete this.representationMap[this.representationID[index]];\r\n      delete this.representationID[index];\r\n    }\r\n\r\n    const sortedKeys = Object.keys(this.representationID).sort();\r\n    for (const i in sortedKeys) {\r\n      if (sortedKeys.hasOwnProperty(i)) {\r\n        const id = sortedKeys[i];\r\n        if (id > index) {\r\n          this.representationID[id - 1] = this.representationID[id];\r\n          this.representationMap[this.representationID[id]] -= 1;\r\n          delete this.representationID[id];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.representationMap = {};\r\n    this.representationID = {};\r\n  }\r\n}\r\n\r\nconst representationsStorage = new RepresentationMap();\r\n\r\nfunction keyRemap(key) {\r\n  const keys = {\r\n    s: 'selector',\r\n    m: 'mode',\r\n    c: 'colorer',\r\n    mt: 'material',\r\n    mode: 'modes',\r\n    color: 'colorers',\r\n    colorer: 'colorers',\r\n    select: 'selector',\r\n    material: 'materials',\r\n    selector: 'selector',\r\n  };\r\n  const ans = keys[key];\r\n  return ans === undefined ? key : ans;\r\n}\r\n\r\nclass CLIUtils {\r\n  list(miew, repMap, key) {\r\n    let ret = '';\r\n    if (miew && repMap !== undefined) {\r\n      if (key === undefined || key === '-e') {\r\n        const count = miew.repCount();\r\n\r\n        for (let i = 0; i < count; i++) {\r\n          ret += this.listRep(miew, repMap, i, key);\r\n        }\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  listRep(miew, repMap, repIndex, key) {\r\n    let ret = '';\r\n    const rep = miew.repGet(repIndex);\r\n    if (!rep) {\r\n      logger.warn(`Rep ${repIndex} does not exist!`);\r\n      return ret;\r\n    }\r\n    const index = repIndex;\r\n    const repName = repMap.get(index);\r\n\r\n    const { mode, colorer } = rep;\r\n    const selectionStr = rep.selectorString;\r\n    const material = rep.materialPreset;\r\n\r\n    ret += `#${index} : ${mode.name}${repName === '<no name>' ? '' : `, ${repName}`}\\n`;\r\n\r\n    if (key !== undefined) {\r\n      ret += `    selection : \"${selectionStr}\"\\n`;\r\n      ret += `    mode      : (${mode.id}), ${mode.name}\\n`;\r\n      ret += `    colorer   : (${colorer.id}), ${colorer.name}\\n`;\r\n      ret += `    material  : (${material.id}), ${material.name}\\n`;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  listSelector(miew, context) {\r\n    let ret = '';\r\n\r\n    for (const k in context) {\r\n      if (context.hasOwnProperty(k)) {\r\n        ret += `${k} : \"${context[k]}\"\\n`;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  listObjs(miew) {\r\n    const objs = miew._objects;\r\n\r\n    if (!objs || !Array.isArray(objs) || objs.length === 0) {\r\n      return 'There are no objects on the scene';\r\n    }\r\n\r\n    const strList = [];\r\n    for (let i = 0, n = objs.length; i < n; ++i) {\r\n      strList[i] = `${i}: ${objs[i].toString()}`;\r\n    }\r\n\r\n    return strList.join('\\n');\r\n  }\r\n\r\n  joinHelpStr(helpData) {\r\n    if (helpData instanceof Array) {\r\n      return helpData.join('\\n');\r\n    }\r\n    return helpData;\r\n  }\r\n\r\n  help(path) {\r\n    if (_.isUndefined(path)) {\r\n      return `${this.joinHelpStr(clihelp.$help)}\\n${_.slice(_.sortBy(_.keys(clihelp)), 1).join(', ')}\\n`;\r\n    }\r\n\r\n    const helpItem = _.get(clihelp, path);\r\n    return _.isUndefined(helpItem) ? this.help() : `${this.joinHelpStr(helpItem.$help)}\\n`;\r\n  }\r\n\r\n  load(miew, arg) {\r\n    if (miew === undefined || arg === undefined || arg === '-f') {\r\n      return;\r\n    }\r\n    miew.awaitWhileCMDisInProcess();\r\n    const finish = () => miew.finishAwaitingCMDInProcess();\r\n    miew.load(arg).then(finish, finish);\r\n  }\r\n\r\n  checkArg(key, arg, modificate) {\r\n    if (key !== undefined && arg !== undefined) {\r\n      if (keyRemap(key) === 'selector') {\r\n        const res = selectors.parse(arg);\r\n\r\n        if (res.error !== undefined) {\r\n          const selExc = { message: res.error };\r\n          throw selExc;\r\n        }\r\n\r\n        if (modificate !== undefined && modificate) {\r\n          return res.selector;\r\n        }\r\n        return arg;\r\n      }\r\n\r\n      const modificators = {\r\n        colorers,\r\n        modes,\r\n        materials,\r\n      };\r\n\r\n      let modificator = key;\r\n      let temp;\r\n      while (modificator !== temp) {\r\n        temp = modificator;\r\n        modificator = keyRemap(temp);\r\n      }\r\n\r\n      if (modificators[modificator].get(arg) === undefined) {\r\n        const exc = { message: `${arg} is not existed in ${modificator}` };\r\n        throw exc;\r\n      }\r\n      return arg;\r\n    }\r\n    return NULL;\r\n  }\r\n\r\n  propagateProp(path, arg) {\r\n    if (path !== undefined) {\r\n      let argExc = {};\r\n      const adapter = options.adapters[typeof _.get(settings.defaults, path)];\r\n      if (adapter === undefined) {\r\n        const pathExc = { message: `${path} is not existed` };\r\n        throw pathExc;\r\n      }\r\n\r\n      if ((path.endsWith('.color') || path.endsWith('.baseColor')\r\n        || path.endsWith('.EL.carbon')) && typeof arg !== 'number') {\r\n        arg = palettes.get(settings.now.palette).getNamedColor(arg);\r\n      }\r\n\r\n      if (path.endsWith('.fg') || path.endsWith('.bg')) {\r\n        if (typeof arg !== 'number') {\r\n          const val = palettes.get(settings.now.palette).getNamedColor(arg, true);\r\n          if (val !== undefined) {\r\n            arg = `0x${val.toString(16)}`;\r\n          }\r\n        } else {\r\n          arg = `0x${arg.toString(16)}`;\r\n        }\r\n      }\r\n\r\n      if (path.endsWith('.template')) {\r\n        arg = arg.replace(/\\\\n/g, '\\n');// NOSONAR\r\n      }\r\n\r\n      if (arg !== undefined && adapter(arg) !== arg && adapter(arg) !== (arg > 0)) {\r\n        argExc = { message: `${path} must be a \"${typeof _.get(settings.defaults, path)}\"` };\r\n        throw argExc;\r\n      }\r\n    }\r\n    return arg;\r\n  }\r\n\r\n  unquoteString(value) {\r\n    return utils.unquoteString(value);\r\n  }\r\n}\r\n// repIndexOrRepMap could be RepresentationMap or index\r\n\r\nconst utilFunctions = new CLIUtils();\r\n\r\nfunction CreateObjectPair(a, b) {\r\n  const obj = {};\r\n  obj[a] = b;\r\n  return obj;\r\n}\r\n\r\nfunction ArgList(arg) {\r\n  if (arg instanceof this.constructor) {\r\n    return arg;\r\n  }\r\n  if (arg instanceof Array) {\r\n    this._values = arg.slice(0);\r\n  } else if (arg) {\r\n    this._values = [arg];\r\n  } else {\r\n    this._values = [];\r\n  }\r\n}\r\n\r\nArgList.prototype.append = function (value) {\r\n  const values = this._values;\r\n  values[values.length] = value;\r\n  return this;\r\n};\r\n\r\nArgList.prototype.remove = function (value) {\r\n  const values = this._values;\r\n  const index = values.indexOf(value);\r\n  if (index >= 0) {\r\n    values.splice(index, 1);\r\n  }\r\n  return this;\r\n};\r\n\r\nArgList.prototype.toJSO = function (cliUtils, cmd, arg) {\r\n  const res = {};\r\n\r\n  const list = this._values;\r\n  for (let i = 0, n = list.length; i < n; ++i) {\r\n    _.set(res, list[i].id, cliUtils.propagateProp(`${keyRemap(cmd)}.${arg}.${list[i].id}`, list[i].val));\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nfunction Arg(_id, _val) {\r\n  this.id = _id;\r\n  this.val = _val;\r\n}\r\n\r\nconst cliutils = Object.create({});\r\n\r\ncliutils.Arg = Arg;\r\ncliutils.ArgList = ArgList;\r\n\r\ncliutils.miew = null;\r\ncliutils.echo = null;\r\ncliutils.representations = representationsStorage;\r\ncliutils.utils = utilFunctions;\r\n\r\ncliutils._ = _;\r\ncliutils.CreateObjectPair = CreateObjectPair;\r\ncliutils.keyRemap = keyRemap;\r\ncliutils.Context = selectors.Context;\r\ncliutils.ClearContext = selectors.ClearContext;\r\n\r\ncliutils.NULL = NULL;\r\n\r\ncliutils.notimplemented = function () {\r\n  return this.NULL;\r\n};\r\n\r\nMiew.prototype.script = function (script, _printCallback, _errorCallback) {\r\n  parsercli.yy.miew = this;\r\n  parsercli.yy.echo = _printCallback;\r\n  parsercli.yy.error = _errorCallback;\r\n  if (this.cmdQueue === undefined) {\r\n    this.cmdQueue = [];\r\n  }\r\n\r\n  if (this.commandInAction === undefined) {\r\n    this.commandInAction = false;\r\n  }\r\n\r\n  this.cmdQueue = this.cmdQueue.concat(script.split('\\n'));\r\n};\r\n\r\nMiew.prototype.awaitWhileCMDisInProcess = function () {\r\n  this.commandInAction = true;\r\n};\r\n\r\nMiew.prototype.finishAwaitingCMDInProcess = function () {\r\n  this.commandInAction = false;\r\n};\r\n\r\nMiew.prototype.isScriptingCommandAvailable = function () {\r\n  return this.commandInAction !== undefined\r\n         && !this.commandInAction\r\n         && this.cmdQueue !== undefined\r\n         && this.cmdQueue.length > 0;\r\n};\r\n\r\nMiew.prototype.callNextCmd = function () {\r\n  if (this.isScriptingCommandAvailable()) {\r\n    const cmd = this.cmdQueue.shift();\r\n\r\n    const res = {};\r\n    res.success = false;\r\n    try {\r\n      parsercli.parse(cmd);\r\n      res.success = true;\r\n    } catch (e) {\r\n      res.error = e.message;\r\n      parsercli.yy.error(res.error);\r\n      this.finishAwaitingCMDInProcess();\r\n    }\r\n    return res;\r\n  }\r\n  return '';\r\n};\r\n\r\nparsercli.yy = cliutils;\r\n// workaround for incorrect JISON parser generator for AMD module\r\nparsercli.yy.parseError = parsercli.parseError;\r\n","import Miew from './Miew';\r\nimport './Miew-cli';\r\n\r\nexport default Miew;\r\n"],"names":["parser","o","k","v","l","length","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","$Va","$Vb","$Vc","$Vd","$Ve","$Vf","$Vg","$Vh","$Vi","$Vj","$Vk","$Vl","$Vm","$Vn","$Vo","$Vp","$Vq","$Vr","$Vs","$Vt","$Vu","$Vv","$Vw","$Vx","$Vy","$Vz","$VA","$VB","$VC","$VD","$VE","$VF","$VG","$VH","$VI","$VJ","$VK","$VL","$VM","$VN","$VO","$VP","$VQ","$VR","$VS","$VT","$VU","$VV","$VW","$VX","$VY","$VZ","$V_","$V$","$V01","$V11","$V21","$V31","$V41","$V51","$V61","trace","yy","symbols_","terminals_","productions_","performAction","anonymous","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","miew","reset","ClearContext","resetReps","rebuild","rebuildAll","echo","utils","help","toString","motm","propagateProp","get","set","saveSettings","restoreSettings","resetSettings","applyPreset","repRemove","representations","remove","repHide","listRep","list","listSelector","Context","select","checkArg","toLowerCase","rep","repCurrent","selector","within","Number","material","toUpperCase","view","changeUnit","dssp","scale","i","n","rotate","Math","PI","translate","center","addObject","type","params","opts","toJSO","listObjs","removeObject","getURL","settings","screenshotSave","load","clear","add","repAdd","mode","Array","colorer","_","assign","CreateObjectPair","key","val","Object","create","keyRemap","concat","ArgList","append","Arg","parseInt","JSON","parse","String","table","defaultActions","parseError","str","hash","recoverable","error","Error","input","self","stack","tstack","vstack","lstack","recovering","TERROR","EOF","args","slice","call","arguments","lexer","sharedState","prototype","hasOwnProperty","setInput","yylloc","yyloc","push","ranges","options","getPrototypeOf","popStack","lex","token","pop","symbol","preErrorSymbol","state","action","a","r","yyval","p","len","newState","expected","errStr","showPosition","join","text","match","line","loc","first_line","last_line","first_column","last_column","range","apply","_input","_more","_backtrack","done","matched","conditionStack","offset","ch","lines","unput","split","substr","oldLines","more","reject","backtrack_lexer","less","pastInput","past","replace","upcomingInput","next","pre","c","test_match","indexed_rule","backup","matches","tempMatch","index","rules","_currentRules","flex","begin","condition","popState","conditions","topState","abs","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","YYSTATE","unquoteString","Parser","module","exports","keyword","GetSelector","RangeList","Range","ValueList","AbstractInterpolator","CubicInterpolator","Enum","LinearInterpolator","NearestInterpolator","SincFilterInterpolator","Smooth","clipClamp","clipMirror","clipPeriodic","defaultConfig","getColumn","getType","isValidNumber","makeLanczosWindow","makeScaledFunction","makeSincKernel","normalizeScaleTo","shallowCopy","sin","sinc","validateNumber","validateVector","__hasProp","__extends","child","parent","ctor","constructor","__super__","METHOD_NEAREST","METHOD_LINEAR","METHOD_CUBIC","METHOD_LANCZOS","METHOD_SINC","CLIP_CLAMP","CLIP_ZERO","CLIP_PERIODIC","CLIP_MIRROR","CUBIC_TENSION_DEFAULT","CUBIC_TENSION_CATMULL_ROM","method","cubicTension","clip","scaleTo","sincFilterSize","sincWindow","max","min","period","array","config","clipHelper","clamp","clipHelperClamp","zero","clipHelperZero","periodic","clipHelperPeriodic","mirror","clipHelperMirror","getClippedInput","interpolate","t","_super","round","floor","tangentFactor","getTangent","m","t2","t3","x","window","kernel","sum","_ref","_ref2","arr","row","_i","_len","_results","f","baseScale","scaleRange","scaleFactor","translation","isNaN","isFinite","dimension","s","invalidErr","obj","copy","baseDomainEnd","interpolator","interpolatorClass","interpolators","properties","smoothFunc","lanczosFilterSize","nearest","linear","cubic","lanczos","count","_j","_len2","deepValidation","_k","_len3","domain","sort","define","amd","MMTF","e","byteLength","charCodeAt","setUint8","u","setUint16","setUint32","Uint8Array","buffer","setFloat64","setInt8","setInt16","setInt32","isArray","d","keys","ArrayBuffer","DataView","byteOffset","Int8Array","Int32Array","Float32Array","Int16Array","g","L","h","setFloat32","getFloat32","y","U","b","I","w","C","ceil","A","M","F","S","E","N","O","T","getInt32","subarray","j","q","D","P","z","B","V","G","R","rr","forEach","bondAtomList","bondOrderList","xCoordList","yCoordList","zCoordList","bFactorList","atomIdList","altLocList","occupancyList","groupIdList","groupTypeList","secStructList","insCodeList","sequenceIndexList","chainIdList","chainNameList","H","fromCharCode","getInt8","getUint8","getUint16","getUint32","getFloat64","getInt16","W","X","ignoreFields","nr","indexOf","J","K","firstModelOnly","onModel","onChain","onGroup","onAtom","onBond","chainsPerModel","chainCount","modelIndex","groupsPerChain","groupCount","chainIndex","chainId","chainName","groupList","atomNameList","atomCount","groupIndex","groupId","groupType","groupName","singleLetterCode","chemCompType","secStruct","insCode","sequenceIndex","atomIndex","atomId","element","elementList","atomName","formalCharge","formalChargeList","xCoord","yCoord","zCoord","bFactor","altLoc","occupancy","atomIndex1","atomIndex2","bondOrder","Q","Y","Z","response","XMLHttpRequest","addEventListener","responseType","open","send","or","ar","tr","er","ir","encode","decode","traverse","fetch","fetchReduced","version","fetchUrl","fetchReducedUrl","encodeMsgpack","encodeMmtf","decodeMsgpack","decodeMmtf","__assign","defaults","width","radius","corners","color","fadeColor","animation","direction","speed","zIndex","className","top","left","shadow","position","Spinner","spin","target","stop","el","document","createElement","setAttribute","style","transform","insertBefore","firstChild","drawLines","parentNode","removeChild","undefined","getColor","idx","borderRadius","shadows","parseBoxShadow","degrees","backgroundLine","height","background","transformOrigin","delay","boxShadow","normalizeShadow","appendChild","regex","_a","xUnits","yUnits","prefix","end","normalized","shadows_1","xy","convertOffset","radians","cos","Timer","startTime","oldTime","elapsedTime","running","start","now","getElapsedTime","update","delta","newTime","performance","bind","Date","tag","id","css","cssText","Stats","domElement","_text","_startTime","_prevTime","_deltas","_index","_total","_count","time","ms","fps","textContent","toPrecision","show","on","display","isUndefOrEqual","param","value","EventDispatcher","_handlers","callback","context","handlers","_checkPar","par","find","removeEventListener","handler","ev","values","omitBy","dispatchEvent","event","priorities","debug","info","report","warn","Logger","console","_priority","instantiate","verify","number","isNumber","defineProperty","findKey","level","levels","message","priority","_message","output","log","logger","browserType","DEFAULT","SAFARI","encodeQueryComponent","excludeExp","code","encodeURIComponent","decodeQueryComponent","decodeURIComponent","getUrlParameters","url","location","search","query","substring","result","exec","getUrlParametersAsDict","resolveURL","URL","href","anchor","generateRegExp","symbolStr","symbolList","listStr","RegExp","attrs","content","createTextNode","HTMLElement","deriveClass","cls","base","members","statics","deriveDeep","needZeroOwnProperties","res","hexColor","hex","DebugTracer","namespace","enabled","enable","indent","methods","wrap","method_","name_","spaces","_key","name","Function","OutOfMemoryError","allocateTyped","TypedArrayName","size","RangeError","bytesToBase64","bytes","binary","btoa","bytesFromBase64","atob","arrayToBase64","TypedArrayClass","arrayFromBase64","compareOptionsWithDefaults","defOpts","optsStr","isAlmostPlainObject","isPlainObject","proto","objectsDiff","src","dst","diff","forIn","srcValue","dstValue","deepDiff","isEmpty","isEqual","forInRecursive","object","iterateThrough","newPref","enquoteString","isString","SyntaxError","getFileExtension","fileName","lastIndexOf","Infinity","splitFileName","ext","dataUrlToBlob","parts","partsCount","Blob","getBrowser","navigator","vendor","userAgent","shotOpen","write","shotDownload","dataUrl","filename","msSaveBlob","link","download","innerHTML","createObjectURL","body","click","data","blobData","copySubArrays","indices","itemSize","shallowCloneNode","node","newNode","cloneNode","worldPos","unquotedStringRE","enquoteHelper","correctSelectorIdentifier","test","concatTypedArraysUnsafe","first","second","mergeTypedArraysUnsafe","reduce","acc","cur","JobHandle","_shouldCancel","cancel","shouldCancel","notify","slaveEvent","VERSION","modes","BS","atom","bond","space","multibond","aromrad","showarom","polyComplexity","poor","low","medium","high","ultra","VW","LN","offsarom","chunkarom","lineWidth","LC","SA","zClip","probeRadius","subset","wireframe","SE","QS","isoValue","gaussLim","gridSpacing","CS","probePositions","TR","TU","heightSegmentsRatio","tension","CA","depth","ss","helix","arrow","strand","TX","template","horizontalAlign","verticalAlign","dx","dy","dz","fg","bg","showBg","VD","kSigma","kSigmaMed","kSigmaMax","frame","isoMode","colorers","EL","carbon","UN","CO","baseColor","CB","factor","SQ","gradient","TM","OC","HY","MO","antialias","camFov","camNear","camFar","camDistance","radiusToFit","fogNearFactor","fogFarFactor","fogAlpha","fogColor","fogColorEnable","palette","resolution","autoResolution","autoPreset","preset","presets","default","empty","wire","small","macro","objects","dashSize","gapSize","transparent","draft","clipPlane","clipPlaneFactor","clipPlaneSpeed","plugins","axes","fog","zSprites","isoSurfaceFakeOpacity","suspendRender","nowater","autobuild","fxaa","outline","threshold","thickness","ao","autoRotation","maxfps","fbxprec","autoRotationAxisFixed","zooming","picking","pick","editing","aromatic","singleUnit","stereo","interpolateViews","transparency","translationSpeed","example","good","ssaoKernelRadius","ssaoFactor","stereoBarrel","use","multiFile","Settings","old","_changed","path","oldValue","_notifyChange","merge","_notifyChanges","defaultValue","cloneDeep","checkpoint","deepValue","deepPath","changed","filter","applyDiffs","diffs","getDiffs","versioned","setPluginOpts","plugin","repIndex","asBoolean","adapters","string","boolean","cL1Ass","cOptsSep","cL2Ass","cLSep","cCommonIgnoreSymbols","getLevel1ExcludedExpr","cLevel1Ignores","getLevel2ExcludedExpr","cLevel2Ignores","cL1ExclExpr","encodeQueryComponentL1","cL2ExclExpr","encodeQueryComponentL2","ensureRepList","reps","ensureRepAssign","prop","_objects","newOpts","newObj","parseParams","sep","extractArgs","defaultsDict","bang","inputVal","arg","pair","adapter","actions","unit","menu","mt","materials","dup","_fromArray","entries","entry","isFunction","fromAttr","attr","fromURL","_processOptsForURL","_processArgsForURL","_processObjForURL","objOpts","toURL","stringList","checkAndAdd","addReps","repList","addObjects","objList","protocol","host","pathname","_processOptsForScript","_processArgsForScript","_processObjForScript","map","_processRepsForScript","repString","strIdx","localAdd","toScript","commandsList","command","saveQuotes","quote","trim","Atom","residue","role","het","serial","temperature","charge","mask","hydrogenCount","radicalCount","valence","bonds","flags","Flags","HYDROGEN","CARBON","isHet","isHydrogen","getVisualName","forEachBond","process","getFullName","_chain","getName","_sequence","NONPOLARH","Element","fullName","weight","radiusBonding","hValency","hydrogenValency","Constants","U1","Lead","U2","Wing","U18","Role","SG","ByAtomicNumber","ByName","byAtomicNumber","byName","getByName","cBondTypes","UNKNOWN","COVALENT","AROMATIC","getAtomPos","Bond","right","order","fixed","_left","_right","_fixed","_order","_type","getLeft","getRight","getOrder","calcLength","distanceTo","_forEachNeighbour","currAtom","forEachLevelOne","forEachLevelTwo","l2Atom","_fixDir","refPoint","currDir","posGetter","rightCount","leftCount","tmpVec","clone","checkDir","sub","dotProd","dot","checkCarbon","stages","stageId","multiplyScalar","calcNormalDir","third","maxNeibs","another","secondPos","firstV","secondV","crossVectors","lengthSq","normalize","BondType","THREE","cNucleicControlNames","cNucleicWing1Names","cNucleicWing2Names","cCylinderSource","cCylinderTarget","types","atoms","Residue","chain","sequence","icode","_component","_icode","_mask","_atoms","_secondary","_firstAtom","_leadAtom","_wingAtom","_lastAtom","_controlPoint","_midPoint","_wingVector","_cylinders","_isValid","_het","_molecule","getChain","getMolecule","getSequence","getSecondary","getICode","addAtom","xyz","tempFactor","complex","getComplex","getAtomCount","forEachAtom","_findAtomByName","_findFirstAtomInList","names","collectMask","getCylinderTargetList","_name","_detectLeadWing","getAtomPosition","leadAtom","wingStart","wingEnd","cylSource","targetList","cylTarget","calcWing","prevLeadPos","currLeadPos","prevWingPos","prevWing","vectorA","vectorB","needToNegate","angleTo","negate","_innerFinalize","prevRes","prev","nextRes","chainAsNucleic","bFirstInChain","lp","Vector3","lerp","_finalize2","asNucleic","isConnected","anotherResidue","_finalize","tempCount","occupCount","ResidueType","letterCode","_fullName","StandardTypes","ALA","ARG","ASN","ASP","CYS","GLN","GLU","GLY","HIS","ILE","LEU","LYS","MET","PHE","PRO","PYL","SEC","SER","THR","TRP","TYR","VAL","DA","DC","DG","DI","DT","DU","WAT","H2O","HOH","DOD","UNK","UNL","PROTEIN","BASIC","ACIDIC","POLAR","NONPOLAR","NUCLEIC","PURINE","PYRIMIDINE","DNA","RNA","WATER","_addFlag","flag","hydro","_addParam","ChainType","Chain","_complex","_residues","minSequence","POSITIVE_INFINITY","maxSequence","NEGATIVE_INFINITY","getResidues","_determineType","residues","findResidue","seqNum","iCode","curr","updateToFrame","frameData","prevData","frameRes","currData","addResidue","getResidueType","addResidueType","getResidueCount","forEachResidue","StructuralElement","init","term","generic","genericByType","serialAtomMap","residueHash","splitUnifiedSerial","serialId","hashCode","getUnifiedSerial","Type","STRAND","BRIDGE","HELIX_310","HELIX_ALPHA","HELIX_PI","HELIX","TURN_310","TURN_ALPHA","TURN_PI","TURN","BEND","COIL","Generic","LOOP","StructuralElementType","StructuralElementGeneric","typeByPDBHelixClass","Helix","helixClass","comment","Strand","sheet","sense","atomCur","atomPrev","as","Sheet","_width","_strands","getWidth","addStrand","addEmptyStrand","SGroup","saveNode","_id","_position","_charge","_repeat","_center","xmlNodeRef","getPosition","getCentralPoint","_rebuildSGroupOnAtomChange","nLimon","bLow","bHight","aPos","addVectors","includes","toJSON","List","_values","splice","valuesArray","upperOnly","_validate","Selector","ListSelector","RangeListSelector","ValueListSelector","caseSensitive","NoneSelector","includesAtom","_atom","AllSelector","none","PrefixOperator","rhs","InfixOperator","lhs","keywords","defineSelector","SelectorClass","factory","SerialSelector","NameSelector","AltLocSelector","ElemSelector","ResidueSelector","SequenceSelector","ICodeSelector","ResIdxSelector","ChainSelector","HetatmSelector","PolarHSelector","NonPolarHSelector","NULL_SELECTOR","defineOperator","OperatorClass","NotOperator","AndOperator","OrOperator","byResidueTypeFlag","selectors","exc","BiologicalUnit","_selector","_boundaries","boundingBox","Box3","boundingSphere","Sphere","computeBoundaries","makeEmpty","expandByPoint","bbc","getCenter","setFromCenterAndSize","radiusSquared","pos","lengthSquared","distanceToSquared","sqrt","getTransforms","getSelector","getBoundaries","finalize","Assembly","chains","matrices","oldCenter","oldRad","applyMatrix4","newRad","addScalar","subScalar","addChain","addMatrix","matrix","Component","_residueIndices","_cycles","_subDivs","_residueCount","resIdc","idIdc","idCount","last","setSubDivs","subDivs","resCnt","_bonds","forEachCycle","cycle","addCycle","cycles","markResidues","_forEachSubChain","subs","currRes","endRes","getMaskedSequences","_subIdx","getMaskedSubdivSequences","currIdx","lastSubIdx","subIdx","boundaries","cMaxPairsForHashCode","cHashTableSize","cNumbersPerPair","cMaxNeighbours","cInvalidVal","cBigPrime","AtomPairs","maxPairsEstimate","numPairs","numMaxPairs","intBuffer","hashBuffer","destroy","addPair","indexA","indexB","ia","ib","codeToAdd","apI","cProfileBondBuilder","cEstBondsMultiplier","cSpaceCode","cBondTolerance","cVMDTolerance","cBondRadInJMOL","cEpsilon","_getBondingRadius","_isAtomEligible","AutoBond","_maxRad","bBox","getDefaultBoundaries","_vBoxMin","_vBoxMax","_pairCollection","_addExistingPairs","getAtoms","numAtoms","aInd","collection","numBondsForAtom","bInd","indTo","_findPairs","vw","getVoxelWorld","atomsNum","rA","isHydrogenA","posA","locationA","atomA","processAtom","atomB","locationB","dist2","rB","maxAcceptable","forEachAtomWithinRadius","_addPairs","iA","iB","_addPair","bondsA","numBonds","newBond","addBond","build","_buildInner","timeEnd","_calcBoundingBox","nAtoms","maxRad","cCrossThresh","cAromaticType","cAromaticAtoms","_coDirVectors","v1Tmp","v2Tmp","cp","v1","v2","_insertAscending","_anotherAtom","_cosBetween","theta","MathUtils","_markAromatic","Cycle","atomsList","nA","nextAtom","checkBond","_isAromatic","_isPossibleAromatic","rightIdx","leftIdx","_checkCycleSimple","_checkCycleComplex","assert","AromaticLoopsMarker","bondsData","bondMarks","_bondsData","_bondMarks","_resetCycles","_currIdx","_haveSameCycle","bond1","bond2","arr1","arr2","n1","n2","i1","i2","_tryBond","prevBond","currRight","bondsOrder","currLeft","currVec","startAtomRef","_currStart","checkAromatic","_checkBond","anotherAtom","anotherVec","newDir","cross","dir","newRight","_startCycle","_findLoops","checkCycle","forEachComponent","component","newCycle","markCycles","detectCycles","_getSphereSliceRadiusRange","zMin","zMax","dzMin","dzMax","rzMin","rzMax","rMin","rMax","_getCircleSliceRadiusRange","yMin","yMax","dyMin","dyMax","ryMin","ryMax","VoxelWorld","box","vCellSizeHint","_box","getSize","divide","_last","_cellSize","_cellInnerR","_cellOuterR","numVoxels","_voxels","addAtoms","voxelIdx","_findVoxel","_zero","_voxel","point","voxel","_forEachAtomInVoxel","_xRange","Vector2","_yRange","_zRange","_forEachVoxelWithinRadius","xRange","yRange","zRange","_forEachVoxelWithinRadiusSimple","rRangeXY","rRangeX","xVal","yVal","zVal","isInsideX","isInsideY","isInsideZ","divideScalar","clampScalar","_vCenter","vCenter","distTouch2","distInside2","d2","r2","isInside","forEachAtomWithinDistFromMasked","dist","_forEachAtomWithinDistFromGroup","atomProc","forEachAtomWithinDistFromSelected","voxels","processIfWithin","PairCollection","MINIMAL_DISTANCE","MIN_HBOND_ENERGY","MAX_HBOND_ENERGY","COUPLING_CONSTANT","MAX_COUPLING_DISTANCE","MAX_RESIDUES_THRESHOLD","HBondInfo","_hbonds","_buildVW","_build","isBond","from","to","acc0","acc1","acceptor","energy","ri","preri","rj","prerj","_calcHBondEnergy","pairs","_residueGetCAlpha","_residueGetCO","_residueGetNH","predonor","donor","distanceHO","distanceHC","distanceNC","distanceNO","donorInfo","accInfo","BridgeType","freeze","NO_BRIDGE","PARALLEL","ANTI_PARALLEL","HelixFlag","START","MIDDLE","END","START_AND_END","StructureType","SecondaryStructureMap","_ss","_sheet","_betaPartners","_bend","_helixFlags","_chainLengths","_chains","_buildBetaSheets","_buildAlphaHelices","inResidues","chainLength","inPreferPiHelices","stride","kappa","_kappa","_isHelixStart","isTurn","_cosinusAngle","p1","p2","p3","p4","v12","v34","prevPrev","nextNext","curCA","ppCA","nnCA","ckap","skap","atan2","bridges","lenA","chainA","lenB","chainB","_testBridge","found","bridge","unshift","chainI","chainJ","ibi","iei","jbi","jei","ibj","iej","jbj","jej","_hasChainBreak","bulge","ladderset","Set","ladder","delete","sheetset","toMove","_areBridgesLinked","betai","betaj","parallel","ai","aj","has","VOXEL_SIZE","helixClassMap","loopMap","Complex","_components","_helices","_sheets","structures","_residueTypes","_sgroups","_molecules","_maskNeedsUpdate","metadata","symmetry","units","_currentUnit","addSheet","addHelix","getBonds","forEachChain","resName","rt","getSGroupCount","getSGroups","getAtomByFullname","resId","localeCompare","getChainCount","getMolecules","getMoleculeCount","forEachMolecule","molecules","forEachSGroup","groups","components","forEachVisibleComponent","getBondCount","maxSerial","chainShift","uniSerial","remnant","ser","_fillCmpEdit","addComp","comp","resCount","currStart","_fillCmpNoedit","currSubDivs","_fillComponents","enableEditing","getCurrentUnit","resetCurrentUnit","setCurrentUnit","newUnit","_computeBounds","onAtomPositionChanged","_finalizeBonds","updateStructuresMask","helices","sheets","needAutoBonding","autoConnector","other","marker","detectAromaticLoops","_finalizeMolecules","molecule","updater","structure","countAtomsByMask","getNumAtomsBySelector","resetAtomMask","markAtoms","setMask","clearMask","totalSelector","markAtomsAdditionally","clearAtomBits","reseter","getAtomNames","_atomNames","dict","getElements","_elements","getResidueNames","_residueNames","getChainNames","_chainNames","getAltLocNames","_altlocNames","_voxelWorld","addElement","srcArray","dstArray","functor","elem","joinComplexes","complexes","atomBias","bondBias","residueBias","chainBias","componentBias","bias","processBond","processResidue","processChain","processComponent","doNothing","ssMap","getSheet","item","lastCode","lastSheetIndex","lastHelixIndex","curStructure","curCode","curResidue","curSheetIndex","loopType","curSheet","pow2ceil","Volume","dimensions","vecSize","volumeInfo","_dimVec","_volumeInfo","_dimX","_dimY","_dimZ","_rowElements","_planeElements","_totalElements","_data","getValue","setValue","addValue","getDimensions","getBox","getVolumeInfo","getCellSize","boxSize","computeGradient","vl","vs","xSize","ySize","zSize","volMap","_voxelValue","zi","zm","zp","yi","ym","yp","xi","xm","xp","getTiledTextureStride","buildTiledTexture","tilesX","tilesY","tileRow","texture","DataTexture","LuminanceFormat","UnsignedByteType","UVMapping","ClampToEdgeWrapping","LinearFilter","needsUpdate","getData","getDirectIdx","getStrideX","getStrideY","getStrideZ","Molecule","CSS2DObject","Object3D","_element","getElement","setTransparency","transp","op","op100","opacity","RCGroup","Group","raycast","raycaster","intersects","visible","children","enableSubset","innerOnly","disableSubset","getSubset","totalSubset","vertexScreenQuadShader","fragmentScreenQuadFromTex","fragmentScreenQuadFromTexWithDistortion","LAYERS","VOLUME","TRANSPARENT","PREPASS_TRANSPARENT","VOLUME_BFPLANE","COLOR_FROM_POSITION","SHADOWMAP","SELECTION_LAYERS","resetTransform","quaternion","updateMatrixWorldRecursive","updateMatrixWorld","addSavingWorldTransform","_worldMatrixInverse","Matrix4","matrixWorld","invert","multiply","decompose","WebGLRenderer","renderDummyQuad","_material","MeshBasicMaterial","depthWrite","_scene","Scene","_quad","Mesh","PlaneGeometry","_camera","OrthographicCamera","render","renderScreenQuad","isIdentity","identity","equals","applyToPointsArray","elements","persp","ScreenQuadMaterial","RawShaderMaterial","uniforms","srcTex","vertexShader","depthTest","renderScreenQuadFromTex","fragmentShader","renderScreenQuadFromTexWithDistortion","coef","PerspectiveCamera","setMinimalFov","angle","aspect","fov","radToDeg","atan","tan","degToRad","StereoCamera","updateHalfSized","camera","originalAspect","originalFov","updateProjectionMatrix","setDistanceToFit","Raycaster","intersectVisibleObject","gfxObj","fogFarPlane","intersectObject","nearPlane","near","matrixWorldInverse","farPlane","far","extractScale","_v","te","det","determinant","_calcCylinderMatrix","posBegin","posEnd","posCenter","matScale","makeScale","matRotHalf","makeRotationX","matRotLook","vUp","lookAt","setPosition","_calcChunkMatrix","eye","up","rad","_groupHasGeometryToRender","group","hasGeoms","_buildDistorionMesh","widthSegments","heightSegements","calcInverseBarrel","epsilon","prevR2","curR2","dr","geo","getAttribute","setXY","BufferAttribute","copyAtList","attribute","indexList","fillArray","startIndex","endIndex","removeChildren","clearTree","LineSegments","Line","geometry","dispose","destroyObject","belongToSelectLayers","layers","processObjRenderOrder","root","idMaterial","renderOrder","isGroup","applySelectionMaterial","setValues","depthFunc","LessEqualDepth","overrideColor","lights","shadowmap","setUberOptions","fixedColor","Color","zOffset","getMiddlePoint","point1","point2","optionalTarget","addScaledVector","_oldInstancedBufferGeometryCopy","InstancedBufferGeometry","source","instanceCount","calcCylinderMatrix","calcChunkMatrix","groupHasGeometryToRender","buildDistorionMesh","gfxutils","_defaultBoundaries","Visual","dataSource","_dataSource","release","getDataSource","_ensureArray","EntityList","entities","_list","_dict","_indices","entity","register","registerInList","unregisterFromList","registerInDict","unregisterFromDict","unregister","all","makeContextDependent","defineProperties","CollisionSphere","_radius","_sphere","sphere","ray","intersectSphere","distance","origin","SphereCollisionGeo","setSphere","inters","chunkIdx","computeBoundingBox","computeBoundingSphere","tmpColor","OFFSET_SIZE","COLOR_SIZE","setArrayXYZ","setArrayXYZW","InstancedSpheresGeometry","spheresCount","sphereComplexity","useZSprites","_sphGeometry","SphereBufferGeometry","_init","setItem","itemIdx","itemPos","itemRad","_offsets","setColor","colorVal","_colors","startUpdate","finishUpdate","setOpacity","chunkIndices","alphaArr","_alpha","geom","sphereGeo","alpha","fill","InstancedBufferAttribute","MAX_IDC_16BIT","VEC_SIZE","ChunkedObjectsGeometry","BufferGeometry","chunkGeo","chunksCount","_chunkGeo","colors","chunkSize","_chunkSize","mesh","facesPerChunk","faceIndex","srcPos","_positions","srcNorm","_normals","srcColor","dstPos","dstNorm","dstColor","dstPtOffset","ptIdxBegin","ptIdxEnd","attributes","chunkIndex","chunkIndexSize","pointsCount","use32bitIndex","indexSize","Uint32Array","Uint16Array","posOffset","setIndex","SimpleSpheresGeometry","sphGeometry","normals","geoNormals","normal","_chunkPos","_tmpPositions","tmpPos","geoPos","centerPos","tmpVector","normMtx","Matrix3","Simple2CCylindersGeometry","cylGeometry","CylinderGeometry","_chunkNorms","_tmpVector","botPos","topPos","firstOffset","secondOffset","tmpArray","geoNorm","lerpVectors","mtx1","getNormalMatrix","fromArray","toArray","applyMatrix3","colorVal1","colorVal2","MAX_POINTS_COUNT_16BIT","PTS_PER_TRIANGLE","CylinderBufferGeometry","radiusTop","radiusBottom","radialSegments","heightSegments","openEnded","thetaStart","thetaLength","parameters","hasTop","hasBottom","vertexCount","facesCount","heightHalf","positions","Uint16BufferAttribute","uvs","currVtxIdx","currFaceIdx","tanTheta","v3","v4","setXYZ","vx","vy","vz","startTIdx","lastIdx","fTIdx","currSrcIdx","getX","getY","getZ","nextTVtx","startBIdx","lastBIdx","fBIdx","currSrcBIdx","nextBVtx","invMatrix","sortNumber","_prepareCylinderInfo","chunksIdx","cylinderInfo","even","newPar","_assignOpacity","color1","color2","Instanced2CCylindersGeometry","_useZSprites","_cylGeometry","_collisionGeo","me","mtxOffset","_matVector1","_matVector2","_matVector3","_invmatVector1","_invmatVector2","_invmatVector3","colorIdx","_color1","_color2","cylinderIndices","getGeoParams","cylinderGeo","TRI_SIZE","tmpPrev","tmpNext","tmpRes","simpleNormal","normalOnCut","nearRingPt","_createExtrudedChunkGeometry","shape","ringsCount","ptsCount","totalPts","ExtrudedObjectsGeometry","_ringsCount","tmpShape","_tmpShape","hasSlope","hasCut","chunkStartIdx","_setPoints","_setSlopeNormals","_setBaseNormals","_addCut","vtxIdx","mtx","nPtsInRing","_countNormalsInRing","isSlope","shiftToExtraPt","subVectors","VERTEX_PER_SEGMENT","POS_SIZE","DIR_SIZE","COL_SIZE","startSegmentIdx","segmentsCount","elemSize","ThickLinesGeometry","_initVertices","segmentIdx","setSegment","pos1","pos2","directions","_directions","dirIdx","startSegIdx","endSegIdx","getSubsetSegments","getSubsetColors","getSubsetOpacities","getNumVertexPerSegment","getPositionSize","setSegments","startPos","startDir","setColors","_buffersSize","indexOffset","pointOffset","BaseLinesGeometry","LinesGeometry","posSize","CylinderCollisionGeo","itemOffset","COLLISION_RAD","ChunkedLinesGeometry","enableCollision","collisionGeo","segCount","segIdx","TwoColorLinesGeometry","segmentIndices","_segCounts","vectors","vecCount","tempPos1","tempPos2","CrossGeometry","POS_RAD_SIZE","IsoSurfaceGeometry","_opts","_posRad","posRad","IsoSurfaceMarchCube","pointsValuesLinear","hasIntersection","bitsInside","numCellsPerSide","vx7000000","n3","striIndicesMarchCube","edgeTable","_voxelGradientFast","grad","GridCell","_arrSize","cubeIndex","Triangle","createArray","arrSize","IsoSurface","_numTriangles","_numVertices","_volumetricData","_xAxis","_yAxis","_zAxis","_xDir","_yDir","_zDir","_prepareAxesAndDirs","volData","cellSize","xAxis","yAxis","zAxis","xDir","yDir","zDir","tmp","notZero","axe","EPSILON","_vertexInterp","isoLevel","grid","ind1","ind2","vertex","valP1","valP2","isoDiffP1","diffValP2P1","mu","_triTable","_firstIndices","_secondIndices","_vertexList","_normalList","_polygonize","triangles","firstIndices","secondIndices","vertexList","normalList","triCount","triTblIdx","triTable","_doGridPosNorms","step","appendSimple","vol","dim","stepX","stepY","stepZ","gc","gcVal","gcValSize","additions","tmpTriCount","appendVertex","axis","triVertex","_origin","posMtx","globTriCount","_gradient","compute","_remapIndices","vertexMap","idcCount","newIndices","_remapVertices","vertices","newPositions","newNormals","norm","vertexFusion","faceVer","oldVerCount","vMap","newVer","matchedIndex","setColorVolTex","colorMap","atomMap","atomWeightMap","visibilitySelector","numVerts","xs","ys","zs","colorData","strideX","strideY","strideZ","atomWeightData","atomStrideX","atomStrideY","atomStrideZ","xInv","yInv","zInv","atomLookup","atomWeights","interp","idx1","idx2","collectWeight","coefX","coefY","coefZ","newVerCount","ind","mux","muy","muz","maxWeight","dominantIdx","atomIdx","c0","c1","c2","c3","cz0","cz1","numTriangles","newTriCount","i0","toMesh","VolumeSurfaceGeometry","_visibilitySelector","_calcSurface","_findMinMax","posRadArray","itemsCount","maxPosRad","minPosRad","tmpVal","_findNumVoxels","minMaxValues","minCoordRad","maxCoordRad","gridPadding","radScale","padRad","bbox","_makeSurface","surface","isoSurf","volTexMap","packedArrays","_computeSurface","chem","QuickSurfGeometry","_shiftByOrigin","gaussdensity","atomicNum","invIsoValue","invGridSpacing","maxVoxelX","maxVoxelY","maxVoxelZ","volTexData","texStrideX","scaledRad","atomicNumFactor","radInv","radLim","radLim2","xMin","xMax","dy2dz2","addr","texAddr","expVal","density","exp","colInd","originX","originY","originZ","AVHash","maxDistance","minX","minY","minZ","maxX","maxY","maxZ","hashFunc","minW","iDim","jDim","kDim","nCells","jkDim","cellID","preHash","cid","iIdx","cellOffsets","cellLengths","maxCellLength","subArray","cellLength","neighbourListLength","withinRadii","rExtra","out","outIdx","nearI","nearJ","nearK","loI","loJ","loK","hiI","hiJ","hiK","iOffset","jOffset","cellStart","cellEnd","dataIndex","baseIndex","rSum","ContactSurface","_indexList","maxRadius","lastClip","volTex","weights","weightsMap","gridx","gridy","gridz","sinTable","cosTable","neighbours","mid","ngTorus","uniformArray","TypeName","innI","fillGridDim","initializeGrid","gridSize","initializeAngleTables","initializeHash","rExt","singleAtomObscures","innX","innY","innZ","innCI","ra2","obscured","ni","projectPoints","sigma","sigma2Inv","ax","ay","az","ar2","ng","iax","iay","iaz","minx","miny","minz","maxx","maxy","maxz","colIdx","cr","cg","cb","iz","iy","dzy2","zyOffset","ix","cIdx","ap","spx","spy","spz","dd","normalToLine","projectTorus","aIdx","bIdx","xa","ya","za","r1","innR2","cosA","dmp","rInt","cost","sint","px","py","pz","current","projectTorii","innIdx","fixNegatives","innInnI","getVolume","ContactSurfaceGeometry","contactSurface","IsoSurfaceAtomColored","radiusAt","coord","colorX","colorY","colorZ","atomType","srcAtom","IsosurfaceBuildNormals","vBoxMin","vBoxMax","_numAtoms","_probeRadius","_atomsList","_voxelList","createVoxels","numAtomsRefs","ATOM_VOXEL_REF_SCALE","aveRad","numCells","_numCells","_aveRad","side","side2","side3","xScale","_xScale","yScale","_yScale","zScale","_zScale","maxAtomsRefs","xNumVoxMult","yNumVoxMult","zNumVoxMult","radAffect","diaAffect","numVoxX","numVoxY","numVoxZ","xIndMin","yIndMin","zIndMin","xIndMax","yIndMax","zIndMax","indVoxel","indexNext","destroyVoxels","_vertices","forEachRelatedAtom","xInd","yInd","zInd","ref","indexAtom","getClosestAtom","closest","minDist2","MAX_VALUE","buildNormals","numVertices","numCloseAtoms","vNormalX","vNormalY","vNormalZ","koef","r25","r01","maxRadAffect","maxRadAffect2","expScale","gatherNormals","maxClosedAtoms","buildColors","radiusColorSmoothness","KOEF_ADD","colorsClose","weightsSum","gatherColors","weightNormalized","IsoSurfaceGeo","maxNumVertices","maxNumTriangles","needVertexColors","_maxNumVertices","_maxNumTriangles","HASH_SIZE","SSIsosurfaceGeometry","_innerBuild","geoOut","getGeo","_fromGeo","numTri3","convertToAtomsColored","atomsColored","nm","hashLines","hashEntries","getBoundingBox","bigNum","probeRadius2","atomRadiusScale","radMax","num","getCornerCoord","numPoints","vOut","invNP","tx","ty","tz","buildEdgePoint","sign","cube","indexPointValue","cTwentyFour","xb","yb","zb","isTriangleVisible","v0","a0","voxelWorld","a1","a2","addTriangle","indInGeo0","addVertexToGeo","indInGeo1","indInGeo2","itr","buildGeoFromCorners","meshRes","vCellStep","cNumVerts","vaEdges","vCorner","indCell","indY","indZ","indPointValues","indValues","offs","numTri","indTri","getNumIntersectedCells","numIntersectedCells","cubeValuesIndex","indCorner","letter","atomT","calculateGridCorners","probeRad","vDif","aLot","fx","fy","fz","indXMin","indYMin","indZMin","indXMax","indYMax","indZMax","distToSphere","createVertexHash","numHashEtriesAllocated","numHashEntryIndex","getNewHashEntry","vAdd","oneHynberes","n815851","n37633","n2453543","r106","hashResolution","marCubeResoultion","iHash","hLineIndex","dot2","iVertAdd","entryFirst","modifyExcludedFromGeo","probeSphereRadius","distToBorder","r11","innerBlockWorkAround","probeSpRad2","sideInv","radEst","xCorner","yCorner","zCorner","ok","expandFactor","meshResolution","colorMode","useVertexColors","excludeProbe","rProbeRadius","numIntersectedCellsEstim","probeRadForNormalsColors","createLabel","fieldTxt","spanText","fontSize","strings","spanNodeP","spanNodeText","LabelsGeometry","items","xTranslation","yTranslation","deltaPos","userData","textAlign","fColor","bColor","precision","renderer","capabilities","getMaxPrecision","noiseWidth","noiseHeight","_noiseData","_noiseWrapS","RepeatWrapping","_noiseWrapT","_noiseMinFilter","NearestFilter","_noiseMagFilter","_noiseMapping","noiseTexture","RGBAFormat","noise","_samplesKernel","defaultUniforms","UniformsUtils","UniformsLib","diffuse","specular","shininess","zClipValue","clipPlaneValue","nearPlaneValue","invModelViewMatrix","world2colorMatrix","dashedLineSize","dashedLinePeriod","projMatrixInv","viewport","samplesKernel","noiseTex","noiseTexelSize","srcTexelSize","uberOptionNames","uberOptions","zClipCoef","toonShading","UberMaterial","instancedPos","instancedMatrix","attrColor","attrColor2","attrAlphaColor","sphereSprite","cylinderSprite","fakeOpacity","prepassTransparancy","colorFromPos","shadowmapType","colorFromDepth","orthoCam","dashedLine","thickLine","fogTransparent","normalsToGBuffer","precisionString","DoubleSide","defines","extensions","createInstance","inst","USE_FOG","INSTANCED_POS","INSTANCED_MATRIX","ATTR_COLOR","ATTR_COLOR2","ATTR_ALPHA_COLOR","OVERRIDE_COLOR","SPHERE_SPRITE","fragDepth","CYLINDER_SPRITE","ZCLIP","CLIP_PLANE","FAKE_OPACITY","USE_LIGHTS","COLOR_FROM_POS","SHADOWMAP_PCF_SHARP","SHADOWMAP_PCF_RAND","SHADOWMAP_BASIC","COLOR_FROM_DEPTH","ORTHOGRAPHIC_CAMERA","PREPASS_TRANSP","DASHED_LINE","THICK_LINE","FOG_TRANSPARENT","drawBuffers","NORMALS_TO_G_BUFFER","TOON_SHADING","shallow","updateUniforms","SuperClass","NewObjectType","onBeforeRender","scene","_onBeforeRender","_update","UberObject","ZSpriteMesh","castShadow","receiveShadow","_geometry","_group","modelViewMatrix","multiplyMatrices","uniformsNeedUpdate","ZClippedMesh","_mvLength","_modelView","modelView","mvLength","setFromMatrixColumn","localToWorld","TextMesh","initialized","srcItem","label","visibility","SimpleMesh","_viewport","ThickLineMesh","projectionMatrix","InstancedMesh","ZClipped","ZSprite","Text","Instanced","geometries","meshes","setMatParams","_createInstancedCylinders","Geometry","initMaterial","_createLineSegmentsGeoTriplet","renderParams","thickLines","_createSimpleGeoTriplet","geoClass","_createIsoSurfaceGeoTriplet","caps","surfaceOpts","MeshCreator","createSpheres","create2CClosedCylinders","_caps","_settings","create2CCylinders","create2CLines","createCrosses","createExtrudedChains","createChunkedLines","createQuickSurface","createContactSurface","createSASSES","createLabels","TransformGroup","_inverseMatrix","_ray","Ray","geoParams","transforms","_geoParams","mat","_transforms","_createMeshes","inverseMatrix","childIntersects","ciCount","geos","meshCnt","wrapper","Name","ChemGroup","selection","_selection","_mode","_colorer","_chunksIdc","chunks","_polyComplexity","_geo","_makeGeoArgs","_mesh","chunksList","_calcChunksList","_changeSubsetOpacity","AtomsGroup","atomsIdc","AtomsSphereGroup","calcAtomRadius","getAtomColor","updateColor","needsColorUpdate","AtomsSurfaceGroup","selectedAtoms","getSurfaceOpts","AtomsSASSESGroupStub","adjustColor","inverseColor","getAtomText","getNode","colorMappings","adjust","inverse","propagateColor","rule","startsWith","templateMappings","hetatm","water","parseTemplate","AtomsTextGroup","getLabelOpts","fgColor","bgColor","_slerp","omega","oSin","AromaticGroup","radOffset","addChunk","chunksToIdx","prevVector","currVector","segmentsHeight","_segmentsHeight","leprStep","currAtomIdx","cCount","cycAtoms","chunkPoints","tmpDir","cycleRad","prevPos","currPos","upDir","currAngle","_createShape","pts","AromaticTorusGroup","torusRad","getAromRadius","radiusV","calcStickRadius","lookAtVector","mtc","points","currPoint","AromaticLinesGroup","getAromaticOffset","prevPt","getAromaticArcChunks","ResiduesGroup","chunksIdc","resIdx","NucleicItemGroup","stickRad","getResidueColor","_processItem","NucleicCylindersGroup","cyl1","cyl2","NucleicSpheresGroup","calcMatrix","_buildStructureInterpolator","argTrans","transformT","tt","newt","ans","_addPoints","centerPoints","topPoints","tp","_addPointsForLoneResidue","nucleic","nameFrom","nameTo","posFrom","posTo","shift","wing","cpPrev","tpPrev","cpNext","tpNext","_calcPoints","firstIdx","_prevIdx","_nextIdx","arrIdx","_extrapolate2","otherIdx","prevIdx","nextIdx","CartoonHelper","startIdx","endIdx","pointsArrays","_topInterp","_centerInterp","_shift","_valueStep","_segmentsCount","prepareMatrices","firstRad","secondRad","mtcCount","outMtc","currRad","topInterp","cenInterp","currentValue","mtxIdx","lerpVal","currTop","currCenter","nextCenter","_loopThrough","subDiv","subDivI","subDivN","idc","matrixHelper","prevLast","prevSecondRad","getResidueRadius","ResiduesSubseqGroup","cmpMultiplier","getHeightSegmentsRatio","getTension","chunkIdc","subdivs","ResiduesTraceGroup","chunk","getCylinderCount","BondsGroup","drawMultiple","drawMultiorderBonds","showAromatic","showAromaticLoops","bondsIdc","bondsCount","getBondOrder","bondIdx","BondsCylinderGroup","emptyOffset","calcSpaceFraction","normDir","leftPos","rightPos","currBondIdx","atom1","atom2","a1Pos","a2Pos","minRad","currStickRad","STEP_SIZE","BondsLinesGroup","bondDir","a1Hangs","a2Hangs","AtomsProcessor","_checkAtom","atomsGroup","meshIdx","chSubset","subsetEl","OrphanAtomsProcessor","ResiduesProcessor","ResidueGroup","_checkResidue","residuesGroup","checkResidue","ResidueProcessor","NucleicProcessor","SubseqsProcessor","jEnd","BondsProcessor","bondsGroup","AromaticProcessor","cycleIdx","perCycle","Atoms","OrphanAtoms","Residues","Nucleic","Subseqs","Bonds","Aromatic","processors","_bakeGroup","triplet","Processor","GroupsFactory","AtomsSpheres","gfxTriplet","OrphanedAtomsCrosses","BondsCylinders","BondsLines","CartoonChains","TraceChains","NucleicSpheres","NucleicCylinders","ALoopsTorus","ALoopsLines","QuickSurfGeo","ContactSurfaceGeo","SASSESSurfaceGeo","TextLabelsGeo","Mode","identify","buildGeometry","depGroups","currGroup","newGroup","getRenderParams","LinesMode","shortName","LicoriceMode","BallsAndSticksMode","VanDerWaalsMode","TraceMode","TubeMode","_residue","TUBE_RADIUS","CartoonMode","secCache","getResidueStartRadius","secOpts","getResidueEndRadius","ARROW_END","startRad","endRad","_res","tubeRad","secHeight","secData","SurfaceMode","surfaces","surfaceNames","getVisibilitySelector","isSurface","QuickSurfaceMode","useBeads","IsoSurfaceMode","_excludeProbe","_radScale","IsoSurfaceSASMode","IsoSurfaceSESMode","ContactSurfaceMode","TextMode","getTemplateOptions","lerpColor","beta","g1","b1","g2","b2","Palette","getElementColor","asIs","elementColors","defaultElementColor","residueColors","defaultResidueColor","getChainColor","chainColors","getSecondaryColor","secondaryColors","defaultSecondaryColor","getSequentialColor","getGradientColor","gradientName","gradients","defaultNamedColor","getNamedColor","namedColors","minRangeColor","midRangeColor","maxRangeColor","defaultGradientColor","namedColorsArray","rainbow","temp","hot","cold","reds","blues","CL","FE","NI","CU","BR","HE","LI","BE","NE","NA","MG","AL","SI","AR","SC","TI","CR","MN","ZN","GA","GE","AS","KR","RB","SR","ZR","NB","TC","RU","RH","PD","AG","CD","IN","SN","SB","TE","XE","BA","LA","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","YB","LU","HF","TA","RE","OS","IR","PT","AU","HG","TL","PB","BI","PO","AT","RN","FR","RA","AC","TH","PA","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR","RF","DB","BH","HS","MT","dna","rna","cpkPalette","jmolPalette","vmdPalette","palettes","Colorer","ElementColorer","ResidueTypeColorer","SequenceColorer","ChainColorer","SecondaryStructureColorer","secondary","UniformColorer","ConditionalColorer","parsed","_subsetCached","ConformationColorer","TemperatureColorer","OccupancyColorer","_getColorByOccupancy","HydrophobicityColorer","hydrophobicity","MoleculeColorer","scaleColor","CarbonColorer","colorCarbon","colorNotCarbon","neutralColor","intensity","materialList","_gatherObjects","meshTypes","createDerivativeMesh","layer","newMesh","traverseMeshes","func","applyTransformsToMeshes","processTransparentMaterial","matValues","prepassTranspMesh","processColFromPosMaterial","colFromPosMesh","createShadowmapMaterial","shadowmapMesh","isShadowmapMesh","removeShadowmapMaterial","forEachMeshInGroup","processObj","_countMeshTriangles","attribs","property","currAttr","faces","countTriangles","totalCount","meshutils","Representation","startMaterialValues","selectorString","materialPreset","needsRebuild","setMode","unmarkAtoms","setMaterialPreset","selectionGeo","buildSelectionGeometry","sg","matrixAutoUpdate","compare","repSettings","selStr","valueOf","modeDiff","colorerDiff","change","newSelectorObject","newSelector","newMode","newColorer","newMaterial","_traverseComponentGroups","ComplexEditor","ComplexComponentEditor","complexVisual","_complexVisual","_inProgress","_componentTransforms","_bakeComponentTransform","_resetComponentTransform","finalizeEdit","discard","getAltObj","pivot","visual","getSelectedComponent","getSelectionGeo","selectionMask","getSelectionBit","reprNode","bbmin","bbmax","updateMatrix","ComplexFragmentEditor","_getSelectionBorderAtoms","_fragmentBoundAtoms","pivotPos","_fragmentGeo","_fragmentSelectionGeo","vg","smeshes","sm","selectionBit","makeTranslation","_bakeAtomTransform","isFreeRotationAllowed","boundAtoms","transformDirection","atomHash","ComponentEditor","FragmentEditor","ComplexVisualEdit","lookupAndCreate","entityList","specs","Entity","ComplexVisual","_reprList","_repr","_reprListChanged","_selectionBit","_reprUsedBits","_selectionCount","_selectionGeometry","getSelectionCount","getEditor","_editor","repCount","desc","status","repGet","_getFreeReprIdx","bits","NUM_REPRESENTATION_BITS","newSelectionBit","originalSelection","buildSelectorFromMask","def","hide","rebuildSelectionGeometry","resetSelectionMask","updateSelectionMask","pickedObj","otherObj","expandSelection","tmpMask","deselectionMask","shrinkSelection","multiple","getSelectionCenter","selRule","reprList","repr","Promise","resolve","errorOccured","setTimeout","hasGeometry","DEBUG","setNeedsRebuild","_buildSelectorFromSortedLists","optimizeList","NaN","expression","and","residx","forSelectedResidues","beginComponentEdit","editor","beginFragmentEdit","setMaterialValues","needTraverse","vertexVolumeFaces","fragmentVolumeFaces","vertexVolume","fragmentVolume","vertexFarPlane","fragmentFarPlane","volumeUniforms","volumeDim","tileTex","tileTexSize","tileStride","boxAngles","_isoLevel0","_flipV","_BFLeft","_BFRight","_FFLeft","_FFRight","_WFFLeft","_WFFRight","overrideUniforms","defUniforms","facesPosMaterialParams","sideType","BackFacePosMaterial","ShaderMaterial","backFaceParams","BackSide","ShaderParams","FrontSide","BackFacePosMaterialFarPlane","matUniforms","aspectRatio","farZ","tanHalfFOV","matWorld2Volume","shaderParams","FrontFacePosMaterial","frontFaceParams","VolumeMaterial","updateDefines","ISO_MODE","STEPS_COUNT","VolumeMesh","Plane","cullFlag","_corners","_edges","_edgeIntersections","edgeIntersections","_updateVertices","edges","constant","vert","cornerMark","edgeMark","curEdge","curEdgeInter","CheckX","CheckY","CheckZ","curEdgeIdx","curEdgeSource","face","nextVertex","coplanarPoint","_collectVertices","_sortIndices","_updateIndices","faceIdx","vRight","vDir","rightProj","numIndices","setDataSource","vm","image","volInfo","obtuseAngle","_updateIsoLevel","mean","dmean","dmin","span","dmax","sd","_nearClipPlaneOffset","_pos","_norm","_norm4D","Vector4","_matrixWorldToLocal","_clipPlane","nearClipPlaneOffset","norm4D","matrixWorldToLocal","getWorldDirection","getWorldPosition","setFromNormalAndCoplanarPoint","_flattenArray","VolumeBounds","_projectionTable","XY","XZ","YZ","bSize","offsetVert","_getBaseVertices","flatVertices","_lines","LineBasicMaterial","projTable","proj","inv","currDelta","angleValue","getMesh","VolumeFarPlane","volume","planeGeo","_initPlaneGeo","_plane","frustumCulled","doubleSided","matWorldToVolume","_renderer","planeCamPos","normalMatrix","volumeMatrix","DEG2RAD","VolumeVisual","_frame","showFrame","_farPlane","getBoundingSphere","needShow","LoaderList","someLoaders","SomeLoader","canProbablyLoad","Loader","_source","_options","_abort","_agent","abort","extractName","FileLoader","_binary","blob","reader","FileReader","readAsArrayBuffer","readAsText","File","urlStartRegexp","XHRLoader","request","ImmediateLoader","ParserList","someParsers","format","formats","SomeParser","canProbablyParse","parseSync","getModel","model","_parseHeader","Remark290","_matrix","_matrixIndex","stream","readString","matrixRow","readCharCode","matrixData","matrixIndex","parseFloat","Remark350","assemblies","_assembly","assembly","PDBStream","_start","_nextCR","_nextLF","_next","_end","readLine","readChar","readInt","readFloat","TAG_LENGTH","nameToElement","veryLong","pdbStartRegexp","remarkParsers","PDBParser","_serialAtomMap","_modelId","_compaundFound","_biomoleculeFound","_allowedChainsIDs","_lastMolId","_remarks","_remark","_compndCurrToken","fileType","_fixBondsArray","_fixChains","remark290","isUndefined","remark350","chainDict","chainObj","idChainMap","nj","_parseATOM","chainID","resSeq","_parseENDMDL","_parseCONECT","serial0","serial1","serial2","serial3","serial4","_parseCOMPND","tokenIdx","chainStr","lastChar","_parseREMARK","remarkNum","remark","RemarkParser","_parseHELIX","fields","_parseSTRUCTURE","_parseSHEET","pars","adder","startId","endId","codeOfS","serialNumber","structureName","helLength","shWidth","shCur","shPrev","startChainID","endChainID","startSequenceNumber","iCodeStr","startICode","endSequenceNumber","endICode","cs","_parseHEADER","classification","date","_parseTITLE","title","tagParsers","HEADER","HETATM","ENDMDL","CONECT","COMPND","REMARK","cOrderCharCodes","cmlStartRegexp","CMLParser","_readOnlyOneMolecule","_rebuidBondIndexes","countBonds","idxs","atomRefs2","_createSGroup","moleculeArr","fieldData","atomRefs","placement","fieldName","_extractSGroup","_extractSGroups","firstAtomRef","sgroupRef","mapEntry","cycleFuncInner","cycleFunc","x2","x3","y2","y3","z3","atomsRef","_traverseData","dom","parseNode","xmlNode","nodeName","nodeValue","jsonNode","existing","childNodes","_findSuitableMolecule","molSet","atomArray","_selectComponents","DOMParser","doc","parseFromString","traversedData","rawData","prepareComponentCompound","ret","atomLabels","labelsCount","localBond","bondArray","addCurrBond","orderAttr","tc","labels","_breadWidthSearch","retStruct","originalCML","cml","retData","filteredData","rd","_packLabel","compId","molId","_unpackLabel","molID","breadthQueue","componentID","labeledAtoms","startID","_parseBond","eAtom","mainAtom","_parseSet","varData","currentLabel","addFunc","complexAtom","reorder","atomCharge","lLabel","atomFullNameStruct","elementType","countRef","currAtomComp","strLabel","stringify","atomSerial","added","mrvValence","sGrp","moleculaSet","totalAtomsParsed","joinedComplex","ArrayComparator","original","_original","_sum","candidate","sorted","secStructToType","getFirstByte","buf","MMTFParser","isArrayBuffer","_onModel","_modelData","_onChain","chainData","_onGroup","groupData","_updateSecStructure","_onAtom","atomData","_onBond","bondData","helixClasses","_ssType","_ssStruct","_ssStart","struct","_updateMolecules","mmtfData","chainsInModel0","chainIndexList","description","_traverse","structureId","releaseDate","eventCallbacks","modelData","_linkAtomsToResidues","_findSynonymousChains","named","_parseAssemblyInfo","bioAssemblyList","baInfo","transformList","chainListCheck","chainNames","allChains","_chainsByName","transpose","_markHeteroAtoms","_joinSynonymousChains","primaryChainsArray","primaryChainsHash","primary","ParsingError","column","captureStackTrace","parseLine","parseColumn","_isWhitespace","_inlineIndexOf","ch0","readCIF","newline","block","keysCount","valuesCount","_parseValue","_storeKey","_storeValue","keyIndex","cRequiredAtomFields","cSecondaryCoding","helx","turn","strn","getTypeFromId","typeId","arrize","arrayLikeObject","AtomDataError","_getOperations","operList","vector","ops","_extractOperations","assemblyGen","opsDict","groupStr","gps","grIdx","grCount","gr","gp","es","cnt","ii","nn","newMtx","CIFParser","asymDict","_toComplex","cifData","complexData","_extractAtoms","_extractSecondary","_extractAssemblies","_extractMolecules","_extractMetadata","struct_keywords","pdbx_keywords","databaserev","database_PDB_rev","date_original","molData","pdbx_description","atom_site","auth_seq_id","Cartn_x","Cartn_y","Cartn_z","label_atom_id","group_PDB","chainIdc","auth_asym_id","chainLabelIdc","label_asym_id","serials","iCodes","pdbx_PDB_ins_code","resNames","label_comp_id","type_symbol","tempFactors","B_iso_or_equiv","occupancies","charges","pdbx_formal_charge","altLocs","label_alt_id","models","pdbx_PDB_model_num","label_entity_id","moleculeIdx","struct_conf","_extractConfs","struct_sheet_range","_extractSheets","sheetData","sheet_id","beg_label_seq_id","end_label_seq_id","beg_label_asym_id","sheetNames","strandNames","starts","beg_auth_seq_id","ends","end_auth_seq_id","stICodes","pdbx_beg_PDB_ins_code","endICodes","pdbx_end_PDB_ins_code","helicesData","conf_type_id","comments","details","lengths","pdbx_PDB_helix_length","pdbx_PDB_helix_class","asmGen","pdbx_struct_assembly_gen","asmIdx","assembly_id","asmOper","oper_expression","asmList","asym_id_list","pdbx_struct_oper_list","asm","assemblyOps","valueType","singular","VolumeModel","_xyz2crs","_header","_boxSize","_boxStart","extent","nstart","crs2xyz","cellDims","angles","_typedCheck","isTypedArray","_buff","TypeError","_fillHeader","headerFormat","arrays","_parseArray","_parseVector","_buffer","_setAxisIndices","_setOrigins","_getAxis","header","gamma","z1","z2","xaxis","yaxis","zaxis","_getXYZdim","_getVolumeInfo","_setBoxParams","shiftX","shiftY","_getXYZbox","_toXYZData","CCP4Header","ispg","nsymbt","lksflg","customData","machine","nlabel","Ccp4Model","u32","i32","f32","xyz2crs","xyzData","crsIdx","CCP4Parser","XYZParser","_atomsInf","_fileName","_parseToAtomsInf","endnAtoms","endComment","startAtomsInf","_parseAtomsInf","words","PubChemParser","jsonData","PC_Compounds","aids","aid","fromPairs","zip","coords","conformers","aids1","aid1","aids2","aid2","orders","SDFStream","_strings","_currentStart","_currentStringIndx","setStart","getNextString","getCurrentString","getStringFromStart","numb","findNextDataItem","curStr","findNextCompoundStart","probablyHaveDataToParse","chargeMap","orderMap","typeMap","sdfAndMolRegexp","sdfRegExp","fileFormat","SDF","MOL","possibleNameTags","possibleIDTags","possibleTitleTags","tagsNames","tags","buildChainID","codes","trunc","reverse","SDFParser","_format","_metadata","_currentMolProps","_compoundIndx","_assemblies","_atomsParsed","_atomsIndexes","_parseAtoms","_parseBonds","bondsNum","bondType","_parseMOL","countsLine","_parseDataItem","_parseCompound","props","_tryToUpdateMoleculeData","_buildAssemblies","_buildMolecules","_searchTag","_tryToFind","tagsList","tagPossibleNames","_finalizeMetadata","defineFormat","DSN6Header","div","DSN6Model","i16","_pointCalculate","byteBuffer","counter","_blockCalculate","zBlock","yBlock","xBlock","inRange","blocks","_calculateInfoParams","dispersion","minDensity","maxDensity","DSN6Parser","canParse","checkDataTypeOptions","GROReader","getNext","GROParser","_time","_residueNumber","_residueName","_atomName","_atomNumber","_atomPosition","_atomVelocity","filetype","_parseTitle","_parseNumberOfAtoms","_parseAtom","positionX","positionY","positionZ","un","am","nc","du","resNumberRegex","spacesRegex","splitToFields","MOL2Parser","_currPosIdx","_currStartIdx","_parseRawStrings","_toStringFromStart","MOL2Data","newPosIdx","_toHeaderString","_toStringFromHeader","_setStart","_probablyHaveDataToParse","_findNextCompoundStart","_parseMolecule","parsedStr","_setResidue","originAtomId","targetAtomId","_fixSerialAtoms","currMolecule","molResidues","ExporterList","someExporters","Exporter","exportSync","export","PDBResult","_resultArray","_currentStr","_tag","_fixedNumeration","_numeration","_tagStrNum","getResult","writeString","_currentStrLength","newTag","numeration","isBoolean","newString","writeEntireString","maxStrPos","curStrLength","finish","repeat","cStr","writeBondsArray","bondsArrays","_getSubArrays","subArraySize","subArrays","writeMatrix","matrixIndx","toFixed","writeMatrices","PDBExporter","_tags","_result","_tagExtractors","_extractHEADER","TITLE","_extractTITLE","_extractATOM","_extractCONECT","_extractCOMPND","_extractREMARK","_extractHELIX","SHEET","_extractSHEET","_stringForRemark350","_stringForRemark290","fixedBonds","strands","startIndx","_getMoleculeChains","chainsString","_Remark290","_Remark350","biomolIndx","getChainName","SourceClass","FBX_POS_SIZE","FBX_NORM_SIZE","FBX_COL_SIZE","copyFbxPoint3","srcIdx","dstIdx","copyFbxPoint4","vector4","copyTransformedPoint3","setSubArray","copyFunctor","functorOpts","arridx","FBXModel","lastPos","lastNorm","lastCol","vertsCount","indsCount","setPositions","setTransformedPositions","setNormals","setTransformedNormals","setIndices","setShiftedIndices","shifted","getVerticesNumber","addInstance","currentCount","FBXGeometry","_info","FBX1CGeometry","cl","FBX2CCylinder","_cutRawStart","_cutRawEnd","_facesPerSlice","addPerCylinder","_extendVertices","_extendIndices","cutRaw","indicesPerQuad","startToShift","_setColorRange","colorSize","part1End","part2End","capSize","cap1End","cap2End","FBXInfoExtractor","_materials","_models","_extractModelsAndMaterials","_flattenModels","layersOfInterest","Layers","checkExportAbility","_collectInstancedGeoInfo","_collectGeoInfo","_reworkIndices","faceSize","overallVertsCount","combined","verticesCount","vertCount","_collectMaterialInfo","_addToPool","_collectSpheresInfo","instCount","instMatrix","objMatrix","sphereColor","instanceIndex","_getSphereInstanceMatrix","_collectCylindersInfo","oneCCylinder","splittingInfo","_gatherCylindersColoringInfo","twoCCylinder","needToSplit","additionalVertsCount","colorStart","colorEnd","is2Colored","_getCylinderInstanceMatrix","materialIdx","_checkExistingMaterial","findIndex","differs","instIdx","matVector1","matVector2","matVector3","idxOffset","defaultDefinitions","defaultProperties","defaultMaterialLayer","defaultLayerBlock","globalSettings","FBXResult","_writeHeader","_writeDefinitions","_writeObjects","_writeRelations","_writeConnections","FBXHeaderVersion","FBXVersion","timeStampVersion","creator","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","modelVersion","allModels","_verticesIndices","_normalLayer","_colorLayer","materialVersion","allMaterials","_materialProperties","modelsList","_floatArrayToString","colorArray","layerElementColorNumber","layerElementColorVersion","layerElementColorName","colorsStr","colorIndices","normalArray","layerElementNormalNumber","layerElementNormalVersion","layerElementNormalName","normalsStr","multiLayer","multiTake","shading","culling","geometryVersion","vertStr","FBXExporter","_version","miewVersion","_extractor","loaders","parsers","exporters","tempColor","CSS2DRenderer","_height","_widthHalf","_heightHalf","_vector","_viewMatrix","_projectionMatrix","_domElement","overflow","pointerEvents","myNode","setSize","_renderObject","lerpColorAsHex","setHex","getHexString","colorAsHex","setFromMatrixPosition","localOffset","getMaxScaleOnAxis","fogFactor","smoothstep","WebkitTransform","MozTransform","oTransform","getTopWindow","VK_LEFT","VK_UP","VK_RIGHT","VK_DOWN","STATE","NONE","ROTATE","TRANSLATE","SCALE","TRANSLATE_PIVOT","FULL_STOP_THRESHOLD","Quaternion","matrix4","ObjectHandler","lastRotation","_rotate","quat","zeroPivot","makeRotationFromQuaternion","setObjects","rot","mousePrevPos","mouseCurPos","aboutAxis","mouse2rotation","setFromAxisAngle","translateOnAxis","timeSinceLastUpdate","timeSinceMove","intertia","dynamicDampingFactor","intertiaThreshold","eyeDirection","cameraUpDirection","cameraSidewaysDirection","moveDirection","mouseDelta","mousePrev","mouseCur","axisRotateFactor","setLength","rotateFactor","ObjectControls","objectPivot","hotkeysEnabled","screen","_state","_mousePrevPos","_mouseCurPos","_mainObj","_altObj","_affectedObj","_isAltObjFreeRotationAllowed","_isTranslationAllowed","_isKeysTranslatingObj","_pressedKeys","_clock","_lastUpdateTime","_listeners","mousedown","mouseup","mousemove","mousewheel","touchstartend","touchmove","getKeyBindObject","keydownup","handleResize","resetKeys","contextmenu","stopPropagation","preventDefault","innerWidth","innerHeight","getBoundingClientRect","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","enableHotkeys","allowTranslation","allow","allowAltObjFreeRotation","keysTranslateObj","isEditingAltObj","convertMouseToOnCircle","pageX","pageY","screenSize","convertMouseToViewport","rotateByMouse","aboutZAxis","getOrientation","setOrientation","getScale","setScale","curTime","_lastMouseMoveTime","speedX","speedY","altObj","button","workWithAltObj","altKey","ctrlKey","shiftKey","translatePivotByMouse","wheelDelta","detail","touches","_touchDistanceCur","_touchDistanceStart","_scaleStart","newScale","keyCode","translatePivotInWorld","setX","setY","setZ","translatePivot","setPivot","newPivot","Picker","_lastMousePos","_mouseTotalDist","_lastClickBeginTime","_lastClickPos","_clickBeginTime","touchstart","touchend","picked","pickObject","screenPos","rayCaster","unproject","fogFarValue","getMouseInViewport","curPos","timeSinceLastClickBegin","clickDist","_lastTouchdownPos","changedTouches","Axes","targetCamera","_target","_targetCamera","_object","AxesHelper","_full","autoClear","setViewport","cDataOffset","cFirstMask","cFirstShift","cSecMask1","cSecShift1","cSecMask2","cSecShift2","cThirdMask","cStrMask","cStrShift","c219","c220","cHelixIdx","cSheetIdx","secTypes","cSecNames","_createSecondary","strArray","nRes","resid","rIdx","fromUInt20ToInt20","uint20","FrameInfo","payload","callbacks","isLoading","_framesRange","frameIsReady","_frameRequest","_callbacks","_framesRequestLength","_downloadDataFn","parseBinaryData","setFrame","_prepareBuffer","framesStart","framesEnd","_framesCount","onDone","onLoadStatusChanged","onFail","onError","_parseBuffer","_bufferRequestStart","arrayBuffer","dataView","atomsCount","framesCount","_atomsCount","maxSize","chunkedFramesCount","timeStep","iName","_timeStep","posData","coordIdx","secondaryArr","hiWord","loWord","_secondaryData","nextFrame","_currFrame","_updateSecondary","myResidues","sec","oldSec","nSec","compRes","getSec","frameIdx","_cachedResidues","disableEvents","_vec","vec","SceneObject","paramsStr","getGeometry","LinesObj","_id1","_id2","_getAtomFromName","err","_atom1","_atom2","_line","computeLineDistances","_raycaster","_intersects","verticesNeedUpdate","OutlineMaterial","srcDepthTex","srcTexSize","DEPTH_OUTLINE","FXAAMaterial","bgTransparent","BG_TRANSPARENT","AOMaterial","diffuseTexture","normalTexture","depthTexture","camNearFar","projMatrix","kernelRadius","depthThreshold","_kernelOffsets","AOHorBlurMaterial","aoMap","samplesOffsets","AOVertBlurWithBlendMaterial","fogNearFar","useFog","AnaglyphMaterial","srcL","srcR","View","orientation","_transitionTime","ViewInterpolator","setup","startView","endView","_endTime","_isPaused","_srcView","_dstView","_isMoving","isMoving","wasStarted","transTime","getCurrentView","success","createView","slerp","pause","resume","MAX_COOKIE_LEN","COUNT_SUFFIX","_chunkString","chunkLen","lc","Cookies","removeCookie","cntKey","_toCount","cntVal","_getSimpleCookie","_removeSimpleCookie","setCookie","_setSimpleCookie","getCookie","cookie","_getExpirationDate","today","EXP_PERIOD_YEARS","setFullYear","toUTCString","_exists","webVRPoC","showEnterVR","cursor","currentSession","onSessionEnded","onSessionStarted","session","_gfx","xr","setReferenceSpaceType","setSession","onmouseenter","onmouseleave","onclick","sessionInit","optionalFeatures","requestSession","then","moveSceneBehindHeadset","showWebXRNotFound","stylizeElement","bottom","padding","border","font","isSessionSupported","supported","textDecoration","createWebVRButton","WebVRPoC","onToggle","_mainCamera","_button","_onToggle","_molContainer","_user","_scalingPivot","_controller1","_controller2","_pressedGripsCounter","_distance","startScalingByControllers","stopScalingByControllers","handleGripsDown","handleGripsUp","anotherController","gfx","_mainFog","_plugVRNodesIntoScene","_setControllersListeners","getController","_createControllerMesh","disable","setAnimationLoop","getSession","_unplugVRNodesFromScene","cylinder","rotateX","updateMoleculeScale","scaler","container","getCanvas","io","LinesObject","fragmentScreenQuadFromDistTex","EDIT_MODE","COMPLEX","COMPONENT","FRAGMENT","LOADER_NOT_FOUND","PARSER_NOT_FOUND","ColorManagement","updateFogRange","removeExtension","hasValidResidues","hasValidRes","reportProgress","percent","TOTAL_PERCENT","chooseFogColor","Miew","settingsCookie","cookiePath","_interpolator","_container","getElementById","head","getElementsByClassName","_containerRoot","_running","_halting","_building","_needRender","_hotKeysEnabled","_cookies","_spinner","_loading","_animInterval","_visuals","_curVisualName","_sourceWindow","registeredPlugins","_initOnSettingsChanged","getMaxRepresentationCount","_setContainerContents","_updateShadowCamera","shadowMatrix","OBB","halfSize","light","getOBB","class","frag","createDocumentFragment","_msgMode","_msgAtomInfo","_showMessage","_initGfx","_initListeners","_onKeyDown","_onKeyUp","_objectControls","_getAltObj","_picker","_onPick","file","keepRepsInfo","job","halt","msg","_showCanvas","_requestAnimationFrame","requestAnimationFrame","arezSpritesSupported","getExtension","isAOSupported","clientWidth","clientHeight","webGLOptions","preserveDrawingBuffer","premultipliedAlpha","renderer2d","WebGL1Renderer","shadowMap","autoUpdate","PCFShadowMap","getContext","setPixelRatio","devicePixelRatio","setClearColor","clearColor","stereoCam","Fog","selectionScene","selectionRoot","selectionPivot","light12","DirectionalLight","pixelRatio","getPixelRatio","shadowMapSize","mapSize","light3","AmbientLight","deviceWidth","deviceHeight","offscreenBuf","WebGLRenderTarget","minFilter","magFilter","depthBuffer","DepthTexture","UnsignedShortType","offscreenBuf2","offscreenBuf3","offscreenBuf4","volBFTex","volFFTex","volWFFTex","offscreenBuf5","FloatType","offscreenBuf6","offscreenBuf7","stereoBufL","stereoBufR","_embedWebXR","stats","_fps","_onResize","_makeUniqueVisualName","baseName","random","suffix","_addVisual","_removeVisual","_forEachVisual","_releaseAllVisuals","_forEachComplexVisual","_getComplexVisual","any","_getVolumeVisual","_getVisualForComplex","getVisuals","getComplexVisualsCount","getCurrentVisual","setCurrentVisual","run","_onTick","_discardComponentEdit","_discardFragmentEdit","enableHotKeys","_resizeOffscreenBuffers","isAnaglyph","multi","_onUpdate","_onRender","_getBSphereRadius","_bSphereForOneVisual","_bBoxForOneVisual","_bBox","_invMatrix","_points","union","_updateFog","_setUberMaterialValues","isScriptingCommandAvailable","callNextCmd","_needRebuild","_updateView","webVR","_clipPlaneUpdateValue","_fogFarUpdateValue","setRenderTarget","_renderFrame","_anaglyphMat","_size","focus","_renderShadowMap","_renderScene","setScissorTest","setScissor","cameraL","cameraR","_onBgColorChanged","_onFogColorChanged","_enableMRT","renderBuffer","textureBuffer","gl","drawBuffersWEBGL","COLOR_ATTACHMENT0","tx8","__webglTexture","bindTexture","TEXTURE_2D","fb","__webglFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT1_WEBGL","distortion","bHaveComplexes","volumeVisual","ssao","_renderWithPrepassTransparency","dstBuffer","srcBuffer","_performAO","_renderOutline","_renderSelection","_renderVolume","_performFXAA","_performDistortion","aberration","targetBuffer","_outlineMaterial","srcDepthBuffer","srcColorBuffer","currentRenderTarget","getRenderTarget","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","setBlending","NoBlending","buffers","setClear","setTest","updateMatrices","_hasSelectionToRender","selPivot","selPivotChild","_checkVolumeRenderingSupport","renderTarget","oldRT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","volumeBFMat","volumeFFMat","cubeOffsetMat","world2colorMat","volumeRenderingSupported","dstBuf","tmpBuf1","tmpBuf2","tmpBuf3","overrideMaterial","colorMask","_fxaaMaterial","_aoMaterial","_horBlurMaterial","_vertBlurMaterial","_scale","normalBuffer","srcDepthTexture","tempBuffer","tempBuffer1","_lastPick","_setEditMode","_resetObjects","setNeedRender","_resetScene","resetPivot","resetView","_export","TheExporter","exporter","rePdbId","rePubchem","reUrlScheme","resolveSourceShortcut","matchesPdbId","sourceType","matchesPubchem","compound","updateBinaryMode","TheParser","fileExt","_fetchData","TheLoader","newOptions","keyCount","loader","lengthComputable","total","loaded","promise","catch","_parseData","dataSet","onLoadEnd","anything","jobIndex","_refreshTitle","_onLoad","unload","_startAnimation","fileData","_stopAnimation","_frameInfo","isPlaying","_isAnimating","_continueAnimation","_pauseAnimation","clearInterval","minFrameTime","setInterval","_updateObjsToFrame","visualName","amberFileName","resetEd","_onLoadEd","_tweakResolution","_edLoader","loadEd","_rebuildObjects","toRemove","unitIdx","currentUnitInfo","_updateInfoPanel","rebuildActions","appendix","_extractRepresentation","defPreset","_setReps","presList","newIdx","_editMode","getElementsByTagName","_enterComponentEditMode","editors","_editors","_applyComponentEdit","_enterFragmentEditMode","selectedVisuals","_applyFragmentEdit","_updateSelection","firstLine","secondLine","aName","coordLine","nextAltObj","setPivotResidue","amount","setPivotAtom","_centerInVisual","setPivotSubset","_includesInCurSelection","_includesInSelector","screenshot","fov2Tan","tan2Fov","getDataURL","dataURL","currBrowser","canvas","canvasContext","drawImage","toDataURL","screenshotURI","originalTanFov2","areaOfInterestSize","areaOfInterestTanFov2","shotAspect","setDrawingBufferSize","uri","save","dataString","maxPerf","_gfxScore","_autoChangeResolution","setOptions","objData","bThrow","Ctor","_addSceneObject","sceneObject","objs","getState","compact","getScript","_compareReps","compareWithDefaults","currPreset","repsDiff","emptyReps","repsInfo","objectsState","_updateShadowmapMeshes","_updateMaterials","_fogAlphaChanged","evt","Boolean","sel","VIEW_VERSION","eulerOrder","euler","Euler","setFromQuaternion","srcView","dstView","setFromEuler","None","projected","fullAtomName","complexName","project","exportCML","extractRotation","extractBasis","retMat","makeBasis","updateCMLData","xml","removeAttribute","sGroup","oSerializer","XMLSerializer","serializeToString","curChainName","curChainColor","PACKAGE_VERSION","thirdParty","lodash","three","modeIdDesc","$help","colorDesc","materialDesc","addRepDesc","setGetParameterDesc","PDBID","REP_NAME","DESCRIPTION","REP_INDEX","EXPRESSION","MODE_ID","COLORER_ID","MATERIAL_ID","new","del","PARAMETER","set_save","set_restore","set_reset","PRESET","ENCODED_VIEW","removeobj","listobj","parsercli","clihelp","NULL","RepresentationMap","representationMap","representationID","strId","sortedKeys","representationsStorage","CLIUtils","repMap","repName","selectionStr","strList","joinHelpStr","helpData","sortBy","helpItem","awaitWhileCMDisInProcess","finishAwaitingCMDInProcess","modificate","selExc","modificators","modificator","argExc","pathExc","endsWith","utilFunctions","cliUtils","cmd","_val","cliutils","notimplemented","script","_printCallback","_errorCallback","cmdQueue","commandInAction"],"sourceRoot":""}