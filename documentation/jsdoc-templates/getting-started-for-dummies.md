# Getting Started with Miew Development: The Beginner's Guide

Copyright (c) 2015–2020 [EPAM Systems, Inc.](https://www.epam.com/)

![Miew screenshot](https://github.com/epam/miew/raw/master/README.png)

Table of contents:

<!-- TOC depthFrom:2 depthTo:6 withLinks:1 updateOnSave:1 orderedList:0 -->

- [Project Overview](#project-overview)
	- [Web Application](#web-application)
	- [Embeddable Component](#embeddable-component)
	- [Display Modes](#display-modes)
	- [Source Data](#source-data)
- [Biochemistry](#biochemistry)
	- [Proteins](#proteins)
	- [Nucleic Acids](#nucleic-acids)
- [Development Tools](#development-tools)
	- [Git](#git)
	- [Node.js](#nodejs)
	- [JavaScript](#javascript)
	- [IDE](#ide)
- [Usage](#usage)

<!-- /TOC -->

Быстрые ссылки:

-   промо-сайт: <https://epa.ms/miew/>
-   демо-приложение: <https://miew.opensource.epam.com/>
-   исходный код: <https://github.com/epam/miew/>


## Project Overview

### Web Application

Miew --- это приложение, позволяющее просматривать трёхмерные изображения
молекул прямо в веб-браузере, манипулировать ими, анализировать различные
характеристики. В первую очередь речь идёт о сложных биологических молекулах:
[белках][] (протеинах) и [нуклеиновых кислотах][] (ДНК, РНК). Разумеется, могут
отображаться и другие химические соединения. В программе можно рассматривать не
просто отдельные молекулы, но целые молекулярные комплексы/структуры, которые
состоят из взаимодействующих белков, РНК/ДНК и малых молекул ([лигандов][]).
Таким образом пользователи могут наглядно представить, как различные части
молекул располагаются в пространстве друг относительно друга, какие между ними
возможны взаимодействия.

> Пример сложной структуры: [Nucleosome Particles in Complex with DNA-binding Ligands][].

[белках]: https://en.wikipedia.org/wiki/Protein
[нуклеиновых кислотах]: https://en.wikipedia.org/wiki/Nucleic_acid
[лигандов]: https://en.wikipedia.org/wiki/Ligand_(biochemistry)
[Nucleosome Particles in Complex with DNA-binding Ligands]: https://miew.opensource.epam.com/?l=1M19&v=1Vo4FwggsB8JxfTXCR/aAPGbfmz84oF09uY4UvA%3D%3D


### Embeddable Component

В то же время Miew это не только полноценное приложение, но и отдельная
библиотека, предоставляющая те же возможности по просмотру молекул,
предназначенная для встройки в сторонние продукты в качестве компонента. Эта
функциональность по встраиванию позволяет расширить область применения, делая
Miew элементом визуализации в более сложных научных программах.

И сама компонента, и демонстрационное приложение разрабатывается с учетом
[адаптивного веб-дизайна][], чтобы быть одинаково удобным на экранах разного
размера, от смартфонов до больших мониторов. Заявлена поддержка последних версий
всех [ведущих браузеров][] для десктопов и мобильных платформ, а также
устаревшего, но широко распространенного Internet Explorer 11.

> Пример встраивания компоненты: [Miew in a Responsive Grid Layout][].

[адаптивного веб-дизайна]: https://en.wikipedia.org/wiki/Responsive_web_design
[ведущих браузеров]: https://browsehappy.com/
[Miew in a Responsive Grid Layout]: https://miew.opensource.epam.com/examples/grid.html


### Display Modes

Для малых молекул стандартным является отображение атомов сферами, а связей
между ними --- цилиндрами (режим [Balls and Sticks][]). Можно отображать только
связи, или только сферы, а их радиус может быть пропорционален ["размеру"
атома][]. При изучении более крупных молекул, таких как белки, расположение
отдельных атомов уже не так важно. Большее значение имеют группы атомов
([мономеры][], из которых построен полимер), их взаимное расположение и типичные
конфигурации, которые они образуют. Центры мономеров могут соединяться
отрезками, либо даже плавным сплайном переменной толщины (режим Cartoon,
отображающий [вторичную структуру][]). Часто в исследованиях полезной
оказывается ["поверхность" молекулы][], такой режим тоже предусмотрен. Есть и
другие поддерживаемые форматы данных и режимы для их отображения.

Показывать можно молекулу целиком или только определенную ее часть. Также
построенную геометрию можно раскрасить разными способами, отобразив тем самым
дополнительную информацию, начиная с типа химического элемента или мономера, и
заканчивая такими характеристиками как температурный фактор или
[гидрофобность][]. Все эти настройки вместе (режим, раскраска и подмножество
атомов) составляют _представление_ данных. Несколько представлений можно
комбинировать, отображая разные части молекулы в разных режимах.

> Пример комбинации представлений: [Гемоглобин][].

[Balls and Sticks]: https://en.wikipedia.org/wiki/Ball-and-stick_model
["размеру" атома]: https://en.wikipedia.org/wiki/Van_der_Waals_radius
[мономеры]: https://en.wikipedia.org/wiki/Monomer
["поверхность" молекулы]: https://en.wikipedia.org/wiki/Accessible_surface_area
[гидрофобность]: https://en.wikipedia.org/wiki/Hydrophobicity_scales
[Гемоглобин]: https://miew.opensource.epam.com/?l=2hhb&m=TU&c=CH&m=CS&c=UN!color:0xFF00&mt=TR&s=chain+A&s=sequence+52:72&m=TU!radius:0.8&c=UN!color:0xFF0000&s=sequence+52:72+and+not+name+C,N,O&m=LC&c=EL&mt=ME


### Source Data

Исходные данные для отображения --- это файлы, в которых записаны координаты
атомов, а также дополнительная информация. Форматов множество, но если говорить
о белках, то существует единая база данных, [Protein Data Bank][], собирающая
результаты [кристаллографии][] различных молекулярных комплексов. Этим
результатам экспериментов присваиваются идентификаторы из четырех букв и цифр,
например, один из самых маленьких белков [крамбин][] имеет идентификатор
[1CRN][] (327 атомов), а огромная рибосома хранится как [4V88][] (больше 400
тысяч атомов). Заметьте, что одни и те же молекулы могут присутствовать в базе
несколько раз, если их координаты были сняты в результате разных экспериментов
разных людей (тот же крамбин представлен более чем в 10 координатных файлах:
1CRN, 1EJG, 3NIR, ...).

В банке белков основным форматом является текстовый [PDB][], но он имеет
ограничения (по количеству атомов и остатков), поэтому ему на смену приходят
многословный [CIF][] и бинарный [MMTF][]. Miew поддерживает загрузку данных
напрямую из банка по идентификатору (`1CRN`), возможно, с указанием формата
(`cif:1CRN`, `mmtf:1CRN`).

Малые молекулы могут встречаться в формате [MOL/SDF][], CML или в других видах.
Основным доступным источником координатных файлов для распространенных
химических соединений является сайт [PubChem][]. Miew позволяет загружать данные
по имени соединения: так `pc:aspirin` загрузит трехмерные координаты
[аспирина][].

Поддерживается и совсем другой тип исходных данных --- объемные данные
[электронной плотности][], хранящиеся как трехмерное [скалярное поле][],
например, в формате [CCP4][]. Для некоторых белков из Protein Data Bank можно
подгрузить соответствующий файл электронной плотности просто по идентификатору,
например, `ccp4:3C9L`.

Разумеется, Miew может загружать данные из локального файла или запрашивать их
по заданному URL. В планах поддержка [многих форматов][] и даже других типов
данных (например, загрузка 3D геометрии в популярных форматах).

[Protein Data Bank]: http://www.rcsb.org/
[кристаллографии]: https://en.wikipedia.org/wiki/X-ray_crystallography
[крамбин]: https://en.wikipedia.org/wiki/Crambin
[1CRN]: https://www.rcsb.org/structure/1crn
[4V88]: https://www.rcsb.org/structure/4v88
[PDB]: http://www.wwpdb.org/documentation/file-format-content/format33/v3.3.html
[CIF]: http://mmcif.wwpdb.org/
[MMTF]: https://mmtf.rcsb.org/
[MOL/SDF]: http://www.wwpdb.org/documentation/file-format-content/format33/v3.3.html
[PubChem]: https://pubchem.ncbi.nlm.nih.gov/
[аспирина]: https://pubchem.ncbi.nlm.nih.gov/compound/2244
[электронной плотности]: https://en.wikipedia.org/wiki/Electron_density
[скалярное поле]: https://en.wikipedia.org/wiki/Scalar_field
[CCP4]: http://structure.usc.edu/ccp4/
[многих форматов]: https://en.wikipedia.org/wiki/Chemical_file_format


## Biochemistry

### Proteins

[Белки][] --- это макромолекулы (от сотен до сотен тысяч атомов), которые
выполняют большое количество функций в живом организме. Они представляют собой
длинные [полимерные цепочки][], состоящие из [аминокислотных остатков][],
возможно, компактно свернутые в пространстве. Существует 21 базовая
аминокислота, каждая из них имеет схожее строение, отличаясь только "хвостиком".
У каждой аминокислоты есть название, а также сокращенные трехбуквенные и
однобуквенные коды для удобства записи.

Аминокислоты связаны друг с другом при помощи [пептидных связей][] в линейные
цепочки (это обычные [ковалентные связи][] как и большинство других в молекуле).
Заданная последовательность аминокислот в белке (напр., `Phe Leu Ser Cis...`)
называется [первичной структурой][] белка.

Располагаясь в пространстве, остатки цепляются друг за друга [водородными
связями][], образуя характерные конфигурации, которые составляют [вторичную
структуру][] белка: [спирали][], [слои][], повороты, петли... В общем случае
заранее по первичной структуре нельзя предположить какие вторичные структуры
образует белок при сворачивании.

Центральный атом углерода каждой аминокислоты, с которым связан "хвостик",
называется [альфа-углеродом][]. Он является своеобразным центром остатка,
началом отсчета. Некоторые файлы данных для больших молекул содержат координаты
только для этих атомов, так как при низкой точности измерений восстановить
остальные координаты не представляется возможным.

Видеоуроки:

1.  [Introduction to Biochemistry](https://youtu.be/CHJsaq2lNjU)
2.  [Amino Acids](https://youtu.be/J6R8zDAl_vw)
3.  [Protein Structure](https://youtu.be/EweuU2fEgjw)

[Белки]: https://en.wikipedia.org/wiki/Protein
[полимерные цепочки]: https://en.wikipedia.org/wiki/Polymer
[аминокислотных остатков]: https://en.wikipedia.org/wiki/Amino_acid
[пептидных связей]: https://en.wikipedia.org/wiki/Peptide_bond
[ковалентные связи]: https://en.wikipedia.org/wiki/Covalent_bond
[первичной структурой]: https://en.wikipedia.org/wiki/Protein_primary_structure
[водородными связями]: https://en.wikipedia.org/wiki/Hydrogen_bond
[вторичную структуру]: https://en.wikipedia.org/wiki/Protein_secondary_structure
[спирали]: https://en.wikipedia.org/wiki/Alpha_helix
[слои]: https://en.wikipedia.org/wiki/Beta_sheet
[альфа-углеродом]: https://en.wikipedia.org/wiki/Alpha_and_beta_carbon


### Nucleic Acids

Белки строятся с использованием информации, которая хранится в ДНК. ДНК --- это
парные спиральные [полимерные цепочки][], состоящие из сотен миллионов
[нуклеотидов][] четырех видов: цитозин (C), гуанин (G), аденин (A) и тимин (T).
Две цепочки соединяются друг с другом [водородными связями][] между парными
нуклеотидами G-C и A-T, по-другому они не стыкуются.

Большая часть ДНК является некодирующей, и только небольшие участки ([гены][])
используются в образовании РНК (при транскрипции) для последующего построения по
ним белков (в процессе трансляции). Трем последовательным нуклеотидам в РНК
соответствует один аминокислотный остаток, такие тройки наываются [кодонами][].
Некоторые тройки кодируют одни и те же аминокислоты (есть избыточность). А
некоторые тройки являются служебными командами (старт, стоп).

В процессе [репликации][] ДНК могут происходить как случайные, так и наведенные
ошибки. Часть из них автоматически исправляется или уничтожается, оставшиеся же
приводят к [мутациям][]. Есть безобидные мутации, некоторые немного изменяют
белок (и он может перестать выполнять свою функцию в организме), а некоторые
мутации могут привести к стоп-кодону, то есть исчезновению целой части белка.

Видеоуроки:

1.  [DNA and RNA](https://youtu.be/6NhDY3IDp00)
2.  [From DNA to Protein](https://youtu.be/bKIpDtJdK8Q)

[нуклеотидов]: https://en.wikipedia.org/wiki/Nucleotide
[гены]: https://en.wikipedia.org/wiki/Gene
[кодонами]: https://en.wikipedia.org/wiki/Genetic_code
[репликации]: https://en.wikipedia.org/wiki/DNA_replication
[мутациям]: https://en.wikipedia.org/wiki/Mutation


## Development Tools

Если вы участвуете в разработке, то полезно будет ознакомиться с файлом
[CONTRIBUTING.md][], в котором описаны основные комментарии и пожелания к
процессу работы над проектом.

[CONTRIBUTING.md]: https://github.com/epam/miew/blob/master/CONTRIBUTING.md


### Git

Исходный код проектов принято хранить в [системе контроля версий][] --- у нас
используется [Git][], а в качестве основного репозитория ("сервера") служит
[GitHub][]. Для работы вам потребуется установить следующие программы:

-   [GitHub Desktop][] или/и [SourceTree][] в качестве дружелюбного
    пользовательского интерфейса,
-   [Git for Windows][] для более тонкой работы из командной строки в
    операционной системе Windows (для других ОС часто git идёт вместе с
    "инструментами разработчика", либо смотрите [Git Downloads][]).

Что можно/нужно почитать дополнительно:

-   [Pro Git Book](https://git-scm.com/book/en/v2),
-   [GitHub Guides](https://guides.github.com/).

[системе контроля версий]: https://en.wikipedia.org/wiki/Version_control
[Git]: https://git-scm.com/
[GitHub]: https://github.com/epam/miew
[GitHub Desktop]: https://desktop.github.com/
[SourceTree]: https://www.atlassian.com/software/sourcetree
[Git for Windows]: https://gitforwindows.org/
[Git Downloads]: https://git-scm.com/downloads


### Node.js

Наш проект чисто клиентский, т.е. весь его код выполняется в браузере. Для этого
он написан на [JavaScript][] (см. [раздел ниже](#javascript)) --- [скриптовом
языке][], специально для этого изобретённом. Со времени создания язык развивался
и достаточно давно стал полноценным скриптовым языком общего назначения наряду с
[Python][], [Ruby][], [Perl][]... Теперь можно выполнять программы на JS не
только в браузере, но и в командной строке, при наличии
интерпретатора/компилятора.

Зачем? Дело в том, что есть определённый ряд действий по сборке проекта, его
подготовки к публикации, которые хочется автоматизировать. Эта автоматизация
либо встроена в среду разработки (IDE), либо реализуется самостоятельно на
скриптовом языке. [Windows Batch Files][] или [Linux Shell Scripts][] не
являются переносимыми на другие платформы. Использовать для этого Python или
Perl? А зачем, если вы и так уже выучили и используете на проекте JavaScript.

Тут на помощь приходит платформа [Node.js][], предоставляющая интерпретатор и
среду выполнения скриптов, написанных на JavaScript. Помимо стандартной
библиотеки функций есть возможность использовать сторонние библиотеки (пакеты),
распространяющиеся через репозиторий [NPM][] (Node.js Package Manager). Вы и
сами можете создать свой пакет, зависящий от других и реализующий какую-нибудь
полезную функциональность. Так мы поступили и с [Miew][].

Итак, JS используется у нас как для сборки проекта, так и в самом проекте в
браузере. Для загрузки сторонних пакетов может использоваться NPM, а может
альтернативный менеджер [Yarn][], работающий с тем же репозиторием (но быстрее и
качественнее?). Подробности по сборке проекта можно прочитать в
[CONTRIBUTING.md][].

[JavaScript]: https://en.wikipedia.org/wiki/JavaScript
[скриптовом языке]: https://en.wikipedia.org/wiki/Scripting_language
[Python]: https://www.python.org/
[Ruby]: https://www.ruby-lang.org/
[Perl]: https://www.perl.org/
[Windows Batch Files]: https://en.wikipedia.org/wiki/Batch_file
[Linux Shell Scripts]: https://en.wikipedia.org/wiki/Shell_script
[Node.js]: https://nodejs.org/
[NPM]: https://www.npmjs.com/
[Miew]: https://www.npmjs.com/package/miew
[Yarn]: https://yarnpkg.com/


### JavaScript

JS --- это объектно-ориентированный скриптовый язык общего назначения. Программа
на этом языке при выполнении компилируется в промежуточное представление, а
затем выполняется на виртуальной машине, будь то в браузере или из командной
строки.

В языке используется непривычный подход к объектно-ориентированной парадигме, в
отличие от Си++ здесь нет классов в исходном смысле этого слова, вместо этого
все построено на [объектах-прототипах][]. Язык развивался, для знатаков Си++
было придумано, как создать видимость существования классов, а затем и синтаксис
языка был изменён: в него было добавлено ключевое слово `class` и многое другое.
**Обратите внимание!** Подход к объектно-ориентированному программированию при
этом не изменился, он по-прежнему прототипный.

Вы можете часто встретить упоминание двух стандартов языка.

-   Старый ES5 (ECMAScript), который поддерживается всеми браузерами, кроме
    очень древних IE. Это базовый синтаксис.

-   Новый ES6, ES2015, ES2015+, который постепенно начинает поддерживаться
    браузерами, [но не всеми и не полностью][]. При этом он постоянно
    развивается, теперь каждый год в язык [добавляются новые фичи][], проходя
    сложную и долгую [систему отбора и утверждения][].

Чтобы писать переносимые программы, приходится либо использовать старый стандарт
языка ES5, либо писать на новом и использовать "transpilers" --- своего рода
компиляторы, переводящие с одного языка на другой. Примером является
[Babel.js][], который теперь используется и в нашем проекте. В основном код Miew
был написан на ES5, а теперь постепенно переводится на ES2015+ (по мере
необходимости и по возможности).

Полезные ссылки для изучения:

-   [Современный учебник Javascript](https://learn.javascript.ru/) (на русском).
-   [Eloquent JavaScript](http://eloquentjavascript.net/).
-   [JavaScript best practices](https://www.w3.org/wiki/JavaScript_best_practices).
-   [ООП в JavaScript. Часть 1](https://dikmax.name/post/oopjs-1/),
    [Часть 2](https://dikmax.name/post/oopjs-2/) (на русском).
-   [Learn ES2015](https://babeljs.io/learn-es2015/).

[объектах-прототипах]: https://en.wikipedia.org/wiki/Prototype-based_programming
[но не всеми и не полностью]: http://kangax.github.io/compat-table/es6/#ie11
[добавляются новые фичи]: https://github.com/tc39/proposals
[систему отбора и утверждения]: https://tc39.github.io/process-document/
[Babel.js]: https://babeljs.io/


### IDE

В принципе, для разработки достаточно писать текст в Блокноте, компилировать из
командной строки npm-скриптами, а отлаживать программу встроенными в браузер
средствами. Более удобным решением является использование подходящей среды
разработки.

Хорошей средой разработки для веб-проектов является, например, [WebStorm][] от
JetBrains. Это коммерческая программа, на которую нужна личная или корпоративная
лицензия. В то же время для академических проектов студентам предлагается
[бесплатная лицензия][], которую можно продлевать каждый год, пока учишься.

> ...use software for [non-commercial, educational purposes only][], including
> conducting academic research or providing educational services.

Если у вас нет лицензии на WebStorm, или ваша задача не подходит под её условия,
то следует выбрать альтернативную среду разработки. Например, редакторы с
открытыми исходными кодами [Visual Studio Code][] или [Atom][] (они, кстати,
сами написаны на JavaScript).

[WebStorm]: https://www.jetbrains.com/webstorm/
[бесплатная лицензия]: http://www.jetbrains.com/student/
[non-commercial, educational purposes only]: http://www.jetbrains.com/student/license_educational.html
[Visual Studio Code]: https://code.visualstudio.com/
[Atom]: https://atom.io/


## Usage

Тут пример использования Miew...
